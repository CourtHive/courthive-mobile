{"version":3,"file":"index-WO08qqMY.js","sources":["../../src/transition/utilities.ts","../../src/transition/browserStorage.ts","../../src/services/matchObject/umo.ts","../../src/transition/env.ts","../../src/transition/groupGames.ts","../../src/transition/modals.ts","../../src/transition/displayUpdate.ts","../../src/assets/icons/exportwhite.png","../../src/assets/icons/recycle.png","../../src/transition/modalExport.ts","../../src/transition/formatChangePossible.ts","../../src/transition/displayPointHistory.ts","../../src/transition/displayFormats.ts","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/ascending.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/bisector.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/bisect.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/range.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/ticks.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/array.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/identity.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/axis.js","../../node_modules/.pnpm/d3-dispatch@1.0.2/node_modules/d3-dispatch/src/dispatch.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/namespaces.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/namespace.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/creator.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/local.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/matcher.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/on.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selector.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/select.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selectorAll.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/filter.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/sparse.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/enter.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/constant.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/data.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/exit.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/merge.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/order.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/sort.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/call.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/nodes.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/node.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/size.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/empty.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/each.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/attr.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/window.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/style.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/property.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/classed.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/text.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/html.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/raise.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/lower.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/append.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/insert.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/remove.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/datum.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/index.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/select.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selectAll.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/define.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/color.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/math.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/lab.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/cubehelix.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/constant.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/color.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/rgb.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/array.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/date.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/number.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/object.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/string.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/value.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/round.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/index.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/hcl.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/cubehelix.js","../../node_modules/.pnpm/d3-timer@1.0.4/node_modules/d3-timer/src/timer.js","../../node_modules/.pnpm/d3-timer@1.0.4/node_modules/d3-timer/src/timeout.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/schedule.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/interrupt.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/tween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/attr.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/delay.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/duration.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/ease.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/filter.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/merge.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/on.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/remove.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/select.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/selection.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/style.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/text.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/transition.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/index.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/cubic.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/poly.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/back.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/elastic.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/transition.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/index.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/active.js","../../node_modules/.pnpm/d3-path@1.0.3/node_modules/d3-path/src/path.js","../../node_modules/.pnpm/d3-collection@1.0.2/node_modules/d3-collection/src/map.js","../../node_modules/.pnpm/d3-collection@1.0.2/node_modules/d3-collection/src/set.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/dsv.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/csv.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/tsv.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/add.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/cover.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/data.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/extent.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/quad.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/find.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/remove.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/root.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/size.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/visit.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/visitAfter.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/x.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/y.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/quadtree.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDecimal.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/exponent.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatGroup.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDefault.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatRounded.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatTypes.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatSpecifier.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/locale.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/defaultLocale.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionFixed.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionPrefix.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionRound.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/adder.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/math.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/area.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/bounds.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/rotation.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/length.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/path/area.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/polygonContains.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/transform.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/projection/equirectangular.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/count.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/each.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/sum.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/sort.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/path.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/descendants.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/leaves.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/links.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/index.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/dice.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/tree.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/slice.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/squarify.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/resquarify.js","../../node_modules/.pnpm/d3-queue@3.0.3/node_modules/d3-queue/src/array.js","../../node_modules/.pnpm/d3-queue@3.0.3/node_modules/d3-queue/src/queue.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/array.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/ordinal.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/band.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/constant.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/number.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/continuous.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/tickFormat.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/linear.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/interval.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/millisecond.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/duration.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/second.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/minute.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/hour.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/day.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/week.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/month.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/year.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcMinute.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcHour.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcDay.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcWeek.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcMonth.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcYear.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/locale.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/defaultLocale.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/isoFormat.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/isoParse.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/colors.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category10.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20b.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20c.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/cubehelix.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/rainbow.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/viridis.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/constant.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/math.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/linear.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/point.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/line.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/noop.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/basis.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/bundle.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinal.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinalClosed.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinalOpen.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRom.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRomClosed.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRomOpen.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/monotone.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/RedBlackTree.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Edge.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Cell.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Circle.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Beach.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Diagram.js","../../node_modules/.pnpm/d3-zoom@1.1.1/node_modules/d3-zoom/src/transform.js","../../src/transition/strokeSlider.ts","../../src/transition/touchManager.ts","../../src/transition/simpleChart.ts","../../src/transition/updateStats.ts","../../src/transition/viewManager.ts","../../src/transition/swipeList.ts","../../src/transition/events.ts","../../src/transition/UUID.ts","../../src/transition/loadMatch.ts","../../src/transition/displayMatchArchive.ts","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/index.js","../../node_modules/.pnpm/@socket.io+component-emitter@3.1.0/node_modules/@socket.io/component-emitter/index.mjs","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/globalThis.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/util.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transport.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/yeast.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/socket.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/url.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/index.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/on.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/socket.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/manager.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/index.js","../../src/transition/pulseCircle.ts","../../src/config/version.ts","../../src/transition/coms.ts","../../src/transition/gameFish.ts","../../src/transition/momentumChart.ts","../../src/transition/gameTree.ts","../../src/transition/ptsChart.ts","../../src/transition/configureViz.ts","../../src/transition/updateTournamentDetails.ts","../../src/transition/updateMatchDetails.ts","../../src/transition/updateDetails.ts","../../src/transition/eventManager.ts","../../src/transition/broadcastScore.ts","../../src/transition/checkMatchEnd.ts","../../src/transition/strokeAction.ts","../../src/transition/updatePlayer.ts","../../src/transition/changeFormat.ts","../../src/transition/constants.ts","../../src/transition/classAction.ts","../../src/transition/exportMatch.ts","../../src/transition/toggleChart.ts","../../src/assets/icons/emailblack.png","../../src/transition/modalShare.ts","../../src/transition/editPoint.ts","../../src/transition/editPlayer.ts","../../src/assets/icons/points.jpg","../../src/transition/modalHelp.ts","../../src/transition/modalInfo.ts","../../src/transition/enterKey.ts","../../src/transition/clickActions.ts","../../src/transition/registerEvents.ts","../../node_modules/.pnpm/clipboard@2.0.11/node_modules/clipboard/dist/clipboard.js","../../src/config/setWindow.ts","../../src/config/initialState.ts","../../src/transition/init.ts","../../src/assets/images/courthive-transparent-logo.png","../../src/pages/courthive/default.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/constants.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/utils.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/Q.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/setLocationPath.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/matchPathToRegisteredRoutes.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForDeprecationMethods.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForForceOp.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/updateBrowserURL.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForLeaveHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForBeforeHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/callHandler.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForAfterHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForAlreadyHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForNotFoundHandler.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/errorOut.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/flushCurrent.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/updateState.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/lifecycles.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/processMatches.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/waitingList.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/index.js","../../src/router/router.ts","../../src/main.ts"],"sourcesContent":["export function isJSON(str: any) {\n  try {\n    JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nexport function showModal(text: string, data?: any) {\n  const modalText = document.getElementById('modaltext');\n  if (modalText) modalText.innerHTML = text;\n  if (data) {\n    const c2c = document.getElementById('copy2clipboard');\n    if (c2c) c2c.setAttribute('data-clipboard-text', data);\n  }\n  const modal = document.getElementById('modal');\n  if (modal) modal.style.display = 'flex';\n}\n\nexport function firstAndLast(value: string) {\n  const parts = value.split(' ');\n  let display = parts[0];\n  if (parts.length > 1) display += ' ' + parts[parts.length - 1];\n  return display;\n}\n\nexport function getOpponents(match: any) {\n  const format = match.format;\n  const sides = match.sides;\n  return 'singles' === format\n    ? sides.map(function (e: any) {\n        return firstAndLast(e[0]);\n      })\n    : sides.map(teamName);\n}\n\nfunction teamName(side: any[]) {\n  return side[0].last_name + '/' + side[1].last_name;\n}\n\nexport function attemptJSONparse(data: string) {\n  if (!data) return undefined;\n  try {\n    return JSON.parse(data);\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport function formatDate(date: string, separator = '-', format = 'YMD') {\n  if (!date) return '';\n\n  const d = new Date(date);\n  let month = '' + (d.getMonth() + 1);\n  let day = '' + d.getDate();\n  const year = d.getFullYear();\n\n  if (month.length < 2) month = '0' + month;\n  if (day.length < 2) day = '0' + day;\n\n  if (format == 'DMY') return [day, month, year].join(separator);\n  if (format == 'MDY') return [month, day, year].join(separator);\n  if (format == 'YDM') return [year, day, month].join(separator);\n  if (format == 'DYM') return [day, year, month].join(separator);\n  if (format == 'MYD') return [month, year, day].join(separator);\n  return [year, month, day].join(separator);\n}\n\nexport function generateRange(start: number, end: number) {\n  return Array.from({ length: end - start }, (_, k) => k + start);\n}\n\nexport function findUpClass(el: any, class_name: string) {\n  while (el.parentNode) {\n    el = el.parentNode;\n    if (el.classList && Array.from(el.classList).indexOf(class_name) >= 0) return el;\n  }\n  return null;\n}\n","/**\n * Whether the current browser supports local storage as a way of storing data\n * @var {Boolean}\n */\nconst _hasLocalStorageSupport = (function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n * @param {String} name The name of the property to read from this document's cookies\n * @return {?String} The specified cookie property's value (or null if it has not been set)\n */\nconst _readCookie = function (name: string) {\n  const nameEQ = name + '=';\n  const ca = document.cookie.split(';');\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n    if (c.startsWith(nameEQ)) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n};\n\n/**\n * @param {String} name The name of the property to set by writing to a cookie\n * @param {String} value The value to use when setting the specified property\n * @param {int} [days] The number of days until the storage of this item expires\n */\nconst _writeCookie = function (name: string, value: string, days?: any) {\n  const expiration = (function () {\n    if (days) {\n      const date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      return '; expires=' + date.toUTCString();\n    } else {\n      return '';\n    }\n  })();\n\n  document.cookie = name + '=' + value + expiration + '; path=/';\n};\n\nexport const browserStorage = {\n  /**\n   * @param {String} name The name of the property to set\n   * @param {String} value The value to use when setting the specified property\n   * @param {int} [days] The number of days until the storage of this item expires (if storage of the provided item must fallback to using cookies)\n   */\n  set: function (name: string, value: string, days?: any) {\n    _hasLocalStorageSupport ? localStorage.setItem(name, value) : _writeCookie(name, value, days);\n  },\n\n  /**\n   * @param {String} name The name of the value to retrieve\n   * @return {?String} The value of the\n   */\n  get: function (name: string) {\n    return _hasLocalStorageSupport ? localStorage.getItem(name) : _readCookie(name);\n  },\n\n  /**\n   * @param {String} name The name of the value to delete/remove from storage\n   */\n  remove: function (name: string) {\n    _hasLocalStorageSupport ? localStorage.removeItem(name) : this.set(name, '', -1);\n  }\n};\n","const umo: any = function () {};\n\n// these events will propagate to all objects created with factory functions\numo.addPoint_events = [];\numo.undo_events = [];\numo.reset_events = [];\n\numo.pointParser = defaultPointParser;\n\nconst formats = {\n  games: {\n    advantage: { description: 'Advantage Game', tiebreak: false, hasDecider: false, threshold: 4, minDiff: 2 },\n    noAdvantage: { description: 'No Advantage Game', tiebreak: false, hasDecider: true, threshold: 4, minDiff: 1 },\n    tiebreak7a: { description: 'Tiebreak to 7', tiebreak: true, hasDecider: false, threshold: 7, minDiff: 2 },\n    tiebreak10a: { description: 'Tiebreak to 10', tiebreak: true, hasDecider: false, threshold: 10, minDiff: 2 },\n    tiebreak12a: { description: 'Tiebreak to 10', tiebreak: true, hasDecider: false, threshold: 12, minDiff: 2 },\n    tiebreak9n: {\n      description: 'Tiebreak to 9, Golden Point',\n      tiebreak: true,\n      hasDecider: true,\n      threshold: 9,\n      minDiff: 1,\n    },\n  },\n  sets: {\n    AdSetsTo6tb7: {\n      description: 'Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 6,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'tiebreak7a',\n    },\n    NoAdSetsTo6tb7: {\n      description: 'No-Ad, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 6,\n      minDiff: 2,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak7a',\n    },\n    NoAdSetsTo4tb7: {\n      description: 'No-Ad, 4 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 4,\n      minDiff: 0,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak7a',\n    },\n    longSetTo6by2: {\n      description: 'Advantage, 6 games for set, win by 2 games',\n      hasDecider: false,\n      threshold: 6,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'advantage',\n    },\n    supertiebreak: {\n      description: 'Supertiebreak',\n      hasDecider: true,\n      threshold: 1,\n      minDiff: 1,\n      children: 'tiebreak10a',\n      decidingChild: 'tiebreak10a',\n    },\n    pro10a12: {\n      description: '10 Game No Ad Pro Set; tiebreak to 12',\n      hasDecider: true,\n      threshold: 10,\n      minDiff: 2,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak12a',\n    },\n    pro8a7: {\n      description: '8 Game Pro Set; tiebreak to 7',\n      hasDecider: true,\n      threshold: 8,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'tiebreak7a',\n    },\n    college6a7: {\n      description: '6 Game College Doubless Set; no advantage; tiebreak to 7',\n      hasDecider: true,\n      threshold: 6,\n      minDiff: 2,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak7a',\n    },\n  },\n  matches: {\n    '3_6a_7': {\n      name: 'Standard Advantage',\n      description: 'best of 3 sets, Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'AdSetsTo6tb7',\n    },\n    '3_6n_7': {\n      name: 'Standard No-Advantage',\n      description: 'best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo6tb7',\n      decidingChild: 'NoAdSetsTo6tb7',\n    },\n    '3_4n_10': {\n      name: 'Standard Under 10',\n      description: 'best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo4tb7',\n      decidingChild: 'supertiebreak',\n    },\n    '1_4n_7': {\n      name: 'Under 10 Qualifying',\n      description: '4 games for set, No Advantage, Tiebreak to 7 at 3-3',\n      hasDecider: false,\n      threshold: 1,\n      minDiff: 0,\n      children: 'NoAdSetsTo4tb7',\n      decidingChild: 'NoAdSetsTo4tb7',\n    },\n    '3_6n_10': {\n      name: 'No-Ad, 3rd Set Supertiebreak',\n      description: 'best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo6tb7',\n      decidingChild: 'supertiebreak',\n    },\n    '5_6a_7': {\n      name: 'US Open Men',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 3,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'AdSetsTo6tb7',\n    },\n    '5_6a_7_long': {\n      name: 'Grand Slam Men - Final Advantage Set',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games',\n      hasDecider: true,\n      threshold: 3,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'longSetTo6by2',\n    },\n    '3_6a_7_long': {\n      name: 'Grand Slam Women - Final Advantage Set',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'longSetTo6by2',\n    },\n    '1_8a_7': {\n      name: '8 Game Pro Set',\n      description: '1 set, Advantage, 8 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 1,\n      minDiff: 0,\n      children: 'pro8a7',\n      decidingChild: 'pro8a7',\n    },\n    '1_6a_7': {\n      name: '6 Game College Doubles Set',\n      description: '1 set, No Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 1,\n      minDiff: 0,\n      children: 'college6a7',\n      decidingChild: 'college6a7',\n    },\n  },\n};\n\numo.formats = () => formats;\numo.newFormat = ({ type, code, description, tiebreak, hasDecider, threshold, minDiff, children, decidingChild }) => {\n  const hasType = Object.keys(formats).indexOf(type) >= 0;\n  const hasCode = hasType && Object.keys(formats[type]).indexOf(code) >= 0;\n  if (hasType && hasCode) return false;\n  formats[type][code] = { description, tiebreak, hasDecider, threshold, minDiff, children, decidingChild };\n  return true;\n};\n\numo.stateObject = ({ index, object, parent_object, child, format, common = umo.common() }) => {\n  const so: any = {};\n  so.child = child;\n  so.format = format;\n  so.child_attributes = ['hasDecider', 'threshold', 'minDiff', 'tiebreak', 'code', 'description'];\n\n  (so.reset = (format?: any) => {\n    so.children = [];\n    so.local_history = [];\n    so.counter = [0, 0];\n    so.first_service = 0;\n    if (!parent_object) {\n      common.metadata.reset();\n      common.metadata.resetStats();\n      common.history = [];\n      common.perspective_score = false;\n      common.events.reset().forEach((fx) => fx());\n    }\n    if (!parent_object && format) {\n      so.format.singles(true);\n      so.format.type(format);\n    }\n  })();\n\n  so.set = {\n    index(value) {\n      if (!arguments.length) return index;\n      if (!isNaN(value)) index = value;\n      return so.set;\n    },\n    liveStats(value) {\n      if (!arguments.length) return common.live_stats;\n      if ([true, false].indexOf(value) < 0) return false;\n      if (value && !common.live_stats && so.history.points().length) {\n        common.metadata.resetStats();\n        common.stats.counters();\n      }\n      if (!value && common.live_stats) common.metadata.resetStats();\n      common.live_stats = value;\n      return so.set;\n    },\n    perspectiveScore(value) {\n      if (!arguments.length) return common.perspective_score;\n      if (so.history.points().length) return false;\n      if ([true, false].indexOf(value) >= 0) common.perspective_score = value;\n      return so.set;\n    },\n    firstService(value) {\n      if (!arguments.length) return so.first_service;\n      if (common.metadata.serviceOrder().indexOf(value) < 0) return false;\n      so.first_service = value;\n      return so.set;\n    },\n  };\n\n  so.history = {};\n  so.history.local = () => so.local_history;\n  so.history.action = (action) => common.history.filter((episode) => episode.action == action);\n  so.history.points = (set) => {\n    let points = common.history.filter((episode) => episode.action == 'addPoint').map((episode) => episode.point);\n    if (set != undefined) points = points.filter((point) => point.set == set);\n    return points;\n  };\n  so.history.score = () => {\n    if (object == 'Game') return so.history.points().map((point) => point.score);\n    return [].concat(...so.children.map((child) => child.history.score()));\n  };\n  so.history.games = () =>\n    object == 'Set' ? so.local_history : [].concat(...so.children.map((child) => child.history.games()));\n  so.history.lastPoint = () => {\n    const point_history = so.history.points();\n    return point_history[point_history.length - 1] || { score: '0-0' };\n  };\n  so.history.common = () => common.history;\n\n  so.score = () => {\n    const counters: any = {\n      local: so.counter,\n    };\n    counters.points =\n      object == 'Game'\n        ? so.complete()\n          ? [0, 0]\n          : so.counter\n        : so.lastChild()\n          ? so.lastChild().score().counters.points\n          : [0, 0];\n    counters.games =\n      object == 'Set'\n        ? so.complete()\n          ? [0, 0]\n          : so.counter\n        : object == 'Match'\n          ? so.lastChild()\n            ? so.lastChild().score().counters.games\n            : [0, 0]\n          : undefined;\n    counters.sets = object == 'Match' ? so.counter : undefined;\n    // let current = {};\n    const score: any = { counters };\n    score.points =\n      object == 'Game'\n        ? so.complete()\n          ? '0-0'\n          : so.scoreboard()\n        : so.lastChild()\n          ? so.lastChild().score().points\n          : '0-0';\n    score.games =\n      object == 'Set'\n        ? so.complete()\n          ? '0-0'\n          : so.perspectiveScore().join('-')\n        : so.lastChild()\n          ? so.lastChild().score().games\n          : '0-0';\n    score.sets =\n      object == 'Match'\n        ? so.complete()\n          ? '0-0'\n          : so.perspectiveScore().join('-')\n        : so.lastChild()\n          ? so.lastChild().score().sets\n          : '0-0';\n    score.components = {};\n    if (object == 'Match' && so.children.length) {\n      score.components.sets = so.children.map((set) => {\n        const map: any = { games: set.score().counters.local };\n        if (set.lastChild() && set.lastChild().format.tiebreak()) map.tiebreak = set.lastChild().score().counters.local;\n        return map;\n      });\n    }\n    score.display = {};\n    return score;\n  };\n\n  so.accessChildren = () => so.children;\n  so.lastChild = () => so.children[so.children.length - 1];\n  so.scoreDifference = () => Math.abs(so.counter[0] - so.counter[1]);\n  so.thresholdMet = () => Math.max(...so.counter) >= so.format.threshold();\n  so.minDifferenceMet = () => so.scoreDifference() >= so.format.minDiff();\n  so.singleThresholdMet = () =>\n    Math.max(...so.counter) >= so.format.threshold() && Math.min(...so.counter) < so.format.threshold();\n  so.winner = () => (so.complete() ? (so.counter[0] > so.counter[1] ? 0 : 1) : undefined);\n  so.reverseScore = () => common.perspective_score && so.nextTeamServing() % 2 == 1;\n  so.nextTeamServing = () =>\n    common.metadata\n      .teams()\n      .map((team: any) => team.indexOf(so.nextService()) >= 0)\n      .indexOf(true);\n  so.nextTeamReceiving = () =>\n    common.metadata\n      .teams()\n      .map((team: any) => team.indexOf(so.nextService()) >= 0)\n      .indexOf(false);\n  so.perspectiveScore = (counter = so.counter, force: boolean) => {\n    if (force != undefined) return force ? counter.slice().reverse() : counter;\n    return so.reverseScore() ? counter.slice().reverse() : counter;\n  };\n  so.complete = () => {\n    function beyondDoubleThreshold() {\n      return so.counter[0] >= so.format.threshold() && so.counter[1] >= so.format.threshold();\n    }\n    return (so.thresholdMet() && so.minDifferenceMet()) ||\n      (beyondDoubleThreshold() && so.scoreDifference() && so.format.hasDecider())\n      ? true\n      : false;\n  };\n  so.nextService = () => {\n    if (so.complete()) return false;\n    let last_child = so.lastChild();\n\n    if (common.metadata.serviceOrder().indexOf(so.first_service) < 0) {\n      // this would imply that #players decreased from 4 to 2\n      // so, if at the beginning of a game the next team should be 1 - last team\n      console.log('PROBLEM');\n    }\n\n    if (object == 'Game') {\n      if (!so.format.tiebreak()) return so.first_service;\n      return common.nextTiebreakService(so.local_history, so.first_service);\n    }\n\n    if (!last_child) return so.first_service;\n    if (last_child.complete()) {\n      let descendent = last_child.lastChild();\n      while (descendent) {\n        last_child = descendent;\n        descendent = last_child.lastChild();\n      }\n      const last_first_service = last_child.set.firstService();\n      return common.advanceService(last_first_service);\n    }\n    return last_child.nextService();\n  };\n\n  so.currentChild = () => {\n    if (so.complete()) return false;\n    const last_child = so.lastChild();\n    if (last_child && !last_child.complete()) return last_child;\n    return so.newChild();\n  };\n\n  so.newChild = () => {\n    let last_child = so.lastChild();\n    let next_first_service;\n    if (!last_child) {\n      next_first_service = so.first_service;\n    } else {\n      let descendent = last_child.lastChild();\n      while (descendent) {\n        last_child = descendent;\n        descendent = last_child.lastChild();\n      }\n      next_first_service = common.advanceService(last_child.set.firstService());\n    }\n\n    const threshold = so.format.threshold();\n    const min_diff = so.format.minDiff();\n    const countersAtValue = (value: any) => so.counter[0] == value && so.counter[1] == value;\n    const deciding_child_required =\n      (countersAtValue(threshold) && (so.format.hasDecider() || min_diff == 1)) ||\n      (countersAtValue(threshold - 1) && min_diff == 0);\n    const code = deciding_child_required ? so.format.decidingChild.settings().code : so.format.children.settings().code;\n    const total_children = so.children.length;\n\n    const new_child = umo[so.child.object]({ index: total_children, parent_object: so, type: code, common: common });\n    new_child.set.firstService(next_first_service);\n\n    if (!code) {\n      const source_format = deciding_child_required ? so.format.decidingChild : so.format.children;\n      copyAttributes(source_format, new_child.format, so.child_attributes);\n      if (source_format.children) {\n        copyAttributes(source_format.children, new_child.format.children, so.child_attributes);\n        copyAttributes(source_format.decidingChild, new_child.format.decidingChild, so.child_attributes);\n      }\n    }\n\n    so.children.push(new_child);\n    return new_child;\n\n    function copyAttributes(source, target, attributes) {\n      attributes.forEach((attribute: any) => {\n        if (typeof source[attribute] == 'function') {\n          const value = source[attribute]();\n          // let existing_value = target[attribute]();\n          target[attribute](value);\n          // let new_value = target[attribute]();\n        }\n      });\n    }\n  };\n\n  const addPoint = (value: any) => {\n    if (so.complete()) return { result: false };\n\n    const server = so.nextService();\n    const point = common.pointParser(\n      value,\n      server,\n      so.history.lastPoint(),\n      so.format,\n      common.metadata.teams(),\n      so.set.perspectiveScore(),\n      so.score(),\n    );\n    if (!point) return { result: false };\n    so.counter[point.winner] += 1;\n\n    const attributes: any = {\n      points: so.counter.slice(),\n      score: so.scoreboard(),\n      number: so.local_history.filter((episode: any) => episode.winner != undefined).length,\n      index: so.history.points().length,\n      [object.toLowerCase()]: index,\n    };\n\n    const points_to_game = so.pointsToGame();\n    const has_game_point = points_to_game ? points_to_game.indexOf(1) : undefined;\n    const breakpoint = has_game_point >= 0 && has_game_point == 1 - common.metadata.playerTeam(server);\n\n    if (breakpoint) attributes.breakpoint = true;\n    if (so.format.tiebreak()) attributes.tiebreak = true;\n    if (common.metadata.timestamps() && !point.uts) attributes.uts = new Date().valueOf();\n    Object.assign(point, attributes);\n    so.local_history.push(point);\n\n    const episode = {\n      action: 'addPoint',\n      result: true,\n      complete: so.complete(),\n      point: point,\n      needed: { points_to_game },\n    };\n\n    common.history.push(episode);\n    return episode;\n  };\n\n  so.addPoint = (value: any) => {\n    if (Array.isArray(value)) return false;\n    if (object == 'Game') return addPoint(value);\n\n    const child = so.currentChild();\n    if (!child) return { result: false };\n    const episode = child.addPoint(value);\n    if (!episode.result) return episode;\n\n    if (child.complete()) {\n      so.counter[episode.point.winner] += 1;\n      so.local_history.push({\n        winner: episode.point.winner,\n        [so.child.plural]: so.counter.slice(),\n        index: child.set.index(),\n      });\n    }\n    episode.complete = so.complete();\n    episode.next_service = so.nextService();\n    const points_to_set = so.pointsNeeded ? so.pointsNeeded() : undefined;\n    if (points_to_set) episode.needed = Object.assign({}, episode.needed, points_to_set);\n    episode.point[so.child.label] = child.set.index();\n    episode[so.child.label] = {\n      complete: child.complete(),\n      winner: child.winner(),\n      [so.child.plural]: so.counter.slice(),\n      index: child.set.index(),\n    };\n    if (!parent_object) common.addStatPoint(episode);\n    if (!parent_object) common.events.addPoint().forEach((fx) => fx(episode));\n    return episode;\n  };\n\n  so.addPoints = (values = []) => so.addMultiple({ values });\n\n  so.addScore = (value: any) => {\n    const episode = so.addPoint(value);\n    if (episode.result) return episode;\n    const last_point = so.history.lastPoint();\n    const last_points = !last_point || last_point.score == '0-0' ? [0, 0] : last_point.points;\n    // let total_points = last_points.reduce((a, b) => a + b);\n    const attempt = so.change.pointScore(value);\n    if (attempt.result) {\n      so.undo();\n      const new_points = attempt.pointChange.to;\n      // let new_total = new_points.reduce((a, b) => a + b);\n      const change = new_points\n        .map((p, i) => {\n          return { diff: p - last_points[i], i };\n        })\n        .filter((f) => f.diff);\n      if (change.length == 1 && change[0].diff > 0) {\n        let result;\n        const player = change[0].i;\n        const points_to_player = change[0].diff;\n        for (let p = 0; p < points_to_player; p++) {\n          result = so.addPoint(player);\n          if (!result.result) return result;\n          if (result.game.complete) return result;\n        }\n        return result;\n      }\n    }\n    return { result: false };\n  };\n\n  so.addScores = (values = []) => so.addMultiple({ values, fx: so.addScore });\n\n  so.addMultiple = ({ values = [], fx = so.addPoint }: { values: any; fx: any }) => {\n    if (typeof values == 'string') values = values.match(/[01A-Za-z][*#@]*/g);\n    const added = [];\n    let rejected: any[] = [];\n    while (values.length) {\n      const value = values.shift();\n      const episode = fx(value);\n      if (episode.result) {\n        added.push(episode);\n      } else {\n        values.unshift(value);\n        rejected = values.slice();\n        values = [];\n      }\n    }\n    return { result: added.length, added, rejected };\n  };\n\n  so.decoratePoint = (point, attributes) => {\n    const indices = common.history\n      .map((episode, i) => {\n        if (episode.action === 'addPoint' && episode.point.index == point.index) return i;\n      })\n      .filter((index) => index !== undefined);\n    if (!indices.length) return false;\n    const episode = common.history[indices[0]];\n    episode.point = Object.assign({}, episode.point, attributes);\n  };\n\n  so.change = {};\n  so.change.points = (values) => {\n    if (!numbersArray(values) || values.length != 2) return false;\n    if (object == 'Game') {\n      const past_threshold = Math.max(...values) > so.format.threshold();\n      const value_difference = Math.abs(values[0] - values[1]);\n      if (past_threshold && value_difference > so.format.minDiff()) return false;\n      if (so.complete()) return { result: false };\n      const episode = { action: 'changePoints', result: true, pointChange: { from: so.counter, to: values } };\n      so.local_history.push(episode);\n      common.history.push(episode);\n      so.counter = values;\n      if (so.complete()) {\n        const winner = parseInt(so.winner());\n        parent_object.counter[winner] += 1;\n        parent_object.local_history.push({ winner: winner, games: parent_object.counter.slice(), index: index });\n      }\n      return episode;\n    }\n    return so.propagatePointChange(values, 'points');\n  };\n  so.change.pointScore = (value) => {\n    if (value == '0-0') return so.change.points([0, 0]);\n    if (object == 'Game') {\n      if (so.format.tiebreak()) return so.change.points(value.split('-').map((v) => parseInt(v)));\n      value = value\n        .replace(':', '-')\n        .split('-')\n        .map((m) => m.trim())\n        .join('-')\n        .split('D')\n        .join('40');\n      const progression = Object.assign({}, adProgression);\n      if (so.format.hasDecider())\n        Object.keys(noAdProgression).forEach((key) => (progression[key] = noAdProgression[key]));\n      const valid_values = [].concat(...Object.keys(progression).map((key) => progression[key]));\n      if (valid_values.indexOf(value) < 0) return false;\n      const point_value = ['0', '15', '30', '40', 'A', 'G'];\n      const values = value.split('-').map((v) => point_value.indexOf(v));\n\n      // correct for advantage games that don't reach deuce\n      if (values[0] == 5 && values[1] != 3) values[0] = 4;\n      if (values[1] == 5 && values[0] != 3) values[1] = 4;\n      return so.change.points(values);\n    }\n    return so.propagatePointChange(value, 'pointScore');\n  };\n  so.propagatePointChange = (values, fx) => {\n    const last_child = so.lastChild();\n    if (!last_child) {\n      if (object == 'Match') {\n        return so.newChild().newChild().change[fx](values);\n      }\n      if (object == 'Set') {\n        return so.newChild().change[fx](values);\n      }\n    }\n    if (!parent_object && so.complete()) return { result: false };\n    if (last_child.complete()) {\n      return so.newChild().change[fx](values);\n    }\n    return last_child.change[fx](values);\n  };\n  so.change.games = (values) => {\n    if (!numbersArray(values) || values.length != 2) return false;\n    if (object == 'Game') return { result: false };\n    if (object == 'Set') {\n      if (so.complete()) return { result: false };\n      const episode = { action: 'changeGames', result: true, gameChange: { from: so.counter, to: values } };\n      so.local_history.push(episode);\n      common.history.push(episode);\n      so.counter = values;\n      return episode;\n    }\n    const last_child = so.lastChild();\n    if (!last_child && object == 'Match') {\n      return so.newChild().change.games(values);\n    }\n    if (!parent_object && so.complete()) return { result: false };\n    if (last_child.complete()) {\n      return so.newChild().change.games(values);\n    }\n    return last_child.change.games(values);\n  };\n\n  so.undo = (count = 1) => {\n    if (isNaN(count)) return false;\n    if (object != 'Game' && !so.children.length && !so.local_history.length) return false;\n    if (!common.history.length) return false;\n    const undo = () => {\n      const action = common.history[common.history.length - 1].action;\n      return undo_actions[action]();\n    };\n    const undone = [...Array(count).keys()].map(() => undo());\n    common.events.undo().forEach((fx) => fx(undone));\n    return count == 1 ? undone[0] : undone;\n  };\n\n  const undo_actions: any = {};\n  undo_actions.addPoint = () => {\n    if (object == 'Game') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter[common_episode.point.winner] -= 1;\n      common.removeStatPoint(common_episode);\n      // common.events.undo().forEach(fx => fx(common_episode.point));\n      return common_episode.point;\n    }\n    return so.propagateUndo();\n  };\n  undo_actions.changePoints = () => {\n    if (object == 'Game') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter = common_episode.pointChange.from;\n      return common_episode;\n    }\n    return so.propagateUndo();\n  };\n  undo_actions.changeGames = () => {\n    if (object == 'Set') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter = common_episode.gameChange.from;\n      return common_episode;\n    }\n    return so.propagateUndo();\n  };\n\n  so.propagateUndo = () => {\n    const last_child = so.lastChild();\n    const last_child_complete = last_child.complete();\n    const episode = last_child.undo();\n\n    // remove the last history event and decrement the counter\n    if (last_child_complete) {\n      // pop history of non-game object\n      const episode = so.local_history.pop();\n      if (episode && episode.winner != undefined) so.counter[episode.winner] -= 1;\n    }\n\n    if (!last_child.history.local().length && last_child.lastChild() == undefined) so.children.pop();\n    return episode;\n  };\n  return so;\n};\n\numo.Match = (params: any) => {\n  const { index, type, common = umo.common() } = params ?? {};\n  const child = { object: 'Set', label: 'set', plural: 'sets' };\n  const format = umo.matchFormat({ type, common });\n  const match = umo.stateObject({ index, object: 'Match', format, child, common });\n\n  match.scoreboard = (perspective) => {\n    if (!match.children.length) return '0-0';\n    if (perspective == undefined) perspective = match.set.perspectiveScore() ? match.nextService() : undefined;\n    return match.children.map((child) => child.scoreboard(perspective)).join(', ');\n  };\n\n  return {\n    set: match.set,\n    reset: match.reset,\n    format: match.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: match.nextService,\n    nextTeamServing: match.nextTeamServing,\n    nextTeamReceiving: match.nextTeamReceiving,\n    change: match.change,\n    undo: match.undo,\n    addPoint: match.addPoint,\n    addPoints: match.addPoints,\n    decoratePoint: match.decoratePoint,\n    addScore: match.addScore,\n    addScores: match.addScores,\n    complete: match.complete,\n    winner: match.winner,\n    score: match.score,\n    scoreboard: match.scoreboard,\n    [match.child.plural]: match.accessChildren,\n    history: match.history,\n    stats: common.stats,\n  };\n};\n\numo.Set = ({ index, parent_object, type, common = umo.common() }) => {\n  const child = { object: 'Game', label: 'game', plural: 'games' };\n  const format = umo.setFormat({ type, common });\n  const set = umo.stateObject({ index, parent_object, object: 'Set', format, child, common });\n\n  set.pointsNeeded = () => {\n    const threshold = set.format.threshold();\n    if (set.complete()) {\n      const points_to_set = [];\n      points_to_set[set.winner()] = 0;\n      const loser = 1 - set.winner();\n      const pts = set.history\n        .action('addPoint')\n        .filter((episode) => episode.point.set == index)\n        .map((episode) => episode.needed.points_to_set)\n        .filter((f) => f);\n      points_to_set[loser] = Math.max(...pts.map((p) => p[loser]));\n      return { points_to_set };\n    }\n    const deciding_game = set.format.hasDecider();\n    const score_difference = set.scoreDifference();\n    const min_diff = set.format.minDiff();\n    const deciding_game_format_required = [false, false];\n    const games_to_set = set.counter.map((player_score, player) => {\n      const opponent_score = set.counter[1 - player];\n      if (player_score > opponent_score) {\n        if (opponent_score == threshold && deciding_game) return 0;\n        if (player_score >= threshold && score_difference >= min_diff) return 0;\n        if (player_score >= threshold - 1) return 1;\n        return threshold - player_score;\n      } else if (opponent_score > player_score) {\n        deciding_game_format_required[player] = deciding_game && threshold == opponent_score;\n        if (player_score == threshold && deciding_game) return 0;\n        if (opponent_score >= threshold && score_difference >= min_diff) return 0;\n        if (deciding_game_format_required[player]) return score_difference + 1;\n        if (opponent_score >= threshold - 1) return score_difference + min_diff;\n        return threshold - player_score;\n      } else {\n        deciding_game_format_required[player] =\n          (deciding_game && threshold == player_score && threshold == opponent_score) ||\n          (min_diff == 1 && threshold == player_score && threshold == opponent_score) ||\n          (min_diff == 0 && threshold - 1 == player_score && threshold - 1 == opponent_score);\n        if (deciding_game_format_required[player]) return 1;\n        if (player_score >= threshold - 1) return min_diff;\n        return threshold - player_score;\n      }\n    });\n\n    const last_game = set.lastChild();\n    const points_to_set = games_to_set.map((player_games_to_set, player) => {\n      let points_needed = 0;\n      if (last_game && !last_game.complete()) {\n        points_needed += last_game.pointsToGame()[player];\n        player_games_to_set -= 1;\n      }\n      if (!player_games_to_set) return points_needed;\n\n      if (deciding_game_format_required[player]) {\n        points_needed += set.format.decidingChild.threshold();\n        player_games_to_set -= 1;\n      }\n\n      for (let i = player_games_to_set; i; i--) {\n        points_needed += set.format.children.threshold();\n      }\n      return points_needed;\n    });\n\n    return { points_to_set, games_to_set };\n  };\n\n  // let formatScore = ([p0score, p1score], [t0score, t1score], tiebreak_to) => {\n  const formatScore = ([p0score, p1score], [t0score, t1score]) => {\n    if (t0score || t1score) {\n      if (t0score > t1score) p1score += `(${t1score})`;\n      if (t1score > t0score) p0score += `(${t0score})`;\n    }\n    return `${p0score}-${p1score}`;\n  };\n\n  set.scoreboard = (perspective) => {\n    const last_game = set.lastChild();\n    const score = set.perspectiveScore(set.counter, perspective);\n    if (!last_game) return score.join('-');\n    const tiebreak = last_game.format.tiebreak() === true;\n    if (last_game.complete() && !tiebreak) return score.join('-');\n    if (!last_game.complete()) return `${score.join('-')} (${last_game.scoreboard(perspective)})`;\n    const last_game_score = last_game.score().counters.local;\n    const tiebreak_score = set.perspectiveScore(last_game_score, perspective);\n    if (tiebreak && set.complete() && set.children.length == 1) return tiebreak_score.join('-');\n    // let tiebreak_to = last_game.format.threshold();\n    // return formatScore(score, tiebreak_score, tiebreak_to);\n    return formatScore(score, tiebreak_score);\n  };\n\n  return {\n    set: set.set,\n    reset: set.reset,\n    format: set.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: set.nextService,\n    nextTeamServing: set.nextTeamServing,\n    nextTeamReceiving: set.nextTeamReceiving,\n    change: set.change,\n    undo: set.undo,\n    addPoint: set.addPoint,\n    addPoints: set.addPoints,\n    decoratePoint: set.decoratePoint,\n    addScore: set.addScore,\n    addScores: set.addScores,\n    complete: set.complete,\n    winner: set.winner,\n    score: set.score,\n    scoreboard: set.scoreboard,\n    [set.child.plural]: set.accessChildren,\n    children: set.accessChildren,\n    lastChild: set.lastChild,\n    newChild: set.newChild,\n    history: set.history,\n    pointsNeeded: set.pointsNeeded,\n  };\n};\n\numo.Game = ({ index, parent_object, type, common = umo.common() }) => {\n  const child = { object: 'Point', label: 'point', plural: 'points' };\n  const format = umo.gameFormat({ type, common });\n  const game = umo.stateObject({ index, object: 'Game', parent_object, format, child, common });\n\n  game.pointsToGame = () => {\n    if (game.complete()) return undefined;\n    const threshold = game.format.threshold();\n    const deciding_point = game.format.hasDecider();\n    const score_difference = game.scoreDifference();\n    const min_diff = game.format.minDiff();\n    return game.counter.map((player_score, player) => {\n      const opponent_score = game.counter[1 - player];\n      if (player_score > opponent_score) {\n        if (opponent_score == threshold && deciding_point) return 0;\n        if (player_score >= threshold && score_difference >= min_diff) return 0;\n        if (player_score >= threshold - 1) return 1;\n        return threshold - player_score;\n      } else if (opponent_score > player_score) {\n        if (player_score == threshold && deciding_point) return 0;\n        if (opponent_score >= threshold && score_difference >= min_diff) return 0;\n        if (opponent_score == threshold && deciding_point) return score_difference + 1;\n        if (opponent_score >= threshold - 1) return score_difference + min_diff;\n        return threshold - player_score;\n      } else {\n        if (deciding_point && threshold == player_score && threshold == opponent_score) return 1;\n        if (player_score >= threshold - 1) return min_diff;\n        return threshold - player_score;\n      }\n    });\n  };\n\n  game.scoreboard = (perspective) => {\n    let scoreboard;\n    const threshold = game.format.threshold();\n    const min_diff = game.format.minDiff();\n    const score = game.perspectiveScore(game.counter, perspective);\n    const tiebreak = threshold != 4 || game.format.tiebreak();\n    if (tiebreak) return score.join('-');\n    if (\n      !game.thresholdMet() ||\n      (game.singleThresholdMet() && game.minDifferenceMet()) ||\n      (game.singleThresholdMet() && game.format.hasDecider() && min_diff == 1)\n    ) {\n      const progression = ['0', '15', '30', '40', 'G', 'G'];\n      scoreboard = score.map((points) => progression[points]).join('-');\n    } else {\n      scoreboard = score\n        .map((points, player) => {\n          const opponent_points = score[1 - player];\n          const point = points - threshold;\n          const opponent_point = opponent_points - threshold;\n          if (point > opponent_point && game.minDifferenceMet()) return 'G';\n          return point > opponent_point ? 'A' : '40';\n        })\n        .join('-');\n    }\n    return scoreboard.indexOf('G') >= 0 ? '0-0' : scoreboard;\n  };\n\n  return {\n    set: game.set,\n    reset: game.reset,\n    format: game.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: game.nextService,\n    nextTeamServing: game.nextTeamServing,\n    nextTeamReceiving: game.nextTeamReceiving,\n    change: game.change,\n    undo: game.undo,\n    addPoint: game.addPoint,\n    addPoints: game.addPoints,\n    decoratePoint: game.decoratePoint,\n    addScore: game.addScore,\n    addScores: game.addScores,\n    complete: game.complete,\n    winner: game.winner,\n    score: game.score,\n    scoreboard: game.scoreboard,\n    history: game.history,\n    lastChild: game.lastChild,\n    pointsToGame: game.pointsToGame,\n  };\n};\n\n// necessary to define it this way so that hoisting works!\numo.defaultPointParser = defaultPointParser;\nfunction defaultPointParser(value, server, last_point, format, teams, perspective, score_object) {\n  if (value == undefined) return false;\n  if (value.toString().length == 1 && !isNaN(value)) {\n    const code = +value == server ? 'S' : 'R';\n    return [0, 1].indexOf(+value) < 0 ? false : { winner: +value, server: server, code: code };\n  }\n\n  let winning_team;\n  const serving_team = teams.map((team) => team.indexOf(server) >= 0).indexOf(true);\n  const point: any = { server: server };\n\n  if (typeof value == 'object') {\n    if (value.winner != undefined && [0, 1].indexOf(+value.winner) >= 0) {\n      value.winner = parseInt(value.winner);\n      value.code = !value.code ? (value.winner == server ? 'S' : 'R') : value.code;\n      // lowercase indicates that point was played on second serve\n      if (value.first_serve) value.code = value.code.toLowerCase();\n      return Object.assign({}, value, point);\n    }\n    if (value.code && parseCode(value.code)) return Object.assign({}, value, point);\n  }\n\n  if (typeof value == 'string') {\n    if (parseScore(value)) return point;\n    if (parseCode(value)) return point;\n  }\n\n  function parseCode(code) {\n    let upper_code = code.toUpperCase().match(/[A-Za-z]/g);\n    let modifier = code.match(/[*#@]/g);\n    if (upper_code) upper_code = upper_code.join('');\n    if (modifier) modifier = modifier.join('');\n    if ('SAQDRP'.split('').indexOf(String(upper_code)) >= 0) {\n      if (['S', 'A', 'Q'].indexOf(upper_code) >= 0) {\n        winning_team = serving_team;\n      }\n      if (['D', 'R', 'P'].indexOf(upper_code) >= 0) {\n        winning_team = 1 - serving_team;\n      }\n      if (['Q', 'P'].indexOf(upper_code) >= 0) {\n        point.result = 'Penalty';\n      }\n      if (upper_code == 'A') point.result = 'Ace';\n      if (upper_code == 'D') {\n        point.first_serve = { error: 'Error', serves: ['0e'] };\n        point.result = 'Double Fault';\n      }\n      if (modifier && !point.result) {\n        if (modifier == '*') point.result = 'Winner';\n        if (modifier == '#') point.result = 'Forced Error';\n        if (modifier == '@') point.result = 'Unforced Error';\n      }\n      point.code = code;\n      point.winner = parseInt(winning_team);\n      if (code === code.toLowerCase()) point.first_serve = { error: 'Error', serves: ['0e'] };\n      return point;\n    }\n  }\n\n  function parseScore(value) {\n    value = value\n      .replace(':', '-')\n      .split('-')\n      .map((m) => m.trim())\n      .join('-')\n      .split('D')\n      .join('40');\n    if (value.split('-').length != 2) return false;\n    let last_score = score_object.points;\n    const combinedTotal = (score) => score.reduce((a, b) => a + b);\n    if (format.tiebreak()) {\n      const values = value.split('-').map((m) => parseInt(m));\n      const last_values = last_score.split('-').map((m) => parseInt(m));\n      if (!numbersArray(values) || values.length != 2) return false;\n      if (combinedTotal(last_values) + 1 != combinedTotal(values)) return false;\n      const change = [Math.abs(values[0] - last_values[0]), Math.abs(values[1] - last_values[1])];\n      point.winner = change.indexOf(1);\n      return point;\n    }\n    const progression = Object.assign({}, adProgression);\n    if (format.hasDecider()) Object.keys(noAdProgression).forEach((key) => (progression[key] = noAdProgression[key]));\n\n    if (value == '0-0' && progression[last_score].join('-').indexOf('G') >= 0) {\n      // one player had game point.  assign winner based on which player has greater # of points.\n      point.winner = last_point.points.indexOf(Math.max(...last_point.points));\n      return point;\n    }\n    // after a tiebreak, for instance...\n    if (progression[last_score] == undefined) last_score = '0-0';\n    let winner = progression[last_score] ? progression[last_score].indexOf(value) : false;\n    if (winner >= 0) {\n      if (perspective && server) winner = 1 - winner;\n      point.winner = winner;\n      return point;\n    }\n  }\n}\n\nconst noAdProgression = { '40-40': ['G-40', '40-G'] };\nconst adProgression = {\n  '0-0': ['15-0', '0-15'],\n  '0-15': ['15-15', '0-30'],\n  '0-30': ['15-30', '0-40'],\n  '0-40': ['15-40', '0-G'],\n  '15-0': ['30-0', '15-15'],\n  '15-15': ['30-15', '15-30'],\n  '15-30': ['30-30', '15-40'],\n  '15-40': ['30-40', '15-G'],\n  '30-0': ['40-0', '30-15'],\n  '30-15': ['40-15', '30-30'],\n  '30-30': ['40-30', '30-40'],\n  '30-40': ['40-40', '30-G'],\n  '40-0': ['G-0', '40-15'],\n  '40-15': ['G-15', '40-30'],\n  '40-30': ['G-30', '40-40'],\n  '40-40': ['A-40', '40-A'],\n  'A-40': ['G-40', '40-40'],\n  '40-A': ['40-40', '40-G'],\n};\n\numo.matchFormat = ({ type = '3_6a_7', common }) => {\n  const mf = umo.formatObject({ plural: 'matches', common });\n  mf.children = umo.setFormat({ common });\n  mf.decidingChild = umo.setFormat({ common });\n  mf.init(type);\n\n  return {\n    description: mf.description,\n    singles: mf.singles,\n    doubles: mf.doubles,\n    settings: mf.settings,\n    type: mf.type,\n    types: mf.types,\n    threshold: mf.threshold,\n    hasDecider: mf.hasDecider,\n    minDiff: mf.minDiff,\n    children: mf.children,\n    decidingChild: mf.decidingChild,\n  };\n};\n\numo.setFormat = ({ type = 'AdSetsTo6tb7', common }) => {\n  const sf = umo.formatObject({ plural: 'sets', common });\n  sf.children = umo.gameFormat({ common });\n  sf.decidingChild = umo.gameFormat({ common, type: 'tiebreak7a' });\n  sf.init(type);\n\n  return {\n    description: sf.description,\n    singles: sf.singles,\n    doubles: sf.doubles,\n    settings: sf.settings,\n    type: sf.type,\n    types: sf.types,\n    threshold: sf.threshold,\n    hasDecider: sf.hasDecider,\n    minDiff: sf.minDiff,\n    children: sf.children,\n    decidingChild: sf.decidingChild,\n  };\n};\n\numo.gameFormat = ({ type = 'advantage', common }) => {\n  const gf = umo.formatObject({ plural: 'games', common });\n  gf.init(type);\n\n  return {\n    description: gf.description,\n    settings: gf.settings,\n    singles: gf.singles,\n    doubles: gf.doubles,\n    type: gf.type,\n    types: gf.types,\n    threshold: gf.threshold,\n    hasDecider: gf.hasDecider,\n    minDiff: gf.minDiff,\n    tiebreak: gf.tiebreak,\n  };\n};\n\numo.formatObject = ({ plural, common = umo.common() }) => {\n  const fo = {\n    values: { plural: plural },\n    singles: common.singles,\n    doubles: common.doubles,\n    init(format_type) {\n      if (fo.types(fo.values.plural).indexOf(format_type) >= 0) {\n        fo.type(format_type);\n        fo.values.initial_code = format_type;\n      }\n    },\n    types(object = fo.values.plural) {\n      return Object.keys(formats[object]);\n    },\n    type(format_type) {\n      if (!fo.values.plural) return false;\n      if (format_type === true && fo.values.initial_code) format_type = fo.values.initial_code;\n      if (fo.types(fo.values.plural).indexOf(format_type) >= 0) {\n        const f = formats[fo.values.plural][format_type];\n\n        fo.hasDecider(f.hasDecider).minDiff(f.minDiff).threshold(f.threshold);\n        if (f.tiebreak != undefined) fo.tiebreak(f.tiebreak);\n\n        // must be set after all other attributes!\n        fo.name(f.name);\n        fo.description(f.description);\n        fo.values.code = format_type;\n\n        if (f.children) fo.children.type(f.children);\n        if (f.decidingChild) fo.decidingChild.type(f.decidingChild);\n        return true;\n      }\n    },\n    settings(params?: any) {\n      const { name, description, code, players, threshold, has_decider, min_diff, tiebreak } = params ?? {};\n      if (code) {\n        fo.type(code);\n      } else if (!threshold || !has_decider || !min_diff || !tiebreak) {\n        const number_of_players = typeof common.singles == 'function' ? (common.singles() ? 2 : 4) : '';\n        return {\n          name: fo.values.name,\n          description: fo.values.description,\n          code: fo.values.code,\n          players: number_of_players,\n          threshold: fo.values.threshold,\n          has_decider: fo.values.has_decider,\n          min_diff: fo.values.min_diff,\n          tiebreak: fo.values.tiebreak,\n        };\n      } else {\n        // TODO: propagate these settings down to unfinished sets/games\n        fo.tiebreak(tiebreak);\n        fo.threshold(threshold);\n        fo.minDiff(min_diff);\n        fo.hasDecider(has_decider);\n        if (description) fo.description(description);\n        if (name) fo.name(name);\n        if (players) {\n          if (players == 4) {\n            fo.doubles();\n          } else {\n            fo.singles();\n          }\n        }\n      }\n    },\n    name(value) {\n      if (!arguments.length) return fo.values.name;\n      if (typeof value == 'string') fo.values.name = value;\n      return fo;\n    },\n    description(value) {\n      if (!arguments.length) return fo.values.description;\n      if (typeof value == 'string') fo.values.description = value;\n      return fo;\n    },\n    tiebreak(value) {\n      if (!arguments.length) return fo.values.tiebreak;\n      fo.values.description = fo.values.code = undefined;\n      if ([true, false].indexOf(value) >= 0) fo.values.tiebreak = value;\n      return fo;\n    },\n    threshold(value) {\n      if (!arguments.length) return fo.values.threshold;\n      fo.values.description = fo.values.code = undefined;\n      if (!isNaN(value)) fo.values.threshold = value;\n      return fo;\n    },\n    minDiff(value) {\n      if (!arguments.length) return fo.values.min_diff;\n      fo.values.description = fo.values.code = undefined;\n      if (!isNaN(value)) fo.values.min_diff = value;\n      return fo;\n    },\n    hasDecider(value) {\n      if (!arguments.length) return fo.values.has_decider;\n      fo.values.description = fo.values.code = undefined;\n      if ([true, false].indexOf(value) >= 0) fo.values.has_decider = value;\n      return fo;\n    },\n  };\n  return fo;\n};\n\numo.common = () => {\n  let number_of_players = 2;\n  let addPoint_events = umo.addPoint_events.slice();\n  let undo_events = umo.undo_events.slice();\n  let reset_events = umo.reset_events.slice();\n  let metadata: any = {};\n\n  let stat_points;\n  let last_episode;\n  let filtered_stats;\n\n  const accessors = {\n    resetStats() {\n      stat_points = undefined;\n      last_episode = undefined;\n      filtered_stats = undefined;\n    },\n    reset() {\n      metadata = {\n        players: [],\n        teams: [],\n        service_order: [0, 1],\n        receive_order: [1, 0],\n        tournament: {},\n        match: {},\n        timestamps: false,\n        charter: undefined,\n      };\n    },\n    timestamps(value) {\n      if (!arguments.length) return metadata.timestamps;\n      if ([true, false].indexOf(value) >= 0) metadata.timestamps = value;\n      return accessors;\n    },\n    serviceOrder(order?: any) {\n      if (!arguments.length) return metadata.service_order.slice();\n      return changeOrder(order, 'service_order', 'receive_order');\n    },\n    doublesServiceChange() {\n      if (number_of_players != 4) return false;\n      // FIXME: Not allowed if not the end of a set; how to determine within common?\n    },\n    receiveOrder(order) {\n      if (!arguments.length) return metadata.receive_order.slice();\n      return changeOrder(order, 'receive_order', 'service_order');\n    },\n    teams() {\n      const teams = [];\n      teams[0] = metadata.service_order.filter((_, i: number) => (i + 1) % 2).sort();\n      teams[1] = metadata.service_order.filter((_, i: number) => i % 2).sort();\n      teams.sort();\n      return teams;\n    },\n    playerTeam(player) {\n      return accessors\n        .teams()\n        .map((team) => team.indexOf(player) >= 0)\n        .indexOf(true);\n    },\n    teamPlayers() {\n      return accessors.teams().map((team) => team.map((i) => accessors.players(i).name));\n    },\n    players(index?: number) {\n      if (!arguments.length) {\n        if (metadata.players.length > metadata.service_order.length) return metadata.players;\n        return metadata.service_order.map((i) => accessors.players(i));\n      }\n      if (isNaN(index) || index < 0 || index > 3) return false;\n      if (metadata.players[index]) return metadata.players[index];\n      return { name: `Player ${['One', 'Two', 'Three', 'Four'][index]}` };\n    },\n    definePlayer(params?: any) {\n      const { name, birth, playerId, hand, seed, rank, age, entry, ioc, draw_position, team, wtn, utr, id } =\n        params ?? {};\n      let index = params?.index;\n      if (index == undefined) index = metadata.players.length;\n      const player = metadata.players[index] || {};\n      if ((!name && !player.name) || isNaN(index) || index > 3) return false;\n      const definition = {\n        name,\n        birth,\n        playerId,\n        hand,\n        team,\n        seed,\n        rank,\n        age,\n        entry,\n        ioc,\n        draw_position,\n        wtn,\n        utr,\n        id,\n      };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) player[key] = definition[key];\n      });\n      metadata.players[index] = player;\n      return { index, player };\n    },\n    defineTournament(params?: any) {\n      const { name, tuid, start_date, tour, rank, surface, in_out, draw, draw_size, round, level } = params ?? {};\n      const definition = { name, tuid, start_date, tour, rank, surface, in_out, draw, draw_size, round, level };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) metadata.tournament[key] = definition[key];\n      });\n      return metadata.tournament;\n    },\n    defineMatch(params?: any) {\n      const { muid, date, gender, year, court, start_time, end_time, duration, status, umpire, official_score } =\n        params ?? {};\n      const definition = {\n        muid,\n        date,\n        gender,\n        year,\n        court,\n        start_time,\n        end_time,\n        duration,\n        status,\n        umpire,\n        official_score,\n      };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) metadata.match[key] = definition[key];\n      });\n      return metadata.match;\n    },\n    showTiebreakOrder(first_service) {\n      return calcTiebreakService(12, first_service);\n    },\n  };\n\n  function changeOrder(order, submitted, counterpart) {\n    const sameOrder = (a, b) => !a.filter((o, i) => o != b[i]).length;\n    const notXinY = (x, y) => y.filter((n) => x.indexOf(n) != -1).length != y.length;\n    if (\n      !Array.isArray(order) ||\n      order.length != number_of_players ||\n      notXinY(order, [0, 1]) ||\n      notXinY([0, 1, 2, 3], order)\n    )\n      return false;\n\n    const no_format_change = order.length == metadata[submitted].length;\n    if (sameOrder(order, metadata[submitted]) && no_format_change) return accessors;\n\n    const teams = accessors.teams();\n    metadata[submitted] = order;\n    const new_teams = accessors.teams();\n\n    if (\n      order.length == 4 &&\n      sameOrder(teams[0], new_teams[0]) &&\n      no_format_change &&\n      serviceToOpponent(metadata[submitted], metadata[counterpart], new_teams)\n    )\n      return accessors;\n\n    metadata[counterpart] = order.map((o) => order.length - 1 - o);\n    return accessors;\n  }\n\n  function serviceToOpponent(players, opponents, teams) {\n    const sameTeam = (p, o) =>\n      teams.filter((team) => team.filter((player) => [p, o].indexOf(player) >= 0).length > 1).length;\n    return !players.filter((s, i) => sameTeam(s, opponents[i])).length;\n  }\n\n  function calcTiebreakService(number, first_service) {\n    const progression = [];\n    return [...Array(number).keys()].map(() => {\n      const result = calcNext(progression, first_service);\n      progression.push(result);\n      return result;\n    });\n  }\n\n  function calcNext(progression, first_service) {\n    const last_position = pos(progression.length);\n    const next_position = (progression.length + 1) % 4 < 2;\n    const last_score = progression[progression.length - 1];\n    const last_service =\n      last_score != undefined ? last_score : first_service != undefined ? first_service : metadata.service_order[0];\n    return next_position == last_position ? last_service : pub.advanceService(last_service);\n  }\n\n  function pos(number) {\n    const iterations = [true].concat([...Array(number).keys()].map((i) => (i + 1) % 4 < 2));\n    return iterations[number];\n  }\n\n  function setServiceOrder() {\n    if (number_of_players == 2) {\n      const existing_order = pub.metadata.serviceOrder();\n      if (existing_order.length == 2) return;\n      pub.metadata.serviceOrder(existing_order.filter((f) => [0, 1].indexOf(f) >= 0));\n    } else {\n      const existing_order = pub.metadata.serviceOrder();\n      if (existing_order.length == 4) return;\n      const new_order = existing_order.slice();\n      existing_order.forEach((o) => new_order.push(o + 2));\n      pub.metadata.serviceOrder(new_order);\n    }\n  }\n\n  const addEvent = (add_event) => {\n    if (!add_event) return addPoint_events;\n    if (typeof add_event == 'function') {\n      if (addPoint_events.indexOf(add_event) < 0) addPoint_events.push(add_event);\n    } else if (Array.isArray(add_event)) {\n      console.log({ add_event });\n      /*\n      add_event.foreach((e, c) => {\n        if (typeof e == 'function') addPoint_events.push(c);\n      });\n      */\n    }\n  };\n\n  const undoEvent = (undo_event) => {\n    if (!undo_event) return undo_events;\n    if (typeof undo_event == 'function') {\n      if (undo_events.indexOf(undo_event) < 0) undo_events.push(undo_event);\n    } else if (Array.isArray(undo_event)) {\n      console.log({ undo_event });\n      /*\n      undo_event.foreach(e)((e) => {\n        if (typeof e == 'function') undo_events.push(c);\n      });\n      */\n    }\n  };\n\n  const resetEvent = (reset_event) => {\n    if (!reset_event) return reset_events;\n    if (typeof reset_event == 'function') {\n      if (reset_events.indexOf(reset_event) < 0) reset_events.push(reset_event);\n    } else if (Array.isArray(reset_event)) {\n      console.log({ reset_event });\n      /*\n      reset_event.foreach(e)((e) => {\n        if (typeof e == 'function') reset_events.push(c);\n      });\n      */\n    }\n  };\n\n  const clearEvents = () => {\n    addPoint_events = [];\n    undo_events = [];\n    reset_events = [];\n  };\n\n  const pub = {\n    metadata: accessors,\n    pointParser: umo.pointParser,\n    events: { addPoint: addEvent, undo: undoEvent, clearEvents, reset: resetEvent },\n    history: [],\n    live_stats: false,\n    perspective_score: false,\n    assignParser(parser) {\n      pub.pointParser = parser;\n    },\n    advanceService(service) {\n      const index = metadata.service_order.indexOf(service) + 1;\n      return metadata.service_order[index < accessors.players().length ? index : 0];\n    },\n    nextTiebreakService(history, first_service) {\n      const so = calcTiebreakService(history.length + 1, first_service);\n      return so[so.length - 1];\n    },\n    singles(value) {\n      if (!arguments.length) return number_of_players == 2 ? true : false;\n      number_of_players = value ? 2 : 4;\n      setServiceOrder();\n      return pub;\n    },\n    doubles(value) {\n      if (!arguments.length) return number_of_players == 4 ? true : false;\n      number_of_players = value ? 4 : 2;\n      setServiceOrder();\n      return pub;\n    },\n    stats: {\n      calculated(set_filter) {\n        return calculatedStats(pub.stats.counters(set_filter));\n      },\n      counters(set_filter) {\n        if (\n          (set_filter != undefined && filtered_stats != set_filter) ||\n          (set_filter == undefined && filtered_stats != undefined)\n        ) {\n          accessors.resetStats();\n        }\n        if (!stat_points) {\n          pub.live_stats = true;\n          let episodes = pub.history.filter((episode) => episode.action === 'addPoint');\n          if (set_filter != undefined) {\n            episodes = episodes.filter((episode) => episode.point.set === set_filter);\n            filtered_stats = set_filter;\n          }\n          episodes.forEach((episode) => pub.addStatPoint(episode));\n        }\n        return stat_points;\n      },\n    },\n    addStatPoint(episode) {\n      if (!pub.live_stats) return;\n      const point = episode.point;\n      if (!stat_points) stat_points = { players: {}, teams: {} };\n      const server_team = accessors.playerTeam(point.server);\n      const team_winner = accessors.playerTeam(point.winner);\n      const team_loser = 1 - team_winner;\n\n      addStat({ player: point.server, episode, stat: 'pointsServed' });\n      addStat({ team: team_winner, episode, stat: 'pointsWon' });\n      if (point.result && point.hand) {\n        const player = point.result == 'Winner' ? team_winner : team_loser;\n        addStat({ player, episode, stat: point.hand });\n      }\n      if (point.result == 'Ace') addStat({ player: point.server, episode, stat: 'aces' });\n      if (point.result == 'Double Fault') addStat({ player: point.server, episode, stat: 'doubleFaults' });\n      if (point.result == 'Winner') addStat({ player: point.winner, episode, stat: 'winners' });\n\n      if (point.result == 'Unforced Error') addStat({ team: team_loser, episode, stat: 'unforcedErrors' });\n      if (point.result == 'Forced Error') addStat({ team: team_loser, episode, stat: 'forcedErrors' });\n\n      if (!point.first_serve) addStat({ player: point.server, episode, stat: 'serves1stIn' });\n      if (!point.first_serve && point.winner == server_team) {\n        addStat({ player: point.server, episode, stat: 'serves1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received2ndWon' });\n      }\n      if (!point.first_serve && point.winner != server_team)\n        addStat({ team: team_winner, episode, stat: 'received1stWon' });\n      if (point.first_serve && point.result != 'Double Fault')\n        addStat({ player: point.server, episode, stat: 'serves2ndIn' });\n      if (point.first_serve && point.result != 'Double Fault' && point.winner == point.server) {\n        addStat({ player: point.server, episode, stat: 'serves2ndWon' });\n        addStat({ team: team_loser, undefined, stat: 'received1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received2ndWon' });\n      }\n      if (point.first_serve && point.result != 'Double Fault' && point.winner != server_team) {\n        addStat({ team: team_winner, episode, stat: 'received2ndWon' });\n      }\n      if (point.breakpoint) {\n        addStat({ player: point.server, undefined, stat: 'breakpointsSaved' });\n        addStat({ player: point.server, episode, stat: 'breakpointsFaced' });\n      }\n      if (last_episode && last_episode.point.breakpoint && last_episode.point.server == point.winner) {\n        addStat({ player: point.server, episode, stat: 'breakpointsSaved' });\n      }\n\n      if (episode.game && episode.game.complete) {\n        addStat({ team: team_winner, episode, stat: 'gamesWon' });\n      }\n      last_episode = episode;\n    },\n    removeStatPoint(episode) {\n      if (!pub.live_stats) return;\n      Object.keys(stat_points).forEach((grouping) => {\n        Object.keys(stat_points[grouping]).forEach((group) => {\n          Object.keys(stat_points[grouping][group]).forEach((stat) => {\n            if (stat_points[grouping][group][stat].length) {\n              stat_points[grouping][group][stat] = stat_points[grouping][group][stat].filter(\n                (f) => f.point.index != episode.point.index,\n              );\n            }\n          });\n        });\n      });\n      const points = pub.history.filter((episode) => episode.action == 'addPoint');\n      last_episode = points.length ? points[points.length - 1] : undefined;\n    },\n  };\n  accessors.reset();\n  return pub;\n\n  function calculatedStats(stats) {\n    if (!stats || !stats.teams) return [];\n\n    // prefix of '-' indicates that value for opposing team should be used\n    // '*' indicates that value is optional\n    const calculated_stats = {\n      Aces: { numerators: ['aces'], calc: 'number' },\n      'Double Faults': { numerators: ['doubleFaults'], calc: 'number' },\n      'First Serve %': { numerators: ['serves1stIn'], denominators: ['pointsServed'], calc: 'percentage' },\n      'Unforced Errors': { numerators: ['unforcedErrors'], calc: 'number' },\n      'Forced Errors': { numerators: ['forcedErrors'], calc: 'number' },\n      Winners: { numerators: ['winners'], calc: 'number' },\n      'Total Points Won': { numerators: ['pointsWon'], calc: 'number' },\n      'Max Pts/Row': { numerators: ['pointsWon'], calc: 'maxConsecutive', attribute: 'index' },\n      'Max Games/Row': { numerators: ['gamesWon'], calc: 'maxConsecutive', attribute: 'game' },\n      'Points Won 1st': { numerators: ['serves1stWon'], denominators: ['serves1stIn'], calc: 'percentage' },\n      'Points Won 2nd': { numerators: ['serves2ndWon'], denominators: ['serves2ndIn'], calc: 'percentage' },\n      'Points Won Receiving': {\n        numerators: ['received1stWon', 'received2ndWon'],\n        denominators: ['-pointsServed'],\n        calc: 'percentage',\n      },\n      'Breakpoints Saved': {\n        numerators: ['breakpointsSaved'],\n        denominators: ['breakpointsFaced'],\n        calc: 'percentage',\n      },\n      'Breakpoints Converted': {\n        numerators: ['-breakpointsSaved'],\n        denominators: ['-breakpointsFaced'],\n        calc: 'difference',\n      },\n      'Aggressive Margin': {\n        calc: 'aggressiveMargin',\n        numerators: ['*doubleFaults', '*unforcedErrors'],\n        denominators: ['*aces', '*winners', '-*forcedErrors'],\n      },\n    };\n\n    const reduceComponents = (components, teams, team) => {\n      if (!components) return undefined;\n      const values = components.map((component) => {\n        const counter = component.split('-').reverse()[0].split('*').join('');\n        const component_team = teams[component.indexOf('-') == 0 ? 1 - team : team];\n        return component_team && component_team[counter] ? component_team[counter].length : 0;\n      });\n      return [].concat(0, 0, ...values).reduce((a, b) => a + b);\n    };\n\n    const numeratorDenominator = (stat_obj, teams, team) => {\n      const numerator = reduceComponents(stat_obj.numerators, teams, team);\n      const denominator = reduceComponents(stat_obj.denominators, teams, team);\n      return { numerator, denominator };\n    };\n\n    const displayPct = (numerator, denominator) => {\n      const pct = Math.round((numerator / denominator) * 100);\n      return { value: pct, display: `${pct}% (${numerator}/${denominator})` };\n    };\n\n    const stat_calcs = {\n      number(stat_obj, teams, team) {\n        // ({ numerator, denominator } = numeratorDenominator(stat_obj, teams, team));\n        const { numerator } = numeratorDenominator(stat_obj, teams, team);\n        return { display: numerator, value: numerator, numerators: stat_obj.numerators };\n      },\n      maxConsecutive(stat_obj, teams, team) {\n        const stat = stat_obj.numerators[0];\n        const attribute = stat_obj.attribute;\n        const episodes = teams[team][stat];\n        if (!episodes) return { value: 0, display: 0 };\n        let current = undefined;\n        let max_consecutive = 0;\n        let consecutive = episodes.length ? 1 : 0;\n        episodes.forEach((episode) => {\n          if (current + 1 == episode.point[attribute]) {\n            consecutive += 1;\n          } else {\n            if (consecutive > max_consecutive) max_consecutive = consecutive;\n            consecutive = 1;\n          }\n          current = episode.point[attribute];\n        });\n        if (consecutive > max_consecutive) max_consecutive = consecutive;\n        return { display: max_consecutive, value: max_consecutive };\n      },\n      percentage(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        if (numerator == undefined || !denominator) return { value: 0, display: 0 };\n        return Object.assign(displayPct(numerator, denominator), { numerators: stat_obj.numerators });\n      },\n      difference(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        if (numerator == undefined || !denominator) return { value: 0, display: 0 };\n        const diff = Math.abs(denominator - numerator);\n        return Object.assign(displayPct(diff, denominator), { numerators: stat_obj.numerators });\n      },\n      aggressiveMargin(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        const diff = denominator - numerator;\n        const point_counts = Object.keys(teams).map((team) =>\n          teams[team].pointsWon ? teams[team].pointsWon.length : 0,\n        );\n        const total_points = [].concat(0, 0, ...point_counts).reduce((a, b) => a + b);\n        return Object.assign(displayPct(diff, total_points), { numerators: stat_obj.numerators });\n      },\n    };\n\n    const teams_counters = [].concat(...Object.keys(stats.teams).map((team) => Object.keys(stats.teams[team])));\n    return Object.keys(calculated_stats)\n      .map((stat) => {\n        const stat_obj = calculated_stats[stat];\n        if (!stat_obj.denominators) stat_obj.denominators = [];\n        // must remove any '-' indicators to invert\n        let required_counters = []\n          .concat(...stat_obj.numerators, ...stat_obj.denominators)\n          .map((m) => m.split('-').reverse()[0]);\n        required_counters = required_counters.filter((counter) => counter.indexOf('*') < 0);\n        const counters_exist =\n          required_counters.map((counter) => teams_counters.indexOf(counter) < 0).filter((f) => f).length < 1;\n        if (!counters_exist) return false;\n        const team_stats = [0, 1].map((team) => {\n          return stat_calcs[stat_obj.calc](stat_obj, stats.teams, team);\n        });\n        return { name: stat, team_stats };\n      })\n      .filter((f) => f);\n  }\n\n  function addStat(params?: any) {\n    const { player, episode, stat } = params ?? {};\n    let team = params?.team;\n    // stat object is created even if there is no episode to add (=0)\n    if (player != undefined) {\n      if (!stat_points.players[player]) stat_points.players[player] = {};\n      if (!stat_points.players[player][stat]) stat_points.players[player][stat] = [];\n      if (episode) stat_points.players[player][stat].push(episode);\n      team = accessors.playerTeam(player);\n    }\n    if (team != undefined) {\n      if (!stat_points.teams[team]) stat_points.teams[team] = {};\n      if (!stat_points.teams[team][stat]) stat_points.teams[team][stat] = [];\n      if (episode) stat_points.teams[team][stat].push(episode);\n    }\n  }\n};\n\nfunction numbersArray(values) {\n  if (!Array.isArray(values)) return false;\n  return values.map((value) => !isNaN(value)).indexOf(false) >= 0;\n}\n\n/*\nif (typeof define === 'function' && define.amd) define(umo);\nelse if (typeof module === 'object' && module.exports) module.exports = umo;\nthis.umo = umo;\n*/\n\nexport const mo = umo;\nexport default umo;\n","import { browserStorage } from './browserStorage';\nimport { firstAndLast } from './utilities';\nimport { mo } from '../services/matchObject/umo';\n\nexport const ch_version = '1.9';\nexport const charts: any = {};\nconst match = mo.Match();\n\nexport const app: any = {\n  broadcast: undefined,\n  user_uuid: undefined,\n};\n\nexport const settings: any = {\n  track_shot_types: undefined,\n  audible_clicks: undefined,\n  display_gamefish: undefined,\n  auto_swap_sides: undefined,\n  point_buttons: undefined,\n};\n\nexport const env: any = {\n  lets: 0,\n  rally: 0,\n  undone: [],\n  view: 'entry',\n  serve2nd: false,\n  rally_mode: false,\n  edit_player: undefined,\n  match_swap: false, // automatic swap\n  swap_sides: false, // user initiated swap\n  orientation: 'vertical',\n  serving: match.nextTeamServing(),\n  receiving: match.nextTeamReceiving(),\n  edit_point_index: undefined,\n  provider: undefined,\n  match,\n};\n\nconst c1 = 'rgb(64, 168, 75)';\nconst c2 = 'rgb(255, 116, 51)';\nconst c3 = 'rgb(221, 56, 48)';\nexport const buttons: any = {\n  first_serve: { color: c1, type: 'toggle' },\n  second_serve: { color: c2, type: 'toggle' },\n  double_fault: { color: c3, type: 'flash' },\n  penalty: { color: c3, type: 'flash' },\n  first_ace: { color: c1, type: 'flash' },\n  second_ace: { color: c2, type: 'flash' },\n  server_winner: { color: c1, type: 'flash' },\n  server_unforced: { color: c3, type: 'flash' },\n  server_forced: { color: c2, type: 'flash' },\n  receiving_winner: { color: c1, type: 'flash' },\n  receiving_unforced: { color: c3, type: 'flash' },\n  receiving_forced: { color: c2, type: 'flash' },\n};\nexport const options = {\n  user_swap: false,\n  highlight_better_stats: true,\n  vertical_view: browserStorage.get('vertical_view') || 'vblack',\n  horizontal_view: browserStorage.get('horizontal_view') || 'hblack',\n};\n\nexport const device: any = {\n  isStandalone: 'standalone' in window.navigator && window.navigator.standalone,\n  isIDevice: /iphone|ipod|ipad/i.test(window.navigator.userAgent),\n  isMobile: typeof window.orientation !== 'undefined',\n  geoposition: {},\n};\n\nexport const default_players = ['Player One', 'Player Two'];\n\nexport function clearActionEvents() {\n  match.events.clearEvents();\n}\n\nexport function updatePositions() {\n  const left_side = env.swap_sides ? 1 : 0;\n  const right_side = env.swap_sides ? 0 : 1;\n  // var server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  // var receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  updateMatchArchive();\n\n  const player_names = match.metadata.players();\n  // var display_position = Array.from(document.getElementsByClassName(\"position_display\"));\n  // display_position[0].value = firstAndLast(player_names[left_side].name);\n  // display_position[1].value = firstAndLast(player_names[right_side].name);\n  const p1 = document.getElementById('playerone');\n  const p2 = document.getElementById('playertwo');\n  if (p1) p1.innerHTML = firstAndLast(player_names[left_side].name);\n  if (p2) p2.innerHTML = firstAndLast(player_names[right_side].name);\n\n  // new way\n  const display_player_0 = Array.from(document.querySelectorAll('.display_player_0'));\n  display_player_0.forEach((element) => (element.innerHTML = player_names[left_side].name));\n  const display_player_1 = Array.from(document.querySelectorAll('.display_player_1'));\n  display_player_1.forEach((element) => (element.innerHTML = player_names[right_side].name));\n}\n\nexport function updateMatchArchive(force?: boolean) {\n  const points = match.history.points();\n\n  // var match_id = match.metadata.defineMatch().muid;\n  const match_id = browserStorage.get('current_match');\n  if (!match_id) return;\n  const players = match.metadata.players();\n  const save =\n    force || points.length || (players[0].name != default_players[0] && players[1].name != default_players[1]);\n  if (!save) return;\n\n  // add key for current match\n  const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n\n  if (match_archive.indexOf(match_id) < 0) {\n    match_archive.push(match_id);\n    browserStorage.set('match_archive', JSON.stringify(match_archive));\n  }\n\n  const match_object = {\n    ch_version: ch_version,\n    players: players,\n    first_service: match.set.firstService(),\n    match: match.metadata.defineMatch(),\n    format: match.format.settings(),\n    tournament: match.metadata.defineTournament(),\n    points: points,\n    scoreboard: match.scoreboard(),\n  };\n  browserStorage.set(match_id, JSON.stringify(match_object));\n}\n\nexport function restoreAppState() {\n  const app_settings = browserStorage.get('CH_AppSettings');\n  if (app_settings) Object.assign(settings, JSON.parse(app_settings));\n  Object.keys(settings).forEach((key) => {\n    const em: any = document.getElementById(key);\n    if (em) em.checked = settings[key];\n  });\n  const app_state = browserStorage.get('CH_AppState');\n  if (app_state) Object.assign(app, JSON.parse(app_state));\n}\n\nexport function updateAppState() {\n  Object.keys(settings).forEach((key) => {\n    const em: any = document.getElementById(key);\n    if (em) settings[key] = em.checked;\n  });\n  browserStorage.set('CH_AppSettings', JSON.stringify(settings));\n  browserStorage.set('CH_AppState', JSON.stringify(app));\n}\n\nexport function setOrientation() {\n  if (device.isMobile) {\n    env.orientation = window.screen.orientation.type == 'landscape-primary' ? 'landscape' : 'portrait';\n  } else {\n    env.orientation = window.innerWidth > window.innerHeight ? 'landscape' : 'portrait';\n  }\n}\n","import { env } from './env';\n\nexport function groupGames(point_episodes?: any[]) {\n  point_episodes = point_episodes || env.match.history.action('addPoint');\n  const games: any = [{ points: [] }];\n  let game_counter = 0;\n  let current_game = 0;\n  point_episodes?.forEach((episode: any) => {\n    const point = episode.point;\n    if (point.game != current_game) {\n      game_counter += 1;\n      current_game = point.game;\n      games[game_counter] = { points: [] };\n    }\n    games[game_counter].points.push(point);\n    games[game_counter].index = game_counter;\n    games[game_counter].set = episode.set.index;\n    games[game_counter].score = episode.game.games;\n    games[game_counter].complete = episode.game.complete;\n    if (episode.game.complete) games[game_counter].winner = point.winner;\n    if (episode.set.complete) games[game_counter].last_game = true;\n  });\n  return games;\n  // if (set != undefined) games = games.filter(function(game) { return game.set == set });\n}\n","export function closeModal() {\n  Array.from(document.querySelectorAll('.ch_modal')).forEach((modal: any) => (modal.style.display = 'none'));\n}\n","import { env, options, settings, updateMatchArchive, updatePositions } from './env';\nimport { browserStorage } from './browserStorage';\nimport { groupGames } from './groupGames';\nimport { closeModal } from './modals';\n\nexport function updateScore() {\n  const score = env.match.score();\n  const sets_counter = score.counters.sets;\n  const games_counter = score.counters.games;\n  const points = score.points.split('-');\n  const left_side = env.swap_sides ? 1 : 0;\n  const right_side = env.swap_sides ? 0 : 1;\n\n  // old way\n  const point_fields: any = Array.from(document.getElementsByClassName('points'));\n  point_fields.forEach((field: any, index: number) => {\n    field.value = points[env.swap_sides ? 1 - index : index];\n  });\n\n  // new way\n  const display_point_0 = Array.from(document.querySelectorAll('.display_points_0'));\n  display_point_0.forEach((element) => (element.innerHTML = points[left_side]));\n  const display_point_1 = Array.from(document.querySelectorAll('.display_points_1'));\n  display_point_1.forEach((element) => (element.innerHTML = points[right_side]));\n\n  const display_game_0 = Array.from(document.querySelectorAll('.display_games_0'));\n  display_game_0.forEach((element) => (element.innerHTML = games_counter[left_side]));\n  const display_game_1 = Array.from(document.querySelectorAll('.display_games_1'));\n  display_game_1.forEach((element) => (element.innerHTML = games_counter[right_side]));\n\n  const display_set_0 = Array.from(document.querySelectorAll('.display_sets_0'));\n  display_set_0.forEach((element) => (element.innerHTML = sets_counter[left_side]));\n  const display_set_1 = Array.from(document.querySelectorAll('.display_sets_1'));\n  display_set_1.forEach((element) => (element.innerHTML = sets_counter[right_side]));\n\n  const sets = score.components.sets;\n  const threshold = env.match.format.threshold();\n  const max_games = threshold == 1 ? 0 : threshold > 2 ? 4 : 2;\n  [0, 1, 2, 3, 4].forEach((index) => {\n    if (!sets || (sets && !sets[index])) {\n      // old way\n      const set_fields = Array.from(document.getElementsByClassName('games' + index));\n      set_fields.forEach((field: any) => (field.value = '-'));\n      // new way\n      const player0_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_0'));\n      player0_games.forEach((field) => (field.innerHTML = index > max_games ? ' ' : '-'));\n      const player1_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_1'));\n      player1_games.forEach((field) => (field.innerHTML = index > max_games ? ' ' : '-'));\n    }\n  });\n\n  if (!sets) return;\n\n  sets.forEach((set: any, index: number) => {\n    // old way\n    const set_fields: any = Array.from(document.getElementsByClassName('games' + index));\n    set_fields.forEach((field: any, index: number) => (field.value = set.games[env.swap_sides ? 1 - index : index]));\n    // new way\n    const player0_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_0'));\n    player0_games.forEach((field) => (field.innerHTML = set.games[env.swap_sides ? 1 : 0]));\n    const player1_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_1'));\n    player1_games.forEach((field) => (field.innerHTML = set.games[env.swap_sides ? 0 : 1]));\n  });\n}\n\nexport function loadDetails() {\n  const players = env.match.metadata.players();\n  players.forEach((player: any, index: number) => {\n    const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc', 'rank'];\n    attributes.forEach((detail) => {\n      const target_id = `player${index}_${detail}`;\n      const target: any = document.getElementById(target_id);\n      if (target) target.value = player[detail] || '';\n    });\n  });\n\n  const match_details = env.match.metadata.defineMatch();\n  const m_attrs = ['court', 'umpire'];\n  m_attrs.forEach((attribute) => {\n    const target_id = `match_${attribute}`;\n    const tid: any = document.getElementById(target_id);\n    if (tid) tid.value = match_details[attribute] || '';\n  });\n\n  const tournament = env.match.metadata.defineTournament();\n  const t_attrs = ['name', 'start_date', 'tour', 'rank', 'surface', 'in_out', 'draw', 'draw_size', 'round'];\n  t_attrs.forEach((attribute) => {\n    const target_id = `tournament_${attribute}`;\n    const tid: any = document.getElementById(target_id);\n    if (tid) tid.value = tournament[attribute] || '';\n  });\n}\n\nexport function stateChangeEvent() {\n  updateMatchArchive();\n  env.serve2nd = false;\n  env.rally_mode = false;\n  updateState();\n  updateScore();\n  visibleButtons();\n}\n\nexport function visibleButtons() {\n  const points = env.match.history.action('addPoint');\n  const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n  Array.from(document.querySelectorAll('.view_stats')).forEach(\n    (div: any) => (div.style.display = points.length > 0 ? 'inline' : 'none'),\n  );\n  Array.from(document.querySelectorAll('.change_server')).forEach(\n    (div: any) => (div.style.display = points.length == 0 ? 'inline' : 'none'),\n  );\n  Array.from(document.querySelectorAll('.view_archive')).forEach(\n    (div: any) => (div.style.display = points.length == 0 && match_archive.length ? 'inline' : 'none'),\n  );\n  Array.from(document.querySelectorAll('.view_settings')).forEach(\n    (div: any) => (div.style.display = points.length == 0 && !match_archive.length ? 'inline' : 'none'),\n  );\n  Array.from(document.querySelectorAll('.view_history')).forEach(\n    (div: any) => (div.style.display = points.length > 0 ? 'inline' : 'none'),\n  );\n  Array.from(document.querySelectorAll('.undo')).forEach((div: any) => {\n    div.style.display = points.length > 0 || env.serve2nd || env.rally_mode ? 'flex' : 'none';\n  });\n  Array.from(document.querySelectorAll('.redo')).forEach((div: any) => {\n    div.style.display = env.undone.length ? 'flex' : 'none';\n  });\n  const last_point = points.length ? points[points.length - 1] : undefined;\n  const status_message = statusMessage();\n  env.match.status = status_message;\n  Array.from(document.querySelectorAll('.status_message')).forEach((div) => (div.innerHTML = status_message));\n\n  function statusMessage() {\n    if (last_point) {\n      if (last_point.needed.points_to_set && Math.min(...last_point.needed.points_to_set) == 1) return 'SET POINT';\n      if (last_point.point.breakpoint) return 'BREAK POINT';\n      if (last_point.needed.points_to_game && last_point.needed.points_to_game[last_point.point.server] == 1)\n        return 'GAME POINT';\n    }\n    if (env.lets) return `Lets: ${env.lets}`;\n    return '';\n  }\n}\n\nexport function updateState() {\n  if (env.match.nextTeamServing() != env.serving) setTimeout(() => swapServer(), 400);\n  resetButtons();\n  updatePositions();\n}\n\nexport function resetButtons() {\n  const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  const receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  Array.from(document.querySelectorAll('.fault')).forEach((div) => (div.innerHTML = 'Fault'));\n\n  const server_mode = `.modeaction_player${server_side}`;\n  Array.from(document.querySelectorAll(server_mode)).forEach((div) => (div.innerHTML = 'Serve'));\n\n  const server_fault = `.modeerr_player${server_side}`;\n  Array.from(document.querySelectorAll(server_fault)).forEach((div) => (div.innerHTML = 'Fault'));\n  const server_ace = `.modewin_player${server_side}`;\n  Array.from(document.querySelectorAll(server_ace)).forEach((div) => (div.innerHTML = 'Ace'));\n  const server_let = `.modeforce_player${server_side}`;\n  Array.from(document.querySelectorAll(server_let)).forEach((div) => (div.innerHTML = 'Let'));\n\n  const receiver_mode = `.modeaction_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_mode)).forEach((div) => (div.innerHTML = 'Return'));\n\n  const receiver_ufe = `.modeerr_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_ufe)).forEach((div) => (div.innerHTML = 'UFE'));\n  const receiver_winner = `.modewin_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_winner)).forEach((div) => (div.innerHTML = 'Winner'));\n  const receiver_forced = `.modeforce_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_forced)).forEach((div) => (div.innerHTML = 'Forced'));\n\n  Array.from(document.querySelectorAll('.vs_point_button')).forEach(\n    (div: any) => (div.style.display = settings.point_buttons ? 'flex' : 'none'),\n  );\n\n  Array.from(document.querySelectorAll('.rally')).forEach((div) => (div.innerHTML = 'Rally'));\n}\n\nexport function swapServer() {\n  env.serving = env.match.nextTeamServing();\n  env.receiving = env.match.nextTeamReceiving();\n\n  if (settings.auto_swap_sides) {\n    const games = groupGames();\n    let game_number: number = games.length;\n    if (games[games.length - 1].complete) game_number += 1;\n    env.match_swap = swapSides(game_number);\n  } else {\n    env.match_swap = false;\n  }\n  setCourtSide();\n\n  const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  const receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  /**\n  let div = document.getElementById(server_side ? 'player_receiving' : 'player_serving');\n  div.parentNode.insertBefore(div, document.getElementById('team_two'));\n  div = document.getElementById(server_side ? 'player_serving' : 'player_receiving');\n  div.parentNode.insertBefore(div, document.getElementById('entry_end'));\n  */\n\n  changeTextColor(`.indicate_serve.display_player_${server_side}`, 'yellow');\n  changeTextColor(`.indicate_serve.display_player_${receiver_side}`, 'white');\n\n  /**\n  document.getElementById(\"team_one_role\").innerHTML = server_side ? 'Receiving:' : 'Serving:';\n  document.getElementById(\"team_two_role\").innerHTML = server_side ? 'Serving:' : 'Receiving:';\n  */\n\n  if (server_side) {\n    changeClassDisplay('.display_0_serving', 'none');\n    changeClassDisplay('.display_1_serving', 'flex');\n  } else {\n    changeClassDisplay('.display_0_serving', 'flex');\n    changeClassDisplay('.display_1_serving', 'none');\n  }\n\n  const point_fields = Array.from(document.getElementsByClassName('points'));\n  point_fields.forEach((field: any, index) => {\n    const player = env.swap_sides ? 1 - index : index;\n    field.style.backgroundColor = player == env.serving ? '#FBF781' : '#D1FBFB';\n  });\n  resetButtons();\n}\n\nfunction swapSides(number: number) {\n  const iterations = [true].concat([...Array(number).keys()].map((i) => (i + 1) % 4 < 2));\n  return !iterations[number];\n}\n\nexport function setCourtSide() {\n  env.swap_sides = env.match_swap;\n  if (options.user_swap) env.swap_sides = !env.swap_sides;\n  stateChangeEvent();\n}\n\nfunction changeTextColor(classes: string, value: any) {\n  const objs = Array.from(document.querySelectorAll(classes));\n  objs.forEach((obj: any) => (obj.style.color = value));\n}\n\nfunction changeClassDisplay(className: string, display: string) {\n  const elements = Array.from(document.querySelectorAll(className));\n  elements.forEach((element: any) => (element.style.display = display));\n}\n\nexport function checkPlayerName(keypress: any) {\n  if (keypress.keyCode == 13 || keypress.code == 9) {\n    const player_hand = document.getElementById('player_hand');\n    if (player_hand) player_hand.focus();\n    changePlayerName();\n  }\n}\n\nexport function changePlayerName() {\n  const player_name: any = document.getElementById('playername');\n  const team: any = document.getElementById('team');\n  const id: any = document.getElementById('playerid');\n  if (player_name) {\n    const update: any = {\n      index: env.edit_player,\n      name: player_name.value,\n    };\n    if (team) update.team = team.value;\n    if (id) update.id = id.value;\n    env.match.metadata.definePlayer(update);\n  }\n  updatePositions();\n}\n\nexport function editMatchDetails() {\n  closeModal();\n  const matchDetails = document.getElementById('matchdeets');\n  if (matchDetails) matchDetails.style.display = 'flex';\n  const detailContent = document.getElementById('matchdetail_content');\n  if (detailContent) detailContent.scrollTop = 0;\n}\n","export default \"__VITE_ASSET__P0JBwVya__\"","export default \"__VITE_ASSET__86LiX4v4__\"","import { browserStorage } from './browserStorage';\nimport { showModal } from './utilities';\nimport { device } from './env';\n\nexport function modalExport(match_id: any) {\n  match_id = match_id || browserStorage.get('current_match');\n  Array.from(document.querySelectorAll('.mh_export')).forEach((selector: any) => (selector.style.display = 'none'));\n  const match_data = browserStorage.get(match_id);\n  const header = `\n   <p>&nbsp;</p>\n   <h1>Export Options</h1>\n   <p>Supported by your device</p>\n`;\n  const save = `\n   <div matchId=\"${match_id}\" class=\"exportMatch flexcenter\">\n      <div matchId=\"${match_id}\" class='exportMatch export_action action_icon iconsave'></div>\n   </div>\n`;\n  const copy = `\n   <div class=\"flexcenter\">\n      <button id='copy2clipboard' class=\"flexcenter c2c\" data-clipboard-text=\"\"> \n         <div class='export_action action_icon iconclipboard'></div> \n      </button>\n   </div> \n`;\n  const modaltext = `<div>${header}<div class=\"flexrows flexcenter\">${\n    !device.isIDevice ? save : ''\n  }${copy}</div></div>`;\n  const export_data = match_data;\n  showModal(modaltext, export_data);\n}\n","import { env } from './env';\n\nexport function formatChangePossible() {\n  const points = env.match.history.points();\n  return points.length == 0;\n\n  // TODO: implement when umo can propagate changes to children...\n  /*\n      scores = points.map(point=>point.score);\n      var games = match.score().counters.games.reduce((a, b) => a + b);\n      var advantages = scores.map(m=>m.indexOf('A') >= 0).filter(f=>f);\n      if (games < 1 && advantages < 1) return true;\n      */\n}\n","import { env } from './env';\n\nexport function displayPointHistory() {\n  const games = groupGames();\n  const players = env.match.metadata.players();\n  let html = '';\n  if (!games.length) return false;\n  games.forEach((game: any) => {\n    if (game.points && game.points.length) html += gameEntry(game, players);\n  });\n  html += `\n    <div class=\"flexrows ph_game\">\n      <div class='ph_margin' style='width: 100%'>\n          <div class='flexcenter' style='width: 100%'>Duration ${matchDuration()}</div>\n      </div>\n    </div>\n  `;\n\n  const phFrame = document.getElementById('ph_frame');\n  if (phFrame) phFrame.innerHTML = html;\n}\n\nfunction groupGames() {\n  const point_episodes = env.match.history.action('addPoint');\n  const games: any = [{ points: [] }];\n  let game_counter = 0;\n  let current_game = 0;\n  point_episodes.forEach((episode: any) => {\n    const point = episode.point;\n    if (point.game != current_game) {\n      game_counter += 1;\n      current_game = point.game;\n      games[game_counter] = { points: [] };\n    }\n    games[game_counter].points.push(point);\n    games[game_counter].index = game_counter;\n    games[game_counter].set = episode.set.index;\n    games[game_counter].score = episode.game.games;\n    games[game_counter].complete = episode.game.complete;\n    if (episode.game.complete) games[game_counter].winner = point.winner;\n    if (episode.set.complete) games[game_counter].last_game = true;\n  });\n  return games;\n  // if (set != undefined) games = games.filter(function(game) { return game.set == set });\n}\n\nfunction gameEntry(game: any, players: any[]) {\n  const last_point = game.points[game.points.length - 1];\n  const game_score = game.complete ? game.score.join('-') : undefined;\n  const tiebreak = last_point.tiebreak;\n  const server = tiebreak ? 'Tiebreak' : players[last_point.server].name;\n  const service = tiebreak ? '' : last_point.server ? 'playertwo' : 'playerone';\n  const servergame = tiebreak ? '' : last_point.server == last_point.winner ? 'won' : 'lost';\n  let html = `\n         <div class=\"flexrows ph_game\">\n            <div class='ph_margin flexrows'>\n               <div class=\"ph_server ${service}\">${server}</div>\n               <div class=\"ph_action flexcenter\"> \n                  <div class='ph_fish iconfish'></div>\n               </div>\n               <div class='viewGameFish ph_rally gameIndex=\"${\n                 game.index\n               }\" ph_${servergame}''> <b class=\"viewGameFish\" gameIndex=\"${game.index}\">${game_score || ''}</b> </div>\n            </div>\n         </div>\n      `;\n  game.points.forEach((point: any) => {\n    html += pointEntry(\n      point,\n      players\n      // game.complete && index == game.points.length - 1 ? game.score.join('-') : undefined\n    );\n  });\n  return html;\n}\n\nfunction pointEntry(point: any, players: any[]) {\n  const evenodd = point.index % 2 ? 'even' : 'odd';\n  let point_score = !point.tiebreak && point.server ? point.score.split('-').reverse().join('-') : point.score;\n  let player_initials;\n  if (point.result) {\n    let shot_by;\n    if (['Ace', 'Winner'].indexOf(point.result) >= 0) {\n      shot_by = players[point.winner].name;\n    } else {\n      shot_by = players[1 - point.winner].name;\n    }\n    player_initials = shot_by\n      .split(' ')\n      .map((name: string) => name[0])\n      .join('');\n  }\n  const point_hand = point.hand ? point.hand + ' ' : '';\n  const point_result = point.result || '';\n  const point_description = !point_result ? '' : `${player_initials}: ${point_hand}${point_result}`;\n  point_score = point_score == '0-0' ? 'GAME' : point_score;\n  if (point.tiebreak) {\n    if (point.server) point_score = `&nbsp;${point_score}*`;\n    if (!point.server) point_score = `*${point_score}&nbsp;`;\n  }\n  const rally = point.rally ? point.rally.length + 1 : '';\n  return `\n    <div class='flexrows ph_episode' pointIndex=\"${point.index}\">\n        <div class='ph_point_${evenodd} flexrows'>\n          <div class='viewEditPoint ph_result'>${point_description}</div>\n          <div class='viewEditPoint ph_score'>${point_score} </div>\n          <div class='viewEditPoint ph_score'>${rally}</div>\n        </div>\n    </div>\n    `;\n}\n\nfunction matchDuration() {\n  const timestamps = env.match.history.points().map((p: any) => p.uts);\n  const start = Math.min(...timestamps);\n  const end = Math.max(...timestamps);\n  const seconds = (end - start) / 1000.0;\n  return HHMMSS(seconds);\n}\n\nfunction HHMMSS(s: any) {\n  const sec_num = parseInt(s, 10); // don't forget the second param\n  let hours: any = Math.floor(sec_num / 3600);\n  let minutes: any = Math.floor((sec_num - hours * 3600) / 60);\n  let seconds: any = sec_num - hours * 3600 - minutes * 60;\n\n  if (hours < 10) {\n    hours = '0' + hours;\n  }\n  if (minutes < 10) {\n    minutes = '0' + minutes;\n  }\n  if (seconds < 10) {\n    seconds = '0' + seconds;\n  }\n  return hours + ':' + minutes + ':' + seconds;\n}\n","import { mo } from '../services/matchObject/umo';\nimport { env } from './env';\n\nexport function displayFormats() {\n  const format_types = env.match.format.types();\n  let html = '';\n  if (!format_types.length) return false;\n  format_types.forEach((format: any) => {\n    html += formatEntry(format);\n  });\n  const matchFormatList = document.getElementById('matchformatlist');\n  if (matchFormatList) matchFormatList.innerHTML = html;\n}\n\nfunction formatEntry(format: any) {\n  const { name, description } = mo.formats().matches[format];\n  return `\n  <div class='changeFormat flexjustifystart mf_format' newFormat=\"${format}\">\n      <div class='changeFormat flexcols'>\n        <div class='changeFormat mf_name'> <b class='changeFormat'>${name || ''}</b> </div>\n        <div class='changeFormat mf_description'> ${description} </div>\n      </div>\n  </div>\n  `;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import range from \"./range\";\n\nvar e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var step = tickStep(start, stop, count);\n  return range(\n    Math.ceil(start / step) * step,\n    Math.floor(stop / step) * step + step / 2, // inclusive\n    step\n  );\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array\";\nimport identity from \"./identity\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(scale0, scale1, d) {\n  var x = scale0(d);\n  return \"translate(\" + (isFinite(x) ? x : scale1(d)) + \",0)\";\n}\n\nfunction translateY(scale0, scale1, d) {\n  var y = scale0(d);\n  return \"translate(0,\" + (isFinite(y) ? y : scale1(d)) + \")\";\n}\n\nfunction center(scale) {\n  var offset = scale.bandwidth() / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        transform = orient === top || orient === bottom ? translateX : translateY,\n        range = scale.range(),\n        range0 = range[0] + 0.5,\n        range1 = range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : identity)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\"),\n        k = orient === top || orient === left ? -1 : 1,\n        x, y = orient === left || orient === right ? (x = \"x\", \"y\") : (x = \"y\", \"x\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner)\n        .attr(y + \"1\", 0.5)\n        .attr(y + \"2\", 0.5));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(y, 0.5)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return transform(position, this.parentNode.__axis || position, d); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return transform(this.parentNode.__axis || position, position, d); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position, position, d); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  var node;\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : defaultView(node = this.node())\n          .getComputedStyle(node, null)\n          .getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (event) {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(nb),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow;\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, delay);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clockNow, interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id]) || schedule.state > CREATED) throw new Error(\"too late\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id]) || schedule.state > STARTING) throw new Error(\"too late\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"too late\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      // Dispatch the interrupt event.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions. No interrupt event is dispatched\n      // because the cancelled transitions never started. Note that this also\n      // removes this transition from the pending list!\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(null, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    if (active) schedule.on.call(\"interrupt\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttribute(name);\n    value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrTweenNS(fullname, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttributeNS(fullname.space, fullname.local, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttribute(name, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {window} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction styleRemove(name, interpolate) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var style = window(this).getComputedStyle(this, null),\n        value0 = style.getPropertyValue(name),\n        value1 = (this.style.removeProperty(name), style.getPropertyValue(name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction styleRemoveEnd(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = window(this).getComputedStyle(this, null).getPropertyValue(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var style = window(this).getComputedStyle(this, null),\n        value0 = style.getPropertyValue(name),\n        value1 = value(this);\n    if (value1 == null) value1 = (this.style.removeProperty(name), style.getPropertyValue(name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n          .styleTween(name, styleRemove(name, i))\n          .on(\"end.style.\" + name, styleRemoveEnd(name))\n      : this.styleTween(name, typeof value === \"function\"\n          ? styleFunction(name, i, tweenValue(this, \"style.\" + name, value))\n          : styleConstant(name, i, value), priority);\n}\n","function styleTween(name, value, priority) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.style.setProperty(name, i(t), priority);\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {Transition, newId} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr\";\nimport transition_attrTween from \"./attrTween\";\nimport transition_delay from \"./delay\";\nimport transition_duration from \"./duration\";\nimport transition_ease from \"./ease\";\nimport transition_filter from \"./filter\";\nimport transition_merge from \"./merge\";\nimport transition_on from \"./on\";\nimport transition_remove from \"./remove\";\nimport transition_select from \"./select\";\nimport transition_selectAll from \"./selectAll\";\nimport transition_selection from \"./selection\";\nimport transition_style from \"./style\";\nimport transition_styleTween from \"./styleTween\";\nimport transition_text from \"./text\";\nimport transition_transition from \"./transition\";\nimport transition_tween from \"./tween\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","import {Transition, newId} from \"../transition/index\";\nimport schedule from \"../transition/schedule\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt\";\nimport selection_transition from \"./transition\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import {Transition} from \"./transition/index\";\nimport {SCHEDULED} from \"./transition/schedule\";\n\nvar root = [null];\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) {}\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      if (da < 0) da = da % tau + tau;\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","function objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n]\"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns;\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I, c;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.slice(j + 1, i).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var k = 1;\n        c = text.charCodeAt(I++);\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.slice(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.slice(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && (a = f(a, n++)) == null) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\"\n        : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;\n","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y1 = y0 + z, x > x1 || y > y1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y1 = y0 + z, x0 > x || y > y1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y0 = y1 - z, x > x1 || y0 > y);\n        break;\n      }\n      case 3: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y0 = y1 - z, x0 > x || y0 > y);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the quadtree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","import Quad from \"./quad\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction identity(x) {\n  return x;\n}\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal;\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Convert negative to positive, and compute the prefix.\n        // Note that -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n        // Perform the initial formatting.\n        value = formatType(value, precision);\n\n        // If the original value was negative, it may be rounded to zero during\n        // formatting; treat this as (positive) zero.\n        if (valueNegative) {\n          i = -1, n = value.length;\n          valueNegative = false;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), (48 < c && c < 58)\n                || (type === \"x\" && 96 < c && c < 103)\n                || (type === \"X\" && 64 < c && c < 71)) {\n              valueNegative = true;\n              break;\n            }\n          }\n        }\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": return valuePrefix + value + valueSuffix + padding;\n        case \"=\": return valuePrefix + padding + value + valueSuffix;\n        case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n      }\n      return padding + valuePrefix + value + valueSuffix;\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","import adder from \"./adder\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nexport var areaRingSum = adder();\n\nvar areaSum = adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import adder from \"./adder\";\nimport {areaStream, areaRingSum} from \"./area\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport {abs, degrees, epsilon, radians} from \"./math\";\nimport stream from \"./stream\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum = adder(),\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    boundsPoint(lambda, phi);\n  }\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360) % 360, except that we want\n// the distance between 180 to be 360.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import compose from \"./compose\";\nimport {asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import adder from \"./adder\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nvar lengthSum = adder(),\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum.reset();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","import adder from \"../adder\";\nimport {abs} from \"../math\";\nimport noop from \"../noop\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import adder from \"./adder\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian\";\nimport {asin, atan2, cos, epsilon, pi, quarterPi, sin, tau} from \"./math\";\n\nvar sum = adder();\n\nexport default function(polygon, point) {\n  var lambda = point[0],\n      phi = point[1],\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = point0[0],\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = point1[0],\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import projection from \"./index\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","import node_count from \"./count\";\nimport node_each from \"./each\";\nimport node_eachBefore from \"./eachBefore\";\nimport node_eachAfter from \"./eachAfter\";\nimport node_sum from \"./sum\";\nimport node_sort from \"./sort\";\nimport node_path from \"./path\";\nimport node_ancestors from \"./ancestors\";\nimport node_descendants from \"./descendants\";\nimport node_leaves from \"./leaves\";\nimport node_links from \"./links\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","import {Node} from \"./hierarchy/index\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice\";\nimport treemapSlice from \"./slice\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","import treemapDice from \"./dice\";\nimport treemapSlice from \"./slice\";\nimport {phi, squarifyRatio} from \"./squarify\";\n\nexport default (function custom(ratio) {\n\n  function resquarify(parent, x0, y0, x1, y1) {\n    if ((rows = parent._squarify) && (rows.ratio === ratio)) {\n      var rows,\n          row,\n          nodes,\n          i,\n          j = -1,\n          n,\n          m = rows.length,\n          value = parent.value;\n\n      while (++j < m) {\n        row = rows[j], nodes = row.children;\n        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;\n        if (row.dice) treemapDice(row, x0, y0, x1, y0 += (y1 - y0) * row.value / value);\n        else treemapSlice(row, x0, y0, x0 += (x1 - x0) * row.value / value, y1);\n        value -= row.value;\n      }\n    } else {\n      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);\n      rows.ratio = ratio;\n    }\n  }\n\n  resquarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return resquarify;\n})(phi);\n","export var slice = [].slice;\n","import {slice} from \"./array\";\n\nvar noabort = {};\n\nfunction Queue(size) {\n  if (!(size >= 1)) throw new Error;\n  this._size = size;\n  this._call =\n  this._error = null;\n  this._tasks = [];\n  this._data = [];\n  this._waiting =\n  this._active =\n  this._ended =\n  this._start = 0; // inside a synchronous task callback?\n}\n\nQueue.prototype = queue.prototype = {\n  constructor: Queue,\n  defer: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    if (this._error != null) return this;\n    var t = slice.call(arguments, 1);\n    t.push(callback);\n    ++this._waiting, this._tasks.push(t);\n    poke(this);\n    return this;\n  },\n  abort: function() {\n    if (this._error == null) abort(this, new Error(\"abort\"));\n    return this;\n  },\n  await: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    this._call = function(error, results) { callback.apply(null, [error].concat(results)); };\n    maybeNotify(this);\n    return this;\n  },\n  awaitAll: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    this._call = callback;\n    maybeNotify(this);\n    return this;\n  }\n};\n\nfunction poke(q) {\n  if (!q._start) {\n    try { start(q); } // let the current task complete\n    catch (e) {\n      if (q._tasks[q._ended + q._active - 1]) abort(q, e); // task errored synchronously\n      else if (!q._data) throw e; // await callback errored synchronously\n    }\n  }\n}\n\nfunction start(q) {\n  while (q._start = q._waiting && q._active < q._size) {\n    var i = q._ended + q._active,\n        t = q._tasks[i],\n        j = t.length - 1,\n        c = t[j];\n    t[j] = end(q, i);\n    --q._waiting, ++q._active;\n    t = c.apply(null, t);\n    if (!q._tasks[i]) continue; // task finished synchronously\n    q._tasks[i] = t || noabort;\n  }\n}\n\nfunction end(q, i) {\n  return function(e, r) {\n    if (!q._tasks[i]) return; // ignore multiple callbacks\n    --q._active, ++q._ended;\n    q._tasks[i] = null;\n    if (q._error != null) return; // ignore secondary errors\n    if (e != null) {\n      abort(q, e);\n    } else {\n      q._data[i] = r;\n      if (q._waiting) poke(q);\n      else maybeNotify(q);\n    }\n  };\n}\n\nfunction abort(q, e) {\n  var i = q._tasks.length, t;\n  q._error = e; // ignore active callbacks\n  q._data = undefined; // allow gc\n  q._waiting = NaN; // prevent starting\n\n  while (--i >= 0) {\n    if (t = q._tasks[i]) {\n      q._tasks[i] = null;\n      if (t.abort) {\n        try { t.abort(); }\n        catch (e) { /* ignore */ }\n      }\n    }\n  }\n\n  q._active = NaN; // allow notification\n  maybeNotify(q);\n}\n\nfunction maybeNotify(q) {\n  if (!q._active && q._call) {\n    var d = q._data;\n    q._data = undefined; // allow gc\n    q._call(q._error, d);\n  }\n}\n\nexport default function queue(concurrency) {\n  return new Queue(arguments.length ? +concurrency : Infinity);\n}\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band()\n        .domain(domain())\n        .range(range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return rescale();\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band().paddingInner(1));\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    var d = domain(),\n        i = d.length - 1,\n        n = count == null ? 10 : count,\n        start = d[0],\n        stop = d[i],\n        step = tickStep(start, stop, n);\n\n    if (step) {\n      step = tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n      d[0] = Math.floor(start / step) * step;\n      d[i] = Math.ceil(stop / step) * step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {timeDay, timeSunday, timeMonday, timeYear, utcDay, utcSunday, utcMonday, utcYear} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"S\": formatSeconds,\n    \"U\": formatWeekNumberSunday,\n    \"w\": formatWeekdayNumber,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"S\": formatUTCSeconds,\n    \"U\": formatUTCWeekNumberSunday,\n    \"w\": formatUTCWeekdayNumber,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"S\": parseSeconds,\n    \"U\": parseWeekNumberSunday,\n    \"w\": parseWeekdayNumber,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0);\n      if (i != string.length) return null;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n        var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekdayNumber(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekdayNumber(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\n\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n\n  insert: function(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n      if (after.R) {\n        after = after.R;\n        while (after.L) after = after.L;\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n\n    after = node;\n    while (parent && parent.C) {\n      grandpa = parent.U;\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n      parent = after.U;\n    }\n    this._.C = false;\n  },\n\n  remove: function(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n\n    if (!left) next = right;\n    else if (!right) next = left;\n    else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;\n      else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n    if (node && node.C) { node.C = false; return; }\n\n    do {\n      if (node === this._) break;\n      if (node === parent.L) {\n        sibling = parent.R;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n        if ((sibling.L && sibling.L.C)\n            || (sibling.R && sibling.R.C)) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n        if ((sibling.L && sibling.L.C)\n          || (sibling.R && sibling.R.C)) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) node = node.L;\n  return node;\n}\n\nexport default RedBlackTree;\n","import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// LiangBarsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n","import {createBorderEdge} from \"./Edge\";\nimport {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];\n  else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\n\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\n\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      index.sort(function(i, j) { return array[j] - array[i]; });\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\n    }\n  }\n}\n\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length;\n\n      // Remove any dangling clipped edges.\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      }\n\n      // Insert any border edges as necessary.\n      iHalfedge = 0, nHalfedges = halfedges.length;\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\n              : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  }\n\n  // If there werent any edges, have the closest site cover the extent.\n  // It doesnt matter which corner of the extent we measure!\n  if (cover) {\n    var dx, dy, d2, dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\n      cover.halfedges.push(\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\n        edges.push(createBorderEdge(site, v10, v00)) - 1\n      );\n    }\n  }\n\n  // Lastly delete any cells with no edges; these were entirely clipped.\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {circles, epsilon2} from \"./Diagram\";\n\nvar circlePool = [];\n\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x =\n  this.y =\n  this.arc =\n  this.site =\n  this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n\n  if (!lArc || !rArc) return;\n\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n\n  if (lSite === rSite) return;\n\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n\n  var circle = circlePool.pop() || new Circle;\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\n      if (node.L) node = node.L;\n      else { before = node.P; break; }\n    } else {\n      if (node.R) node = node.R;\n      else { before = node; break; }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\n\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {createCell} from \"./Cell\";\nimport {attachCircle, detachCircle} from \"./Circle\";\nimport {createEdge, setEdgeEnd} from \"./Edge\";\nimport {beaches, epsilon} from \"./Diagram\";\n\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge =\n  this.site =\n  this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach;\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n\n  detachBeach(beach);\n\n  var lArc = previous;\n  while (lArc.circle\n      && Math.abs(x - lArc.circle.x) < epsilon\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n\n  var rArc = next;\n  while (rArc.circle\n      && Math.abs(x - rArc.circle.x) < epsilon\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n\n  var nArcs = disappearing.length,\n      iArc;\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L; else {\n      dxr = x - rightBreakPoint(node, directrix);\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) { // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  }\n\n  // else lArc !== rArc\n  detachCircle(lArc);\n  detachCircle(rArc);\n\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n\n  if (!pby2) return rfocx;\n\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n\n  if (!plby2) return lfocx;\n\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}\n","import {addBeach, removeBeach} from \"./Beach\";\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\nimport {firstCircle} from \"./Circle\";\nimport {clipEdges} from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1]\n      || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree;\n  circles = new RedBlackTree;\n\n  while (true) {\n    circle = firstCircle;\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n\n  beaches =\n  circles =\n  edges =\n  cells = null;\n}\n\nDiagram.prototype = {\n  constructor: Diagram,\n\n  polygons: function() {\n    var edges = this.edges;\n\n    return this.cells.map(function(cell) {\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n\n  triangles: function() {\n    var triangles = [],\n        edges = this.edges;\n\n    this.cells.forEach(function(cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n\n    return triangles;\n  },\n\n  links: function() {\n    return this.edges.filter(function(edge) {\n      return edge.right;\n    }).map(function(edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n\n  find: function(x, y, radius) {\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\n\n    // Use the previously-found cell, or start with an arbitrary one.\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\n\n    // Traverse the half-edges to find a closer cell, if any.\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function(e) {\n        var edge = that.edges[e], v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  return node.__zoom || identity;\n}\n","import * as d3 from 'd3';\n\nexport function strokeSlider(show?: string) {\n  let range;\n  const width = window.innerWidth;\n  const stroke_slider = document.getElementById('stroke_slider');\n  const slideRight = document.getElementById('slideright');\n  const slideLeft = document.getElementById('slideleft');\n\n  const hideSlide = () => {\n    if (stroke_slider) stroke_slider.style.display = 'none';\n  };\n\n  if (show) {\n    if (stroke_slider) {\n      stroke_slider.style.display = 'flex';\n      stroke_slider.style.left = show == 'left' ? width * -1 + 'px' : width * 1.5 + 'px';\n    }\n    if (slideLeft) slideLeft.style.display = show == 'right' ? 'flex' : 'none';\n    if (slideRight) slideRight.style.display = show == 'left' ? 'flex' : 'none';\n\n    range = show == 'left' ? d3.range(0, 1.1, 0.1) : d3.range(0, 1.1, 0.1).reverse();\n    d3.selectAll('.stroke_slider')\n      .data(range)\n      .transition()\n      .duration(500)\n      .style('left', function (d: number) {\n        return d * width * 0.5 + 'px';\n      });\n  } else {\n    const side = slideLeft?.style.display == 'flex' ? 'right' : 'left';\n    range = side == 'left' ? d3.range(-1.5, 1.1, 0.1) : d3.range(1, 2.6, 0.1).reverse();\n    setTimeout(() => hideSlide(), 700);\n  }\n  d3.selectAll('.stroke_slider')\n    .data(range)\n    .transition()\n    .duration(500)\n    .style('left', function (d: number) {\n      return d * width * 0.5 + 'px';\n    });\n}\n","// Test via a getter in the options object to see if the passive property is accessed\nlet supportsPassive = false;\ntry {\n  const opts = Object.defineProperty({}, 'passive', {\n    get: () => {\n      supportsPassive = true;\n      return true;\n    }\n  });\n  window.addEventListener('test', null, opts);\n} catch (e) {\n  console.log(e);\n}\n\nconst behaviors: any = {\n  orientation: undefined,\n  time_threshold: 200,\n  diff_threshold: 130,\n  press_hold_threshold: 400,\n  prevent_touch: true,\n  prevent_double_tap: false,\n  addSwipeTarget(target) {\n    target.addEventListener('touchstart', handleTouchStart, supportsPassive ? { passive: true } : false);\n    target.addEventListener('touchmove', handleTouchMove, supportsPassive ? { passive: true } : false);\n    target.addEventListener('touchend', swipeTouchEnd, false);\n\n    target.addEventListener('mousedown', handleTouchStart, false);\n    target.addEventListener('mousemove', handleTouchMove, false);\n    target.addEventListener('mouseup', swipeTouchEnd, false);\n  },\n  addPressAndHold(target) {\n    target.addEventListener('touchstart', handleTouchStart, supportsPassive ? { passive: true } : false);\n    target.addEventListener('mousedown', handleTouchStart, false);\n    target.addEventListener('touchend', pressAndHoldEnd, false);\n    target.addEventListener('mouseup', pressAndHoldEnd, false);\n  },\n  disableDrag() {\n    document.addEventListener('touchmove', preventDrag, false);\n    document.addEventListener('touchend', preventDoubleTap, false);\n    document.addEventListener('mousemove', preventDrag, false);\n    document.addEventListener('mouseup', preventDoubleTap, false);\n  }\n};\n\n/* to make it appear more like a native app disable dragging and double tap */\nfunction preventDrag(evt) {\n  if (behaviors.prevent_touch && (window.innerHeight > 450 || behaviors.orientation == 'landscape'))\n    evt.preventDefault();\n}\n\nfunction preventDoubleTap(evt) {\n  const now = new Date().getTime();\n  if (behaviors.prevent_double_tap && now - last_touch < 500) evt.preventDefault();\n  last_touch = now;\n}\n\nlet xDown = null;\nlet yDown = null;\nlet xDiff = null;\nlet yDiff = null;\nlet timeDown = null;\nlet touch_target = null;\nlet last_touch = new Date().getTime();\n\nfunction handleTouchMove(evt) {\n  if (!xDown || !yDown) return;\n  let xUp: number, yUp: number;\n  if (evt.type == 'mousemove') {\n    xUp = evt.clientX;\n    yUp = evt.clientY;\n  } else {\n    xUp = evt.touches[0].clientX;\n    yUp = evt.touches[0].clientY;\n  }\n  xDiff = xDown - xUp;\n  yDiff = yDown - yUp;\n}\n\n/**\nfunction containsClassName(evntarget, classArr) {\n  for (let i = classArr.length - 1; i >= 0; i--) {\n    if (evntarget.classList.contains(classArr[i])) return true;\n  }\n}\n*/\n\nfunction handleTouchStart(evt) {\n  touch_target = evt.target;\n  timeDown = Date.now();\n  if (evt.type == 'mousedown') {\n    xDown = evt.clientX;\n    yDown = evt.clientY;\n  } else {\n    xDown = evt.touches[0].clientX;\n    yDown = evt.touches[0].clientY;\n  }\n  xDiff = 0;\n  yDiff = 0;\n}\n\nfunction findAncestor(el, cls) {\n  if (el.classList.contains(cls)) return el;\n  while ((el = el.parentNode && el.classList && !el.classList.contains(cls)));\n  return el;\n}\n\nfunction swipeTouchEnd() {\n  const timeDiff = Date.now() - timeDown;\n  if (\n    (Math.abs(xDiff) > behaviors.diff_threshold || Math.abs(yDiff) > behaviors.diff_threshold) &&\n    timeDiff < behaviors.time_threshold\n  ) {\n    if (Math.abs(xDiff) > Math.abs(yDiff)) {\n      if (xDiff > 0) {\n        if (typeof behaviors.swipeLeft == 'function') behaviors.swipeLeft(findAncestor(touch_target, 'swipe'));\n      } else if (typeof behaviors.swipeRight == 'function') {\n        behaviors.swipeRight(findAncestor(touch_target, 'swipe'));\n      }\n    } else if (yDiff > 0) {\n      if (typeof behaviors.swipeUp == 'function') behaviors.swipeUp(findAncestor(touch_target, 'swipe'));\n    } else if (typeof behaviors.swipeDown == 'function') {\n      behaviors.swipeDown(findAncestor(touch_target, 'swipe'));\n    }\n  }\n  xDown = null;\n  yDown = null;\n  timeDown = null;\n}\n\nfunction pressAndHoldEnd() {\n  const timeDiff = Date.now() - timeDown;\n  if (timeDiff > behaviors.press_hold_threshold && typeof behaviors.pressAndHold == 'function')\n    behaviors.pressAndHold(findAncestor(touch_target, 'pressAndHold'));\n  xDown = null;\n  yDown = null;\n  timeDown = null;\n}\n\nexport const touchManager = behaviors;\nexport default behaviors;\n","import * as d3 from 'd3';\n\nexport function simpleChart(target: any, data: any) {\n  const dom_parent = d3.select('#' + target);\n  // let dims = dom_parent.node().getBoundingClientRect();\n  //   let screen_width = dims.width;\n  //   let screen_height = screen_width / 2;\n  const screen_width = window.innerWidth * 0.85;\n  const screen_height = screen_width / 2;\n\n  const min_points = 50;\n  const colors = ['blue', 'red'];\n  dom_parent.selectAll('svg').remove();\n  const svg = dom_parent.append('svg').attr('width', screen_width).attr('height', screen_height);\n\n  const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  const width = +svg.attr('width') - margin.left - margin.right;\n  const height = +svg.attr('height') - margin.top - margin.bottom;\n\n  const x = d3.scaleLinear().range([0, width]);\n  const y = d3.scaleLinear().range([height, 0]);\n\n  const line = d3\n    .line()\n    .x(function (d) {\n      return x(d[0]);\n    })\n    .y(function (d) {\n      return y(d[1]);\n    });\n  //      .curve(d3.curveStepAfter);\n\n  const chart = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  const maxY = Math.max(...data.map((p) => p.length));\n  x.domain([0, Math.max(...data.map((p) => Math.max(...p)), min_points)]);\n  y.domain([0, maxY]);\n\n  chart\n    .append('g')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x).ticks(0));\n\n  chart\n    .append('g')\n    .style('font', '24px times')\n    .call(\n      d3\n        .axisLeft(y)\n        .ticks(Math.min(maxY, 4))\n        .tickFormat((d) => d)\n    );\n\n  drawLines(data);\n  appendCircles(data);\n\n  function lineData(points) {\n    points = points.map((point, index) => [point, index + 1]);\n    points.unshift([0, 0]);\n    return points;\n  }\n\n  function drawLines(players) {\n    players.forEach((points, index) => {\n      chart\n        .append('path')\n        .datum(lineData(points))\n        .attr('fill', 'none')\n        .attr('stroke', colors[index])\n        .attr('stroke-width', '5px')\n        .attr('shape-rendering', 'crispEdges')\n        .attr('d', line);\n    });\n  }\n\n  function appendCircles(players) {\n    players.forEach((points, index) => {\n      const targetclass = '.datapoint' + index;\n      if (points.length < 10) {\n        chart\n          .selectAll(targetclass)\n          .data(lineData(points))\n          .enter()\n          .append('circle')\n          .attr('class', targetclass)\n          .attr('fill', '#FFFFFF')\n          .attr('stroke', colors[index])\n          .attr('stroke-width', '2px')\n          .attr('r', 3.5)\n          .attr('cx', function (d) {\n            return x(d[0]);\n          })\n          .attr('cy', function (d) {\n            return y(d[1]);\n          });\n      }\n    });\n  }\n}\n","import { simpleChart } from './simpleChart';\nimport { viewManager } from './viewManager';\nimport { env, options } from './env';\n\nexport function updateStats(element?: Element) {\n  const setNumber = element ? element.getAttribute('setNumber') : undefined;\n  const set_filter = setNumber ? parseInt(setNumber) : undefined;\n  let html = '';\n  const charts: any[] = [];\n  const sets = env.match.sets().length;\n  let statselectors = `<div class='updateStats s_set'>Match</div>`;\n  const stats = env.match.stats.calculated(set_filter);\n  const stripModifiers = (text: string) => text.match(/[A-Za-z0-9_]/g)?.join('');\n  if (stats && stats.length) {\n    // generate & display match/set view selectors\n    if (sets > 1) {\n      for (let s = 0; s < sets; s++) {\n        statselectors += `<div class='updateStats s_set' setNumber=\"${s}\">Set ${s + 1}</div>`;\n      }\n    }\n    const statView = document.querySelector('#statview');\n    if (statView) statView.innerHTML = statselectors;\n\n    // generate & display stats html\n    let left: any, right: any;\n    stats.forEach((stat: any) => {\n      if (env.swap_sides) {\n        [right, left] = stat.team_stats;\n      } else {\n        [left, right] = stat.team_stats;\n      }\n      const value: number = [0]\n        .concat(...[left, right].map((side: any) => (side.value ? side.value : [])))\n        .reduce((a: number, b: number) => a + b, 0);\n      const id = stripModifiers(stat.name.toLowerCase().split(' ').join('_'));\n      let left_display = left.display;\n      let right_display = right.display;\n\n      const numerators = []\n        .concat(...[left, right].map((value: any) => (value.numerators ? value.numerators : [])))\n        .filter((item, i, s) => s.lastIndexOf(item) == i)\n        .join(',');\n      const statclass = numerators && value && stat.name != 'Aggressive Margin' ? 'statname_chart' : 'statname';\n\n      if (isNaN(left.value)) {\n        left.value = 0;\n        left_display = '0';\n      }\n      if (isNaN(right.value)) {\n        right.value = 0;\n        right_display = '0';\n      }\n\n      if (options.highlight_better_stats) {\n        if (['Double Faults', 'Unforced Errors', 'Forced Errors'].indexOf(stat.name) >= 0) {\n          if (left.value < right.value) left_display = `<b class=\"toggleChart\">${left_display}</b>`;\n          if (right.value < left.value) right_display = `<b class=\"toggleChart\">${right_display}</b>`;\n        } else {\n          if (left.value > right.value) left_display = `<b class=\"toggleChart\">${left_display}</b>`;\n          if (right.value > left.value) right_display = `<b class=\"toggleChart\">${right_display}</b>`;\n        }\n      }\n      html +=\n        `<div class='statrow' id=\"${id}\">` +\n        `<div class='toggleChart statleft'>${left_display}</div>` +\n        `<div class='toggleChart ${statclass}'>${stat.name}</div><div class='toggleChart statright'>${right_display}</div>` +\n        `</div>`;\n      const table = `<div class='statrow' id=\"${id}_chart\" style='display:none' onclick=\"showChartSource('${numerators}')\"></div>`;\n\n      if (numerators && value && stat.name != 'Aggressive Margin') {\n        charts.push({ target: `${id}_chart`, numerators });\n        html += table;\n      }\n    });\n\n    const counters = env.match.stats.counters(set_filter).teams;\n    if (counters[0].Backhand || counters[0].Forehand || counters[1].Backhand || counters[1].Forehand) {\n      const left = env.swap_sides ? 1 : 0;\n      const right = env.swap_sides ? 0 : 1;\n      html += `<div class='statsection flexcenter'>Finishing Shots - Strokes</div>`;\n      ['Forehand', 'Backhand'].forEach((hand) => {\n        if (counters[0][hand] || counters[1][hand]) {\n          const left_display = counters[left][hand] ? counters[left][hand].length : 0;\n          const right_display = counters[right][hand] ? counters[right][hand].length : 0;\n          html +=\n            `<div class='statrow'><div class='statleft'><b>${left_display}</b></div>` +\n            `<div class='statname'><b>Total ${hand} Shots</b></div><div class='statright'><b>${right_display}</b></div></div>`;\n          // get a list of unique results\n          const results = []\n            .concat(\n              ...Object.keys(counters).map((key) => {\n                return counters[key][hand]\n                  ? counters[key][hand].map((episode: any) => episode.point.result).filter(Boolean)\n                  : [];\n              })\n            )\n            .filter((item, i, s) => s.lastIndexOf(item) == i);\n          results.forEach((result) => {\n            const left_results = counters[left][hand]\n              ? counters[left][hand].filter((f: any) => f.point.result == result)\n              : [];\n            const right_results = counters[right][hand]\n              ? counters[right][hand].filter((f: any) => f.point.result == result)\n              : [];\n            if (left_results.length || right_results.length) {\n              html +=\n                `<div class='statrow'><div class='statleft'>${left_results.length}</div>` +\n                `<div class='statname'>${hand} ${result}s</div><div class='statright'>${right_results.length}</div></div>`;\n            }\n            // get a list of unique strokes\n            const strokes = []\n              .concat(\n                ...Object.keys(counters).map((key) => {\n                  return counters[key][hand]\n                    ? counters[key][hand].map((episode: any) => episode.point.stroke).filter(Boolean)\n                    : [];\n                })\n              )\n              .filter((item, i, s) => s.lastIndexOf(item) == i);\n            strokes.forEach((stroke) => {\n              const left_results = counters[left][hand]\n                ? counters[left][hand].filter((f: any) => f.point.result == result && f.point.stroke == stroke)\n                : [];\n              const right_results = counters[right][hand]\n                ? counters[right][hand].filter((f: any) => f.point.result == result && f.point.stroke == stroke)\n                : [];\n              if (left_results.length || right_results.length) {\n                html +=\n                  `<div class='statrow'><div class='statleft'>${left_results.length}</div>` +\n                  `<div class='statname'><i>${hand} ${stroke} ${result}s</i></div><div class='statright'>${right_results.length}</div></div>`;\n              }\n            });\n          });\n        }\n      });\n    }\n\n    const statLines = document.querySelector('#statlines');\n    if (statLines) statLines.innerHTML = html;\n    addCharts(charts);\n  } else {\n    viewManager('entry');\n  }\n}\n\nfunction addCharts(charts: any[]) {\n  const counters = env.match.stats.counters();\n  const stripModifiers = (text: string) => text.match(/[A-Za-z0-9]/g)?.join('');\n  if (!counters) return;\n  charts.forEach((chart) => {\n    const player_points: any = [];\n    Object.keys(counters.teams).forEach((key) => {\n      const team = counters.teams[key];\n      const numerators = chart.numerators.split(',').map((numerator: any) => stripModifiers(numerator));\n      const episodes = [].concat(...numerators.map((numerator: any) => team[numerator]));\n      const points = episodes\n        .map((episode: any) => (episode ? episode.point : undefined))\n        .filter((f) => f)\n        .sort((a, b) => a.index - b.index);\n      player_points.push(points.map((point) => point.index));\n    });\n    simpleChart(chart.target, player_points);\n  });\n}\n","import { formatChangePossible } from './formatChangePossible';\nimport { displayPointHistory } from './displayPointHistory';\nimport { displayMatchArchive } from './displayMatchArchive';\nimport { browserStorage } from './browserStorage';\nimport { displayFormats } from './displayFormats';\nimport { strokeSlider } from './strokeSlider';\nimport { touchManager } from './touchManager';\nimport { env, options, charts } from './env';\nimport { updateStats } from './updateStats';\n\nexport const changeDisplay = (display: string, id: string) => {\n  const element = document.getElementById(id);\n  if (element) element.style.display = display;\n};\n\nexport function viewManager(new_view = env.view, params?: any) {\n  // hide strokeslider any time view changes\n  strokeSlider();\n  // changeDisplay('none', 'system');\n\n  const views: any = {\n    mainmenu({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n\n        const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n        const menuMatchArchive = document.getElementById('menu_match_archive');\n        if (menuMatchArchive) menuMatchArchive.style.display = match_archive.length ? 'flex' : 'none';\n\n        const menuMatchFormat = document.getElementById('menu_match_format');\n        if (menuMatchFormat) menuMatchFormat.style.display = formatChangePossible() ? 'flex' : 'none';\n\n        const points = env.match.history.points();\n        const menuChangeServer = document.getElementById('menu_change_server');\n        if (menuChangeServer) menuChangeServer.style.display = points.length == 0 ? 'flex' : 'none';\n        // document.getElementById('footer_change_server').style.display = points.length == 0 ? 'inline' : 'none';\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'mainmenu');\n    },\n    pointhistory({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n        displayPointHistory();\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'pointhistory');\n    },\n    matcharchive({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n        displayMatchArchive();\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'matcharchive');\n    },\n    matchformat({ activate = true } = {}) {\n      displayFormats();\n      if (activate) touchManager.prevent_touch = false;\n      changeDisplay(activate ? 'flex' : 'none', 'matchformats');\n    },\n    settings({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'settings');\n    },\n    welcome({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'welcome');\n    },\n    matchdetails({ activate = true } = {}) {\n      if (activate) touchManager.prevent_touch = false;\n      changeDisplay(activate ? 'flex' : 'none', 'matchdetails');\n    },\n    entry({ activate = true } = {}) {\n      if (activate) touchManager.prevent_touch = true;\n      changeDisplay(activate && env.orientation == 'landscape' ? 'flex' : 'none', options.horizontal_view);\n      changeDisplay(activate && env.orientation == 'portrait' ? 'flex' : 'none', options.vertical_view);\n      changeDisplay(activate && env.orientation == 'portrait' ? 'flex' : 'none', 'toolbar');\n    },\n    stats({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'statsscreen');\n      if (activate) {\n        touchManager.prevent_touch = false;\n        env.match.metadata.resetStats(); // necessary because decorations not added when calculated\n        updateStats();\n      }\n    },\n    momentum({ activate = true } = {}) {\n      if (!activate) {\n        changeDisplay('none', 'momentum');\n        changeDisplay('none', 'pts');\n      } else {\n        if (env.orientation == 'landscape') {\n          changeDisplay('none', 'momentum');\n          changeDisplay('flex', 'pts');\n          charts.pts_match.update();\n        } else {\n          changeDisplay('inline', 'momentum');\n          changeDisplay('none', 'pts');\n        }\n        touchManager.prevent_touch = false;\n        const point_episodes = env.match.history.action('addPoint');\n        charts.mc.width(window.innerWidth).height(820);\n        charts.mc.data(point_episodes).update();\n        charts.mc.update();\n      }\n    },\n    gametree({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'gametree');\n      if (activate) {\n        touchManager.prevent_touch = false;\n        const point_episodes = env.match.history.action('addPoint');\n        const noAd = env.match.format.settings().code.indexOf('n_') >= 0;\n        charts.gametree.options({ display: { noAd } });\n        charts.gametree.data(point_episodes).update();\n        charts.gametree.update({ sizeToFit: true });\n      }\n    }\n  };\n\n  const view_keys = Object.keys(views);\n  if (view_keys.indexOf(new_view) >= 0) {\n    // disactivate all views that don't match the new_view\n    view_keys.filter((view) => view != new_view).forEach((view) => views[view]({ activate: false }));\n    views[new_view]({ activate: true, params });\n    env.view = new_view;\n    return new_view;\n  }\n}\n","const util = {\n  hasClass: function (e: Element, c: string) {\n    const re = new RegExp('(^|\\\\s)' + c + '(\\\\s|$)');\n    return re.test(e.className);\n  },\n  addClass: function (e: Element, c: string) {\n    if (this.hasClass(e, c)) {\n      return;\n    }\n    const newclass = e.className.split(' ');\n    newclass.push(c);\n    e.className = newclass.join(' ');\n  },\n  removeClass: function (e: Element, c: string) {\n    if (!this.hasClass(e, c)) {\n      return;\n    }\n    const re = new RegExp('(^|\\\\s)' + c + '(\\\\s|$)', 'g');\n    e.className = e.className.replace(re, '');\n  }\n};\n\nexport const SwipeList = {\n  init: (opt: any) => {\n    let swipeLeft = 0;\n    let swipeRight = 0;\n    opt.buttons.forEach((b: any) => {\n      if (b.side == 'right') swipeLeft += b.width || 0;\n      if (b.side == 'left') swipeRight += b.width || 0;\n    });\n\n    const instances = Array.from(document.querySelectorAll(opt.container));\n    instances.forEach((instance) => {\n      let moveX = 0;\n      let moveY = 0;\n      let moveStart: any = null;\n\n      // Button DIVs\n      let leftpx = 0;\n      let rightpx = 0;\n      opt.buttons.forEach((button: any) => {\n        const btn = document.createElement('div');\n        btn.textContent = button.text;\n        btn.className = button.class;\n        if (button.side == 'right') {\n          leftpx += button.width || 0;\n          btn.style.right = -1 * leftpx + 'px';\n        }\n        if (button.side == 'left') {\n          rightpx += button.width || 0;\n          btn.style.left = -1 * rightpx + 'px';\n        }\n        const abtn = instance.appendChild(btn);\n\n        // options image instead of text\n        if (button.image) {\n          const img = document.createElement('img');\n          img.src = button.image;\n          img.className = button.image_class;\n          abtn.appendChild(img);\n        }\n      });\n\n      // Hardware Acceleration\n      instance.style.webkitTransform = 'translateZ(0)';\n      instance.style.transform = 'translateZ(0)';\n\n      // Slide Start\n      instance.addEventListener(\n        'touchstart',\n        function (event: any) {\n          // Reset Animation Time\n          instance.style.transitionDuration = '0ms';\n\n          // Close other items\n          instances.forEach((inst) => {\n            if (util.hasClass(inst, 'move-out-click') && inst != instance) {\n              inst.style.transitionDuration = '325ms';\n              inst.style.webkitTransform = 'translateX(0px)';\n              inst.style.transform = 'translateX(0px)';\n              util.removeClass(inst, 'move-out-click');\n            }\n          });\n\n          // Save slide position\n          const touches = event.changedTouches;\n          moveStart = {\n            x: touches[0].pageX,\n            y: touches[0].pageY\n          };\n        },\n        true\n      );\n\n      // Sliding Animation\n      instance.addEventListener(\n        'touchmove',\n        function (event: any) {\n          // Limit to one instance\n          if (moveStart === null) {\n            return;\n          }\n\n          const touches = event.changedTouches;\n          const nowX = touches[0].pageX;\n          const nowY = touches[0].pageY;\n          moveX = nowX - moveStart.x;\n          moveY = nowY - moveStart.y;\n\n          // Left/Right swipes\n          if (Math.abs(moveX) > Math.abs(moveY)) {\n            if (moveX > 0) {\n              if (util.hasClass(instance, 'move-out-click')) {\n                const x = moveX > swipeLeft ? 0 : -swipeLeft + moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              } else if (swipeRight) {\n                const x = Math.abs(moveX) > swipeLeft ? swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              }\n            }\n            if (moveX < 0) {\n              if (!util.hasClass(instance, 'move-out-click')) {\n                const x = Math.abs(moveX) > swipeLeft ? -swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              } else if (swipeRight) {\n                const x = Math.abs(moveX) > swipeLeft ? swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              }\n            }\n          }\n        },\n        true\n      );\n\n      // Finish Sliding Action\n      instance.addEventListener(\n        'touchend',\n        function () {\n          // Limit to one instance\n          if (moveStart === null) {\n            return;\n          }\n\n          // Slower Animation\n          instance.style.transitionDuration = '125ms';\n\n          // If swipe active\n          if (util.hasClass(instance, 'move-out-click')) {\n            if (moveX > 0 && swipeLeft) {\n              const x = moveX > 10 ? 0 : -swipeLeft;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x === 0) {\n                util.removeClass(instance, 'move-out-click');\n              }\n            } else if (swipeRight) {\n              const x = moveX < -10 ? 0 : swipeLeft;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x === 0) {\n                util.removeClass(instance, 'move-out-click');\n              }\n            }\n          } else {\n            if (moveX < 0 && swipeLeft) {\n              const x = Math.abs(moveX) > swipeLeft / 2 ? -swipeLeft : 0;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x !== 0) {\n                util.addClass(instance, 'move-out-click');\n              }\n            } else if (swipeRight) {\n              const x = Math.abs(moveX) > swipeLeft / 2 ? swipeLeft : 0;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x !== 0) {\n                util.addClass(instance, 'move-out-click');\n              }\n            }\n          }\n\n          // Restore initial position\n          moveStart = null;\n          moveX = 0;\n        },\n        true\n      );\n\n      // Cancel\n      instance.addEventListener(\n        'touchcancel',\n        function () {\n          instance.style.transitionDuration = '225ms';\n          instance.style.webkitTransform = 'translateX(0px)';\n          instance.style.transform = 'translateX(0px)';\n          util.removeClass(instance, 'move-out-click');\n          moveStart = null;\n          moveX = 0;\n        },\n        true\n      );\n    });\n  }\n};\n","import { stateChangeEvent, swapServer } from './displayUpdate';\nimport { buttons, env, updatePositions } from './env';\n\nexport function defineActionEvents() {\n  env.match.events.addPoint(stateChangeEvent);\n  env.match.events.undo(stateChangeEvent);\n  env.match.events.reset(resetEvent);\n}\n\nexport function resetEvent() {\n  env.match.set.perspectiveScore(false);\n  env.match.set.liveStats(true);\n  env.match.metadata.timestamps(true);\n  env.match.metadata.defineMatch({ date: null });\n\n  env.serve2nd = false;\n  env.rally_mode = false;\n  env.serving = env.match.nextTeamServing();\n  env.receiving = env.match.nextTeamReceiving();\n  env.undone = [];\n  env.rally = 0;\n  env.lets = 0;\n\n  resetStyles();\n  updatePositions();\n  swapServer();\n  stateChangeEvent();\n}\n\nexport function resetStyles() {\n  Object.keys(buttons).forEach((id) => resetButton(id));\n}\n\nexport function resetButton(id: string) {\n  const button = document.getElementById(id);\n  if (!button) return;\n  if (buttons?.[id] && buttons[id].color) {\n    button.style.backgroundColor = 'white';\n    button.style.color = buttons[id].color;\n    button.style.borderColor = buttons[id].color;\n  }\n}\n","export function UUID() {\n  const lut: string[] = [];\n\n  for (let i = 0; i < 256; i++) {\n    lut[i] = (i < 16 ? '0' : '') + i.toString(16);\n  }\n\n  const d0 = (Math.random() * 0xffffffff) | 0;\n  const d1 = (Math.random() * 0xffffffff) | 0;\n  const d2 = (Math.random() * 0xffffffff) | 0;\n  const d3 = (Math.random() * 0xffffffff) | 0;\n  // eslint-disable-next-line no-mixed-operators\n  return (\n    lut[d0 & 0xff] +\n    lut[(d0 >> 8) & 0xff] +\n    lut[(d0 >> 16) & 0xff] +\n    lut[(d0 >> 24) & 0xff] +\n    '-' +\n    // eslint-disable-next-line no-mixed-operators\n    lut[d1 & 0xff] +\n    lut[(d1 >> 8) & 0xff] +\n    '-' +\n    lut[((d1 >> 16) & 0x0f) | 0x40] +\n    lut[(d1 >> 24) & 0xff] +\n    '-' +\n    // eslint-disable-next-line no-mixed-operators\n    lut[(d2 & 0x3f) | 0x80] +\n    lut[(d2 >> 8) & 0xff] +\n    '-' +\n    lut[(d2 >> 16) & 0xff] +\n    lut[(d2 >> 24) & 0xff] +\n    // eslint-disable-next-line no-mixed-operators\n    lut[d3 & 0xff] +\n    lut[(d3 >> 8) & 0xff] +\n    lut[(d3 >> 16) & 0xff] +\n    lut[(d3 >> 24) & 0xff]\n  );\n}\n\n/**\n * UUID prepended with 'u_' which is safe for html attribute ids\n */\nexport function safeUUID() {\n  return `u_${UUID()}`;\n}\n","import { loadDetails, stateChangeEvent, updateScore } from './displayUpdate';\nimport { clearActionEvents, env, updatePositions } from './env';\nimport { browserStorage } from './browserStorage';\nimport { defineActionEvents } from './events';\nimport { viewManager } from './viewManager';\nimport { isJSON } from './utilities';\nimport { UUID } from './UUID';\n\nexport function loadMatch(match_id: string, view = 'entry') {\n  if (!match_id) {\n    viewManager('entry');\n    return;\n  }\n  env.match.reset();\n  const json = browserStorage.get(match_id);\n  const match_data = json && isJSON(json) && match_id ? JSON.parse(browserStorage.get(match_id) ?? '[]') : undefined;\n  if (!match_data) {\n    // newMatch(); ??\n    // insure match_id is not in match_archive ??\n    viewManager('entry');\n    return;\n  }\n\n  // reduce overhead by turning off matchObject state change events;\n  clearActionEvents();\n  browserStorage.set('current_match', match_id);\n  if (match_data.match) {\n    if (!match_data.match.muid) {\n      match_data.match.muid = UUID();\n      browserStorage.remove(match_id);\n    }\n    env.match.metadata.defineMatch(match_data.match);\n  }\n  if (match_data.first_service) env.match.set.firstService(match_data.first_service);\n  if (match_data.tournament) env.match.metadata.defineTournament(match_data.tournament);\n  if (match_data.format) {\n    env.match.format.settings(match_data.format);\n    const mdFormat = document.getElementById('md_format');\n    if (mdFormat) mdFormat.innerHTML = match_data.format.name;\n  }\n\n  if (!match_data.version) {\n    match_data.points.forEach((point: any) => env.match.addPoint(point));\n  }\n\n  // turn on timestamps *after* loading all points\n  env.match.metadata.timestamps(true);\n\n  if (match_data.players) {\n    match_data.players.forEach((player: any, index: number) => {\n      player.index = index;\n      env.match.metadata.definePlayer(player);\n    });\n  }\n  updatePositions();\n  updateScore();\n  loadDetails();\n  stateChangeEvent();\n  defineActionEvents();\n  viewManager(view);\n}\n","import { loadDetails, stateChangeEvent, updateScore } from './displayUpdate';\nimport exportImage from '../assets/icons/exportwhite.png';\nimport recycleImage from '../assets/icons/recycle.png';\nimport { findUpClass, firstAndLast } from './utilities';\nimport { browserStorage } from './browserStorage';\nimport { modalExport } from './modalExport';\nimport { viewManager } from './viewManager';\nimport { SwipeList } from './swipeList';\nimport { loadMatch } from './loadMatch';\nimport { UUID } from './UUID';\nimport { env } from './env';\n\nexport function displayMatchArchive(params?: any) {\n  const active = params?.active;\n  let html = `<div class='swipe-panel no-top'>`;\n  // archive used to sort by match.date when match_id was timestamp...\n  // need a fix for this...\n  const match_archive: string[] = JSON.parse(browserStorage.get('match_archive') || '[]')\n    .filter((item: any, i: number, s: any) => s.lastIndexOf(item) == i)\n    .reverse();\n  if (!match_archive.length) {\n    newMatch();\n    return;\n  }\n  if (active) return;\n\n  match_archive.forEach((match_id: string) => {\n    const match_data = match_id && JSON.parse(browserStorage.get(match_id) ?? '[]');\n    if (match_data) {\n      html += archiveEntry(match_id, match_data);\n    } else {\n      browserStorage.remove(match_id);\n    }\n  });\n  html += '</div>';\n  const ma_elem = document.getElementById('matcharchiveList');\n  if (ma_elem) ma_elem.innerHTML = html;\n\n  SwipeList.init({\n    container: '.swipe-item',\n    buttons: [\n      {\n        class: 'img_export swipe_img',\n        image_class: 'export_icon',\n        image: exportImage,\n        side: 'right',\n        width: 60\n      },\n      {\n        class: 'img_recycle swipe_img',\n        image_class: 'recycle_icon',\n        image: recycleImage,\n        side: 'right',\n        width: 60\n      }\n    ]\n  });\n\n  if (ma_elem) {\n    ma_elem.addEventListener('click', function (e: any) {\n      const p = findUpClass(e.target, 'swipe-item');\n      const muid = p?.getAttribute('muid');\n      const selected_match = findUpClass(e.target, 'mh_match');\n      if (selected_match) {\n        return loadMatch(muid);\n      }\n\n      if (e?.target?.className?.indexOf('img_export') >= 0 || e.target.className == 'export_icon') {\n        p.classList.remove('move-out-click');\n        p.style.webkitTransitionDuration = '125ms';\n        p.style.transitionDuration = '125ms';\n        p.style.webkitTransform = 'translateX(0px)';\n        p.style.transform = 'translateX(0px)';\n        modalExport(muid);\n      }\n      if (e.target.className.indexOf('img_recycle') >= 0 || e.target.className == 'recycle_icon') {\n        deleteMatch(muid);\n        p.remove();\n      }\n    });\n  }\n\n  return match_archive;\n}\n\nfunction deleteMatch(match_id: string) {\n  /*\n  if (broadcasting()) {\n    const match_data = JSON.parse(browserStorage.get(match_id));\n    const data: any = { muid: match_id };\n    const tournament = (match_data && match_data.tournament) || {};\n    data.tuid = tournament.tuid || tournament.name;\n    // coms.socket.emit('delete match', data);\n  }\n  */\n\n  browserStorage.remove(match_id);\n  const current_match_id = browserStorage.get('current_match');\n  let match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n  match_archive = match_archive.filter((archive_id: string) => match_id != archive_id);\n  browserStorage.set('match_archive', JSON.stringify(match_archive));\n  if (match_id == current_match_id) {\n    resetMatch();\n  }\n  displayMatchArchive({ active: true });\n}\n\nexport function resetMatch(muid?: string) {\n  env.match.reset();\n  loadDetails();\n  updateScore();\n  const date = new Date().valueOf();\n  muid = muid || UUID();\n  env.match.metadata.defineMatch({ muid, date });\n  browserStorage.set('current_match', muid);\n  stateChangeEvent();\n}\n\nexport function newMatch(force_format?: boolean) {\n  resetMatch();\n  viewManager(force_format ? 'entry' : 'matchformat');\n}\n\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nfunction archiveEntry(match_id: string, match_data: any) {\n  const date = new Date(match_data.match.date);\n  const display_date = [date.getDate(), months[date.getMonth()], date.getFullYear()].join('-');\n  const players = match_data.players;\n  const display_players = `\n         <span class='nowrap'>${firstAndLast(players[0].name)}</span>\n         <span> v. </span>\n         <span class='nowrap'>${firstAndLast(players[1].name)}</span>\n         `;\n  const match_score = match_data.scoreboard;\n  const match_format = match_data.format.name;\n  return `\n      <div id='match_${match_id}' muid='${match_id}' class='flexcenter mh_swipe swipe-item'>\n         <div class='flexcols mh_match'>\n            <div class='mh_players'>${display_players}</div>\n            <div class='mh_details'>\n               <div>${display_date}</div>\n               <div class='mh_format'>${match_format}</div>\n            </div>\n            <div class='mh_score'>${match_score}</div>\n         </div>\n      </div>`;\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data\n            .arrayBuffer()\n            .then(toArray)\n            .then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, encodedPacket => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        }\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else if (state === 2 /* READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        }\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexport function createCookieJar() { }\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest, } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n        if (this.opts.withCredentials) {\n            this.cookieJar = createCookieJar();\n        }\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, cookieJar: this.cookieJar }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        var _a;\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, true);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        // @ts-ignore\n        if (typeof WebTransport !== \"function\") {\n            return;\n        }\n        // @ts-ignore\n        this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        this.transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this.transport.ready.then(() => {\n            this.transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this.writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this.writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this.writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: Polling,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 2000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { defaultBinaryType } from \"./transports/websocket-constructor.js\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\n            \"polling\",\n            \"websocket\",\n            \"webtransport\",\n        ];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this.upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            this.resetPingTimeout();\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        // the timeout flag is optional\n        const withErr = this.flags.timeout !== undefined || this._opts.ackTimeout !== undefined;\n        return new Promise((resolve, reject) => {\n            args.push((arg1, arg2) => {\n                if (withErr) {\n                    return arg1 ? reject(arg1) : resolve(arg2);\n                }\n                else {\n                    return resolve(arg1);\n                }\n            });\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import { broadcastToggle } from './coms';\n\nimport * as d3 from 'd3';\n\nexport function pulseCircle() {\n  let width: number; // in pixels\n  let height: number; // in pixels\n  let radius = 50;\n  let duration = 1000;\n  const stroke = 'black';\n  let pulse_circles = 5;\n  let stroke_width = 10;\n  let delay_multiplier = 150;\n  let color_range = ['white', 'blue'];\n  const margins = { top: 0, right: 0, bottom: 0, left: 0 };\n\n  function pulseCircle(selection: any) {\n    const dims = selection.node().getBoundingClientRect();\n    if (!height || !width) {\n      radius = Math.min(width || dims.width, dims.width, height || dims.height, dims.height) * 0.45;\n      stroke_width = radius / 3;\n    }\n    width = width || dims.width;\n    height = height || dims.height;\n\n    if (!height || !width) return;\n\n    const color = d3.scaleLinear().domain([100, 0]).range(color_range).interpolate(d3.interpolateHcl);\n\n    const colorFill = function (d: number) {\n      return color(Math.abs((d % 20) - 10));\n    };\n\n    const y = d3.scalePoint().domain(d3.range(pulse_circles)).range([0, height]);\n\n    /*\n    const z = d3\n      .scaleLinear()\n      .domain([10, 0])\n      .range(['hsl(240, 90%, 100%)', 'hsl(240,90%,40%)'])\n      .interpolate(d3.interpolateHcl);\n      */\n\n    const svg = selection.append('svg').attr('width', width).attr('height', height);\n\n    const g = svg.append('g').attr('transform', 'translate(' + margins.left + ',' + margins.top + ')');\n\n    g.selectAll('circle')\n      .data(y.domain())\n      .enter()\n      .append('circle')\n      .attr('fill', '#000')\n      .attr('stroke', stroke)\n      .attr('stroke-width', stroke_width + 'px')\n      .attr('r', 0)\n      .attr('cx', width / 2)\n      .attr('cy', height / 2)\n      .style('fill', colorFill)\n      .on('click', broadcastToggle)\n      .transition()\n      .duration(duration)\n      .delay((d: number) => {\n        return d * delay_multiplier;\n      })\n      .on('start', function repeat(_, i: number, n: any) {\n        d3.active(n[i])\n          .attr('r', radius)\n          .attr('stroke-width', '0px')\n          .transition()\n          .attr('r', 0)\n          .attr('stroke-width', stroke_width + 'px')\n          .transition()\n          .on('start', repeat);\n      });\n  }\n\n  pulseCircle.height = (d: number) => {\n    return d ? ((height = d), pulseCircle) : height;\n  };\n  pulseCircle.width = (d: number) => {\n    return d ? ((width = d), pulseCircle) : width;\n  };\n  pulseCircle.duration = (d: number) => {\n    return d ? ((duration = d), pulseCircle) : duration;\n  };\n  pulseCircle.pulse_circles = (d: number) => {\n    return d ? ((pulse_circles = d), pulseCircle) : pulse_circles;\n  };\n  pulseCircle.radius = (d: number) => {\n    return d ? ((radius = d), pulseCircle) : radius;\n  };\n  pulseCircle.delay_multiplier = (d: number) => {\n    return d ? ((delay_multiplier = d), pulseCircle) : delay_multiplier;\n  };\n  pulseCircle.stroke_width = (d: number) => {\n    return d ? ((stroke_width = d), pulseCircle) : stroke_width;\n  };\n  pulseCircle.color_range = (d: any) => {\n    return d ? ((color_range = d), pulseCircle) : color_range;\n  };\n\n  return pulseCircle;\n}\n","export const version = '@VERSION@';\n","import { attemptJSONparse, formatDate, getOpponents, showModal } from './utilities';\nimport { app, env, updateAppState, updateMatchArchive } from './env';\nimport { loadDetails, stateChangeEvent } from './displayUpdate';\nimport { resetMatch } from './displayMatchArchive';\nimport { viewManager } from './viewManager';\nimport { connect } from 'socket.io-client';\nimport { pulseCircle } from './pulseCircle';\nimport { version } from '../config/version';\n\nimport * as d3 from 'd3';\nimport { closeModal } from './modals';\n\ntype ComsObject = {\n  connectionOptions: any;\n  socket: any;\n};\n\nexport const coms: ComsObject = {\n  socket: undefined,\n  connectionOptions: {\n    'force new connection': true,\n    reconnectionDelay: 1000,\n    reconnectionAttempts: 'Infinity',\n    timeout: 20000,\n  },\n};\n\nexport function connectSocket() {\n  if ((navigator.onLine || window.location.hostname == 'localhost') && !coms.socket) {\n    const server =\n      window.location.hostname.startsWith('localhost') || window.location.hostname === '127.0.0.1'\n        ? 'http://localhost:8833'\n        : 'https://courthive.com';\n    const connectionString = `${server}/mobile`;\n    coms.socket = connect(connectionString, coms.connectionOptions);\n    if (coms.socket) {\n      coms.socket.on('connect', comsConnect);\n      coms.socket.on('ack', (ack) => console.log({ ack }));\n      coms.socket.on('disconnect', comsDisconnect);\n      coms.socket.on('connect_error', comsError);\n      coms.socket.on('history request', sendHistory);\n      coms.socket.on('tmx message', receiveMatchUp);\n    }\n  }\n}\n\nexport function disconnectSocket() {\n  if (coms.socket) {\n    coms.socket.disconnect();\n    coms.socket = undefined;\n  }\n}\n\nexport function sendHistory() {\n  connectSocket();\n  if (coms.socket) {\n    const match = env.match.metadata.defineMatch();\n    const payload = {\n      matchUp: {\n        tournament: env.match.metadata.defineTournament(),\n        first_service: env.match.set.firstService(),\n        players: env.match.metadata.players(),\n        format: env.match.format.settings(),\n        scoreboard: env.match.scoreboard(),\n        points: env.match.history.points(),\n        provider: env.provider,\n        matchUpId: match.muid,\n        ch_version: version,\n        match,\n      },\n    };\n    if (match.muid) coms.socket.emit('mh', { type: 'history', payload });\n  }\n  closeModal();\n}\n\nfunction comsConnect() {\n  console.log('connect');\n}\nfunction comsDisconnect() {\n  console.log('socket closed');\n}\nfunction comsError() {\n  showModal(` <p> <h1>No Internet Connection!</h1>`);\n  endBroadcast();\n}\n\nfunction receiveMatchUp(data: any) {\n  if (!data?.matchUpId) {\n    const message = `<h2>Invalid Data</h2>`;\n    return showModal(message);\n  }\n\n  const auth_match = attemptJSONparse(data.data);\n\n  updateMatchArchive();\n  resetMatch(auth_match.match.muid);\n\n  env.match.metadata.defineTournament({\n    name: auth_match.tournament.name,\n    tuid: auth_match.tournament.tuid,\n    start_date: formatDate(auth_match.tournament.start),\n  });\n\n  env.match.metadata.defineMatch({\n    euid: auth_match.event.euid,\n  });\n\n  const format = auth_match.teams && 2 === auth_match.teams[0].length ? 'doubles' : 'singles';\n  const teams = getOpponents({\n    sides: auth_match.teams,\n    format,\n  });\n  env.match.metadata.definePlayer({ index: 0, name: teams[0] });\n  env.match.metadata.definePlayer({ index: 1, name: teams[1] });\n\n  const surface: any = auth_match.event.surface;\n  if (surface) {\n    const surfaces: any = {\n      C: 'clay',\n      H: 'hard',\n      G: 'grass',\n    };\n    if (surfaces[surface]) {\n      env.match.metadata.defineTournament({ surface: surfaces[surface] });\n    }\n  }\n\n  const in_out = auth_match.event.inout;\n  if (in_out) {\n    const inout: any = {\n      o: 'out',\n      i: 'in',\n    };\n    if (inout[in_out]) {\n      env.match.metadata.defineTournament({ in_out: inout[in_out] });\n    }\n  }\n\n  loadDetails();\n  stateChangeEvent();\n  viewManager('entry');\n}\n\nexport function broadcasting() {\n  if (app.broadcast && coms.socket) return true;\n  if (app.broadcast) {\n    connectSocket();\n  }\n  return false;\n}\n\nexport function startBroadcast() {\n  connectSocket();\n  //@ts-expect-error unknown reason\n  const pc: any = pulseCircle().color_range(['white', 'white']).height(60).width(60).radius(28).stroke_width(5);\n  d3.select('#startpulse').style('display', 'none');\n  d3.select('#pulse').style('display', 'block').call(pc);\n}\n\nfunction endBroadcast() {\n  app.broadcast = false;\n  d3.select('#startpulse').style('display', 'flex');\n  d3.select('#pulse').style('display', 'none').selectAll('svg').remove();\n  disconnectSocket();\n}\n\nexport function sendKey(payload: any) {\n  Object.assign(payload, {\n    timestamp: new Date().getTime(),\n    uuuid: app.user_uuid,\n  });\n  if (coms.socket) {\n    coms.socket.emit('mh', { type: 'key', payload });\n    closeModal();\n  } else {\n    const modaltext = ` <p> <h1>Not connected</h1> <p><i>Connection Error</i></p> </p> `;\n    showModal(modaltext);\n  }\n}\n\nexport function broadcastToggle() {\n  app.broadcast = !app.broadcast;\n  if (app.broadcast) {\n    startBroadcast();\n  } else {\n    endBroadcast();\n  }\n  updateAppState();\n}\n\nexport function broadcastStatus(status: string) {\n  if (broadcasting()) {\n    const muid = env.match.metadata.defineMatch().muid;\n    const data: any = { muid, status };\n    const tournament = env.match.metadata.defineTournament();\n    data.tuid = tournament.tuid || tournament.name;\n    coms.socket.emit('mh', { type: 'status', payload: data });\n  }\n}\n","import * as d3 from 'd3';\n\nexport function gameFish() {\n  let data: any;\n  let fish_width;\n  let fish_height;\n  let coords = [0, 0];\n  let last_coords: any;\n  let update: any;\n  const images: any = { left: undefined, right: undefined };\n\n  const options: any = {\n    id: 'gf1',\n    score: [0, 0],\n    width: window.innerWidth,\n    height: window.innerHeight,\n    margins: {\n      top: 10,\n      bottom: 10,\n      left: 10,\n      right: 10\n    },\n    fish: {\n      school: false,\n      gridcells: ['0', '15', '30', '40', 'G'],\n      max_rally: undefined,\n      cell_size: undefined,\n      min_cell_size: 5,\n      max_cell_size: 20\n    },\n    set: {\n      tiebreak_to: 7\n    },\n    display: {\n      orientation: 'vertical',\n      transition_time: 0,\n      sizeToFit: false,\n      leftImg: false,\n      rightImg: false,\n      show_images: undefined,\n      reverse: false,\n      point_score: true,\n      service: true,\n      player: true,\n      rally: true,\n      score: true,\n      grid: true\n    },\n    colors: {\n      players: { 0: 'red', 1: 'black' },\n      results: {\n        Out: 'red',\n        Net: 'coral',\n        'Unforced Error': 'red',\n        Forced: 'orange',\n        Ace: 'lightgreen',\n        'Serve Winner': 'lightgreen',\n        Winner: 'lightgreen',\n        'Forced Volley Error': 'orange',\n        'Forced Error': 'orange',\n        In: 'yellow',\n        'Passing Shot': 'lightgreen',\n        'Out Passing Shot': 'red',\n        'Net Cord': 'yellow',\n        'Out Wide': 'red',\n        'Out Long': 'red',\n        'Double Fault': 'red',\n        Unknown: 'blue',\n        Error: 'red'\n      }\n    }\n  };\n\n  const default_colors = { default: '#235dba' };\n  let colors = JSON.parse(JSON.stringify(default_colors));\n\n  const events: any = {\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mouseover: null, mouseout: null, click: null }\n  };\n\n  let fishFrame: any;\n  let root: any;\n  let bars: any;\n  let fish: any;\n  let game: any;\n\n  function chart(selection: any) {\n    const parent_type = selection._groups[0][0].tagName.toLowerCase();\n\n    if (parent_type != 'svg') {\n      root = selection.append('div').attr('class', 'fishRoot');\n\n      fishFrame = root\n        .append('svg')\n        .attr('id', 'gameFish' + options.id)\n        .attr('class', 'fishFrame');\n\n      bars = fishFrame.append('g');\n      fish = fishFrame.append('g');\n      game = fishFrame.append('g');\n    }\n\n    update = function (opts: any) {\n      if (bars == undefined || fish == undefined || game == undefined) return;\n\n      if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.max(dims.width, 100);\n        options.height = Math.max(dims.height, 100);\n      }\n\n      if (options.fish.cell_size && !options.fish.school) {\n        const multiplier = Math.max(10, data.length + 2);\n        options.height = options.fish.cell_size * multiplier * 0.9;\n      }\n\n      let tiebreak = false;\n      let max_rally = 0;\n      data.forEach((e: any) => {\n        if (e.rally && e.rally.length > max_rally) max_rally = e.rally.length;\n        if (e.score.indexOf('T') > 0) tiebreak = true;\n      });\n\n      if (options.fish.max_rally && options.fish.max_rally > max_rally) max_rally = options.fish.max_rally;\n\n      fish_width = options.width - (options.margins.left + options.margins.right);\n      fish_height = options.height - (options.margins.top + options.margins.bottom);\n      const vert = options.display.orientation == 'vertical' ? 1 : 0;\n      const fish_offset = vert ? fish_width : fish_height;\n      const fish_length = vert ? fish_height : fish_width;\n      const midpoint = (vert ? options.margins.left : options.margins.top) + fish_offset / 2;\n      const sw = 1; // service box % offset\n      const rw = 0.9; // rally_width % offset\n\n      bars.attr('transform', 'translate(' + (vert ? 0 : coords[0]) + ',' + (vert ? coords[1] : 0) + ')');\n      fish.attr('transform', 'translate(' + coords[0] + ',' + coords[1] + ')');\n      game.attr('transform', 'translate(' + coords[0] + ',' + coords[1] + ')');\n\n      let cell_size;\n      if (options.fish.cell_size) {\n        cell_size = options.fish.cell_size;\n      } else {\n        const offset_divisor = tiebreak ? options.set.tiebreak_to + 4 : options.fish.gridcells.length + 2;\n        const cell_offset =\n          fish_offset / (options.fish.gridcells.length + (options.display.service ? offset_divisor : 0));\n        const cell_length = fish_length / (data.length + 2);\n        cell_size = Math.min(cell_offset, cell_length);\n        cell_size = Math.max(options.fish.min_cell_size, cell_size);\n        cell_size = Math.min(options.fish.max_cell_size, cell_size);\n      }\n\n      const diag = Math.sqrt(2 * Math.pow(cell_size, 2));\n      const radius = diag / 2;\n\n      const grid_data = [];\n      const grid_labels = [];\n      const grid_side = tiebreak ? options.set.tiebreak_to : options.fish.gridcells.length - 1;\n      for (let g = 0; g < grid_side; g++) {\n        const label = tiebreak ? g : options.fish.gridcells[g];\n        // l = length, o = offset\n        grid_labels.push({\n          label: label,\n          l: (g + (vert ? 1.25 : 0.75)) * radius,\n          o: (g + (vert ? 0.75 : 1.25)) * radius,\n          rotate: 45\n        });\n        grid_labels.push({ label: label, l: (g + 1.25) * radius, o: -1 * (g + 0.75) * radius, rotate: -45 });\n        for (let c = 0; c < grid_side; c++) {\n          grid_data.push([g, c]);\n        }\n      }\n\n      // const score_offset = options.display.score ? cell_size : 0;\n\n      // check if this is a standalone SVG or part of larger SVG\n      if (root) {\n        root.attr('width', options.width + 'px').attr('height', options.height + 'px');\n\n        fishFrame.attr('width', options.width + 'px').attr('height', options.height + 'px');\n      }\n\n      if (options.display.point_score) {\n        const game_score = fish.selectAll('.game_score' + options.id).data(grid_labels);\n\n        game_score.exit().remove();\n\n        game_score\n          .enter()\n          .append('text')\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('transform', gscoreT)\n          .attr('text-anchor', 'middle')\n          .merge(game_score)\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('class', 'game_score' + options.id)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('transform', gscoreT)\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d.label;\n          });\n      } else {\n        fish.selectAll('.game_score' + options.id).remove();\n      }\n\n      if (options.display.grid) {\n        const gridcells = fish.selectAll('.gridcell' + options.id).data(grid_data);\n\n        gridcells.exit().remove();\n\n        gridcells\n          .enter()\n          .append('rect')\n          .attr('stroke', '#ccccdd')\n          .attr('stroke-width', lineWidth)\n          .attr('transform', gridCT)\n          .attr('width', cell_size)\n          .attr('height', cell_size)\n          .merge(gridcells)\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('class', 'gridcell' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('width', cell_size)\n          .attr('height', cell_size)\n          .attr('transform', gridCT)\n          .attr('fill-opacity', 0);\n      } else {\n        fish.selectAll('.gridcell' + options.id).remove();\n      }\n\n      const gamecells = game.selectAll('.gamecell' + options.id).data(data);\n\n      gamecells.exit().remove();\n\n      gamecells\n        .enter()\n        .append('rect')\n        .attr('opacity', 0)\n        .attr('width', cell_size)\n        .attr('height', cell_size)\n        .attr('transform', gameCT)\n        .attr('stroke', '#ccccdd')\n        .attr('stroke-width', lineWidth)\n        .merge(gamecells)\n        .attr('id', (d: any, i: number) => {\n          return options.id + 'Gs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .transition()\n        .duration(options.display.transition_time)\n        .attr('class', 'gamecell' + options.id)\n        .attr('width', cell_size)\n        .attr('height', cell_size)\n        .attr('transform', gameCT)\n        .attr('stroke', '#ccccdd')\n        .attr('stroke-width', lineWidth)\n        .attr('opacity', options.display.player ? 1 : 0)\n        .style('fill', function (d: any) {\n          return options.colors.players[d.winner];\n        });\n\n      const results = game.selectAll('.result' + options.id).data(data);\n\n      results.exit().remove();\n\n      results\n        .enter()\n        .append('circle')\n        .attr('stroke', 'black')\n        .attr('id', function (d: any, i: number) {\n          return options.id + 'Rs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .attr('class', 'result' + options.id)\n        .attr('opacity', 1)\n        .attr('stroke-width', lineWidth)\n        .attr('cx', zX)\n        .attr('cy', zY)\n        .attr('r', circleRadius)\n        .style('fill', function (d: any) {\n          return options.colors.results[d.result];\n        })\n        .merge(results)\n        .attr('id', function (d: any, i: number) {\n          return options.id + 'Rs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .attr('class', 'result' + options.id)\n        .transition()\n        .duration(options.display.transition_time)\n        .attr('stroke-width', lineWidth)\n        .attr('cx', zX)\n        .attr('cy', zY)\n        .attr('r', circleRadius)\n        .style('fill', function (d: any) {\n          return options.colors.results[d.result];\n        });\n\n      // offset Scale\n      const oScale = d3\n        .scaleLinear()\n        .range([0, fish_offset * rw])\n        .domain([0, max_rally]);\n\n      // lengthScale\n      const lScale = d3\n        .scaleBand()\n        .domain(d3.range(data.length))\n        .range([0, data.length * radius])\n        .round(true);\n\n      if (options.display.rally) {\n        const rally_bars = bars.selectAll('.rally_bar' + options.id).data(data);\n\n        rally_bars.exit().remove();\n\n        rally_bars\n          .enter()\n          .append('rect')\n          .attr('opacity', 0)\n          .attr('transform', rallyTstart)\n          .attr('height', vert ? lScale.bandwidth() : 0)\n          .attr('width', vert ? 0 : lScale.bandwidth())\n          .merge(rally_bars)\n          .attr('class', 'rally_bar' + options.id)\n          .on('mouseover', (_: any, i: number, n: any) => {\n            d3.select(n[i]).attr('fill', 'yellow');\n          })\n          .on('mouseout', (_: any, i: number, n: any) => {\n            d3.select(n[i]).attr('fill', '#eeeeff');\n          })\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('id', function (d: any, i: number) {\n            return options.id + 'Bs' + d.set + 'g' + d.game + 'p' + i;\n          })\n          .attr('opacity', 1)\n          .attr('stroke', 'white')\n          .attr('stroke-width', lineWidth)\n          .attr('fill', '#eeeeff')\n          .attr('transform', rallyT)\n          .attr('height', vert ? lScale.bandwidth() : rallyCalc)\n          .attr('width', vert ? rallyCalc : lScale.bandwidth());\n      } else {\n        bars.selectAll('.rally_bar' + options.id).remove();\n      }\n\n      if (options.display.score) {\n        const score = options.score.slice();\n        if (options.display.reverse) score.reverse();\n        const set_score = bars.selectAll('.set_score' + options.id).data(score);\n\n        set_score.exit().remove();\n\n        set_score\n          .enter()\n          .append('text')\n          .attr('class', 'set_score' + options.id)\n          .attr('transform', sscoreT)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d;\n          })\n          .merge(set_score)\n          .attr('class', 'set_score' + options.id)\n          .attr('transform', sscoreT)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d;\n          });\n\n        const ssb = bars.selectAll('.ssb' + options.id).data(options.score);\n\n        ssb.exit().remove();\n\n        ssb\n          .enter()\n          .append('rect')\n          .merge(ssb)\n          .attr('class', 'ssb' + options.id)\n          .attr('transform', ssbT)\n          .attr('stroke', 'black')\n          .attr('stroke-width', lineWidth)\n          .attr('fill-opacity', 0)\n          .attr('height', radius + 'px')\n          .attr('width', radius + 'px');\n      } else {\n        bars.selectAll('.set_score' + options.id).remove();\n        bars.selectAll('.ssb' + options.id).remove();\n      }\n\n      if (options.display.service) {\n        const serves: any = [];\n        data.forEach(function (s: any, i: number) {\n          let first_serve = false;\n          const serve_outcomes = ['Ace', 'Serve Winner', 'Double Fault'];\n          if (s.first_serve) {\n            first_serve = true;\n            serves.push({ point: i, serve: 'first', server: s.server, result: s.first_serve.error });\n          }\n\n          serves.push({\n            point: i,\n            serve: first_serve ? 'second' : 'first',\n            server: s.server,\n            result: serve_outcomes.indexOf(s.result) >= 0 ? s.result : 'In'\n          });\n        });\n\n        const service = bars.selectAll('.serve' + options.id).data(serves);\n\n        service.exit().remove();\n\n        service\n          .enter()\n          .append('circle')\n          .attr('class', 'serve' + options.id)\n          .attr('cx', sX)\n          .attr('cy', sY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorShot)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorShot)\n          .merge(service)\n          .attr('class', 'serve' + options.id)\n          .attr('cx', sX)\n          .attr('cy', sY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorShot)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorShot);\n\n        const service_box = bars.selectAll('.sbox' + options.id).data(data);\n\n        service_box.exit().remove();\n\n        service_box\n          .enter()\n          .append('rect')\n          .attr('stroke', '#ccccdd')\n          .attr('fill-opacity', 0)\n          .attr('transform', sBoxT)\n          .attr('class', 'sbox' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('height', vert ? lScale.bandwidth() : 1.5 * radius)\n          .attr('width', vert ? 1.5 * radius : lScale.bandwidth())\n          .merge(service_box)\n          .attr('transform', sBoxT)\n          .attr('class', 'sbox' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('height', vert ? lScale.bandwidth() : 1.5 * radius)\n          .attr('width', vert ? 1.5 * radius : lScale.bandwidth());\n\n        const returns = bars.selectAll('.return' + options.id).data(data);\n\n        returns.exit().remove();\n\n        returns\n          .enter()\n          .append('circle')\n          .attr('class', 'return' + options.id)\n          .attr('cx', rX)\n          .attr('cy', rY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorReturn)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorReturn)\n          .merge(returns)\n          .attr('class', 'return' + options.id)\n          .attr('cx', rX)\n          .attr('cy', rY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorReturn)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorReturn);\n      } else {\n        bars.selectAll('.sbox' + options.id).remove();\n        bars.selectAll('.return' + options.id).remove();\n        bars.selectAll('.serve' + options.id).remove();\n      }\n\n      if (options.display.rightImg) {\n        images.right = fishFrame.selectAll('image.rightImage').data([0]);\n\n        images.right.exit().remove();\n\n        images.right\n          .enter()\n          .append('image')\n          .attr('class', 'rightImage')\n          .attr('xlink:href', options.display.rightImg)\n          .attr('x', options.width - 30)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          })\n          .merge(images.right)\n          .attr('x', options.width - 30)\n          .attr('xlink:href', options.display.rightImg)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          });\n      } else {\n        if (fishFrame) fishFrame.selectAll('image.rightImage').remove();\n      }\n\n      if (options.display.leftImg) {\n        images.left = fishFrame.selectAll('image.leftImage').data([0]);\n\n        images.left\n          .enter()\n          .append('image')\n          .attr('class', 'leftImage')\n          .attr('xlink:href', options.display.leftImg)\n          .attr('x', 10)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click();\n          })\n          .merge(images.left)\n          .attr('xlink:href', options.display.leftImg)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click(options.id);\n          });\n\n        images.left.exit().remove();\n      } else {\n        if (fishFrame) fishFrame.selectAll('image.leftImage').remove();\n      }\n\n      // ancillary functions for update()\n      function circleRadius() {\n        return options.display.player || options.display.service ? radius / 4 : radius / 2;\n      }\n      function lineWidth() {\n        return radius > 20 ? 1 : 0.5;\n      }\n      function colorShot(d: any) {\n        return options.colors.results[d.result];\n      }\n      function colorReturn(d: any) {\n        if (d.rally == undefined) return 'white';\n        if (d.rally.length > 1) return 'yellow';\n        if (d.rally.length == 1) return options.colors.results[d.result];\n        return 'white';\n      }\n\n      function rallyCalc(d: any) {\n        return d.rally ? oScale(d.rally.length) : 0;\n      }\n\n      function sscoreT(_: any, i: number) {\n        let o = i ? midpoint + radius * 0.5 : midpoint - radius * 0.5;\n        o = vert ? o : o + radius * 0.3;\n        const l = radius * (vert ? 0.8 : 0.5);\n        return translate(o, l, 0);\n      }\n\n      function ssbT(_: any, i: number) {\n        const o = i ? midpoint : midpoint - radius;\n        const l = 0;\n        return translate(o, l, 0);\n      }\n\n      function gscoreT(d: any) {\n        const o = +midpoint + d.o;\n        const l = radius + d.l;\n        return translate(o, l, d.rotate);\n      }\n\n      function gridCT(d: any) {\n        const o = midpoint + (d[1] - d[0] + vert - 1) * radius;\n        const l = (d[0] + d[1] + 3 - vert) * radius;\n        return translate(o, l, 45);\n      }\n\n      function gameCT(d: any, i: number) {\n        const o = midpoint + (findOffset(d) + vert - 1) * radius;\n        const l = (i + 4 - vert) * radius;\n        last_coords = [o - midpoint, l - diag, diag];\n        return translate(o, l, 45);\n      }\n\n      function sBoxT(d: any, i: number) {\n        const o = d.server == 0 ? midpoint - (fish_offset / 2) * sw : midpoint + (fish_offset / 2) * sw - 1.5 * radius;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function rallyTstart(d: any, i: number) {\n        const o = midpoint;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function rallyT(d: any, i: number) {\n        const o = d.rally ? midpoint - oScale(d.rally.length) / 2 : 0;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function translate(o: any, l: any, rotate: any) {\n        const x = vert ? o : l;\n        const y = vert ? l : o;\n        return 'translate(' + x + ',' + y + ') rotate(' + rotate + ')';\n      }\n\n      function cL(_: any, i: number) {\n        return (i + 2.5) * radius;\n      }\n\n      function rX(d: any, i: number) {\n        return vert ? rO(d) : rL(d, i);\n      }\n      function rY(d: any, i: number) {\n        return vert ? rL(d, i) : rO(d);\n      }\n      function rL(_: any, i: number) {\n        return radius + (i + 3) * radius;\n      }\n      function rO(d: any) {\n        return d.server == 0\n          ? midpoint + (fish_offset / 2) * sw - 0.75 * radius\n          : midpoint - (fish_offset / 2) * sw + 0.75 * radius;\n      }\n\n      function sX(d: any) {\n        return vert ? sO(d) : sL(d);\n      }\n      function sY(d: any) {\n        return vert ? sL(d) : sO(d);\n      }\n      function sL(d: any) {\n        return radius + (d.point + 3) * radius;\n      }\n      function sO(d: any) {\n        const offset = (d.serve == 'first' && d.server == 0) || (d.serve == 'second' && d.server == 1) ? 0.4 : 1.1;\n        return d.server == 0\n          ? midpoint - (fish_offset / 2) * sw + offset * radius\n          : midpoint + (fish_offset / 2) * sw - offset * radius;\n      }\n\n      function zX(d: any, i: number) {\n        return vert ? zO(d) : zL(d, i);\n      }\n      function zY(d, i: number) {\n        return vert ? zL(d, i) : zO(d);\n      }\n      function zL(_, i: number) {\n        return radius + (i + 3) * radius;\n      }\n      function zO(d: any) {\n        return +midpoint + findOffset(d) * radius;\n      }\n    };\n\n    function findOffset(point: any) {\n      return point.points[options.display.reverse ? 0 : 1] - point.points[options.display.reverse ? 1 : 0];\n    }\n  }\n\n  // ACCESSORS\n\n  chart.g = function (values: any) {\n    if (!arguments.length) return chart;\n    if (typeof values != 'object' || values.constructor == Array) return;\n    if (values.bars) bars = values.bars;\n    if (values.fish) fish = values.fish;\n    if (values.game) game = values.game;\n  };\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values: any) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject: any, optionsObject: any) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions: any[]) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value: any) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.coords = function (value: any) {\n    if (!arguments.length) return last_coords;\n    coords = value;\n    return chart;\n  };\n\n  chart.data = function (value: any) {\n    if (!arguments.length) return data;\n    data = JSON.parse(JSON.stringify(value));\n    return chart;\n  };\n\n  chart.update = function (opts: any) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function' && data) update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n  };\n\n  chart.colors = function (color3s: any) {\n    if (!arguments.length) return colors;\n    if (typeof color3s !== 'object') return false;\n    const keys = Object.keys(color3s);\n    if (!keys.length) return false;\n    // remove all properties that are not colors\n    keys.forEach(function (f) {\n      if (!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color3s[f])) delete color3s[f];\n    });\n    if (Object.keys(color3s).length) {\n      colors = color3s;\n    } else {\n      colors = JSON.parse(JSON.stringify(default_colors));\n    }\n    return chart;\n  };\n\n  return chart;\n\n  // ancillary functions\n}\n","import { groupGames } from './groupGames';\nimport { gameFish } from './gameFish';\n\nimport * as d3 from 'd3';\n\nexport function momentumChart() {\n  let data: any;\n  let update: any;\n  let fish_school: any[] = [];\n  const images = { left: undefined, right: undefined };\n\n  const options: any = {\n    id: 'm1',\n    fullWidth: window.innerWidth,\n    fullHeight: window.innerHeight,\n    margins: {\n      top: 1,\n      bottom: 1, // Chrome bug can't be 0\n      left: 3,\n      right: 3 // Chrome bug can't be 0\n    },\n    fish: {\n      gridcells: ['0', '15', '30', '40', 'G'],\n      cell_size: undefined,\n      min_cell_size: 5,\n      max_cell_size: 10\n    },\n    display: {\n      continuous: false,\n      reverse: false,\n      orientation: 'vertical',\n      leftImg: false,\n      rightImg: false,\n      show_images: undefined,\n      transition_time: 0,\n      sizeToFit: true,\n      service: true,\n      player: true,\n      rally: true,\n      score: false,\n      momentum_score: true,\n      grid: true\n    },\n    colors: {\n      players: { 0: 'red', 1: 'black' },\n      results: {\n        Out: 'red',\n        Net: 'coral',\n        'Unforced Error': 'red',\n        Forced: 'orange',\n        Ace: 'lightgreen',\n        'Serve Winner': 'lightgreen',\n        Winner: 'lightgreen',\n        'Forced Volley Error': 'orange',\n        'Forced Error': 'orange',\n        In: 'yellow',\n        'Passing Shot': 'lightgreen',\n        'Out Passing Shot': 'red',\n        'Net Cord': 'yellow',\n        'Out Wide': 'red',\n        'Out Long': 'red',\n        'Double Fault': 'red',\n        Unknown: 'blue',\n        Error: 'red'\n      }\n    }\n  };\n\n  function width() {\n    return options.fullWidth - options.margins.left - options.margins.right;\n  }\n  function height() {\n    return options.fullHeight - options.margins.top - options.margins.bottom;\n  }\n\n  options.height = height();\n  options.width = width();\n\n  const default_colors = { default: '#235dba' };\n  let colors = JSON.parse(JSON.stringify(default_colors));\n\n  const events: any = {\n    score: { click: null },\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection: any) {\n    selection.each(function (_, i: number, n: any) {\n      const dom_parent = d3.select(n[i]);\n\n      const root = dom_parent.append('div').attr('class', 'momentumRoot').attr('transform', 'translate(0, 0)');\n\n      const momentumFrame = root.append('svg').attr('class', 'momentumFrame');\n\n      momentumFrame.node().setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', 'http://www.w3.org/2000/svg');\n      momentumFrame\n        .node()\n        .setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n      const bars = momentumFrame.append('g').attr('id', 'momentumBars');\n      const fish = momentumFrame.append('g').attr('id', 'momentumFish');\n      const game = momentumFrame.append('g').attr('id', 'momentumGame');\n\n      update = function (opts: any) {\n        if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n          const dims = selection.node().getBoundingClientRect();\n          if (options.display.orientation == 'vertical') {\n            options.fullWidth = Math.max(dims.width, 100);\n            options.fullHeight = Math.max(dims.height, 100);\n          } else {\n            options.fullHeight = Math.max(dims.height, 100);\n            /**\n            options.fullWidth = Math.max(dims.width, 100);\n            options.fullHeight = cellSize() * maxDiff() * 2;\n            */\n          }\n        }\n\n        options.height = height();\n        options.width = width();\n\n        const vert = options.display.orientation == 'vertical' ? 1 : 0;\n        const fish_offset = vert ? options.width : options.height;\n        /** const fish_length = vert ? options.height : options.width; */\n        const midpoint = fish_offset / 2;\n\n        const all_games = groupGames(data);\n        let max_rally = 0;\n        data.forEach(function (point) {\n          if (point.rally != undefined && point.rally.length > max_rally) max_rally = point.rally.length;\n        });\n\n        const cell_size = cellSize();\n\n        // remove extraneous fish instances\n        const old_fish = fish_school.slice(all_games.length);\n        old_fish.forEach(function (f) {\n          d3.selectAll('.c' + f.options().id).remove();\n        });\n        // trim school based on length of data\n        fish_school = fish_school.slice(0, all_games.length);\n\n        let radius: number;\n        const coords = [0, 0];\n        const score_lines: any[] = [];\n        all_games.forEach(function (g, i) {\n          // add fish where necessary\n          if (!fish_school[i]) {\n            fish_school.push(gameFish());\n            momentumFrame.call(fish_school[i]);\n            fish_school[i].g({\n              bars: bars.append('g').attr('class', 'cGF' + i),\n              fish: fish.append('g').attr('class', 'cGF' + i),\n              game: game.append('g').attr('class', 'cGF' + i)\n            });\n            fish_school[i].options({\n              id: 'GF' + i,\n              display: { score: false, point_score: false },\n              fish: { school: true }\n            });\n          }\n          fish_school[i].width(fish_offset).height(fish_offset);\n          fish_school[i].options({\n            score: g.score,\n            fish: { cell_size: cell_size, max_rally: max_rally },\n            display: {\n              orientation: options.display.orientation,\n              service: options.display.service,\n              rally: options.display.rally,\n              player: options.display.player,\n              grid: options.display.grid\n            },\n            colors: { players: { 0: options.colors.players[0], 1: options.colors.players[1] } }\n          });\n          fish_school[i].data(g.points);\n          fish_school[i].coords(coords).update();\n          const new_coords = fish_school[i].coords();\n          coords[0] += vert ? new_coords?.[0] : new_coords?.[1] - new_coords?.[2] / 2;\n          coords[1] += vert ? new_coords?.[1] : new_coords?.[0] + new_coords?.[2] / 2;\n          score_lines.push({\n            score: g.score,\n            index: g.index,\n            l: coords[1] + new_coords?.[2] * 1.75,\n            o: coords[0] + new_coords?.[2] * 1.75,\n            set_end: g.last_game\n          });\n          if (g.last_game && !options.display.continuous) {\n            coords[vert ? 0 : 1] = 0;\n          }\n          radius = new_coords?.[2] / 2;\n        });\n\n        // This resize *must* take place after the fishshcool has been generated!\n        // ---------------------------------------------------------------------\n        root\n          .attr('width', options.width + 'px')\n          .attr('height', (vert ? 100 + coords[1] : options.height) + 'px')\n          .on('mouseover', showImages)\n          .on('mouseout', hideImages);\n\n        momentumFrame\n          .attr('width', options.width + 'px')\n          .attr('height', (vert ? 100 + coords[1] : options.height) + 'px');\n        // ---------------------------------------------------------------------\n\n        const midline = fish.selectAll('.midline' + options.id).data([0]);\n\n        midline\n          .enter()\n          .append('line')\n          .attr('class', 'midline' + options.id)\n          .attr('x1', vert ? midpoint : radius)\n          .attr('x2', vert ? midpoint : coords[0] + 5 * (radius || 0))\n          .attr('y1', vert ? radius : midpoint)\n          .attr('y2', vert ? coords[1] + 5 * radius : midpoint)\n          .attr('stroke-width', lineWidth)\n          .attr('stroke', '#ccccdd');\n\n        midline.exit().remove();\n\n        midline\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('x1', vert ? midpoint : radius)\n          .attr('x2', vert ? midpoint : coords[0] + 5 * (radius || 0))\n          .attr('y1', vert ? radius : midpoint)\n          .attr('y2', vert ? coords[1] + 5 * radius : midpoint)\n          .attr('stroke-width', lineWidth)\n          .attr('stroke', '#ccccdd');\n\n        const scoreLines = fish.selectAll('.score_line' + options.id).data(score_lines);\n\n        scoreLines\n          .enter()\n          .append('line')\n          .attr('class', 'score_line' + options.id)\n          .attr('x1', function (d) {\n            return vert ? cell_size * 2 : d.o;\n          })\n          .attr('x2', function (d) {\n            return vert ? fish_offset - cell_size * 2 : d.o;\n          })\n          .attr('y1', function (d) {\n            return vert ? d.l : cell_size * 3;\n          })\n          .attr('y2', function (d) {\n            return vert ? d.l : fish_offset - cell_size * 3;\n          })\n          .attr('stroke-width', lineWidth)\n          .attr('stroke-dasharray', function (d) {\n            return d.set_end ? '0' : '5,5';\n          })\n          .attr('stroke', function (d) {\n            return d.set_end ? '#000000' : '#ccccdd';\n          });\n\n        scoreLines.exit().remove();\n\n        scoreLines\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('x1', function (d) {\n            return vert ? cell_size * 2 : d.o;\n          })\n          .attr('x2', function (d) {\n            return vert ? fish_offset - cell_size * 2 : d.o;\n          })\n          .attr('y1', function (d) {\n            return vert ? d.l : cell_size * 3;\n          })\n          .attr('y2', function (d) {\n            return vert ? d.l : fish_offset - cell_size * 3;\n          })\n          .attr('stroke-width', lineWidth)\n          .attr('stroke-dasharray', function (d) {\n            return d.set_end ? '0' : '5,5';\n          })\n          .attr('stroke', function (d) {\n            return d.set_end ? '#000000' : '#ccccdd';\n          });\n\n        if (options.display.momentum_score) {\n          const score_text = fish.selectAll('.score_text' + options.id).data(score_lines);\n\n          score_text.exit().remove();\n\n          score_text\n            .enter()\n            .append('g')\n            .attr('class', 'score_text' + options.id)\n            .attr('transform', scoreText)\n            .on('click', function (d) {\n              if (events.score.click) events.score.click(d);\n            })\n            .merge(score_text)\n            .attr('class', 'score_text' + options.id)\n            .attr('transform', scoreText)\n            .on('click', function (d) {\n              if (events.score.click) events.score.click(d);\n            });\n\n          const scores = score_text.selectAll('.score' + options.id).data(function (d) {\n            return d.score;\n          });\n\n          scores.exit().remove();\n\n          scores\n            .enter()\n            .append('text')\n            .attr('class', 'score' + options.id)\n            .attr('transform', scoreT)\n            .attr('font-size', radius * 4.0 + 'px')\n            .attr('opacity', 0.1)\n            .attr('text-anchor', 'middle')\n            .text(function (d) {\n              return d;\n            })\n            .merge(scores)\n            .attr('class', 'score' + options.id)\n            .transition()\n            .duration(options.display.transition_time)\n            .attr('transform', scoreT)\n            .attr('font-size', radius * 4.0 + 'px')\n            .attr('opacity', 0.1)\n            .attr('text-anchor', 'middle')\n            .text(function (d) {\n              return d;\n            });\n        } else {\n          fish.selectAll('.score_text' + options.id).remove();\n        }\n\n        function scoreText(d: any) {\n          return translate(0, vert ? d.l : d.o - radius, 0);\n        }\n        function scoreT(_, i: number) {\n          const offset = vert ? fish_offset / 3 : options.height / 3;\n          const o = i ? midpoint + offset : midpoint - offset + radius * 3;\n          const l = -1 * radius * (vert ? 0.25 : 0.5);\n          return translate(o, l, 0);\n        }\n\n        function translate(o, l, rotate) {\n          const x = vert ? o : l;\n          const y = vert ? l : o;\n          return 'translate(' + x + ',' + y + ') rotate(' + rotate + ')';\n        }\n\n        function lineWidth() {\n          return radius > 20 ? 2 : 1;\n        }\n\n        function cellSize() {\n          let cell_size;\n\n          if (options.display.orientation == 'vertical') {\n            // if the display is vertical use the width divided by maxDiff\n            cell_size = options.width / 2 / (maxDiff() + 1);\n          } else {\n            // if the display is horizontal use the width divided by # points\n            // var radius = options.width / (data.points().length + 4);\n            const radius = options.width / (data.length + 4);\n            cell_size = Math.sqrt(2 * radius * radius);\n          }\n          return Math.min(options.fish.max_cell_size, cell_size);\n        }\n\n        function maxDiff() {\n          let max_diff = 0;\n          const cumulative = [0, 0];\n\n          data.forEach(function (episode) {\n            cumulative[episode.point.winner] += 1;\n            const diff = Math.abs(cumulative[0] - cumulative[1]);\n            if (diff > max_diff) max_diff = diff;\n          });\n\n          return max_diff;\n        }\n\n        if (options.display.rightImg) {\n          images.right = momentumFrame.selectAll('image.rightImage').data([0]);\n\n          images.right.exit().remove();\n\n          images.right\n            .enter()\n            .append('image')\n            .attr('class', 'rightImage')\n            .attr('xlink:href', options.display.rightImg)\n            .attr('x', options.width - 20)\n            .attr('y', 5)\n            .attr('height', '20px')\n            .attr('width', '20px')\n            .attr('opacity', options.display.show_images ? 1 : 0)\n            .on('click', function () {\n              if (events.rightImage.click) events.rightImage.click(options.id);\n            })\n            .merge(images.right)\n            .attr('x', options.width - 20)\n            .attr('xlink:href', options.display.rightImg)\n            .on('click', function () {\n              if (events.rightImage.click) events.rightImage.click(options.id);\n            });\n        } else {\n          momentumFrame.selectAll('image.rightImage').remove();\n        }\n\n        if (options.display.leftImg) {\n          images.left = momentumFrame.selectAll('image.leftImage').data([0]);\n\n          images.left\n            .enter()\n            .append('image')\n            .attr('class', 'leftImage')\n            .attr('xlink:href', options.display.leftImg)\n            .attr('x', 10)\n            .attr('y', 5)\n            .attr('height', '20px')\n            .attr('width', '20px')\n            .attr('opacity', options.display.show_images ? 1 : 0)\n            .on('click', function () {\n              if (events.leftImage.click) events.leftImage.click();\n            })\n            .merge(images.left)\n            .attr('xlink:href', options.display.leftImg)\n            .on('click', function () {\n              if (events.leftImage.click) events.leftImage.click(options.id);\n            });\n\n          images.left.exit().remove();\n        } else {\n          momentumFrame.selectAll('image.leftImage').remove();\n        }\n\n        function showImages() {\n          if (options.display.show_images == false) return;\n          if (options.display.leftImg) images.left.attr('opacity', 1);\n          if (options.display.rightImg) images.right.attr('opacity', 1);\n        }\n\n        function hideImages() {\n          if (options.display.show_images) return;\n          if (options.display.leftImg) images.left.attr('opacity', 0);\n          if (options.display.rightImg) images.right.attr('opacity', 0);\n        }\n      };\n    });\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject, optionsObject) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.width = function (value) {\n    if (!arguments.length) return options.fullWidth;\n    options.fullWidth = value;\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.fullHeight;\n    options.fullHeight = value;\n    return chart;\n  };\n\n  chart.data = function (value) {\n    if (!arguments.length) return data;\n    data = value;\n    return chart;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function' && data) update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n  };\n\n  chart.colors = function (color3s) {\n    if (!arguments.length) return colors;\n    if (typeof color3s !== 'object') return false;\n    const keys = Object.keys(color3s);\n    if (!keys.length) return false;\n    // remove all properties that are not colors\n    keys.forEach(function (f) {\n      if (!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color3s[f])) delete color3s[f];\n    });\n    if (Object.keys(color3s).length) {\n      colors = color3s;\n    } else {\n      colors = JSON.parse(JSON.stringify(default_colors));\n    }\n    return chart;\n  };\n\n  return chart;\n}\n","import * as d3 from 'd3';\n\nexport function gameTree() {\n  // TODO\n  // change the gradient direction in lines across width\n  // which means changing line so that it is short and wide\n  // rather than long and thick\n  //\n  // bar chart showing win % for each player or primary/opponents\n  // for each point position\n\n  function applyMax(arr: any) {\n    return Math.max.apply(null, arr);\n  }\n  function applyMin(arr: any) {\n    return Math.min.apply(null, arr);\n  }\n  const images = { left: undefined, right: undefined };\n\n  // All options that should be accessible to caller\n  let data: any[] = [];\n  const options: any = {\n    width: 150,\n    height: 150,\n    min_max: 20, // scaling factor for line widths\n\n    // Margins for the SVG\n    margins: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n\n    display: {\n      noAd: false,\n      leftImg: false,\n      rightImg: false,\n      show_images: false,\n      sizeToFit: true,\n      showEmpty: false // display even if no data\n    },\n\n    lines: {\n      easing: false, // 'bounce'\n      duration: 600,\n      points: { winners: '#2ed2db', errors: '#2ed2db', unknown: '#2ed2db' },\n      colors: { underlines: '#2ed2db' }\n    },\n\n    nodes: {\n      colors: { 0: 'black', 1: 'red', neutral: '#ecf0f1' }\n    },\n\n    points: {\n      winners: [\n        'Winner',\n        'Ace',\n        'Serve Winner',\n        'Passing Shot',\n        'Return Winner',\n        'Forcing Error',\n        'Forcing Volley Error',\n        'Net Cord',\n        'In'\n      ],\n      errors: [\n        'Unforced Error',\n        'Unforced',\n        'Forced Error',\n        'Error',\n        'Out',\n        'Net',\n        'Netted Passing Shot',\n        'L',\n        'Overhead Passing Shot',\n        'Double Fault'\n      ],\n      highlight: [] // opposite of filter; filter unhighlighted...\n    },\n\n    selectors: {\n      enabled: true,\n      selected: { 0: false, 1: false }\n    },\n\n    labels: { Game: 'GAME', Player: 'Player', Opponent: 'Opponent' }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update: any;\n\n  // PROGRAMMATIC\n  // ------------\n  let canvas: any;\n  let radius: any;\n  const transition_time: number = 0;\n  const point_connector: string = 'x';\n  let counters: any = { w: {}, e: {}, p: {}, n: {} };\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events: any = {\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mousemove: null, mouseout: null },\n    node: { mousemove: null, mouseout: null },\n    score: { mousemove: null, mouseout: null },\n    label: { mousemove: null, mouseout: null, click: selectView },\n    selector: { mousemove: null, mouseout: null, click: selectView }\n  };\n\n  function chart(selection: any) {\n    const root = selection.append('div').attr('class', 'gametreeRoot');\n\n    /*\n    const tree_width = options.width - (options.margins.left + options.margins.right);\n    const tree_height = options.width * 0.9;\n    */\n    canvas = root.append('svg');\n\n    update = function (opts: any) {\n      if (!data.length && !options.display.showEmpty) {\n        canvas.selectAll('*').remove();\n        return;\n      }\n\n      counterCalcs();\n\n      if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.min(dims.width, dims.height);\n      }\n\n      const tree_width = options.width - (options.margins.left + options.margins.right);\n      const tree_height = options.width * 0.9;\n      radius = ((tree_height + tree_width) / 2) * 0.03;\n\n      const keys = point_lines.map(function (m) {\n        return m.id;\n      });\n\n      const point_min = applyMin(\n        keys.map(function (k) {\n          return isNaN(counters.p[k]) ? 0 : counters.p[k];\n        })\n      );\n      const point_max = applyMax([\n        applyMax(\n          keys.map(function (k) {\n            return isNaN(counters.p[k]) ? 0 : counters.p[k];\n          })\n        ),\n        options.min_max\n      ]);\n\n      const scale = d3\n        .scaleLinear()\n        .domain([point_min, point_max])\n        .range([0, radius * 2]);\n      canvas.transition().duration(transition_time).attr('width', tree_width).attr('height', tree_height);\n\n      const gradients = canvas.selectAll('.gradient').data(point_lines, get_id);\n\n      gradients.exit().remove();\n\n      gradients\n        .enter()\n        .append('linearGradient')\n        .attr('id', function (d) {\n          return 'gradient' + d.id;\n        })\n        .attr('class', 'gradient')\n        .attr('gradientUnits', 'userSpaceOnUse')\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .merge(gradients)\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        });\n\n      const point_stops = gradients.selectAll('.points_stop').data((d) => {\n        return calcStops(d);\n      });\n\n      point_stops.exit().remove();\n\n      point_stops\n        .enter()\n        .append('stop')\n        .attr('class', 'points_stop')\n        .attr('offset', function (d) {\n          return d.offset;\n        })\n        .attr('stop-color', function (d) {\n          return d.color;\n        })\n        .merge(point_stops)\n        .attr('offset', function (d) {\n          return d.offset;\n        });\n\n      const lines = canvas.selectAll('.line').data(point_lines);\n\n      lines.exit().remove();\n\n      lines\n        .enter()\n        .append('line')\n        .attr('class', 'line')\n        .attr('id', function (d) {\n          return d.id;\n        })\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return d.width ? d.width : 0;\n        })\n        .attr('stroke', function (d) {\n          return 'url(#gradient' + d.id + ')';\n        })\n        .on('mousemove', function (d, i) {\n          if (events.point.mousemove) events.point.mousemove(d, i);\n        })\n        .on('mouseout', function (d, i) {\n          if (events.point.mouseout) events.point.mouseout(d, i);\n        })\n        .on('click', function (d, i) {\n          if (events.point.click) events.point.click(d, i);\n        })\n        .merge(lines)\n        .transition()\n        .duration(options.lines.easing || (opts && opts.easing) ? options.lines.duration : 0)\n        //                     .ease(options.lines.easing || (opts && opts.easing) || 'none')\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return counters.p[d.id] ? scale(counters.p[d.id]) : 0;\n        });\n\n      const ulines = canvas.selectAll('.uline').data(under_lines);\n\n      ulines.exit().remove();\n\n      ulines\n        .enter()\n        .append('line')\n        .attr('class', 'uline')\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('x1', function (d: any) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d: any) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d: any) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d: any) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d: any) {\n          return d.width ? d.width : 0;\n        })\n        .attr('stroke', function () {\n          return options.lines.colors.underlines;\n        })\n        .merge(ulines)\n        .transition()\n        .duration(transition_time)\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('x1', function (d: any) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d: any) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d: any) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d: any) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return d.width ? d.width : 0;\n        });\n\n      const nodes = canvas.selectAll('.node').data(point_circles);\n\n      nodes.exit().remove();\n\n      nodes\n        .enter()\n        .append('circle')\n        .attr('class', 'node')\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height;\n        })\n        .attr('r', function () {\n          return radius;\n        })\n        .attr('stroke', function (d: any) {\n          return d.color_pct != undefined\n            ? colorShade(getHexColor(options.nodes.colors[d.player]), d.color_pct)\n            : options.nodes.colors.neutral;\n        })\n        .attr('fill', function (d: any) {\n          return d.color_pct != undefined\n            ? colorShade(getHexColor(options.nodes.colors[d.player]), d.color_pct)\n            : options.nodes.colors.neutral;\n        })\n        .on('mousemove', function (d: any, i: number) {\n          if (events.score.mousemove) events.score.mousemove(d, i);\n        })\n        .on('mouseout', function (d: any, i: number) {\n          if (events.node.mouseout) events.node.mouseout(d, i);\n        })\n        .on('click', function (d: any, i: number) {\n          if (events.node.click) events.node.click(d, i);\n        })\n        .merge(nodes)\n        .transition()\n        .duration(transition_time)\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height;\n        })\n        .attr('r', function () {\n          return radius;\n        });\n\n      const scores = canvas.selectAll('.score').data(point_text);\n\n      scores.exit().remove();\n\n      scores\n        .enter()\n        .append('text')\n        .attr('class', 'score')\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .attr('font-family', 'Lato, Arial, sans-serif')\n        .attr('text-anchor', 'middle')\n        .attr('alignment-baseline', 'central')\n        .attr('stroke', function (d) {\n          return d.stroke;\n        })\n        .attr('fill', function (d) {\n          return d.fill;\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 7) return d.text;\n        })\n        .on('mousemove', function (d, i) {\n          if (events.score.mousemove) events.score.mousemove(d, i);\n        })\n        .on('mouseout', function (d, i) {\n          if (events.score.mouseout) events.score.mouseout(d, i);\n        })\n        .on('click', function (d, i) {\n          if (events.score.click) events.score.click(d, i);\n        })\n        .merge(scores)\n        .transition()\n        .duration(transition_time)\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return d.text;\n        });\n\n      const labels = canvas.selectAll('.gt_label').data(label_text);\n\n      labels.exit().remove();\n\n      labels\n        .enter()\n        .append('text')\n        .attr('class', 'gt_label')\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('alignment-baseline', function (d) {\n          return d.baseline ? d.baseline : undefined;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .attr('text-anchor', function (d) {\n          return d.anchor ? d.anchor : undefined;\n        })\n        .attr('font-family', 'Lato, Arial, sans-serif')\n        .attr('stroke', function (d) {\n          return d.stroke;\n        })\n        .attr('fill', function (d) {\n          return d.fill;\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return d.id;\n        })\n        .attr('selector', function (d) {\n          return d.id;\n        })\n        .on('click', function (d: any, i: number, n: any) {\n          if (events.label.click) events.label.click(d, i, n[i]);\n        })\n        .merge(labels)\n        .transition()\n        .duration(transition_time)\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return options.labels[d.id];\n        });\n\n      const select = canvas.selectAll('.selector').data(selectors);\n\n      select.exit();\n\n      select\n        .enter()\n        .append('circle')\n        .attr('class', 'selector')\n        .attr('status', function (d: any) {\n          return d.status;\n        })\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('selector', function (d: any) {\n          return d.id;\n        })\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height + 4;\n        })\n        .attr('r', function (d: any) {\n          return radius * d.r_pct;\n        })\n        .attr('stroke', function (_, i: number) {\n          return options.nodes.colors[i];\n        })\n        .attr('stroke-width', function () {\n          return radius * 0.25;\n        })\n        .attr('fill', function (_, i: number) {\n          return !options.selectors.enabled || (options.selectors.enabled && options.selectors.selected[i])\n            ? options.nodes.colors[i]\n            : options.nodes.colors.neutral;\n        })\n        .attr('opacity', function (d: any) {\n          return d.opacity;\n        })\n        .on('mousemove', function (d: any, i: number) {\n          if (events.selector.mousemove) events.selector.mousemove(d, i);\n        })\n        .on('mouseout', function (d: any, i: number) {\n          if (events.selector.mouseout) events.selector.mouseout(d, i);\n        })\n        .on('click', function (d: any, i: number, n: any) {\n          if (events.selector.click) events.selector.click(d, i, n[i]);\n        })\n        .merge(select)\n        .transition()\n        .duration(transition_time)\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height + 4;\n        })\n        .attr('r', function (d: any) {\n          return radius * d.r_pct;\n        })\n        .attr('stroke-width', function () {\n          return radius * 0.25;\n        })\n        .attr('fill', function (_, i: number) {\n          return !options.selectors.enabled || (options.selectors.enabled && options.selectors.selected[i])\n            ? options.nodes.colors[i]\n            : options.nodes.colors.neutral;\n        });\n\n      if (options.display.rightImg) {\n        images.right = canvas.selectAll('image.rightImage').data([0]);\n\n        images.right.exit().remove();\n\n        images.right\n          .enter()\n          .append('image')\n          .attr('class', 'rightImage')\n          .attr('xlink:href', options.display.rightImg)\n          .attr('x', options.width - (options.margins.right + 30))\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          })\n          .merge(images.right)\n          .attr('x', options.width - (options.margins.right + 30))\n          .attr('xlink:href', options.display.rightImg)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          });\n      } else {\n        root.selectAll('image.rightImage').remove();\n      }\n\n      if (options.display.leftImg) {\n        images.left = canvas.selectAll('image.leftImage').data([0]);\n\n        images.left\n          .enter()\n          .append('image')\n          .attr('class', 'leftImage')\n          .attr('xlink:href', options.display.leftImg)\n          .attr('x', 10 + options.margins.left)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click();\n          })\n          .merge(images.left)\n          .attr('x', 10 + options.margins.left)\n          .attr('xlink:href', options.display.leftImg)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click(options.id);\n          });\n\n        images.left.exit().remove();\n      } else {\n        root.selectAll('image.leftImage').remove();\n      }\n\n      /*\n      function showImages() {\n        if (options.display.show_images == false) return;\n        if (options.display.leftImg) images.left.attr('opacity', 1);\n        if (options.display.rightImg) images.right.attr('opacity', 1);\n      }\n\n      function hideImages() {\n        if (options.display.show_images) return;\n        if (options.display.leftImg) images.left.attr('opacity', 0);\n        if (options.display.rightImg) images.right.attr('opacity', 0);\n      }\n      */\n    };\n  }\n\n  // ACCESSORS\n\n  chart.exports = function () {\n    return { selectView: selectView };\n  };\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject, optionsObject) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.reset = function () {\n    data = [];\n    clearView();\n    counters = { w: {}, e: {}, p: {}, n: {} };\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value: any) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.data = function (values: any) {\n    if (!arguments.length) return data;\n    if (values.constructor === Array) {\n      chart.reset();\n      data = values;\n    }\n    return chart;\n  };\n\n  chart.counters = function () {\n    counterCalcs();\n    return counters;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, transition_time);\n  };\n\n  // REUSABLE FUNCTIONS\n  // ------------------\n\n  function counterCalcs() {\n    let _data;\n    // w = winners, e = errors, p = points, n = nodes\n    counters = { w: {}, e: {}, p: {}, n: {} };\n    if (options.selectors.selected[0] || options.selectors.selected[1]) {\n      const selected = options.selectors.selected[0] ? 0 : 1;\n      _data = data.filter(function (f) {\n        return f.point.server == selected;\n      });\n    } else {\n      _data = data;\n    }\n    _data = _data.filter(function (f) {\n      return !f.point.tiebreak;\n    });\n    for (let d = 0; d < _data.length; d++) {\n      const previous_episode = _data[d - 1];\n      const previous =\n        d == 0 || previous_episode.game.complete ? calcPosition([0, 0]) : calcPosition(previous_episode.point.points);\n      const progression = 'L' + previous + point_connector + calcPosition(_data[d].point.points);\n      if (options.points.highlight.length && options.points.highlight.indexOf(d) < 0) {\n        continue;\n      }\n      counters.p[progression] = counters.p[progression] ? counters.p[progression] + 1 : 1;\n\n      if (options.points.winners.indexOf(_data[d].point.result) >= 0) {\n        counters.w[progression] = counters.w[progression] ? counters.w[progression] + 1 : 1;\n      } else if (options.points.errors.indexOf(_data[d].point.result) >= 0) {\n        counters.e[progression] = counters.e[progression] ? counters.e[progression] + 1 : 1;\n      }\n    }\n\n    // make adjustment for multiple dueces\n    function calcPosition(points) {\n      const point_min = Math.min(...points);\n      const diff = point_min >= 4 ? point_min - 3 : 0;\n      const pos = points.map((point, index) =>\n        options.display.noAd && point == 4 && points[1 - index] == 3 ? 'G' : point - diff\n      );\n      return pos.join('-');\n    }\n  }\n\n  function get_id(d) {\n    return d && d.id;\n  }\n\n  /*\n  function isEven(n) {\n    return n == parseFloat(n) ? !(n % 2) : void 0;\n  }\n  */\n\n  function clearView() {\n    d3.select('[id=Player]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n    d3.select('[id=Opponent]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n    options.selectors.selected[1] = false;\n    options.selectors.selected[0] = false;\n  }\n\n  function selectView(_, i: number, self: any) {\n    if (!options.selectors.enabled) return;\n    const selector = d3.select(self).attr('selector');\n    if (d3.select('[id=' + selector + ']').attr('status') == 'none') {\n      if (d3.select(self).attr('selector') == 'Opponent') {\n        d3.select('[id=Player]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n        d3.select('[id=Opponent]').attr('opacity', 1).attr('status', 'selected').attr('fill', options.nodes.colors[i]);\n        options.selectors.selected[1] = true;\n        options.selectors.selected[0] = false;\n      } else {\n        d3.select('[id=Opponent]')\n          .attr('opacity', 0.4)\n          .attr('status', 'none')\n          .attr('fill', options.nodes.colors.neutral);\n        d3.select('[id=Player]').attr('opacity', 1).attr('status', 'selected').attr('fill', options.nodes.colors[i]);\n        options.selectors.selected[0] = true;\n        options.selectors.selected[1] = false;\n      }\n    } else {\n      d3.select('[id=' + selector + ']')\n        .attr('opacity', 0.4)\n        .attr('status', 'none')\n        .attr('fill', options.nodes.colors.neutral);\n      if (d3.select(self).attr('selector') == 'Opponent') {\n        options.selectors.selected[1] = false;\n      } else {\n        options.selectors.selected[0] = false;\n      }\n    }\n    update();\n  }\n\n  function calcStops(d: any) {\n    if (!counters.p[d.id]) return [];\n    const total_points = counters.p[d.id] == undefined ? 1 : counters.p[d.id];\n    const winners = counters.w[d.id] ? counters.w[d.id] : 0;\n    const errors = counters.e[d.id] ? counters.e[d.id] : 0;\n    const winner_pct = (winners / total_points) * 100;\n    // const error_pct = (errors / total_points) * 100;\n    const u_pct = ((total_points - (winners + errors)) / total_points) * 100;\n    return [\n      { offset: '0%', color: options.lines.points.unknown },\n      { offset: u_pct + '%', color: options.lines.points.unknown },\n      { offset: u_pct + '%', color: options.lines.points.winners },\n      { offset: u_pct + winner_pct + '%', color: options.lines.points.winners },\n      { offset: u_pct + winner_pct + '%', color: options.lines.points.errors },\n      { offset: '100%', color: options.lines.points.errors }\n    ];\n  }\n\n  // DATA\n  // --------------\n\n  const c_start = 0.07;\n  const c_dist = 0.14;\n\n  const r_start = 0.05;\n  const r_dist = 0.21;\n\n  const f = {\n    col1: c_start,\n    col2: c_start + c_dist,\n    col3: c_start + 2 * c_dist,\n    col4: c_start + 3 * c_dist,\n    col5: c_start + 4 * c_dist,\n    col6: c_start + 5 * c_dist,\n    col7: c_start + 6 * c_dist,\n\n    row1: r_start,\n    row2: r_start + r_dist,\n    row3: r_start + 2 * r_dist,\n    row4: r_start + 3 * r_dist,\n    row5: r_start + 4 * r_dist,\n    foot: r_start + 4.1 * r_dist,\n\n    adr1: r_start + 3.5 * r_dist,\n    adc1: c_start + c_dist * 2.5,\n    adc2: c_start + c_dist * 3.5,\n\n    selc: c_start * 0.8,\n    tslc: c_start,\n    sl1r: r_start / 2,\n    sl2r: r_start * 1.5,\n    plr1: c_start * 0.8,\n    plr2: c_start + 4 * c_dist,\n    plrs: r_start + 4.25 * r_dist\n  };\n\n  const pos = {\n    'p0-0': { x: f.col4, y: f.row1 },\n    'p1-1': { x: f.col4, y: f.row2 },\n    'p2-2': { x: f.col4, y: f.row3 },\n    'p3-3': { x: f.col4, y: f.row4 },\n    'p1-0': { x: f.col3, y: f.row2 },\n    'p0-1': { x: f.col5, y: f.row2 },\n    'p2-1': { x: f.col3, y: f.row3 },\n    'p1-2': { x: f.col5, y: f.row3 },\n    'p2-0': { x: f.col2, y: f.row3 },\n    'p0-2': { x: f.col6, y: f.row3 },\n    'p3-2': { x: f.col3, y: f.row4 },\n    'p2-3': { x: f.col5, y: f.row4 },\n    'p3-1': { x: f.col2, y: f.row4 },\n    'p1-3': { x: f.col6, y: f.row4 },\n    'p3-0': { x: f.col1, y: f.row4 },\n    'p0-3': { x: f.col7, y: f.row4 },\n    'p3-4': { x: f.adc1, y: f.adr1 },\n    'p4-3': { x: f.adc2, y: f.adr1 },\n    'p5-3': { x: f.adc2, y: f.row5 },\n    'p3-5': { x: f.adc1, y: f.row5 },\n    'p4-1': { x: f.col2, y: f.row5 },\n    'p1-4': { x: f.col6, y: f.row5 },\n    'p4-2': { x: f.col3, y: f.row5 },\n    'p2-4': { x: f.col5, y: f.row5 },\n    'p4-0': { x: f.col1, y: f.row5 },\n    'p0-4': { x: f.col7, y: f.row5 },\n\n    // No Ad\n    'pG-3': { x: f.col4, y: f.row5 },\n    'p3-G': { x: f.col4, y: f.row5 },\n\n    sPlyr: { x: f.adc1, y: f.plrs },\n    tPlyr: { x: f.col2, y: f.plrs },\n    sOpp: { x: f.adc2, y: f.plrs },\n    tOpp: { x: f.col6, y: f.plrs },\n\n    GAME: { x: f.col4, y: f.foot },\n    L1s: { x: f.col1, y: f.foot },\n    L1e: { x: f.adc1, y: f.foot },\n    L2s: { x: f.adc2, y: f.foot },\n    L2e: { x: f.col7, y: f.foot }\n  };\n\n  const point_circles = [\n    { name: '0-0', pos: pos['p0-0'], player: 0 },\n    { name: '15-15', pos: pos['p1-1'], player: 0 },\n    { name: '30-30', pos: pos['p2-2'], player: 0 },\n    { name: '40-40', pos: pos['p3-3'], player: 0 },\n\n    { name: '0-15', pos: pos['p0-1'], color_pct: 0.4, player: 1 },\n    { name: '15-30', pos: pos['p1-2'], color_pct: 0.4, player: 1 },\n    { name: '0-30', pos: pos['p0-2'], color_pct: 0.2, player: 1 },\n    { name: '30-40', pos: pos['p2-3'], color_pct: 0.4, player: 1 },\n    { name: '15-40', pos: pos['p1-3'], color_pct: 0.2, player: 1 },\n    { name: '0-40', pos: pos['p0-3'], color_pct: 0, player: 1 },\n    { name: '40-A', pos: pos['p4-3'], color_pct: 0.5, player: 1 },\n\n    { name: '15-0', pos: pos['p1-0'], color_pct: 0.4, player: 0 },\n    { name: '30-15', pos: pos['p2-1'], color_pct: 0.4, player: 0 },\n    { name: '30-0', pos: pos['p2-0'], color_pct: 0.2, player: 0 },\n    { name: '40-30', pos: pos['p3-2'], color_pct: 0.4, player: 0 },\n    { name: '40-15', pos: pos['p3-1'], color_pct: 0.2, player: 0 },\n    { name: '40-0', pos: pos['p3-0'], color_pct: 0, player: 0 },\n    { name: 'A-40', pos: pos['p3-4'], color_pct: 0.5, player: 0 }\n  ];\n\n  const point_lines = [\n    { id: 'L0-0x0-1', start: pos['p0-0'], end: pos['p0-1'] },\n    { id: 'L0-0x1-0', start: pos['p0-0'], end: pos['p1-0'] },\n    { id: 'L0-1x0-2', start: pos['p0-1'], end: pos['p0-2'] },\n    { id: 'L0-1x1-1', start: pos['p0-1'], end: pos['p1-1'] },\n    { id: 'L1-0x2-0', start: pos['p1-0'], end: pos['p2-0'] },\n    { id: 'L1-0x1-1', start: pos['p1-0'], end: pos['p1-1'] },\n    { id: 'L1-1x1-2', start: pos['p1-1'], end: pos['p1-2'] },\n    { id: 'L1-1x2-1', start: pos['p1-1'], end: pos['p2-1'] },\n    { id: 'L2-0x2-1', start: pos['p2-0'], end: pos['p2-1'] },\n    { id: 'L2-0x3-0', start: pos['p2-0'], end: pos['p3-0'] },\n    { id: 'L2-1x2-2', start: pos['p2-1'], end: pos['p2-2'] },\n    { id: 'L2-1x3-1', start: pos['p2-1'], end: pos['p3-1'] },\n    { id: 'L2-2x2-3', start: pos['p2-2'], end: pos['p2-3'] },\n    { id: 'L2-2x3-2', start: pos['p2-2'], end: pos['p3-2'] },\n    { id: 'L0-2x0-3', start: pos['p0-2'], end: pos['p0-3'] },\n    { id: 'L0-2x1-2', start: pos['p0-2'], end: pos['p1-2'] },\n    { id: 'L0-3x0-4', start: pos['p0-3'], end: pos['p0-4'] },\n    { id: 'L0-3x1-3', start: pos['p0-3'], end: pos['p1-3'] },\n    { id: 'L1-2x2-2', start: pos['p1-2'], end: pos['p2-2'] },\n    { id: 'L1-2x1-3', start: pos['p1-2'], end: pos['p1-3'] },\n    { id: 'L1-3x2-3', start: pos['p1-3'], end: pos['p2-3'] },\n    { id: 'L1-3x1-4', start: pos['p1-3'], end: pos['p1-4'] },\n    { id: 'L2-3x3-3', start: pos['p2-3'], end: pos['p3-3'] },\n    { id: 'L2-3x2-4', start: pos['p2-3'], end: pos['p2-4'] },\n    { id: 'L3-3x3-4', start: pos['p3-3'], end: pos['p4-3'] },\n    { id: 'L3-3x4-3', start: pos['p3-3'], end: pos['p3-4'] },\n    { id: 'L3-2x3-3', start: pos['p3-2'], end: pos['p3-3'] },\n    { id: 'L3-2x4-2', start: pos['p3-2'], end: pos['p4-2'] },\n    { id: 'L3-1x3-2', start: pos['p3-1'], end: pos['p3-2'] },\n    { id: 'L3-1x4-1', start: pos['p3-1'], end: pos['p4-1'] },\n    { id: 'L3-0x3-1', start: pos['p3-0'], end: pos['p3-1'] },\n    { id: 'L3-0x4-0', start: pos['p3-0'], end: pos['p4-0'] },\n    { id: 'L3-4x3-5', start: pos['p4-3'], end: pos['p5-3'] },\n    { id: 'L4-3x5-3', start: pos['p3-4'], end: pos['p3-5'] },\n\n    // no Ad\n    { id: 'L3-3xG-3', start: pos['p3-3'], end: pos['pG-3'] },\n    { id: 'L3-3x3-G', start: pos['p3-3'], end: pos['p3-G'] }\n  ];\n\n  const under_lines = [\n    { stroke: 'blue', start: pos['L1s'], end: pos['L1e'], width: 2 },\n    { stroke: 'blue', start: pos['L2s'], end: pos['L2e'], width: 2 }\n  ];\n\n  const point_text = [\n    { pos: pos['p0-0'], fill: 'black', fontsize: 0.7, text: '0-0' },\n    { pos: pos['p1-1'], fill: 'black', fontsize: 0.7, text: '15-15' },\n    { pos: pos['p2-2'], fill: 'black', fontsize: 0.7, text: '30-30' },\n    { pos: pos['p3-3'], fill: 'black', fontsize: 0.7, text: '40-40' },\n\n    { pos: pos['p0-1'], fill: 'white', fontsize: 0.7, text: '0-15' },\n    { pos: pos['p1-2'], fill: 'white', fontsize: 0.7, text: '15-30' },\n    { pos: pos['p0-2'], fill: 'white', fontsize: 0.7, text: '0-30' },\n    { pos: pos['p2-3'], fill: 'white', fontsize: 0.7, text: '30-40' },\n    { pos: pos['p1-3'], fill: 'white', fontsize: 0.7, text: '15-40' },\n    { pos: pos['p0-3'], fill: 'white', fontsize: 0.7, text: '0-40' },\n    { pos: pos['p4-3'], fill: 'white', fontsize: 0.7, text: '40-A' },\n\n    { pos: pos['p1-0'], fill: 'white', fontsize: 0.7, text: '15-0' },\n    { pos: pos['p2-1'], fill: 'white', fontsize: 0.7, text: '30-15' },\n    { pos: pos['p2-0'], fill: 'white', fontsize: 0.7, text: '30-0' },\n    { pos: pos['p3-2'], fill: 'white', fontsize: 0.7, text: '40-30' },\n    { pos: pos['p3-1'], fill: 'white', fontsize: 0.7, text: '40-15' },\n    { pos: pos['p3-0'], fill: 'white', fontsize: 0.7, text: '40-0' },\n    { pos: pos['p3-4'], fill: 'white', fontsize: 0.7, text: 'A-40' }\n  ];\n\n  const label_text = [\n    { pos: pos['tPlyr'], fill: 'black', fontsize: 0.9, id: 'Player', anchor: 'middle', baseline: 'hanging' },\n    { pos: pos['tOpp'], fill: 'black', fontsize: 0.9, id: 'Opponent', anchor: 'middle', baseline: 'hanging' },\n    { pos: pos['GAME'], fill: '#555555', fontsize: 0.9, id: 'Game', anchor: 'middle', baseline: 'central' }\n  ];\n\n  const selectors = [\n    { id: 'Player', pos: pos['sPlyr'], r_pct: 0.4, opacity: 1, status: 'none' },\n    { id: 'Opponent', pos: pos['sOpp'], r_pct: 0.4, opacity: 0.4, status: 'none' }\n  ];\n\n  // Helper Functions\n  // ----------------\n\n  // http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\n  function shadeColor2(color, percent) {\n    const f = parseInt(color.slice(1), 16),\n      t = percent < 0 ? 0 : 255,\n      p = percent < 0 ? percent * -1 : percent,\n      R = f >> 16,\n      G = (f >> 8) & 0x00ff,\n      B = f & 0x0000ff;\n    return (\n      '#' +\n      (\n        0x1000000 +\n        (Math.round((t - R) * p) + R) * 0x10000 +\n        (Math.round((t - G) * p) + G) * 0x100 +\n        (Math.round((t - B) * p) + B)\n      )\n        .toString(16)\n        .slice(1)\n    );\n  }\n\n  /*\n  function blendColors(c0, c1, p) {\n    const f = parseInt(c0.slice(1), 16),\n      t = parseInt(c1.slice(1), 16),\n      R1 = f >> 16,\n      G1 = (f >> 8) & 0x00ff,\n      B1 = f & 0x0000ff,\n      R2 = t >> 16,\n      G2 = (t >> 8) & 0x00ff,\n      B2 = t & 0x0000ff;\n    return (\n      '#' +\n      (\n        0x1000000 +\n        (Math.round((R2 - R1) * p) + R1) * 0x10000 +\n        (Math.round((G2 - G1) * p) + G1) * 0x100 +\n        (Math.round((B2 - B1) * p) + B1)\n      )\n        .toString(16)\n        .slice(1)\n    );\n  }\n  */\n\n  function shadeRGBColor(color, percent) {\n    const f = color.split(','),\n      t = percent < 0 ? 0 : 255,\n      p = percent < 0 ? percent * -1 : percent,\n      R = parseInt(f[0].slice(4)),\n      G = parseInt(f[1]),\n      B = parseInt(f[2]);\n    return (\n      'rgb(' +\n      (Math.round((t - R) * p) + R) +\n      ',' +\n      (Math.round((t - G) * p) + G) +\n      ',' +\n      (Math.round((t - B) * p) + B) +\n      ')'\n    );\n  }\n\n  /*\n  function blendRGBColors(c0, c1, p) {\n    const f = c0.split(','),\n      t = c1.split(','),\n      R = parseInt(f[0].slice(4)),\n      G = parseInt(f[1]),\n      B = parseInt(f[2]);\n    return (\n      'rgb(' +\n      (Math.round((parseInt(t[0].slice(4)) - R) * p) + R) +\n      ',' +\n      (Math.round((parseInt(t[1]) - G) * p) + G) +\n      ',' +\n      (Math.round((parseInt(t[2]) - B) * p) + B) +\n      ')'\n    );\n  }\n  */\n\n  function colorShade(color, percent) {\n    if (color.length > 7) return shadeRGBColor(color, percent);\n    else return shadeColor2(color, percent);\n  }\n\n  /*\n  function colorBlend(color1, color2, percent) {\n    if (color1.length > 7) return blendRGBColors(color1, color2, percent);\n    else return blendColors(color1, color2, percent);\n  }\n  */\n\n  // http://stackoverflow.com/questions/1573053/javascript-function-to-convert-color-names-to-hex-codes\n  function getHexColor(colorStr) {\n    const a = document.createElement('div');\n    a.style.color = colorStr;\n    const colors = window\n      .getComputedStyle(document.body.appendChild(a))\n      .color.match(/\\d+/g)\n      .map(function (a) {\n        return parseInt(a, 10);\n      });\n    document.body.removeChild(a);\n    return colors.length >= 3\n      ? '#' + ((1 << 24) + (colors[0] << 16) + (colors[1] << 8) + colors[2]).toString(16).substr(1)\n      : false;\n  }\n\n  return chart;\n}\n","import * as d3 from 'd3';\n\nexport function ptsMatch() {\n  let match_data: any;\n\n  const options: any = {\n    id: 0,\n    class: 'ptsMatch',\n\n    resize: true,\n    width: window.innerWidth,\n    height: 80,\n    max_height: 100,\n\n    margins: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n\n    set: {\n      average_points: 56\n    },\n\n    lines: {\n      width: 2,\n      interpolation: 'linear'\n    },\n\n    points: {\n      max_width_points: 100\n    },\n\n    score: {\n      font: 'Arial',\n      font_size: '12px',\n      font_weight: 'bold',\n      reverse: true\n    },\n\n    header: {\n      font: 'Arial',\n      font_size: '14px',\n      font_weight: 'bold'\n    },\n\n    display: {\n      sizeToFit: true,\n      transition_time: 0,\n      point_highlighting: true,\n      point_opacity: 0.4,\n      win_err_highlight: true,\n      game_highlighting: true,\n      game_opacity: 0.2,\n      game_boundaries: true,\n      gamepoints: false,\n      score: true,\n      points: true,\n      winner: true\n    },\n\n    colors: {\n      orientation: 'yellow',\n      gamepoints: 'black',\n      players: { 0: '#a55194', 1: '#6b6ecf' }\n    }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update: any;\n\n  // programmatic\n  const pts_sets: any[] = [];\n  let dom_parent;\n\n  // prepare charts\n  const pts_charts: any[] = [];\n  for (let s = 0; s < 5; s++) {\n    pts_charts.push(ptsChart());\n  }\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events: any = {\n    update: { begin: null, end: null },\n    set_box: { mouseover: null, mouseout: null },\n    point_bars: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection) {\n    dom_parent = selection;\n\n    if (options.display.sizeToFit) {\n      const dims = selection.node().getBoundingClientRect();\n      options.width = Math.max(dims.width, 400);\n    }\n\n    // append svg\n    const root = dom_parent\n      .append('div')\n      .attr('class', options.class + 'root')\n      .style('width', options.width + 'px')\n      .style('height', options.height + 'px');\n\n    for (let s = 0; s < 5; s++) {\n      pts_sets[s] = root.append('div').attr('class', 'pts').style('display', 'none');\n      pts_sets[s].call(pts_charts[s]);\n    }\n\n    update = function (opts) {\n      const sets = match_data.sets();\n\n      if (options.display.sizeToFit || opts?.sizeToFit) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.max(dims.width, 400);\n        options.height = (dims.height - (+options.margins.top + +options.margins.bottom)) / sets.length;\n        if (options.height > options.max_height) options.height = options.max_height;\n      }\n\n      let true_height = 0;\n      for (let s = 0; s < pts_charts.length; s++) {\n        if (sets?.[s]?.history.points().length) {\n          pts_sets[s].style('display', 'inline');\n          pts_charts[s].width(options.width);\n          pts_charts[s].height(options.height);\n          pts_charts[s].update();\n          true_height += +options.height + 5;\n        } else {\n          pts_sets[s].style('display', 'none');\n        }\n      }\n\n      root.style('width', options.width + 'px').style('height', true_height + 'px');\n    };\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject: any, optionsObject: any) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (const key of vKeys) {\n      if (oKeys.indexOf(key) >= 0) {\n        const oo = optionsObject[key];\n        const vo = valuesObject[key];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[key], optionsObject[key]);\n        } else {\n          optionsObject[key] = valuesObject[key];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions: any) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.colors = function (colores: any) {\n    if (!arguments.length) return options.colors;\n    options.colors.players = colores;\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    if (typeof update === 'function') update(true);\n    pts_charts.forEach(function (e) {\n      e.width(value);\n    });\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    if (typeof update === 'function') update(true);\n    pts_charts.forEach(function (e) {\n      e.height(value);\n    });\n    return chart;\n  };\n\n  chart.duration = function (value) {\n    if (!arguments.length) return options.display.transition_time;\n    options.display.transition_time = value;\n    return chart;\n  };\n\n  chart.update = function (opts?: any) {\n    if (events.update.begin) events.update.begin();\n    const sets = match_data.sets();\n    const max_width_points = Math.max(\n      ...sets.map((set, index) => set.history.points().filter((f) => f.set == index).length)\n    );\n    if (sets.length > 1) chart.options({ points: { max_width_points } });\n    sets.forEach(function (_, i: number) {\n      pts_charts[i].data(sets[i]);\n      pts_charts[i].options({ id: i });\n      pts_charts[i].options({\n        lines: options.lines,\n        points: options.points,\n        score: options.score,\n        header: options.header\n      });\n      pts_charts[i].options({ set: options.set, display: options.display, colors: options.colors });\n      pts_charts[i].events(events);\n      pts_charts[i].width(options.width).height(options.height).update(opts);\n    });\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n    return true;\n  };\n\n  chart.data = function (matchObject) {\n    if (!arguments.length) {\n      return match_data;\n    }\n    match_data = matchObject;\n    chart.update();\n  };\n\n  return chart;\n}\n\nfunction ptsChart() {\n  let set_data;\n\n  let game_data;\n  let points_to_set;\n\n  const winners = ['Ace', 'Winner', 'Serve Winner'];\n  const errors = ['Forced Error', 'Unforced Error', 'Double Fault', 'Penalty', 'Out', 'Net'];\n\n  const options = {\n    id: 0,\n    class: 'ptsChart',\n\n    resize: true,\n    width: window.innerWidth,\n    height: 80,\n\n    margins: {\n      top: 5,\n      right: 15,\n      bottom: 5,\n      left: 5\n    },\n\n    set: {\n      average_points: 56\n    },\n\n    lines: {\n      width: 2,\n      interpolation: 'linear'\n    },\n\n    points: {\n      max_width_points: 100\n    },\n\n    score: {\n      font: 'Arial',\n      font_size: '12px',\n      font_weight: 'bold',\n      reverse: true\n    },\n\n    header: {\n      font: 'Arial',\n      font_size: '14px',\n      font_weight: 'bold'\n    },\n\n    display: {\n      transition_time: 0,\n      point_highlighting: true,\n      point_opacity: 0.4,\n      win_err_highlight: true,\n      game_highlighting: true,\n      game_opacity: 0.2,\n      game_boundaries: false,\n      gamepoints: false,\n      score: true,\n      points: true,\n      winner: true\n    },\n\n    colors: {\n      orientation: 'yellow',\n      gamepoints: 'black',\n      players: { 0: 'blue', 1: 'purple' }\n    }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update;\n\n  // programmatic\n  let dom_parent;\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events = {\n    set_box: { mouseover: null, mouseout: null },\n    update: { begin: null, end: null },\n    point_bars: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection) {\n    selection.each(function (_, i: number, n: any) {\n      dom_parent = d3.select(n[i]);\n\n      // append svg\n      const root = dom_parent\n        .append('svg')\n        .attr('class', options.class + 'root')\n        .style('width', options.width + 'px')\n        .style('height', options.height + 'px');\n\n      // append children g\n      const pts = root\n        .append('g')\n        .attr('class', options.class + 'pts')\n        .attr('transform', 'translate(5, 5)');\n\n      // For Point Bars which must always be on top\n      const ptsHover = root\n        .append('g')\n        .attr('class', options.class + 'pts')\n        .attr('transform', 'translate(5, 5)');\n\n      // append labels\n      const set_winner = pts\n        .append('text')\n        .attr('class', options.class + 'Header')\n        .attr('opacity', 0)\n        .attr('font-size', options.header.font_size)\n        .attr('font-weight', options.header.font_weight)\n        .attr('x', function () {\n          return options.margins.left + 'px';\n        })\n        .attr('y', function () {\n          return options.margins.top + 8 + 'px';\n        });\n\n      const set_score = pts\n        .append('text')\n        .attr('class', options.class + 'Score')\n        .attr('opacity', 0)\n        .attr('font-size', options.score.font_size)\n        .attr('font-weight', options.score.font_weight)\n        .attr('x', function () {\n          return options.margins.left + 'px';\n        })\n        .attr('y', function () {\n          return options.margins.top + 20 + 'px';\n        });\n\n      // resize used to disable transitions during resize operation\n      update = function (_, resize?: boolean) {\n        if (!set_data) {\n          return false;\n        }\n\n        root\n          .transition()\n          .duration(options.display.transition_time)\n          .style('width', options.width + 'px')\n          .style('height', options.height + 'px');\n\n        const points = set_data.history.action('addPoint').filter((f) => f.point.set == options.id);\n        const range_start = points[0].point.index;\n\n        game_data = groupGames(points);\n        points_to_set = points.map((p) => p.needed.points_to_set);\n        const pts_max = Math.max(\n          ...[].concat(\n            points_to_set.map((p) => p[0]),\n            points_to_set.map((p) => p[1])\n          )\n        );\n        const pts_start = Math.max(...points_to_set[0]);\n\n        // add pts prior to first point\n        points_to_set.unshift([pts_start, pts_start]);\n\n        const longest_rally =\n          Math.max.apply(\n            null,\n            points.map(function (m) {\n              return m.point.rally ? m.point.rally.length : 0;\n            })\n          ) + 2;\n\n        displayScore(resize);\n\n        const xScale = d3\n          .scaleLinear()\n          .domain([0, calcWidth()])\n          .range([0, options.width - (options.margins.left + options.margins.right)]);\n\n        function pointScale(d, r, a) {\n          if (d.range[r] < range_start) return xScale(d.range[r] + a);\n          return xScale(d.range[r] + a - range_start);\n        }\n\n        const yScale = d3\n          .scaleLinear()\n          .range([options.height - (options.margins.top + options.margins.bottom), options.margins.bottom])\n          .domain([-2, pts_max - 1]);\n\n        // Set Box\n        const set_box = pts.selectAll('.' + options.class + 'SetBox').data([options.id]); // # of list elements only used for index, data not important\n\n        set_box\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'SetBox')\n          .style('position', 'relative')\n          .attr('height', function () {\n            return options.height - (options.margins.top + options.margins.bottom);\n          })\n          .attr('width', function () {\n            return xScale(boxWidth() + 1);\n          })\n          .attr('stroke', 'black')\n          .attr('stroke-width', 1)\n          .attr('fill', 'none')\n          .on('mouseover', function (d, i) {\n            if (events.set_box.mouseover) events.set_box.mouseover(d, i);\n          })\n          .on('mouseout', function (d, i) {\n            if (events.set_box.mouseout) events.set_box.mouseout(d, i);\n          })\n          .merge(set_box)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('height', function () {\n            return options.height - (options.margins.top + options.margins.bottom);\n          })\n          .attr('width', function () {\n            return xScale(boxWidth() + 1);\n          });\n\n        set_box\n          .exit()\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .style('opacity', 0)\n          .remove();\n\n        // Game Boundaries\n        const game_boundaries = pts.selectAll('.' + options.class + 'GameBoundary').data(game_data);\n\n        game_boundaries.exit().remove();\n\n        game_boundaries\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'GameBoundary')\n          .merge(game_boundaries)\n          .attr('id', function (_, i: number) {\n            return options.class + options.id + 'boundary' + i;\n          })\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', function () {\n            return options.display.game_boundaries ? 0.02 : 0;\n          })\n          .attr('transform', function (d: any) {\n            return 'translate(' + pointScale(d, 0, 0) + ', 0)';\n          })\n          .attr('height', yScale(-2))\n          .attr('width', function (d: any) {\n            return pointScale(d, 1, 1) - pointScale(d, 0, 0);\n          })\n          .attr('stroke', 'black')\n          .attr('stroke-width', 1)\n          .attr('fill', 'none');\n\n        // Game Boxes\n        const game_boxes = pts.selectAll('.' + options.class + 'Game').data(game_data);\n\n        game_boxes.exit().remove();\n\n        game_boxes\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'Game')\n          .merge(game_boxes)\n          .attr('id', function (_, i: number) {\n            return options.class + options.id + 'game' + i;\n          })\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', function () {\n            return options.display.game_boundaries ? 0.02 : 0;\n          })\n          .attr('transform', function (d: any) {\n            return 'translate(' + pointScale(d, 0, 0) + ', 0)';\n          })\n          .attr('height', yScale(-2))\n          .attr('width', function (d: any) {\n            return pointScale(d, 1, 1) - pointScale(d, 0, 0);\n          })\n          .attr('stroke', function (d: any) {\n            return options.colors.players[d.winner];\n          })\n          .attr('stroke-width', 1)\n          .attr('fill', function (d: any) {\n            return d.winner != undefined ? options.colors.players[d.winner] : 'none';\n          });\n\n        // Player PTS Lines\n        const lineGen = d3\n          .line()\n          .x(function (_, i: number) {\n            return xScale(i);\n          })\n          .y(function (d: number) {\n            return yScale(pts_max - d);\n          });\n\n        const pts_lines = pts.selectAll('.' + options.class + 'Line').data([0, 1]);\n\n        pts_lines.exit().remove();\n\n        pts_lines\n          .enter()\n          .append('path')\n          .attr('class', options.class + 'Line')\n          .attr('id', function (d) {\n            return options.class + options.id + 'player' + d + 'Line';\n          })\n          .attr('fill', 'none')\n          .merge(pts_lines)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 0.1)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 1)\n          .attr('stroke', function (d) {\n            return options.colors.players[d];\n          })\n          .attr('stroke-width', function () {\n            return options.lines.width;\n          })\n          // .attr('d', function(d) { return lineGen(player_data[d]) })\n          .attr('d', function (d) {\n            return lineGen(points_to_set.map((p) => p[d]));\n          });\n\n        const bp_data = [\n          points_to_set.map((p) => {\n            return { pts: p[0] };\n          }),\n          points_to_set.map((p) => {\n            return { pts: p[1] };\n          })\n        ];\n        const bp_wrappers = pts.selectAll('.' + options.class + 'BPWrapper').data(bp_data);\n\n        bp_wrappers\n          .enter()\n          .append('g')\n          .attr('class', options.class + 'BPWrapper');\n\n        bp_wrappers.exit().remove();\n\n        const breakpoints = bp_wrappers.selectAll('.' + options.class + 'Breakpoint').data(function (d, i) {\n          return add_index(d, i);\n        });\n\n        breakpoints.exit().attr('opacity', '0').remove();\n\n        breakpoints\n          .enter()\n          .append('circle')\n          .attr('class', options.class + 'Breakpoint')\n          .attr('opacity', '0')\n          .merge(breakpoints)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 0)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .attr('fill', function (d, i) {\n            if (points[i - 1] && points[i - 1].point.breakpoint != undefined) {\n              return options.colors.players[d._i];\n            }\n          })\n          .style('opacity', function (d, i) {\n            if (points[i - 1] && points[i - 1].point.breakpoint != undefined) {\n              // return points[i - 1].point.breakpoint == d._i ? 1 : 0\n              return points[i - 1].point.server == 1 - d._i ? 1 : 0;\n            }\n          })\n          .attr('cx', function (_, i: number) {\n            return xScale(i);\n          })\n          .attr('cy', function (d: any) {\n            return yScale(pts_max - d.pts);\n          })\n          .attr('r', 2);\n\n        const points_index = d3.range(points.length);\n        const barsX = d3\n          .scaleBand()\n          .domain(points_index)\n          .range([0, xScale(points.length)])\n          .round(true);\n\n        const bX = d3\n          .scaleLinear()\n          .domain([0, points.length])\n          .range([0, xScale(points.length)]);\n\n        // gradients cause hover errors when data is replaced\n        pts.selectAll('.gradient' + options.id).remove();\n\n        const gradients = pts.selectAll('.gradient' + options.id).data(d3.range(points.length)); // data not important, only length of array\n\n        gradients.exit().remove();\n\n        gradients\n          .enter()\n          .append('linearGradient')\n          .attr('id', function (_, i: number) {\n            return 'gradient' + options.id + i;\n          })\n          .attr('class', function () {\n            return 'gradient' + options.id;\n          })\n          .attr('gradientUnits', 'userSpaceOnUse')\n          .attr('x1', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y1', function () {\n            return 0;\n          })\n          .attr('x2', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y2', function () {\n            return yScale(-2);\n          })\n          .merge(gradients)\n          .attr('transform', function (_, i: number) {\n            return 'translate(' + bX(i) + ', 0)';\n          });\n\n        const point_stops = gradients.selectAll('.points_stop').data(function (d: any) {\n          return calcStops(points[d].point);\n        });\n\n        point_stops.exit().remove();\n\n        point_stops\n          .enter()\n          .append('stop')\n          .attr('class', 'points_stop')\n          .attr('offset', function (d) {\n            return d.offset;\n          })\n          .attr('stop-color', function (d) {\n            return d.color;\n          })\n          .merge(point_stops)\n          .attr('offset', function (d) {\n            return d.offset;\n          });\n\n        const point_bars = ptsHover.selectAll('.' + options.class + 'Bar').data(d3.range(points.length)); // data not important, only length of array\n\n        point_bars\n          .exit()\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', '0')\n          .remove();\n\n        point_bars\n          .enter()\n          .append('line')\n          .attr('class', options.class + 'Bar')\n          .attr('opacity', '0')\n          .merge(point_bars)\n          .attr('opacity', '0')\n          .attr('transform', function (_, i: number) {\n            return 'translate(' + bX(i) + ', 0)';\n          })\n          .attr('x1', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y1', function () {\n            return 0;\n          })\n          .attr('x2', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y2', function () {\n            return yScale(-2);\n          })\n          .attr('stroke-width', function () {\n            return barsX.bandwidth();\n          })\n          .attr('stroke', function (_, i: number) {\n            return 'url(#gradient' + options.id + i + ')';\n          })\n          .attr('uid', function (_, i: number) {\n            return 'point' + i;\n          })\n          .on('mousemove', function (d: any, i: number, n: Node) {\n            if (options.display.point_highlighting) {\n              d3.select(n[i]).attr('opacity', options.display.point_opacity);\n            }\n            if (options.display.game_highlighting && points[i]) {\n              d3.select('[id=\"' + options.class + options.id + 'game' + points[i].point.game + '\"]').attr(\n                'opacity',\n                options.display.game_opacity\n              );\n            }\n            if (events.point_bars.mouseover) {\n              events.point_bars.mouseover(points[d], i);\n            }\n            if (d == 0) {\n              ptsHover.selectAll('.' + options.class + 'Bar').attr('opacity', options.display.point_opacity);\n            }\n            /** highlightScore(d, i); */\n          })\n          .on('mouseout', function (d, i) {\n            ptsHover.selectAll('.' + options.class + 'Bar').attr('opacity', 0);\n            pts.selectAll('.' + options.class + 'Game').attr('opacity', '0');\n            if (events.point_bars.mouseout) {\n              events.point_bars.mouseout(points[d], i);\n            }\n            displayScore();\n          })\n          .on('click', function (d: any, i: number, n: Node) {\n            if (events.point_bars.click) {\n              events.point_bars.click(points[d], i, n[i]);\n            }\n          });\n\n        function displayScore(resize?: boolean) {\n          const winner = set_data.winner();\n          const players = set_data.metadata.players();\n          function lastName(name) {\n            const split = name.split(' ');\n            return split[split.length - 1];\n          }\n          const legend =\n            winner != undefined ? players[winner].name : `${lastName(players[0].name)}/${lastName(players[1].name)}`;\n\n          set_winner\n            .transition()\n            .duration(resize ? 0 : options.display.transition_time)\n            .attr('opacity', 1)\n            .attr('fill', winner != undefined ? options.colors.players[winner] : 'black')\n            .text(legend);\n\n          const game_score = set_data.scoreboard(winner);\n          set_score\n            .transition()\n            .duration(resize ? 0 : options.display.transition_time)\n            .attr('opacity', 1)\n            .attr('fill', winner != undefined ? options.colors.players[winner] : 'black')\n            .text(game_score);\n        }\n\n        function calcStops(point) {\n          let win_pct = 0;\n          let err_pct = 0;\n          let u_pct = 0;\n\n          if (options.display.win_err_highlight) {\n            console.log('calcstops:', point);\n            const rally = point.rally;\n            const result = point.result;\n            const rally_pct = rally ? 100 - Math.floor((rally.length / longest_rally) * 100) : 100;\n            if (winners.indexOf(result) >= 0) {\n              win_pct = rally_pct;\n            } else if (errors.indexOf(result) >= 0) {\n              err_pct = rally_pct;\n            } else {\n              u_pct = rally_pct;\n            }\n          }\n\n          return [\n            { offset: '0%', color: 'blue' },\n            { offset: u_pct + '%', color: 'blue' },\n            { offset: u_pct + '%', color: 'green' },\n            { offset: u_pct + win_pct + '%', color: 'green' },\n            { offset: u_pct + win_pct + '%', color: 'red' },\n            { offset: u_pct + win_pct + err_pct + '%', color: 'red' },\n            { offset: u_pct + win_pct + err_pct + '%', color: options.colors.orientation },\n            { offset: '100%', color: options.colors.orientation }\n          ];\n        }\n      };\n    });\n  }\n\n  // REUSABLE functions\n  // ------------------\n\n  function add_index(d, i) {\n    for (const item of d) {\n      item['_i'] = i;\n    }\n    return d;\n  }\n\n  function boxWidth() {\n    const dl = set_data.history.points().filter((f) => f.set == options.id).length - 1;\n    return set_data.complete() ? dl : dl < options.set.average_points ? options.set.average_points : dl;\n  }\n\n  function calcWidth() {\n    const dl = set_data.history.points().filter((f) => f.set == options.id).length - 1;\n    return Math.max(dl, options.points.max_width_points, options.set.average_points);\n  }\n\n  function groupGames(point_episodes) {\n    const games: any = [{ points: [], range: [0, 0] }];\n    let game_counter = 0;\n    let current_game = 0;\n    point_episodes.forEach((episode) => {\n      const point = episode.point;\n      if (point.game != current_game) {\n        game_counter += 1;\n        current_game = point.game;\n        games[game_counter] = { points: [], range: [point.index, point.index] };\n      }\n      games[game_counter].points.push(point);\n      games[game_counter].index = game_counter;\n      games[game_counter].set = episode.set.index;\n      games[game_counter].score = episode.game.games;\n      games[game_counter].complete = episode.game.complete;\n      games[game_counter].range[1] = point.index;\n      if (episode.game.complete) {\n        games[game_counter].winner = point.winner;\n      }\n    });\n    return games;\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    const vKeys = Object.keys(values);\n    const oKeys = Object.keys(options);\n    for (const vKey of vKeys) {\n      if (oKeys.indexOf(vKey) >= 0) {\n        if (typeof options[vKey] == 'object') {\n          const sKeys = Object.keys(values[vKey]);\n          const osKeys = Object.keys(options[vKey]);\n          for (const sKey of sKeys) {\n            if (osKeys.indexOf(sKey) >= 0) {\n              options[vKey][sKey] = values[vKey][sKey];\n            }\n          }\n        } else {\n          options[vKey] = values[vKey];\n        }\n      }\n    }\n    return chart;\n  };\n\n  chart.data = function (set_object) {\n    if (!arguments.length) return set_data;\n    set_data = set_object;\n  };\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    const fKeys = Object.keys(functions);\n    const eKeys = Object.keys(events);\n    for (const fKey of fKeys) {\n      if (eKeys.indexOf(fKey) >= 0) events[fKey] = functions[fKey];\n    }\n    return chart;\n  };\n\n  chart.colors = function (colores) {\n    if (!arguments.length) return options.colors;\n    options.colors.players = colores;\n    return chart;\n  };\n\n  chart.width = function (value) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n    return true;\n  };\n\n  chart.duration = function (value) {\n    if (!arguments.length) return options.display.transition_time;\n    options.display.transition_time = value;\n    return chart;\n  };\n\n  return chart;\n}\n","import { changeDisplay, viewManager } from './viewManager';\nimport { charts, env, setOrientation } from './env';\nimport { momentumChart } from './momentumChart';\nimport { groupGames } from './groupGames';\nimport { gameTree } from './gameTree';\nimport { ptsMatch } from './ptsChart';\nimport { gameFish } from './gameFish';\n\nimport * as d3 from 'd3';\n\nexport function configureViz() {\n  // set up momentum\n  let pcolors: any = ['#a55194', '#6b6ecf'];\n  charts.mc = momentumChart();\n  charts.mc.options({\n    display: {\n      sizeToFit: false,\n      continuous: false,\n      orientation: 'vertical',\n      transition_time: 0,\n      service: false,\n      rally: true,\n      player: false,\n      grid: false,\n      score: true\n    },\n    colors: pcolors\n  });\n  charts.mc.events({ score: { click: showGame } });\n  d3.select('#momentumChart').call(charts.mc);\n\n  // set up gameFish\n  pcolors = { players: ['#a55194', '#6b6ecf'] };\n  charts.gamefish = gameFish();\n  charts.gamefish.options({\n    display: { sizeToFit: true },\n    colors: pcolors\n  });\n  d3.select('#gameFishChart').call(charts.gamefish);\n\n  // set up gametree\n  charts.gametree = gameTree();\n  const options = {\n    display: { sizeToFit: true },\n    lines: {\n      points: { winners: 'green', errors: '#BA1212', unknown: '#2ed2db' },\n      colors: { underlines: 'black' }\n    },\n    nodes: {\n      colors: {\n        0: pcolors.players[0],\n        1: pcolors.players[1],\n        neutral: '#ecf0f1'\n      }\n    },\n    selectors: {\n      enabled: true,\n      selected: { 0: false, 1: false }\n    }\n  };\n  charts.gametree.options(options);\n  d3.select('#gameTreeChart').call(charts.gametree);\n\n  charts.pts_match = ptsMatch();\n  charts.pts_match.options({\n    margins: { top: 40, bottom: 20 },\n    display: { sizeToFit: true }\n  });\n  charts.pts_match.data(env.match);\n  d3.select('#PTSChart').call(charts.pts_match);\n}\n\nfunction showGame(d: any) {\n  showGameFish(d.index);\n}\nexport function closeGameFish() {\n  const gFish = document.getElementById('gamefish');\n  if (gFish) gFish.style.display = 'none';\n}\nexport function showGameFish(index?: number) {\n  const gFish = document.getElementById('gamefish');\n  if (gFish) gFish.style.display = 'flex';\n  const games = groupGames();\n  const game = index != undefined ? games[index] : games[games.length - 1];\n  const gridcells = game.points[0].tiebreak ? ['0', '1', '2', '3', '4', '5', '6', '7'] : ['0', '15', '30', '40', 'G'];\n  charts.gamefish.options({\n    display: { reverse: env.swap_sides },\n    fish: {\n      gridcells: gridcells,\n      cell_size: 20\n    },\n    score: game.score\n  });\n  charts.gamefish.data(game.points).update();\n  window.scrollTo(0, 0);\n}\n\nexport function vizUpdate() {\n  const direction = env.orientation == 'landscape' ? 'horizontal' : 'vertical';\n\n  if (env.view == 'pts' && direction == 'vertical') {\n    changeDisplay('none', 'pts');\n    changeDisplay('inline', 'momentum');\n    charts.mc.width(window.innerWidth).height(820);\n    charts.mc.update();\n    env.view = 'momentum';\n  } else if (env.view == 'momentum' && direction == 'horizontal') {\n    changeDisplay('none', 'momentum');\n    changeDisplay('flex', 'pts');\n    charts.pts_match.update({ sizeToFit: true });\n    env.view = 'pts';\n  }\n\n  if (charts.gamefish) charts.gamefish.update();\n\n  const players = env.match.metadata.players();\n\n  if (charts.gametree) {\n    charts.gametree.options({\n      labels: {\n        Player: players[0].name,\n        Opponent: players[1].name\n      }\n    });\n    charts.gametree.update({ sizeToFit: true });\n  }\n}\n\nexport function orientationEvent() {\n  setOrientation();\n  vizUpdate();\n  viewManager();\n}\n","import { env, updateMatchArchive } from './env';\n\nexport function updateTournamentDetails() {\n  const tournament = {};\n  let attributes = ['surface', 'in_out', 'draw', 'draw_size', 'round'];\n\n  attributes.forEach((attribute) => {\n    const target_id = `tournament_${attribute}`;\n    const obj: any = document.getElementById(target_id);\n    if (obj.selectedIndex >= 0) {\n      const value = obj.options[obj.selectedIndex].value;\n      if (value) tournament[attribute] = value;\n    }\n  });\n\n  attributes = ['name', 'start_date', 'tour', 'rank'];\n  attributes.forEach((attribute) => {\n    const target: any = document.getElementById(`tournament_${attribute}`);\n    const value = target.value;\n    if (value) tournament[attribute] = value.trim();\n  });\n  env.match.metadata.defineTournament(tournament);\n  updateMatchArchive();\n}\n","import { env, updateMatchArchive } from './env';\n\nexport function updateMatchDetails() {\n  const match_details = {};\n  const attributes = ['court', 'umpire'];\n  attributes.forEach((attribute) => {\n    const target: any = document.getElementById(`match_${attribute}`);\n    const value = target.value;\n    if (value) match_details[attribute] = value;\n  });\n  env.match.metadata.defineMatch(match_details);\n  updateMatchArchive();\n}\n","import { updateTournamentDetails } from './updateTournamentDetails';\nimport { updateMatchDetails } from './updateMatchDetails';\nimport { browserStorage } from './browserStorage';\nimport { env } from './env';\n\nexport function updateDetails() {\n  updateTournamentDetails();\n  updateMatchDetails();\n  const target: any = document.getElementById(`provider`);\n  const value = target.value;\n  env.provider = value;\n\n  if (value) {\n    browserStorage.set('mobile-provider', value);\n  }\n}\n","let touchTimer: any;\nconst em: any = {\n  elapsed: 100000,\n  held: undefined,\n  touched: undefined,\n  holdTime: 800,\n  holdAction: undefined,\n  holdActions: {}\n};\nconst keys: any = {};\nlet registeredFunctions: any = {};\nconst intersection = (a: any, b: any) =>\n  a.filter((n: any) => b.indexOf(n) !== -1).filter((e: any, i: any, c: any) => c.indexOf(e) === i);\n\nem.reset = () => {\n  registeredFunctions = {};\n  return em;\n};\n\nem.register = (cls: any, evnt: any, fx: any, delay: any) => {\n  if (typeof fx == 'function') {\n    if (!registeredFunctions[evnt]) {\n      registeredFunctions[evnt] = {};\n      keys[evnt] = [];\n    }\n    registeredFunctions[evnt][cls] = { fx, delay };\n    keys[evnt] = Object.keys(registeredFunctions[evnt]);\n  }\n  return em;\n};\n\nem.deRegister = (cls: any, evnt: any) => {\n  if (registeredFunctions[evnt]) {\n    delete registeredFunctions[evnt][cls];\n    keys[evnt] = Object.keys(registeredFunctions[evnt]);\n  }\n  return em;\n};\n\nem.call = (cls: any, evnt: any, ...args: any) => {\n  return registeredFunctions?.[evnt]?.[cls]?.fx(...args);\n};\nem.trigger = (cls: any, evnt: any, target: any, mouse: any) => registeredFunctions[evnt][cls].fx(target, mouse, evnt);\nem.list = () => console.log(registeredFunctions);\n\nconst tapHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\ndocument.addEventListener(tapHandler, (evt) => processEvnt({ evt, evnt: 'tap' }));\ndocument.addEventListener('change', (evt) => processEvnt({ evt, evnt: 'change' }));\ndocument.addEventListener('click', (evt) => processEvnt({ evt, evnt: 'click' }));\ndocument.addEventListener('mouseover', (evt) => processEvnt({ evt, evnt: 'mouseover', stopPropagation: false }));\ndocument.addEventListener('mouseout', (evt) => processEvnt({ evt, evnt: 'mouseout', stopPropagation: false }));\ndocument.addEventListener('keyup', (evt) => processEvnt({ evt, evnt: 'keyup', stopPropagation: false }));\n\nlet lastTap = 0;\n\ntype AnyType = {\n  [key: string]: any;\n};\nfunction processEvnt({ evt, evnt, stopPropagation = true }: AnyType) {\n  if (stopPropagation) evt.stopPropagation();\n  const mouse = {\n    x: evt.clientX,\n    y: evt.clientY,\n    pageX: evt.pageX,\n    pageY: evt.pageY\n  };\n  const classList = Array.from(evt.target.classList);\n  const matchedClasses = classList.length && keys[evnt] ? intersection(classList, keys[evnt]) : [];\n  if (matchedClasses.length) {\n    const thisTap = new Date().getTime();\n    em.elapsed = thisTap - lastTap;\n    lastTap = thisTap;\n    matchedClasses.forEach((cls: any) => {\n      callFunction({ cls, evt, evnt, mouse });\n    });\n  }\n}\n\nfunction callFunction({ cls, evt, evnt, mouse }: AnyType) {\n  const target = evt.target;\n  registeredFunctions[evnt][cls].fx(target, mouse, evnt, evt);\n}\n\ndocument.addEventListener(\n  'touchstart',\n  (pointerEvent) => {\n    em.touched = pointerEvent.target;\n    em.coords = [pointerEvent.touches[0].clientX, pointerEvent.touches[0].clientY];\n    if (em.touched) {\n      touchTimer = setTimeout(function () {\n        holdAction();\n      }, em.holdTime);\n    }\n  },\n  false\n);\ndocument.addEventListener(\n  'touchend',\n  function () {\n    touchleave();\n  },\n  false\n);\ndocument.addEventListener(\n  'touchmove',\n  function (pointerEvent) {\n    if (em.touched !== pointerEvent.target) touchleave();\n  },\n  false\n);\nfunction touchleave() {\n  clearTimeout(touchTimer);\n}\nfunction holdAction() {\n  if (typeof em.holdAction == 'function') {\n    em.held = em.touched;\n    em.holdAction(em.held, em.coords);\n  }\n}\n\nlet isTouch = false; //let to indicate current input type (is touch versus no touch)\nlet isTouchTimer: any;\nlet curRootClass = ''; //let indicating current document root class (\"can-touch\" or \"\")\n\nfunction addtouchclass() {\n  clearTimeout(isTouchTimer);\n  isTouch = true;\n  if (curRootClass !== 'can-touch') {\n    //add \"can-touch' class if it's not already present\n    curRootClass = 'can-touch';\n    document.documentElement.classList.add(curRootClass);\n  }\n  //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n  isTouchTimer = setTimeout(function () {\n    isTouch = false;\n  }, 500);\n}\n\nfunction removetouchclass() {\n  // console.log('removing touch class');\n  if (!isTouch && curRootClass === 'can-touch') {\n    //remove 'can-touch' class if not triggered by a touch event and class is present\n    isTouch = false;\n    curRootClass = '';\n    document.documentElement.classList.remove('can-touch');\n  }\n}\n\ndocument.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\ndocument.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n\nexport const eventManager = em;\n","import { default_players, device, env } from './env';\nimport { broadcasting, coms } from './coms';\n\nexport function broadcastScore(action?: any) {\n  action = action || env.match.history.lastPoint();\n  const players = env.match.metadata.players();\n\n  // don't publish if the player names haven't been changed\n  const pub = players[0].name != default_players[0] && players[1].name != default_players[1];\n\n  if (pub && broadcasting()) {\n    const coords = device.geoposition.coords || {};\n    const tournament = env.match.metadata.defineTournament();\n    const match_meta = env.match.metadata.defineMatch();\n    const match_message = {\n      tournament,\n      match: env.match.metadata.defineMatch(),\n      event: { euid: match_meta.euid },\n      status: env.match.status,\n      players: env.match.metadata.players(),\n      score: env.match.score(),\n      point: action.point,\n      serving: env.match.nextTeamServing(),\n      complete: env.match.complete(),\n      winner: env.match.winner(),\n      geoposition: {\n        latitude: coords.latitude,\n        longitude: coords.longitude\n      },\n      undo: typeof action == 'string' && action == 'Undo'\n    };\n    sendScoreUpdate(match_message);\n  }\n}\n\nlet next_update: any;\nlet last_timeout: any;\nlet last_update = 0;\nconst update_window = 10000;\n\nfunction sendScoreUpdate(update: any) {\n  const now = Date.now();\n  next_update = update;\n\n  if (now - last_update > update_window) {\n    coms.socket.emit('mh', { type: 'score', payload: { next_update } });\n    last_update = now;\n  } else {\n    if (last_timeout) clearTimeout(last_timeout);\n    const wait_time = update_window - (now - last_update);\n    last_timeout = setTimeout(function () {\n      coms.socket.emit('mh', { type: 'score', payload: { next_update } });\n      last_update = now;\n    }, wait_time);\n  }\n}\n","import { showGameFish } from './configureViz';\nimport { showModal } from './utilities';\nimport { env, settings } from './env';\n\nexport function checkMatchEnd(action?: any) {\n  if (env.match.complete()) {\n    const winner = env.match.metadata.players()[env.match.winner()].name;\n    showModal(\n      `<div style=\"height: 50vh\" class=\"flexcols flexcenter\"><div>Match Complete!</div><div>Winner: ${winner}</div></div>`\n    );\n    return true;\n  } else if (action?.game.complete && settings.display_gamefish) {\n    showGameFish();\n  }\n}\n","import { stateChangeEvent } from './displayUpdate';\nimport { broadcastScore } from './broadcastScore';\nimport { checkMatchEnd } from './checkMatchEnd';\nimport { strokeSlider } from './strokeSlider';\nimport { env } from './env';\n\nexport function strokeAction(element: any) {\n  const hand: string = element.getAttribute('hand');\n  const stroke: string = element.getAttribute('stroke');\n  if (hand && stroke) {\n    const last_point = env.match.history.lastPoint();\n    env.match.decoratePoint(last_point, { hand, stroke });\n    stateChangeEvent(); // make sure to save the decoration in case of exit!!\n  }\n  strokeSlider();\n  const point_episodes = env.match.history.action('addPoint');\n  const last_action = point_episodes[point_episodes.length - 1];\n  checkMatchEnd(last_action);\n  broadcastScore(last_action);\n}\n","import { env, updateMatchArchive } from './env';\n\nexport function updatePlayer() {\n  env.match.metadata.definePlayer(updatePlayerDetails());\n  updateMatchArchive();\n}\n\nfunction updatePlayerDetails() {\n  const player: any = { index: env.edit_player };\n  const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc'];\n  attributes.forEach((attribute) => {\n    const target_id = `player_${attribute}`;\n    const obj: any = document.getElementById(target_id);\n    if (obj.selectedIndex >= 0) {\n      const value = obj.options[obj.selectedIndex].value;\n      if (value) player[attribute] = value;\n    }\n  });\n  const rankElement: any = document.getElementById('player_rank');\n  if (rankElement.value) player.rank = rankElement.value;\n  const wtnElement: any = document.getElementById('player_wtn');\n  if (wtnElement.value) player.wtn = wtnElement.value;\n  const utrElement: any = document.getElementById('player_utr');\n  if (utrElement.value) player.utr = utrElement.value;\n\n  const teamElement: any = document.getElementById('team');\n  if (teamElement.value) player.team = teamElement.value;\n  const idElement: any = document.getElementById('playerid');\n  if (idElement.value) player.id = idElement.value;\n\n  return player;\n}\n","import { env, updateMatchArchive } from './env';\nimport { updateScore } from './displayUpdate';\nimport { viewManager } from './viewManager';\nimport { findUpClass } from './utilities';\n\nexport function changeFormat(element: Element) {\n  const selectionContainer = findUpClass(element, 'mf_format');\n  if (selectionContainer) {\n    const format = selectionContainer.getAttribute('newFormat');\n    env.match.format.type(format);\n    const format_name = env.match.format.settings().name;\n    document.getElementById('md_format').innerHTML = format_name;\n    updateScore();\n    updateMatchArchive();\n    viewManager('entry');\n  }\n}\n","export const DOUBLE_FAULT = 'Double Fault';\n","import { updateState, visibleButtons } from './displayUpdate';\nimport { resetButton, resetStyles } from './events';\nimport { broadcastScore } from './broadcastScore';\nimport { checkMatchEnd } from './checkMatchEnd';\nimport { buttons, env, settings } from './env';\nimport { strokeSlider } from './strokeSlider';\nimport { broadcastStatus } from './coms';\nimport { DOUBLE_FAULT } from './constants';\n\nconst toggles: any = {};\n\nexport function classAction(element: any) {\n  const action: string = element.getAttribute('action');\n  let side: number = parseInt(element.getAttribute('side') ?? 0);\n  const service: string = element.getAttribute('service');\n  const playerRole: string = element.getAttribute('role');\n\n  if (checkMatchEnd()) return;\n  const slider_side = side ? 'right' : 'left';\n  if (env.swap_sides && ['server', 'receiver'].indexOf(playerRole) < 0) side = 1 - side;\n  resetStyles();\n\n  function changeValue(classes: any, value: any) {\n    const objs = Array.from(document.querySelectorAll(classes));\n    objs.forEach((element) => (element.innerHTML = value));\n  }\n\n  function rallyMode() {\n    env.rally_mode = true;\n    Array.from(document.querySelectorAll('.modeforce')).forEach((div: any) => (div.style.display = 'flex'));\n    changeValue('.vs_action_button.winner', 'Winner');\n    changeValue('.vs_action_button.fault', 'UFE');\n    changeValue('.vs_action_button.forced', 'Forced');\n    Array.from(document.querySelectorAll('.vs_mode_button')).forEach((button) => {\n      if (['Serve', 'Return', '2nd Serve'].indexOf(button.innerHTML) >= 0) button.innerHTML = 'Base Line';\n    });\n  }\n\n  const actions: any = {\n    firstServe() {\n      env.serve2nd = false;\n    },\n    secondServe() {\n      env.serve2nd = toggles.serve2nd ? false : true;\n      toggles.serve2nd = !toggles.serve2nd;\n    },\n    fault(side: number) {\n      if (side != env.serving) return undefined;\n      if (env.serve2nd) return { code: 'D' };\n      const player_side = env.swap_sides ? 1 - side : side;\n      changeValue(`.fault.display_${player_side}_serving`, DOUBLE_FAULT);\n      changeValue(`.fault.modeerr_player${player_side}`, DOUBLE_FAULT);\n      const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n      const server_mode = `.modeaction_player${server_side}`;\n      Array.from(document.querySelectorAll(server_mode)).forEach((div) => (div.innerHTML = '2nd Serve'));\n      env.serve2nd = true;\n      broadcastStatus('Service Fault');\n    },\n    doubleFault(side: number) {\n      return side != env.serving ? undefined : { code: 'd' };\n    },\n    ace(side: number) {\n      return side != env.serving ? undefined : env.serve2nd ? { code: 'a' } : { code: 'A' };\n    },\n    winner(side: number) {\n      return { winner: side, result: 'Winner' };\n    },\n    unforced(side: number) {\n      return { winner: 1 - side, result: 'Unforced Error' };\n    },\n    forced(side: number) {\n      return { winner: 1 - side, result: 'Forced Error' };\n    },\n    point(side: number) {\n      return { winner: side };\n    },\n    penalty(side: number) {\n      console.log('penalty');\n      return {\n        winner: 1 - side,\n        result: 'Penalty',\n        code: side == env.serving ? 'P' : 'Q',\n      };\n    },\n\n    modewin(side: number, point: any) {\n      const action = element.innerHTML;\n      if (action == 'Ace') return actions.ace(side, point);\n      if (action == 'Winner') return actions.winner(side, point);\n    },\n    modeerr(side: number, point: any) {\n      const action = element.innerHTML;\n      if (action == 'Fault' || action == DOUBLE_FAULT) return actions.fault(side, point);\n      if (action == 'UFE') return actions.unforced(side, point);\n      if (action == 'Forced') return actions.forced(side, point);\n      if (action == 'Let') return actions.let(side, point);\n    },\n    modeaction() {\n      const action = element.innerHTML;\n      if (['Serve', '2nd Serve', 'Return'].indexOf(action) >= 0) {\n        rallyMode();\n      }\n      if (action == 'Serve' || action == 'Return') {\n        rallyMode();\n      }\n      if (action == 'Net') {\n        element.innerHTML = 'Base Line';\n      }\n      if (action == 'Base Line') {\n        element.innerHTML = 'Net';\n      }\n    },\n    rally() {\n      const action = element.innerHTML;\n      env.rally = parseInt((action.match(/\\d+/g) || ['0']).join(''));\n      env.rally += 1;\n      changeValue(`.rally`, `Rally: ${env.rally}`);\n      if (env.rally == 1) rallyMode();\n    },\n    let() {\n      broadcastStatus('Service: Let');\n      env.lets += 1;\n      // reset serve clock\n    },\n  };\n\n  const sound: any = document.getElementById('click');\n  if (sound && settings.audible_clicks) sound.play();\n  if (element.id) styleButton(element.id);\n  if (service && service == 'second_service') env.serve2nd = true;\n  if (Object.keys(actions).indexOf(action) < 0) return undefined;\n  const player_position = ['server', 'receiver'].indexOf(playerRole);\n  if (player_position >= 0) side = player_position ? env.receiving : env.serving;\n  const point: any = env.serve2nd ? { first_serve: { error: 'Error', serves: ['0e'] } } : {};\n  const result = actions[action](side, point);\n  if (result) {\n    checkStartTime();\n    Object.assign(point, result);\n    if (env.rally) point.rally = new Array(env.rally);\n    const point_location = getPointLocation(point);\n    if (point_location) point.location = point_location;\n\n    // perhaps refactor to defer adding point until\n    // stroke/result action, if any; then decorate point not necessary\n    // and broadcast of point doesn't have to wait until decoration...\n    // would require a global variable, perhaps 'pip' for point-in-progress\n    const what = env.match.addPoint(point);\n\n    if (\n      settings.track_shot_types &&\n      what.result &&\n      what.point.result &&\n      ['Penalty', 'Ace', 'Double Fault'].indexOf(what.point.result) < 0\n    ) {\n      strokeSlider(slider_side);\n    } else {\n      checkMatchEnd(what);\n      broadcastScore(what);\n    }\n\n    env.rally = 0;\n    env.lets = 0;\n    env.undone = [];\n    updateState();\n  }\n  visibleButtons();\n}\n\nfunction styleButton(id: string) {\n  const button = document.getElementById(id);\n  if (!button) return;\n  if (buttons[id].type == 'flash') {\n    button.style.backgroundColor = buttons[id].color;\n    button.style.color = 'white';\n    setTimeout(() => resetStyles(), 300);\n  } else if (buttons[id].type == 'toggle') {\n    if (button.style.backgroundColor == 'white') {\n      env.serve2nd = id == 'second_serve';\n      button.style.backgroundColor = buttons[id].color;\n      button.style.color = 'white';\n    } else {\n      env.serve2nd = false;\n      button.style.backgroundColor = 'white';\n      button.style.color = buttons[id].color;\n    }\n    const toggle_ids = Object.keys(buttons).filter((f) => buttons[f].type == 'toggle');\n    toggle_ids.filter((f) => f != id).forEach((id: string) => resetButton(id));\n  }\n}\n\nfunction checkStartTime() {\n  const points = env.match.history.points();\n  if (points.length == 0) {\n    // if no points, define new start time\n    const date = new Date();\n    env.match.metadata.defineMatch({ date: date.valueOf() });\n  }\n}\n\nfunction getPointLocation(point: any) {\n  const p0location = document.querySelectorAll('.modeaction_player0');\n  const p1location = document.querySelectorAll('.modeaction_player1');\n  if ((p0location && p0location[0].innerHTML == 'Net') || (p1location && p1location[0].innerHTML == 'Net')) {\n    if (point.result == 'Unforced Error' || point.result == 'Forced Error') {\n      if (point.winner == 0 && p1location[0].innerHTML == 'Net') return 'Net';\n      if (point.winner == 1 && p0location[0].innerHTML == 'Net') return 'Net';\n    } else if (point.result == 'Winner') {\n      if (point.winner == 0 && p0location[0].innerHTML == 'Net') return 'Net';\n      if (point.winner == 1 && p1location[0].innerHTML == 'Net') return 'Net';\n    }\n  }\n}\n","import { browserStorage } from './browserStorage';\nimport { closeModal } from './modals';\n\nexport function exportMatch(element: any) {\n  const match_id = element.getAttribute('matchId');\n  const match_data: any = browserStorage.get(match_id);\n  if (match_data) {\n    download(match_data, `match_${match_id}.json`);\n    closeModal();\n  }\n}\n\nfunction download(textToWrite: string, fileNameToSaveAs: string) {\n  fileNameToSaveAs = fileNameToSaveAs || 'match.json';\n  const textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });\n  const downloadLink = document.createElement('a');\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.innerHTML = 'Download File';\n  if (window.URL != null) {\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n    downloadLink.click();\n  }\n}\n","import { findUpClass } from './utilities';\n\nexport function toggleChart(element: Element) {\n  const container = findUpClass(element, 'statrow');\n  const id = container.getAttribute('id');\n  const el = document.getElementById(id + '_chart');\n  console.log({ id, el });\n  if (el) {\n    const visible = el.style.display != 'none';\n    el.style.display = visible ? 'none' : 'flex';\n  }\n}\n","export default \"__VITE_ASSET__SN86_yA3__\"","import emailblackImage from '../assets/icons/emailblack.png';\nimport { broadcastScore } from './broadcastScore';\nimport { browserStorage } from './browserStorage';\nimport { showModal } from './utilities';\nimport { app, env } from './env';\nimport { UUID } from './UUID';\nimport { coms } from './coms';\n\nexport function modalShare() {\n  broadcastScore();\n  const match_id = browserStorage.get('current_match');\n  const match_data = match_id && browserStorage.get(match_id);\n  if (match_data) {\n    const json_data = JSON.parse(match_data);\n    let muid = json_data.match.muid;\n    if (!muid) {\n      muid = UUID();\n      json_data.match.muid = muid;\n      env.match.metadata.defineMatch({ muid });\n      browserStorage.set(match_id, JSON.stringify(json_data));\n    }\n    shareResult(json_data);\n  } else {\n    const modaltext = ` <p> <h1>First Track a Match!</h1> </p> `;\n    showModal(modaltext);\n  }\n}\n\nfunction shareResult(json_data: any) {\n  if (!coms.socket) {\n    const modaltext = ` <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> `;\n    showModal(modaltext);\n    return;\n  }\n  const broadcast_link = app.broadcast ? `CourtHive Live Score: ${location.origin}/scores?muid=${json_data.muid}` : '';\n  const email_message = `${broadcast_link}%0D%0A `;\n  const emailOption = app.broadcast\n    ? `\n    <div class='closeModal flexcenter iconmargin'>\n      <a href='mailto:?subject=CourtHive Match Link&body=${email_message}' class=\"notextdecoration\">\n          <img class=\"icon_large\" src='${emailblackImage}'>\n      </a> \n    </div>\n  `\n    : '';\n  const clipboardOption = json_data\n    ? `\n    <div class='flexcenter iconmargin'>\n      <button id='copy2clipboard' class=\"flexcenter c2c\" data-clipboard-text=\"\"> \n          <div class='export_action action_icon_large iconclipboard'></div> \n      </button>\n    </div>\n  `\n    : '';\n\n  const match_id = json_data?.match?.muid;\n  const sendHistoryOption = match_id\n    ? `\n   <div matchId=\"${match_id}\" class=\"sendHistory flexcenter\">\n      <div matchId=\"${match_id}\" class='sendHistory export_action action_icon iconsave'></div>\n   </div>\n`\n    : '';\n\n  const modaltext = `\n      <p>&nbsp;</p>\n      <h1>Options for Sharing</h1>\n      <div class='flexrows'> \n        ${emailOption}\n        ${sendHistoryOption}\n        ${clipboardOption}\n      </div>`;\n  showModal(modaltext, JSON.stringify(json_data));\n}\n","import { browserStorage } from './browserStorage';\nimport { stateChangeEvent } from './displayUpdate';\nimport { loadMatch } from './loadMatch';\nimport { env } from './env';\n\nexport function editPoint(index: number) {\n  env.edit_point_index = index;\n  const episodes = env.match.history.action('addPoint');\n  env.edit_point = episodes[index].point;\n  env.edit_point_result = env.edit_point.result;\n  let score = env.edit_point.server ? env.edit_point.score.split('-').reverse().join('-') : env.edit_point.score;\n  if (score == '0-0') score = 'Gamepoint';\n  const epSGP = document.getElementById('ep_sgp');\n  if (epSGP) epSGP.innerHTML = `Set: ${env.edit_point.set + 1}, Game: ${env.edit_point.game + 1}, Point: ${score}`;\n  const players = env.match.metadata.players();\n  const player_select = Array.from(document.querySelectorAll('.select_player'));\n  player_select.forEach((select: any) =>\n    players.forEach(\n      (player: any, index: number) => (select.options[index] = new Option(player.name, index.toString())),\n    ),\n  );\n  const point_winner: any = document.getElementById('point_winner');\n  const point_loser: any = document.getElementById('point_loser');\n  if (point_winner) point_winner.value = env.edit_point.winner;\n  if (point_loser) point_loser.value = env.edit_point.result || '';\n  changePointWinner();\n  changePointPlayer();\n  changeResultOptions();\n  const editPointDisplay = document.getElementById('editpoint');\n  if (editPointDisplay) editPointDisplay.style.display = 'flex';\n}\n\nfunction changePointWinner() {\n  const pointPlayer: any = document.getElementById('point_player');\n  const pointResult: any = document.getElementById('point_result');\n  const pointWinner: any = document.getElementById('point_winner');\n  const player = pointPlayer?.value;\n  const result = pointResult?.value;\n  const winner = pointWinner?.value;\n  if (result.indexOf('Winner') < 0 && result.indexOf('Ace') < 0 && player == winner) {\n    pointPlayer.value = 1 - winner;\n  }\n  if ((result.indexOf('Winner') >= 0 || result.indexOf('Ace') >= 0) && player != winner) {\n    pointPlayer.value = winner;\n  }\n}\n\nfunction changeResultOptions() {\n  const pointPlayer: any = document.getElementById('point_player');\n  const pointResult: any = document.getElementById('point_result');\n  const player = pointPlayer?.value;\n  env.edit_point_result = pointResult.value;\n  pointResult.innerHTML = '';\n  pointResult.options[0] = new Option('- select -', '');\n  let results: any[] = [];\n  if (player == env.edit_point.server) results = ['Ace', 'Double Fault'].concat(...results);\n  results = ['Winner', 'Unforced Error', 'Forced Error'].concat(...results);\n  results.forEach((result, index) => (pointResult.options[index + 1] = new Option(result, result)));\n  pointResult.value = env.edit_point_result;\n}\n\nfunction changePointPlayer() {\n  const pointPlayer: any = document.getElementById('point_player');\n  const pointResult: any = document.getElementById('point_result');\n  const winner: any = document.getElementById('point_winner');\n  const player = pointPlayer?.value;\n  const result = pointResult.value;\n  env.edit_point.result = result;\n  if ((result.indexOf('Winner') >= 0 || result.indexOf('Ace') >= 0) && player != winner.value) {\n    winner.value = player;\n  }\n  if (result.indexOf('Winner') < 0 && result.indexOf('Ace') < 0 && player == winner.value) {\n    winner.value = 1 - player;\n  }\n  changeResultOptions();\n}\n\nexport function updatePoint() {\n  const pointResult: any = document.getElementById('point_result');\n  const pointWinner: any = document.getElementById('point_winner');\n  const winner = pointWinner.value;\n  const result = pointResult.value;\n  env.edit_point.winner = winner;\n  env.edit_point.result = result;\n  env.edit_point.code = undefined; // TODO: code needs to be updated properly\n  stateChangeEvent();\n  const current_match_id = browserStorage.get('current_match');\n  if (current_match_id) {\n    loadMatch(current_match_id, 'pointhistory');\n    const editPointDisplay = document.getElementById('editpoint');\n    if (editPointDisplay) editPointDisplay.style.display = 'none';\n  }\n}\n","import { closeModal } from './modals';\nimport { env } from './env';\n\nexport function editPlayer(element: any) {\n  const index = parseInt(element.getAttribute('playerIndex') ?? 0);\n  env.edit_player = env.swap_sides ? 1 - index : index;\n  closeModal();\n  const editPlayerDisplay = document.getElementById('editplayer');\n  if (editPlayerDisplay) editPlayerDisplay.style.display = 'flex';\n  const player = env.match.metadata.players(env.edit_player);\n  const playerName: any = document.getElementById('playername');\n  if (playerName) playerName.value = player.name;\n  const team: any = document.getElementById('team');\n  if (team) team.value = player.team ?? '';\n\n  const playerId: any = document.getElementById('playerid');\n  if (playerId) playerId.value = player.id ?? '';\n\n  const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc'];\n  attributes.forEach((attribute) => {\n    const target_id = `player_${attribute}`;\n    const targetElement: any = document.getElementById(target_id);\n    if (targetElement) targetElement.value = player[attribute] || '';\n  });\n  const playerRank: any = document.getElementById('player_rank');\n  if (playerRank) playerRank.value = player.rank || '';\n  const playerWTN: any = document.getElementById('player_wtn');\n  if (playerWTN) playerWTN.value = player.wtn || '';\n  const playerUTR: any = document.getElementById('player_utr');\n  if (playerUTR) playerUTR.value = player.utr || '';\n}\n","export default \"__VITE_ASSET__wUPJvyNp__\"","import pointsImage from '../assets/icons/points.jpg';\nimport { showModal } from './utilities';\n\nexport function modalHelp(quick_start?: boolean) {\n  const quick = `\n         <div class=\"helpintro\">Quick Start</div>\n         <div class=\"flexhelp\"> <div class='iconmenub action_icon_large'></div> <div class=\"quicktitle\">Main Menu</div> </div>\n         <div class=\"quickitem\"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>\n         <div class=\"flexhelp\"> <div class='iconsettingsb action_icon_large'></div> <div class=\"quicktitle\">Settings</div> </div>\n         <div class=\"quickitem\"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>\n         <div class=\"flexhelp\"> <div class='iconchangeb action_icon_large'></div> <div class=\"quicktitle\">Change First Server</div> </div>\n         <div class=\"quickitem\"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>\n         <div class=\"quickitem\"> <span>To simply advance points, tap the <b>Points</b> display </span></div>\n         <div class=\"flexhelp\"> <img src='${pointsImage}'> </div>\n      `;\n  const save = `\n         <div class=\"helpintro\">Save To Home Screen</div>\n         <div class=\"helpitem\">CourtHive is a Progressive Web App</div>\n         <div class=\"helpitem\"><b>For Full Screen View:</b></div>\n         <div class=\"helpitem\">On iOS use Safari to Save</div>\n         <div class=\"helpitem\">On Android use Chrome</div>\n      `;\n  const helptext = `\n         <div class=\"helpintro\">How to</div>\n         <div class=\"helpitem\"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>\n         <div class=\"helpitem\"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>\n         <div class=\"helpitem\"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>\n         <div class=\"helpitem\"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>\n         <div class=\"helpitem\"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>\n         <div class=\"helpitem\"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>\n         <div class=\"flexhelp\"> <div class='iconbroadcast icon icon_5'></div> <div class=\"quicktitle\">Enable Broadcast</div> </div>\n         <div class=\"flexhelp\"> <div class='iconshare icon icon_3'></div> <div class=\"quicktitle\">Share (Email, Copy/Paste)</div> </div>\n      `;\n  const modaltext = quick_start ? quick + save + helptext : helptext + save + quick;\n  showModal(modaltext);\n}\n","import { showModal } from './utilities';\nimport { ch_version } from './env';\n\nexport function modalInfo() {\n  const modaltext = `\n         <p>&nbsp;</b>\n         <h2>CourtHive</h2>\n         <p>version <a id=\"version\" target=\"_blank\" href=\"https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive\">${ch_version}</a></p>\n         <p>An \n            <a target=\"_blank\" href=\"https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive\">Open Source</a> project developed by \n            <a target=\"_blank\" href=\"http://TennisVisuals.com\">TennisVisuals</a>\n         </p>\n         <p><a href=\"mailto:tennis.aip@gmail.com?subject=CourtHive\">Feedback Welcome!</a></p>\n         <h2>Help</h2>\n         <div class=\"helpitem\">Difficulties after an app update?</div>\n         <div class=\"flexcenter\">\n            <div class='flexcenter reset' onclick=\"appReset()\">Reset</div>\n         </div>\n         <p>&nbsp;</b>\n      `;\n  showModal(modaltext);\n}\n","import { showModal } from './utilities';\nimport { sendKey } from './coms';\n\nexport function enterKey() {\n  const html = `\n    <h2>Enter key:</h2>\n    <input id='key' class='key_input input is-primary'>\n    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>\n  `;\n  showModal(html);\n\n  const key: any = document.getElementById('key');\n\n  const key_entry = document.getElementById('key');\n  if (key_entry) key_entry.addEventListener('keyup', keyAction);\n\n  const submit = document.getElementById('submit_key');\n  if (submit) submit.addEventListener('click', submitKey);\n\n  function submitKey() {\n    if (key.value) sendKey({ key: key.value });\n  }\n\n  function keyAction(evt: any) {\n    if (evt.which == 13) submitKey();\n  }\n}\n","import { resetButtons, setCourtSide, swapServer, updateState, visibleButtons } from './displayUpdate';\nimport { env, options, updateMatchArchive } from './env';\nimport { broadcastScore } from './broadcastScore';\nimport { viewManager } from './viewManager';\nimport { showGameFish } from './configureViz';\nimport { findUpClass } from './utilities';\nimport { editPoint } from './editPoint';\n\nexport function viewGameFish(element: any) {\n  const gameIndex: number = parseInt(element.getAttribute('gameIndex') ?? 0);\n  showGameFish(gameIndex);\n}\nexport function viewEditPoint(element: any) {\n  const parent = findUpClass(element, 'ph_episode');\n  const pointIndex = parseInt(parent?.getAttribute('pointIndex') ?? 0);\n  editPoint(pointIndex);\n}\nexport function viewStats() {\n  viewManager('stats');\n}\nexport function viewMatchFormat() {\n  viewManager('matchformat');\n}\nexport function viewGameTree() {\n  viewManager('gametree');\n}\nexport function viewMomentum() {\n  viewManager('momentum');\n}\nexport function viewPointHistory() {\n  viewManager('pointhistory');\n}\nexport function settings() {\n  viewManager('settings');\n}\nexport function matchArchive() {\n  viewManager('matcharchive');\n}\nexport function outcomeEntry() {\n  viewManager('entry');\n}\nexport function mainMenu() {\n  viewManager('mainmenu');\n}\nexport function undoAction() {\n  if (env.serve2nd || env.rally_mode) {\n    env.serve2nd = false;\n    env.rally_mode = false;\n    env.rally = 0;\n    env.lets = 0;\n    resetButtons();\n  } else {\n    const undo = env.match.undo();\n    broadcastScore('Undo');\n    if (undo) env.undone.push(undo);\n    updateMatchArchive(true);\n  }\n  visibleButtons();\n}\nexport function redoAction() {\n  if (!env.undone.length) return;\n  const action = env.match.addPoint(env.undone.pop());\n  broadcastScore(action);\n}\nexport function changeServer() {\n  console.log('changeServer');\n  if (!env.match.history.points().length) {\n    env.match.set.firstService(1 - env.serving);\n    updateState();\n    viewManager('entry');\n  }\n}\nexport function swapAction() {\n  console.log('swapAction');\n  options.user_swap = !options.user_swap;\n  setCourtSide();\n  swapServer();\n}\n/*\nexport function menuAction(obj, action) {\n  const actions = {\n    horizontalview() {\n      options.horizontal_view = options.horizontal_view == 'hblack' ? 'hwhite' : 'hblack';\n      BrowserStorage.set('horizontal_view', options.horizontal_view);\n      viewManager('entry');\n    },\n    verticalview() {\n            options.vertical_view = (options.vertical_view == 'vblack') ? 'vwhite' : 'vblack';\n            BrowserStorage.set('vertical_view', options.vertical_view);\n            viewManager('entry');\n    }\n  };\n}\n*/\n","import { updateTournamentDetails } from './updateTournamentDetails';\nimport { updateMatchDetails } from './updateMatchDetails';\nimport { broadcastToggle, sendHistory } from './coms';\nimport { editMatchDetails } from './displayUpdate';\nimport { newMatch } from './displayMatchArchive';\nimport { updateDetails } from './updateDetails';\nimport { eventManager } from './eventManager';\nimport { closeGameFish } from './configureViz';\nimport { strokeAction } from './strokeAction';\nimport { updatePlayer } from './updatePlayer';\nimport { changeFormat } from './changeFormat';\nimport { classAction } from './classAction';\nimport { exportMatch } from './exportMatch';\nimport { toggleChart } from './toggleChart';\nimport { updateStats } from './updateStats';\nimport { modalShare } from './modalShare';\nimport { updatePoint } from './editPoint';\nimport { editPlayer } from './editPlayer';\nimport { modalHelp } from './modalHelp';\nimport { modalInfo } from './modalInfo';\nimport { updateAppState } from './env';\nimport { closeModal } from './modals';\nimport { enterKey } from './enterKey';\nimport {\n  outcomeEntry,\n  matchArchive,\n  settings,\n  mainMenu,\n  swapAction,\n  undoAction,\n  redoAction,\n  changeServer,\n  viewStats,\n  viewPointHistory,\n  viewMomentum,\n  viewGameTree,\n  viewMatchFormat,\n  viewGameFish,\n  viewEditPoint,\n} from './clickActions';\n\nexport function registerEvents() {\n  eventManager\n    .register('modalInfo', 'tap', modalInfo)\n    .register('toggleChart', 'tap', toggleChart)\n    .register('broadcastToggle', 'tap', broadcastToggle)\n    .register('modalShare', 'tap', modalShare)\n    .register('enterKey', 'tap', enterKey)\n    .register('changeFormat', 'tap', changeFormat)\n    .register('closeModal', 'tap', closeModal)\n    .register('newMatch', 'tap', newMatch)\n    .register('exportMatch', 'tap', exportMatch)\n    .register('sendHistory', 'tap', sendHistory)\n    .register('settings', 'tap', settings)\n    .register('outcomeEntry', 'tap', outcomeEntry)\n    .register('matchArchive', 'tap', matchArchive)\n    .register('mainMenu', 'tap', mainMenu)\n    .register('modalHelp', 'tap', modalHelp)\n    .register('updateAppState', 'tap', updateAppState)\n    .register('updateStats', 'tap', updateStats)\n    .register('closeGameFish', 'tap', closeGameFish)\n    .register('strokeAction', 'tap', strokeAction)\n    .register('swapAction', 'tap', swapAction)\n    .register('undoAction', 'tap', undoAction)\n    .register('redoAction', 'tap', redoAction)\n    .register('changeServer', 'tap', changeServer)\n    .register('updatePoint', 'tap', updatePoint)\n    .register('editPlayer', 'tap', editPlayer)\n    .register('updatePlayer', 'tap', updatePlayer)\n    .register('updateTournamentDetails', 'tap', updateTournamentDetails)\n    .register('updateMatchDetails', 'tap', updateMatchDetails)\n    .register('updateDetails', 'tap', updateDetails)\n    .register('viewGameFish', 'tap', viewGameFish)\n    .register('viewStats', 'tap', viewStats)\n    .register('viewGameTree', 'tap', viewGameTree)\n    .register('viewMomentum', 'tap', viewMomentum)\n    .register('viewEditPoint', 'tap', viewEditPoint)\n    .register('viewMatchFormat', 'tap', viewMatchFormat)\n    .register('viewPointHistory', 'tap', viewPointHistory)\n    .register('editMatchDetails', 'tap', editMatchDetails)\n    .register('classAction', 'tap', classAction);\n}\n","/*!\n * clipboard.js v2.0.11\n * https://clipboardjs.com/\n *\n * Licensed MIT  Zeno Rocha\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClipboardJS\"] = factory();\n\telse\n\t\troot[\"ClipboardJS\"] = factory();\n})(this, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 686:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ clipboard; }\n});\n\n// EXTERNAL MODULE: ./node_modules/tiny-emitter/index.js\nvar tiny_emitter = __webpack_require__(279);\nvar tiny_emitter_default = /*#__PURE__*/__webpack_require__.n(tiny_emitter);\n// EXTERNAL MODULE: ./node_modules/good-listener/src/listen.js\nvar listen = __webpack_require__(370);\nvar listen_default = /*#__PURE__*/__webpack_require__.n(listen);\n// EXTERNAL MODULE: ./node_modules/select/src/select.js\nvar src_select = __webpack_require__(817);\nvar select_default = /*#__PURE__*/__webpack_require__.n(src_select);\n;// CONCATENATED MODULE: ./src/common/command.js\n/**\n * Executes a given operation type.\n * @param {String} type\n * @return {Boolean}\n */\nfunction command(type) {\n  try {\n    return document.execCommand(type);\n  } catch (err) {\n    return false;\n  }\n}\n;// CONCATENATED MODULE: ./src/actions/cut.js\n\n\n/**\n * Cut action wrapper.\n * @param {String|HTMLElement} target\n * @return {String}\n */\n\nvar ClipboardActionCut = function ClipboardActionCut(target) {\n  var selectedText = select_default()(target);\n  command('cut');\n  return selectedText;\n};\n\n/* harmony default export */ var actions_cut = (ClipboardActionCut);\n;// CONCATENATED MODULE: ./src/common/create-fake-element.js\n/**\n * Creates a fake textarea element with a value.\n * @param {String} value\n * @return {HTMLElement}\n */\nfunction createFakeElement(value) {\n  var isRTL = document.documentElement.getAttribute('dir') === 'rtl';\n  var fakeElement = document.createElement('textarea'); // Prevent zooming on iOS\n\n  fakeElement.style.fontSize = '12pt'; // Reset box model\n\n  fakeElement.style.border = '0';\n  fakeElement.style.padding = '0';\n  fakeElement.style.margin = '0'; // Move element out of screen horizontally\n\n  fakeElement.style.position = 'absolute';\n  fakeElement.style[isRTL ? 'right' : 'left'] = '-9999px'; // Move element to the same position vertically\n\n  var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n  fakeElement.style.top = \"\".concat(yPosition, \"px\");\n  fakeElement.setAttribute('readonly', '');\n  fakeElement.value = value;\n  return fakeElement;\n}\n;// CONCATENATED MODULE: ./src/actions/copy.js\n\n\n\n/**\n * Create fake copy action wrapper using a fake element.\n * @param {String} target\n * @param {Object} options\n * @return {String}\n */\n\nvar fakeCopyAction = function fakeCopyAction(value, options) {\n  var fakeElement = createFakeElement(value);\n  options.container.appendChild(fakeElement);\n  var selectedText = select_default()(fakeElement);\n  command('copy');\n  fakeElement.remove();\n  return selectedText;\n};\n/**\n * Copy action wrapper.\n * @param {String|HTMLElement} target\n * @param {Object} options\n * @return {String}\n */\n\n\nvar ClipboardActionCopy = function ClipboardActionCopy(target) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    container: document.body\n  };\n  var selectedText = '';\n\n  if (typeof target === 'string') {\n    selectedText = fakeCopyAction(target, options);\n  } else if (target instanceof HTMLInputElement && !['text', 'search', 'url', 'tel', 'password'].includes(target === null || target === void 0 ? void 0 : target.type)) {\n    // If input type doesn't support `setSelectionRange`. Simulate it. https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n    selectedText = fakeCopyAction(target.value, options);\n  } else {\n    selectedText = select_default()(target);\n    command('copy');\n  }\n\n  return selectedText;\n};\n\n/* harmony default export */ var actions_copy = (ClipboardActionCopy);\n;// CONCATENATED MODULE: ./src/actions/default.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n/**\n * Inner function which performs selection from either `text` or `target`\n * properties and then executes copy or cut operations.\n * @param {Object} options\n */\n\nvar ClipboardActionDefault = function ClipboardActionDefault() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // Defines base properties passed from constructor.\n  var _options$action = options.action,\n      action = _options$action === void 0 ? 'copy' : _options$action,\n      container = options.container,\n      target = options.target,\n      text = options.text; // Sets the `action` to be performed which can be either 'copy' or 'cut'.\n\n  if (action !== 'copy' && action !== 'cut') {\n    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n  } // Sets the `target` property using an element that will be have its content copied.\n\n\n  if (target !== undefined) {\n    if (target && _typeof(target) === 'object' && target.nodeType === 1) {\n      if (action === 'copy' && target.hasAttribute('disabled')) {\n        throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n      }\n\n      if (action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n        throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n      }\n    } else {\n      throw new Error('Invalid \"target\" value, use a valid Element');\n    }\n  } // Define selection strategy based on `text` property.\n\n\n  if (text) {\n    return actions_copy(text, {\n      container: container\n    });\n  } // Defines which selection strategy based on `target` property.\n\n\n  if (target) {\n    return action === 'cut' ? actions_cut(target) : actions_copy(target, {\n      container: container\n    });\n  }\n};\n\n/* harmony default export */ var actions_default = (ClipboardActionDefault);\n;// CONCATENATED MODULE: ./src/clipboard.js\nfunction clipboard_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { clipboard_typeof = function _typeof(obj) { return typeof obj; }; } else { clipboard_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return clipboard_typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (clipboard_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n/**\n * Helper function to retrieve attribute value.\n * @param {String} suffix\n * @param {Element} element\n */\n\nfunction getAttributeValue(suffix, element) {\n  var attribute = \"data-clipboard-\".concat(suffix);\n\n  if (!element.hasAttribute(attribute)) {\n    return;\n  }\n\n  return element.getAttribute(attribute);\n}\n/**\n * Base class which takes one or more elements, adds event listeners to them,\n * and instantiates a new `ClipboardAction` on each click.\n */\n\n\nvar Clipboard = /*#__PURE__*/function (_Emitter) {\n  _inherits(Clipboard, _Emitter);\n\n  var _super = _createSuper(Clipboard);\n\n  /**\n   * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n   * @param {Object} options\n   */\n  function Clipboard(trigger, options) {\n    var _this;\n\n    _classCallCheck(this, Clipboard);\n\n    _this = _super.call(this);\n\n    _this.resolveOptions(options);\n\n    _this.listenClick(trigger);\n\n    return _this;\n  }\n  /**\n   * Defines if attributes would be resolved using internal setter functions\n   * or custom functions that were passed in the constructor.\n   * @param {Object} options\n   */\n\n\n  _createClass(Clipboard, [{\n    key: \"resolveOptions\",\n    value: function resolveOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n      this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n      this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n      this.container = clipboard_typeof(options.container) === 'object' ? options.container : document.body;\n    }\n    /**\n     * Adds a click event listener to the passed trigger.\n     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n     */\n\n  }, {\n    key: \"listenClick\",\n    value: function listenClick(trigger) {\n      var _this2 = this;\n\n      this.listener = listen_default()(trigger, 'click', function (e) {\n        return _this2.onClick(e);\n      });\n    }\n    /**\n     * Defines a new `ClipboardAction` on each click event.\n     * @param {Event} e\n     */\n\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      var trigger = e.delegateTarget || e.currentTarget;\n      var action = this.action(trigger) || 'copy';\n      var text = actions_default({\n        action: action,\n        container: this.container,\n        target: this.target(trigger),\n        text: this.text(trigger)\n      }); // Fires an event based on the copy operation result.\n\n      this.emit(text ? 'success' : 'error', {\n        action: action,\n        text: text,\n        trigger: trigger,\n        clearSelection: function clearSelection() {\n          if (trigger) {\n            trigger.focus();\n          }\n\n          window.getSelection().removeAllRanges();\n        }\n      });\n    }\n    /**\n     * Default `action` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultAction\",\n    value: function defaultAction(trigger) {\n      return getAttributeValue('action', trigger);\n    }\n    /**\n     * Default `target` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultTarget\",\n    value: function defaultTarget(trigger) {\n      var selector = getAttributeValue('target', trigger);\n\n      if (selector) {\n        return document.querySelector(selector);\n      }\n    }\n    /**\n     * Allow fire programmatically a copy action\n     * @param {String|HTMLElement} target\n     * @param {Object} options\n     * @returns Text copied.\n     */\n\n  }, {\n    key: \"defaultText\",\n\n    /**\n     * Default `text` lookup function.\n     * @param {Element} trigger\n     */\n    value: function defaultText(trigger) {\n      return getAttributeValue('text', trigger);\n    }\n    /**\n     * Destroy lifecycle.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.listener.destroy();\n    }\n  }], [{\n    key: \"copy\",\n    value: function copy(target) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        container: document.body\n      };\n      return actions_copy(target, options);\n    }\n    /**\n     * Allow fire programmatically a cut action\n     * @param {String|HTMLElement} target\n     * @returns Text cutted.\n     */\n\n  }, {\n    key: \"cut\",\n    value: function cut(target) {\n      return actions_cut(target);\n    }\n    /**\n     * Returns the support of the given action, or all actions if no action is\n     * given.\n     * @param {String} [action]\n     */\n\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n      var actions = typeof action === 'string' ? [action] : action;\n      var support = !!document.queryCommandSupported;\n      actions.forEach(function (action) {\n        support = support && !!document.queryCommandSupported(action);\n      });\n      return support;\n    }\n  }]);\n\n  return Clipboard;\n}((tiny_emitter_default()));\n\n/* harmony default export */ var clipboard = (Clipboard);\n\n/***/ }),\n\n/***/ 828:\n/***/ (function(module) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n\n/***/ 438:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar closest = __webpack_require__(828);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n\n/***/ 879:\n/***/ (function(__unused_webpack_module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar is = __webpack_require__(879);\nvar delegate = __webpack_require__(438);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t!function() {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = function(module) {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\tfunction() { return module['default']; } :\n/******/ \t\t\t\tfunction() { return module; };\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(686);\n/******/ })()\n.default;\n});","export function setWindow() {\n  // to disable context menu on the page\n  document.oncontextmenu = () => false;\n  window.addEventListener(\n    'contextmenu',\n    (e) => {\n      e.preventDefault();\n    },\n    false\n  );\n  window.onunhandledrejection = (windowEvent) => {\n    windowEvent.preventDefault();\n    const reason = windowEvent.reason;\n    const message = reason && (reason.stack || reason);\n    if (message && message.indexOf('blocked') > 0) {\n      console.warn('popup blocked');\n    } else {\n      console.warn('Unhandled rejection:', reason && (reason.stack || reason));\n    }\n  };\n}\n","import { browserStorage } from '../transition/browserStorage';\nimport { setWindow } from './setWindow';\nimport { env } from '../transition/env';\nimport { version } from './version';\n\nimport 'bulma/css/bulma.css';\nimport '../transition/css/courtHive.css';\nimport '../transition/css/swipeList.css';\nimport '../transition/css/icons.css';\n\nexport function setInitialState() {\n  console.log(`%cversion: ${version}`, 'color: lightblue');\n  const provider = browserStorage.get('mobile-provider');\n  if (provider) {\n    env.provider = provider;\n    const target: any = document.getElementById(`provider`);\n    if (target) target.value = provider;\n  }\n  setWindow();\n}\n","import { coms, sendKey, sendHistory, startBroadcast, disconnectSocket, connectSocket } from './coms';\nimport { app, env, restoreAppState, setOrientation, updateAppState } from './env';\nimport { configureViz, orientationEvent, vizUpdate } from './configureViz';\nimport { changeDisplay, viewManager } from './viewManager';\nimport { browserStorage } from './browserStorage';\nimport { registerEvents } from './registerEvents';\nimport { newMatch } from './displayMatchArchive';\nimport { touchManager } from './touchManager';\nimport { defineActionEvents } from './events';\nimport { generateRange } from './utilities';\nimport { version } from '../config/version';\nimport { modalHelp } from './modalHelp';\nimport { loadMatch } from './loadMatch';\nimport { closeModal } from './modals';\nimport clipboard from 'clipboard';\nimport { UUID } from './UUID';\nimport {\n  changePlayerName,\n  checkPlayerName,\n  loadDetails,\n  resetButtons,\n  swapServer,\n  visibleButtons,\n} from './displayUpdate';\n\nimport iocCodes from './ioc_codes.json';\nimport { setInitialState } from '../config/initialState';\n\nexport function init() {\n  window['dev'] = {\n    disconnectSocket,\n    connectSocket,\n    sendHistory,\n    viewManager,\n    version,\n    coms,\n    app,\n    env,\n  };\n\n  window.addEventListener(\n    'orientationchange',\n    function () {\n      orientationEvent();\n    },\n    false,\n  );\n  window.addEventListener(\n    'resize',\n    function () {\n      orientationEvent();\n    },\n    false,\n  );\n\n  const queryString: any = {};\n  const query = window.location.search.substring(1);\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i++) {\n    const pair = vars[i].split('=');\n    if (typeof queryString[pair[0]] === 'undefined') {\n      queryString[pair[0]] = pair[1];\n    } else if (typeof queryString[pair[0]] === 'string') {\n      const arr = [queryString[pair[0]], pair[1]];\n      queryString[pair[0]] = arr;\n    } else {\n      queryString[pair[0]].push(pair[1]);\n    }\n  }\n  history.pushState('', document.title, window.location.pathname);\n\n  touchManager.disableDrag();\n  registerEvents();\n\n  // dismiss notification of requirements\n  changeDisplay('none', 'welcome');\n\n  // initialize clipboard\n  const clip = new clipboard('.c2c');\n  clip.on('success', () => {\n    closeModal();\n  });\n\n  restoreAppState();\n  checkUserUUID();\n  if (app.broadcast && navigator.onLine) startBroadcast();\n\n  defineEntryEvents();\n  defineActionEvents();\n  touchManager.addSwipeTarget(document.getElementById('mainmenu'));\n\n  // populate drop down list box selectors\n  const select_seed = Array.from(document.querySelectorAll('.md_seed'));\n  select_seed.forEach((select: any) => {\n    generateRange(0, 32).forEach((i: number) => {\n      const optionValue = (i + 1).toString();\n      select.options[i + 1] = new Option(optionValue, optionValue);\n    });\n  });\n  const select_draw_position = Array.from(document.querySelectorAll('.md_draw_position'));\n  select_draw_position.forEach((select: any) => {\n    generateRange(0, 128).forEach((i) => {\n      const optionValue = (i + 1).toString();\n      select.options[i + 1] = new Option(optionValue, optionValue);\n    });\n  });\n  const select_ioc = Array.from(document.querySelectorAll('.md_ioc'));\n  select_ioc.forEach((select: any) => {\n    iocCodes.forEach((entry: any, index: number) => (select.options[index + 1] = new Option(entry.name, entry.ioc)));\n  });\n  // load Details to be sure that ioc data can be used to populate country\n  loadDetails();\n\n  setOrientation();\n  loadCurrent();\n  configureViz();\n  vizUpdate();\n\n  if (queryString.key) {\n    setTimeout(() => sendKey({ key: queryString.key }), 1000);\n  }\n\n  setInitialState();\n}\n\nfunction checkUserUUID() {\n  if (!app.user_uuid) {\n    app.user_uuid = UUID();\n    updateAppState();\n  }\n}\n\nfunction defineEntryEvents() {\n  const catchTab = (evt: any) => {\n    if (evt.which == 9) {\n      evt.preventDefault();\n    }\n  };\n  const playername = document.getElementById('playername');\n  if (playername) {\n    playername.addEventListener('keyup', checkPlayerName, false);\n    playername.addEventListener('keydown', catchTab, false);\n    playername.onblur = function () {\n      changePlayerName();\n    };\n    playername.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 100);\n    };\n  }\n  const team = document.getElementById('team');\n  if (team) {\n    team.onblur = function () {\n      changePlayerName();\n    };\n    team.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 100);\n    };\n  }\n\n  const playerRank = document.getElementById('player_rank');\n  if (playerRank) {\n    playerRank.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 300);\n    };\n  }\n\n  const playerWTN = document.getElementById('player_wtn');\n  if (playerWTN) {\n    playerWTN.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 300);\n    };\n  }\n\n  const playerUTR = document.getElementById('player_utr');\n  if (playerUTR) {\n    playerUTR.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 300);\n    };\n  }\n\n  const hold_targets = Array.from(document.querySelectorAll('.pressAndHold'));\n  Array.from(hold_targets).forEach((target) => touchManager.addPressAndHold(target));\n}\n\nfunction loadCurrent() {\n  const current_match_id = browserStorage.get('current_match');\n  if (!current_match_id) {\n    const match_archive = browserStorage.get('match_archive');\n    // only show quick start if this is first launch\n    newMatch();\n    if (!match_archive) modalHelp(true);\n  } else {\n    loadMatch(current_match_id);\n    swapServer();\n    resetButtons();\n    visibleButtons();\n  }\n}\n","export default \"__VITE_ASSET__Q_tt1iRc__\"","import chLogo from \"../../assets/images/courthive-transparent-logo.png\";\nimport \"../../styles/default.css\";\nexport function renderDefaultPage(display) {\n    if (display) {\n        document.querySelector(\"#app\").innerHTML = `\n  <div>\n    <a href=\"https://courthive.com\" target=\"_blank\">\n      <img src=\"${chLogo}\" class=\"logo\" alt=\"Vite logo\" />\n    </a>\n    <h1 class=\"name\">CourtHive</h1>\n  </div>\n`;\n    }\n}\n","export var PARAMETER_REGEXP = /([:*])(\\w+)/g;\nexport var REPLACE_VARIABLE_REGEXP = \"([^/]+)\";\nexport var WILDCARD_REGEXP = /\\*/g;\nexport var REPLACE_WILDCARD = \"?(?:.*)\";\nexport var NOT_SURE_REGEXP = /\\/\\?/g;\nexport var REPLACE_NOT_SURE = \"/?([^/]+|)\";\nexport var START_BY_SLASH_REGEXP = \"(?:/^|^)\";\nexport var MATCH_REGEXP_FLAGS = \"\";","import { PARAMETER_REGEXP, WILDCARD_REGEXP, REPLACE_VARIABLE_REGEXP, REPLACE_WILDCARD, START_BY_SLASH_REGEXP, MATCH_REGEXP_FLAGS, REPLACE_NOT_SURE, NOT_SURE_REGEXP } from \"./constants\";\nexport function getCurrentEnvURL(fallback) {\n  if (fallback === void 0) {\n    fallback = \"/\";\n  }\n\n  if (windowAvailable()) {\n    return location.pathname + location.search + location.hash;\n  }\n\n  return fallback;\n}\nexport function clean(s) {\n  return s.replace(/\\/+$/, \"\").replace(/^\\/+/, \"\");\n}\nexport function isString(s) {\n  return typeof s === \"string\";\n}\nexport function isFunction(s) {\n  return typeof s === \"function\";\n}\nexport function extractHashFromURL(url) {\n  if (url && url.indexOf(\"#\") >= 0) {\n    return url.split(\"#\").pop() || \"\";\n  }\n\n  return \"\";\n}\nexport function regExpResultToParams(match, names) {\n  if (names.length === 0) return null;\n  if (!match) return null;\n  return match.slice(1, match.length).reduce(function (params, value, index) {\n    if (params === null) params = {};\n    params[names[index]] = decodeURIComponent(value);\n    return params;\n  }, null);\n}\nexport function extractGETParameters(url) {\n  var tmp = clean(url).split(/\\?(.*)?$/);\n  return [clean(tmp[0]), tmp.slice(1).join(\"\")];\n}\nexport function parseQuery(queryString) {\n  var query = {};\n  var pairs = queryString.split(\"&\");\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i].split(\"=\");\n\n    if (pair[0] !== \"\") {\n      var key = decodeURIComponent(pair[0]);\n\n      if (!query[key]) {\n        query[key] = decodeURIComponent(pair[1] || \"\");\n      } else {\n        if (!Array.isArray(query[key])) query[key] = [query[key]];\n        query[key].push(decodeURIComponent(pair[1] || \"\"));\n      }\n    }\n  }\n\n  return query;\n}\nexport function matchRoute(context, route) {\n  var _extractGETParameters = extractGETParameters(clean(context.currentLocationPath)),\n      current = _extractGETParameters[0],\n      GETParams = _extractGETParameters[1];\n\n  var params = GETParams === \"\" ? null : parseQuery(GETParams);\n  var paramNames = [];\n  var pattern;\n\n  if (isString(route.path)) {\n    pattern = START_BY_SLASH_REGEXP + clean(route.path).replace(PARAMETER_REGEXP, function (full, dots, name) {\n      paramNames.push(name);\n      return REPLACE_VARIABLE_REGEXP;\n    }).replace(WILDCARD_REGEXP, REPLACE_WILDCARD).replace(NOT_SURE_REGEXP, REPLACE_NOT_SURE) + \"$\";\n\n    if (clean(route.path) === \"\") {\n      if (clean(current) === \"\") {\n        return {\n          url: current,\n          queryString: GETParams,\n          hashString: extractHashFromURL(context.to),\n          route: route,\n          data: null,\n          params: params\n        };\n      }\n    }\n  } else {\n    pattern = route.path;\n  }\n\n  var regexp = new RegExp(pattern, MATCH_REGEXP_FLAGS);\n  var match = current.match(regexp);\n\n  if (match) {\n    var data = isString(route.path) ? regExpResultToParams(match, paramNames) : match.groups ? match.groups : match.slice(1);\n    return {\n      url: clean(current.replace(new RegExp(\"^\" + context.instance.root), \"\")),\n      queryString: GETParams,\n      hashString: extractHashFromURL(context.to),\n      route: route,\n      data: data,\n      params: params\n    };\n  }\n\n  return false;\n}\nexport function pushStateAvailable() {\n  return !!(typeof window !== \"undefined\" && window.history && window.history.pushState);\n}\nexport function undefinedOrTrue(obj, key) {\n  return typeof obj[key] === \"undefined\" || obj[key] === true;\n}\nexport function parseNavigateOptions(source) {\n  if (!source) return {};\n  var pairs = source.split(\",\");\n  var options = {};\n  var resolveOptions;\n  pairs.forEach(function (str) {\n    var temp = str.split(\":\").map(function (v) {\n      return v.replace(/(^ +| +$)/g, \"\");\n    });\n\n    switch (temp[0]) {\n      case \"historyAPIMethod\":\n        options.historyAPIMethod = temp[1];\n        break;\n\n      case \"resolveOptionsStrategy\":\n        if (!resolveOptions) resolveOptions = {};\n        resolveOptions.strategy = temp[1];\n        break;\n\n      case \"resolveOptionsHash\":\n        if (!resolveOptions) resolveOptions = {};\n        resolveOptions.hash = temp[1] === \"true\";\n        break;\n\n      case \"updateBrowserURL\":\n      case \"callHandler\":\n      case \"updateState\":\n      case \"force\":\n        options[temp[0]] = temp[1] === \"true\";\n        break;\n    }\n  });\n\n  if (resolveOptions) {\n    options.resolveOptions = resolveOptions;\n  }\n\n  return options;\n}\nexport function windowAvailable() {\n  return typeof window !== \"undefined\";\n}\nexport function accumulateHooks(hooks, result) {\n  if (hooks === void 0) {\n    hooks = [];\n  }\n\n  if (result === void 0) {\n    result = {};\n  }\n\n  hooks.filter(function (h) {\n    return h;\n  }).forEach(function (h) {\n    [\"before\", \"after\", \"already\", \"leave\"].forEach(function (type) {\n      if (h[type]) {\n        if (!result[type]) result[type] = [];\n        result[type].push(h[type]);\n      }\n    });\n  });\n  return result;\n}","export default function Q(funcs, c, done) {\n  var context = c || {};\n  var idx = 0;\n\n  (function next() {\n    if (!funcs[idx]) {\n      if (done) {\n        done(context);\n      }\n\n      return;\n    }\n\n    if (Array.isArray(funcs[idx])) {\n      funcs.splice.apply(funcs, [idx, 1].concat(funcs[idx][0](context) ? funcs[idx][1] : funcs[idx][2]));\n      next();\n    } else {\n      // console.log(funcs[idx].name + \" / \" + JSON.stringify(context));\n      // console.log(funcs[idx].name);\n      funcs[idx](context, function (moveForward) {\n        if (typeof moveForward === \"undefined\" || moveForward === true) {\n          idx += 1;\n          next();\n        } else if (done) {\n          done(context);\n        }\n      });\n    }\n  })();\n}\n\nQ[\"if\"] = function (condition, one, two) {\n  if (!Array.isArray(one)) one = [one];\n  if (!Array.isArray(two)) two = [two];\n  return [condition, one, two];\n};","import { getCurrentEnvURL } from \"../utils\";\nexport default function setLocationPath(context, done) {\n  if (typeof context.currentLocationPath === \"undefined\") {\n    context.currentLocationPath = context.to = getCurrentEnvURL(context.instance.root);\n  }\n\n  context.currentLocationPath = context.instance._checkForAHash(context.currentLocationPath);\n  done();\n}","import { matchRoute } from \"../utils\";\nexport default function matchPathToRegisteredRoutes(context, done) {\n  for (var i = 0; i < context.instance.routes.length; i++) {\n    var route = context.instance.routes[i];\n    var match = matchRoute(context, route);\n\n    if (match) {\n      if (!context.matches) context.matches = [];\n      context.matches.push(match);\n\n      if (context.resolveOptions.strategy === \"ONE\") {\n        done();\n        return;\n      }\n    }\n  }\n\n  done();\n}","export default function checkForDeprecationMethods(context, done) {\n  if (context.navigateOptions) {\n    if (typeof context.navigateOptions[\"shouldResolve\"] !== \"undefined\") {\n      console.warn(\"\\\"shouldResolve\\\" is deprecated. Please check the documentation.\");\n    }\n\n    if (typeof context.navigateOptions[\"silent\"] !== \"undefined\") {\n      console.warn(\"\\\"silent\\\" is deprecated. Please check the documentation.\");\n    }\n  }\n\n  done();\n}","export default function checkForForceOp(context, done) {\n  if (context.navigateOptions.force === true) {\n    context.instance._setCurrent([context.instance._pathToMatchObject(context.to)]);\n\n    done(false);\n  } else {\n    done();\n  }\n}","import { undefinedOrTrue, pushStateAvailable, windowAvailable } from \"../utils\";\nvar isWindowAvailable = windowAvailable();\nvar isPushStateAvailable = pushStateAvailable();\nexport default function updateBrowserURL(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"updateBrowserURL\")) {\n    var value = (\"/\" + context.to).replace(/\\/\\//g, \"/\"); // making sure that we don't have two slashes\n\n    var isItUsingHash = isWindowAvailable && context.resolveOptions && context.resolveOptions.hash === true;\n\n    if (isPushStateAvailable) {\n      history[context.navigateOptions.historyAPIMethod || \"pushState\"](context.navigateOptions.stateObj || {}, context.navigateOptions.title || \"\", isItUsingHash ? \"#\" + value : value); // This is to solve a nasty bug where the page doesn't scroll to the anchor.\n      // We set a microtask to update the hash only.\n\n      if (location && location.hash) {\n        context.instance.__freezeListening = true;\n        setTimeout(function () {\n          if (!isItUsingHash) {\n            var tmp = location.hash;\n            location.hash = \"\";\n            location.hash = tmp;\n          }\n\n          context.instance.__freezeListening = false;\n        }, 1);\n      }\n    } else if (isWindowAvailable) {\n      window.location.href = context.to;\n    }\n  }\n\n  done();\n}","import Q from \"../Q\";\nimport { undefinedOrTrue } from \"../utils\";\nexport default function checkForLeaveHook(context, done) {\n  var instance = context.instance;\n\n  if (!instance.lastResolved()) {\n    done();\n    return;\n  }\n\n  Q(instance.lastResolved().map(function (oldMatch) {\n    return function (_, leaveLoopDone) {\n      // no leave hook\n      if (!oldMatch.route.hooks || !oldMatch.route.hooks.leave) {\n        leaveLoopDone();\n        return;\n      }\n\n      var runHook = false;\n      var newLocationVSOldMatch = context.instance.matchLocation(oldMatch.route.path, context.currentLocationPath, false);\n\n      if (oldMatch.route.path !== \"*\") {\n        runHook = !newLocationVSOldMatch;\n      } else {\n        var someOfTheLastOnesMatch = context.matches ? context.matches.find(function (match) {\n          return oldMatch.route.path === match.route.path;\n        }) : false;\n        runHook = !someOfTheLastOnesMatch;\n      }\n\n      if (undefinedOrTrue(context.navigateOptions, \"callHooks\") && runHook) {\n        Q(oldMatch.route.hooks.leave.map(function (f) {\n          // just so we match the Q interface\n          return function (_, d) {\n            return f(function (shouldStop) {\n              if (shouldStop === false) {\n                context.instance.__markAsClean(context);\n              } else {\n                d();\n              }\n            }, context.matches && context.matches.length > 0 ? context.matches.length === 1 ? context.matches[0] : context.matches : undefined);\n          };\n        }).concat([function () {\n          return leaveLoopDone();\n        }]));\n        return;\n      } else {\n        leaveLoopDone();\n      }\n    };\n  }), {}, function () {\n    return done();\n  });\n}","import Q from \"../Q\";\nimport { undefinedOrTrue } from \"../utils\";\nexport default function checkForBeforeHook(context, done) {\n  if (context.match.route.hooks && context.match.route.hooks.before && undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n    Q(context.match.route.hooks.before.map(function (f) {\n      // just so we match the Q interface\n      return function beforeHookInternal(_, d) {\n        return f(function (shouldStop) {\n          if (shouldStop === false) {\n            context.instance.__markAsClean(context);\n          } else {\n            d();\n          }\n        }, context.match);\n      };\n    }).concat([function () {\n      return done();\n    }]));\n  } else {\n    done();\n  }\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function callHandler(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"callHandler\")) {\n    context.match.route.handler(context.match);\n  }\n\n  context.instance.updatePageLinks();\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function checkForAfterHook(context, done) {\n  if (context.match.route.hooks && context.match.route.hooks.after && undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n    context.match.route.hooks.after.forEach(function (f) {\n      return f(context.match);\n    });\n  }\n\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function checkForAlreadyHook(context, done) {\n  var current = context.instance.lastResolved();\n\n  if (current && current[0] && current[0].route === context.match.route && current[0].url === context.match.url && current[0].queryString === context.match.queryString) {\n    current.forEach(function (c) {\n      if (c.route.hooks && c.route.hooks.already) {\n        if (undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n          c.route.hooks.already.forEach(function (f) {\n            return f(context.match);\n          });\n        }\n      }\n    });\n    done(false);\n    return;\n  }\n\n  done();\n}","import { parseQuery, extractGETParameters, clean, extractHashFromURL } from \"../utils\";\nexport default function checkForNotFoundHandler(context, done) {\n  var notFoundRoute = context.instance._notFoundRoute;\n\n  if (notFoundRoute) {\n    context.notFoundHandled = true;\n\n    var _extractGETParameters = extractGETParameters(context.currentLocationPath),\n        url = _extractGETParameters[0],\n        queryString = _extractGETParameters[1];\n\n    var hashString = extractHashFromURL(context.to);\n    notFoundRoute.path = clean(url);\n    var notFoundMatch = {\n      url: notFoundRoute.path,\n      queryString: queryString,\n      hashString: hashString,\n      data: null,\n      route: notFoundRoute,\n      params: queryString !== \"\" ? parseQuery(queryString) : null\n    };\n    context.matches = [notFoundMatch];\n    context.match = notFoundMatch;\n  }\n\n  done();\n}","export default function errorOut(context, done) {\n  if (!context.resolveOptions || context.resolveOptions.noMatchWarning === false || typeof context.resolveOptions.noMatchWarning === \"undefined\") console.warn(\"Navigo: \\\"\" + context.currentLocationPath + \"\\\" didn't match any of the registered routes.\");\n  done();\n}","export default function flushCurrent(context, done) {\n  context.instance._setCurrent(null);\n\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function updateState(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"updateState\")) {\n    context.instance._setCurrent(context.matches);\n  }\n\n  done();\n}","import Q from \"./Q\";\nimport checkForLeaveHook from \"./middlewares/checkForLeaveHook\";\nimport checkForBeforeHook from \"./middlewares/checkForBeforeHook\";\nimport callHandler from \"./middlewares/callHandler\";\nimport checkForAfterHook from \"./middlewares/checkForAfterHook\";\nimport checkForAlreadyHook from \"./middlewares/checkForAlreadyHook\";\nimport checkForNotFoundHandler from \"./middlewares/checkForNotFoundHandler\";\nimport errorOut from \"./middlewares/errorOut\";\nimport flushCurrent from \"./middlewares/flushCurrent\";\nimport updateState from \"./middlewares/updateState\";\nexport var foundLifecycle = [checkForAlreadyHook, checkForBeforeHook, callHandler, checkForAfterHook];\nexport var notFoundLifeCycle = [checkForLeaveHook, checkForNotFoundHandler, Q[\"if\"](function (_ref) {\n  var notFoundHandled = _ref.notFoundHandled;\n  return notFoundHandled;\n}, foundLifecycle.concat([updateState]), [errorOut, flushCurrent])];","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport Q from \"../Q\";\nimport { foundLifecycle } from \"../lifecycles\";\nimport updateState from \"./updateState\";\nimport checkForLeaveHook from \"./checkForLeaveHook\";\nexport default function processMatches(context, done) {\n  var idx = 0;\n\n  function nextMatch() {\n    if (idx === context.matches.length) {\n      updateState(context, done);\n      return;\n    }\n\n    Q(foundLifecycle, _extends({}, context, {\n      match: context.matches[idx]\n    }), function end() {\n      idx += 1;\n      nextMatch();\n    });\n  }\n\n  checkForLeaveHook(context, nextMatch);\n}","export default function waitingList(context) {\n  context.instance.__markAsClean(context);\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { pushStateAvailable, matchRoute, parseQuery, extractGETParameters, isFunction, isString, clean, parseNavigateOptions, windowAvailable, getCurrentEnvURL, accumulateHooks, extractHashFromURL } from \"./utils\";\nimport Q from \"./Q\";\nimport setLocationPath from \"./middlewares/setLocationPath\";\nimport matchPathToRegisteredRoutes from \"./middlewares/matchPathToRegisteredRoutes\";\nimport checkForDeprecationMethods from \"./middlewares/checkForDeprecationMethods\";\nimport checkForForceOp from \"./middlewares/checkForForceOp\";\nimport updateBrowserURL from \"./middlewares/updateBrowserURL\";\nimport processMatches from \"./middlewares/processMatches\";\nimport waitingList from \"./middlewares/waitingList\";\nimport { notFoundLifeCycle } from \"./lifecycles\";\nvar DEFAULT_LINK_SELECTOR = \"[data-navigo]\";\nexport default function Navigo(appRoute, options) {\n  var DEFAULT_RESOLVE_OPTIONS = options || {\n    strategy: \"ONE\",\n    hash: false,\n    noMatchWarning: false,\n    linksSelector: DEFAULT_LINK_SELECTOR\n  };\n  var self = this;\n  var root = \"/\";\n  var current = null;\n  var routes = [];\n  var destroyed = false;\n  var genericHooks;\n  var isPushStateAvailable = pushStateAvailable();\n  var isWindowAvailable = windowAvailable();\n\n  if (!appRoute) {\n    console.warn('Navigo requires a root path in its constructor. If not provided will use \"/\" as default.');\n  } else {\n    root = clean(appRoute);\n  }\n\n  function _checkForAHash(url) {\n    if (url.indexOf(\"#\") >= 0) {\n      if (DEFAULT_RESOLVE_OPTIONS.hash === true) {\n        url = url.split(\"#\")[1] || \"/\";\n      } else {\n        url = url.split(\"#\")[0];\n      }\n    }\n\n    return url;\n  }\n\n  function composePathWithRoot(path) {\n    return clean(root + \"/\" + clean(path));\n  }\n\n  function createRoute(path, handler, hooks, name) {\n    path = isString(path) ? composePathWithRoot(path) : path;\n    return {\n      name: name || clean(String(path)),\n      path: path,\n      handler: handler,\n      hooks: accumulateHooks(hooks)\n    };\n  } // public APIs\n\n\n  function on(path, handler, hooks) {\n    var _this = this;\n\n    if (typeof path === \"object\" && !(path instanceof RegExp)) {\n      Object.keys(path).forEach(function (p) {\n        if (typeof path[p] === \"function\") {\n          _this.on(p, path[p]);\n        } else {\n          var _path$p = path[p],\n              _handler = _path$p.uses,\n              name = _path$p.as,\n              _hooks = _path$p.hooks;\n          routes.push(createRoute(p, _handler, [genericHooks, _hooks], name));\n        }\n      });\n      return this;\n    } else if (typeof path === \"function\") {\n      hooks = handler;\n      handler = path;\n      path = root;\n    }\n\n    routes.push(createRoute(path, handler, [genericHooks, hooks]));\n    return this;\n  }\n\n  function resolve(to, options) {\n    if (self.__dirty) {\n      self.__waiting.push(function () {\n        return self.resolve(to, options);\n      });\n\n      return;\n    } else {\n      self.__dirty = true;\n    }\n\n    to = to ? clean(root) + \"/\" + clean(to) : undefined; // console.log(\"-- resolve --> \" + to, self.__dirty);\n\n    var context = {\n      instance: self,\n      to: to,\n      currentLocationPath: to,\n      navigateOptions: {},\n      resolveOptions: _extends({}, DEFAULT_RESOLVE_OPTIONS, options)\n    };\n    Q([setLocationPath, matchPathToRegisteredRoutes, Q[\"if\"](function (_ref) {\n      var matches = _ref.matches;\n      return matches && matches.length > 0;\n    }, processMatches, notFoundLifeCycle)], context, waitingList);\n    return context.matches ? context.matches : false;\n  }\n\n  function navigate(to, navigateOptions) {\n    // console.log(\"-- navigate --> \" + to, self.__dirty);\n    if (self.__dirty) {\n      self.__waiting.push(function () {\n        return self.navigate(to, navigateOptions);\n      });\n\n      return;\n    } else {\n      self.__dirty = true;\n    }\n\n    to = clean(root) + \"/\" + clean(to);\n    var context = {\n      instance: self,\n      to: to,\n      navigateOptions: navigateOptions || {},\n      resolveOptions: navigateOptions && navigateOptions.resolveOptions ? navigateOptions.resolveOptions : DEFAULT_RESOLVE_OPTIONS,\n      currentLocationPath: _checkForAHash(to)\n    };\n    Q([checkForDeprecationMethods, checkForForceOp, matchPathToRegisteredRoutes, Q[\"if\"](function (_ref2) {\n      var matches = _ref2.matches;\n      return matches && matches.length > 0;\n    }, processMatches, notFoundLifeCycle), updateBrowserURL, waitingList], context, waitingList);\n  }\n\n  function navigateByName(name, data, options) {\n    var url = generate(name, data);\n\n    if (url !== null) {\n      navigate(url.replace(new RegExp(\"^/?\" + root), \"\"), options);\n      return true;\n    }\n\n    return false;\n  }\n\n  function off(what) {\n    this.routes = routes = routes.filter(function (r) {\n      if (isString(what)) {\n        return clean(r.path) !== clean(what);\n      } else if (isFunction(what)) {\n        return what !== r.handler;\n      }\n\n      return String(r.path) !== String(what);\n    });\n    return this;\n  }\n\n  function listen() {\n    if (isPushStateAvailable) {\n      this.__popstateListener = function () {\n        if (!self.__freezeListening) {\n          resolve();\n        }\n      };\n\n      window.addEventListener(\"popstate\", this.__popstateListener);\n    }\n  }\n\n  function destroy() {\n    this.routes = routes = [];\n\n    if (isPushStateAvailable) {\n      window.removeEventListener(\"popstate\", this.__popstateListener);\n    }\n\n    this.destroyed = destroyed = true;\n  }\n\n  function notFound(handler, hooks) {\n    self._notFoundRoute = createRoute(\"*\", handler, [genericHooks, hooks], \"__NOT_FOUND__\");\n    return this;\n  }\n\n  function updatePageLinks() {\n    if (!isWindowAvailable) return;\n    findLinks().forEach(function (link) {\n      if (\"false\" === link.getAttribute(\"data-navigo\") || \"_blank\" === link.getAttribute(\"target\")) {\n        if (link.hasListenerAttached) {\n          link.removeEventListener(\"click\", link.navigoHandler);\n        }\n\n        return;\n      }\n\n      if (!link.hasListenerAttached) {\n        link.hasListenerAttached = true;\n\n        link.navigoHandler = function (e) {\n          if ((e.ctrlKey || e.metaKey) && e.target.tagName.toLowerCase() === \"a\") {\n            return false;\n          }\n\n          var location = link.getAttribute(\"href\");\n\n          if (typeof location === \"undefined\" || location === null) {\n            return false;\n          } // handling absolute paths\n\n\n          if (location.match(/^(http|https)/) && typeof URL !== \"undefined\") {\n            try {\n              var u = new URL(location);\n              location = u.pathname + u.search;\n            } catch (err) {}\n          }\n\n          var options = parseNavigateOptions(link.getAttribute(\"data-navigo-options\"));\n\n          if (!destroyed) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.navigate(clean(location), options);\n          }\n        };\n\n        link.addEventListener(\"click\", link.navigoHandler);\n      }\n    });\n    return self;\n  }\n\n  function findLinks() {\n    if (isWindowAvailable) {\n      return [].slice.call(document.querySelectorAll(DEFAULT_RESOLVE_OPTIONS.linksSelector || DEFAULT_LINK_SELECTOR));\n    }\n\n    return [];\n  }\n\n  function link(path) {\n    return \"/\" + root + \"/\" + clean(path);\n  }\n\n  function setGenericHooks(hooks) {\n    genericHooks = hooks;\n    return this;\n  }\n\n  function lastResolved() {\n    return current;\n  }\n\n  function generate(name, data, options) {\n    var route = routes.find(function (r) {\n      return r.name === name;\n    });\n    var result = null;\n\n    if (route) {\n      result = route.path;\n\n      if (data) {\n        for (var key in data) {\n          result = result.replace(\":\" + key, data[key]);\n        }\n      }\n\n      result = !result.match(/^\\//) ? \"/\" + result : result;\n    }\n\n    if (result && options && !options.includeRoot) {\n      result = result.replace(new RegExp(\"^/\" + root), \"\");\n    }\n\n    return result;\n  }\n\n  function getLinkPath(link) {\n    return link.getAttribute(\"href\");\n  }\n\n  function pathToMatchObject(path) {\n    var _extractGETParameters = extractGETParameters(clean(path)),\n        url = _extractGETParameters[0],\n        queryString = _extractGETParameters[1];\n\n    var params = queryString === \"\" ? null : parseQuery(queryString);\n    var hashString = extractHashFromURL(path);\n    var route = createRoute(url, function () {}, [genericHooks], url);\n    return {\n      url: url,\n      queryString: queryString,\n      hashString: hashString,\n      route: route,\n      data: null,\n      params: params\n    };\n  }\n\n  function getCurrentLocation() {\n    return pathToMatchObject(clean(getCurrentEnvURL(root)).replace(new RegExp(\"^\" + root), \"\"));\n  }\n\n  function directMatchWithRegisteredRoutes(path) {\n    var context = {\n      instance: self,\n      currentLocationPath: path,\n      to: path,\n      navigateOptions: {},\n      resolveOptions: DEFAULT_RESOLVE_OPTIONS\n    };\n    matchPathToRegisteredRoutes(context, function () {});\n    return context.matches ? context.matches : false;\n  }\n\n  function directMatchWithLocation(path, currentLocation, annotatePathWithRoot) {\n    if (typeof currentLocation !== \"undefined\" && (typeof annotatePathWithRoot === \"undefined\" || annotatePathWithRoot)) {\n      currentLocation = composePathWithRoot(currentLocation);\n    }\n\n    var context = {\n      instance: self,\n      to: currentLocation,\n      currentLocationPath: currentLocation\n    };\n    setLocationPath(context, function () {});\n\n    if (typeof path === \"string\") {\n      path = typeof annotatePathWithRoot === \"undefined\" || annotatePathWithRoot ? composePathWithRoot(path) : path;\n    }\n\n    var match = matchRoute(context, {\n      name: String(path),\n      path: path,\n      handler: function handler() {},\n      hooks: {}\n    });\n    return match ? match : false;\n  }\n\n  function addHook(type, route, func) {\n    if (typeof route === \"string\") {\n      route = getRoute(route);\n    }\n\n    if (route) {\n      if (!route.hooks[type]) route.hooks[type] = [];\n      route.hooks[type].push(func);\n      return function () {\n        route.hooks[type] = route.hooks[type].filter(function (f) {\n          return f !== func;\n        });\n      };\n    } else {\n      console.warn(\"Route doesn't exists: \" + route);\n    }\n\n    return function () {};\n  }\n\n  function getRoute(nameOrHandler) {\n    if (typeof nameOrHandler === \"string\") {\n      return routes.find(function (r) {\n        return r.name === composePathWithRoot(nameOrHandler);\n      });\n    }\n\n    return routes.find(function (r) {\n      return r.handler === nameOrHandler;\n    });\n  }\n\n  function __markAsClean(context) {\n    context.instance.__dirty = false;\n\n    if (context.instance.__waiting.length > 0) {\n      context.instance.__waiting.shift()();\n    }\n  }\n\n  this.root = root;\n  this.routes = routes;\n  this.destroyed = destroyed;\n  this.current = current;\n  this.__freezeListening = false;\n  this.__waiting = [];\n  this.__dirty = false;\n  this.__markAsClean = __markAsClean;\n  this.on = on;\n  this.off = off;\n  this.resolve = resolve;\n  this.navigate = navigate;\n  this.navigateByName = navigateByName;\n  this.destroy = destroy;\n  this.notFound = notFound;\n  this.updatePageLinks = updatePageLinks;\n  this.link = link;\n  this.hooks = setGenericHooks;\n\n  this.extractGETParameters = function (url) {\n    return extractGETParameters(_checkForAHash(url));\n  };\n\n  this.lastResolved = lastResolved;\n  this.generate = generate;\n  this.getLinkPath = getLinkPath;\n  this.match = directMatchWithRegisteredRoutes;\n  this.matchLocation = directMatchWithLocation;\n  this.getCurrentLocation = getCurrentLocation;\n  this.addBeforeHook = addHook.bind(this, \"before\");\n  this.addAfterHook = addHook.bind(this, \"after\");\n  this.addAlreadyHook = addHook.bind(this, \"already\");\n  this.addLeaveHook = addHook.bind(this, \"leave\");\n  this.getRoute = getRoute;\n  this._pathToMatchObject = pathToMatchObject;\n  this._clean = clean;\n  this._checkForAHash = _checkForAHash;\n\n  this._setCurrent = function (c) {\n    return current = self.current = c;\n  };\n\n  listen.call(this);\n  updatePageLinks.call(this);\n}","import { renderDefaultPage } from \"../pages/courthive/default\";\nimport Navigo from \"navigo\";\n\nexport function router() {\n  const routerRoot = window.location.host.startsWith(\"localhost\")\n    ? \"/\"\n    : process.env.PUBLIC_URL ?? \"/\";\n\n  const useHash = true;\n  const router = new Navigo(useHash ? \"/\" : `/${routerRoot}`, {\n    hash: useHash,\n  });\n  router.on(`/default`, () => renderDefaultPage(false));\n\n  router.notFound(() => {\n    router.navigate(\"/default\");\n  });\n  router.resolve();\n}\n","import { init } from './transition/init.ts';\nimport { router } from './router/router';\n\ninit();\nrouter();\n"],"names":["isJSON","str","showModal","text","data","modalText","c2c","modal","firstAndLast","value","parts","display","getOpponents","match","format","sides","e","teamName","side","attemptJSONparse","formatDate","date","separator","d","month","day","year","generateRange","start","end","_","k","findUpClass","el","class_name","_hasLocalStorageSupport","_readCookie","name","nameEQ","ca","i","c","_writeCookie","days","expiration","browserStorage","umo","defaultPointParser","formats","type","code","description","tiebreak","hasDecider","threshold","minDiff","children","decidingChild","hasType","hasCode","index","object","parent_object","child","common","so","fx","action","episode","set","points","point","point_history","counters","score","map","team","counter","force","beyondDoubleThreshold","last_child","descendent","last_first_service","next_first_service","min_diff","countersAtValue","deciding_child_required","total_children","new_child","source_format","copyAttributes","source","target","attributes","attribute","addPoint","server","points_to_game","has_game_point","points_to_set","values","last_point","last_points","attempt","change","p","f","result","player","points_to_player","added","rejected","indices","numbersArray","past_threshold","value_difference","winner","v","m","progression","adProgression","noAdProgression","key","point_value","count","undo","undo_actions","undone","common_episode","last_child_complete","params","perspective","loser","pts","deciding_game","score_difference","deciding_game_format_required","games_to_set","player_score","opponent_score","last_game","player_games_to_set","points_needed","formatScore","p0score","p1score","t0score","t1score","last_game_score","tiebreak_score","game","deciding_point","scoreboard","opponent_points","opponent_point","teams","score_object","winning_team","serving_team","parseCode","parseScore","upper_code","modifier","last_score","combinedTotal","a","b","last_values","mf","sf","gf","plural","fo","format_type","players","has_decider","number_of_players","addPoint_events","undo_events","reset_events","metadata","stat_points","last_episode","filtered_stats","accessors","order","changeOrder","birth","playerId","hand","seed","rank","age","entry","ioc","draw_position","wtn","utr","id","definition","tuid","start_date","tour","surface","in_out","draw","draw_size","round","level","muid","gender","court","start_time","end_time","duration","status","umpire","official_score","first_service","calcTiebreakService","submitted","counterpart","sameOrder","o","notXinY","x","y","n","no_format_change","new_teams","serviceToOpponent","opponents","sameTeam","s","number","calcNext","last_position","pos","next_position","last_service","pub","setServiceOrder","existing_order","new_order","addEvent","add_event","undoEvent","undo_event","resetEvent","reset_event","clearEvents","parser","service","history","set_filter","calculatedStats","episodes","server_team","team_winner","team_loser","addStat","grouping","group","stat","stats","calculated_stats","reduceComponents","components","component","component_team","numeratorDenominator","stat_obj","numerator","denominator","displayPct","pct","stat_calcs","current","max_consecutive","consecutive","diff","point_counts","total_points","teams_counters","required_counters","team_stats","mo","ch_version","charts","app","settings","env","c1","c2","c3","buttons","options","device","default_players","clearActionEvents","updatePositions","left_side","right_side","updateMatchArchive","player_names","p1","p2","element","match_id","match_archive","match_object","restoreAppState","app_settings","em","app_state","updateAppState","setOrientation","groupGames","point_episodes","games","game_counter","current_game","closeModal","updateScore","sets_counter","games_counter","field","sets","max_games","loadDetails","detail","target_id","match_details","tid","tournament","stateChangeEvent","updateState","visibleButtons","div","status_message","statusMessage","swapServer","resetButtons","server_side","receiver_side","server_mode","server_fault","server_ace","server_let","receiver_mode","receiver_ufe","receiver_winner","receiver_forced","game_number","swapSides","setCourtSide","changeTextColor","changeClassDisplay","classes","obj","className","checkPlayerName","keypress","player_hand","changePlayerName","player_name","update","editMatchDetails","matchDetails","detailContent","exportImage","recycleImage","modalExport","selector","match_data","header","save","copy","modaltext","formatChangePossible","displayPointHistory","html","gameEntry","matchDuration","phFrame","game_score","servergame","pointEntry","evenodd","point_score","player_initials","shot_by","point_hand","point_result","point_description","rally","timestamps","seconds","HHMMSS","sec_num","hours","minutes","displayFormats","format_types","formatEntry","matchFormatList","ascending$1","bisector","compare","ascendingComparator","lo","hi","mid","ascending","ascendingBisect","bisectRight","sequence","stop","step","range","e10","e5","e2","ticks","tickStep","step0","step1","error","slice","identity$2","top","right","bottom","left","epsilon","translateX","scale0","scale1","translateY","center","scale","offset","entering","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","context","identity","spacing","transform","range0","range1","position","selection","path","tick","tickExit","tickEnter","line","axisBottom","axisLeft","noop","dispatch","t","Dispatch","parseTypenames","typenames","types","typename","callback","T","get","that","args","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","creator","nextId","Local","node","matcher","vendorMatches","matcher$1","filterEvents","filterContextListener","listener","contextListener","event","related","event1","onRemove","on","j","onAdd","capture","wrap","selection_on","none","selection_select","select","groups","subgroups","subgroup","subnode","Selection","empty","selectorAll","selection_selectAll","parents","selection_filter","sparse","selection_enter","EnterNode","parent","datum","next","constant$3","keyPrefix","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_merge","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","window$1","styleRemove","styleConstant","priority","styleFunction","selection_style","defaultView","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_datum","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","root","selectAll","define","constructor","factory","prototype","extend","Color","darker","brighter","reI","reN","reP","reHex3","reHex6","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","Rgb","rgbn","rgba","hsla","r","g","rgbConvert","rgb","opacity","h","l","Hsl","hslConvert","min","max","hsl","m2","hsl2rgb","deg2rad","rad2deg","Kn","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","rgb2xyz","xyz2lab","z","lab","lab2xyz","xyz2rgb","hclConvert","hcl","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","constant$2","linear","exponential","hue","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","array$1","nb","na","reinterpolate","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","interpolateValue","array","interpolateRound","degrees","decompose","scaleX","scaleY","skewX","cssNode","cssRoot","cssView","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","interpolateTransformCss","interpolateTransformSvg","colorHcl","hcl$1","cubehelixGamma","colorCubehelix","cubehelixLong","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","self","tween","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","interpolateNumber","value1","value00","interpolate0","value0","value10","transition_attr","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","style","styleRemoveEnd","transition_style","styleTween","transition_styleTween","transition_text","transition_transition","id0","id1","newId","selection_prototype","cubicInOut","exponent","custom","polyIn","polyOut","polyInOut","overshoot","backIn","backOut","backInOut","tau","amplitude","period","elasticIn","elasticOut","elasticInOut","defaultTiming","easeCubicInOut","selection_transition","pi","tauEpsilon","Path","x1","y1","x2","y2","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","t01","t21","a0","a1","ccw","dx","dy","cw","da","w","Map","property","keys","entries","Set","proto","objectConverter","columns","customConverter","row","inferColumns","rows","columnSet","column","dsv","delimiter","reFormat","delimiterCode","convert","parseRows","EOL","EOF","N","I","eol","token","formatValue","formatRows","formatRow","tree_add","add","tree","leaf","xm","ym","xp","yp","addAll","xz","yz","tree_cover","tree_data","tree_extent","Quad","tree_find","radius","x3","y3","quads","d2","tree_remove","retainer","removeAll","tree_root","tree_size","tree_visit","tree_visitAfter","tree_x","tree_y","Quadtree","leaf_copy","treeProto","tree_addAll","tree_removeAll","formatDecimal","coefficient","formatGroup","thousands","width","length","formatDefault","out","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","re","formatSpecifier","specifier","FormatSpecifier","fill","align","sign","symbol","comma","precision","prefixes","formatLocale$1","locale","currency","decimal","newFormat","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","padding","formatPrefix","defaultLocale","formatLocale","precisionFixed","precisionPrefix","precisionRound","adder","Adder","temp","bv","av","rotationIdentity","lambda","phi","TransformStream","equirectangularRaw","sum","node_count","node_each","node_eachBefore","node_eachAfter","node_sum","node_sort","node_path","ancestor","leastCommonAncestor","aNodes","bNodes","node_ancestors","node_descendants","node_leaves","leaves","node_links","links","hierarchy","Node","valued","childs","defaultChildren","computeHeight","node_copy","copyData","height","treemapDice","treemapSlice","squarifyRatio","ratio","nodeValue","sumValue","minValue","maxValue","newRatio","minRatio","alpha","beta","squarify","resquarify","noabort","Queue","abort","results","maybeNotify","implicit","ordinal","domain","unknown","band","ordinalRange","bandwidth","paddingInner","paddingOuter","rescale","reverse","pointish","constant$1","unit","deinterpolateLinear","deinterpolateClamp","deinterpolate","reinterpolateClamp","bimap","d0","d1","r0","r1","polymap","bisect","continuous","clamp","piecewise","output","input","linearish","newInterval","floori","offseti","test","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","second","minute","hour","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","utcMinute","utcHour","utcDay","utcWeekday","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcMonth","utcYear","localDate","utcDate","newYear","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formatShortWeekday","formatWeekday","formatShortMonth","formatMonth","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatPeriod","formatSeconds","formatWeekNumberSunday","formatWeekdayNumber","formatWeekNumberMonday","formatYear","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCPeriod","formatUTCSeconds","formatUTCWeekNumberSunday","formatUTCWeekdayNumber","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseDayOfMonth","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parsePeriod","parseSeconds","parseWeekNumberSunday","parseWeekdayNumber","parseWeekNumberMonday","parseLocaleDate","parseLocaleTime","parseYear","parseFullYear","parseZone","parseLiteralPercent","pad","pads","newParse","newDate","parseSpecifier","numberRe","percentRe","requoteRe","requote","timeDay","timeYear","timeSunday","timeMonday","utcFormat","utcParse","isoSpecifier","formatIsoNative","parseIsoNative","colors","interpolateCubehelixLong","ramp","Linear","curveLinear","pointX","pointY","defined","curve","defined0","buffer","Basis","Bundle","bundle","Cardinal","tension","cardinal","CardinalClosed","CardinalOpen","CatmullRom","x23","y23","catmullRom","CatmullRomClosed","CatmullRomOpen","slope3","h0","h1","s0","s1","slope2","MonotoneX","RedBlackTree","RedBlackNode","after","grandpa","uncle","RedBlackFirst","RedBlackRotateLeft","RedBlackRotateRight","sibling","red","createEdge","v0","v1","edge","edges","setEdgeEnd","cells","createBorderEdge","vertex","clipEdge","ax","ay","bx","by","connectEdge","lx","ly","rx","ry","fy","fm","fb","clipEdges","createCell","site","cellHalfedgeAngle","cell","va","vb","cellHalfedgeStart","cellHalfedgeEnd","sortCellHalfedges","halfedges","clipCells","nCells","iCell","iHalfedge","nHalfedges","startX","startY","endX","endY","cover","dc","v00","v01","v11","v10","circlePool","firstCircle","Circle","attachCircle","arc","lArc","rArc","lSite","cSite","rSite","cx","cy","epsilon2","ha","hc","circle","circles","detachCircle","beachPool","Beach","createBeach","beach","detachBeach","beaches","removeBeach","disappearing","nArcs","iArc","addBeach","directrix","dxl","dxr","leftBreakPoint","rightBreakPoint","newArc","hb","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","triangleArea","lexicographic","Diagram","sites","extent","polygon","triangles","e1","vx","vy","v2","Transform","location","strokeSlider","show","stroke_slider","slideRight","slideLeft","hideSlide","d3.range","d3.selectAll","supportsPassive","opts","behaviors","handleTouchStart","handleTouchMove","swipeTouchEnd","pressAndHoldEnd","preventDrag","preventDoubleTap","evt","last_touch","xDown","yDown","xDiff","yDiff","timeDown","touch_target","xUp","yUp","findAncestor","cls","timeDiff","touchManager","simpleChart","dom_parent","d3.select","screen_width","screen_height","min_points","svg","margin","d3.scaleLinear","d3.line","chart","maxY","d3.axisBottom","d3.axisLeft","drawLines","appendCircles","lineData","targetclass","updateStats","setNumber","statselectors","stripModifiers","_a","statView","left_display","right_display","numerators","item","statclass","table","left_results","right_results","stroke","statLines","addCharts","viewManager","player_points","changeDisplay","new_view","views","activate","menuMatchArchive","menuMatchFormat","menuChangeServer","displayMatchArchive","noAd","view_keys","view","util","newclass","SwipeList","opt","swipeLeft","swipeRight","instances","instance","moveX","moveY","moveStart","leftpx","rightpx","button","btn","abtn","img","inst","touches","nowX","nowY","defineActionEvents","resetStyles","resetButton","UUID","lut","d3","loadMatch","json","mdFormat","newMatch","archiveEntry","ma_elem","_b","deleteMatch","current_match_id","archive_id","resetMatch","force_format","months","display_date","display_players","match_score","match_format","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","isView","encodePacket","supportsBinary","encodeBlobAsBase64","fileReader","content","toArray","TEXT_ENCODER","encodePacketToBinary","packet","encoded","chars","lookup","decode","base64","bufferLength","len","encoded1","encoded2","encoded3","encoded4","arraybuffer","bytes","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","decoded","SEPARATOR","encodePayload","packets","encodedPackets","decodePayload","encodedPayload","decodedPacket","createPacketEncoderStream","controller","payloadLength","TEXT_DECODER","totalLength","chunks","acc","chunk","concatChunks","createPacketDecoderStream","maxPayload","state","expectedLength","isBinary","headerArray","protocol","Emitter","mixin","fn","callbacks","cb","globalThisShim","pick","attr","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","BASE64_OVERHEAD","byteLength","utf8Length","encode","qs","qry","pairs","pair","TransportError","reason","Transport","details","onPause","schema","query","hostname","encodedQuery","alphabet","prev","num","yeast","hasCORS","XHR","xdomain","hasXHR2","XMLHttpRequest","Polling","isSSL","port","forceBase64","pause","total","close","Request","req","xhrStatus","xhr","err","fromError","unloadHandler","terminationEvent","nextTick","setTimeoutFn","WebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","WS","protocols","closeEvent","ev","lastPacket","WT","stream","decoderStream","reader","encoderStream","read","done","transports","src","pathNames","queryKey","regx","$0","$1","$2","Socket","transport","failed","onTransportOpen","msg","cleanup","freezeTransport","onerror","onTransportClose","onclose","onupgrade","to","payloadSize","cleanupAndClose","waitForUpgrade","upgrades","filteredUpgrades","url","loc","host","toString","withNativeFile","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","Encoder","replacer","deconstruction","isObject","Decoder","reviver","isBinaryEvent","BinaryReconstructor","buf","payload","binData","io","nsp","ack","isTransportWritable","withErr","resolve","reject","arg1","arg2","responseArgs","listeners","sent","pid","subDestroy","compress","Backoff","ms","rand","deviation","jitter","Manager","_parser","Engine","socket","openSubDestroy","onError","errorSub","nsps","cache","parsed","sameNamespace","newConnection","pulseCircle","pulse_circles","stroke_width","delay_multiplier","color_range","margins","dims","d3.interpolateHcl","colorFill","d3.scalePoint","broadcastToggle","repeat","d3.active","version","coms","connectSocket","connectionString","connect","comsConnect","comsDisconnect","comsError","sendHistory","receiveMatchUp","disconnectSocket","endBroadcast","auth_match","surfaces","inout","broadcasting","startBroadcast","pc","sendKey","broadcastStatus","gameFish","fish_width","fish_height","coords","last_coords","images","default_colors","events","fishFrame","bars","fish","multiplier","max_rally","vert","fish_offset","fish_length","midpoint","sw","rw","cell_size","offset_divisor","cell_offset","cell_length","diag","grid_data","grid_labels","grid_side","label","gscoreT","gridcells","lineWidth","gridCT","gamecells","gameCT","zX","zY","circleRadius","oScale","lScale","d3.scaleBand","rally_bars","rallyTstart","rallyT","rallyCalc","set_score","sscoreT","ssb","ssbT","serves","first_serve","serve_outcomes","sX","sY","colorShot","service_box","sBoxT","returns","rX","rY","colorReturn","findOffset","cL","rO","rL","sO","sL","zO","zL","keyWalk","valuesObject","optionsObject","vKeys","oKeys","oo","vo","functions","color3s","momentumChart","fish_school","momentumFrame","all_games","cellSize","score_lines","new_coords","showImages","hideImages","midline","scoreLines","score_text","scoreText","scores","scoreT","maxDiff","max_diff","cumulative","gameTree","applyMax","arr","applyMin","canvas","transition_time","point_connector","selectView","counterCalcs","tree_width","tree_height","point_lines","point_min","point_max","gradients","get_id","point_stops","calcStops","lines","ulines","under_lines","point_circles","colorShade","getHexColor","point_text","labels","label_text","selectors","clearView","_data","selected","previous_episode","calcPosition","winners","errors","winner_pct","u_pct","c_start","c_dist","r_start","r_dist","shadeColor2","percent","R","G","shadeRGBColor","colorStr","ptsMatch","pts_sets","pts_charts","ptsChart","true_height","colores","max_width_points","matchObject","set_data","game_data","ptsHover","set_winner","resize","range_start","pts_max","pts_start","longest_rally","displayScore","xScale","calcWidth","pointScale","yScale","set_box","boxWidth","game_boundaries","game_boxes","lineGen","pts_lines","bp_data","bp_wrappers","breakpoints","add_index","points_index","barsX","bX","point_bars","lastName","split","legend","win_pct","err_pct","rally_pct","dl","vKey","sKeys","osKeys","sKey","set_object","fKeys","eKeys","fKey","configureViz","pcolors","showGame","showGameFish","closeGameFish","gFish","vizUpdate","direction","orientationEvent","updateTournamentDetails","updateMatchDetails","updateDetails","touchTimer","registeredFunctions","intersection","evnt","mouse","tapHandler","processEvnt","lastTap","stopPropagation","matchedClasses","thisTap","callFunction","pointerEvent","holdAction","touchleave","isTouch","isTouchTimer","curRootClass","addtouchclass","removetouchclass","eventManager","broadcastScore","match_meta","match_message","sendScoreUpdate","next_update","last_timeout","last_update","update_window","wait_time","checkMatchEnd","strokeAction","last_action","updatePlayer","updatePlayerDetails","rankElement","wtnElement","utrElement","teamElement","idElement","changeFormat","selectionContainer","format_name","DOUBLE_FAULT","toggles","classAction","playerRole","slider_side","changeValue","rallyMode","actions","player_side","sound","styleButton","player_position","checkStartTime","point_location","getPointLocation","what","p0location","p1location","exportMatch","download","textToWrite","fileNameToSaveAs","textFileAsBlob","downloadLink","toggleChart","visible","emailblackImage","modalShare","json_data","shareResult","email_message","emailOption","clipboardOption","sendHistoryOption","editPoint","epSGP","point_winner","point_loser","changePointWinner","changePointPlayer","changeResultOptions","editPointDisplay","pointPlayer","pointResult","pointWinner","updatePoint","editPlayer","editPlayerDisplay","playerName","targetElement","playerRank","playerWTN","playerUTR","pointsImage","modalHelp","quick_start","quick","helptext","modalInfo","enterKey","key_entry","keyAction","submit","submitKey","viewGameFish","gameIndex","viewEditPoint","pointIndex","viewStats","viewMatchFormat","viewGameTree","viewMomentum","viewPointHistory","matchArchive","outcomeEntry","mainMenu","undoAction","redoAction","changeServer","swapAction","registerEvents","module","this","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","clipboard","tiny_emitter","tiny_emitter_default","listen","listen_default","src_select","select_default","command","ClipboardActionCut","selectedText","actions_cut","createFakeElement","isRTL","fakeElement","yPosition","fakeCopyAction","ClipboardActionCopy","actions_copy","_typeof","ClipboardActionDefault","_options$action","container","actions_default","clipboard_typeof","_classCallCheck","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","call","_assertThisInitialized","getAttributeValue","Clipboard","_Emitter","_super","trigger","_this","_this2","support","DOCUMENT_NODE_TYPE","closest","__unused_webpack_exports","_delegate","useCapture","listenerFn","delegate","elements","exports","is","listenNode","listenNodeList","listenSelector","nodeList","isReadOnly","ctx","evtArr","evts","liveEvents","__webpack_module_cache__","moduleId","getter","prop","setWindow","windowEvent","message","setInitialState","provider","queryString","vars","checkUserUUID","defineEntryEvents","optionValue","iocCodes","loadCurrent","catchTab","playername","hold_targets","chLogo","renderDefaultPage","PARAMETER_REGEXP","REPLACE_VARIABLE_REGEXP","WILDCARD_REGEXP","REPLACE_WILDCARD","NOT_SURE_REGEXP","REPLACE_NOT_SURE","START_BY_SLASH_REGEXP","MATCH_REGEXP_FLAGS","getCurrentEnvURL","fallback","windowAvailable","clean","isString","isFunction","extractHashFromURL","regExpResultToParams","extractGETParameters","tmp","parseQuery","matchRoute","route","_extractGETParameters","GETParams","paramNames","pattern","full","dots","regexp","pushStateAvailable","undefinedOrTrue","parseNavigateOptions","resolveOptions","accumulateHooks","hooks","Q","funcs","idx","moveForward","condition","two","setLocationPath","matchPathToRegisteredRoutes","checkForDeprecationMethods","checkForForceOp","isWindowAvailable","isPushStateAvailable","updateBrowserURL","isItUsingHash","checkForLeaveHook","oldMatch","leaveLoopDone","runHook","newLocationVSOldMatch","someOfTheLastOnesMatch","shouldStop","checkForBeforeHook","callHandler","checkForAfterHook","checkForAlreadyHook","checkForNotFoundHandler","notFoundRoute","hashString","notFoundMatch","errorOut","flushCurrent","foundLifecycle","notFoundLifeCycle","_ref","notFoundHandled","_extends","processMatches","nextMatch","waitingList","DEFAULT_LINK_SELECTOR","Navigo","appRoute","DEFAULT_RESOLVE_OPTIONS","routes","destroyed","genericHooks","_checkForAHash","composePathWithRoot","createRoute","handler","_path$p","_handler","_hooks","matches","navigate","navigateOptions","_ref2","navigateByName","generate","off","destroy","notFound","updatePageLinks","findLinks","link","u","setGenericHooks","lastResolved","getLinkPath","pathToMatchObject","getCurrentLocation","directMatchWithRegisteredRoutes","directMatchWithLocation","currentLocation","annotatePathWithRoot","addHook","func","getRoute","nameOrHandler","__markAsClean","define_process_env_default","router"],"mappings":"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,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EA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","x_google_ignoreList":[13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,305,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331]}