(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ul(t){try{JSON.parse(t)}catch{return!1}return!0}function Ut(t,e){const n=document.getElementById("modaltext");if(n&&(n.innerHTML=t),e){const i=document.getElementById("copy2clipboard");i&&i.setAttribute("data-clipboard-text",e)}const r=document.getElementById("modal");r&&(r.style.display="flex")}function sn(t){const e=t.split(" ");let n=e[0];return e.length>1&&(n+=" "+e[e.length-1]),n}function fl(t){const e=t.format,n=t.sides;return e==="singles"?n.map(function(r){return sn(r[0])}):n.map(hl)}function hl(t){return t[0].last_name+"/"+t[1].last_name}function dl(t){if(t)try{return JSON.parse(t)}catch{return}}function pl(t,e="-",n="YMD"){if(!t)return"";const r=new Date(t);let i=""+(r.getMonth()+1),s=""+r.getDate();const o=r.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),n=="DMY"?[s,i,o].join(e):n=="MDY"?[i,s,o].join(e):n=="YDM"?[o,s,i].join(e):n=="DYM"?[s,o,i].join(e):n=="MYD"?[i,o,s].join(e):[o,i,s].join(e)}function Os(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function on(t,e){for(;t.parentNode;)if(t=t.parentNode,t.classList&&Array.from(t.classList).indexOf(e)>=0)return t;return null}const Mr=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),ml=function(t){const e=t+"=",n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.startsWith(e))return i.substring(e.length,i.length)}return null},gl=function(t,e,n){const r=function(){if(n){const i=new Date;return i.setTime(i.getTime()+n*24*60*60*1e3),"; expires="+i.toUTCString()}else return""}();document.cookie=t+"="+e+r+"; path=/"},rt={set:function(t,e,n){Mr?localStorage.setItem(t,e):gl(t,e,n)},get:function(t){return Mr?localStorage.getItem(t):ml(t)},remove:function(t){Mr?localStorage.removeItem(t):this.set(t,"",-1)}},et=function(){};et.addPoint_events=[];et.undo_events=[];et.reset_events=[];et.pointParser=Jo;const Ae={games:{advantage:{description:"Advantage Game",tiebreak:!1,hasDecider:!1,threshold:4,minDiff:2},noAdvantage:{description:"No Advantage Game",tiebreak:!1,hasDecider:!0,threshold:4,minDiff:1},tiebreak7a:{description:"Tiebreak to 7",tiebreak:!0,hasDecider:!1,threshold:7,minDiff:2},tiebreak10a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:10,minDiff:2},tiebreak12a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:12,minDiff:2},tiebreak9n:{description:"Tiebreak to 9, Golden Point",tiebreak:!0,hasDecider:!0,threshold:9,minDiff:1}},sets:{AdSetsTo6tb7:{description:"Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},NoAdSetsTo6tb7:{description:"No-Ad, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"},NoAdSetsTo4tb7:{description:"No-Ad, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:0,children:"noAdvantage",decidingChild:"tiebreak7a"},longSetTo6by2:{description:"Advantage, 6 games for set, win by 2 games",hasDecider:!1,threshold:6,minDiff:2,children:"advantage",decidingChild:"advantage"},supertiebreak:{description:"Supertiebreak",hasDecider:!0,threshold:1,minDiff:1,children:"tiebreak10a",decidingChild:"tiebreak10a"},pro10a12:{description:"10 Game No Ad Pro Set; tiebreak to 12",hasDecider:!0,threshold:10,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak12a"},pro8a7:{description:"8 Game Pro Set; tiebreak to 7",hasDecider:!0,threshold:8,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},college6a7:{description:"6 Game College Doubless Set; no advantage; tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"}},matches:{"3_6a_7":{name:"Standard Advantage",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"3_6n_7":{name:"Standard No-Advantage",description:"best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"NoAdSetsTo6tb7"},"3_4n_10":{name:"Standard Under 10",description:"best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"supertiebreak"},"1_4n_7":{name:"Under 10 Qualifying",description:"4 games for set, No Advantage, Tiebreak to 7 at 3-3",hasDecider:!1,threshold:1,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"NoAdSetsTo4tb7"},"3_6n_10":{name:"No-Ad, 3rd Set Supertiebreak",description:"best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"supertiebreak"},"5_6a_7":{name:"US Open Men",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"5_6a_7_long":{name:"Grand Slam Men - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"3_6a_7_long":{name:"Grand Slam Women - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"1_8a_7":{name:"8 Game Pro Set",description:"1 set, Advantage, 8 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"pro8a7",decidingChild:"pro8a7"},"1_6a_7":{name:"6 Game College Doubles Set",description:"1 set, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"college6a7",decidingChild:"college6a7"}}};et.formats=()=>Ae;et.newFormat=({type:t,code:e,description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l})=>{const c=Object.keys(Ae).indexOf(t)>=0,u=c&&Object.keys(Ae[t]).indexOf(e)>=0;return c&&u?!1:(Ae[t][e]={description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l},!0)};et.stateObject=({index:t,object:e,parent_object:n,child:r,format:i,common:s=et.common()})=>{const o={};o.child=r,o.format=i,o.child_attributes=["hasDecider","threshold","minDiff","tiebreak","code","description"],(o.reset=c=>{o.children=[],o.local_history=[],o.counter=[0,0],o.first_service=0,n||(s.metadata.reset(),s.metadata.resetStats(),s.history=[],s.perspective_score=!1,s.events.reset().forEach(u=>u())),!n&&c&&(o.format.singles(!0),o.format.type(c))})(),o.set={index(c){return arguments.length?(isNaN(c)||(t=c),o.set):t},liveStats(c){return arguments.length?[!0,!1].indexOf(c)<0?!1:(c&&!s.live_stats&&o.history.points().length&&(s.metadata.resetStats(),s.stats.counters()),!c&&s.live_stats&&s.metadata.resetStats(),s.live_stats=c,o.set):s.live_stats},perspectiveScore(c){return arguments.length?o.history.points().length?!1:([!0,!1].indexOf(c)>=0&&(s.perspective_score=c),o.set):s.perspective_score},firstService(c){return arguments.length?s.metadata.serviceOrder().indexOf(c)<0?!1:(o.first_service=c,o.set):o.first_service}},o.history={},o.history.local=()=>o.local_history,o.history.action=c=>s.history.filter(u=>u.action==c),o.history.points=c=>{let u=s.history.filter(f=>f.action=="addPoint").map(f=>f.point);return c!=null&&(u=u.filter(f=>f.set==c)),u},o.history.score=()=>e=="Game"?o.history.points().map(c=>c.score):[].concat(...o.children.map(c=>c.history.score())),o.history.games=()=>e=="Set"?o.local_history:[].concat(...o.children.map(c=>c.history.games())),o.history.lastPoint=()=>{const c=o.history.points();return c[c.length-1]||{score:"0-0"}},o.history.common=()=>s.history,o.score=()=>{const c={local:o.counter};c.points=e=="Game"?o.complete()?[0,0]:o.counter:o.lastChild()?o.lastChild().score().counters.points:[0,0],c.games=e=="Set"?o.complete()?[0,0]:o.counter:e=="Match"?o.lastChild()?o.lastChild().score().counters.games:[0,0]:void 0,c.sets=e=="Match"?o.counter:void 0;const u={counters:c};return u.points=e=="Game"?o.complete()?"0-0":o.scoreboard():o.lastChild()?o.lastChild().score().points:"0-0",u.games=e=="Set"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().games:"0-0",u.sets=e=="Match"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().sets:"0-0",u.components={},e=="Match"&&o.children.length&&(u.components.sets=o.children.map(f=>{const h={games:f.score().counters.local};return f.lastChild()&&f.lastChild().format.tiebreak()&&(h.tiebreak=f.lastChild().score().counters.local),h})),u.display={},u},o.accessChildren=()=>o.children,o.lastChild=()=>o.children[o.children.length-1],o.scoreDifference=()=>Math.abs(o.counter[0]-o.counter[1]),o.thresholdMet=()=>Math.max(...o.counter)>=o.format.threshold(),o.minDifferenceMet=()=>o.scoreDifference()>=o.format.minDiff(),o.singleThresholdMet=()=>Math.max(...o.counter)>=o.format.threshold()&&Math.min(...o.counter)<o.format.threshold(),o.winner=()=>o.complete()?o.counter[0]>o.counter[1]?0:1:void 0,o.reverseScore=()=>s.perspective_score&&o.nextTeamServing()%2==1,o.nextTeamServing=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!0),o.nextTeamReceiving=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!1),o.perspectiveScore=(c=o.counter,u)=>u!=null?u?c.slice().reverse():c:o.reverseScore()?c.slice().reverse():c,o.complete=()=>{function c(){return o.counter[0]>=o.format.threshold()&&o.counter[1]>=o.format.threshold()}return!!(o.thresholdMet()&&o.minDifferenceMet()||c()&&o.scoreDifference()&&o.format.hasDecider())},o.nextService=()=>{if(o.complete())return!1;let c=o.lastChild();if(s.metadata.serviceOrder().indexOf(o.first_service)<0&&console.log("PROBLEM"),e=="Game")return o.format.tiebreak()?s.nextTiebreakService(o.local_history,o.first_service):o.first_service;if(!c)return o.first_service;if(c.complete()){let u=c.lastChild();for(;u;)c=u,u=c.lastChild();const f=c.set.firstService();return s.advanceService(f)}return c.nextService()},o.currentChild=()=>{if(o.complete())return!1;const c=o.lastChild();return c&&!c.complete()?c:o.newChild()},o.newChild=()=>{let c=o.lastChild(),u;if(!c)u=o.first_service;else{let x=c.lastChild();for(;x;)c=x,x=c.lastChild();u=s.advanceService(c.set.firstService())}const f=o.format.threshold(),h=o.format.minDiff(),d=x=>o.counter[0]==x&&o.counter[1]==x,p=d(f)&&(o.format.hasDecider()||h==1)||d(f-1)&&h==0,y=p?o.format.decidingChild.settings().code:o.format.children.settings().code,g=o.children.length,k=et[o.child.object]({index:g,parent_object:o,type:y,common:s});if(k.set.firstService(u),!y){const x=p?o.format.decidingChild:o.format.children;A(x,k.format,o.child_attributes),x.children&&(A(x.children,k.format.children,o.child_attributes),A(x.decidingChild,k.format.decidingChild,o.child_attributes))}return o.children.push(k),k;function A(x,L,O){O.forEach(v=>{if(typeof x[v]=="function"){const _=x[v]();L[v](_)}})}};const a=c=>{if(o.complete())return{result:!1};const u=o.nextService(),f=s.pointParser(c,u,o.history.lastPoint(),o.format,s.metadata.teams(),o.set.perspectiveScore(),o.score());if(!f)return{result:!1};o.counter[f.winner]+=1;const h={points:o.counter.slice(),score:o.scoreboard(),number:o.local_history.filter(k=>k.winner!=null).length,index:o.history.points().length,[e.toLowerCase()]:t},d=o.pointsToGame(),p=d?d.indexOf(1):void 0;p>=0&&p==1-s.metadata.playerTeam(u)&&(h.breakpoint=!0),o.format.tiebreak()&&(h.tiebreak=!0),s.metadata.timestamps()&&!f.uts&&(h.uts=new Date().valueOf()),Object.assign(f,h),o.local_history.push(f);const g={action:"addPoint",result:!0,complete:o.complete(),point:f,needed:{points_to_game:d}};return s.history.push(g),g};o.addPoint=c=>{if(Array.isArray(c))return!1;if(e=="Game")return a(c);const u=o.currentChild();if(!u)return{result:!1};const f=u.addPoint(c);if(!f.result)return f;u.complete()&&(o.counter[f.point.winner]+=1,o.local_history.push({winner:f.point.winner,[o.child.plural]:o.counter.slice(),index:u.set.index()})),f.complete=o.complete(),f.next_service=o.nextService();const h=o.pointsNeeded?o.pointsNeeded():void 0;return h&&(f.needed=Object.assign({},f.needed,h)),f.point[o.child.label]=u.set.index(),f[o.child.label]={complete:u.complete(),winner:u.winner(),[o.child.plural]:o.counter.slice(),index:u.set.index()},n||s.addStatPoint(f),n||s.events.addPoint().forEach(d=>d(f)),f},o.addPoints=(c=[])=>o.addMultiple({values:c}),o.addScore=c=>{const u=o.addPoint(c);if(u.result)return u;const f=o.history.lastPoint(),h=!f||f.score=="0-0"?[0,0]:f.points,d=o.change.pointScore(c);if(d.result){o.undo();const y=d.pointChange.to.map((g,k)=>({diff:g-h[k],i:k})).filter(g=>g.diff);if(y.length==1&&y[0].diff>0){let g;const k=y[0].i,A=y[0].diff;for(let x=0;x<A;x++)if(g=o.addPoint(k),!g.result||g.game.complete)return g;return g}}return{result:!1}},o.addScores=(c=[])=>o.addMultiple({values:c,fx:o.addScore}),o.addMultiple=({values:c=[],fx:u=o.addPoint})=>{typeof c=="string"&&(c=c.match(/[01A-Za-z][*#@]*/g));const f=[];let h=[];for(;c.length;){const d=c.shift(),p=u(d);p.result?f.push(p):(c.unshift(d),h=c.slice(),c=[])}return{result:f.length,added:f,rejected:h}},o.decoratePoint=(c,u)=>{const f=s.history.map((d,p)=>{if(d.action==="addPoint"&&d.point.index==c.index)return p}).filter(d=>d!==void 0);if(!f.length)return!1;const h=s.history[f[0]];h.point=Object.assign({},h.point,u)},o.change={},o.change.points=c=>{if(!ti(c)||c.length!=2)return!1;if(e=="Game"){const u=Math.max(...c)>o.format.threshold(),f=Math.abs(c[0]-c[1]);if(u&&f>o.format.minDiff())return!1;if(o.complete())return{result:!1};const h={action:"changePoints",result:!0,pointChange:{from:o.counter,to:c}};if(o.local_history.push(h),s.history.push(h),o.counter=c,o.complete()){const d=parseInt(o.winner());n.counter[d]+=1,n.local_history.push({winner:d,games:n.counter.slice(),index:t})}return h}return o.propagatePointChange(c,"points")},o.change.pointScore=c=>{if(c=="0-0")return o.change.points([0,0]);if(e=="Game"){if(o.format.tiebreak())return o.change.points(c.split("-").map(p=>parseInt(p)));c=c.replace(":","-").split("-").map(p=>p.trim()).join("-").split("D").join("40");const u=Object.assign({},jo);if(o.format.hasDecider()&&Object.keys($n).forEach(p=>u[p]=$n[p]),[].concat(...Object.keys(u).map(p=>u[p])).indexOf(c)<0)return!1;const h=["0","15","30","40","A","G"],d=c.split("-").map(p=>h.indexOf(p));return d[0]==5&&d[1]!=3&&(d[0]=4),d[1]==5&&d[0]!=3&&(d[1]=4),o.change.points(d)}return o.propagatePointChange(c,"pointScore")},o.propagatePointChange=(c,u)=>{const f=o.lastChild();if(!f){if(e=="Match")return o.newChild().newChild().change[u](c);if(e=="Set")return o.newChild().change[u](c)}return!n&&o.complete()?{result:!1}:f.complete()?o.newChild().change[u](c):f.change[u](c)},o.change.games=c=>{if(!ti(c)||c.length!=2)return!1;if(e=="Game")return{result:!1};if(e=="Set"){if(o.complete())return{result:!1};const f={action:"changeGames",result:!0,gameChange:{from:o.counter,to:c}};return o.local_history.push(f),s.history.push(f),o.counter=c,f}const u=o.lastChild();return!u&&e=="Match"?o.newChild().change.games(c):!n&&o.complete()?{result:!1}:u.complete()?o.newChild().change.games(c):u.change.games(c)},o.undo=(c=1)=>{if(isNaN(c)||e!="Game"&&!o.children.length&&!o.local_history.length||!s.history.length)return!1;const u=()=>{const h=s.history[s.history.length-1].action;return l[h]()},f=[...Array(c).keys()].map(()=>u());return s.events.undo().forEach(h=>h(f)),c==1?f[0]:f};const l={};return l.addPoint=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter[c.point.winner]-=1,s.removeStatPoint(c),c.point}return o.propagateUndo()},l.changePoints=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter=c.pointChange.from,c}return o.propagateUndo()},l.changeGames=()=>{if(e=="Set"){o.local_history.pop();const c=s.history.pop();return o.counter=c.gameChange.from,c}return o.propagateUndo()},o.propagateUndo=()=>{const c=o.lastChild(),u=c.complete(),f=c.undo();if(u){const h=o.local_history.pop();h&&h.winner!=null&&(o.counter[h.winner]-=1)}return!c.history.local().length&&c.lastChild()==null&&o.children.pop(),f},o};et.Match=t=>{const{index:e,type:n,common:r=et.common()}=t??{},i={object:"Set",label:"set",plural:"sets"},s=et.matchFormat({type:n,common:r}),o=et.stateObject({index:e,object:"Match",format:s,child:i,common:r});return o.scoreboard=a=>o.children.length?(a==null&&(a=o.set.perspectiveScore()?o.nextService():void 0),o.children.map(l=>l.scoreboard(a)).join(", ")):"0-0",{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,history:o.history,stats:r.stats}};et.Set=({index:t,parent_object:e,type:n,common:r=et.common()})=>{const i={object:"Game",label:"game",plural:"games"},s=et.setFormat({type:n,common:r}),o=et.stateObject({index:t,parent_object:e,object:"Set",format:s,child:i,common:r});o.pointsNeeded=()=>{const l=o.format.threshold();if(o.complete()){const g=[];g[o.winner()]=0;const k=1-o.winner(),A=o.history.action("addPoint").filter(x=>x.point.set==t).map(x=>x.needed.points_to_set).filter(x=>x);return g[k]=Math.max(...A.map(x=>x[k])),{points_to_set:g}}const c=o.format.hasDecider(),u=o.scoreDifference(),f=o.format.minDiff(),h=[!1,!1],d=o.counter.map((g,k)=>{const A=o.counter[1-k];return g>A?A==l&&c||g>=l&&u>=f?0:g>=l-1?1:l-g:A>g?(h[k]=c&&l==A,g==l&&c||A>=l&&u>=f?0:h[k]?u+1:A>=l-1?u+f:l-g):(h[k]=c&&l==g&&l==A||f==1&&l==g&&l==A||f==0&&l-1==g&&l-1==A,h[k]?1:g>=l-1?f:l-g)}),p=o.lastChild();return{points_to_set:d.map((g,k)=>{let A=0;if(p&&!p.complete()&&(A+=p.pointsToGame()[k],g-=1),!g)return A;h[k]&&(A+=o.format.decidingChild.threshold(),g-=1);for(let x=g;x;x--)A+=o.format.children.threshold();return A}),games_to_set:d}};const a=([l,c],[u,f])=>((u||f)&&(u>f&&(c+=`(${f})`),f>u&&(l+=`(${u})`)),`${l}-${c}`);return o.scoreboard=l=>{const c=o.lastChild(),u=o.perspectiveScore(o.counter,l);if(!c)return u.join("-");const f=c.format.tiebreak()===!0;if(c.complete()&&!f)return u.join("-");if(!c.complete())return`${u.join("-")} (${c.scoreboard(l)})`;const h=c.score().counters.local,d=o.perspectiveScore(h,l);return f&&o.complete()&&o.children.length==1?d.join("-"):a(u,d)},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,children:o.accessChildren,lastChild:o.lastChild,newChild:o.newChild,history:o.history,pointsNeeded:o.pointsNeeded}};et.Game=({index:t,parent_object:e,type:n,common:r=et.common()})=>{const i={object:"Point",label:"point",plural:"points"},s=et.gameFormat({type:n,common:r}),o=et.stateObject({index:t,object:"Game",parent_object:e,format:s,child:i,common:r});return o.pointsToGame=()=>{if(o.complete())return;const a=o.format.threshold(),l=o.format.hasDecider(),c=o.scoreDifference(),u=o.format.minDiff();return o.counter.map((f,h)=>{const d=o.counter[1-h];return f>d?d==a&&l||f>=a&&c>=u?0:f>=a-1?1:a-f:d>f?f==a&&l||d>=a&&c>=u?0:d==a&&l?c+1:d>=a-1?c+u:a-f:l&&a==f&&a==d?1:f>=a-1?u:a-f})},o.scoreboard=a=>{let l;const c=o.format.threshold(),u=o.format.minDiff(),f=o.perspectiveScore(o.counter,a);if(c!=4||o.format.tiebreak())return f.join("-");if(!o.thresholdMet()||o.singleThresholdMet()&&o.minDifferenceMet()||o.singleThresholdMet()&&o.format.hasDecider()&&u==1){const d=["0","15","30","40","G","G"];l=f.map(p=>d[p]).join("-")}else l=f.map((d,p)=>{const y=f[1-p],g=d-c,k=y-c;return g>k&&o.minDifferenceMet()?"G":g>k?"A":"40"}).join("-");return l.indexOf("G")>=0?"0-0":l},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,history:o.history,lastChild:o.lastChild,pointsToGame:o.pointsToGame}};et.defaultPointParser=Jo;function Jo(t,e,n,r,i,s,o){if(t==null)return!1;if(t.toString().length==1&&!isNaN(t)){const h=+t==e?"S":"R";return[0,1].indexOf(+t)<0?!1:{winner:+t,server:e,code:h}}let a;const l=i.map(h=>h.indexOf(e)>=0).indexOf(!0),c={server:e};if(typeof t=="object"){if(t.winner!=null&&[0,1].indexOf(+t.winner)>=0)return t.winner=parseInt(t.winner),t.code=t.code?t.code:t.winner==e?"S":"R",t.first_serve&&(t.code=t.code.toLowerCase()),Object.assign({},t,c);if(t.code&&u(t.code))return Object.assign({},t,c)}if(typeof t=="string"&&(f(t)||u(t)))return c;function u(h){let d=h.toUpperCase().match(/[A-Za-z]/g),p=h.match(/[*#@]/g);if(d&&(d=d.join("")),p&&(p=p.join("")),"SAQDRP".split("").indexOf(String(d))>=0)return["S","A","Q"].indexOf(d)>=0&&(a=l),["D","R","P"].indexOf(d)>=0&&(a=1-l),["Q","P"].indexOf(d)>=0&&(c.result="Penalty"),d=="A"&&(c.result="Ace"),d=="D"&&(c.first_serve={error:"Error",serves:["0e"]},c.result="Double Fault"),p&&!c.result&&(p=="*"&&(c.result="Winner"),p=="#"&&(c.result="Forced Error"),p=="@"&&(c.result="Unforced Error")),c.code=h,c.winner=parseInt(a),h===h.toLowerCase()&&(c.first_serve={error:"Error",serves:["0e"]}),c}function f(h){if(h=h.replace(":","-").split("-").map(k=>k.trim()).join("-").split("D").join("40"),h.split("-").length!=2)return!1;let d=o.points;const p=k=>k.reduce((A,x)=>A+x);if(r.tiebreak()){const k=h.split("-").map(L=>parseInt(L)),A=d.split("-").map(L=>parseInt(L));if(!ti(k)||k.length!=2||p(A)+1!=p(k))return!1;const x=[Math.abs(k[0]-A[0]),Math.abs(k[1]-A[1])];return c.winner=x.indexOf(1),c}const y=Object.assign({},jo);if(r.hasDecider()&&Object.keys($n).forEach(k=>y[k]=$n[k]),h=="0-0"&&y[d].join("-").indexOf("G")>=0)return c.winner=n.points.indexOf(Math.max(...n.points)),c;y[d]==null&&(d="0-0");let g=y[d]?y[d].indexOf(h):!1;if(g>=0)return s&&e&&(g=1-g),c.winner=g,c}}const $n={"40-40":["G-40","40-G"]},jo={"0-0":["15-0","0-15"],"0-15":["15-15","0-30"],"0-30":["15-30","0-40"],"0-40":["15-40","0-G"],"15-0":["30-0","15-15"],"15-15":["30-15","15-30"],"15-30":["30-30","15-40"],"15-40":["30-40","15-G"],"30-0":["40-0","30-15"],"30-15":["40-15","30-30"],"30-30":["40-30","30-40"],"30-40":["40-40","30-G"],"40-0":["G-0","40-15"],"40-15":["G-15","40-30"],"40-30":["G-30","40-40"],"40-40":["A-40","40-A"],"A-40":["G-40","40-40"],"40-A":["40-40","40-G"]};et.matchFormat=({type:t="3_6a_7",common:e})=>{const n=et.formatObject({plural:"matches",common:e});return n.children=et.setFormat({common:e}),n.decidingChild=et.setFormat({common:e}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};et.setFormat=({type:t="AdSetsTo6tb7",common:e})=>{const n=et.formatObject({plural:"sets",common:e});return n.children=et.gameFormat({common:e}),n.decidingChild=et.gameFormat({common:e,type:"tiebreak7a"}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};et.gameFormat=({type:t="advantage",common:e})=>{const n=et.formatObject({plural:"games",common:e});return n.init(t),{description:n.description,settings:n.settings,singles:n.singles,doubles:n.doubles,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,tiebreak:n.tiebreak}};et.formatObject=({plural:t,common:e=et.common()})=>{const n={values:{plural:t},singles:e.singles,doubles:e.doubles,init(r){n.types(n.values.plural).indexOf(r)>=0&&(n.type(r),n.values.initial_code=r)},types(r=n.values.plural){return Object.keys(Ae[r])},type(r){if(!n.values.plural)return!1;if(r===!0&&n.values.initial_code&&(r=n.values.initial_code),n.types(n.values.plural).indexOf(r)>=0){const i=Ae[n.values.plural][r];return n.hasDecider(i.hasDecider).minDiff(i.minDiff).threshold(i.threshold),i.tiebreak!=null&&n.tiebreak(i.tiebreak),n.name(i.name),n.description(i.description),n.values.code=r,i.children&&n.children.type(i.children),i.decidingChild&&n.decidingChild.type(i.decidingChild),!0}},settings(r){const{name:i,description:s,code:o,players:a,threshold:l,has_decider:c,min_diff:u,tiebreak:f}=r??{};if(o)n.type(o);else if(!l||!c||!u||!f){const h=typeof e.singles=="function"?e.singles()?2:4:"";return{name:n.values.name,description:n.values.description,code:n.values.code,players:h,threshold:n.values.threshold,has_decider:n.values.has_decider,min_diff:n.values.min_diff,tiebreak:n.values.tiebreak}}else n.tiebreak(f),n.threshold(l),n.minDiff(u),n.hasDecider(c),s&&n.description(s),i&&n.name(i),a&&(a==4?n.doubles():n.singles())},name(r){return arguments.length?(typeof r=="string"&&(n.values.name=r),n):n.values.name},description(r){return arguments.length?(typeof r=="string"&&(n.values.description=r),n):n.values.description},tiebreak(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.tiebreak=r),n):n.values.tiebreak},threshold(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.threshold=r),n):n.values.threshold},minDiff(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.min_diff=r),n):n.values.min_diff},hasDecider(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.has_decider=r),n):n.values.has_decider}};return n};et.common=()=>{let t=2,e=et.addPoint_events.slice(),n=et.undo_events.slice(),r=et.reset_events.slice(),i={},s,o,a;const l={resetStats(){s=void 0,o=void 0,a=void 0},reset(){i={players:[],teams:[],service_order:[0,1],receive_order:[1,0],tournament:{},match:{},timestamps:!1,charter:void 0}},timestamps(v){return arguments.length?([!0,!1].indexOf(v)>=0&&(i.timestamps=v),l):i.timestamps},serviceOrder(v){return arguments.length?c(v,"service_order","receive_order"):i.service_order.slice()},doublesServiceChange(){if(t!=4)return!1},receiveOrder(v){return arguments.length?c(v,"receive_order","service_order"):i.receive_order.slice()},teams(){const v=[];return v[0]=i.service_order.filter((_,m)=>(m+1)%2).sort(),v[1]=i.service_order.filter((_,m)=>m%2).sort(),v.sort(),v},playerTeam(v){return l.teams().map(_=>_.indexOf(v)>=0).indexOf(!0)},teamPlayers(){return l.teams().map(v=>v.map(_=>l.players(_).name))},players(v){return arguments.length?isNaN(v)||v<0||v>3?!1:i.players[v]?i.players[v]:{name:`Player ${["One","Two","Three","Four"][v]}`}:i.players.length>i.service_order.length?i.players:i.service_order.map(_=>l.players(_))},definePlayer(v){const{name:_,birth:m,playerId:P,hand:z,seed:W,rank:Z,age:V,entry:H,ioc:X,draw_position:U,team:j,wtn:J,utr:D,id:E}=v??{};let M=v==null?void 0:v.index;M==null&&(M=i.players.length);const C=i.players[M]||{};if(!_&&!C.name||isNaN(M)||M>3)return!1;const T={name:_,birth:m,playerId:P,hand:z,team:j,seed:W,rank:Z,age:V,entry:H,ioc:X,draw_position:U,wtn:J,utr:D,id:E};return Object.keys(T).forEach(N=>{T[N]&&(C[N]=T[N])}),i.players[M]=C,{index:M,player:C}},defineTournament(v){const{name:_,tuid:m,start_date:P,tour:z,rank:W,surface:Z,in_out:V,draw:H,draw_size:X,round:U,level:j}=v??{},J={name:_,tuid:m,start_date:P,tour:z,rank:W,surface:Z,in_out:V,draw:H,draw_size:X,round:U,level:j};return Object.keys(J).forEach(D=>{J[D]&&(i.tournament[D]=J[D])}),i.tournament},defineMatch(v){const{muid:_,date:m,gender:P,year:z,court:W,start_time:Z,end_time:V,duration:H,status:X,umpire:U,official_score:j}=v??{},J={muid:_,date:m,gender:P,year:z,court:W,start_time:Z,end_time:V,duration:H,status:X,umpire:U,official_score:j};return Object.keys(J).forEach(D=>{J[D]&&(i.match[D]=J[D])}),i.match},showTiebreakOrder(v){return f(12,v)}};function c(v,_,m){const P=(H,X)=>!H.filter((U,j)=>U!=X[j]).length,z=(H,X)=>X.filter(U=>H.indexOf(U)!=-1).length!=X.length;if(!Array.isArray(v)||v.length!=t||z(v,[0,1])||z([0,1,2,3],v))return!1;const W=v.length==i[_].length;if(P(v,i[_])&&W)return l;const Z=l.teams();i[_]=v;const V=l.teams();return v.length==4&&P(Z[0],V[0])&&W&&u(i[_],i[m],V)||(i[m]=v.map(H=>v.length-1-H)),l}function u(v,_,m){const P=(z,W)=>m.filter(Z=>Z.filter(V=>[z,W].indexOf(V)>=0).length>1).length;return!v.filter((z,W)=>P(z,_[W])).length}function f(v,_){const m=[];return[...Array(v).keys()].map(()=>{const P=h(m,_);return m.push(P),P})}function h(v,_){const m=d(v.length),P=(v.length+1)%4<2,z=v[v.length-1],W=z??_??i.service_order[0];return P==m?W:x.advanceService(W)}function d(v){return[!0].concat([...Array(v).keys()].map(m=>(m+1)%4<2))[v]}function p(){if(t==2){const v=x.metadata.serviceOrder();if(v.length==2)return;x.metadata.serviceOrder(v.filter(_=>[0,1].indexOf(_)>=0))}else{const v=x.metadata.serviceOrder();if(v.length==4)return;const _=v.slice();v.forEach(m=>_.push(m+2)),x.metadata.serviceOrder(_)}}const y=v=>{if(!v)return e;typeof v=="function"?e.indexOf(v)<0&&e.push(v):Array.isArray(v)&&console.log({add_event:v})},g=v=>{if(!v)return n;typeof v=="function"?n.indexOf(v)<0&&n.push(v):Array.isArray(v)&&console.log({undo_event:v})},k=v=>{if(!v)return r;typeof v=="function"?r.indexOf(v)<0&&r.push(v):Array.isArray(v)&&console.log({reset_event:v})},A=()=>{e=[],n=[],r=[]},x={metadata:l,pointParser:et.pointParser,events:{addPoint:y,undo:g,clearEvents:A,reset:k},history:[],live_stats:!1,perspective_score:!1,assignParser(v){x.pointParser=v},advanceService(v){const _=i.service_order.indexOf(v)+1;return i.service_order[_<l.players().length?_:0]},nextTiebreakService(v,_){const m=f(v.length+1,_);return m[m.length-1]},singles(v){return arguments.length?(t=v?2:4,p(),x):t==2},doubles(v){return arguments.length?(t=v?4:2,p(),x):t==4},stats:{calculated(v){return L(x.stats.counters(v))},counters(v){if((v!=null&&a!=v||v==null&&a!=null)&&l.resetStats(),!s){x.live_stats=!0;let _=x.history.filter(m=>m.action==="addPoint");v!=null&&(_=_.filter(m=>m.point.set===v),a=v),_.forEach(m=>x.addStatPoint(m))}return s}},addStatPoint(v){if(!x.live_stats)return;const _=v.point;s||(s={players:{},teams:{}});const m=l.playerTeam(_.server),P=l.playerTeam(_.winner),z=1-P;if(O({player:_.server,episode:v,stat:"pointsServed"}),O({team:P,episode:v,stat:"pointsWon"}),_.result&&_.hand){const W=_.result=="Winner"?P:z;O({player:W,episode:v,stat:_.hand})}_.result=="Ace"&&O({player:_.server,episode:v,stat:"aces"}),_.result=="Double Fault"&&O({player:_.server,episode:v,stat:"doubleFaults"}),_.result=="Winner"&&O({player:_.winner,episode:v,stat:"winners"}),_.result=="Unforced Error"&&O({team:z,episode:v,stat:"unforcedErrors"}),_.result=="Forced Error"&&O({team:z,episode:v,stat:"forcedErrors"}),_.first_serve||O({player:_.server,episode:v,stat:"serves1stIn"}),!_.first_serve&&_.winner==m&&(O({player:_.server,episode:v,stat:"serves1stWon"}),O({team:z,undefined:void 0,stat:"received1stWon"}),O({team:z,undefined:void 0,stat:"received2ndWon"})),!_.first_serve&&_.winner!=m&&O({team:P,episode:v,stat:"received1stWon"}),_.first_serve&&_.result!="Double Fault"&&O({player:_.server,episode:v,stat:"serves2ndIn"}),_.first_serve&&_.result!="Double Fault"&&_.winner==_.server&&(O({player:_.server,episode:v,stat:"serves2ndWon"}),O({team:z,undefined:void 0,stat:"received1stWon"}),O({team:z,undefined:void 0,stat:"received2ndWon"})),_.first_serve&&_.result!="Double Fault"&&_.winner!=m&&O({team:P,episode:v,stat:"received2ndWon"}),_.breakpoint&&(O({player:_.server,undefined:void 0,stat:"breakpointsSaved"}),O({player:_.server,episode:v,stat:"breakpointsFaced"})),o&&o.point.breakpoint&&o.point.server==_.winner&&O({player:_.server,episode:v,stat:"breakpointsSaved"}),v.game&&v.game.complete&&O({team:P,episode:v,stat:"gamesWon"}),o=v},removeStatPoint(v){if(!x.live_stats)return;Object.keys(s).forEach(m=>{Object.keys(s[m]).forEach(P=>{Object.keys(s[m][P]).forEach(z=>{s[m][P][z].length&&(s[m][P][z]=s[m][P][z].filter(W=>W.point.index!=v.point.index))})})});const _=x.history.filter(m=>m.action=="addPoint");o=_.length?_[_.length-1]:void 0}};return l.reset(),x;function L(v){if(!v||!v.teams)return[];const _={Aces:{numerators:["aces"],calc:"number"},"Double Faults":{numerators:["doubleFaults"],calc:"number"},"First Serve %":{numerators:["serves1stIn"],denominators:["pointsServed"],calc:"percentage"},"Unforced Errors":{numerators:["unforcedErrors"],calc:"number"},"Forced Errors":{numerators:["forcedErrors"],calc:"number"},Winners:{numerators:["winners"],calc:"number"},"Total Points Won":{numerators:["pointsWon"],calc:"number"},"Max Pts/Row":{numerators:["pointsWon"],calc:"maxConsecutive",attribute:"index"},"Max Games/Row":{numerators:["gamesWon"],calc:"maxConsecutive",attribute:"game"},"Points Won 1st":{numerators:["serves1stWon"],denominators:["serves1stIn"],calc:"percentage"},"Points Won 2nd":{numerators:["serves2ndWon"],denominators:["serves2ndIn"],calc:"percentage"},"Points Won Receiving":{numerators:["received1stWon","received2ndWon"],denominators:["-pointsServed"],calc:"percentage"},"Breakpoints Saved":{numerators:["breakpointsSaved"],denominators:["breakpointsFaced"],calc:"percentage"},"Breakpoints Converted":{numerators:["-breakpointsSaved"],denominators:["-breakpointsFaced"],calc:"difference"},"Aggressive Margin":{calc:"aggressiveMargin",numerators:["*doubleFaults","*unforcedErrors"],denominators:["*aces","*winners","-*forcedErrors"]}},m=(V,H,X)=>{if(!V)return;const U=V.map(j=>{const J=j.split("-").reverse()[0].split("*").join(""),D=H[j.indexOf("-")==0?1-X:X];return D&&D[J]?D[J].length:0});return[].concat(0,0,...U).reduce((j,J)=>j+J)},P=(V,H,X)=>{const U=m(V.numerators,H,X),j=m(V.denominators,H,X);return{numerator:U,denominator:j}},z=(V,H)=>{const X=Math.round(V/H*100);return{value:X,display:`${X}% (${V}/${H})`}},W={number(V,H,X){const{numerator:U}=P(V,H,X);return{display:U,value:U,numerators:V.numerators}},maxConsecutive(V,H,X){const U=V.numerators[0],j=V.attribute,J=H[X][U];if(!J)return{value:0,display:0};let D,E=0,M=J.length?1:0;return J.forEach(C=>{D+1==C.point[j]?M+=1:(M>E&&(E=M),M=1),D=C.point[j]}),M>E&&(E=M),{display:E,value:E}},percentage(V,H,X){const{numerator:U,denominator:j}=P(V,H,X);return U==null||!j?{value:0,display:0}:Object.assign(z(U,j),{numerators:V.numerators})},difference(V,H,X){const{numerator:U,denominator:j}=P(V,H,X);if(U==null||!j)return{value:0,display:0};const J=Math.abs(j-U);return Object.assign(z(J,j),{numerators:V.numerators})},aggressiveMargin(V,H,X){const{numerator:U,denominator:j}=P(V,H,X),J=j-U,D=Object.keys(H).map(M=>H[M].pointsWon?H[M].pointsWon.length:0),E=[].concat(0,0,...D).reduce((M,C)=>M+C);return Object.assign(z(J,E),{numerators:V.numerators})}},Z=[].concat(...Object.keys(v.teams).map(V=>Object.keys(v.teams[V])));return Object.keys(_).map(V=>{const H=_[V];H.denominators||(H.denominators=[]);let X=[].concat(...H.numerators,...H.denominators).map(J=>J.split("-").reverse()[0]);if(X=X.filter(J=>J.indexOf("*")<0),!(X.map(J=>Z.indexOf(J)<0).filter(J=>J).length<1))return!1;const j=[0,1].map(J=>W[H.calc](H,v.teams,J));return{name:V,team_stats:j}}).filter(V=>V)}function O(v){const{player:_,episode:m,stat:P}=v??{};let z=v==null?void 0:v.team;_!=null&&(s.players[_]||(s.players[_]={}),s.players[_][P]||(s.players[_][P]=[]),m&&s.players[_][P].push(m),z=l.playerTeam(_)),z!=null&&(s.teams[z]||(s.teams[z]={}),s.teams[z][P]||(s.teams[z][P]=[]),m&&s.teams[z][P].push(m))}};function ti(t){return Array.isArray(t)?t.map(e=>!isNaN(e)).indexOf(!1)>=0:!1}const Zo=et,Qo="1.9",it={},Lt=Zo.Match(),kt={broadcast:void 0,user_uuid:void 0},Ft={track_shot_types:void 0,audible_clicks:void 0,display_gamefish:void 0,auto_swap_sides:void 0,point_buttons:void 0},b={lets:0,rally:0,undone:[],view:"entry",serve2nd:!1,rally_mode:!1,edit_player:void 0,match_swap:!1,swap_sides:!1,orientation:"vertical",serving:Lt.nextTeamServing(),receiving:Lt.nextTeamReceiving(),edit_point_index:void 0,provider:void 0,match:Lt},bn="rgb(64, 168, 75)",wn="rgb(255, 116, 51)",xn="rgb(221, 56, 48)",Et={first_serve:{color:bn,type:"toggle"},second_serve:{color:wn,type:"toggle"},double_fault:{color:xn,type:"flash"},penalty:{color:xn,type:"flash"},first_ace:{color:bn,type:"flash"},second_ace:{color:wn,type:"flash"},server_winner:{color:bn,type:"flash"},server_unforced:{color:xn,type:"flash"},server_forced:{color:wn,type:"flash"},receiving_winner:{color:bn,type:"flash"},receiving_unforced:{color:xn,type:"flash"},receiving_forced:{color:wn,type:"flash"}},an={user_swap:!1,highlight_better_stats:!0,vertical_view:rt.get("vertical_view")||"vblack",horizontal_view:rt.get("horizontal_view")||"hblack"},Ci={isStandalone:"standalone"in window.navigator&&window.navigator.standalone,isIDevice:/iphone|ipod|ipad/i.test(window.navigator.userAgent),isMobile:typeof window.orientation<"u",geoposition:{}},zn=["Player One","Player Two"];function yl(){Lt.events.clearEvents()}function fr(){const t=b.swap_sides?1:0,e=b.swap_sides?0:1;se();const n=Lt.metadata.players(),r=document.getElementById("playerone"),i=document.getElementById("playertwo");r&&(r.innerHTML=sn(n[t].name)),i&&(i.innerHTML=sn(n[e].name)),Array.from(document.querySelectorAll(".display_player_0")).forEach(a=>a.innerHTML=n[t].name),Array.from(document.querySelectorAll(".display_player_1")).forEach(a=>a.innerHTML=n[e].name)}function se(t){const e=Lt.history.points(),n=rt.get("current_match");if(!n)return;const r=Lt.metadata.players();if(!(t||e.length||r[0].name!=zn[0]&&r[1].name!=zn[1]))return;const s=JSON.parse(rt.get("match_archive")||"[]");s.indexOf(n)<0&&(s.push(n),rt.set("match_archive",JSON.stringify(s)));const o={ch_version:Qo,players:r,first_service:Lt.set.firstService(),match:Lt.metadata.defineMatch(),format:Lt.format.settings(),tournament:Lt.metadata.defineTournament(),points:e,scoreboard:Lt.scoreboard()};rt.set(n,JSON.stringify(o))}function _l(){const t=rt.get("CH_AppSettings");t&&Object.assign(Ft,JSON.parse(t)),Object.keys(Ft).forEach(n=>{const r=document.getElementById(n);r&&(r.checked=Ft[n])});const e=rt.get("CH_AppState");e&&Object.assign(kt,JSON.parse(e))}function Ni(){Object.keys(Ft).forEach(t=>{const e=document.getElementById(t);e&&(Ft[t]=e.checked)}),rt.set("CH_AppSettings",JSON.stringify(Ft)),rt.set("CH_AppState",JSON.stringify(kt))}function ta(){Ci.isMobile?b.orientation=window.screen.orientation.type=="landscape-primary"?"landscape":"portrait":b.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}function Oi(t){t=t||b.match.history.action("addPoint");const e=[{points:[]}];let n=0,r=0;return t==null||t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function he(){Array.from(document.querySelectorAll(".ch_modal")).forEach(t=>t.style.display="none")}function hr(){const t=b.match.score(),e=t.counters.sets,n=t.counters.games,r=t.points.split("-"),i=b.swap_sides?1:0,s=b.swap_sides?0:1;Array.from(document.getElementsByClassName("points")).forEach((g,k)=>{g.value=r[b.swap_sides?1-k:k]}),Array.from(document.querySelectorAll(".display_points_0")).forEach(g=>g.innerHTML=r[i]),Array.from(document.querySelectorAll(".display_points_1")).forEach(g=>g.innerHTML=r[s]),Array.from(document.querySelectorAll(".display_games_0")).forEach(g=>g.innerHTML=n[i]),Array.from(document.querySelectorAll(".display_games_1")).forEach(g=>g.innerHTML=n[s]),Array.from(document.querySelectorAll(".display_sets_0")).forEach(g=>g.innerHTML=e[i]),Array.from(document.querySelectorAll(".display_sets_1")).forEach(g=>g.innerHTML=e[s]);const d=t.components.sets,p=b.match.format.threshold(),y=p==1?0:p>2?4:2;[0,1,2,3,4].forEach(g=>{(!d||d&&!d[g])&&(Array.from(document.getElementsByClassName("games"+g)).forEach(L=>L.value="-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_0")).forEach(L=>L.innerHTML=g>y?" ":"-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_1")).forEach(L=>L.innerHTML=g>y?" ":"-"))}),d&&d.forEach((g,k)=>{Array.from(document.getElementsByClassName("games"+k)).forEach((O,v)=>O.value=g.games[b.swap_sides?1-v:v]),Array.from(document.getElementsByClassName("display_set_"+k+"_games_0")).forEach(O=>O.innerHTML=g.games[b.swap_sides?1:0]),Array.from(document.getElementsByClassName("display_set_"+k+"_games_1")).forEach(O=>O.innerHTML=g.games[b.swap_sides?0:1])})}function dr(){b.match.metadata.players().forEach((s,o)=>{["hand","entry","seed","draw_position","ioc","rank"].forEach(l=>{const c=`player${o}_${l}`,u=document.getElementById(c);u&&(u.value=s[l]||"")})});const e=b.match.metadata.defineMatch();["court","umpire"].forEach(s=>{const o=`match_${s}`,a=document.getElementById(o);a&&(a.value=e[s]||"")});const r=b.match.metadata.defineTournament();["name","start_date","tour","rank","surface","in_out","draw","draw_size","round"].forEach(s=>{const o=`tournament_${s}`,a=document.getElementById(o);a&&(a.value=r[s]||"")})}function Zt(){se(),b.serve2nd=!1,b.rally_mode=!1,Li(),hr(),pr()}function pr(){const t=b.match.history.action("addPoint"),e=JSON.parse(rt.get("match_archive")||"[]");Array.from(document.querySelectorAll(".view_stats")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".change_server")).forEach(s=>s.style.display=t.length==0?"inline":"none"),Array.from(document.querySelectorAll(".view_archive")).forEach(s=>s.style.display=t.length==0&&e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_settings")).forEach(s=>s.style.display=t.length==0&&!e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_history")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".undo")).forEach(s=>{s.style.display=t.length>0||b.serve2nd||b.rally_mode?"flex":"none"}),Array.from(document.querySelectorAll(".redo")).forEach(s=>{s.style.display=b.undone.length?"flex":"none"});const n=t.length?t[t.length-1]:void 0,r=i();b.match.status=r,Array.from(document.querySelectorAll(".status_message")).forEach(s=>s.innerHTML=r);function i(){if(n){if(n.needed.points_to_set&&Math.min(...n.needed.points_to_set)==1)return"SET POINT";if(n.point.breakpoint)return"BREAK POINT";if(n.needed.points_to_game&&n.needed.points_to_game[n.point.server]==1)return"GAME POINT"}return b.lets?`Lets: ${b.lets}`:""}}function Li(){b.match.nextTeamServing()!=b.serving&&setTimeout(()=>gr(),400),mr(),fr()}function mr(){const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;Array.from(document.querySelectorAll(".fault")).forEach(u=>u.innerHTML="Fault");const n=`.modeaction_player${t}`;Array.from(document.querySelectorAll(n)).forEach(u=>u.innerHTML="Serve");const r=`.modeerr_player${t}`;Array.from(document.querySelectorAll(r)).forEach(u=>u.innerHTML="Fault");const i=`.modewin_player${t}`;Array.from(document.querySelectorAll(i)).forEach(u=>u.innerHTML="Ace");const s=`.modeforce_player${t}`;Array.from(document.querySelectorAll(s)).forEach(u=>u.innerHTML="Let");const o=`.modeaction_player${e}`;Array.from(document.querySelectorAll(o)).forEach(u=>u.innerHTML="Return");const a=`.modeerr_player${e}`;Array.from(document.querySelectorAll(a)).forEach(u=>u.innerHTML="UFE");const l=`.modewin_player${e}`;Array.from(document.querySelectorAll(l)).forEach(u=>u.innerHTML="Winner");const c=`.modeforce_player${e}`;Array.from(document.querySelectorAll(c)).forEach(u=>u.innerHTML="Forced"),Array.from(document.querySelectorAll(".vs_point_button")).forEach(u=>u.style.display=Ft.point_buttons?"flex":"none"),Array.from(document.querySelectorAll(".rally")).forEach(u=>u.innerHTML="Rally")}function gr(){if(b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),Ft.auto_swap_sides){const r=Oi();let i=r.length;r[r.length-1].complete&&(i+=1),b.match_swap=vl(i)}else b.match_swap=!1;ea();const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;Ls(`.indicate_serve.display_player_${t}`,"yellow"),Ls(`.indicate_serve.display_player_${e}`,"white"),t?(kn(".display_0_serving","none"),kn(".display_1_serving","flex")):(kn(".display_0_serving","flex"),kn(".display_1_serving","none")),Array.from(document.getElementsByClassName("points")).forEach((r,i)=>{const s=b.swap_sides?1-i:i;r.style.backgroundColor=s==b.serving?"#FBF781":"#D1FBFB"}),mr()}function vl(t){return![!0].concat([...Array(t).keys()].map(n=>(n+1)%4<2))[t]}function ea(){b.swap_sides=b.match_swap,an.user_swap&&(b.swap_sides=!b.swap_sides),Zt()}function Ls(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.color=e)}function kn(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.display=e)}function bl(t){if(t.keyCode==13||t.code==9){const e=document.getElementById("player_hand");e&&e.focus(),ei()}}function ei(){const t=document.getElementById("playername"),e=document.getElementById("team"),n=document.getElementById("playerid");if(t){const r={index:b.edit_player,name:t.value};e&&(r.team=e.value),n&&(r.id=n.value),b.match.metadata.definePlayer(r)}fr()}function wl(){he();const t=document.getElementById("matchdeets");t&&(t.style.display="flex");const e=document.getElementById("matchdetail_content");e&&(e.scrollTop=0)}const xl="/mobile2/assets/exportwhite-3Rc7oKSc.png",kl="/mobile2/assets/recycle-rzIDJowx.png";function Al(t){t=t||rt.get("current_match"),Array.from(document.querySelectorAll(".mh_export")).forEach(a=>a.style.display="none");const e=rt.get(t),n=`
   <p>&nbsp;</p>
   <h1>Export Options</h1>
   <p>Supported by your device</p>
`,r=`
   <div matchId="${t}" class="exportMatch flexcenter">
      <div matchId="${t}" class='exportMatch export_action action_icon iconsave'></div>
   </div>
`,i=`
   <div class="flexcenter">
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
         <div class='export_action action_icon iconclipboard'></div> 
      </button>
   </div> 
`,s=`<div>${n}<div class="flexrows flexcenter">${Ci.isIDevice?"":r}${i}</div></div>`;Ut(s,e)}function Sl(){return b.match.history.points().length==0}function El(){const t=Tl(),e=b.match.metadata.players();let n="";if(!t.length)return!1;t.forEach(i=>{i.points&&i.points.length&&(n+=Ml(i,e))}),n+=`
    <div class="flexrows ph_game">
      <div class='ph_margin' style='width: 100%'>
          <div class='flexcenter' style='width: 100%'>Duration ${Nl()}</div>
      </div>
    </div>
  `;const r=document.getElementById("ph_frame");r&&(r.innerHTML=n)}function Tl(){const t=b.match.history.action("addPoint"),e=[{points:[]}];let n=0,r=0;return t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function Ml(t,e){const n=t.points[t.points.length-1],r=t.complete?t.score.join("-"):void 0,i=n.tiebreak,s=i?"Tiebreak":e[n.server].name,o=i?"":n.server?"playertwo":"playerone",a=i?"":n.server==n.winner?"won":"lost";let l=`
         <div class="flexrows ph_game">
            <div class='ph_margin flexrows'>
               <div class="ph_server ${o}">${s}</div>
               <div class="ph_action flexcenter"> 
                  <div class='ph_fish iconfish'></div>
               </div>
               <div class='viewGameFish ph_rally gameIndex="${t.index}" ph_${a}''> <b class="viewGameFish" gameIndex="${t.index}">${r||""}</b> </div>
            </div>
         </div>
      `;return t.points.forEach(c=>{l+=Cl(c,e)}),l}function Cl(t,e){const n=t.index%2?"even":"odd";let r=!t.tiebreak&&t.server?t.score.split("-").reverse().join("-"):t.score,i;if(t.result){let c;["Ace","Winner"].indexOf(t.result)>=0?c=e[t.winner].name:c=e[1-t.winner].name,i=c.split(" ").map(u=>u[0]).join("")}const s=t.hand?t.hand+" ":"",o=t.result||"",a=o?`${i}: ${s}${o}`:"";r=r=="0-0"?"GAME":r,t.tiebreak&&(t.server&&(r=`&nbsp;${r}*`),t.server||(r=`*${r}&nbsp;`));const l=t.rally?t.rally.length+1:"";return`
    <div class='flexrows ph_episode' pointIndex="${t.index}">
        <div class='ph_point_${n} flexrows'>
          <div class='viewEditPoint ph_result'>${a}</div>
          <div class='viewEditPoint ph_score'>${r} </div>
          <div class='viewEditPoint ph_score'>${l}</div>
        </div>
    </div>
    `}function Nl(){const t=b.match.history.points().map(i=>i.uts),e=Math.min(...t),r=(Math.max(...t)-e)/1e3;return Ol(r)}function Ol(t){const e=parseInt(t,10);let n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),i=e-n*3600-r*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i}function Ll(){const t=b.match.format.types();let e="";if(!t.length)return!1;t.forEach(r=>{e+=Rl(r)});const n=document.getElementById("matchformatlist");n&&(n.innerHTML=e)}function Rl(t){const{name:e,description:n}=Zo.formats().matches[t];return`
  <div class='changeFormat flexjustifystart mf_format' newFormat="${t}">
      <div class='changeFormat flexcols'>
        <div class='changeFormat mf_name'> <b class='changeFormat'>${e||""}</b> </div>
        <div class='changeFormat mf_description'> ${n} </div>
      </div>
  </div>
  `}function na(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pl(t){return t.length===1&&(t=Il(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function Il(t){return function(e,n){return na(t(e),n)}}var Dl=Pl(na),Bl=Dl.right;function Bt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Fl=Math.sqrt(50),Ul=Math.sqrt(10),Hl=Math.sqrt(2);function $l(t,e,n){var r=Gn(t,e,n);return Bt(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function Gn(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Fl?i*=10:s>=Ul?i*=5:s>=Hl&&(i*=2),e<t?-i:i}var Cr=Array.prototype.slice;function Rs(t){return t}var Nr=1,Or=2,ni=3,Xe=4,Ps=1e-6;function zl(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function Gl(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function ql(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function Wl(){return!this.__axis}function ra(t,e){var n=[],r=null,i=null,s=6,o=6,a=3;function l(c){var u=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):Rs),h=Math.max(s,0)+a,d=t===Nr||t===ni?zl:Gl,p=e.range(),y=p[0]+.5,g=p[p.length-1]+.5,k=(e.bandwidth?ql:Rs)(e.copy()),A=c.selection?c.selection():c,x=A.selectAll(".domain").data([null]),L=A.selectAll(".tick").data(u,e).order(),O=L.exit(),v=L.enter().append("g").attr("class","tick"),_=L.select("line"),m=L.select("text"),P=t===Nr||t===Xe?-1:1,z,W=t===Xe||t===Or?(z="x","y"):(z="y","x");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),L=L.merge(v),_=_.merge(v.append("line").attr("stroke","#000").attr(z+"2",P*s).attr(W+"1",.5).attr(W+"2",.5)),m=m.merge(v.append("text").attr("fill","#000").attr(z,P*h).attr(W,.5).attr("dy",t===Nr?"0em":t===ni?"0.71em":"0.32em")),c!==A&&(x=x.transition(c),L=L.transition(c),_=_.transition(c),m=m.transition(c),O=O.transition(c).attr("opacity",Ps).attr("transform",function(Z){return d(k,this.parentNode.__axis||k,Z)}),v.attr("opacity",Ps).attr("transform",function(Z){return d(this.parentNode.__axis||k,k,Z)})),O.remove(),x.attr("d",t===Xe||t==Or?"M"+P*o+","+y+"H0.5V"+g+"H"+P*o:"M"+y+","+P*o+"V0.5H"+g+"V"+P*o),L.attr("opacity",1).attr("transform",function(Z){return d(k,k,Z)}),_.attr(z+"2",P*s),m.attr(z,P*h).text(f),A.filter(Wl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Or?"start":t===Xe?"end":"middle"),A.each(function(){this.__axis=k})}return l.scale=function(c){return arguments.length?(e=c,l):e},l.ticks=function(){return n=Cr.call(arguments),l},l.tickArguments=function(c){return arguments.length?(n=c==null?[]:Cr.call(c),l):n.slice()},l.tickValues=function(c){return arguments.length?(r=c==null?null:Cr.call(c),l):r&&r.slice()},l.tickFormat=function(c){return arguments.length?(i=c,l):i},l.tickSize=function(c){return arguments.length?(s=o=+c,l):s},l.tickSizeInner=function(c){return arguments.length?(s=+c,l):s},l.tickSizeOuter=function(c){return arguments.length?(o=+c,l):o},l.tickPadding=function(c){return arguments.length?(a=+c,l):a},l}function Yl(t){return ra(ni,t)}function Vl(t){return ra(Xe,t)}var Xl={value:function(){}};function ia(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new In(n)}function In(t){this._=t}function Kl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}In.prototype=ia.prototype={constructor:In,on:function(t,e){var n=this._,r=Kl(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Jl(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Is(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Is(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new In(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Jl(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Is(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Xl,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ri="http://www.w3.org/1999/xhtml";const Ds={svg:"http://www.w3.org/2000/svg",xhtml:ri,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ds.hasOwnProperty(e)?{space:Ds[e],local:t}:t}function jl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ri&&e.documentElement.namespaceURI===ri?e.createElement(t):e.createElementNS(n,t)}}function Zl(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function sa(t){var e=yr(t);return(e.local?Zl:jl)(e)}var Ql=0;function Bs(){this._="@"+(++Ql).toString(36)}Bs.prototype={constructor:Bs,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var oa=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var Ue=document.documentElement;if(!Ue.matches){var tu=Ue.webkitMatchesSelector||Ue.msMatchesSelector||Ue.mozMatchesSelector||Ue.oMatchesSelector;oa=function(t){return function(){return tu.call(this,t)}}}}const aa=oa;var ca={};if(typeof document<"u"){var eu=document.documentElement;"onmouseenter"in eu||(ca={mouseenter:"mouseover",mouseleave:"mouseout"})}function nu(t,e,n){return t=la(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function la(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function ru(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function iu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function su(t,e,n){var r=ca.hasOwnProperty(t.type)?nu:la;return function(i,s,o){var a=this.__on,l,c=r(e,s,o);if(a){for(var u=0,f=a.length;u<f;++u)if((l=a[u]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},a?a.push(l):this.__on=[l]}}function ou(t,e,n){var r=ru(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?su:iu,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}function au(){}function Ri(t){return t==null?au:function(){return this.querySelector(t)}}function cu(t){typeof t!="function"&&(t=Ri(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new At(r,this._parents)}function lu(){return[]}function ua(t){return t==null?lu:function(){return this.querySelectorAll(t)}}function uu(t){typeof t!="function"&&(t=ua(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new At(r,i)}function fu(t){typeof t!="function"&&(t=aa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new At(r,this._parents)}function fa(t){return new Array(t.length)}function hu(){return new At(this._enter||this._groups.map(fa),this._parents)}function qn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qn.prototype={constructor:qn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function du(t){return function(){return t}}var Fs="$";function pu(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new qn(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function mu(t,e,n,r,i,s,o){var a,l,c={},u=e.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(h[a]=d=Fs+o.call(l,l.__data__,a,e),d in c?i[a]=l:c[d]=l);for(a=0;a<f;++a)d=Fs+o.call(t,s[a],a,s),(l=c[d])?(r[a]=l,l.__data__=s[a],c[d]=null):n[a]=new qn(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c[h[a]]===l&&(i[a]=l)}function gu(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(v){d[++c]=v}),d;var n=e?mu:pu,r=this._parents,i=this._groups;typeof t!="function"&&(t=du(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=t.call(u,u&&u.__data__,c,r),p=d.length,y=a[c]=new Array(p),g=o[c]=new Array(p),k=l[c]=new Array(h);n(u,f,y,g,k,d,e);for(var A=0,x=0,L,O;A<p;++A)if(L=y[A]){for(A>=x&&(x=A+1);!(O=g[x])&&++x<p;);L._next=O||null}}return o=new At(o,r),o._enter=a,o._exit=l,o}function yu(){return new At(this._exit||this._groups.map(fa),this._parents)}function _u(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new At(o,this._parents)}function vu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o);return this}function bu(t){t||(t=wu);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new At(i,this._parents).order()}function wu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ku(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Au(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Su(){var t=0;return this.each(function(){++t}),t}function Eu(){return!this.node()}function Tu(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function Mu(t){return function(){this.removeAttribute(t)}}function Cu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nu(t,e){return function(){this.setAttribute(t,e)}}function Ou(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ru(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pu(t,e){var n=yr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Cu:Mu:typeof e=="function"?n.local?Ru:Lu:n.local?Ou:Nu)(n,e))}function pn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Iu(t){return function(){this.style.removeProperty(t)}}function Du(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Bu(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Fu(t,e,n){var r;return arguments.length>1?this.each((e==null?Iu:typeof e=="function"?Bu:Du)(t,e,n??"")):pn(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function Uu(t){return function(){delete this[t]}}function Hu(t,e){return function(){this[t]=e}}function $u(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function zu(t,e){return arguments.length>1?this.each((e==null?Uu:typeof e=="function"?$u:Hu)(t,e)):this.node()[t]}function ha(t){return t.trim().split(/^|\s+/)}function Pi(t){return t.classList||new da(t)}function da(t){this._node=t,this._names=ha(t.getAttribute("class")||"")}da.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pa(t,e){for(var n=Pi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ma(t,e){for(var n=Pi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Gu(t){return function(){pa(this,t)}}function qu(t){return function(){ma(this,t)}}function Wu(t,e){return function(){(e.apply(this,arguments)?pa:ma)(this,t)}}function Yu(t,e){var n=ha(t+"");if(arguments.length<2){for(var r=Pi(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Wu:e?Gu:qu)(n,e))}function Vu(){this.textContent=""}function Xu(t){return function(){this.textContent=t}}function Ku(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ju(t){return arguments.length?this.each(t==null?Vu:(typeof t=="function"?Ku:Xu)(t)):this.node().textContent}function ju(){this.innerHTML=""}function Zu(t){return function(){this.innerHTML=t}}function Qu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function tf(t){return arguments.length?this.each(t==null?ju:(typeof t=="function"?Qu:Zu)(t)):this.node().innerHTML}function ef(){this.nextSibling&&this.parentNode.appendChild(this)}function nf(){return this.each(ef)}function rf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sf(){return this.each(rf)}function of(t){var e=typeof t=="function"?t:sa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function af(){return null}function cf(t,e){var n=typeof t=="function"?t:sa(t),r=e==null?af:typeof e=="function"?e:Ri(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lf(){var t=this.parentNode;t&&t.removeChild(this)}function uf(){return this.each(lf)}function ff(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ga(t,e,n){var r=pn(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hf(t,e){return function(){return ga(this,t,e)}}function df(t,e){return function(){return ga(this,t,e.apply(this,arguments))}}function pf(t,e){return this.each((typeof e=="function"?df:hf)(t,e))}var Ii=[null];function At(t,e){this._groups=t,this._parents=e}function mn(){return new At([[document.documentElement]],Ii)}At.prototype=mn.prototype={constructor:At,select:cu,selectAll:uu,filter:fu,data:gu,enter:hu,exit:yu,merge:_u,order:vu,sort:bu,call:xu,nodes:ku,node:Au,size:Su,empty:Eu,each:Tu,attr:Pu,style:Fu,property:zu,classed:Yu,text:Ju,html:tf,raise:nf,lower:sf,append:of,insert:cf,remove:uf,datum:ff,on:ou,dispatch:pf};function at(t){return typeof t=="string"?new At([[document.querySelector(t)]],[document.documentElement]):new At([[t]],Ii)}function ii(t){return typeof t=="string"?new At([document.querySelectorAll(t)],[document.documentElement]):new At([t??[]],Ii)}function Ie(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function oe(){}var ue=.7,Ce=1/ue,Se="\\s*([+-]?\\d+)\\s*",cn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mf=/^#([0-9a-f]{3})$/,gf=/^#([0-9a-f]{6})$/,yf=new RegExp("^rgb\\("+[Se,Se,Se]+"\\)$"),_f=new RegExp("^rgb\\("+[Gt,Gt,Gt]+"\\)$"),vf=new RegExp("^rgba\\("+[Se,Se,Se,cn]+"\\)$"),bf=new RegExp("^rgba\\("+[Gt,Gt,Gt,cn]+"\\)$"),wf=new RegExp("^hsl\\("+[cn,Gt,Gt]+"\\)$"),xf=new RegExp("^hsla\\("+[cn,Gt,Gt,cn]+"\\)$"),Us={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ie(oe,fe,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function fe(t){var e;return t=(t+"").trim().toLowerCase(),(e=mf.exec(t))?(e=parseInt(e[1],16),new bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1)):(e=gf.exec(t))?Hs(parseInt(e[1],16)):(e=yf.exec(t))?new bt(e[1],e[2],e[3],1):(e=_f.exec(t))?new bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vf.exec(t))?$s(e[1],e[2],e[3],e[4]):(e=bf.exec(t))?$s(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wf.exec(t))?zs(e[1],e[2]/100,e[3]/100,1):(e=xf.exec(t))?zs(e[1],e[2]/100,e[3]/100,e[4]):Us.hasOwnProperty(t)?Hs(Us[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function Hs(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function $s(t,e,n,r){return r<=0&&(t=e=n=NaN),new bt(t,e,n,r)}function Di(t){return t instanceof oe||(t=fe(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function si(t,e,n,r){return arguments.length===1?Di(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ie(bt,si,gn(oe,{brighter:function(t){return t=t==null?Ce:Math.pow(Ce,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ue:Math.pow(ue,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function zs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $t(t,e,n,r)}function kf(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);if(t instanceof oe||(t=fe(t)),!t)return new $t;if(t instanceof $t)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new $t(o,a,l,t.opacity)}function Af(t,e,n,r){return arguments.length===1?kf(t):new $t(t,e,n,r??1)}function $t(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie($t,Af,gn(oe,{brighter:function(t){return t=t==null?Ce:Math.pow(Ce,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ue:Math.pow(ue,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bt(Lr(t>=240?t-240:t+120,i,r),Lr(t,i,r),Lr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));function Lr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var ya=Math.PI/180,_a=180/Math.PI,Wn=18,va=.95047,ba=1,wa=1.08883,xa=4/29,Ee=6/29,ka=3*Ee*Ee,Sf=Ee*Ee*Ee;function Bi(t){if(t instanceof Xt)return new Xt(t.l,t.a,t.b,t.opacity);if(t instanceof re){var e=t.h*ya;return new Xt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof bt||(t=Di(t));var n=Dr(t.r),r=Dr(t.g),i=Dr(t.b),s=Rr((.4124564*n+.3575761*r+.1804375*i)/va),o=Rr((.2126729*n+.7151522*r+.072175*i)/ba),a=Rr((.0193339*n+.119192*r+.9503041*i)/wa);return new Xt(116*o-16,500*(s-o),200*(o-a),t.opacity)}function Ef(t,e,n,r){return arguments.length===1?Bi(t):new Xt(t,e,n,r??1)}function Xt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Ie(Xt,Ef,gn(oe,{brighter:function(t){return new Xt(this.l+Wn*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new Xt(this.l-Wn*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=ba*Pr(t),e=va*Pr(e),n=wa*Pr(n),new bt(Ir(3.2404542*e-1.5371385*t-.4985314*n),Ir(-.969266*e+1.8760108*t+.041556*n),Ir(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}}));function Rr(t){return t>Sf?Math.pow(t,1/3):t/ka+xa}function Pr(t){return t>Ee?t*t*t:ka*(t-xa)}function Ir(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Dr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tf(t){if(t instanceof re)return new re(t.h,t.c,t.l,t.opacity);t instanceof Xt||(t=Bi(t));var e=Math.atan2(t.b,t.a)*_a;return new re(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function oi(t,e,n,r){return arguments.length===1?Tf(t):new re(t,e,n,r??1)}function re(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Ie(re,oi,gn(oe,{brighter:function(t){return new re(this.h,this.c,this.l+Wn*(t??1),this.opacity)},darker:function(t){return new re(this.h,this.c,this.l-Wn*(t??1),this.opacity)},rgb:function(){return Bi(this).rgb()}}));var Aa=-.14861,Fi=1.78277,Ui=-.29227,_r=-.90649,ln=1.97294,Gs=ln*_r,qs=ln*Fi,Ws=Fi*Ui-_r*Aa;function Mf(t){if(t instanceof le)return new le(t.h,t.s,t.l,t.opacity);t instanceof bt||(t=Di(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ws*r+Gs*e-qs*n)/(Ws+Gs-qs),s=r-i,o=(ln*(n-i)-Ui*s)/_r,a=Math.sqrt(o*o+s*s)/(ln*i*(1-i)),l=a?Math.atan2(o,s)*_a-120:NaN;return new le(l<0?l+360:l,a,i,t.opacity)}function Wt(t,e,n,r){return arguments.length===1?Mf(t):new le(t,e,n,r??1)}function le(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie(le,Wt,gn(oe,{brighter:function(t){return t=t==null?Ce:Math.pow(Ce,t),new le(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ue:Math.pow(ue,t),new le(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ya,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new bt(255*(e+n*(Aa*r+Fi*i)),255*(e+n*(Ui*r+_r*i)),255*(e+n*(ln*r)),this.opacity)}}));function vr(t){return function(){return t}}function Sa(t,e){return function(n){return t+n*e}}function Cf(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ea(t,e){var n=e-t;return n?Sa(t,n>180||n<-180?n-360*Math.round(n/360):n):vr(isNaN(t)?e:t)}function Nf(t){return(t=+t)==1?Jt:function(e,n){return n-e?Cf(e,n,t):vr(isNaN(e)?n:e)}}function Jt(t,e){var n=e-t;return n?Sa(t,n):vr(isNaN(t)?e:t)}const Yn=function t(e){var n=Nf(e);function r(i,s){var o=n((i=si(i)).r,(s=si(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Jt(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Of(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(n),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Hi(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Lf(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function Dt(t,e){return t=+t,e-=t,function(n){return t+e*n}}function Rf(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Br=new RegExp(ai.source,"g");function Pf(t){return function(){return t}}function If(t){return function(e){return t(e)+""}}function Ta(t,e){var n=ai.lastIndex=Br.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=ai.exec(t))&&(i=Br.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Dt(r,i)})),n=Br.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?If(l[0].x):Pf(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Hi(t,e){var n=typeof e,r;return e==null||n==="boolean"?vr(e):(n==="number"?Dt:n==="string"?(r=fe(e))?(e=r,Yn):Ta:e instanceof fe?Yn:e instanceof Date?Lf:Array.isArray(e)?Of:isNaN(e)?Rf:Dt)(t,e)}function Df(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}var Ys=180/Math.PI,ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ma(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ys,skewX:Math.atan(l)*Ys,scaleX:o,scaleY:a}}var He,Fr,Vs,An;function Bf(t){return t==="none"?ci:(He||(He=document.createElement("DIV"),Fr=document.documentElement,Vs=document.defaultView),He.style.transform=t,t=Vs.getComputedStyle(Fr.appendChild(He),null).getPropertyValue("transform"),Fr.removeChild(He),t=t.slice(7,-1).split(","),Ma(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Ff(t){return t==null||(An||(An=document.createElementNS("http://www.w3.org/2000/svg","g")),An.setAttribute("transform",t),!(t=An.transform.baseVal.consolidate()))?ci:(t=t.matrix,Ma(t.a,t.b,t.c,t.d,t.e,t.f))}function Ca(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var y=d.push("translate(",null,e,null,n);p.push({i:y-4,x:Dt(c,f)},{i:y-2,x:Dt(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Dt(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Dt(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var y=d.push(i(d)+"scale(",null,",",null,")");p.push({i:y-4,x:Dt(c,f)},{i:y-2,x:Dt(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,y=h.length,g;++p<y;)f[(g=h[p]).i]=g.x(d);return f.join("")}}}var Uf=Ca(Bf,"px, ","px)","deg)"),Hf=Ca(Ff,", ",")",")");function $f(t){return function(e,n){var r=t((e=oi(e)).h,(n=oi(n)).h),i=Jt(e.c,n.c),s=Jt(e.l,n.l),o=Jt(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const zf=$f(Ea);function Na(t){return function e(n){n=+n;function r(i,s){var o=t((i=Wt(i)).h,(s=Wt(s)).h),a=Jt(i.s,s.s),l=Jt(i.l,s.l),c=Jt(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}Na(Ea);var $i=Na(Jt),Ne=0,Ke=0,$e=0,Oa=1e3,Vn,Je,Xn=0,ie=0,zi=0,Gi=typeof performance=="object"&&performance.now?performance:Date,La=typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){setTimeout(t,17)};function br(){return ie||(La(Gf),ie=Gi.now()+zi)}function Gf(){ie=0}function Kn(){this._call=this._time=this._next=null}Kn.prototype=Ra.prototype={constructor:Kn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?br():+n)+(e==null?0:+e),!this._next&&Je!==this&&(Je?Je._next=this:Vn=this,Je=this),this._call=t,this._time=n,li()},stop:function(){this._call&&(this._call=null,this._time=1/0,li())}};function Ra(t,e,n){var r=new Kn;return r.restart(t,e,n),r}function qf(){br(),++Ne;for(var t=Vn,e;t;)(e=ie-t._time)>=0&&t._call.call(null,e),t=t._next;--Ne}function Xs(){ie=(Xn=Gi.now())+zi,Ne=Ke=0;try{qf()}finally{Ne=0,Yf(),ie=0}}function Wf(){var t=Gi.now(),e=t-Xn;e>Oa&&(zi-=e,Xn=t)}function Yf(){for(var t,e=Vn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Vn=n);Je=t,li(r)}function li(t){if(!Ne){Ke&&(Ke=clearTimeout(Ke));var e=t-ie;e>24?(t<1/0&&(Ke=setTimeout(Xs,e)),$e&&($e=clearInterval($e))):($e||(Xn=ie,$e=setInterval(Wf,Oa)),Ne=1,La(Xs))}}function Ks(t,e,n){var r=new Kn;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var Vf=ia("start","end","interrupt"),Xf=[],Pa=0,ui=1,Jn=2,Ur=3,Js=4,fi=5,Dn=6;function wr(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Kf(t,n,{name:e,index:r,group:i,on:Vf,tween:Xf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Pa})}function qi(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Pa)throw new Error("too late");return n}function de(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Jn)throw new Error("too late");return n}function Qt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Kf(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ra(s,0,n.time);function s(c){n.state=ui,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==ui)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ur)return Ks(o);d.state===Js?(d.state=Dn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Dn,d.timer.stop(),delete r[u])}if(Ks(function(){n.state===Ur&&(n.state=Js,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Jn){for(n.state=Ur,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=fi,1),f=-1,h=i.length;++f<h;)i[f].call(null,u);n.state===fi&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Dn,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Jf(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Jn&&r.state<fi,r.state=Dn,r.timer.stop(),i&&r.on.call("interrupt",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function jf(t){return this.each(function(){Jf(this,t)})}function Zf(t,e){var n,r;return function(){var i=de(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Qf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=de(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function th(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Qt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Zf:Qf)(n,t,e))}function Wi(t,e,n){var r=t._id;return t.each(function(){var i=de(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Qt(i,r).value[e]}}function Ia(t,e){var n;return(typeof e=="number"?Dt:e instanceof fe?Yn:(n=fe(e))?(e=n,Yn):Ta)(t,e)}function eh(t){return function(){this.removeAttribute(t)}}function nh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rh(t,e,n){var r,i;return function(){var s=this.getAttribute(t);return s===n?null:s===r?i:i=e(r=s,n)}}function ih(t,e,n){var r,i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===r?i:i=e(r=s,n)}}function sh(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function oh(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function ah(t,e){var n=yr(t),r=n==="transform"?Hf:Ia;return this.attrTween(t,typeof e=="function"?(n.local?oh:sh)(n,r,Wi(this,"attr."+t,e)):e==null?(n.local?nh:eh)(n):(n.local?ih:rh)(n,r,e))}function ch(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttributeNS(t.space,t.local,i(s))}}return n._value=e,n}function lh(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttribute(t,i(s))}}return n._value=e,n}function uh(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=yr(t);return this.tween(n,(r.local?ch:lh)(r,e))}function fh(t,e){return function(){qi(this,t).delay=+e.apply(this,arguments)}}function hh(t,e){return e=+e,function(){qi(this,t).delay=e}}function dh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fh:hh)(e,t)):Qt(this.node(),e).delay}function ph(t,e){return function(){de(this,t).duration=+e.apply(this,arguments)}}function mh(t,e){return e=+e,function(){de(this,t).duration=e}}function gh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ph:mh)(e,t)):Qt(this.node(),e).duration}function yh(t,e){if(typeof e!="function")throw new Error;return function(){de(this,t).ease=e}}function _h(t){var e=this._id;return arguments.length?this.each(yh(e,t)):Qt(this.node(),e).ease}function vh(t){typeof t!="function"&&(t=aa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Yt(r,this._parents,this._name,this._id)}function bh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Yt(o,this._parents,this._name,this._id)}function wh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xh(t,e,n){var r,i,s=wh(e)?qi:de;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function kh(t,e){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(t):this.each(xh(n,t,e))}function Ah(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Sh(){return this.on("end.remove",Ah(this._id))}function Eh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ri(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,wr(c[h],e,n,h,c,Qt(u,n)));return new Yt(s,this._parents,e,n)}function Th(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ua(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,p=Qt(u,n),y=0,g=h.length;y<g;++y)(d=h[y])&&wr(d,e,n,y,h,p);s.push(h),o.push(u)}return new Yt(s,o,e,n)}var Mh=mn.prototype.constructor;function Ch(){return new Mh(this._groups,this._parents)}function Nh(t,e){var n,r,i;return function(){var s=pn(this).getComputedStyle(this,null),o=s.getPropertyValue(t),a=(this.style.removeProperty(t),s.getPropertyValue(t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Oh(t){return function(){this.style.removeProperty(t)}}function Lh(t,e,n){var r,i;return function(){var s=pn(this).getComputedStyle(this,null).getPropertyValue(t);return s===n?null:s===r?i:i=e(r=s,n)}}function Rh(t,e,n){var r,i,s;return function(){var o=pn(this).getComputedStyle(this,null),a=o.getPropertyValue(t),l=n(this);return l==null&&(l=(this.style.removeProperty(t),o.getPropertyValue(t))),a===l?null:a===r&&l===i?s:s=e(r=a,i=l)}}function Ph(t,e,n){var r=(t+="")=="transform"?Uf:Ia;return e==null?this.styleTween(t,Nh(t,r)).on("end.style."+t,Oh(t)):this.styleTween(t,typeof e=="function"?Rh(t,r,Wi(this,"style."+t,e)):Lh(t,r,e),n)}function Ih(t,e,n){function r(){var i=this,s=e.apply(i,arguments);return s&&function(o){i.style.setProperty(t,s(o),n)}}return r._value=e,r}function Dh(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ih(t,e,n??""))}function Bh(t){return function(){this.textContent=t}}function Fh(t){return function(){var e=t(this);this.textContent=e??""}}function Uh(t){return this.tween("text",typeof t=="function"?Fh(Wi(this,"text",t)):Bh(t==null?"":t+""))}function Hh(){for(var t=this._name,e=this._id,n=Da(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Qt(l,e);wr(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yt(r,this._parents,t,n)}var $h=0;function Yt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Da(){return++$h}var _e=mn.prototype;Yt.prototype={constructor:Yt,select:Eh,selectAll:Th,filter:vh,merge:bh,selection:Ch,transition:Hh,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:kh,attr:ah,attrTween:uh,style:Ph,styleTween:Dh,text:Uh,remove:Sh,tween:th,delay:dh,duration:gh,ease:_h};function zh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yi=3;(function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n})(Yi);(function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n})(Yi);(function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n})(Yi);var Vi=1.70158;(function t(e){e=+e;function n(r){return r*r*((e+1)*r-e)}return n.overshoot=t,n})(Vi);(function t(e){e=+e;function n(r){return--r*r*((e+1)*r+e)+1}return n.overshoot=t,n})(Vi);(function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n})(Vi);var Oe=2*Math.PI,Xi=1,Ki=.3;(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Oe);function i(s){return e*Math.pow(2,10*--s)*Math.sin((r-s)/n)}return i.amplitude=function(s){return t(s,n*Oe)},i.period=function(s){return t(e,s)},i})(Xi,Ki);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Oe);function i(s){return 1-e*Math.pow(2,-10*(s=+s))*Math.sin((s+r)/n)}return i.amplitude=function(s){return t(s,n*Oe)},i.period=function(s){return t(e,s)},i})(Xi,Ki);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Oe);function i(s){return((s=s*2-1)<0?e*Math.pow(2,10*s)*Math.sin((r-s)/n):2-e*Math.pow(2,-10*s)*Math.sin((r+s)/n))/2}return i.amplitude=function(s){return t(s,n*Oe)},i.period=function(s){return t(e,s)},i})(Xi,Ki);var hi={time:null,delay:0,duration:250,ease:zh};function Gh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return hi.time=br(),hi;return n}function qh(t){var e,n;t instanceof Yt?(e=t._id,t=t._name):(e=Da(),(n=hi).time=br(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&wr(l,t,e,c,o,n||Gh(l,e));return new Yt(r,this._parents,t,e)}mn.prototype.interrupt=jf;mn.prototype.transition=qh;var Wh=[null];function Yh(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>ui&&r.name===e)return new Yt([[t]],Wh,e,+i)}return null}var di=Math.PI,pi=2*di,be=1e-6,Vh=pi-be;function mi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ba(){return new mi}mi.prototype=Ba.prototype={constructor:mi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>be)if(!(Math.abs(u*a-l*c)>be)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=r-o,p=a*a+l*l,y=h*h+d*d,g=Math.sqrt(p),k=Math.sqrt(f),A=i*Math.tan((di-Math.acos((p+f-y)/(2*g*k)))/2),x=A/k,L=A/g;Math.abs(x-1)>be&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+L*a)+","+(this._y1=e+L*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>be||Math.abs(this._y1-c)>be)&&(this._+="L"+l+","+c),n&&(f>Vh?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):(f<0&&(f=f%pi+pi),this._+="A"+n+","+n+",0,"+ +(f>=di)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Nt="$";function jn(){}jn.prototype=Zn.prototype={constructor:jn,has:function(t){return Nt+t in this},get:function(t){return this[Nt+t]},set:function(t,e){return this[Nt+t]=e,this},remove:function(t){var e=Nt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Nt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Nt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Nt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Nt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Nt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Nt)return!1;return!0},each:function(t){for(var e in this)e[0]===Nt&&t(this[e],e.slice(1),this)}};function Zn(t,e){var n=new jn;if(t instanceof jn)t.each(function(a,l){n.set(l,a)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var o in t)n.set(o,t[o]);return n}function js(){}var ce=Zn.prototype;js.prototype={constructor:js,has:ce.has,add:function(t){return t+="",this[Nt+t]=t,this},remove:ce.remove,clear:ce.clear,values:ce.keys,size:ce.size,empty:ce.empty,each:ce.each};function Fa(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function Xh(t,e){var n=Fa(t);return function(r,i){return e(n(r),i,t)}}function Kh(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ua(t){var e=new RegExp('["'+t+`
]`),n=t.charCodeAt(0);function r(c,u){var f,h,d=i(c,function(p,y){if(f)return f(p,y-1);h=p,f=u?Xh(p,u):Fa(p)});return d.columns=h,d}function i(c,u){var f={},h={},d=[],p=c.length,y=0,g=0,k,A;function x(){if(y>=p)return h;if(A)return A=!1,f;var O=y,v;if(c.charCodeAt(O)===34){for(var _=O;_++<p;)if(c.charCodeAt(_)===34){if(c.charCodeAt(_+1)!==34)break;++_}return y=_+2,v=c.charCodeAt(_+1),v===13?(A=!0,c.charCodeAt(_+2)===10&&++y):v===10&&(A=!0),c.slice(O+1,_).replace(/""/g,'"')}for(;y<p;){var m=1;if(v=c.charCodeAt(y++),v===10)A=!0;else if(v===13)A=!0,c.charCodeAt(y)===10&&(++y,++m);else if(v!==n)continue;return c.slice(O,y-m)}return c.slice(O)}for(;(k=x())!==h;){for(var L=[];k!==f&&k!==h;)L.push(k),k=x();u&&(L=u(L,g++))==null||d.push(L)}return d}function s(c,u){return u==null&&(u=Kh(c)),[u.map(l).join(t)].concat(c.map(function(f){return u.map(function(h){return l(f[h])}).join(t)})).join(`
`)}function o(c){return c.map(a).join(`
`)}function a(c){return c.map(l).join(t)}function l(c){return c==null?"":e.test(c+="")?'"'+c.replace(/\"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatRows:o}}Ua(",");Ua("	");function Jh(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Ha(this.cover(e,n),e,n,t)}function Ha(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,y,g,k,A;if(!s)return t._root=o,t;for(;s.length;)if((y=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[k=g<<1|y]))return i[k]=o,t;if(d=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===d&&n===p)return o.next=s,i?i[k]=o:t._root=o,t;do i=i?i[k]=new Array(4):t._root=new Array(4),(y=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h;while((k=g<<1|y)===(A=(p>=h)<<1|d>=f));return i[A]=s,i[k]=o,t}function jh(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));for(u<l&&(l=this._x0,u=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(l,c).cover(u,f),n=0;n<r;++n)Ha(this,o[n],a[n],t[n]);return this}function Zh(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else if(n>t||t>i||r>e||e>s){var o=i-n,a=this._root,l,c;switch(c=(e<(r+s)/2)<<1|t<(n+i)/2){case 0:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,s=r+o,t>i||e>s);break}case 1:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,s=r+o,n>t||e>s);break}case 2:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,r=s-o,t>i||r>e);break}case 3:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,r=s-o,n>t||r>e);break}}this._root&&this._root.length&&(this._root=a)}else return this;return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Qh(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function td(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ed(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,y;for(d&&h.push(new xt(d,i,s,u,f)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(a=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var g=(o+l)/2,k=(a+c)/2;h.push(new xt(d[3],g,k,l,c),new xt(d[2],o,k,g,c),new xt(d[1],g,a,l,k),new xt(d[0],o,a,g,k)),(y=(e>=k)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=p)}else{var A=t-+this._x.call(null,d.data),x=e-+this._y.call(null,d.data),L=A*A+x*x;if(L<n){var O=Math.sqrt(n=L);i=t-O,s=e-O,u=t+O,f=e+O,r=d.data}}return r}function nd(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,y,g,k;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(y=f>=(d=(a+c)/2))?a=d:c=d,e=n,!(n=n[g=y<<1|p]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,k=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[k]=n:this._root=n),this):(this._root=s,this)}function rd(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function id(){return this._root}function sd(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function od(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new xt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new xt(i,c,u,a,l)),(i=r[2])&&e.push(new xt(i,s,u,c,l)),(i=r[1])&&e.push(new xt(i,c,o,a,u)),(i=r[0])&&e.push(new xt(i,s,o,c,u))}return this}function ad(t){var e=[],n=[],r;for(this._root&&e.push(new xt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(a+c)/2;(s=i[0])&&e.push(new xt(s,o,a,u,f)),(s=i[1])&&e.push(new xt(s,u,a,l,f)),(s=i[2])&&e.push(new xt(s,o,f,u,c)),(s=i[3])&&e.push(new xt(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cd(t){return arguments.length?(this._x=t,this):this._x}function ld(t){return arguments.length?(this._y=t,this):this._y}function $a(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Zs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var St=$a.prototype;St.copy=function(){var t=new $a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Zs(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Zs(r));return t};St.add=Jh;St.addAll=jh;St.cover=Zh;St.data=Qh;St.extent=td;St.find=ed;St.remove=nd;St.removeAll=rd;St.root=id;St.size=sd;St.visit=od;St.visitAfter=ad;St.x=cd;St.y=ld;function Qn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Le(t){return t=Qn(Math.abs(t)),t?t[1]:NaN}function ud(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function fd(t,e){t=t.toPrecision(e);t:for(var n=t.length,r=1,i=-1,s;r<n;++r)switch(t[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break t;default:i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var za;function hd(t,e){var n=Qn(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(za=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Qn(t,Math.max(0,e+s-1))[0]}function Qs(t,e){var n=Qn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ga={"":fd,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Qs(t*100,e)},r:Qs,s:hd,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var dd=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function gi(t){return new qa(t)}function qa(t){if(!(e=dd.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",o=!!e[5],a=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";u==="n"?(l=!0,u="g"):Ga[u]||(u=""),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=c,this.type=u}qa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var to=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pd(t){return t}function md(t){var e=t.grouping&&t.thousands?ud(t.grouping,t.thousands):pd,n=t.currency,r=t.decimal;function i(o){o=gi(o);var a=o.fill,l=o.align,c=o.sign,u=o.symbol,f=o.zero,h=o.width,d=o.comma,p=o.precision,y=o.type,g=u==="$"?n[0]:u==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",k=u==="$"?n[1]:/[%p]/.test(y)?"%":"",A=Ga[y],x=!y||/[defgprs%]/.test(y);p=p==null?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function L(O){var v=g,_=k,m,P,z;if(y==="c")_=A(O)+_,O="";else{O=+O;var W=(O<0||1/O<0)&&(O*=-1,!0);if(O=A(O,p),W){for(m=-1,P=O.length,W=!1;++m<P;)if(z=O.charCodeAt(m),48<z&&z<58||y==="x"&&96<z&&z<103||y==="X"&&64<z&&z<71){W=!0;break}}if(v=(W?c==="("?c:"-":c==="-"||c==="("?"":c)+v,_=_+(y==="s"?to[8+za/3]:"")+(W&&c==="("?")":""),x){for(m=-1,P=O.length;++m<P;)if(z=O.charCodeAt(m),48>z||z>57){_=(z===46?r+O.slice(m+1):O.slice(m))+_,O=O.slice(0,m);break}}}d&&!f&&(O=e(O,1/0));var Z=v.length+O.length+_.length,V=Z<h?new Array(h-Z+1).join(a):"";switch(d&&f&&(O=e(V+O,V.length?h-_.length:1/0),V=""),l){case"<":return v+O+_+V;case"=":return v+V+O+_;case"^":return V.slice(0,Z=V.length>>1)+v+O+_+V.slice(Z)}return V+v+O+_}return L.toString=function(){return o+""},L}function s(o,a){var l=i((o=gi(o),o.type="f",o)),c=Math.max(-8,Math.min(8,Math.floor(Le(a)/3)))*3,u=Math.pow(10,-c),f=to[8+c/3];return function(h){return l(u*h)+f}}return{format:i,formatPrefix:s}}var Sn,Wa,Ya;gd({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function gd(t){return Sn=md(t),Wa=Sn.format,Ya=Sn.formatPrefix,Sn}function yd(t){return Math.max(0,-Le(Math.abs(t)))}function _d(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Le(e)/3)))*3-Le(Math.abs(t)))}function vd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Le(e)-Le(t))+1}function pe(){return new tr}function tr(){this.reset()}tr.prototype={constructor:tr,reset:function(){this.s=this.t=0},add:function(t){eo(En,t,this.t),eo(this,En.s,this.s),this.s?this.t+=En.t:this.s=En.t},valueOf:function(){return this.s}};var En=new tr;function eo(t,e,n){var r=t.s=e+n,i=r-e,s=r-i;t.t=e-s+(n-i)}var yi=Math.PI,no=yi*2;pe();pe();pe();function ro(t,e){return[t>yi?t-no:t<-yi?t+no:t,e]}ro.invert=ro;pe();pe();pe();pe();function io(){}io.prototype={constructor:io,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function so(t,e){return[t,e]}so.invert=so;function bd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function wd(){return this.eachAfter(bd)}function xd(t){var e=this,n,r=[e],i,s,o;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length);return this}function kd(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function Ad(t){for(var e=this,n=[e],r=[],i,s,o;e=n.pop();)if(r.push(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)n.push(i[s]);for(;e=r.pop();)t(e);return this}function Sd(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Ed(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Td(t){for(var e=this,n=Md(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Md(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Cd(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Nd(){var t=[];return this.each(function(e){t.push(e)}),t}function Od(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Ld(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Va(t,e){var n=new un(t),r=+t.value&&(n.value=t.value),i,s=[n],o,a,l,c;for(e==null&&(e=Pd);i=s.pop();)if(r&&(i.value=+i.data.value),(a=e(i.data))&&(c=a.length))for(i.children=new Array(c),l=c-1;l>=0;--l)s.push(o=i.children[l]=new un(a[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Dd)}function Rd(){return Va(this).eachBefore(Id)}function Pd(t){return t.children}function Id(t){t.data=t.data.data}function Dd(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function un(t){this.data=t,this.depth=this.height=0,this.parent=null}un.prototype=Va.prototype={constructor:un,count:wd,each:xd,eachAfter:Ad,eachBefore:kd,sum:Sd,sort:Ed,path:Td,ancestors:Cd,descendants:Nd,leaves:Od,links:Ld,copy:Rd};function Xa(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}Object.create(un.prototype);function Ka(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(i-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var Ja=(1+Math.sqrt(5))/2;function ja(t,e,n,r,i,s){for(var o=[],a=e.children,l,c,u=0,f=0,h=a.length,d,p,y=e.value,g,k,A,x,L,O,v;u<h;){d=i-n,p=s-r;do g=a[f++].value;while(!g&&f<h);for(k=A=g,O=Math.max(p/d,d/p)/(y*t),v=g*g*O,L=Math.max(A/v,v/k);f<h;++f){if(g+=c=a[f].value,c<k&&(k=c),c>A&&(A=c),v=g*g*O,x=Math.max(A/v,v/k),x>L){g-=c;break}L=x}o.push(l={value:g,dice:d<p,children:a.slice(u,f)}),l.dice?Xa(l,n,r,i,y?r+=p*g/y:s):Ka(l,n,r,y?n+=d*g/y:i,s),y-=g,u=f}return o}(function t(e){function n(r,i,s,o,a){ja(e,r,i,s,o,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Ja);(function t(e){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,p=l.length,y=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?Xa(c,i,s,o,s+=(a-s)*c.value/y):Ka(c,i,s,i+=(o-i)*c.value/y,a),y-=c.value}else r._squarify=l=ja(e,r,i,s,o,a),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Ja);var Bd=[].slice,Fd={};function oo(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}oo.prototype={constructor:oo,defer:function(t){if(typeof t!="function"||this._call)throw new Error;if(this._error!=null)return this;var e=Bd.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Za(this),this},abort:function(){return this._error==null&&Ji(this,new Error("abort")),this},await:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},er(this),this},awaitAll:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=t,er(this),this}};function Za(t){if(!t._start)try{Ud(t)}catch(e){if(t._tasks[t._ended+t._active-1])Ji(t,e);else if(!t._data)throw e}}function Ud(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Hd(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Fd)}}function Hd(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,t._error==null&&(n!=null?Ji(t,n):(t._data[e]=r,t._waiting?Za(t):er(t))))}}function Ji(t,e){var n=t._tasks.length,r;for(t._error=e,t._data=void 0,t._waiting=NaN;--n>=0;)if((r=t._tasks[n])&&(t._tasks[n]=null,r.abort))try{r.abort()}catch{}t._active=NaN,er(t)}function er(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}var Qa=Array.prototype,$d=Qa.map,nr=Qa.slice,ao={name:"implicit"};function tc(t){var e=Zn(),n=[],r=ao;t=t==null?[]:nr.call(t);function i(s){var o=s+"",a=e.get(o);if(!a){if(r!==ao)return r;e.set(o,a=n.push(s))}return t[(a-1)%t.length]}return i.domain=function(s){if(!arguments.length)return n.slice();n=[],e=Zn();for(var o=-1,a=s.length,l,c;++o<a;)e.has(c=(l=s[o])+"")||e.set(c,n.push(l));return i},i.range=function(s){return arguments.length?(t=nr.call(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return tc().domain(n).range(t).unknown(r)},i}function xr(){var t=tc().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,o=!1,a=0,l=0,c=.5;delete t.unknown;function u(){var f=e().length,h=r[1]<r[0],d=r[h-0],p=r[1-h];i=(p-d)/Math.max(1,f-a+l*2),o&&(i=Math.floor(i)),d+=(p-d-i*(f-a))*c,s=i*(1-a),o&&(d=Math.round(d),s=Math.round(s));var y=Bt(f).map(function(g){return d+i*g});return n(h?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(o=!!f,u()):o},t.padding=function(f){return arguments.length?(a=l=Math.max(0,Math.min(1,f)),u()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.copy=function(){return xr().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function ec(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ec(e())},t}function zd(){return ec(xr().paddingInner(1))}function Gd(t){return function(){return t}}function qd(t){return+t}var co=[0,1];function nc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Gd(e)}function Wd(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=e?0:i>=n?1:r(i)}}}function Yd(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=0?e:i>=1?n:r(i)}}}function Vd(t,e,n,r){var i=t[0],s=t[1],o=e[0],a=e[1];return s<i?(i=n(s,i),o=r(a,o)):(i=n(i,s),o=r(o,a)),function(l){return o(i(l))}}function Xd(t,e,n,r){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=n(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=Bl(t,l,1,i)-1;return o[c](s[c](l))}}function Kd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Jd(t,e){var n=co,r=co,i=Hi,s=!1,o,a,l;function c(){return o=Math.min(n.length,r.length)>2?Xd:Vd,a=l=null,u}function u(f){return(a||(a=o(n,r,s?Wd(t):t,i)))(+f)}return u.invert=function(f){return(l||(l=o(r,n,nc,s?Yd(e):e)))(+f)},u.domain=function(f){return arguments.length?(n=$d.call(f,qd),c()):n.slice()},u.range=function(f){return arguments.length?(r=nr.call(f),c()):r.slice()},u.rangeRound=function(f){return r=nr.call(f),i=Df,c()},u.clamp=function(f){return arguments.length?(s=!!f,c()):s},u.interpolate=function(f){return arguments.length?(i=f,c()):i},c()}function jd(t,e,n){var r=t[0],i=t[t.length-1],s=Gn(r,i,e??10),o;switch(n=gi(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(i));return n.precision==null&&!isNaN(o=_d(s,a))&&(n.precision=o),Ya(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=vd(s,Math.max(Math.abs(r),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=yd(s))&&(n.precision=o-(n.type==="%")*2);break}}return Wa(n)}function Zd(t){var e=t.domain;return t.ticks=function(n){var r=e();return $l(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){return jd(e(),n,r)},t.nice=function(n){var r=e(),i=r.length-1,s=n??10,o=r[0],a=r[i],l=Gn(o,a,s);return l&&(l=Gn(Math.floor(o/l)*l,Math.ceil(a/l)*l,s),r[0]=Math.floor(o/l)*l,r[i]=Math.ceil(a/l)*l,e(r)),t},t}function jt(){var t=Jd(nc,Dt);return t.copy=function(){return Kd(t,jt())},Zd(t)}var Hr=new Date,$r=new Date;function _t(t,e,n,r){function i(s){return t(s=new Date(+s)),s}return i.floor=i,i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(new Date(+s));while(e(s,a),t(s),s<o);return l},i.filter=function(s){return _t(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return Hr.setTime(+s),$r.setTime(+o),t(Hr),t($r),Math.floor(n(Hr,$r))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var _i=_t(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});_i.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_t(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):_i};_i.range;var Tn=1e3,Kt=6e4,ne=36e5,rc=864e5,ic=6048e5,Qd=_t(function(t){t.setTime(Math.floor(t/Tn)*Tn)},function(t,e){t.setTime(+t+e*Tn)},function(t,e){return(e-t)/Tn},function(t){return t.getUTCSeconds()});Qd.range;var tp=_t(function(t){t.setTime(Math.floor(t/Kt)*Kt)},function(t,e){t.setTime(+t+e*Kt)},function(t,e){return(e-t)/Kt},function(t){return t.getMinutes()});tp.range;var ep=_t(function(t){var e=t.getTimezoneOffset()*Kt%ne;e<0&&(e+=ne),t.setTime(Math.floor((+t-e)/ne)*ne+e)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getHours()});ep.range;var sc=_t(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kt)/rc},function(t){return t.getDate()-1});sc.range;function me(t){return _t(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Kt)/ic})}var oc=me(0),ac=me(1),np=me(2),rp=me(3),ip=me(4),sp=me(5),op=me(6);oc.range;ac.range;np.range;rp.range;ip.range;sp.range;op.range;var ap=_t(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});ap.range;var yn=_t(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});yn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_t(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};yn.range;var cp=_t(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Kt)},function(t,e){return(e-t)/Kt},function(t){return t.getUTCMinutes()});cp.range;var lp=_t(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getUTCHours()});lp.range;var cc=_t(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/rc},function(t){return t.getUTCDate()-1});cc.range;function ge(t){return _t(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/ic})}var lc=ge(0),uc=ge(1),up=ge(2),fp=ge(3),hp=ge(4),dp=ge(5),pp=ge(6);lc.range;uc.range;up.range;fp.range;hp.range;dp.range;pp.range;var mp=_t(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});mp.range;var _n=_t(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});_n.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_t(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};_n.range;function gp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function yp(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=ze(i),u=Ge(i),f=ze(s),h=Ge(s),d=ze(o),p=Ge(o),y=ze(a),g=Ge(a),k=ze(l),A=Ge(l),x={a:j,A:J,b:D,B:E,c:null,d:ho,e:ho,H:Rp,I:Pp,j:Ip,L:Dp,m:Bp,M:Fp,p:M,S:Up,U:Hp,w:$p,W:zp,x:null,X:null,y:Gp,Y:qp,Z:Wp,"%":mo},L={a:C,A:T,b:N,B:$,c:null,d:po,e:po,H:Yp,I:Vp,j:Xp,L:Kp,m:Jp,M:jp,p:Y,S:Zp,U:Qp,w:tm,W:em,x:null,X:null,y:nm,Y:rm,Z:im,"%":mo},O={a:z,A:W,b:Z,B:V,c:H,d:uo,e:uo,H:fo,I:fo,j:Mp,L:Op,m:Tp,M:Cp,p:P,S:Np,U:xp,w:wp,W:kp,x:X,X:U,y:Sp,Y:Ap,Z:Ep,"%":Lp};x.x=v(n,x),x.X=v(r,x),x.c=v(e,x),L.x=v(n,L),L.X=v(r,L),L.c=v(e,L);function v(S,B){return function(F){var q=[],st=-1,vt=0,I=S.length,G,ot,w;for(F instanceof Date||(F=new Date(+F));++st<I;)S.charCodeAt(st)===37&&(q.push(S.slice(vt,st)),(ot=lo[G=S.charAt(++st)])!=null?G=S.charAt(++st):ot=G==="e"?" ":"0",(w=B[G])&&(G=w(F,ot)),q.push(G),vt=st+1);return q.push(S.slice(vt,st)),q.join("")}}function _(S,B){return function(F){var q=Gr(1900),st=m(q,S,F+="",0);if(st!=F.length)return null;if("p"in q&&(q.H=q.H%12+q.p*12),"W"in q||"U"in q){"w"in q||(q.w="W"in q?1:0);var vt="Z"in q?zr(Gr(q.y)).getUTCDay():B(Gr(q.y)).getDay();q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(vt+5)%7:q.w+q.U*7-(vt+6)%7}return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,zr(q)):B(q)}}function m(S,B,F,q){for(var st=0,vt=B.length,I=F.length,G,ot;st<vt;){if(q>=I)return-1;if(G=B.charCodeAt(st++),G===37){if(G=B.charAt(st++),ot=O[G in lo?B.charAt(st++):G],!ot||(q=ot(S,F,q))<0)return-1}else if(G!=F.charCodeAt(q++))return-1}return q}function P(S,B,F){var q=c.exec(B.slice(F));return q?(S.p=u[q[0].toLowerCase()],F+q[0].length):-1}function z(S,B,F){var q=d.exec(B.slice(F));return q?(S.w=p[q[0].toLowerCase()],F+q[0].length):-1}function W(S,B,F){var q=f.exec(B.slice(F));return q?(S.w=h[q[0].toLowerCase()],F+q[0].length):-1}function Z(S,B,F){var q=k.exec(B.slice(F));return q?(S.m=A[q[0].toLowerCase()],F+q[0].length):-1}function V(S,B,F){var q=y.exec(B.slice(F));return q?(S.m=g[q[0].toLowerCase()],F+q[0].length):-1}function H(S,B,F){return m(S,e,B,F)}function X(S,B,F){return m(S,n,B,F)}function U(S,B,F){return m(S,r,B,F)}function j(S){return o[S.getDay()]}function J(S){return s[S.getDay()]}function D(S){return l[S.getMonth()]}function E(S){return a[S.getMonth()]}function M(S){return i[+(S.getHours()>=12)]}function C(S){return o[S.getUTCDay()]}function T(S){return s[S.getUTCDay()]}function N(S){return l[S.getUTCMonth()]}function $(S){return a[S.getUTCMonth()]}function Y(S){return i[+(S.getUTCHours()>=12)]}return{format:function(S){var B=v(S+="",x);return B.toString=function(){return S},B},parse:function(S){var B=_(S+="",gp);return B.toString=function(){return S},B},utcFormat:function(S){var B=v(S+="",L);return B.toString=function(){return S},B},utcParse:function(S){var B=_(S,zr);return B.toString=function(){return S},B}}}var lo={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,_p=/^%/,vp=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function ct(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function bp(t){return t.replace(vp,"\\$&")}function ze(t){return new RegExp("^(?:"+t.map(bp).join("|")+")","i")}function Ge(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function wp(t,e,n){var r=Pt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function xp(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function kp(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ap(t,e,n){var r=Pt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Sp(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ep(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tp(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function uo(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mp(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fo(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Cp(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Np(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Op(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Lp(t,e,n){var r=_p.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ho(t,e){return ct(t.getDate(),e,2)}function Rp(t,e){return ct(t.getHours(),e,2)}function Pp(t,e){return ct(t.getHours()%12||12,e,2)}function Ip(t,e){return ct(1+sc.count(yn(t),t),e,3)}function Dp(t,e){return ct(t.getMilliseconds(),e,3)}function Bp(t,e){return ct(t.getMonth()+1,e,2)}function Fp(t,e){return ct(t.getMinutes(),e,2)}function Up(t,e){return ct(t.getSeconds(),e,2)}function Hp(t,e){return ct(oc.count(yn(t),t),e,2)}function $p(t){return t.getDay()}function zp(t,e){return ct(ac.count(yn(t),t),e,2)}function Gp(t,e){return ct(t.getFullYear()%100,e,2)}function qp(t,e){return ct(t.getFullYear()%1e4,e,4)}function Wp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ct(e/60|0,"0",2)+ct(e%60,"0",2)}function po(t,e){return ct(t.getUTCDate(),e,2)}function Yp(t,e){return ct(t.getUTCHours(),e,2)}function Vp(t,e){return ct(t.getUTCHours()%12||12,e,2)}function Xp(t,e){return ct(1+cc.count(_n(t),t),e,3)}function Kp(t,e){return ct(t.getUTCMilliseconds(),e,3)}function Jp(t,e){return ct(t.getUTCMonth()+1,e,2)}function jp(t,e){return ct(t.getUTCMinutes(),e,2)}function Zp(t,e){return ct(t.getUTCSeconds(),e,2)}function Qp(t,e){return ct(lc.count(_n(t),t),e,2)}function tm(t){return t.getUTCDay()}function em(t,e){return ct(uc.count(_n(t),t),e,2)}function nm(t,e){return ct(t.getUTCFullYear()%100,e,2)}function rm(t,e){return ct(t.getUTCFullYear()%1e4,e,4)}function im(){return"+0000"}function mo(){return"%"}var ve,fc,hc;sm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sm(t){return ve=yp(t),ve.format,ve.parse,fc=ve.utcFormat,hc=ve.utcParse,ve}var dc="%Y-%m-%dT%H:%M:%S.%LZ";function om(t){return t.toISOString()}Date.prototype.toISOString||fc(dc);function am(t){var e=new Date(t);return isNaN(e)?null:e}+new Date("2000-01-01T00:00:00.000Z")||hc(dc);function ae(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}ae("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");ae("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");ae("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");ae("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");$i(Wt(300,.5,0),Wt(-240,.5,1));$i(Wt(-100,.75,.35),Wt(80,1.5,.8));$i(Wt(260,.75,.35),Wt(80,1.5,.8));Wt();function kr(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}kr(ae("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));kr(ae("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));kr(ae("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));kr(ae("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Mn(t){return function(){return t}}var go=1e-12;function pc(t){this._context=t}pc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cm(t){return new pc(t)}function lm(t){return t[0]}function um(t){return t[1]}function mc(){var t=lm,e=um,n=Mn(!0),r=null,i=cm,s=null;function o(a){var l,c=a.length,u,f=!1,h;for(r==null&&(s=i(h=Ba())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,l,a),+e(u,l,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Mn(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Mn(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Mn(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function rr(){}function yo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ji(t){this._context=t}ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gc(t,e){this._basis=new ji(t),this._beta=e}gc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new ji(r):new gc(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function ir(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Zi(t,e){this._context=t,this._k=(1-e)/6}Zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ir(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Zi(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Qi(t,e){this._context=t,this._k=(1-e)/6}Qi.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Qi(r,e)}return n.tension=function(r){return t(+r)},n})(0);function ts(t,e){this._context=t,this._k=(1-e)/6}ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new ts(r,e)}return n.tension=function(r){return t(+r)},n})(0);function es(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>go){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>go){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function yc(t,e){this._context=t,this._alpha=e}yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:es(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new yc(r,e):new Zi(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function _c(t,e){this._context=t,this._alpha=e}_c.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:es(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new _c(r,e):new Qi(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function vc(t,e){this._context=t,this._alpha=e}vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:es(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new vc(r,e):new ts(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function _o(t){return t<0?-1:1}function vo(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(_o(s)+_o(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function bo(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qr(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function vi(t){this._context=t}vi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qr(this,this._t0,bo(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qr(this,bo(this,n=vo(this,t,e)),n);break;default:qr(this,this._t0,n=vo(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(vi.prototype).point=function(t,e){vi.prototype.point.call(this,e,t)};function sr(){this._=null}function Ar(t){t.U=t.C=t.L=t.R=t.P=t.N=null}sr.prototype={constructor:sr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=wo(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(qe(this,n),t=n,n=t.U),n.C=!1,r.C=!0,We(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(We(this,n),t=n,n=t.U),n.C=!1,r.C=!0,qe(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,o;if(r?i?s=wo(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(o=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(o=t.C,t=s),t&&(t.U=e),!o){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,qe(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,We(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,qe(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,We(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,qe(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,We(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function qe(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function We(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function wo(t){for(;t.L;)t=t.L;return t}function je(t,e,n,r){var i=[null,null],s=wt.push(i)-1;return i.left=t,i.right=e,n&&or(i,t,e,n),r&&or(i,e,t,r),Mt[t.index].halfedges.push(s),Mt[e.index].halfedges.push(s),i}function Ye(t,e,n){var r=[e,n];return r.left=t,r}function or(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function fm(t,e,n,r,i){var s=t[0],o=t[1],a=s[0],l=s[1],c=o[0],u=o[1],f=0,h=1,d=c-a,p=u-l,y;if(y=e-a,!(!d&&y>0)){if(y/=d,d<0){if(y<f)return;y<h&&(h=y)}else if(d>0){if(y>h)return;y>f&&(f=y)}if(y=r-a,!(!d&&y<0)){if(y/=d,d<0){if(y>h)return;y>f&&(f=y)}else if(d>0){if(y<f)return;y<h&&(h=y)}if(y=n-l,!(!p&&y>0)){if(y/=p,p<0){if(y<f)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>f&&(f=y)}if(y=i-l,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>f&&(f=y)}else if(p>0){if(y<f)return;y<h&&(h=y)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[a+f*d,l+f*p]),h<1&&(t[1]=[a+h*d,l+h*p])),!0}}}}}function hm(t,e,n,r,i){var s=t[1];if(s)return!0;var o=t[0],a=t.left,l=t.right,c=a[0],u=a[1],f=l[0],h=l[1],d=(c+f)/2,p=(u+h)/2,y,g;if(h===u){if(d<e||d>=r)return;if(c>f){if(!o)o=[d,n];else if(o[1]>=i)return;s=[d,i]}else{if(!o)o=[d,i];else if(o[1]<n)return;s=[d,n]}}else if(y=(c-f)/(h-u),g=p-y*d,y<-1||y>1)if(c>f){if(!o)o=[(n-g)/y,n];else if(o[1]>=i)return;s=[(i-g)/y,i]}else{if(!o)o=[(i-g)/y,i];else if(o[1]<n)return;s=[(n-g)/y,n]}else if(u<h){if(!o)o=[e,y*e+g];else if(o[0]>=r)return;s=[r,y*r+g]}else{if(!o)o=[r,y*r+g];else if(o[0]<e)return;s=[e,y*e+g]}return t[0]=o,t[1]=s,!0}function dm(t,e,n,r){for(var i=wt.length,s;i--;)(!hm(s=wt[i],t,e,n,r)||!fm(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>ut||Math.abs(s[0][1]-s[1][1])>ut))&&delete wt[i]}function pm(t){return Mt[t.index]={site:t,halfedges:[]}}function mm(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function bc(t,e){return e[+(e.left!==t.site)]}function gm(t,e){return e[+(e.left===t.site)]}function ym(){for(var t=0,e=Mt.length,n,r,i,s;t<e;++t)if((n=Mt[t])&&(s=(r=n.halfedges).length)){var o=new Array(s),a=new Array(s);for(i=0;i<s;++i)o[i]=i,a[i]=mm(n,wt[r[i]]);for(o.sort(function(l,c){return a[c]-a[l]}),i=0;i<s;++i)a[i]=r[o[i]];for(i=0;i<s;++i)r[i]=a[i]}}function _m(t,e,n,r){var i=Mt.length,s,o,a,l,c,u,f,h,d,p,y,g,k=!0;for(s=0;s<i;++s)if(o=Mt[s]){for(a=o.site,c=o.halfedges,l=c.length;l--;)wt[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)p=gm(o,wt[c[l]]),y=p[0],g=p[1],f=bc(o,wt[c[++l%u]]),h=f[0],d=f[1],(Math.abs(y-h)>ut||Math.abs(g-d)>ut)&&(c.splice(l,0,wt.push(Ye(a,p,Math.abs(y-t)<ut&&r-g>ut?[t,Math.abs(h-t)<ut?d:r]:Math.abs(g-r)<ut&&n-y>ut?[Math.abs(d-r)<ut?h:n,r]:Math.abs(y-n)<ut&&g-e>ut?[n,Math.abs(h-n)<ut?d:e]:Math.abs(g-e)<ut&&y-t>ut?[Math.abs(d-e)<ut?h:t,e]:null))-1),++u);u&&(k=!1)}if(k){var A,x,L,O=1/0;for(s=0,k=null;s<i;++s)(o=Mt[s])&&(a=o.site,A=a[0]-t,x=a[1]-e,L=A*A+x*x,L<O&&(O=L,k=o));if(k){var v=[t,e],_=[t,r],m=[n,r],P=[n,e];k.halfedges.push(wt.push(Ye(a=k.site,v,_))-1,wt.push(Ye(a,_,m))-1,wt.push(Ye(a,m,P))-1,wt.push(Ye(a,P,v))-1)}}for(s=0;s<i;++s)(o=Mt[s])&&(o.halfedges.length||delete Mt[s])}var wc=[],ns;function vm(){Ar(this),this.x=this.y=this.arc=this.site=this.cy=null}function xe(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var o=i[0],a=i[1],l=r[0]-o,c=r[1]-a,u=s[0]-o,f=s[1]-a,h=2*(l*f-c*u);if(!(h>=-Am)){var d=l*l+c*c,p=u*u+f*f,y=(f*d-c*p)/h,g=(l*p-u*d)/h,k=wc.pop()||new vm;k.arc=t,k.site=i,k.x=y+o,k.y=(k.cy=g+a)+Math.sqrt(y*y+g*g),t.circle=k;for(var A=null,x=fn._;x;)if(k.y<x.y||k.y===x.y&&k.x<=x.x)if(x.L)x=x.L;else{A=x.P;break}else if(x.R)x=x.R;else{A=x;break}fn.insert(A,k),A||(ns=k)}}}}function Te(t){var e=t.circle;e&&(e.P||(ns=e.N),fn.remove(e),wc.push(e),Ar(e),t.circle=null)}var xc=[];function bm(){Ar(this),this.edge=this.site=this.circle=null}function xo(t){var e=xc.pop()||new bm;return e.site=t,e}function Wr(t){Te(t),Me.remove(t),xc.push(t),Ar(t)}function wm(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,o=t.N,a=[t];Wr(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<ut&&Math.abs(r-l.circle.cy)<ut;)s=l.P,a.unshift(l),Wr(l),l=s;a.unshift(l),Te(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<ut&&Math.abs(r-c.circle.cy)<ut;)o=c.N,a.push(c),Wr(c),c=o;a.push(c),Te(c);var u=a.length,f;for(f=1;f<u;++f)c=a[f],l=a[f-1],or(c.edge,l.site,c.site,i);l=a[0],c=a[u-1],c.edge=je(l.site,c.site,null,i),xe(l),xe(c)}function xm(t){for(var e=t[0],n=t[1],r,i,s,o,a=Me._;a;)if(s=kc(a,n)-e,s>ut)a=a.L;else if(o=e-km(a,n),o>ut){if(!a.R){r=a;break}a=a.R}else{s>-ut?(r=a.P,i=a):o>-ut?(r=a,i=a.N):r=i=a;break}pm(t);var l=xo(t);if(Me.insert(r,l),!(!r&&!i)){if(r===i){Te(r),i=xo(r.site),Me.insert(l,i),l.edge=i.edge=je(r.site,l.site),xe(r),xe(i);return}if(!i){l.edge=je(r.site,l.site);return}Te(r),Te(i);var c=r.site,u=c[0],f=c[1],h=t[0]-u,d=t[1]-f,p=i.site,y=p[0]-u,g=p[1]-f,k=2*(h*g-d*y),A=h*h+d*d,x=y*y+g*g,L=[(g*A-d*x)/k+u,(h*x-y*A)/k+f];or(i.edge,c,p,L),l.edge=je(c,t,null,L),i.edge=je(t,p,null,L),xe(r),xe(i)}}function kc(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var o=t.P;if(!o)return-1/0;n=o.site;var a=n[0],l=n[1],c=l-e;if(!c)return a;var u=a-r,f=1/s-1/c,h=u/c;return f?(-h+Math.sqrt(h*h-2*f*(u*u/(-2*c)-l+c/2+i-s/2)))/f+r:(r+a)/2}function km(t,e){var n=t.N;if(n)return kc(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var ut=1e-6,Am=1e-12,Me,Mt,fn,wt;function Sm(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Em(t,e){return e[1]-t[1]||e[0]-t[0]}function ko(t,e){var n=t.sort(Em).pop(),r,i,s;for(wt=[],Mt=new Array(t.length),Me=new sr,fn=new sr;;)if(s=ns,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(xm(n),r=n[0],i=n[1]),n=t.pop();else if(s)wm(s.arc);else break;if(ym(),e){var o=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];dm(o,a,l,c),_m(o,a,l,c)}this.edges=wt,this.cells=Mt,Me=fn=wt=Mt=null}ko.prototype={constructor:ko,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return bc(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(s=n.halfedges).length)for(var i=n.site,s,o=-1,a,l,c=e[s[a-1]],u=c.left===i?c.right:c.left;++o<a;)l=u,c=e[s[o]],u=c.left===i?c.right:c.left,l&&u&&r<l.index&&r<u.index&&Sm(i,l,u)<0&&t.push([i.data,l.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,o=r.cells.length,a;!(a=r.cells[s]);)if(++s>=o)return null;var l=t-a.site[0],c=e-a.site[1],u=l*l+c*c;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(f){var h=r.edges[f],d=h.left;if(!((d===a.site||!d)&&!(d=h.right))){var p=t-d[0],y=e-d[1],g=p*p+y*y;g<u&&(u=g,s=d.index)}});while(s!==null);return r._found=i,n==null||u<=n*n?a.site:null}};function Ze(t,e,n){this.k=t,this.x=e,this.y=n}Ze.prototype={constructor:Ze,scale:function(t){return t===1?this:new Ze(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ze(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ze.prototype;function rs(t){let e;const n=window.innerWidth,r=document.getElementById("stroke_slider"),i=document.getElementById("slideright"),s=document.getElementById("slideleft"),o=()=>{r&&(r.style.display="none")};t?(r&&(r.style.display="flex",r.style.left=t=="left"?n*-1+"px":n*1.5+"px"),s&&(s.style.display=t=="right"?"flex":"none"),i&&(i.style.display=t=="left"?"flex":"none"),e=t=="left"?Bt(0,1.1,.1):Bt(0,1.1,.1).reverse(),ii(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})):(e=((s==null?void 0:s.style.display)=="flex"?"right":"left")=="left"?Bt(-1.5,1.1,.1):Bt(1,2.6,.1).reverse(),setTimeout(()=>o(),700)),ii(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})}let Bn=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(Bn=!0,!0)});window.addEventListener("test",null,t)}catch(t){console.log(t)}const yt={orientation:void 0,time_threshold:200,diff_threshold:130,press_hold_threshold:400,prevent_touch:!0,prevent_double_tap:!1,addSwipeTarget(t){t.addEventListener("touchstart",Cn,Bn?{passive:!0}:!1),t.addEventListener("touchmove",To,Bn?{passive:!0}:!1),t.addEventListener("touchend",Mo,!1),t.addEventListener("mousedown",Cn,!1),t.addEventListener("mousemove",To,!1),t.addEventListener("mouseup",Mo,!1)},addPressAndHold(t){t.addEventListener("touchstart",Cn,Bn?{passive:!0}:!1),t.addEventListener("mousedown",Cn,!1),t.addEventListener("touchend",Co,!1),t.addEventListener("mouseup",Co,!1)},disableDrag(){document.addEventListener("touchmove",Ao,!1),document.addEventListener("touchend",So,!1),document.addEventListener("mousemove",Ao,!1),document.addEventListener("mouseup",So,!1)}};function Ao(t){yt.prevent_touch&&(window.innerHeight>450||yt.orientation=="landscape")&&t.preventDefault()}function So(t){const e=new Date().getTime();yt.prevent_double_tap&&e-Eo<500&&t.preventDefault(),Eo=e}let Re=null,Pe=null,en=null,nn=null,hn=null,ke=null,Eo=new Date().getTime();function To(t){if(!Re||!Pe)return;let e,n;t.type=="mousemove"?(e=t.clientX,n=t.clientY):(e=t.touches[0].clientX,n=t.touches[0].clientY),en=Re-e,nn=Pe-n}function Cn(t){ke=t.target,hn=Date.now(),t.type=="mousedown"?(Re=t.clientX,Pe=t.clientY):(Re=t.touches[0].clientX,Pe=t.touches[0].clientY),en=0,nn=0}function Qe(t,e){if(t.classList.contains(e))return t;for(;t=t.parentNode&&t.classList&&!t.classList.contains(e););return t}function Mo(){const t=Date.now()-hn;(Math.abs(en)>yt.diff_threshold||Math.abs(nn)>yt.diff_threshold)&&t<yt.time_threshold&&(Math.abs(en)>Math.abs(nn)?en>0?typeof yt.swipeLeft=="function"&&yt.swipeLeft(Qe(ke,"swipe")):typeof yt.swipeRight=="function"&&yt.swipeRight(Qe(ke,"swipe")):nn>0?typeof yt.swipeUp=="function"&&yt.swipeUp(Qe(ke,"swipe")):typeof yt.swipeDown=="function"&&yt.swipeDown(Qe(ke,"swipe"))),Re=null,Pe=null,hn=null}function Co(){Date.now()-hn>yt.press_hold_threshold&&typeof yt.pressAndHold=="function"&&yt.pressAndHold(Qe(ke,"pressAndHold")),Re=null,Pe=null,hn=null}const Ot=yt;function Tm(t,e){const n=at("#"+t),r=window.innerWidth*.85,i=r/2,s=50,o=["blue","red"];n.selectAll("svg").remove();const a=n.append("svg").attr("width",r).attr("height",i),l={top:20,right:20,bottom:30,left:40},c=+a.attr("width")-l.left-l.right,u=+a.attr("height")-l.top-l.bottom,f=jt().range([0,c]),h=jt().range([u,0]),d=mc().x(function(x){return f(x[0])}).y(function(x){return h(x[1])}),p=a.append("g").attr("transform","translate("+l.left+","+l.top+")"),y=Math.max(...e.map(x=>x.length));f.domain([0,Math.max(...e.map(x=>Math.max(...x)),s)]),h.domain([0,y]),p.append("g").attr("transform","translate(0,"+u+")").call(Yl(f).ticks(0)),p.append("g").style("font","24px times").call(Vl(h).ticks(Math.min(y,4)).tickFormat(x=>x)),k(e),A(e);function g(x){return x=x.map((L,O)=>[L,O+1]),x.unshift([0,0]),x}function k(x){x.forEach((L,O)=>{p.append("path").datum(g(L)).attr("fill","none").attr("stroke",o[O]).attr("stroke-width","5px").attr("shape-rendering","crispEdges").attr("d",d)})}function A(x){x.forEach((L,O)=>{const v=".datapoint"+O;L.length<10&&p.selectAll(v).data(g(L)).enter().append("circle").attr("class",v).attr("fill","#FFFFFF").attr("stroke",o[O]).attr("stroke-width","2px").attr("r",3.5).attr("cx",function(_){return f(_[0])}).attr("cy",function(_){return h(_[1])})})}}function Ac(t){const e=t?t.getAttribute("setNumber"):void 0,n=e?parseInt(e):void 0;let r="";const i=[],s=b.match.sets().length;let o="<div class='updateStats s_set'>Match</div>";const a=b.match.stats.calculated(n),l=c=>{var u;return(u=c.match(/[A-Za-z0-9_]/g))==null?void 0:u.join("")};if(a&&a.length){if(s>1)for(let p=0;p<s;p++)o+=`<div class='updateStats s_set' setNumber="${p}">Set ${p+1}</div>`;const c=document.querySelector("#statview");c&&(c.innerHTML=o);let u,f;a.forEach(p=>{b.swap_sides?[f,u]=p.team_stats:[u,f]=p.team_stats;const y=[0].concat(...[u,f].map(v=>v.value?v.value:[])).reduce((v,_)=>v+_,0),g=l(p.name.toLowerCase().split(" ").join("_"));let k=u.display,A=f.display;const x=[].concat(...[u,f].map(v=>v.numerators?v.numerators:[])).filter((v,_,m)=>m.lastIndexOf(v)==_).join(","),L=x&&y&&p.name!="Aggressive Margin"?"statname_chart":"statname";isNaN(u.value)&&(u.value=0,k="0"),isNaN(f.value)&&(f.value=0,A="0"),["Double Faults","Unforced Errors","Forced Errors"].indexOf(p.name)>=0?(u.value<f.value&&(k=`<b class="toggleChart">${k}</b>`),f.value<u.value&&(A=`<b class="toggleChart">${A}</b>`)):(u.value>f.value&&(k=`<b class="toggleChart">${k}</b>`),f.value>u.value&&(A=`<b class="toggleChart">${A}</b>`)),r+=`<div class='statrow' id="${g}"><div class='toggleChart statleft'>${k}</div><div class='toggleChart ${L}'>${p.name}</div><div class='toggleChart statright'>${A}</div></div>`;const O=`<div class='statrow' id="${g}_chart" style='display:none' onclick="showChartSource('${x}')"></div>`;x&&y&&p.name!="Aggressive Margin"&&(i.push({target:`${g}_chart`,numerators:x}),r+=O)});const h=b.match.stats.counters(n).teams;if(h[0].Backhand||h[0].Forehand||h[1].Backhand||h[1].Forehand){const p=b.swap_sides?1:0,y=b.swap_sides?0:1;r+="<div class='statsection flexcenter'>Finishing Shots - Strokes</div>",["Forehand","Backhand"].forEach(g=>{if(h[0][g]||h[1][g]){const k=h[p][g]?h[p][g].length:0,A=h[y][g]?h[y][g].length:0;r+=`<div class='statrow'><div class='statleft'><b>${k}</b></div><div class='statname'><b>Total ${g} Shots</b></div><div class='statright'><b>${A}</b></div></div>`,[].concat(...Object.keys(h).map(L=>h[L][g]?h[L][g].map(O=>O.point.result).filter(Boolean):[])).filter((L,O,v)=>v.lastIndexOf(L)==O).forEach(L=>{const O=h[p][g]?h[p][g].filter(m=>m.point.result==L):[],v=h[y][g]?h[y][g].filter(m=>m.point.result==L):[];(O.length||v.length)&&(r+=`<div class='statrow'><div class='statleft'>${O.length}</div><div class='statname'>${g} ${L}s</div><div class='statright'>${v.length}</div></div>`),[].concat(...Object.keys(h).map(m=>h[m][g]?h[m][g].map(P=>P.point.stroke).filter(Boolean):[])).filter((m,P,z)=>z.lastIndexOf(m)==P).forEach(m=>{const P=h[p][g]?h[p][g].filter(W=>W.point.result==L&&W.point.stroke==m):[],z=h[y][g]?h[y][g].filter(W=>W.point.result==L&&W.point.stroke==m):[];(P.length||z.length)&&(r+=`<div class='statrow'><div class='statleft'>${P.length}</div><div class='statname'><i>${g} ${m} ${L}s</i></div><div class='statright'>${z.length}</div></div>`)})})}})}const d=document.querySelector("#statlines");d&&(d.innerHTML=r),Mm(i)}else gt("entry")}function Mm(t){const e=b.match.stats.counters(),n=r=>{var i;return(i=r.match(/[A-Za-z0-9]/g))==null?void 0:i.join("")};e&&t.forEach(r=>{const i=[];Object.keys(e.teams).forEach(s=>{const o=e.teams[s],a=r.numerators.split(",").map(u=>n(u)),c=[].concat(...a.map(u=>o[u])).map(u=>u?u.point:void 0).filter(u=>u).sort((u,f)=>u.index-f.index);i.push(c.map(u=>u.index))}),Tm(r.target,i)})}const ft=(t,e)=>{const n=document.getElementById(e);n&&(n.style.display=t)};function gt(t=b.view,e){rs();const n={mainmenu({activate:i=!0}={}){if(i){Ot.prevent_touch=!1;const s=JSON.parse(rt.get("match_archive")||"[]"),o=document.getElementById("menu_match_archive");o&&(o.style.display=s.length?"flex":"none");const a=document.getElementById("menu_match_format");a&&(a.style.display=Sl()?"flex":"none");const l=b.match.history.points(),c=document.getElementById("menu_change_server");c&&(c.style.display=l.length==0?"flex":"none")}ft(i?"flex":"none","mainmenu")},pointhistory({activate:i=!0}={}){i&&(Ot.prevent_touch=!1,El()),ft(i?"flex":"none","pointhistory")},matcharchive({activate:i=!0}={}){i&&(Ot.prevent_touch=!1,Tc()),ft(i?"flex":"none","matcharchive")},matchformat({activate:i=!0}={}){Ll(),i&&(Ot.prevent_touch=!1),ft(i?"flex":"none","matchformats")},settings({activate:i=!0}={}){ft(i?"flex":"none","settings")},welcome({activate:i=!0}={}){ft(i?"flex":"none","welcome")},matchdetails({activate:i=!0}={}){i&&(Ot.prevent_touch=!1),ft(i?"flex":"none","matchdetails")},entry({activate:i=!0}={}){i&&(Ot.prevent_touch=!0),ft(i&&b.orientation=="landscape"?"flex":"none",an.horizontal_view),ft(i&&b.orientation=="portrait"?"flex":"none",an.vertical_view),ft(i&&b.orientation=="portrait"?"flex":"none","toolbar")},stats({activate:i=!0}={}){ft(i?"flex":"none","statsscreen"),i&&(Ot.prevent_touch=!1,b.match.metadata.resetStats(),Ac())},momentum({activate:i=!0}={}){if(!i)ft("none","momentum"),ft("none","pts");else{b.orientation=="landscape"?(ft("none","momentum"),ft("flex","pts"),it.pts_match.update()):(ft("inline","momentum"),ft("none","pts")),Ot.prevent_touch=!1;const s=b.match.history.action("addPoint");it.mc.width(window.innerWidth).height(820),it.mc.data(s).update(),it.mc.update()}},gametree({activate:i=!0}={}){if(ft(i?"flex":"none","gametree"),i){Ot.prevent_touch=!1;const s=b.match.history.action("addPoint"),o=b.match.format.settings().code.indexOf("n_")>=0;it.gametree.options({display:{noAd:o}}),it.gametree.data(s).update(),it.gametree.update({sizeToFit:!0})}}},r=Object.keys(n);if(r.indexOf(t)>=0)return r.filter(i=>i!=t).forEach(i=>n[i]({activate:!1})),n[t]({activate:!0,params:e}),b.view=t,t}const Ht={hasClass:function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){if(this.hasClass(t,e))return;const n=t.className.split(" ");n.push(e),t.className=n.join(" ")},removeClass:function(t,e){if(!this.hasClass(t,e))return;const n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n,"")}},Cm={init:t=>{let e=0,n=0;t.buttons.forEach(i=>{i.side=="right"&&(e+=i.width||0),i.side=="left"&&(n+=i.width||0)});const r=Array.from(document.querySelectorAll(t.container));r.forEach(i=>{let s=0,o=0,a=null,l=0,c=0;t.buttons.forEach(u=>{const f=document.createElement("div");f.textContent=u.text,f.className=u.class,u.side=="right"&&(l+=u.width||0,f.style.right=-1*l+"px"),u.side=="left"&&(c+=u.width||0,f.style.left=-1*c+"px");const h=i.appendChild(f);if(u.image){const d=document.createElement("img");d.src=u.image,d.className=u.image_class,h.appendChild(d)}}),i.style.webkitTransform="translateZ(0)",i.style.transform="translateZ(0)",i.addEventListener("touchstart",function(u){i.style.transitionDuration="0ms",r.forEach(h=>{Ht.hasClass(h,"move-out-click")&&h!=i&&(h.style.transitionDuration="325ms",h.style.webkitTransform="translateX(0px)",h.style.transform="translateX(0px)",Ht.removeClass(h,"move-out-click"))});const f=u.changedTouches;a={x:f[0].pageX,y:f[0].pageY}},!0),i.addEventListener("touchmove",function(u){if(a===null)return;const f=u.changedTouches,h=f[0].pageX,d=f[0].pageY;if(s=h-a.x,o=d-a.y,Math.abs(s)>Math.abs(o)){if(s>0){if(Ht.hasClass(i,"move-out-click")){const p=s>e?0:-e+s;i.style.transform="translateX("+p+"px)"}else if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}if(s<0)if(Ht.hasClass(i,"move-out-click")){if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}else{const p=Math.abs(s)>e?-e:s;i.style.transform="translateX("+p+"px)"}}},!0),i.addEventListener("touchend",function(){if(a!==null){if(i.style.transitionDuration="125ms",Ht.hasClass(i,"move-out-click")){if(s>0&&e){const u=s>10?0:-e;i.style.transform="translateX("+u+"px)",u===0&&Ht.removeClass(i,"move-out-click")}else if(n){const u=s<-10?0:e;i.style.transform="translateX("+u+"px)",u===0&&Ht.removeClass(i,"move-out-click")}}else if(s<0&&e){const u=Math.abs(s)>e/2?-e:0;i.style.transform="translateX("+u+"px)",u!==0&&Ht.addClass(i,"move-out-click")}else if(n){const u=Math.abs(s)>e/2?e:0;i.style.transform="translateX("+u+"px)",u!==0&&Ht.addClass(i,"move-out-click")}a=null,s=0}},!0),i.addEventListener("touchcancel",function(){i.style.transitionDuration="225ms",i.style.webkitTransform="translateX(0px)",i.style.transform="translateX(0px)",Ht.removeClass(i,"move-out-click"),a=null,s=0},!0)})}};function Sc(){b.match.events.addPoint(Zt),b.match.events.undo(Zt),b.match.events.reset(Nm)}function Nm(){b.match.set.perspectiveScore(!1),b.match.set.liveStats(!0),b.match.metadata.timestamps(!0),b.match.metadata.defineMatch({date:null}),b.serve2nd=!1,b.rally_mode=!1,b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),b.undone=[],b.rally=0,b.lets=0,is(),fr(),gr(),Zt()}function is(){Object.keys(Et).forEach(t=>Ec(t))}function Ec(t){const e=document.getElementById(t);e&&Et!=null&&Et[t]&&Et[t].color&&(e.style.backgroundColor="white",e.style.color=Et[t].color,e.style.borderColor=Et[t].color)}function Sr(){const t=[];for(let s=0;s<256;s++)t[s]=(s<16?"0":"")+s.toString(16);const e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return t[e&255]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[n&255]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[r&63|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[i&255]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}function ss(t,e="entry"){if(!t){gt("entry");return}b.match.reset();const n=rt.get(t),r=n&&ul(n)&&t?JSON.parse(rt.get(t)??"[]"):void 0;if(!r){gt("entry");return}if(yl(),rt.set("current_match",t),r.match&&(r.match.muid||(r.match.muid=Sr(),rt.remove(t)),b.match.metadata.defineMatch(r.match)),r.first_service&&b.match.set.firstService(r.first_service),r.tournament&&b.match.metadata.defineTournament(r.tournament),r.format){b.match.format.settings(r.format);const i=document.getElementById("md_format");i&&(i.innerHTML=r.format.name)}r.version||r.points.forEach(i=>b.match.addPoint(i)),b.match.metadata.timestamps(!0),r.players&&r.players.forEach((i,s)=>{i.index=s,b.match.metadata.definePlayer(i)}),fr(),hr(),dr(),Zt(),Sc(),gt(e)}function Tc(t){const e=t==null?void 0:t.active;let n="<div class='swipe-panel no-top'>";const r=JSON.parse(rt.get("match_archive")||"[]").filter((s,o,a)=>a.lastIndexOf(s)==o).reverse();if(!r.length){as();return}if(e)return;r.forEach(s=>{const o=s&&JSON.parse(rt.get(s)??"[]");o?n+=Rm(s,o):rt.remove(s)}),n+="</div>";const i=document.getElementById("matcharchiveList");return i&&(i.innerHTML=n),Cm.init({container:".swipe-item",buttons:[{class:"img_export swipe_img",image_class:"export_icon",image:xl,side:"right",width:60},{class:"img_recycle swipe_img",image_class:"recycle_icon",image:kl,side:"right",width:60}]}),i&&i.addEventListener("click",function(s){var c,u;const o=on(s.target,"swipe-item"),a=o==null?void 0:o.getAttribute("muid");if(on(s.target,"mh_match"))return ss(a);(((u=(c=s==null?void 0:s.target)==null?void 0:c.className)==null?void 0:u.indexOf("img_export"))>=0||s.target.className=="export_icon")&&(o.classList.remove("move-out-click"),o.style.webkitTransitionDuration="125ms",o.style.transitionDuration="125ms",o.style.webkitTransform="translateX(0px)",o.style.transform="translateX(0px)",Al(a)),(s.target.className.indexOf("img_recycle")>=0||s.target.className=="recycle_icon")&&(Om(a),o.remove())}),r}function Om(t){rt.remove(t);const e=rt.get("current_match");let n=JSON.parse(rt.get("match_archive")||"[]");n=n.filter(r=>t!=r),rt.set("match_archive",JSON.stringify(n)),t==e&&os(),Tc({active:!0})}function os(t){b.match.reset(),dr(),hr();const e=new Date().valueOf();t=t||Sr(),b.match.metadata.defineMatch({muid:t,date:e}),rt.set("current_match",t),Zt()}function as(t){os(),gt(t?"entry":"matchformat")}const Lm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Rm(t,e){const n=new Date(e.match.date),r=[n.getDate(),Lm[n.getMonth()],n.getFullYear()].join("-"),i=e.players,s=`
         <span class='nowrap'>${sn(i[0].name)}</span>
         <span> v. </span>
         <span class='nowrap'>${sn(i[1].name)}</span>
         `,o=e.scoreboard,a=e.format.name;return`
      <div id='match_${t}' muid='${t}' class='flexcenter mh_swipe swipe-item'>
         <div class='flexcols mh_match'>
            <div class='mh_players'>${s}</div>
            <div class='mh_details'>
               <div>${r}</div>
               <div class='mh_format'>${a}</div>
            </div>
            <div class='mh_score'>${o}</div>
         </div>
      </div>`}const Vt=Object.create(null);Vt.open="0";Vt.close="1";Vt.ping="2";Vt.pong="3";Vt.message="4";Vt.upgrade="5";Vt.noop="6";const Fn=Object.create(null);Object.keys(Vt).forEach(t=>{Fn[Vt[t]]=t});const bi={type:"error",data:"parser error"},Mc=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Cc=typeof ArrayBuffer=="function",Nc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,cs=({type:t,data:e},n,r)=>Mc&&e instanceof Blob?n?r(e):No(e,r):Cc&&(e instanceof ArrayBuffer||Nc(e))?n?r(e):No(new Blob([e]),r):r(Vt[t]+(e||"")),No=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Oo(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Yr;function Pm(t,e){if(Mc&&t.data instanceof Blob)return t.data.arrayBuffer().then(Oo).then(e);if(Cc&&(t.data instanceof ArrayBuffer||Nc(t.data)))return e(Oo(t.data));cs(t,!1,n=>{Yr||(Yr=new TextEncoder),e(Yr.encode(n))})}const Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Lo.length;t++)tn[Lo.charCodeAt(t)]=t;const Im=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=tn[t.charCodeAt(r)],o=tn[t.charCodeAt(r+1)],a=tn[t.charCodeAt(r+2)],l=tn[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Dm=typeof ArrayBuffer=="function",ls=(t,e)=>{if(typeof t!="string")return{type:"message",data:Oc(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Bm(t.substring(1),e)}:Fn[n]?t.length>1?{type:Fn[n],data:t.substring(1)}:{type:Fn[n]}:bi},Bm=(t,e)=>{if(Dm){const n=Im(t);return Oc(n,e)}else return{base64:!0,data:t}},Oc=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Lc="",Fm=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{cs(s,!1,a=>{r[o]=a,++i===n&&e(r.join(Lc))})})},Um=(t,e)=>{const n=t.split(Lc),r=[];for(let i=0;i<n.length;i++){const s=ls(n[i],e);if(r.push(s),s.type==="error")break}return r};function Hm(){return new TransformStream({transform(t,e){Pm(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Vr;function Nn(t){return t.reduce((e,n)=>e+n.length,0)}function On(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function $m(t,e){Vr||(Vr=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Nn(n)<1)break;const l=On(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Nn(n)<2)break;const l=On(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Nn(n)<8)break;const l=On(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(bi);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Nn(n)<i)break;const l=On(n,i);a.enqueue(ls(s?l:Vr.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(bi);break}}}})}const Rc=4;function mt(t){if(t)return zm(t)}function zm(t){for(var e in mt.prototype)t[e]=mt.prototype[e];return t}mt.prototype.on=mt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};mt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};mt.prototype.off=mt.prototype.removeListener=mt.prototype.removeAllListeners=mt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};mt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};mt.prototype.emitReserved=mt.prototype.emit;mt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};mt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Rt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Pc(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Gm=Rt.setTimeout,qm=Rt.clearTimeout;function Er(t,e){e.useNativeTimers?(t.setTimeoutFn=Gm.bind(Rt),t.clearTimeoutFn=qm.bind(Rt)):(t.setTimeoutFn=Rt.setTimeout.bind(Rt),t.clearTimeoutFn=Rt.clearTimeout.bind(Rt))}const Wm=1.33;function Ym(t){return typeof t=="string"?Vm(t):Math.ceil((t.byteLength||t.size)*Wm)}function Vm(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Xm(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Km(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Jm extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class us extends mt{constructor(e){super(),this.writable=!1,Er(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new Jm(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ls(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Xm(e);return n.length?"?"+n:""}}const Ic="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),wi=64,jm={};let Ro=0,Ln=0,Po;function Io(t){let e="";do e=Ic[t%wi]+e,t=Math.floor(t/wi);while(t>0);return e}function Dc(){const t=Io(+new Date);return t!==Po?(Ro=0,Po=t):t+"."+Io(Ro++)}for(;Ln<wi;Ln++)jm[Ic[Ln]]=Ln;let Bc=!1;try{Bc=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Zm=Bc;function Fc(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Zm))return new XMLHttpRequest}catch{}if(!e)try{return new Rt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Qm(){}const tg=function(){return new Fc({xdomain:!1}).responseType!=null}();class eg extends us{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=tg&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Um(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Fm(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Dc()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new qt(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class qt extends mt{constructor(e,n){super(),Er(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Pc(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new Fc(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=qt.requestsCount++,qt.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Qm,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete qt.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}qt.requestsCount=0;qt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Do);else if(typeof addEventListener=="function"){const t="onpagehide"in Rt?"pagehide":"unload";addEventListener(t,Do,!1)}}function Do(){for(let t in qt.requests)qt.requests.hasOwnProperty(t)&&qt.requests[t].abort()}const fs=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Rn=Rt.WebSocket||Rt.MozWebSocket,Bo=!0,ng="arraybuffer",Fo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class rg extends us{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Fo?{}:Pc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Bo&&!Fo?n?new Rn(e,n):new Rn(e):new Rn(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;cs(r,this.supportsBinary,s=>{const o={};try{Bo&&this.ws.send(s)}catch{}i&&fs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Dc()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Rn}}class ig extends us{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=$m(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Hm();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&fs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const sg={websocket:rg,webtransport:ig,polling:eg},og=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ag=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xi(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=og.exec(t||""),s={},o=14;for(;o--;)s[ag[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=cg(s,s.path),s.queryKey=lg(s,s.query),s}function cg(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function lg(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let Uc=class we extends mt{constructor(e,n={}){super(),this.binaryType=ng,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=xi(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=xi(n.host).host),Er(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Km(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Rc,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new sg[e](r)}open(){let e;if(this.opts.rememberUpgrade&&we.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;we.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;we.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",we.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Ym(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){we.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Uc.protocol=Rc;function ug(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=xi(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const fg=typeof ArrayBuffer=="function",hg=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Hc=Object.prototype.toString,dg=typeof Blob=="function"||typeof Blob<"u"&&Hc.call(Blob)==="[object BlobConstructor]",pg=typeof File=="function"||typeof File<"u"&&Hc.call(File)==="[object FileConstructor]";function hs(t){return fg&&(t instanceof ArrayBuffer||hg(t))||dg&&t instanceof Blob||pg&&t instanceof File}function Un(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Un(t[n]))return!0;return!1}if(hs(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Un(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Un(t[n]))return!0;return!1}function mg(t){const e=[],n=t.data,r=t;return r.data=ki(n,e),r.attachments=e.length,{packet:r,buffers:e}}function ki(t,e){if(!t)return t;if(hs(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=ki(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=ki(t[r],e));return n}return t}function gg(t,e){return t.data=Ai(t.data,e),delete t.attachments,t}function Ai(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Ai(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Ai(t[n],e));return t}const yg=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_g=5;var nt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(nt||(nt={}));class vg{constructor(e){this.replacer=e}encode(e){return(e.type===nt.EVENT||e.type===nt.ACK)&&Un(e)?this.encodeAsBinary({type:e.type===nt.EVENT?nt.BINARY_EVENT:nt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===nt.BINARY_EVENT||e.type===nt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=mg(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Uo(t){return Object.prototype.toString.call(t)==="[object Object]"}class ds extends mt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===nt.BINARY_EVENT;r||n.type===nt.BINARY_ACK?(n.type=r?nt.EVENT:nt.ACK,this.reconstructor=new bg(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(hs(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(nt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===nt.BINARY_EVENT||r.type===nt.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(ds.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case nt.CONNECT:return Uo(n);case nt.DISCONNECT:return n===void 0;case nt.CONNECT_ERROR:return typeof n=="string"||Uo(n);case nt.EVENT:case nt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&yg.indexOf(n[0])===-1);case nt.ACK:case nt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bg{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=gg(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wg=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ds,Encoder:vg,get PacketType(){return nt},protocol:_g},Symbol.toStringTag,{value:"Module"}));function It(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const xg=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $c extends mt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[It(e,"open",this.onopen.bind(this)),It(e,"packet",this.onpacket.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(xg.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:nt.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...o])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((o,a)=>r?o?s(o):i(a):i(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:nt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case nt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case nt.EVENT:case nt.BINARY_EVENT:this.onevent(e);break;case nt.ACK:case nt.BINARY_ACK:this.onack(e);break;case nt.DISCONNECT:this.ondisconnect();break;case nt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:nt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:nt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function De(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}De.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};De.prototype.reset=function(){this.attempts=0};De.prototype.setMin=function(t){this.ms=t};De.prototype.setMax=function(t){this.max=t};De.prototype.setJitter=function(t){this.jitter=t};class Si extends mt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Er(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new De({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||wg;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Uc(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=It(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=It(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(It(e,"ping",this.onping.bind(this)),It(e,"data",this.ondata.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this)),It(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){fs(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new $c(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ve={};function Hn(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ug(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ve[i]&&s in Ve[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Si(r,e):(Ve[i]||(Ve[i]=new Si(r,e)),l=Ve[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Hn,{Manager:Si,Socket:$c,io:Hn,connect:Hn});function kg(){let t,e,n=50,r=1e3;const i="black";let s=5,o=10,a=150,l=["white","blue"];const c={top:0,right:0,bottom:0,left:0};function u(f){const h=f.node().getBoundingClientRect();if((!e||!t)&&(n=Math.min(t||h.width,h.width,e||h.height,h.height)*.45,o=n/3),t=t||h.width,e=e||h.height,!e||!t)return;const d=jt().domain([100,0]).range(l).interpolate(zf),p=function(A){return d(Math.abs(A%20-10))},y=zd().domain(Bt(s)).range([0,e]);f.append("svg").attr("width",t).attr("height",e).append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(y.domain()).enter().append("circle").attr("fill","#000").attr("stroke",i).attr("stroke-width",o+"px").attr("r",0).attr("cx",t/2).attr("cy",e/2).style("fill",p).on("click",Vc).transition().duration(r).delay(A=>A*a).on("start",function A(x,L,O){Yh(O[L]).attr("r",n).attr("stroke-width","0px").transition().attr("r",0).attr("stroke-width",o+"px").transition().on("start",A)})}return u.height=f=>f?(e=f,u):e,u.width=f=>f?(t=f,u):t,u.duration=f=>f?(r=f,u):r,u.pulse_circles=f=>f?(s=f,u):s,u.radius=f=>f?(n=f,u):n,u.delay_multiplier=f=>f?(a=f,u):a,u.stroke_width=f=>f?(o=f,u):o,u.color_range=f=>f?(l=f,u):l,u}const ps="@VERSION@",dt={socket:void 0,connectionOptions:{"force new connection":!0,reconnectionDelay:1e3,reconnectionAttempts:"Infinity",timeout:2e4}};function Tr(){if((navigator.onLine||window.location.hostname=="localhost")&&!dt.socket){const e=`${window.location.hostname.startsWith("localhost")||window.location.hostname==="127.0.0.1"?"http://localhost:8833":"https://courthive.com"}/mobile`;dt.socket=Hn(e,dt.connectionOptions),dt.socket&&(dt.socket.on("connect",Ag),dt.socket.on("ack",n=>console.log({ack:n})),dt.socket.on("disconnect",Sg),dt.socket.on("connect_error",Eg),dt.socket.on("history request",ms),dt.socket.on("tmx message",Tg))}}function zc(){dt.socket&&(dt.socket.disconnect(),dt.socket=void 0)}function ms(){if(Tr(),dt.socket){const t=b.match.metadata.defineMatch(),e={matchUp:{tournament:b.match.metadata.defineTournament(),first_service:b.match.set.firstService(),players:b.match.metadata.players(),format:b.match.format.settings(),scoreboard:b.match.scoreboard(),points:b.match.history.points(),provider:b.provider,matchUpId:t.muid,ch_version:ps,match:t}};t.muid&&dt.socket.emit("mh",{type:"history",payload:e})}he()}function Ag(){console.log("connect")}function Sg(){console.log("socket closed")}function Eg(){Ut(" <p> <h1>No Internet Connection!</h1>"),Wc()}function Tg(t){if(!(t!=null&&t.matchUpId))return Ut("<h2>Invalid Data</h2>");const e=dl(t.data);se(),os(e.match.muid),b.match.metadata.defineTournament({name:e.tournament.name,tuid:e.tournament.tuid,start_date:pl(e.tournament.start)}),b.match.metadata.defineMatch({euid:e.event.euid});const n=e.teams&&e.teams[0].length===2?"doubles":"singles",r=fl({sides:e.teams,format:n});b.match.metadata.definePlayer({index:0,name:r[0]}),b.match.metadata.definePlayer({index:1,name:r[1]});const i=e.event.surface;if(i){const o={C:"clay",H:"hard",G:"grass"};o[i]&&b.match.metadata.defineTournament({surface:o[i]})}const s=e.event.inout;if(s){const o={o:"out",i:"in"};o[s]&&b.match.metadata.defineTournament({in_out:o[s]})}dr(),Zt(),gt("entry")}function Gc(){return kt.broadcast&&dt.socket?!0:(kt.broadcast&&Tr(),!1)}function qc(){Tr();const t=kg().color_range(["white","white"]).height(60).width(60).radius(28).stroke_width(5);at("#startpulse").style("display","none"),at("#pulse").style("display","block").call(t)}function Wc(){kt.broadcast=!1,at("#startpulse").style("display","flex"),at("#pulse").style("display","none").selectAll("svg").remove(),zc()}function Yc(t){Object.assign(t,{timestamp:new Date().getTime(),uuuid:kt.user_uuid}),dt.socket?(dt.socket.emit("mh",{type:"key",payload:t}),he()):Ut(" <p> <h1>Not connected</h1> <p><i>Connection Error</i></p> </p> ")}function Vc(){kt.broadcast=!kt.broadcast,kt.broadcast?qc():Wc(),Ni()}function Ho(t){if(Gc()){const n={muid:b.match.metadata.defineMatch().muid,status:t},r=b.match.metadata.defineTournament();n.tuid=r.tuid||r.name,dt.socket.emit("mh",{type:"status",payload:n})}}function Xc(){let t,e,n,r=[0,0],i,s;const o={left:void 0,right:void 0},a={id:"gf1",score:[0,0],width:window.innerWidth,height:window.innerHeight,margins:{top:10,bottom:10,left:10,right:10},fish:{school:!1,gridcells:["0","15","30","40","G"],max_rally:void 0,cell_size:void 0,min_cell_size:5,max_cell_size:20},set:{tiebreak_to:7},display:{orientation:"vertical",transition_time:0,sizeToFit:!1,leftImg:!1,rightImg:!1,show_images:void 0,reverse:!1,point_score:!0,service:!0,player:!0,rally:!0,score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}},l={default:"#235dba"};let c=JSON.parse(JSON.stringify(l));const u={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};let f,h,d,p,y;function g(A){A._groups[0][0].tagName.toLowerCase()!="svg"&&(h=A.append("div").attr("class","fishRoot"),f=h.append("svg").attr("id","gameFish"+a.id).attr("class","fishFrame"),d=f.append("g"),p=f.append("g"),y=f.append("g")),s=function(O){if(d==null||p==null||y==null)return;if(a.display.sizeToFit||O&&O.sizeToFit){const R=A.node().getBoundingClientRect();a.width=Math.max(R.width,100),a.height=Math.max(R.height,100)}if(a.fish.cell_size&&!a.fish.school){const R=Math.max(10,t.length+2);a.height=a.fish.cell_size*R*.9}let v=!1,_=0;t.forEach(R=>{R.rally&&R.rally.length>_&&(_=R.rally.length),R.score.indexOf("T")>0&&(v=!0)}),a.fish.max_rally&&a.fish.max_rally>_&&(_=a.fish.max_rally),e=a.width-(a.margins.left+a.margins.right),n=a.height-(a.margins.top+a.margins.bottom);const m=a.display.orientation=="vertical"?1:0,P=m?e:n,z=m?n:e,W=(m?a.margins.left:a.margins.top)+P/2,Z=1,V=.9;d.attr("transform","translate("+(m?0:r[0])+","+(m?r[1]:0)+")"),p.attr("transform","translate("+r[0]+","+r[1]+")"),y.attr("transform","translate("+r[0]+","+r[1]+")");let H;if(a.fish.cell_size)H=a.fish.cell_size;else{const R=v?a.set.tiebreak_to+4:a.fish.gridcells.length+2,K=P/(a.fish.gridcells.length+(a.display.service?R:0)),tt=z/(t.length+2);H=Math.min(K,tt),H=Math.max(a.fish.min_cell_size,H),H=Math.min(a.fish.max_cell_size,H)}const X=Math.sqrt(2*Math.pow(H,2)),U=X/2,j=[],J=[],D=v?a.set.tiebreak_to:a.fish.gridcells.length-1;for(let R=0;R<D;R++){const K=v?R:a.fish.gridcells[R];J.push({label:K,l:(R+(m?1.25:.75))*U,o:(R+(m?.75:1.25))*U,rotate:45}),J.push({label:K,l:(R+1.25)*U,o:-1*(R+.75)*U,rotate:-45});for(let tt=0;tt<D;tt++)j.push([R,tt])}if(h&&(h.attr("width",a.width+"px").attr("height",a.height+"px"),f.attr("width",a.width+"px").attr("height",a.height+"px")),a.display.point_score){const R=p.selectAll(".game_score"+a.id).data(J);R.exit().remove(),R.enter().append("text").attr("font-size",U*.8+"px").attr("transform",st).attr("text-anchor","middle").merge(R).transition().duration(a.display.transition_time).attr("class","game_score"+a.id).attr("font-size",U*.8+"px").attr("transform",st).attr("text-anchor","middle").text(function(K){return K.label})}else p.selectAll(".game_score"+a.id).remove();if(a.display.grid){const R=p.selectAll(".gridcell"+a.id).data(j);R.exit().remove(),R.enter().append("rect").attr("stroke","#ccccdd").attr("stroke-width",$).attr("transform",vt).attr("width",H).attr("height",H).merge(R).transition().duration(a.display.transition_time).attr("class","gridcell"+a.id).attr("stroke-width",$).attr("width",H).attr("height",H).attr("transform",vt).attr("fill-opacity",0)}else p.selectAll(".gridcell"+a.id).remove();const E=y.selectAll(".gamecell"+a.id).data(t);E.exit().remove(),E.enter().append("rect").attr("opacity",0).attr("width",H).attr("height",H).attr("transform",I).attr("stroke","#ccccdd").attr("stroke-width",$).merge(E).attr("id",(R,K)=>a.id+"Gs"+R.set+"g"+R.game+"p"+K).transition().duration(a.display.transition_time).attr("class","gamecell"+a.id).attr("width",H).attr("height",H).attr("transform",I).attr("stroke","#ccccdd").attr("stroke-width",$).attr("opacity",a.display.player?1:0).style("fill",function(R){return a.colors.players[R.winner]});const M=y.selectAll(".result"+a.id).data(t);M.exit().remove(),M.enter().append("circle").attr("stroke","black").attr("id",function(R,K){return a.id+"Rs"+R.set+"g"+R.game+"p"+K}).attr("class","result"+a.id).attr("opacity",1).attr("stroke-width",$).attr("cx",Ss).attr("cy",Es).attr("r",N).style("fill",function(R){return a.colors.results[R.result]}).merge(M).attr("id",function(R,K){return a.id+"Rs"+R.set+"g"+R.game+"p"+K}).attr("class","result"+a.id).transition().duration(a.display.transition_time).attr("stroke-width",$).attr("cx",Ss).attr("cy",Es).attr("r",N).style("fill",function(R){return a.colors.results[R.result]});const C=jt().range([0,P*V]).domain([0,_]),T=xr().domain(Bt(t.length)).range([0,t.length*U]).round(!0);if(a.display.rally){const R=d.selectAll(".rally_bar"+a.id).data(t);R.exit().remove(),R.enter().append("rect").attr("opacity",0).attr("transform",ot).attr("height",m?T.bandwidth():0).attr("width",m?0:T.bandwidth()).merge(R).attr("class","rally_bar"+a.id).on("mouseover",(K,tt,lt)=>{at(lt[tt]).attr("fill","yellow")}).on("mouseout",(K,tt,lt)=>{at(lt[tt]).attr("fill","#eeeeff")}).transition().duration(a.display.transition_time).attr("id",function(K,tt){return a.id+"Bs"+K.set+"g"+K.game+"p"+tt}).attr("opacity",1).attr("stroke","white").attr("stroke-width",$).attr("fill","#eeeeff").attr("transform",w).attr("height",m?T.bandwidth():B).attr("width",m?B:T.bandwidth())}else d.selectAll(".rally_bar"+a.id).remove();if(a.display.score){const R=a.score.slice();a.display.reverse&&R.reverse();const K=d.selectAll(".set_score"+a.id).data(R);K.exit().remove(),K.enter().append("text").attr("class","set_score"+a.id).attr("transform",F).attr("font-size",U*.8+"px").attr("text-anchor","middle").text(function(lt){return lt}).merge(K).attr("class","set_score"+a.id).attr("transform",F).attr("font-size",U*.8+"px").attr("text-anchor","middle").text(function(lt){return lt});const tt=d.selectAll(".ssb"+a.id).data(a.score);tt.exit().remove(),tt.enter().append("rect").merge(tt).attr("class","ssb"+a.id).attr("transform",q).attr("stroke","black").attr("stroke-width",$).attr("fill-opacity",0).attr("height",U+"px").attr("width",U+"px")}else d.selectAll(".set_score"+a.id).remove(),d.selectAll(".ssb"+a.id).remove();if(a.display.service){const R=[];t.forEach(function(ee,Cs){let Ns=!1;const ll=["Ace","Serve Winner","Double Fault"];ee.first_serve&&(Ns=!0,R.push({point:Cs,serve:"first",server:ee.server,result:ee.first_serve.error})),R.push({point:Cs,serve:Ns?"second":"first",server:ee.server,result:ll.indexOf(ee.result)>=0?ee.result:"In"})});const K=d.selectAll(".serve"+a.id).data(R);K.exit().remove(),K.enter().append("circle").attr("class","serve"+a.id).attr("cx",ws).attr("cy",xs).attr("r",N).attr("stroke",Y).attr("stroke-width",$).attr("fill",Y).merge(K).attr("class","serve"+a.id).attr("cx",ws).attr("cy",xs).attr("r",N).attr("stroke",Y).attr("stroke-width",$).attr("fill",Y);const tt=d.selectAll(".sbox"+a.id).data(t);tt.exit().remove(),tt.enter().append("rect").attr("stroke","#ccccdd").attr("fill-opacity",0).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",$).attr("height",m?T.bandwidth():1.5*U).attr("width",m?1.5*U:T.bandwidth()).merge(tt).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",$).attr("height",m?T.bandwidth():1.5*U).attr("width",m?1.5*U:T.bandwidth());const lt=d.selectAll(".return"+a.id).data(t);lt.exit().remove(),lt.enter().append("circle").attr("class","return"+a.id).attr("cx",te).attr("cy",Fe).attr("r",N).attr("stroke",S).attr("stroke-width",$).attr("fill",S).merge(lt).attr("class","return"+a.id).attr("cx",te).attr("cy",Fe).attr("r",N).attr("stroke",S).attr("stroke-width",$).attr("fill",S)}else d.selectAll(".sbox"+a.id).remove(),d.selectAll(".return"+a.id).remove(),d.selectAll(".serve"+a.id).remove();a.display.rightImg?(o.right=f.selectAll("image.rightImage").data([0]),o.right.exit().remove(),o.right.enter().append("image").attr("class","rightImage").attr("xlink:href",a.display.rightImg).attr("x",a.width-30).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)}).merge(o.right).attr("x",a.width-30).attr("xlink:href",a.display.rightImg).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)})):f&&f.selectAll("image.rightImage").remove(),a.display.leftImg?(o.left=f.selectAll("image.leftImage").data([0]),o.left.enter().append("image").attr("class","leftImage").attr("xlink:href",a.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.leftImage.click&&u.leftImage.click()}).merge(o.left).attr("xlink:href",a.display.leftImg).on("click",function(){u.leftImage.click&&u.leftImage.click(a.id)}),o.left.exit().remove()):f&&f.selectAll("image.leftImage").remove();function N(){return a.display.player||a.display.service?U/4:U/2}function $(){return U>20?1:.5}function Y(R){return a.colors.results[R.result]}function S(R){return R.rally==null?"white":R.rally.length>1?"yellow":R.rally.length==1?a.colors.results[R.result]:"white"}function B(R){return R.rally?C(R.rally.length):0}function F(R,K){let tt=K?W+U*.5:W-U*.5;tt=m?tt:tt+U*.3;const lt=U*(m?.8:.5);return Q(tt,lt,0)}function q(R,K){const tt=K?W:W-U;return Q(tt,0,0)}function st(R){const K=+W+R.o,tt=U+R.l;return Q(K,tt,R.rotate)}function vt(R){const K=W+(R[1]-R[0]+m-1)*U,tt=(R[0]+R[1]+3-m)*U;return Q(K,tt,45)}function I(R,K){const tt=W+(L(R)+m-1)*U,lt=(K+4-m)*U;return i=[tt-W,lt-X,X],Q(tt,lt,45)}function G(R,K){const tt=R.server==0?W-P/2*Z:W+P/2*Z-1.5*U,lt=U+Ct(R,K);return Q(tt,lt,0)}function ot(R,K){const tt=W,lt=U+Ct(R,K);return Q(tt,lt,0)}function w(R,K){const tt=R.rally?W-C(R.rally.length)/2:0,lt=U+Ct(R,K);return Q(tt,lt,0)}function Q(R,K,tt){const lt=m?R:K,ee=m?K:R;return"translate("+lt+","+ee+") rotate("+tt+")"}function Ct(R,K){return(K+2.5)*U}function te(R,K){return m?bs(R):vs(R,K)}function Fe(R,K){return m?vs(R,K):bs(R)}function vs(R,K){return U+(K+3)*U}function bs(R){return R.server==0?W+P/2*Z-.75*U:W-P/2*Z+.75*U}function ws(R){return m?As(R):ks(R)}function xs(R){return m?ks(R):As(R)}function ks(R){return U+(R.point+3)*U}function As(R){const K=R.serve=="first"&&R.server==0||R.serve=="second"&&R.server==1?.4:1.1;return R.server==0?W-P/2*Z+K*U:W+P/2*Z-K*U}function Ss(R,K){return m?Ms(R):Ts(R,K)}function Es(R,K){return m?Ts(R,K):Ms(R)}function Ts(R,K){return U+(K+3)*U}function Ms(R){return+W+L(R)*U}};function L(O){return O.points[a.display.reverse?0:1]-O.points[a.display.reverse?1:0]}}g.g=function(A){if(!arguments.length)return g;typeof A!="object"||A.constructor==Array||(A.bars&&(d=A.bars),A.fish&&(p=A.fish),A.game&&(y=A.game))},g.options=function(A){return arguments.length?(k(A,a),g):a};function k(A,x){if(!A||!x)return;const L=Object.keys(A),O=Object.keys(x);for(let v=0;v<L.length;v++)if(O.indexOf(L[v])>=0){const _=x[L[v]],m=A[L[v]];typeof _=="object"&&typeof m!="function"&&_&&_.constructor!==Array?k(A[L[v]],x[L[v]]):x[L[v]]=A[L[v]]}}return g.events=function(A){return arguments.length?(k(A,u),g):u},g.width=function(A){return arguments.length?(a.width=A,g):a.width},g.height=function(A){return arguments.length?(a.height=A,g):a.height},g.coords=function(A){return arguments.length?(r=A,g):i},g.data=function(A){return arguments.length?(t=JSON.parse(JSON.stringify(A)),g):t},g.update=function(A){u.update.begin&&u.update.begin(),typeof s=="function"&&t&&s(A),setTimeout(function(){u.update.end&&u.update.end()},a.display.transition_time)},g.colors=function(A){if(!arguments.length)return c;if(typeof A!="object")return!1;const x=Object.keys(A);return x.length?(x.forEach(function(L){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(A[L])||delete A[L]}),Object.keys(A).length?c=A:c=JSON.parse(JSON.stringify(l)),g):!1},g}function Mg(){let t,e,n=[];const r={left:void 0,right:void 0},i={id:"m1",fullWidth:window.innerWidth,fullHeight:window.innerHeight,margins:{top:1,bottom:1,left:3,right:3},fish:{gridcells:["0","15","30","40","G"],cell_size:void 0,min_cell_size:5,max_cell_size:10},display:{continuous:!1,reverse:!1,orientation:"vertical",leftImg:!1,rightImg:!1,show_images:void 0,transition_time:0,sizeToFit:!0,service:!0,player:!0,rally:!0,score:!1,momentum_score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}};function s(){return i.fullWidth-i.margins.left-i.margins.right}function o(){return i.fullHeight-i.margins.top-i.margins.bottom}i.height=o(),i.width=s();const a={default:"#235dba"};let l=JSON.parse(JSON.stringify(a));const c={score:{click:null},leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};function u(h){h.each(function(d,p,y){const k=at(y[p]).append("div").attr("class","momentumRoot").attr("transform","translate(0, 0)"),A=k.append("svg").attr("class","momentumFrame");A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const x=A.append("g").attr("id","momentumBars"),L=A.append("g").attr("id","momentumFish"),O=A.append("g").attr("id","momentumGame");e=function(v){if(i.display.sizeToFit||v&&v.sizeToFit){const S=h.node().getBoundingClientRect();i.display.orientation=="vertical"&&(i.fullWidth=Math.max(S.width,100)),i.fullHeight=Math.max(S.height,100)}i.height=o(),i.width=s();const _=i.display.orientation=="vertical"?1:0,m=_?i.width:i.height,P=m/2,z=Oi(t);let W=0;t.forEach(function(S){S.rally!=null&&S.rally.length>W&&(W=S.rally.length)});const Z=T();n.slice(z.length).forEach(function(S){ii(".c"+S.options().id).remove()}),n=n.slice(0,z.length);let H;const X=[0,0],U=[];z.forEach(function(S,B){n[B]||(n.push(Xc()),A.call(n[B]),n[B].g({bars:x.append("g").attr("class","cGF"+B),fish:L.append("g").attr("class","cGF"+B),game:O.append("g").attr("class","cGF"+B)}),n[B].options({id:"GF"+B,display:{score:!1,point_score:!1},fish:{school:!0}})),n[B].width(m).height(m),n[B].options({score:S.score,fish:{cell_size:Z,max_rally:W},display:{orientation:i.display.orientation,service:i.display.service,rally:i.display.rally,player:i.display.player,grid:i.display.grid},colors:{players:{0:i.colors.players[0],1:i.colors.players[1]}}}),n[B].data(S.points),n[B].coords(X).update();const F=n[B].coords();X[0]+=_?F==null?void 0:F[0]:(F==null?void 0:F[1])-(F==null?void 0:F[2])/2,X[1]+=_?F==null?void 0:F[1]:(F==null?void 0:F[0])+(F==null?void 0:F[2])/2,U.push({score:S.score,index:S.index,l:X[1]+(F==null?void 0:F[2])*1.75,o:X[0]+(F==null?void 0:F[2])*1.75,set_end:S.last_game}),S.last_game&&!i.display.continuous&&(X[_?0:1]=0),H=(F==null?void 0:F[2])/2}),k.attr("width",i.width+"px").attr("height",(_?100+X[1]:i.height)+"px").on("mouseover",$).on("mouseout",Y),A.attr("width",i.width+"px").attr("height",(_?100+X[1]:i.height)+"px");const j=L.selectAll(".midline"+i.id).data([0]);j.enter().append("line").attr("class","midline"+i.id).attr("x1",_?P:H).attr("x2",_?P:X[0]+5*(H||0)).attr("y1",_?H:P).attr("y2",_?X[1]+5*H:P).attr("stroke-width",C).attr("stroke","#ccccdd"),j.exit().remove(),j.transition().duration(i.display.transition_time).attr("x1",_?P:H).attr("x2",_?P:X[0]+5*(H||0)).attr("y1",_?H:P).attr("y2",_?X[1]+5*H:P).attr("stroke-width",C).attr("stroke","#ccccdd");const J=L.selectAll(".score_line"+i.id).data(U);if(J.enter().append("line").attr("class","score_line"+i.id).attr("x1",function(S){return _?Z*2:S.o}).attr("x2",function(S){return _?m-Z*2:S.o}).attr("y1",function(S){return _?S.l:Z*3}).attr("y2",function(S){return _?S.l:m-Z*3}).attr("stroke-width",C).attr("stroke-dasharray",function(S){return S.set_end?"0":"5,5"}).attr("stroke",function(S){return S.set_end?"#000000":"#ccccdd"}),J.exit().remove(),J.transition().duration(i.display.transition_time).attr("x1",function(S){return _?Z*2:S.o}).attr("x2",function(S){return _?m-Z*2:S.o}).attr("y1",function(S){return _?S.l:Z*3}).attr("y2",function(S){return _?S.l:m-Z*3}).attr("stroke-width",C).attr("stroke-dasharray",function(S){return S.set_end?"0":"5,5"}).attr("stroke",function(S){return S.set_end?"#000000":"#ccccdd"}),i.display.momentum_score){const S=L.selectAll(".score_text"+i.id).data(U);S.exit().remove(),S.enter().append("g").attr("class","score_text"+i.id).attr("transform",D).on("click",function(F){c.score.click&&c.score.click(F)}).merge(S).attr("class","score_text"+i.id).attr("transform",D).on("click",function(F){c.score.click&&c.score.click(F)});const B=S.selectAll(".score"+i.id).data(function(F){return F.score});B.exit().remove(),B.enter().append("text").attr("class","score"+i.id).attr("transform",E).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(F){return F}).merge(B).attr("class","score"+i.id).transition().duration(i.display.transition_time).attr("transform",E).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(F){return F})}else L.selectAll(".score_text"+i.id).remove();function D(S){return M(0,_?S.l:S.o-H,0)}function E(S,B){const F=_?m/3:i.height/3,q=B?P+F:P-F+H*3,st=-1*H*(_?.25:.5);return M(q,st,0)}function M(S,B,F){const q=_?S:B,st=_?B:S;return"translate("+q+","+st+") rotate("+F+")"}function C(){return H>20?2:1}function T(){let S;if(i.display.orientation=="vertical")S=i.width/2/(N()+1);else{const B=i.width/(t.length+4);S=Math.sqrt(2*B*B)}return Math.min(i.fish.max_cell_size,S)}function N(){let S=0;const B=[0,0];return t.forEach(function(F){B[F.point.winner]+=1;const q=Math.abs(B[0]-B[1]);q>S&&(S=q)}),S}i.display.rightImg?(r.right=A.selectAll("image.rightImage").data([0]),r.right.exit().remove(),r.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-20).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)}).merge(r.right).attr("x",i.width-20).attr("xlink:href",i.display.rightImg).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)})):A.selectAll("image.rightImage").remove(),i.display.leftImg?(r.left=A.selectAll("image.leftImage").data([0]),r.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.leftImage.click&&c.leftImage.click()}).merge(r.left).attr("xlink:href",i.display.leftImg).on("click",function(){c.leftImage.click&&c.leftImage.click(i.id)}),r.left.exit().remove()):A.selectAll("image.leftImage").remove();function $(){i.display.show_images!=!1&&(i.display.leftImg&&r.left.attr("opacity",1),i.display.rightImg&&r.right.attr("opacity",1))}function Y(){i.display.show_images||(i.display.leftImg&&r.left.attr("opacity",0),i.display.rightImg&&r.right.attr("opacity",0))}}})}u.options=function(h){return arguments.length?(f(h,i),u):i};function f(h,d){if(!h||!d)return;const p=Object.keys(h),y=Object.keys(d);for(let g=0;g<p.length;g++)if(y.indexOf(p[g])>=0){const k=d[p[g]],A=h[p[g]];typeof k=="object"&&typeof A!="function"&&k.constructor!==Array?f(h[p[g]],d[p[g]]):d[p[g]]=h[p[g]]}}return u.events=function(h){return arguments.length?(f(h,c),u):c},u.width=function(h){return arguments.length?(i.fullWidth=h,u):i.fullWidth},u.height=function(h){return arguments.length?(i.fullHeight=h,u):i.fullHeight},u.data=function(h){return arguments.length?(t=h,u):t},u.update=function(h){c.update.begin&&c.update.begin(),typeof e=="function"&&t&&e(h),setTimeout(function(){c.update.end&&c.update.end()},i.display.transition_time)},u.colors=function(h){if(!arguments.length)return l;if(typeof h!="object")return!1;const d=Object.keys(h);return d.length?(d.forEach(function(p){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(h[p])||delete h[p]}),Object.keys(h).length?l=h:l=JSON.parse(JSON.stringify(a)),u):!1},u}function Cg(){function t(D){return Math.max.apply(null,D)}function e(D){return Math.min.apply(null,D)}const n={left:void 0,right:void 0};let r=[];const i={width:150,height:150,min_max:20,margins:{top:0,right:0,bottom:0,left:0},display:{noAd:!1,leftImg:!1,rightImg:!1,show_images:!1,sizeToFit:!0,showEmpty:!1},lines:{easing:!1,duration:600,points:{winners:"#2ed2db",errors:"#2ed2db",unknown:"#2ed2db"},colors:{underlines:"#2ed2db"}},nodes:{colors:{0:"black",1:"red",neutral:"#ecf0f1"}},points:{winners:["Winner","Ace","Serve Winner","Passing Shot","Return Winner","Forcing Error","Forcing Volley Error","Net Cord","In"],errors:["Unforced Error","Unforced","Forced Error","Error","Out","Net","Netted Passing Shot","L","Overhead Passing Shot","Double Fault"],highlight:[]},selectors:{enabled:!0,selected:{0:!1,1:!1}},labels:{Game:"GAME",Player:"Player",Opponent:"Opponent"}};let s,o,a;const l=0,c="x";let u={w:{},e:{},p:{},n:{}};const f={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mousemove:null,mouseout:null},node:{mousemove:null,mouseout:null},score:{mousemove:null,mouseout:null},label:{mousemove:null,mouseout:null,click:k},selector:{mousemove:null,mouseout:null,click:k}};function h(D){const E=D.append("div").attr("class","gametreeRoot");o=E.append("svg"),s=function(M){if(!r.length&&!i.display.showEmpty){o.selectAll("*").remove();return}if(p(),i.display.sizeToFit||M&&M.sizeToFit){const w=D.node().getBoundingClientRect();i.width=Math.min(w.width,w.height)}const C=i.width-(i.margins.left+i.margins.right),T=i.width*.9;a=(T+C)/2*.03;const N=z.map(function(w){return w.id}),$=e(N.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),Y=t([t(N.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),i.min_max]),S=jt().domain([$,Y]).range([0,a*2]);o.transition().duration(l).attr("width",C).attr("height",T);const B=o.selectAll(".gradient").data(z,y);B.exit().remove(),B.enter().append("linearGradient").attr("id",function(w){return"gradient"+w.id}).attr("class","gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T}).merge(B).attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T});const F=B.selectAll(".points_stop").data(w=>A(w));F.exit().remove(),F.enter().append("stop").attr("class","points_stop").attr("offset",function(w){return w.offset}).attr("stop-color",function(w){return w.color}).merge(F).attr("offset",function(w){return w.offset});const q=o.selectAll(".line").data(z);q.exit().remove(),q.enter().append("line").attr("class","line").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(w){return"url(#gradient"+w.id+")"}).on("mousemove",function(w,Q){f.point.mousemove&&f.point.mousemove(w,Q)}).on("mouseout",function(w,Q){f.point.mouseout&&f.point.mouseout(w,Q)}).on("click",function(w,Q){f.point.click&&f.point.click(w,Q)}).merge(q).transition().duration(i.lines.easing||M&&M.easing?i.lines.duration:0).attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return u.p[w.id]?S(u.p[w.id]):0});const st=o.selectAll(".uline").data(W);st.exit().remove(),st.enter().append("line").attr("class","uline").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(){return i.lines.colors.underlines}).merge(st).transition().duration(l).attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*C}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*C}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0});const vt=o.selectAll(".node").data(P);vt.exit().remove(),vt.enter().append("circle").attr("class","node").attr("cx",function(w){return w.pos.x*C}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a}).attr("stroke",function(w){return w.color_pct!=null?j(J(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).attr("fill",function(w){return w.color_pct!=null?j(J(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).on("mousemove",function(w,Q){f.score.mousemove&&f.score.mousemove(w,Q)}).on("mouseout",function(w,Q){f.node.mouseout&&f.node.mouseout(w,Q)}).on("click",function(w,Q){f.node.click&&f.node.click(w,Q)}).merge(vt).transition().duration(l).attr("cx",function(w){return w.pos.x*C}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a});const I=o.selectAll(".score").data(Z);I.exit().remove(),I.enter().append("text").attr("class","score").attr("x",function(w){return w.pos.x*C}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("font-family","Lato, Arial, sans-serif").attr("text-anchor","middle").attr("alignment-baseline","central").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>7)return w.text}).on("mousemove",function(w,Q){f.score.mousemove&&f.score.mousemove(w,Q)}).on("mouseout",function(w,Q){f.score.mouseout&&f.score.mouseout(w,Q)}).on("click",function(w,Q){f.score.click&&f.score.click(w,Q)}).merge(I).transition().duration(l).attr("x",function(w){return w.pos.x*C}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return w.text});const G=o.selectAll(".gt_label").data(V);G.exit().remove(),G.enter().append("text").attr("class","gt_label").attr("x",function(w){return w.pos.x*C}).attr("y",function(w){return w.pos.y*T}).attr("alignment-baseline",function(w){return w.baseline?w.baseline:void 0}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("text-anchor",function(w){return w.anchor?w.anchor:void 0}).attr("font-family","Lato, Arial, sans-serif").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>5)return w.id}).attr("selector",function(w){return w.id}).on("click",function(w,Q,Ct){f.label.click&&f.label.click(w,Q,Ct[Q])}).merge(G).transition().duration(l).attr("x",function(w){return w.pos.x*C}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return i.labels[w.id]});const ot=o.selectAll(".selector").data(H);ot.exit(),ot.enter().append("circle").attr("class","selector").attr("status",function(w){return w.status}).attr("id",function(w){return w.id}).attr("selector",function(w){return w.id}).attr("cx",function(w){return w.pos.x*C}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke",function(w,Q){return i.nodes.colors[Q]}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,Q){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[Q]?i.nodes.colors[Q]:i.nodes.colors.neutral}).attr("opacity",function(w){return w.opacity}).on("mousemove",function(w,Q){f.selector.mousemove&&f.selector.mousemove(w,Q)}).on("mouseout",function(w,Q){f.selector.mouseout&&f.selector.mouseout(w,Q)}).on("click",function(w,Q,Ct){f.selector.click&&f.selector.click(w,Q,Ct[Q])}).merge(ot).transition().duration(l).attr("cx",function(w){return w.pos.x*C}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,Q){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[Q]?i.nodes.colors[Q]:i.nodes.colors.neutral}),i.display.rightImg?(n.right=o.selectAll("image.rightImage").data([0]),n.right.exit().remove(),n.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-(i.margins.right+30)).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)}).merge(n.right).attr("x",i.width-(i.margins.right+30)).attr("xlink:href",i.display.rightImg).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)})):E.selectAll("image.rightImage").remove(),i.display.leftImg?(n.left=o.selectAll("image.leftImage").data([0]),n.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10+i.margins.left).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.leftImage.click&&f.leftImage.click()}).merge(n.left).attr("x",10+i.margins.left).attr("xlink:href",i.display.leftImg).on("click",function(){f.leftImage.click&&f.leftImage.click(i.id)}),n.left.exit().remove()):E.selectAll("image.leftImage").remove()}}h.exports=function(){return{selectView:k}},h.options=function(D){return arguments.length?(d(D,i),h):i};function d(D,E){if(!D||!E)return;const M=Object.keys(D),C=Object.keys(E);for(let T=0;T<M.length;T++)if(C.indexOf(M[T])>=0){const N=E[M[T]],$=D[M[T]];typeof N=="object"&&typeof $!="function"&&N&&N.constructor!==Array?d(D[M[T]],E[M[T]]):E[M[T]]=D[M[T]]}}h.events=function(D){return arguments.length?(d(D,f),h):f},h.reset=function(){return r=[],g(),u={w:{},e:{},p:{},n:{}},h},h.width=function(D){return arguments.length?(i.width=D,h):i.width},h.height=function(D){return arguments.length?(i.height=D,h):i.height},h.data=function(D){return arguments.length?(D.constructor===Array&&(h.reset(),r=D),h):r},h.counters=function(){return p(),u},h.update=function(D){f.update.begin&&f.update.begin(),typeof s=="function"&&s(D),setTimeout(function(){f.update.end&&f.update.end()},l)};function p(){let D;if(u={w:{},e:{},p:{},n:{}},i.selectors.selected[0]||i.selectors.selected[1]){const M=i.selectors.selected[0]?0:1;D=r.filter(function(C){return C.point.server==M})}else D=r;D=D.filter(function(M){return!M.point.tiebreak});for(let M=0;M<D.length;M++){const C=D[M-1],N="L"+(M==0||C.game.complete?E([0,0]):E(C.point.points))+c+E(D[M].point.points);i.points.highlight.length&&i.points.highlight.indexOf(M)<0||(u.p[N]=u.p[N]?u.p[N]+1:1,i.points.winners.indexOf(D[M].point.result)>=0?u.w[N]=u.w[N]?u.w[N]+1:1:i.points.errors.indexOf(D[M].point.result)>=0&&(u.e[N]=u.e[N]?u.e[N]+1:1))}function E(M){const C=Math.min(...M),T=C>=4?C-3:0;return M.map(($,Y)=>i.display.noAd&&$==4&&M[1-Y]==3?"G":$-T).join("-")}}function y(D){return D&&D.id}function g(){at("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),i.selectors.selected[1]=!1,i.selectors.selected[0]=!1}function k(D,E,M){if(!i.selectors.enabled)return;const C=at(M).attr("selector");at("[id="+C+"]").attr("status")=="none"?at(M).attr("selector")=="Opponent"?(at("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Opponent]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[E]),i.selectors.selected[1]=!0,i.selectors.selected[0]=!1):(at("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Player]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[E]),i.selectors.selected[0]=!0,i.selectors.selected[1]=!1):(at("[id="+C+"]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at(M).attr("selector")=="Opponent"?i.selectors.selected[1]=!1:i.selectors.selected[0]=!1),s()}function A(D){if(!u.p[D.id])return[];const E=u.p[D.id]==null?1:u.p[D.id],M=u.w[D.id]?u.w[D.id]:0,C=u.e[D.id]?u.e[D.id]:0,T=M/E*100,N=(E-(M+C))/E*100;return[{offset:"0%",color:i.lines.points.unknown},{offset:N+"%",color:i.lines.points.unknown},{offset:N+"%",color:i.lines.points.winners},{offset:N+T+"%",color:i.lines.points.winners},{offset:N+T+"%",color:i.lines.points.errors},{offset:"100%",color:i.lines.points.errors}]}const x=.07,L=.14,O=.05,v=.21,_={col1:x,col2:x+L,col3:x+2*L,col4:x+3*L,col5:x+4*L,col6:x+5*L,col7:x+6*L,row1:O,row2:O+v,row3:O+2*v,row4:O+3*v,row5:O+4*v,foot:O+4.1*v,adr1:O+3.5*v,adc1:x+L*2.5,adc2:x+L*3.5,selc:x*.8,tslc:x,sl1r:O/2,sl2r:O*1.5,plr1:x*.8,plr2:x+4*L,plrs:O+4.25*v},m={"p0-0":{x:_.col4,y:_.row1},"p1-1":{x:_.col4,y:_.row2},"p2-2":{x:_.col4,y:_.row3},"p3-3":{x:_.col4,y:_.row4},"p1-0":{x:_.col3,y:_.row2},"p0-1":{x:_.col5,y:_.row2},"p2-1":{x:_.col3,y:_.row3},"p1-2":{x:_.col5,y:_.row3},"p2-0":{x:_.col2,y:_.row3},"p0-2":{x:_.col6,y:_.row3},"p3-2":{x:_.col3,y:_.row4},"p2-3":{x:_.col5,y:_.row4},"p3-1":{x:_.col2,y:_.row4},"p1-3":{x:_.col6,y:_.row4},"p3-0":{x:_.col1,y:_.row4},"p0-3":{x:_.col7,y:_.row4},"p3-4":{x:_.adc1,y:_.adr1},"p4-3":{x:_.adc2,y:_.adr1},"p5-3":{x:_.adc2,y:_.row5},"p3-5":{x:_.adc1,y:_.row5},"p4-1":{x:_.col2,y:_.row5},"p1-4":{x:_.col6,y:_.row5},"p4-2":{x:_.col3,y:_.row5},"p2-4":{x:_.col5,y:_.row5},"p4-0":{x:_.col1,y:_.row5},"p0-4":{x:_.col7,y:_.row5},"pG-3":{x:_.col4,y:_.row5},"p3-G":{x:_.col4,y:_.row5},sPlyr:{x:_.adc1,y:_.plrs},tPlyr:{x:_.col2,y:_.plrs},sOpp:{x:_.adc2,y:_.plrs},tOpp:{x:_.col6,y:_.plrs},GAME:{x:_.col4,y:_.foot},L1s:{x:_.col1,y:_.foot},L1e:{x:_.adc1,y:_.foot},L2s:{x:_.adc2,y:_.foot},L2e:{x:_.col7,y:_.foot}},P=[{name:"0-0",pos:m["p0-0"],player:0},{name:"15-15",pos:m["p1-1"],player:0},{name:"30-30",pos:m["p2-2"],player:0},{name:"40-40",pos:m["p3-3"],player:0},{name:"0-15",pos:m["p0-1"],color_pct:.4,player:1},{name:"15-30",pos:m["p1-2"],color_pct:.4,player:1},{name:"0-30",pos:m["p0-2"],color_pct:.2,player:1},{name:"30-40",pos:m["p2-3"],color_pct:.4,player:1},{name:"15-40",pos:m["p1-3"],color_pct:.2,player:1},{name:"0-40",pos:m["p0-3"],color_pct:0,player:1},{name:"40-A",pos:m["p4-3"],color_pct:.5,player:1},{name:"15-0",pos:m["p1-0"],color_pct:.4,player:0},{name:"30-15",pos:m["p2-1"],color_pct:.4,player:0},{name:"30-0",pos:m["p2-0"],color_pct:.2,player:0},{name:"40-30",pos:m["p3-2"],color_pct:.4,player:0},{name:"40-15",pos:m["p3-1"],color_pct:.2,player:0},{name:"40-0",pos:m["p3-0"],color_pct:0,player:0},{name:"A-40",pos:m["p3-4"],color_pct:.5,player:0}],z=[{id:"L0-0x0-1",start:m["p0-0"],end:m["p0-1"]},{id:"L0-0x1-0",start:m["p0-0"],end:m["p1-0"]},{id:"L0-1x0-2",start:m["p0-1"],end:m["p0-2"]},{id:"L0-1x1-1",start:m["p0-1"],end:m["p1-1"]},{id:"L1-0x2-0",start:m["p1-0"],end:m["p2-0"]},{id:"L1-0x1-1",start:m["p1-0"],end:m["p1-1"]},{id:"L1-1x1-2",start:m["p1-1"],end:m["p1-2"]},{id:"L1-1x2-1",start:m["p1-1"],end:m["p2-1"]},{id:"L2-0x2-1",start:m["p2-0"],end:m["p2-1"]},{id:"L2-0x3-0",start:m["p2-0"],end:m["p3-0"]},{id:"L2-1x2-2",start:m["p2-1"],end:m["p2-2"]},{id:"L2-1x3-1",start:m["p2-1"],end:m["p3-1"]},{id:"L2-2x2-3",start:m["p2-2"],end:m["p2-3"]},{id:"L2-2x3-2",start:m["p2-2"],end:m["p3-2"]},{id:"L0-2x0-3",start:m["p0-2"],end:m["p0-3"]},{id:"L0-2x1-2",start:m["p0-2"],end:m["p1-2"]},{id:"L0-3x0-4",start:m["p0-3"],end:m["p0-4"]},{id:"L0-3x1-3",start:m["p0-3"],end:m["p1-3"]},{id:"L1-2x2-2",start:m["p1-2"],end:m["p2-2"]},{id:"L1-2x1-3",start:m["p1-2"],end:m["p1-3"]},{id:"L1-3x2-3",start:m["p1-3"],end:m["p2-3"]},{id:"L1-3x1-4",start:m["p1-3"],end:m["p1-4"]},{id:"L2-3x3-3",start:m["p2-3"],end:m["p3-3"]},{id:"L2-3x2-4",start:m["p2-3"],end:m["p2-4"]},{id:"L3-3x3-4",start:m["p3-3"],end:m["p4-3"]},{id:"L3-3x4-3",start:m["p3-3"],end:m["p3-4"]},{id:"L3-2x3-3",start:m["p3-2"],end:m["p3-3"]},{id:"L3-2x4-2",start:m["p3-2"],end:m["p4-2"]},{id:"L3-1x3-2",start:m["p3-1"],end:m["p3-2"]},{id:"L3-1x4-1",start:m["p3-1"],end:m["p4-1"]},{id:"L3-0x3-1",start:m["p3-0"],end:m["p3-1"]},{id:"L3-0x4-0",start:m["p3-0"],end:m["p4-0"]},{id:"L3-4x3-5",start:m["p4-3"],end:m["p5-3"]},{id:"L4-3x5-3",start:m["p3-4"],end:m["p3-5"]},{id:"L3-3xG-3",start:m["p3-3"],end:m["pG-3"]},{id:"L3-3x3-G",start:m["p3-3"],end:m["p3-G"]}],W=[{stroke:"blue",start:m.L1s,end:m.L1e,width:2},{stroke:"blue",start:m.L2s,end:m.L2e,width:2}],Z=[{pos:m["p0-0"],fill:"black",fontsize:.7,text:"0-0"},{pos:m["p1-1"],fill:"black",fontsize:.7,text:"15-15"},{pos:m["p2-2"],fill:"black",fontsize:.7,text:"30-30"},{pos:m["p3-3"],fill:"black",fontsize:.7,text:"40-40"},{pos:m["p0-1"],fill:"white",fontsize:.7,text:"0-15"},{pos:m["p1-2"],fill:"white",fontsize:.7,text:"15-30"},{pos:m["p0-2"],fill:"white",fontsize:.7,text:"0-30"},{pos:m["p2-3"],fill:"white",fontsize:.7,text:"30-40"},{pos:m["p1-3"],fill:"white",fontsize:.7,text:"15-40"},{pos:m["p0-3"],fill:"white",fontsize:.7,text:"0-40"},{pos:m["p4-3"],fill:"white",fontsize:.7,text:"40-A"},{pos:m["p1-0"],fill:"white",fontsize:.7,text:"15-0"},{pos:m["p2-1"],fill:"white",fontsize:.7,text:"30-15"},{pos:m["p2-0"],fill:"white",fontsize:.7,text:"30-0"},{pos:m["p3-2"],fill:"white",fontsize:.7,text:"40-30"},{pos:m["p3-1"],fill:"white",fontsize:.7,text:"40-15"},{pos:m["p3-0"],fill:"white",fontsize:.7,text:"40-0"},{pos:m["p3-4"],fill:"white",fontsize:.7,text:"A-40"}],V=[{pos:m.tPlyr,fill:"black",fontsize:.9,id:"Player",anchor:"middle",baseline:"hanging"},{pos:m.tOpp,fill:"black",fontsize:.9,id:"Opponent",anchor:"middle",baseline:"hanging"},{pos:m.GAME,fill:"#555555",fontsize:.9,id:"Game",anchor:"middle",baseline:"central"}],H=[{id:"Player",pos:m.sPlyr,r_pct:.4,opacity:1,status:"none"},{id:"Opponent",pos:m.sOpp,r_pct:.4,opacity:.4,status:"none"}];function X(D,E){const M=parseInt(D.slice(1),16),C=E<0?0:255,T=E<0?E*-1:E,N=M>>16,$=M>>8&255,Y=M&255;return"#"+(16777216+(Math.round((C-N)*T)+N)*65536+(Math.round((C-$)*T)+$)*256+(Math.round((C-Y)*T)+Y)).toString(16).slice(1)}function U(D,E){const M=D.split(","),C=E<0?0:255,T=E<0?E*-1:E,N=parseInt(M[0].slice(4)),$=parseInt(M[1]),Y=parseInt(M[2]);return"rgb("+(Math.round((C-N)*T)+N)+","+(Math.round((C-$)*T)+$)+","+(Math.round((C-Y)*T)+Y)+")"}function j(D,E){return D.length>7?U(D,E):X(D,E)}function J(D){const E=document.createElement("div");E.style.color=D;const M=window.getComputedStyle(document.body.appendChild(E)).color.match(/\d+/g).map(function(C){return parseInt(C,10)});return document.body.removeChild(E),M.length>=3?"#"+((1<<24)+(M[0]<<16)+(M[1]<<8)+M[2]).toString(16).substr(1):!1}return h}function Ng(){let t;const e={id:0,class:"ptsMatch",resize:!0,width:window.innerWidth,height:80,max_height:100,margins:{top:0,right:0,bottom:0,left:0},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{sizeToFit:!0,transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!0,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"#a55194",1:"#6b6ecf"}}};let n;const r=[];let i;const s=[];for(let c=0;c<5;c++)s.push(Og());const o={update:{begin:null,end:null},set_box:{mouseover:null,mouseout:null},point_bars:{mouseover:null,mouseout:null,click:null}};function a(c){if(i=c,e.display.sizeToFit){const f=c.node().getBoundingClientRect();e.width=Math.max(f.width,400)}const u=i.append("div").attr("class",e.class+"root").style("width",e.width+"px").style("height",e.height+"px");for(let f=0;f<5;f++)r[f]=u.append("div").attr("class","pts").style("display","none"),r[f].call(s[f]);n=function(f){var p;const h=t.sets();if(e.display.sizeToFit||f!=null&&f.sizeToFit){const y=c.node().getBoundingClientRect();e.width=Math.max(y.width,400),e.height=(y.height-(+e.margins.top+ +e.margins.bottom))/h.length,e.height>e.max_height&&(e.height=e.max_height)}let d=0;for(let y=0;y<s.length;y++)(p=h==null?void 0:h[y])!=null&&p.history.points().length?(r[y].style("display","inline"),s[y].width(e.width),s[y].height(e.height),s[y].update(),d+=+e.height+5):r[y].style("display","none");u.style("width",e.width+"px").style("height",d+"px")}}a.options=function(c){return arguments.length?(l(c,e),a):e};function l(c,u){if(!c||!u)return;const f=Object.keys(c),h=Object.keys(u);for(const d of f)if(h.indexOf(d)>=0){const p=u[d],y=c[d];typeof p=="object"&&typeof y!="function"&&p&&p.constructor!==Array?l(c[d],u[d]):u[d]=c[d]}}return a.events=function(c){return arguments.length?(l(c,o),a):o},a.colors=function(c){return arguments.length?(e.colors.players=c,a):e.colors},a.width=function(c){return arguments.length?(e.width=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.width(c)}),a):e.width},a.height=function(c){return arguments.length?(e.height=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.height(c)}),a):e.height},a.duration=function(c){return arguments.length?(e.display.transition_time=c,a):e.display.transition_time},a.update=function(c){o.update.begin&&o.update.begin();const u=t.sets(),f=Math.max(...u.map((h,d)=>h.history.points().filter(p=>p.set==d).length));return u.length>1&&a.options({points:{max_width_points:f}}),u.forEach(function(h,d){s[d].data(u[d]),s[d].options({id:d}),s[d].options({lines:e.lines,points:e.points,score:e.score,header:e.header}),s[d].options({set:e.set,display:e.display,colors:e.colors}),s[d].events(o),s[d].width(e.width).height(e.height).update(c)}),typeof n=="function"&&n(c),setTimeout(function(){o.update.end&&o.update.end()},e.display.transition_time),!0},a.data=function(c){if(!arguments.length)return t;t=c,a.update()},a}function Og(){let t,e,n;const r=["Ace","Winner","Serve Winner"],i=["Forced Error","Unforced Error","Double Fault","Penalty","Out","Net"],s={id:0,class:"ptsChart",resize:!0,width:window.innerWidth,height:80,margins:{top:5,right:15,bottom:5,left:5},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!1,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"blue",1:"purple"}}};let o,a;const l={set_box:{mouseover:null,mouseout:null},update:{begin:null,end:null},point_bars:{mouseover:null,mouseout:null,click:null}};function c(p){p.each(function(y,g,k){a=at(k[g]);const A=a.append("svg").attr("class",s.class+"root").style("width",s.width+"px").style("height",s.height+"px"),x=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),L=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),O=x.append("text").attr("class",s.class+"Header").attr("opacity",0).attr("font-size",s.header.font_size).attr("font-weight",s.header.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+8+"px"}),v=x.append("text").attr("class",s.class+"Score").attr("opacity",0).attr("font-size",s.score.font_size).attr("font-weight",s.score.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+20+"px"});o=function(_,m){if(!t)return!1;A.transition().duration(s.display.transition_time).style("width",s.width+"px").style("height",s.height+"px");const P=t.history.action("addPoint").filter(I=>I.point.set==s.id),z=P[0].point.index;e=d(P),n=P.map(I=>I.needed.points_to_set);const W=Math.max(...[].concat(n.map(I=>I[0]),n.map(I=>I[1]))),Z=Math.max(...n[0]);n.unshift([Z,Z]);const V=Math.max.apply(null,P.map(function(I){return I.point.rally?I.point.rally.length:0}))+2;st(m);const H=jt().domain([0,h()]).range([0,s.width-(s.margins.left+s.margins.right)]);function X(I,G,ot){return I.range[G]<z?H(I.range[G]+ot):H(I.range[G]+ot-z)}const U=jt().range([s.height-(s.margins.top+s.margins.bottom),s.margins.bottom]).domain([-2,W-1]),j=x.selectAll("."+s.class+"SetBox").data([s.id]);j.enter().append("rect").attr("class",s.class+"SetBox").style("position","relative").attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none").on("mouseover",function(I,G){l.set_box.mouseover&&l.set_box.mouseover(I,G)}).on("mouseout",function(I,G){l.set_box.mouseout&&l.set_box.mouseout(I,G)}).merge(j).transition().duration(m?0:s.display.transition_time).attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}),j.exit().transition().duration(m?0:s.display.transition_time).style("opacity",0).remove();const J=x.selectAll("."+s.class+"GameBoundary").data(e);J.exit().remove(),J.enter().append("rect").attr("class",s.class+"GameBoundary").merge(J).attr("id",function(I,G){return s.class+s.id+"boundary"+G}).transition().duration(m?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(I){return"translate("+X(I,0,0)+", 0)"}).attr("height",U(-2)).attr("width",function(I){return X(I,1,1)-X(I,0,0)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none");const D=x.selectAll("."+s.class+"Game").data(e);D.exit().remove(),D.enter().append("rect").attr("class",s.class+"Game").merge(D).attr("id",function(I,G){return s.class+s.id+"game"+G}).transition().duration(m?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(I){return"translate("+X(I,0,0)+", 0)"}).attr("height",U(-2)).attr("width",function(I){return X(I,1,1)-X(I,0,0)}).attr("stroke",function(I){return s.colors.players[I.winner]}).attr("stroke-width",1).attr("fill",function(I){return I.winner!=null?s.colors.players[I.winner]:"none"});const E=mc().x(function(I,G){return H(G)}).y(function(I){return U(W-I)}),M=x.selectAll("."+s.class+"Line").data([0,1]);M.exit().remove(),M.enter().append("path").attr("class",s.class+"Line").attr("id",function(I){return s.class+s.id+"player"+I+"Line"}).attr("fill","none").merge(M).transition().duration(m?0:s.display.transition_time/2).style("opacity",.1).transition().duration(m?0:s.display.transition_time/2).style("opacity",1).attr("stroke",function(I){return s.colors.players[I]}).attr("stroke-width",function(){return s.lines.width}).attr("d",function(I){return E(n.map(G=>G[I]))});const C=[n.map(I=>({pts:I[0]})),n.map(I=>({pts:I[1]}))],T=x.selectAll("."+s.class+"BPWrapper").data(C);T.enter().append("g").attr("class",s.class+"BPWrapper"),T.exit().remove();const N=T.selectAll("."+s.class+"Breakpoint").data(function(I,G){return u(I,G)});N.exit().attr("opacity","0").remove(),N.enter().append("circle").attr("class",s.class+"Breakpoint").attr("opacity","0").merge(N).transition().duration(m?0:s.display.transition_time/2).style("opacity",0).transition().duration(m?0:s.display.transition_time/2).attr("fill",function(I,G){if(P[G-1]&&P[G-1].point.breakpoint!=null)return s.colors.players[I._i]}).style("opacity",function(I,G){if(P[G-1]&&P[G-1].point.breakpoint!=null)return P[G-1].point.server==1-I._i?1:0}).attr("cx",function(I,G){return H(G)}).attr("cy",function(I){return U(W-I.pts)}).attr("r",2);const $=Bt(P.length),Y=xr().domain($).range([0,H(P.length)]).round(!0),S=jt().domain([0,P.length]).range([0,H(P.length)]);x.selectAll(".gradient"+s.id).remove();const B=x.selectAll(".gradient"+s.id).data(Bt(P.length));B.exit().remove(),B.enter().append("linearGradient").attr("id",function(I,G){return"gradient"+s.id+G}).attr("class",function(){return"gradient"+s.id}).attr("gradientUnits","userSpaceOnUse").attr("x1",function(){return Y.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return Y.bandwidth()/2}).attr("y2",function(){return U(-2)}).merge(B).attr("transform",function(I,G){return"translate("+S(G)+", 0)"});const F=B.selectAll(".points_stop").data(function(I){return vt(P[I].point)});F.exit().remove(),F.enter().append("stop").attr("class","points_stop").attr("offset",function(I){return I.offset}).attr("stop-color",function(I){return I.color}).merge(F).attr("offset",function(I){return I.offset});const q=L.selectAll("."+s.class+"Bar").data(Bt(P.length));q.exit().transition().duration(m?0:s.display.transition_time).attr("opacity","0").remove(),q.enter().append("line").attr("class",s.class+"Bar").attr("opacity","0").merge(q).attr("opacity","0").attr("transform",function(I,G){return"translate("+S(G)+", 0)"}).attr("x1",function(){return Y.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return Y.bandwidth()/2}).attr("y2",function(){return U(-2)}).attr("stroke-width",function(){return Y.bandwidth()}).attr("stroke",function(I,G){return"url(#gradient"+s.id+G+")"}).attr("uid",function(I,G){return"point"+G}).on("mousemove",function(I,G,ot){s.display.point_highlighting&&at(ot[G]).attr("opacity",s.display.point_opacity),s.display.game_highlighting&&P[G]&&at('[id="'+s.class+s.id+"game"+P[G].point.game+'"]').attr("opacity",s.display.game_opacity),l.point_bars.mouseover&&l.point_bars.mouseover(P[I],G),I==0&&L.selectAll("."+s.class+"Bar").attr("opacity",s.display.point_opacity)}).on("mouseout",function(I,G){L.selectAll("."+s.class+"Bar").attr("opacity",0),x.selectAll("."+s.class+"Game").attr("opacity","0"),l.point_bars.mouseout&&l.point_bars.mouseout(P[I],G),st()}).on("click",function(I,G,ot){l.point_bars.click&&l.point_bars.click(P[I],G,ot[G])});function st(I){const G=t.winner(),ot=t.metadata.players();function w(te){const Fe=te.split(" ");return Fe[Fe.length-1]}const Q=G!=null?ot[G].name:`${w(ot[0].name)}/${w(ot[1].name)}`;O.transition().duration(I?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(Q);const Ct=t.scoreboard(G);v.transition().duration(I?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(Ct)}function vt(I){let G=0,ot=0,w=0;if(s.display.win_err_highlight){console.log("calcstops:",I);const Q=I.rally,Ct=I.result,te=Q?100-Math.floor(Q.length/V*100):100;r.indexOf(Ct)>=0?G=te:i.indexOf(Ct)>=0?ot=te:w=te}return[{offset:"0%",color:"blue"},{offset:w+"%",color:"blue"},{offset:w+"%",color:"green"},{offset:w+G+"%",color:"green"},{offset:w+G+"%",color:"red"},{offset:w+G+ot+"%",color:"red"},{offset:w+G+ot+"%",color:s.colors.orientation},{offset:"100%",color:s.colors.orientation}]}}})}function u(p,y){for(const g of p)g._i=y;return p}function f(){const p=t.history.points().filter(y=>y.set==s.id).length-1;return t.complete()?p:p<s.set.average_points?s.set.average_points:p}function h(){const p=t.history.points().filter(y=>y.set==s.id).length-1;return Math.max(p,s.points.max_width_points,s.set.average_points)}function d(p){const y=[{points:[],range:[0,0]}];let g=0,k=0;return p.forEach(A=>{const x=A.point;x.game!=k&&(g+=1,k=x.game,y[g]={points:[],range:[x.index,x.index]}),y[g].points.push(x),y[g].index=g,y[g].set=A.set.index,y[g].score=A.game.games,y[g].complete=A.game.complete,y[g].range[1]=x.index,A.game.complete&&(y[g].winner=x.winner)}),y}return c.options=function(p){if(!arguments.length)return s;const y=Object.keys(p),g=Object.keys(s);for(const k of y)if(g.indexOf(k)>=0)if(typeof s[k]=="object"){const A=Object.keys(p[k]),x=Object.keys(s[k]);for(const L of A)x.indexOf(L)>=0&&(s[k][L]=p[k][L])}else s[k]=p[k];return c},c.data=function(p){if(!arguments.length)return t;t=p},c.events=function(p){if(!arguments.length)return l;const y=Object.keys(p),g=Object.keys(l);for(const k of y)g.indexOf(k)>=0&&(l[k]=p[k]);return c},c.colors=function(p){return arguments.length?(s.colors.players=p,c):s.colors},c.width=function(p){return arguments.length?(s.width=p,c):s.width},c.height=function(p){return arguments.length?(s.height=p,c):s.height},c.update=function(p){return l.update.begin&&l.update.begin(),typeof o=="function"&&o(p),setTimeout(function(){l.update.end&&l.update.end()},s.display.transition_time),!0},c.duration=function(p){return arguments.length?(s.display.transition_time=p,c):s.display.transition_time},c}function Lg(){let t=["#a55194","#6b6ecf"];it.mc=Mg(),it.mc.options({display:{sizeToFit:!1,continuous:!1,orientation:"vertical",transition_time:0,service:!1,rally:!0,player:!1,grid:!1,score:!0},colors:t}),it.mc.events({score:{click:Rg}}),at("#momentumChart").call(it.mc),t={players:["#a55194","#6b6ecf"]},it.gamefish=Xc(),it.gamefish.options({display:{sizeToFit:!0},colors:t}),at("#gameFishChart").call(it.gamefish),it.gametree=Cg();const e={display:{sizeToFit:!0},lines:{points:{winners:"green",errors:"#BA1212",unknown:"#2ed2db"},colors:{underlines:"black"}},nodes:{colors:{0:t.players[0],1:t.players[1],neutral:"#ecf0f1"}},selectors:{enabled:!0,selected:{0:!1,1:!1}}};it.gametree.options(e),at("#gameTreeChart").call(it.gametree),it.pts_match=Ng(),it.pts_match.options({margins:{top:40,bottom:20},display:{sizeToFit:!0}}),it.pts_match.data(b.match),at("#PTSChart").call(it.pts_match)}function Rg(t){gs(t.index)}function Pg(){const t=document.getElementById("gamefish");t&&(t.style.display="none")}function gs(t){const e=document.getElementById("gamefish");e&&(e.style.display="flex");const n=Oi(),r=t!=null?n[t]:n[n.length-1],i=r.points[0].tiebreak?["0","1","2","3","4","5","6","7"]:["0","15","30","40","G"];it.gamefish.options({display:{reverse:b.swap_sides},fish:{gridcells:i,cell_size:20},score:r.score}),it.gamefish.data(r.points).update(),window.scrollTo(0,0)}function Kc(){const t=b.orientation=="landscape"?"horizontal":"vertical";b.view=="pts"&&t=="vertical"?(ft("none","pts"),ft("inline","momentum"),it.mc.width(window.innerWidth).height(820),it.mc.update(),b.view="momentum"):b.view=="momentum"&&t=="horizontal"&&(ft("none","momentum"),ft("flex","pts"),it.pts_match.update({sizeToFit:!0}),b.view="pts"),it.gamefish&&it.gamefish.update();const e=b.match.metadata.players();it.gametree&&(it.gametree.options({labels:{Player:e[0].name,Opponent:e[1].name}}),it.gametree.update({sizeToFit:!0}))}function $o(){ta(),Kc(),gt()}function Jc(){const t={};let e=["surface","in_out","draw","draw_size","round"];e.forEach(n=>{const r=`tournament_${n}`,i=document.getElementById(r);if(i.selectedIndex>=0){const s=i.options[i.selectedIndex].value;s&&(t[n]=s)}}),e=["name","start_date","tour","rank"],e.forEach(n=>{const i=document.getElementById(`tournament_${n}`).value;i&&(t[n]=i.trim())}),b.match.metadata.defineTournament(t),se()}function jc(){const t={};["court","umpire"].forEach(n=>{const i=document.getElementById(`match_${n}`).value;i&&(t[n]=i)}),b.match.metadata.defineMatch(t),se()}function Ig(){Jc(),jc();const e=document.getElementById("provider").value;b.provider=e,e&&rt.set("mobile-provider",e)}let Zc;const pt={elapsed:1e5,held:void 0,touched:void 0,holdTime:800,holdAction:void 0,holdActions:{}},dn={};let Tt={};const Dg=(t,e)=>t.filter(n=>e.indexOf(n)!==-1).filter((n,r,i)=>i.indexOf(n)===r);pt.reset=()=>(Tt={},pt);pt.register=(t,e,n,r)=>(typeof n=="function"&&(Tt[e]||(Tt[e]={},dn[e]=[]),Tt[e][t]={fx:n,delay:r},dn[e]=Object.keys(Tt[e])),pt);pt.deRegister=(t,e)=>(Tt[e]&&(delete Tt[e][t],dn[e]=Object.keys(Tt[e])),pt);pt.call=(t,e,...n)=>{var r,i;return(i=(r=Tt==null?void 0:Tt[e])==null?void 0:r[t])==null?void 0:i.fx(...n)};pt.trigger=(t,e,n,r)=>Tt[e][t].fx(n,r,e);pt.list=()=>console.log(Tt);const Bg="ontouchstart"in document.documentElement?"touchstart":"click";document.addEventListener(Bg,t=>Be({evt:t,evnt:"tap"}));document.addEventListener("change",t=>Be({evt:t,evnt:"change"}));document.addEventListener("click",t=>Be({evt:t,evnt:"click"}));document.addEventListener("mouseover",t=>Be({evt:t,evnt:"mouseover",stopPropagation:!1}));document.addEventListener("mouseout",t=>Be({evt:t,evnt:"mouseout",stopPropagation:!1}));document.addEventListener("keyup",t=>Be({evt:t,evnt:"keyup",stopPropagation:!1}));let zo=0;function Be({evt:t,evnt:e,stopPropagation:n=!0}){n&&t.stopPropagation();const r={x:t.clientX,y:t.clientY,pageX:t.pageX,pageY:t.pageY},i=Array.from(t.target.classList),s=i.length&&dn[e]?Dg(i,dn[e]):[];if(s.length){const o=new Date().getTime();pt.elapsed=o-zo,zo=o,s.forEach(a=>{Fg({cls:a,evt:t,evnt:e,mouse:r})})}}function Fg({cls:t,evt:e,evnt:n,mouse:r}){const i=e.target;Tt[n][t].fx(i,r,n,e)}document.addEventListener("touchstart",t=>{pt.touched=t.target,pt.coords=[t.touches[0].clientX,t.touches[0].clientY],pt.touched&&(Zc=setTimeout(function(){Ug()},pt.holdTime))},!1);document.addEventListener("touchend",function(){Qc()},!1);document.addEventListener("touchmove",function(t){pt.touched!==t.target&&Qc()},!1);function Qc(){clearTimeout(Zc)}function Ug(){typeof pt.holdAction=="function"&&(pt.held=pt.touched,pt.holdAction(pt.held,pt.coords))}let ar=!1,Go,rn="";function Hg(){clearTimeout(Go),ar=!0,rn!=="can-touch"&&(rn="can-touch",document.documentElement.classList.add(rn)),Go=setTimeout(function(){ar=!1},500)}function $g(){!ar&&rn==="can-touch"&&(ar=!1,rn="",document.documentElement.classList.remove("can-touch"))}document.addEventListener("touchstart",Hg,!1);document.addEventListener("mouseover",$g,!1);const zg=pt;function vn(t){t=t||b.match.history.lastPoint();const e=b.match.metadata.players();if(e[0].name!=zn[0]&&e[1].name!=zn[1]&&Gc()){const r=Ci.geoposition.coords||{},i=b.match.metadata.defineTournament(),s=b.match.metadata.defineMatch(),o={tournament:i,match:b.match.metadata.defineMatch(),event:{euid:s.euid},status:b.match.status,players:b.match.metadata.players(),score:b.match.score(),point:t.point,serving:b.match.nextTeamServing(),complete:b.match.complete(),winner:b.match.winner(),geoposition:{latitude:r.latitude,longitude:r.longitude},undo:typeof t=="string"&&t=="Undo"};Gg(o)}}let Xr,Kr,Pn=0;const qo=1e4;function Gg(t){const e=Date.now();if(Xr=t,e-Pn>qo)dt.socket.emit("mh",{type:"score",payload:{next_update:Xr}}),Pn=e;else{Kr&&clearTimeout(Kr);const n=qo-(e-Pn);Kr=setTimeout(function(){dt.socket.emit("mh",{type:"score",payload:{next_update:Xr}}),Pn=e},n)}}function Ei(t){if(b.match.complete()){const e=b.match.metadata.players()[b.match.winner()].name;return Ut(`<div style="height: 50vh" class="flexcols flexcenter"><div>Match Complete!</div><div>Winner: ${e}</div></div>`),!0}else t!=null&&t.game.complete&&Ft.display_gamefish&&gs()}function qg(t){const e=t.getAttribute("hand"),n=t.getAttribute("stroke");if(e&&n){const s=b.match.history.lastPoint();b.match.decoratePoint(s,{hand:e,stroke:n}),Zt()}rs();const r=b.match.history.action("addPoint"),i=r[r.length-1];Ei(i),vn(i)}function Wg(){b.match.metadata.definePlayer(Yg()),se()}function Yg(){const t={index:b.edit_player};["hand","entry","seed","draw_position","ioc"].forEach(a=>{const l=`player_${a}`,c=document.getElementById(l);if(c.selectedIndex>=0){const u=c.options[c.selectedIndex].value;u&&(t[a]=u)}});const n=document.getElementById("player_rank");n.value&&(t.rank=n.value);const r=document.getElementById("player_wtn");r.value&&(t.wtn=r.value);const i=document.getElementById("player_utr");i.value&&(t.utr=i.value);const s=document.getElementById("team");s.value&&(t.team=s.value);const o=document.getElementById("playerid");return o.value&&(t.id=o.value),t}function Vg(t){const e=on(t,"mf_format");if(e){const n=e.getAttribute("newFormat");b.match.format.type(n);const r=b.match.format.settings().name;document.getElementById("md_format").innerHTML=r,hr(),se(),gt("entry")}}const Jr="Double Fault",jr={};function Xg(t){const e=t.getAttribute("action");let n=parseInt(t.getAttribute("side")??0);const r=t.getAttribute("service"),i=t.getAttribute("role");if(Ei())return;const s=n?"right":"left";b.swap_sides&&["server","receiver"].indexOf(i)<0&&(n=1-n),is();function o(d,p){Array.from(document.querySelectorAll(d)).forEach(g=>g.innerHTML=p)}function a(){b.rally_mode=!0,Array.from(document.querySelectorAll(".modeforce")).forEach(d=>d.style.display="flex"),o(".vs_action_button.winner","Winner"),o(".vs_action_button.fault","UFE"),o(".vs_action_button.forced","Forced"),Array.from(document.querySelectorAll(".vs_mode_button")).forEach(d=>{["Serve","Return","2nd Serve"].indexOf(d.innerHTML)>=0&&(d.innerHTML="Base Line")})}const l={firstServe(){b.serve2nd=!1},secondServe(){b.serve2nd=!jr.serve2nd,jr.serve2nd=!jr.serve2nd},fault(d){if(d!=b.serving)return;if(b.serve2nd)return{code:"D"};const p=b.swap_sides?1-d:d;o(`.fault.display_${p}_serving`,Jr),o(`.fault.modeerr_player${p}`,Jr);const g=`.modeaction_player${b.swap_sides?1-b.serving:b.serving}`;Array.from(document.querySelectorAll(g)).forEach(k=>k.innerHTML="2nd Serve"),b.serve2nd=!0,Ho("Service Fault")},doubleFault(d){return d!=b.serving?void 0:{code:"d"}},ace(d){return d!=b.serving?void 0:b.serve2nd?{code:"a"}:{code:"A"}},winner(d){return{winner:d,result:"Winner"}},unforced(d){return{winner:1-d,result:"Unforced Error"}},forced(d){return{winner:1-d,result:"Forced Error"}},point(d){return{winner:d}},penalty(d){return console.log("penalty"),{winner:1-d,result:"Penalty",code:d==b.serving?"P":"Q"}},modewin(d,p){const y=t.innerHTML;if(y=="Ace")return l.ace(d,p);if(y=="Winner")return l.winner(d,p)},modeerr(d,p){const y=t.innerHTML;if(y=="Fault"||y==Jr)return l.fault(d,p);if(y=="UFE")return l.unforced(d,p);if(y=="Forced")return l.forced(d,p);if(y=="Let")return l.let(d,p)},modeaction(){const d=t.innerHTML;["Serve","2nd Serve","Return"].indexOf(d)>=0&&a(),(d=="Serve"||d=="Return")&&a(),d=="Net"&&(t.innerHTML="Base Line"),d=="Base Line"&&(t.innerHTML="Net")},rally(){const d=t.innerHTML;b.rally=parseInt((d.match(/\d+/g)||["0"]).join("")),b.rally+=1,o(".rally",`Rally: ${b.rally}`),b.rally==1&&a()},let(){Ho("Service: Let"),b.lets+=1}},c=document.getElementById("click");if(c&&Ft.audible_clicks&&c.play(),t.id&&Kg(t.id),r&&r=="second_service"&&(b.serve2nd=!0),Object.keys(l).indexOf(e)<0)return;const u=["server","receiver"].indexOf(i);u>=0&&(n=u?b.receiving:b.serving);const f=b.serve2nd?{first_serve:{error:"Error",serves:["0e"]}}:{},h=l[e](n,f);if(h){Jg(),Object.assign(f,h),b.rally&&(f.rally=new Array(b.rally));const d=jg(f);d&&(f.location=d);const p=b.match.addPoint(f);Ft.track_shot_types&&p.result&&p.point.result&&["Penalty","Ace","Double Fault"].indexOf(p.point.result)<0?rs(s):(Ei(p),vn(p)),b.rally=0,b.lets=0,b.undone=[],Li()}pr()}function Kg(t){const e=document.getElementById(t);e&&(Et[t].type=="flash"?(e.style.backgroundColor=Et[t].color,e.style.color="white",setTimeout(()=>is(),300)):Et[t].type=="toggle"&&(e.style.backgroundColor=="white"?(b.serve2nd=t=="second_serve",e.style.backgroundColor=Et[t].color,e.style.color="white"):(b.serve2nd=!1,e.style.backgroundColor="white",e.style.color=Et[t].color),Object.keys(Et).filter(r=>Et[r].type=="toggle").filter(r=>r!=t).forEach(r=>Ec(r))))}function Jg(){if(b.match.history.points().length==0){const e=new Date;b.match.metadata.defineMatch({date:e.valueOf()})}}function jg(t){const e=document.querySelectorAll(".modeaction_player0"),n=document.querySelectorAll(".modeaction_player1");if(e&&e[0].innerHTML=="Net"||n&&n[0].innerHTML=="Net"){if(t.result=="Unforced Error"||t.result=="Forced Error"){if(t.winner==0&&n[0].innerHTML=="Net"||t.winner==1&&e[0].innerHTML=="Net")return"Net"}else if(t.result=="Winner"&&(t.winner==0&&e[0].innerHTML=="Net"||t.winner==1&&n[0].innerHTML=="Net"))return"Net"}}function Zg(t){const e=t.getAttribute("matchId"),n=rt.get(e);n&&(Qg(n,`match_${e}.json`),he())}function Qg(t,e){e=e||"match.json";const n=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",window.URL!=null&&(r.href=window.URL.createObjectURL(n),r.click())}function t0(t){const n=on(t,"statrow").getAttribute("id"),r=document.getElementById(n+"_chart");if(console.log({id:n,el:r}),r){const i=r.style.display!="none";r.style.display=i?"none":"flex"}}const e0="/mobile2/assets/emailblack-vRUY2-4u.png";function n0(){vn();const t=rt.get("current_match"),e=t&&rt.get(t);if(e){const n=JSON.parse(e);let r=n.match.muid;r||(r=Sr(),n.match.muid=r,b.match.metadata.defineMatch({muid:r}),rt.set(t,JSON.stringify(n))),r0(n)}else Ut(" <p> <h1>First Track a Match!</h1> </p> ")}function r0(t){var l;if(!dt.socket){Ut(" <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> ");return}const n=`${kt.broadcast?`CourtHive Live Score: ${location.origin}/scores?muid=${t.muid}`:""}%0D%0A `,r=kt.broadcast?`
    <div class='closeModal flexcenter iconmargin'>
      <a href='mailto:?subject=CourtHive Match Link&body=${n}' class="notextdecoration">
          <img class="icon_large" src='${e0}'>
      </a> 
    </div>
  `:"",i=t?`
    <div class='flexcenter iconmargin'>
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
          <div class='export_action action_icon_large iconclipboard'></div> 
      </button>
    </div>
  `:"",s=(l=t==null?void 0:t.match)==null?void 0:l.muid,o=s?`
   <div matchId="${s}" class="sendHistory flexcenter">
      <div matchId="${s}" class='sendHistory export_action action_icon iconsave'></div>
   </div>
`:"",a=`
      <p>&nbsp;</p>
      <h1>Options for Sharing</h1>
      <div class='flexrows'> 
        ${r}
        ${o}
        ${i}
      </div>`;Ut(a,JSON.stringify(t))}function i0(t){b.edit_point_index=t;const e=b.match.history.action("addPoint");b.edit_point=e[t].point,b.edit_point_result=b.edit_point.result;let n=b.edit_point.server?b.edit_point.score.split("-").reverse().join("-"):b.edit_point.score;n=="0-0"&&(n="Gamepoint");const r=document.getElementById("ep_sgp");r&&(r.innerHTML=`Set: ${b.edit_point.set+1}, Game: ${b.edit_point.game+1}, Point: ${n}`);const i=b.match.metadata.players();Array.from(document.querySelectorAll(".select_player")).forEach(c=>i.forEach((u,f)=>c.options[f]=new Option(u.name,f.toString())));const o=document.getElementById("point_winner"),a=document.getElementById("point_loser");o&&(o.value=b.edit_point.winner),a&&(a.value=b.edit_point.result||""),s0(),o0(),tl();const l=document.getElementById("editpoint");l&&(l.style.display="flex")}function s0(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e==null?void 0:e.value,s=n==null?void 0:n.value;i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==s&&(t.value=1-s),(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=s&&(t.value=s)}function tl(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=t==null?void 0:t.value;b.edit_point_result=e.value,e.innerHTML="",e.options[0]=new Option("- select -","");let r=[];n==b.edit_point.server&&(r=["Ace","Double Fault"].concat(...r)),r=["Winner","Unforced Error","Forced Error"].concat(...r),r.forEach((i,s)=>e.options[s+1]=new Option(i,i)),e.value=b.edit_point_result}function o0(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e.value;b.edit_point.result=i,(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=n.value&&(n.value=r),i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==n.value&&(n.value=1-r),tl()}function a0(){const t=document.getElementById("point_result"),n=document.getElementById("point_winner").value,r=t.value;b.edit_point.winner=n,b.edit_point.result=r,b.edit_point.code=void 0,Zt();const i=rt.get("current_match");if(i){ss(i,"pointhistory");const s=document.getElementById("editpoint");s&&(s.style.display="none")}}function c0(t){const e=parseInt(t.getAttribute("playerIndex")??0);b.edit_player=b.swap_sides?1-e:e,he();const n=document.getElementById("editplayer");n&&(n.style.display="flex");const r=b.match.metadata.players(b.edit_player),i=document.getElementById("playername");i&&(i.value=r.name);const s=document.getElementById("team");s&&(s.value=r.team??"");const o=document.getElementById("playerid");o&&(o.value=r.id??""),["hand","entry","seed","draw_position","ioc"].forEach(f=>{const h=`player_${f}`,d=document.getElementById(h);d&&(d.value=r[f]||"")});const l=document.getElementById("player_rank");l&&(l.value=r.rank||"");const c=document.getElementById("player_wtn");c&&(c.value=r.wtn||"");const u=document.getElementById("player_utr");u&&(u.value=r.utr||"")}const l0="/mobile2/assets/points-zyGL2AXB.jpg";function el(t){const e=`
         <div class="helpintro">Quick Start</div>
         <div class="flexhelp"> <div class='iconmenub action_icon_large'></div> <div class="quicktitle">Main Menu</div> </div>
         <div class="quickitem"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>
         <div class="flexhelp"> <div class='iconsettingsb action_icon_large'></div> <div class="quicktitle">Settings</div> </div>
         <div class="quickitem"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>
         <div class="flexhelp"> <div class='iconchangeb action_icon_large'></div> <div class="quicktitle">Change First Server</div> </div>
         <div class="quickitem"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>
         <div class="quickitem"> <span>To simply advance points, tap the <b>Points</b> display </span></div>
         <div class="flexhelp"> <img src='${l0}'> </div>
      `,n=`
         <div class="helpintro">Save To Home Screen</div>
         <div class="helpitem">CourtHive is a Progressive Web App</div>
         <div class="helpitem"><b>For Full Screen View:</b></div>
         <div class="helpitem">On iOS use Safari to Save</div>
         <div class="helpitem">On Android use Chrome</div>
      `,r=`
         <div class="helpintro">How to</div>
         <div class="helpitem"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>
         <div class="helpitem"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>
         <div class="helpitem"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>
         <div class="helpitem"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>
         <div class="helpitem"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>
         <div class="helpitem"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>
         <div class="flexhelp"> <div class='iconbroadcast icon icon_5'></div> <div class="quicktitle">Enable Broadcast</div> </div>
         <div class="flexhelp"> <div class='iconshare icon icon_3'></div> <div class="quicktitle">Share (Email, Copy/Paste)</div> </div>
      `,i=t?e+n+r:r+n+e;Ut(i)}function u0(){const t=`
         <p>&nbsp;</b>
         <h2>CourtHive</h2>
         <p>version <a id="version" target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">${Qo}</a></p>
         <p>An 
            <a target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">Open Source</a> project developed by 
            <a target="_blank" href="http://TennisVisuals.com">TennisVisuals</a>
         </p>
         <p><a href="mailto:tennis.aip@gmail.com?subject=CourtHive">Feedback Welcome!</a></p>
         <h2>Help</h2>
         <div class="helpitem">Difficulties after an app update?</div>
         <div class="flexcenter">
            <div class='flexcenter reset' onclick="appReset()">Reset</div>
         </div>
         <p>&nbsp;</b>
      `;Ut(t)}function f0(){Ut(`
    <h2>Enter key:</h2>
    <input id='key' class='key_input input is-primary'>
    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>
  `);const e=document.getElementById("key"),n=document.getElementById("key");n&&n.addEventListener("keyup",s);const r=document.getElementById("submit_key");r&&r.addEventListener("click",i);function i(){e.value&&Yc({key:e.value})}function s(o){o.which==13&&i()}}function h0(t){const e=parseInt(t.getAttribute("gameIndex")??0);gs(e)}function d0(t){const e=on(t,"ph_episode"),n=parseInt((e==null?void 0:e.getAttribute("pointIndex"))??0);i0(n)}function p0(){gt("stats")}function m0(){gt("matchformat")}function g0(){gt("gametree")}function y0(){gt("momentum")}function _0(){gt("pointhistory")}function v0(){gt("settings")}function b0(){gt("matcharchive")}function w0(){gt("entry")}function x0(){gt("mainmenu")}function k0(){if(b.serve2nd||b.rally_mode)b.serve2nd=!1,b.rally_mode=!1,b.rally=0,b.lets=0,mr();else{const t=b.match.undo();vn("Undo"),t&&b.undone.push(t),se(!0)}pr()}function A0(){if(!b.undone.length)return;const t=b.match.addPoint(b.undone.pop());vn(t)}function S0(){console.log("changeServer"),b.match.history.points().length||(b.match.set.firstService(1-b.serving),Li(),gt("entry"))}function E0(){console.log("swapAction"),an.user_swap=!an.user_swap,ea(),gr()}function T0(){zg.register("modalInfo","tap",u0).register("toggleChart","tap",t0).register("broadcastToggle","tap",Vc).register("modalShare","tap",n0).register("enterKey","tap",f0).register("changeFormat","tap",Vg).register("closeModal","tap",he).register("newMatch","tap",as).register("exportMatch","tap",Zg).register("sendHistory","tap",ms).register("settings","tap",v0).register("outcomeEntry","tap",w0).register("matchArchive","tap",b0).register("mainMenu","tap",x0).register("modalHelp","tap",el).register("updateAppState","tap",Ni).register("updateStats","tap",Ac).register("closeGameFish","tap",Pg).register("strokeAction","tap",qg).register("swapAction","tap",E0).register("undoAction","tap",k0).register("redoAction","tap",A0).register("changeServer","tap",S0).register("updatePoint","tap",a0).register("editPlayer","tap",c0).register("updatePlayer","tap",Wg).register("updateTournamentDetails","tap",Jc).register("updateMatchDetails","tap",jc).register("updateDetails","tap",Ig).register("viewGameFish","tap",h0).register("viewStats","tap",p0).register("viewGameTree","tap",g0).register("viewMomentum","tap",y0).register("viewEditPoint","tap",d0).register("viewMatchFormat","tap",m0).register("viewPointHistory","tap",_0).register("editMatchDetails","tap",wl).register("classAction","tap",Xg)}var M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nl={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(t,e){(function(r,i){t.exports=i()})(M0,function(){return function(){var n={686:function(s,o,a){a.d(o,{default:function(){return M}});var l=a(279),c=a.n(l),u=a(370),f=a.n(u),h=a(817),d=a.n(h);function p(C){try{return document.execCommand(C)}catch{return!1}}var y=function(T){var N=d()(T);return p("cut"),N},g=y;function k(C){var T=document.documentElement.getAttribute("dir")==="rtl",N=document.createElement("textarea");N.style.fontSize="12pt",N.style.border="0",N.style.padding="0",N.style.margin="0",N.style.position="absolute",N.style[T?"right":"left"]="-9999px";var $=window.pageYOffset||document.documentElement.scrollTop;return N.style.top="".concat($,"px"),N.setAttribute("readonly",""),N.value=C,N}var A=function(T,N){var $=k(T);N.container.appendChild($);var Y=d()($);return p("copy"),$.remove(),Y},x=function(T){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},$="";return typeof T=="string"?$=A(T,N):T instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(T==null?void 0:T.type)?$=A(T.value,N):($=d()(T),p("copy")),$},L=x;function O(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(N){return typeof N}:O=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},O(C)}var v=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=T.action,$=N===void 0?"copy":N,Y=T.container,S=T.target,B=T.text;if($!=="copy"&&$!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(S!==void 0)if(S&&O(S)==="object"&&S.nodeType===1){if($==="copy"&&S.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if($==="cut"&&(S.hasAttribute("readonly")||S.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(B)return L(B,{container:Y});if(S)return $==="cut"?g(S):L(S,{container:Y})},_=v;function m(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(N){return typeof N}:m=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},m(C)}function P(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function z(C,T){for(var N=0;N<T.length;N++){var $=T[N];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(C,$.key,$)}}function W(C,T,N){return T&&z(C.prototype,T),N&&z(C,N),C}function Z(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),T&&V(C,T)}function V(C,T){return V=Object.setPrototypeOf||function($,Y){return $.__proto__=Y,$},V(C,T)}function H(C){var T=j();return function(){var $=J(C),Y;if(T){var S=J(this).constructor;Y=Reflect.construct($,arguments,S)}else Y=$.apply(this,arguments);return X(this,Y)}}function X(C,T){return T&&(m(T)==="object"||typeof T=="function")?T:U(C)}function U(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function J(C){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},J(C)}function D(C,T){var N="data-clipboard-".concat(C);if(T.hasAttribute(N))return T.getAttribute(N)}var E=function(C){Z(N,C);var T=H(N);function N($,Y){var S;return P(this,N),S=T.call(this),S.resolveOptions(Y),S.listenClick($),S}return W(N,[{key:"resolveOptions",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof Y.action=="function"?Y.action:this.defaultAction,this.target=typeof Y.target=="function"?Y.target:this.defaultTarget,this.text=typeof Y.text=="function"?Y.text:this.defaultText,this.container=m(Y.container)==="object"?Y.container:document.body}},{key:"listenClick",value:function(Y){var S=this;this.listener=f()(Y,"click",function(B){return S.onClick(B)})}},{key:"onClick",value:function(Y){var S=Y.delegateTarget||Y.currentTarget,B=this.action(S)||"copy",F=_({action:B,container:this.container,target:this.target(S),text:this.text(S)});this.emit(F?"success":"error",{action:B,text:F,trigger:S,clearSelection:function(){S&&S.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(Y){return D("action",Y)}},{key:"defaultTarget",value:function(Y){var S=D("target",Y);if(S)return document.querySelector(S)}},{key:"defaultText",value:function(Y){return D("text",Y)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(Y){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return L(Y,S)}},{key:"cut",value:function(Y){return g(Y)}},{key:"isSupported",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],S=typeof Y=="string"?[Y]:Y,B=!!document.queryCommandSupported;return S.forEach(function(F){B=B&&!!document.queryCommandSupported(F)}),B}}]),N}(c()),M=E},828:function(s){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==o;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}s.exports=l},438:function(s,o,a){var l=a(828);function c(h,d,p,y,g){var k=f.apply(this,arguments);return h.addEventListener(p,k,g),{destroy:function(){h.removeEventListener(p,k,g)}}}function u(h,d,p,y,g){return typeof h.addEventListener=="function"?c.apply(null,arguments):typeof p=="function"?c.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(k){return c(k,d,p,y,g)}))}function f(h,d,p,y){return function(g){g.delegateTarget=l(g.target,d),g.delegateTarget&&y.call(h,g)}}s.exports=u},879:function(s,o){o.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},o.nodeList=function(a){var l=Object.prototype.toString.call(a);return a!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in a&&(a.length===0||o.node(a[0]))},o.string=function(a){return typeof a=="string"||a instanceof String},o.fn=function(a){var l=Object.prototype.toString.call(a);return l==="[object Function]"}},370:function(s,o,a){var l=a(879),c=a(438);function u(p,y,g){if(!p&&!y&&!g)throw new Error("Missing required arguments");if(!l.string(y))throw new TypeError("Second argument must be a String");if(!l.fn(g))throw new TypeError("Third argument must be a Function");if(l.node(p))return f(p,y,g);if(l.nodeList(p))return h(p,y,g);if(l.string(p))return d(p,y,g);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(p,y,g){return p.addEventListener(y,g),{destroy:function(){p.removeEventListener(y,g)}}}function h(p,y,g){return Array.prototype.forEach.call(p,function(k){k.addEventListener(y,g)}),{destroy:function(){Array.prototype.forEach.call(p,function(k){k.removeEventListener(y,g)})}}}function d(p,y,g){return c(document.body,p,y,g)}s.exports=u},817:function(s){function o(a){var l;if(a.nodeName==="SELECT")a.focus(),l=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),l=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(a),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}s.exports=o},279:function(s){function o(){}o.prototype={on:function(a,l,c){var u=this.e||(this.e={});return(u[a]||(u[a]=[])).push({fn:l,ctx:c}),this},once:function(a,l,c){var u=this;function f(){u.off(a,f),l.apply(c,arguments)}return f._=l,this.on(a,f,c)},emit:function(a){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(a,l){var c=this.e||(this.e={}),u=c[a],f=[];if(u&&l)for(var h=0,d=u.length;h<d;h++)u[h].fn!==l&&u[h].fn._!==l&&f.push(u[h]);return f.length?c[a]=f:delete c[a],this}},s.exports=o,s.exports.TinyEmitter=o}},r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s](o,o.exports,i),o.exports}return function(){i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,{a:o}),o}}(),function(){i.d=function(s,o){for(var a in o)i.o(o,a)&&!i.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}}(),function(){i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)}}(),i(686)}().default})})(nl);var N0=nl.exports;const O0=C0(N0),L0=[{ioc:"AFG",name:"Afghanistan"},{ioc:"ALB",name:"Albania"},{ioc:"ALG",name:"Algeria"},{ioc:"ASA",name:"American Samoa"},{ioc:"AND",name:"Andorra"},{ioc:"ANG",name:"Angola"},{ioc:"AIA",name:"Anguilla"},{ioc:"ANT",name:"Antigua & Barbuda"},{ioc:"ARG",name:"Argentina"},{ioc:"ARM",name:"Armenia"},{ioc:"ARU",name:"Aruba"},{ioc:"AUS",name:"Australia"},{ioc:"AUT",name:"Austria"},{ioc:"AZE",name:"Azerbaijan"},{ioc:"BAH",name:"Bahamas"},{ioc:"BRN",name:"Bahrain"},{ioc:"BAN",name:"Bangladesh"},{ioc:"BAR",name:"Barbados"},{ioc:"BLR",name:"Belarus"},{ioc:"BEL",name:"Belgium"},{ioc:"BIZ",name:"Belize"},{ioc:"BEN",name:"Benin"},{ioc:"BER",name:"Bermuda"},{ioc:"BHU",name:"Bhutan"},{ioc:"BOL",name:"Bolivia"},{ioc:"BIH",name:"Bosnia"},{ioc:"BOT",name:"Botswana"},{ioc:"BRA",name:"Brazil"},{ioc:"IVB",name:"British Virgin Islands"},{ioc:"BRU",name:"Brunei"},{ioc:"BUL",name:"Bulgaria"},{ioc:"BUR",name:"Burkina Faso"},{ioc:"BDI",name:"Burundi"},{ioc:"CAM",name:"Cambodia"},{ioc:"CMR",name:"Cameroon"},{ioc:"CAN",name:"Canada"},{ioc:"CPV",name:"Cape Verde"},{ioc:"AHO",name:"Caribbean Netherlands"},{ioc:"CAY",name:"Cayman Islands"},{ioc:"CAF",name:"Central African Republic"},{ioc:"CHA",name:"Chad"},{ioc:"CHI",name:"Chile"},{ioc:"CHN",name:"China"},{ioc:"COL",name:"Colombia"},{ioc:"COM",name:"Comoros"},{ioc:"CGO",name:"Congo - Brazzaville"},{ioc:"COD",name:"Congo - Kinshasa"},{ioc:"COK",name:"Cook Islands"},{ioc:"CRC",name:"Costa Rica"},{ioc:"CRO",name:"Croatia"},{ioc:"CUB",name:"Cuba"},{ioc:"CYP",name:"Cyprus"},{ioc:"CZE",name:"Czech Republic"},{ioc:"CIV",name:"Côte d’Ivoire"},{ioc:"DEN",name:"Denmark"},{ioc:"DJI",name:"Djibouti"},{ioc:"DMA",name:"Dominica"},{ioc:"DOM",name:"Dominican Republic"},{ioc:"ECU",name:"Ecuador"},{ioc:"EGY",name:"Egypt"},{ioc:"ESA",name:"El Salvador"},{ioc:"GEQ",name:"Equatorial Guinea"},{ioc:"ERI",name:"Eritrea"},{ioc:"EST",name:"Estonia"},{ioc:"ETH",name:"Ethiopia"},{ioc:"FLK",name:"Falkland Islands"},{ioc:"FAR",name:"Faroe Islands"},{ioc:"FIJ",name:"Fiji"},{ioc:"FIN",name:"Finland"},{ioc:"FRA",name:"France"},{ioc:"FGU",name:"French Guiana"},{ioc:"FPO",name:"French Polynesia"},{ioc:"GAB",name:"Gabon"},{ioc:"GAM",name:"Gambia"},{ioc:"GEO",name:"Georgia"},{ioc:"GER",name:"Germany"},{ioc:"GHA",name:"Ghana"},{ioc:"GIB",name:"Gibraltar"},{ioc:"GRE",name:"Greece"},{ioc:"GRL",name:"Greenland"},{ioc:"GRN",name:"Grenada"},{ioc:"GUD",name:"Guadeloupe"},{ioc:"GUM",name:"Guam"},{ioc:"GUA",name:"Guatemala"},{ioc:"GUI",name:"Guinea"},{ioc:"GBS",name:"Guinea-Bissau"},{ioc:"GUY",name:"Guyana"},{ioc:"HAI",name:"Haiti"},{ioc:"HON",name:"Honduras"},{ioc:"HKG",name:"Hong Kong"},{ioc:"HUN",name:"Hungary"},{ioc:"ISL",name:"Iceland"},{ioc:"IND",name:"India"},{ioc:"INA",name:"Indonesia"},{ioc:"IRI",name:"Iran"},{ioc:"IRQ",name:"Iraq"},{ioc:"IRL",name:"Ireland"},{ioc:"ISR",name:"Israel"},{ioc:"ITA",name:"Italy"},{ioc:"JAM",name:"Jamaica"},{ioc:"JPN",name:"Japan"},{ioc:"JOR",name:"Jordan"},{ioc:"KAZ",name:"Kazakhstan"},{ioc:"KEN",name:"Kenya"},{ioc:"KIR",name:"Kiribati"},{ioc:"KUW",name:"Kuwait"},{ioc:"KGZ",name:"Kyrgyzstan"},{ioc:"LAO",name:"Laos"},{ioc:"LAT",name:"Latvia"},{ioc:"LIB",name:"Lebanon"},{ioc:"LES",name:"Lesotho"},{ioc:"LBR",name:"Liberia"},{ioc:"LBA",name:"Libya"},{ioc:"LIE",name:"Liechtenstein"},{ioc:"LTU",name:"Lithuania"},{ioc:"LUX",name:"Luxembourg"},{ioc:"MAC",name:"Macau"},{ioc:"MKD",name:"Macedonia"},{ioc:"MAD",name:"Madagascar"},{ioc:"MAW",name:"Malawi"},{ioc:"MAS",name:"Malaysia"},{ioc:"MDV",name:"Maldives"},{ioc:"MLI",name:"Mali"},{ioc:"MLT",name:"Malta"},{ioc:"MSH",name:"Marshall Islands"},{ioc:"MRT",name:"Martinique"},{ioc:"MTN",name:"Mauritania"},{ioc:"MRI",name:"Mauritius"},{ioc:"MAY",name:"Mayotte"},{ioc:"MEX",name:"Mexico"},{ioc:"FSM",name:"Micronesia"},{ioc:"MDA",name:"Moldova"},{ioc:"MON",name:"Monaco"},{ioc:"MGL",name:"Mongolia"},{ioc:"MGO",name:"Montenegro"},{ioc:"MNT",name:"Montserrat"},{ioc:"MAR",name:"Morocco"},{ioc:"MOZ",name:"Mozambique"},{ioc:"MYA",name:"Myanmar"},{ioc:"NAM",name:"Namibia"},{ioc:"NRU",name:"Nauru"},{ioc:"NEP",name:"Nepal"},{ioc:"NED",name:"Netherlands"},{ioc:"NCD",name:"New Caledonia"},{ioc:"NZL",name:"New Zealand"},{ioc:"NCA",name:"Nicaragua"},{ioc:"NIG",name:"Niger"},{ioc:"NGR",name:"Nigeria"},{ioc:"NIU",name:"Niue"},{ioc:"NFI",name:"Norfolk Island"},{ioc:"PRK",name:"North Korea"},{ioc:"NMA",name:"Northern Mariana Islands"},{ioc:"NOR",name:"Norway"},{ioc:"OMA",name:"Oman"},{ioc:"PAK",name:"Pakistan"},{ioc:"PLW",name:"Palau"},{ioc:"PLE",name:"Palestine"},{ioc:"PAN",name:"Panama"},{ioc:"PNG",name:"Papua New Guinea"},{ioc:"PAR",name:"Paraguay"},{ioc:"PER",name:"Peru"},{ioc:"PHI",name:"Philippines"},{ioc:"POL",name:"Poland"},{ioc:"POR",name:"Portugal"},{ioc:"PUR",name:"Puerto Rico"},{ioc:"QAT",name:"Qatar"},{ioc:"ROU",name:"Romania"},{ioc:"RUS",name:"Russia"},{ioc:"RWA",name:"Rwanda"},{ioc:"REU",name:"Réunion"},{ioc:"SAM",name:"Samoa"},{ioc:"SMR",name:"San Marino"},{ioc:"KSA",name:"Saudi Arabia"},{ioc:"SEN",name:"Senegal"},{ioc:"SRB",name:"Serbia"},{ioc:"SEY",name:"Seychelles"},{ioc:"SLE",name:"Sierra Leone"},{ioc:"SIN",name:"Singapore"},{ioc:"SVK",name:"Slovakia"},{ioc:"SLO",name:"Slovenia"},{ioc:"SOL",name:"Solomon Islands"},{ioc:"SOM",name:"Somalia"},{ioc:"RSA",name:"South Africa"},{ioc:"KOR",name:"South Korea"},{ioc:"ESP",name:"Spain"},{ioc:"SRI",name:"Sri Lanka"},{ioc:"HEL",name:"St. Helena"},{ioc:"SKN",name:"St. Kitts & Nevis"},{ioc:"LCA",name:"St. Lucia"},{ioc:"SPM",name:"St. Pierre & Miquelon"},{ioc:"VIN",name:"St. Vincent & Grenadines"},{ioc:"SUD",name:"Sudan"},{ioc:"SUR",name:"Suriname"},{ioc:"SWZ",name:"Swaziland"},{ioc:"SWE",name:"Sweden"},{ioc:"SUI",name:"Switzerland"},{ioc:"SYR",name:"Syria"},{ioc:"STP",name:"São Tomé & Príncipe"},{ioc:"TPE",name:"Taiwan"},{ioc:"TJK",name:"Tajikistan"},{ioc:"TAN",name:"Tanzania"},{ioc:"THA",name:"Thailand"},{ioc:"TLS",name:"Timor-Leste"},{ioc:"TOG",name:"Togo"},{ioc:"TGA",name:"Tonga"},{ioc:"TTO",name:"Trinidad & Tobago"},{ioc:"TUN",name:"Tunisia"},{ioc:"TUR",name:"Turkey"},{ioc:"TKM",name:"Turkmenistan"},{ioc:"TKS",name:"Turks & Caicos Islands"},{ioc:"TUV",name:"Tuvalu"},{ioc:"ISV",name:"U.S. Virgin Islands"},{ioc:"GBR",name:"UK"},{ioc:"USA",name:"United States"},{ioc:"UGA",name:"Uganda"},{ioc:"UKR",name:"Ukraine"},{ioc:"UAE",name:"United Arab Emirates"},{ioc:"URU",name:"Uruguay"},{ioc:"UZB",name:"Uzbekistan"},{ioc:"VAN",name:"Vanuatu"},{ioc:"VEN",name:"Venezuela"},{ioc:"VIE",name:"Vietnam"},{ioc:"WAF",name:"Wallis & Futuna"},{ioc:"YEM",name:"Yemen"},{ioc:"ZAM",name:"Zambia"},{ioc:"ZIM",name:"Zimbabwe"}];function R0(){document.oncontextmenu=()=>!1,window.addEventListener("contextmenu",t=>{t.preventDefault()},!1),window.onunhandledrejection=t=>{t.preventDefault();const e=t.reason,n=e&&(e.stack||e);n&&n.indexOf("blocked")>0?console.warn("popup blocked"):console.warn("Unhandled rejection:",e&&(e.stack||e))}}function P0(){console.log(`%cversion: ${ps}`,"color: lightblue");const t=rt.get("mobile-provider");if(t){b.provider=t;const e=document.getElementById("provider");e&&(e.value=t)}R0()}function I0(){window.dev={disconnectSocket:zc,connectSocket:Tr,sendHistory:ms,viewManager:gt,version:ps,coms:dt,app:kt,env:b},window.addEventListener("orientationchange",function(){$o()},!1),window.addEventListener("resize",function(){$o()},!1);const t={},n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const l=n[a].split("=");if(typeof t[l[0]]>"u")t[l[0]]=l[1];else if(typeof t[l[0]]=="string"){const c=[t[l[0]],l[1]];t[l[0]]=c}else t[l[0]].push(l[1])}history.pushState("",document.title,window.location.pathname),Ot.disableDrag(),T0(),ft("none","welcome"),new O0(".c2c").on("success",()=>{he()}),_l(),D0(),kt.broadcast&&navigator.onLine&&qc(),B0(),Sc(),Ot.addSwipeTarget(document.getElementById("mainmenu")),Array.from(document.querySelectorAll(".md_seed")).forEach(a=>{Os(0,32).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_draw_position")).forEach(a=>{Os(0,128).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_ioc")).forEach(a=>{L0.forEach((l,c)=>a.options[c+1]=new Option(l.name,l.ioc))}),dr(),ta(),F0(),Lg(),Kc(),t.key&&setTimeout(()=>Yc({key:t.key}),1e3),P0()}function D0(){kt.user_uuid||(kt.user_uuid=Sr(),Ni())}function B0(){const t=a=>{a.which==9&&a.preventDefault()},e=document.getElementById("playername");e&&(e.addEventListener("keyup",bl,!1),e.addEventListener("keydown",t,!1),e.onblur=function(){ei()},e.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const n=document.getElementById("team");n&&(n.onblur=function(){ei()},n.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const r=document.getElementById("player_rank");r&&(r.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const i=document.getElementById("player_wtn");i&&(i.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const s=document.getElementById("player_utr");s&&(s.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const o=Array.from(document.querySelectorAll(".pressAndHold"));Array.from(o).forEach(a=>Ot.addPressAndHold(a))}function F0(){const t=rt.get("current_match");if(t)ss(t),gr(),mr(),pr();else{const e=rt.get("match_archive");as(),e||el(!0)}}const U0="/mobile2/assets/courthive-transparent-logo-EnCfo38b.png";function H0(t){t&&(document.querySelector("#app").innerHTML=`
  <div>
    <a href="https://courthive.com" target="_blank">
      <img src="${U0}" class="logo" alt="Vite logo" />
    </a>
    <h1 class="name">CourtHive</h1>
  </div>
`)}var $0=/([:*])(\w+)/g,z0="([^/]+)",G0=/\*/g,q0="?(?:.*)",W0=/\/\?/g,Y0="/?([^/]+|)",V0="(?:/^|^)",X0="";function rl(t){return t===void 0&&(t="/"),_s()?location.pathname+location.search+location.hash:t}function ht(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function cr(t){return typeof t=="string"}function K0(t){return typeof t=="function"}function lr(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function J0(t,e){return e.length===0||!t?null:t.slice(1,t.length).reduce(function(n,r,i){return n===null&&(n={}),n[e[i]]=decodeURIComponent(r),n},null)}function ur(t){var e=ht(t).split(/\?(.*)?$/);return[ht(e[0]),e.slice(1).join("")]}function ys(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]!==""){var s=decodeURIComponent(i[0]);e[s]?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(decodeURIComponent(i[1]||""))):e[s]=decodeURIComponent(i[1]||"")}}return e}function il(t,e){var n=ur(ht(t.currentLocationPath)),r=n[0],i=n[1],s=i===""?null:ys(i),o=[],a;if(cr(e.path)){if(a=V0+ht(e.path).replace($0,function(f,h,d){return o.push(d),z0}).replace(G0,q0).replace(W0,Y0)+"$",ht(e.path)===""&&ht(r)==="")return{url:r,queryString:i,hashString:lr(t.to),route:e,data:null,params:s}}else a=e.path;var l=new RegExp(a,X0),c=r.match(l);if(c){var u=cr(e.path)?J0(c,o):c.groups?c.groups:c.slice(1);return{url:ht(r.replace(new RegExp("^"+t.instance.root),"")),queryString:i,hashString:lr(t.to),route:e,data:u,params:s}}return!1}function sl(){return!!(typeof window<"u"&&window.history&&window.history.pushState)}function ye(t,e){return typeof t[e]>"u"||t[e]===!0}function j0(t){if(!t)return{};var e=t.split(","),n={},r;return e.forEach(function(i){var s=i.split(":").map(function(o){return o.replace(/(^ +| +$)/g,"")});switch(s[0]){case"historyAPIMethod":n.historyAPIMethod=s[1];break;case"resolveOptionsStrategy":r||(r={}),r.strategy=s[1];break;case"resolveOptionsHash":r||(r={}),r.hash=s[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":n[s[0]]=s[1]==="true";break}}),r&&(n.resolveOptions=r),n}function _s(){return typeof window<"u"}function Z0(t,e){return t===void 0&&(t=[]),e===void 0&&(e={}),t.filter(function(n){return n}).forEach(function(n){["before","after","already","leave"].forEach(function(r){n[r]&&(e[r]||(e[r]=[]),e[r].push(n[r]))})}),e}function zt(t,e,n){var r=e||{},i=0;(function s(){if(!t[i]){n&&n(r);return}Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),s()):t[i](r,function(o){typeof o>"u"||o===!0?(i+=1,s()):n&&n(r)})})()}zt.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};function Wo(t,e){typeof t.currentLocationPath>"u"&&(t.currentLocationPath=t.to=rl(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function Zr(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=t.instance.routes[n],i=il(t,r);if(i&&(t.matches||(t.matches=[]),t.matches.push(i),t.resolveOptions.strategy==="ONE")){e();return}}e()}function Q0(t,e){t.navigateOptions&&(typeof t.navigateOptions.shouldResolve<"u"&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),typeof t.navigateOptions.silent<"u"&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function ty(t,e){t.navigateOptions.force===!0?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}var Yo=_s(),ey=sl();function ny(t,e){if(ye(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=Yo&&t.resolveOptions&&t.resolveOptions.hash===!0;ey?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout(function(){if(!r){var i=location.hash;location.hash="",location.hash=i}t.instance.__freezeListening=!1},1))):Yo&&(window.location.href=t.to)}e()}function ol(t,e){var n=t.instance;if(!n.lastResolved()){e();return}zt(n.lastResolved().map(function(r){return function(i,s){if(!r.route.hooks||!r.route.hooks.leave){s();return}var o=!1,a=t.instance.matchLocation(r.route.path,t.currentLocationPath,!1);if(r.route.path!=="*")o=!a;else{var l=t.matches?t.matches.find(function(c){return r.route.path===c.route.path}):!1;o=!l}if(ye(t.navigateOptions,"callHooks")&&o){zt(r.route.hooks.leave.map(function(c){return function(u,f){return c(function(h){h===!1?t.instance.__markAsClean(t):f()},t.matches&&t.matches.length>0?t.matches.length===1?t.matches[0]:t.matches:void 0)}}).concat([function(){return s()}]));return}else s()}}),{},function(){return e()})}function ry(t,e){t.match.route.hooks&&t.match.route.hooks.before&&ye(t.navigateOptions,"callHooks")?zt(t.match.route.hooks.before.map(function(n){return function(i,s){return n(function(o){o===!1?t.instance.__markAsClean(t):s()},t.match)}}).concat([function(){return e()}])):e()}function iy(t,e){ye(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()}function sy(t,e){t.match.route.hooks&&t.match.route.hooks.after&&ye(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach(function(n){return n(t.match)}),e()}function oy(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString){n.forEach(function(r){r.route.hooks&&r.route.hooks.already&&ye(t.navigateOptions,"callHooks")&&r.route.hooks.already.forEach(function(i){return i(t.match)})}),e(!1);return}e()}function ay(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=ur(t.currentLocationPath),i=r[0],s=r[1],o=lr(t.to);n.path=ht(i);var a={url:n.path,queryString:s,hashString:o,data:null,route:n,params:s!==""?ys(s):null};t.matches=[a],t.match=a}e()}function cy(t,e){(!t.resolveOptions||t.resolveOptions.noMatchWarning===!1||typeof t.resolveOptions.noMatchWarning>"u")&&console.warn('Navigo: "'+t.currentLocationPath+`" didn't match any of the registered routes.`),e()}function ly(t,e){t.instance._setCurrent(null),e()}function al(t,e){ye(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var cl=[oy,ry,iy,sy],Vo=[ol,ay,zt.if(function(t){var e=t.notFoundHandled;return e},cl.concat([al]),[cy,ly])];function Ti(){return Ti=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ti.apply(this,arguments)}function Xo(t,e){var n=0;function r(){if(n===t.matches.length){al(t,e);return}zt(cl,Ti({},t,{match:t.matches[n]}),function(){n+=1,r()})}ol(t,r)}function Qr(t){t.instance.__markAsClean(t)}function Mi(){return Mi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mi.apply(this,arguments)}var Ko="[data-navigo]";function uy(t,e){var n=e||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:Ko},r=this,i="/",s=null,o=[],a=!1,l,c=sl(),u=_s();t?i=ht(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.');function f(E){return E.indexOf("#")>=0&&(n.hash===!0?E=E.split("#")[1]||"/":E=E.split("#")[0]),E}function h(E){return ht(i+"/"+ht(E))}function d(E,M,C,T){return E=cr(E)?h(E):E,{name:T||ht(String(E)),path:E,handler:M,hooks:Z0(C)}}function p(E,M,C){var T=this;return typeof E=="object"&&!(E instanceof RegExp)?(Object.keys(E).forEach(function(N){if(typeof E[N]=="function")T.on(N,E[N]);else{var $=E[N],Y=$.uses,S=$.as,B=$.hooks;o.push(d(N,Y,[l,B],S))}}),this):(typeof E=="function"&&(C=M,M=E,E=i),o.push(d(E,M,[l,C])),this)}function y(E,M){if(r.__dirty){r.__waiting.push(function(){return r.resolve(E,M)});return}else r.__dirty=!0;E=E?ht(i)+"/"+ht(E):void 0;var C={instance:r,to:E,currentLocationPath:E,navigateOptions:{},resolveOptions:Mi({},n,M)};return zt([Wo,Zr,zt.if(function(T){var N=T.matches;return N&&N.length>0},Xo,Vo)],C,Qr),C.matches?C.matches:!1}function g(E,M){if(r.__dirty){r.__waiting.push(function(){return r.navigate(E,M)});return}else r.__dirty=!0;E=ht(i)+"/"+ht(E);var C={instance:r,to:E,navigateOptions:M||{},resolveOptions:M&&M.resolveOptions?M.resolveOptions:n,currentLocationPath:f(E)};zt([Q0,ty,Zr,zt.if(function(T){var N=T.matches;return N&&N.length>0},Xo,Vo),ny,Qr],C,Qr)}function k(E,M,C){var T=W(E,M);return T!==null?(g(T.replace(new RegExp("^/?"+i),""),C),!0):!1}function A(E){return this.routes=o=o.filter(function(M){return cr(E)?ht(M.path)!==ht(E):K0(E)?E!==M.handler:String(M.path)!==String(E)}),this}function x(){c&&(this.__popstateListener=function(){r.__freezeListening||y()},window.addEventListener("popstate",this.__popstateListener))}function L(){this.routes=o=[],c&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=a=!0}function O(E,M){return r._notFoundRoute=d("*",E,[l,M],"__NOT_FOUND__"),this}function v(){if(u)return _().forEach(function(E){if(E.getAttribute("data-navigo")==="false"||E.getAttribute("target")==="_blank"){E.hasListenerAttached&&E.removeEventListener("click",E.navigoHandler);return}E.hasListenerAttached||(E.hasListenerAttached=!0,E.navigoHandler=function(M){if((M.ctrlKey||M.metaKey)&&M.target.tagName.toLowerCase()==="a")return!1;var C=E.getAttribute("href");if(typeof C>"u"||C===null)return!1;if(C.match(/^(http|https)/)&&typeof URL<"u")try{var T=new URL(C);C=T.pathname+T.search}catch{}var N=j0(E.getAttribute("data-navigo-options"));a||(M.preventDefault(),M.stopPropagation(),r.navigate(ht(C),N))},E.addEventListener("click",E.navigoHandler))}),r}function _(){return u?[].slice.call(document.querySelectorAll(n.linksSelector||Ko)):[]}function m(E){return"/"+i+"/"+ht(E)}function P(E){return l=E,this}function z(){return s}function W(E,M,C){var T=o.find(function(Y){return Y.name===E}),N=null;if(T){if(N=T.path,M)for(var $ in M)N=N.replace(":"+$,M[$]);N=N.match(/^\//)?N:"/"+N}return N&&C&&!C.includeRoot&&(N=N.replace(new RegExp("^/"+i),"")),N}function Z(E){return E.getAttribute("href")}function V(E){var M=ur(ht(E)),C=M[0],T=M[1],N=T===""?null:ys(T),$=lr(E),Y=d(C,function(){},[l],C);return{url:C,queryString:T,hashString:$,route:Y,data:null,params:N}}function H(){return V(ht(rl(i)).replace(new RegExp("^"+i),""))}function X(E){var M={instance:r,currentLocationPath:E,to:E,navigateOptions:{},resolveOptions:n};return Zr(M,function(){}),M.matches?M.matches:!1}function U(E,M,C){typeof M<"u"&&(typeof C>"u"||C)&&(M=h(M));var T={instance:r,to:M,currentLocationPath:M};Wo(T,function(){}),typeof E=="string"&&(E=typeof C>"u"||C?h(E):E);var N=il(T,{name:String(E),path:E,handler:function(){},hooks:{}});return N||!1}function j(E,M,C){return typeof M=="string"&&(M=J(M)),M?(M.hooks[E]||(M.hooks[E]=[]),M.hooks[E].push(C),function(){M.hooks[E]=M.hooks[E].filter(function(T){return T!==C})}):(console.warn("Route doesn't exists: "+M),function(){})}function J(E){return typeof E=="string"?o.find(function(M){return M.name===h(E)}):o.find(function(M){return M.handler===E})}function D(E){E.instance.__dirty=!1,E.instance.__waiting.length>0&&E.instance.__waiting.shift()()}this.root=i,this.routes=o,this.destroyed=a,this.current=s,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=D,this.on=p,this.off=A,this.resolve=y,this.navigate=g,this.navigateByName=k,this.destroy=L,this.notFound=O,this.updatePageLinks=v,this.link=m,this.hooks=P,this.extractGETParameters=function(E){return ur(f(E))},this.lastResolved=z,this.generate=W,this.getLinkPath=Z,this.match=X,this.matchLocation=U,this.getCurrentLocation=H,this.addBeforeHook=j.bind(this,"before"),this.addAfterHook=j.bind(this,"after"),this.addAlreadyHook=j.bind(this,"already"),this.addLeaveHook=j.bind(this,"leave"),this.getRoute=J,this._pathToMatchObject=V,this._clean=ht,this._checkForAHash=f,this._setCurrent=function(E){return s=r.current=E},x.call(this),v.call(this)}var fy={};function hy(){window.location.host.startsWith("localhost")||fy.PUBLIC_URL;const t=!0,e=new uy("/",{hash:t});e.on("/default",()=>H0(!1)),e.notFound(()=>{e.navigate("/default")}),e.resolve()}I0();hy();
//# sourceMappingURL=index-WO08qqMY.js.map
