(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ti=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),Ru=function(t){const e=t+"=",n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.startsWith(e))return i.substring(e.length,i.length)}return null},Lu=function(t,e,n){const r=function(){if(n){const i=new Date;return i.setTime(i.getTime()+n*24*60*60*1e3),"; expires="+i.toUTCString()}else return""}();document.cookie=t+"="+e+r+"; path=/"},rt={set:function(t,e,n){ti?localStorage.setItem(t,e):Lu(t,e,n)},get:function(t){return ti?localStorage.getItem(t):Ru(t)},remove:function(t){ti?localStorage.removeItem(t):this.set(t,"",-1)}};function Pu(t){try{JSON.parse(t)}catch{return!1}return!0}function qt(t,e){const n=document.getElementById("modaltext");if(n&&(n.innerHTML=t),e){const i=document.getElementById("copy2clipboard");i&&i.setAttribute("data-clipboard-text",e)}const r=document.getElementById("modal");r&&(r.style.display="flex")}function _n(t){const e=t.split(" ");let n=e[0];return e.length>1&&(n+=" "+e[e.length-1]),n}function Iu(t){const e=t.format,n=t.sides;return e==="singles"?n.map(function(r){return _n(r[0])}):n.map(Du)}function Du(t){return t[0].last_name+"/"+t[1].last_name}function Bu(t){if(t)try{return JSON.parse(t)}catch{return}}function Fu(t,e="-",n="YMD"){if(!t)return"";const r=new Date(t);let i=""+(r.getMonth()+1),s=""+r.getDate();const o=r.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),n=="DMY"?[s,i,o].join(e):n=="MDY"?[i,s,o].join(e):n=="YDM"?[o,s,i].join(e):n=="DYM"?[s,o,i].join(e):n=="MYD"?[i,o,s].join(e):[o,i,s].join(e)}function bo(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function vn(t,e){for(;t.parentNode;)if(t=t.parentNode,t.classList&&Array.from(t.classList).indexOf(e)>=0)return t;return null}const nt=function(){};nt.addPoint_events=[];nt.undo_events=[];nt.reset_events=[];nt.pointParser=Ka;const Re={games:{advantage:{description:"Advantage Game",tiebreak:!1,hasDecider:!1,threshold:4,minDiff:2},noAdvantage:{description:"No Advantage Game",tiebreak:!1,hasDecider:!0,threshold:4,minDiff:1},tiebreak7a:{description:"Tiebreak to 7",tiebreak:!0,hasDecider:!1,threshold:7,minDiff:2},tiebreak10a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:10,minDiff:2},tiebreak12a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:12,minDiff:2},tiebreak9n:{description:"Tiebreak to 9, Golden Point",tiebreak:!0,hasDecider:!0,threshold:9,minDiff:1}},sets:{AdSetsTo6tb7:{description:"Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},NoAdSetsTo6tb7:{description:"No-Ad, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"},NoAdSetsTo4tb7:{description:"No-Ad, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:0,children:"noAdvantage",decidingChild:"tiebreak7a"},longSetTo6by2:{description:"Advantage, 6 games for set, win by 2 games",hasDecider:!1,threshold:6,minDiff:2,children:"advantage",decidingChild:"advantage"},supertiebreak:{description:"Supertiebreak",hasDecider:!0,threshold:1,minDiff:1,children:"tiebreak10a",decidingChild:"tiebreak10a"},pro10a12:{description:"10 Game No Ad Pro Set; tiebreak to 12",hasDecider:!0,threshold:10,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak12a"},pro8a7:{description:"8 Game Pro Set; tiebreak to 7",hasDecider:!0,threshold:8,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},college6a7:{description:"6 Game College Doubless Set; no advantage; tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"}},matches:{"3_6a_7":{name:"Standard Advantage",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"3_6n_7":{name:"Standard No-Advantage",description:"best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"NoAdSetsTo6tb7"},"3_4n_10":{name:"Standard Under 10",description:"best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"supertiebreak"},"1_4n_7":{name:"Under 10 Qualifying",description:"4 games for set, No Advantage, Tiebreak to 7 at 3-3",hasDecider:!1,threshold:1,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"NoAdSetsTo4tb7"},"3_6n_10":{name:"No-Ad, 3rd Set Supertiebreak",description:"best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"supertiebreak"},"5_6a_7":{name:"US Open Men",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"5_6a_7_long":{name:"Grand Slam Men - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"3_6a_7_long":{name:"Grand Slam Women - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"1_8a_7":{name:"8 Game Pro Set",description:"1 set, Advantage, 8 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"pro8a7",decidingChild:"pro8a7"},"1_6a_7":{name:"6 Game College Doubles Set",description:"1 set, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"college6a7",decidingChild:"college6a7"}}};nt.formats=()=>Re;nt.newFormat=({type:t,code:e,description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l})=>{const c=Object.keys(Re).indexOf(t)>=0,u=c&&Object.keys(Re[t]).indexOf(e)>=0;return c&&u?!1:(Re[t][e]={description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l},!0)};nt.stateObject=({index:t,object:e,parent_object:n,child:r,format:i,common:s=nt.common()})=>{const o={};o.child=r,o.format=i,o.child_attributes=["hasDecider","threshold","minDiff","tiebreak","code","description"],(o.reset=c=>{o.children=[],o.local_history=[],o.counter=[0,0],o.first_service=0,n||(s.metadata.reset(),s.metadata.resetStats(),s.history=[],s.perspective_score=!1,s.events.reset().forEach(u=>u())),!n&&c&&(o.format.singles(!0),o.format.type(c))})(),o.set={index(c){return arguments.length?(isNaN(c)||(t=c),o.set):t},liveStats(c){return arguments.length?[!0,!1].indexOf(c)<0?!1:(c&&!s.live_stats&&o.history.points().length&&(s.metadata.resetStats(),s.stats.counters()),!c&&s.live_stats&&s.metadata.resetStats(),s.live_stats=c,o.set):s.live_stats},perspectiveScore(c){return arguments.length?o.history.points().length?!1:([!0,!1].indexOf(c)>=0&&(s.perspective_score=c),o.set):s.perspective_score},firstService(c){return arguments.length?s.metadata.serviceOrder().indexOf(c)<0?!1:(o.first_service=c,o.set):o.first_service}},o.history={},o.history.local=()=>o.local_history,o.history.action=c=>s.history.filter(u=>u.action==c),o.history.points=c=>{let u=s.history.filter(f=>f.action=="addPoint").map(f=>f.point);return c!=null&&(u=u.filter(f=>f.set==c)),u},o.history.score=()=>e=="Game"?o.history.points().map(c=>c.score):[].concat(...o.children.map(c=>c.history.score())),o.history.games=()=>e=="Set"?o.local_history:[].concat(...o.children.map(c=>c.history.games())),o.history.lastPoint=()=>{const c=o.history.points();return c[c.length-1]||{score:"0-0"}},o.history.common=()=>s.history,o.score=()=>{const c={local:o.counter};c.points=e=="Game"?o.complete()?[0,0]:o.counter:o.lastChild()?o.lastChild().score().counters.points:[0,0],c.games=e=="Set"?o.complete()?[0,0]:o.counter:e=="Match"?o.lastChild()?o.lastChild().score().counters.games:[0,0]:void 0,c.sets=e=="Match"?o.counter:void 0;const u={counters:c};return u.points=e=="Game"?o.complete()?"0-0":o.scoreboard():o.lastChild()?o.lastChild().score().points:"0-0",u.games=e=="Set"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().games:"0-0",u.sets=e=="Match"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().sets:"0-0",u.components={},e=="Match"&&o.children.length&&(u.components.sets=o.children.map(f=>{const h={games:f.score().counters.local};return f.lastChild()&&f.lastChild().format.tiebreak()&&(h.tiebreak=f.lastChild().score().counters.local),h})),u.display={},u},o.accessChildren=()=>o.children,o.lastChild=()=>o.children[o.children.length-1],o.scoreDifference=()=>Math.abs(o.counter[0]-o.counter[1]),o.thresholdMet=()=>Math.max(...o.counter)>=o.format.threshold(),o.minDifferenceMet=()=>o.scoreDifference()>=o.format.minDiff(),o.singleThresholdMet=()=>Math.max(...o.counter)>=o.format.threshold()&&Math.min(...o.counter)<o.format.threshold(),o.winner=()=>o.complete()?o.counter[0]>o.counter[1]?0:1:void 0,o.reverseScore=()=>s.perspective_score&&o.nextTeamServing()%2==1,o.nextTeamServing=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!0),o.nextTeamReceiving=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!1),o.perspectiveScore=(c=o.counter,u)=>u!=null?u?c.slice().reverse():c:o.reverseScore()?c.slice().reverse():c,o.complete=()=>{function c(){return o.counter[0]>=o.format.threshold()&&o.counter[1]>=o.format.threshold()}return!!(o.thresholdMet()&&o.minDifferenceMet()||c()&&o.scoreDifference()&&o.format.hasDecider())},o.nextService=()=>{if(o.complete())return!1;let c=o.lastChild();if(s.metadata.serviceOrder().indexOf(o.first_service)<0&&console.log("PROBLEM"),e=="Game")return o.format.tiebreak()?s.nextTiebreakService(o.local_history,o.first_service):o.first_service;if(!c)return o.first_service;if(c.complete()){let u=c.lastChild();for(;u;)c=u,u=c.lastChild();const f=c.set.firstService();return s.advanceService(f)}return c.nextService()},o.currentChild=()=>{if(o.complete())return!1;const c=o.lastChild();return c&&!c.complete()?c:o.newChild()},o.newChild=()=>{let c=o.lastChild(),u;if(!c)u=o.first_service;else{let k=c.lastChild();for(;k;)c=k,k=c.lastChild();u=s.advanceService(c.set.firstService())}const f=o.format.threshold(),h=o.format.minDiff(),d=k=>o.counter[0]==k&&o.counter[1]==k,p=d(f)&&(o.format.hasDecider()||h==1)||d(f-1)&&h==0,m=p?o.format.decidingChild.settings().code:o.format.children.settings().code,g=o.children.length,x=nt[o.child.object]({index:g,parent_object:o,type:m,common:s});if(x.set.firstService(u),!m){const k=p?o.format.decidingChild:o.format.children;A(k,x.format,o.child_attributes),k.children&&(A(k.children,x.format.children,o.child_attributes),A(k.decidingChild,x.format.decidingChild,o.child_attributes))}return o.children.push(x),x;function A(k,R,N){N.forEach(v=>{if(typeof k[v]=="function"){const _=k[v]();R[v](_)}})}};const a=c=>{if(o.complete())return{result:!1};const u=o.nextService(),f=s.pointParser(c,u,o.history.lastPoint(),o.format,s.metadata.teams(),o.set.perspectiveScore(),o.score());if(!f)return{result:!1};o.counter[f.winner]+=1;const h={points:o.counter.slice(),score:o.scoreboard(),number:o.local_history.filter(x=>x.winner!=null).length,index:o.history.points().length,[e.toLowerCase()]:t},d=o.pointsToGame(),p=d?d.indexOf(1):void 0;p>=0&&p==1-s.metadata.playerTeam(u)&&(h.breakpoint=!0),o.format.tiebreak()&&(h.tiebreak=!0),s.metadata.timestamps()&&!f.uts&&(h.uts=new Date().valueOf()),Object.assign(f,h),o.local_history.push(f);const g={action:"addPoint",result:!0,complete:o.complete(),point:f,needed:{points_to_game:d}};return s.history.push(g),g};o.addPoint=c=>{if(Array.isArray(c))return!1;if(e=="Game")return a(c);const u=o.currentChild();if(!u)return{result:!1};const f=u.addPoint(c);if(!f.result)return f;u.complete()&&(o.counter[f.point.winner]+=1,o.local_history.push({winner:f.point.winner,[o.child.plural]:o.counter.slice(),index:u.set.index()})),f.complete=o.complete(),f.next_service=o.nextService();const h=o.pointsNeeded?o.pointsNeeded():void 0;return h&&(f.needed=Object.assign({},f.needed,h)),f.point[o.child.label]=u.set.index(),f[o.child.label]={complete:u.complete(),winner:u.winner(),[o.child.plural]:o.counter.slice(),index:u.set.index()},n||s.addStatPoint(f),n||s.events.addPoint().forEach(d=>d(f)),f},o.addPoints=(c=[])=>o.addMultiple({values:c}),o.addScore=c=>{const u=o.addPoint(c);if(u.result)return u;const f=o.history.lastPoint(),h=!f||f.score=="0-0"?[0,0]:f.points,d=o.change.pointScore(c);if(d.result){o.undo();const m=d.pointChange.to.map((g,x)=>({diff:g-h[x],i:x})).filter(g=>g.diff);if(m.length==1&&m[0].diff>0){let g;const x=m[0].i,A=m[0].diff;for(let k=0;k<A;k++)if(g=o.addPoint(x),!g.result||g.game.complete)return g;return g}}return{result:!1}},o.addScores=(c=[])=>o.addMultiple({values:c,fx:o.addScore}),o.addMultiple=({values:c=[],fx:u=o.addPoint})=>{typeof c=="string"&&(c=c.match(/[01A-Za-z][*#@]*/g));const f=[];let h=[];for(;c.length;){const d=c.shift(),p=u(d);p.result?f.push(p):(c.unshift(d),h=c.slice(),c=[])}return{result:f.length,added:f,rejected:h}},o.decoratePoint=(c,u)=>{const f=s.history.map((d,p)=>{if(d.action==="addPoint"&&d.point.index==c.index)return p}).filter(d=>d!==void 0);if(!f.length)return!1;const h=s.history[f[0]];h.point=Object.assign({},h.point,u)},o.change={},o.change.points=c=>{if(!Oi(c)||c.length!=2)return!1;if(e=="Game"){const u=Math.max(...c)>o.format.threshold(),f=Math.abs(c[0]-c[1]);if(u&&f>o.format.minDiff())return!1;if(o.complete())return{result:!1};const h={action:"changePoints",result:!0,pointChange:{from:o.counter,to:c}};if(o.local_history.push(h),s.history.push(h),o.counter=c,o.complete()){const d=parseInt(o.winner());n.counter[d]+=1,n.local_history.push({winner:d,games:n.counter.slice(),index:t})}return h}return o.propagatePointChange(c,"points")},o.change.pointScore=c=>{if(c=="0-0")return o.change.points([0,0]);if(e=="Game"){if(o.format.tiebreak())return o.change.points(c.split("-").map(p=>parseInt(p)));c=c.replace(":","-").split("-").map(p=>p.trim()).join("-").split("D").join("40");const u=Object.assign({},Ja);if(o.format.hasDecider()&&Object.keys(ar).forEach(p=>u[p]=ar[p]),[].concat(...Object.keys(u).map(p=>u[p])).indexOf(c)<0)return!1;const h=["0","15","30","40","A","G"],d=c.split("-").map(p=>h.indexOf(p));return d[0]==5&&d[1]!=3&&(d[0]=4),d[1]==5&&d[0]!=3&&(d[1]=4),o.change.points(d)}return o.propagatePointChange(c,"pointScore")},o.propagatePointChange=(c,u)=>{const f=o.lastChild();if(!f){if(e=="Match")return o.newChild().newChild().change[u](c);if(e=="Set")return o.newChild().change[u](c)}return!n&&o.complete()?{result:!1}:f.complete()?o.newChild().change[u](c):f.change[u](c)},o.change.games=c=>{if(!Oi(c)||c.length!=2)return!1;if(e=="Game")return{result:!1};if(e=="Set"){if(o.complete())return{result:!1};const f={action:"changeGames",result:!0,gameChange:{from:o.counter,to:c}};return o.local_history.push(f),s.history.push(f),o.counter=c,f}const u=o.lastChild();return!u&&e=="Match"?o.newChild().change.games(c):!n&&o.complete()?{result:!1}:u.complete()?o.newChild().change.games(c):u.change.games(c)},o.undo=(c=1)=>{if(isNaN(c)||e!="Game"&&!o.children.length&&!o.local_history.length||!s.history.length)return!1;const u=()=>{const h=s.history[s.history.length-1].action;return l[h]()},f=[...Array(c).keys()].map(()=>u());return s.events.undo().forEach(h=>h(f)),c==1?f[0]:f};const l={};return l.addPoint=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter[c.point.winner]-=1,s.removeStatPoint(c),c.point}return o.propagateUndo()},l.changePoints=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter=c.pointChange.from,c}return o.propagateUndo()},l.changeGames=()=>{if(e=="Set"){o.local_history.pop();const c=s.history.pop();return o.counter=c.gameChange.from,c}return o.propagateUndo()},o.propagateUndo=()=>{const c=o.lastChild(),u=c.complete(),f=c.undo();if(u){const h=o.local_history.pop();h&&h.winner!=null&&(o.counter[h.winner]-=1)}return!c.history.local().length&&c.lastChild()==null&&o.children.pop(),f},o};nt.Match=t=>{const{index:e,type:n,common:r=nt.common()}=t??{},i={object:"Set",label:"set",plural:"sets"},s=nt.matchFormat({type:n,common:r}),o=nt.stateObject({index:e,object:"Match",format:s,child:i,common:r});return o.scoreboard=a=>o.children.length?(a==null&&(a=o.set.perspectiveScore()?o.nextService():void 0),o.children.map(l=>l.scoreboard(a)).join(", ")):"0-0",{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,history:o.history,stats:r.stats}};nt.Set=({index:t,parent_object:e,type:n,common:r=nt.common()})=>{const i={object:"Game",label:"game",plural:"games"},s=nt.setFormat({type:n,common:r}),o=nt.stateObject({index:t,parent_object:e,object:"Set",format:s,child:i,common:r});o.pointsNeeded=()=>{const l=o.format.threshold();if(o.complete()){const g=[];g[o.winner()]=0;const x=1-o.winner(),A=o.history.action("addPoint").filter(k=>k.point.set==t).map(k=>k.needed.points_to_set).filter(k=>k);return g[x]=Math.max(...A.map(k=>k[x])),{points_to_set:g}}const c=o.format.hasDecider(),u=o.scoreDifference(),f=o.format.minDiff(),h=[!1,!1],d=o.counter.map((g,x)=>{const A=o.counter[1-x];return g>A?A==l&&c||g>=l&&u>=f?0:g>=l-1?1:l-g:A>g?(h[x]=c&&l==A,g==l&&c||A>=l&&u>=f?0:h[x]?u+1:A>=l-1?u+f:l-g):(h[x]=c&&l==g&&l==A||f==1&&l==g&&l==A||f==0&&l-1==g&&l-1==A,h[x]?1:g>=l-1?f:l-g)}),p=o.lastChild();return{points_to_set:d.map((g,x)=>{let A=0;if(p&&!p.complete()&&(A+=p.pointsToGame()[x],g-=1),!g)return A;h[x]&&(A+=o.format.decidingChild.threshold(),g-=1);for(let k=g;k;k--)A+=o.format.children.threshold();return A}),games_to_set:d}};const a=([l,c],[u,f])=>((u||f)&&(u>f&&(c+=`(${f})`),f>u&&(l+=`(${u})`)),`${l}-${c}`);return o.scoreboard=l=>{const c=o.lastChild(),u=o.perspectiveScore(o.counter,l);if(!c)return u.join("-");const f=c.format.tiebreak()===!0;if(c.complete()&&!f)return u.join("-");if(!c.complete())return`${u.join("-")} (${c.scoreboard(l)})`;const h=c.score().counters.local,d=o.perspectiveScore(h,l);return f&&o.complete()&&o.children.length==1?d.join("-"):a(u,d)},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,children:o.accessChildren,lastChild:o.lastChild,newChild:o.newChild,history:o.history,pointsNeeded:o.pointsNeeded}};nt.Game=({index:t,parent_object:e,type:n,common:r=nt.common()})=>{const i={object:"Point",label:"point",plural:"points"},s=nt.gameFormat({type:n,common:r}),o=nt.stateObject({index:t,object:"Game",parent_object:e,format:s,child:i,common:r});return o.pointsToGame=()=>{if(o.complete())return;const a=o.format.threshold(),l=o.format.hasDecider(),c=o.scoreDifference(),u=o.format.minDiff();return o.counter.map((f,h)=>{const d=o.counter[1-h];return f>d?d==a&&l||f>=a&&c>=u?0:f>=a-1?1:a-f:d>f?f==a&&l||d>=a&&c>=u?0:d==a&&l?c+1:d>=a-1?c+u:a-f:l&&a==f&&a==d?1:f>=a-1?u:a-f})},o.scoreboard=a=>{let l;const c=o.format.threshold(),u=o.format.minDiff(),f=o.perspectiveScore(o.counter,a);if(c!=4||o.format.tiebreak())return f.join("-");if(!o.thresholdMet()||o.singleThresholdMet()&&o.minDifferenceMet()||o.singleThresholdMet()&&o.format.hasDecider()&&u==1){const d=["0","15","30","40","G","G"];l=f.map(p=>d[p]).join("-")}else l=f.map((d,p)=>{const m=f[1-p],g=d-c,x=m-c;return g>x&&o.minDifferenceMet()?"G":g>x?"A":"40"}).join("-");return l.indexOf("G")>=0?"0-0":l},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,history:o.history,lastChild:o.lastChild,pointsToGame:o.pointsToGame}};nt.defaultPointParser=Ka;function Ka(t,e,n,r,i,s,o){if(t==null)return!1;if(t.toString().length==1&&!isNaN(t)){const h=+t==e?"S":"R";return[0,1].indexOf(+t)<0?!1:{winner:+t,server:e,code:h}}let a;const l=i.map(h=>h.indexOf(e)>=0).indexOf(!0),c={server:e};if(typeof t=="object"){if(t.winner!=null&&[0,1].indexOf(+t.winner)>=0)return t.winner=parseInt(t.winner),t.code=t.code?t.code:t.winner==e?"S":"R",t.first_serve&&(t.code=t.code.toLowerCase()),Object.assign({},t,c);if(t.code&&u(t.code))return Object.assign({},t,c)}if(typeof t=="string"&&(f(t)||u(t)))return c;function u(h){let d=h.toUpperCase().match(/[A-Za-z]/g),p=h.match(/[*#@]/g);if(d&&(d=d.join("")),p&&(p=p.join("")),"SAQDRP".split("").indexOf(String(d))>=0)return["S","A","Q"].indexOf(d)>=0&&(a=l),["D","R","P"].indexOf(d)>=0&&(a=1-l),["Q","P"].indexOf(d)>=0&&(c.result="Penalty"),d=="A"&&(c.result="Ace"),d=="D"&&(c.first_serve={error:"Error",serves:["0e"]},c.result="Double Fault"),p&&!c.result&&(p=="*"&&(c.result="Winner"),p=="#"&&(c.result="Forced Error"),p=="@"&&(c.result="Unforced Error")),c.code=h,c.winner=parseInt(a),h===h.toLowerCase()&&(c.first_serve={error:"Error",serves:["0e"]}),c}function f(h){if(h=h.replace(":","-").split("-").map(x=>x.trim()).join("-").split("D").join("40"),h.split("-").length!=2)return!1;let d=o.points;const p=x=>x.reduce((A,k)=>A+k);if(r.tiebreak()){const x=h.split("-").map(R=>parseInt(R)),A=d.split("-").map(R=>parseInt(R));if(!Oi(x)||x.length!=2||p(A)+1!=p(x))return!1;const k=[Math.abs(x[0]-A[0]),Math.abs(x[1]-A[1])];return c.winner=k.indexOf(1),c}const m=Object.assign({},Ja);if(r.hasDecider()&&Object.keys(ar).forEach(x=>m[x]=ar[x]),h=="0-0"&&m[d].join("-").indexOf("G")>=0)return c.winner=n.points.indexOf(Math.max(...n.points)),c;m[d]==null&&(d="0-0");let g=m[d]?m[d].indexOf(h):!1;if(g>=0)return s&&e&&(g=1-g),c.winner=g,c}}const ar={"40-40":["G-40","40-G"]},Ja={"0-0":["15-0","0-15"],"0-15":["15-15","0-30"],"0-30":["15-30","0-40"],"0-40":["15-40","0-G"],"15-0":["30-0","15-15"],"15-15":["30-15","15-30"],"15-30":["30-30","15-40"],"15-40":["30-40","15-G"],"30-0":["40-0","30-15"],"30-15":["40-15","30-30"],"30-30":["40-30","30-40"],"30-40":["40-40","30-G"],"40-0":["G-0","40-15"],"40-15":["G-15","40-30"],"40-30":["G-30","40-40"],"40-40":["A-40","40-A"],"A-40":["G-40","40-40"],"40-A":["40-40","40-G"]};nt.matchFormat=({type:t="3_6a_7",common:e})=>{const n=nt.formatObject({plural:"matches",common:e});return n.children=nt.setFormat({common:e}),n.decidingChild=nt.setFormat({common:e}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};nt.setFormat=({type:t="AdSetsTo6tb7",common:e})=>{const n=nt.formatObject({plural:"sets",common:e});return n.children=nt.gameFormat({common:e}),n.decidingChild=nt.gameFormat({common:e,type:"tiebreak7a"}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};nt.gameFormat=({type:t="advantage",common:e})=>{const n=nt.formatObject({plural:"games",common:e});return n.init(t),{description:n.description,settings:n.settings,singles:n.singles,doubles:n.doubles,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,tiebreak:n.tiebreak}};nt.formatObject=({plural:t,common:e=nt.common()})=>{const n={values:{plural:t},singles:e.singles,doubles:e.doubles,init(r){n.types(n.values.plural).indexOf(r)>=0&&(n.type(r),n.values.initial_code=r)},types(r=n.values.plural){return Object.keys(Re[r])},type(r){if(!n.values.plural)return!1;if(r===!0&&n.values.initial_code&&(r=n.values.initial_code),n.types(n.values.plural).indexOf(r)>=0){const i=Re[n.values.plural][r];return n.hasDecider(i.hasDecider).minDiff(i.minDiff).threshold(i.threshold),i.tiebreak!=null&&n.tiebreak(i.tiebreak),n.name(i.name),n.description(i.description),n.values.code=r,i.children&&n.children.type(i.children),i.decidingChild&&n.decidingChild.type(i.decidingChild),!0}},settings(r){const{name:i,description:s,code:o,players:a,threshold:l,has_decider:c,min_diff:u,tiebreak:f}=r??{};if(o)n.type(o);else if(!l||!c||!u||!f){const h=typeof e.singles=="function"?e.singles()?2:4:"";return{name:n.values.name,description:n.values.description,code:n.values.code,players:h,threshold:n.values.threshold,has_decider:n.values.has_decider,min_diff:n.values.min_diff,tiebreak:n.values.tiebreak}}else n.tiebreak(f),n.threshold(l),n.minDiff(u),n.hasDecider(c),s&&n.description(s),i&&n.name(i),a&&(a==4?n.doubles():n.singles())},name(r){return arguments.length?(typeof r=="string"&&(n.values.name=r),n):n.values.name},description(r){return arguments.length?(typeof r=="string"&&(n.values.description=r),n):n.values.description},tiebreak(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.tiebreak=r),n):n.values.tiebreak},threshold(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.threshold=r),n):n.values.threshold},minDiff(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.min_diff=r),n):n.values.min_diff},hasDecider(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.has_decider=r),n):n.values.has_decider}};return n};nt.common=()=>{let t=2,e=nt.addPoint_events.slice(),n=nt.undo_events.slice(),r=nt.reset_events.slice(),i={},s,o,a;const l={resetStats(){s=void 0,o=void 0,a=void 0},reset(){i={players:[],teams:[],service_order:[0,1],receive_order:[1,0],tournament:{},match:{},timestamps:!1,charter:void 0}},timestamps(v){return arguments.length?([!0,!1].indexOf(v)>=0&&(i.timestamps=v),l):i.timestamps},serviceOrder(v){return arguments.length?c(v,"service_order","receive_order"):i.service_order.slice()},doublesServiceChange(){if(t!=4)return!1},receiveOrder(v){return arguments.length?c(v,"receive_order","service_order"):i.receive_order.slice()},teams(){const v=[];return v[0]=i.service_order.filter((_,y)=>(y+1)%2).sort(),v[1]=i.service_order.filter((_,y)=>y%2).sort(),v.sort(),v},playerTeam(v){return l.teams().map(_=>_.indexOf(v)>=0).indexOf(!0)},teamPlayers(){return l.teams().map(v=>v.map(_=>l.players(_).name))},players(v){return arguments.length?isNaN(v)||v<0||v>3?!1:i.players[v]?i.players[v]:{name:`Player ${["One","Two","Three","Four"][v]}`}:i.players.length>i.service_order.length?i.players:i.service_order.map(_=>l.players(_))},definePlayer(v){const{name:_,birth:y,playerId:P,hand:q,seed:V,rank:Q,age:j,entry:$,ioc:K,draw_position:H,team:Z,wtn:X,utr:B,id:S}=v??{};let C=v==null?void 0:v.index;C==null&&(C=i.players.length);const M=i.players[C]||{};if(!_&&!M.name||isNaN(C)||C>3)return!1;const T={name:_,birth:y,playerId:P,hand:q,team:Z,seed:V,rank:Q,age:j,entry:$,ioc:K,draw_position:H,wtn:X,utr:B,id:S};return Object.keys(T).forEach(O=>{T[O]&&(M[O]=T[O])}),i.players[C]=M,{index:C,player:M}},defineTournament(v){const{name:_,tuid:y,start_date:P,tour:q,rank:V,surface:Q,in_out:j,draw:$,draw_size:K,round:H,level:Z}=v??{},X={name:_,tuid:y,start_date:P,tour:q,rank:V,surface:Q,in_out:j,draw:$,draw_size:K,round:H,level:Z};return Object.keys(X).forEach(B=>{X[B]&&(i.tournament[B]=X[B])}),i.tournament},defineMatch(v){const{muid:_,date:y,gender:P,year:q,court:V,start_time:Q,end_time:j,duration:$,status:K,umpire:H,official_score:Z}=v??{},X={muid:_,date:y,gender:P,year:q,court:V,start_time:Q,end_time:j,duration:$,status:K,umpire:H,official_score:Z};return Object.keys(X).forEach(B=>{X[B]&&(i.match[B]=X[B])}),i.match},showTiebreakOrder(v){return f(12,v)}};function c(v,_,y){const P=($,K)=>!$.filter((H,Z)=>H!=K[Z]).length,q=($,K)=>K.filter(H=>$.indexOf(H)!=-1).length!=K.length;if(!Array.isArray(v)||v.length!=t||q(v,[0,1])||q([0,1,2,3],v))return!1;const V=v.length==i[_].length;if(P(v,i[_])&&V)return l;const Q=l.teams();i[_]=v;const j=l.teams();return v.length==4&&P(Q[0],j[0])&&V&&u(i[_],i[y],j)||(i[y]=v.map($=>v.length-1-$)),l}function u(v,_,y){const P=(q,V)=>y.filter(Q=>Q.filter(j=>[q,V].indexOf(j)>=0).length>1).length;return!v.filter((q,V)=>P(q,_[V])).length}function f(v,_){const y=[];return[...Array(v).keys()].map(()=>{const P=h(y,_);return y.push(P),P})}function h(v,_){const y=d(v.length),P=(v.length+1)%4<2,q=v[v.length-1],V=q??_??i.service_order[0];return P==y?V:k.advanceService(V)}function d(v){return[!0].concat([...Array(v).keys()].map(y=>(y+1)%4<2))[v]}function p(){if(t==2){const v=k.metadata.serviceOrder();if(v.length==2)return;k.metadata.serviceOrder(v.filter(_=>[0,1].indexOf(_)>=0))}else{const v=k.metadata.serviceOrder();if(v.length==4)return;const _=v.slice();v.forEach(y=>_.push(y+2)),k.metadata.serviceOrder(_)}}const m=v=>{if(!v)return e;typeof v=="function"?e.indexOf(v)<0&&e.push(v):Array.isArray(v)&&console.log({add_event:v})},g=v=>{if(!v)return n;typeof v=="function"?n.indexOf(v)<0&&n.push(v):Array.isArray(v)&&console.log({undo_event:v})},x=v=>{if(!v)return r;typeof v=="function"?r.indexOf(v)<0&&r.push(v):Array.isArray(v)&&console.log({reset_event:v})},A=()=>{e=[],n=[],r=[]},k={metadata:l,pointParser:nt.pointParser,events:{addPoint:m,undo:g,clearEvents:A,reset:x},history:[],live_stats:!1,perspective_score:!1,assignParser(v){k.pointParser=v},advanceService(v){const _=i.service_order.indexOf(v)+1;return i.service_order[_<l.players().length?_:0]},nextTiebreakService(v,_){const y=f(v.length+1,_);return y[y.length-1]},singles(v){return arguments.length?(t=v?2:4,p(),k):t==2},doubles(v){return arguments.length?(t=v?4:2,p(),k):t==4},stats:{calculated(v){return R(k.stats.counters(v))},counters(v){if((v!=null&&a!=v||v==null&&a!=null)&&l.resetStats(),!s){k.live_stats=!0;let _=k.history.filter(y=>y.action==="addPoint");v!=null&&(_=_.filter(y=>y.point.set===v),a=v),_.forEach(y=>k.addStatPoint(y))}return s}},addStatPoint(v){if(!k.live_stats)return;const _=v.point;s||(s={players:{},teams:{}});const y=l.playerTeam(_.server),P=l.playerTeam(_.winner),q=1-P;if(N({player:_.server,episode:v,stat:"pointsServed"}),N({team:P,episode:v,stat:"pointsWon"}),_.result&&_.hand){const V=_.result=="Winner"?P:q;N({player:V,episode:v,stat:_.hand})}_.result=="Ace"&&N({player:_.server,episode:v,stat:"aces"}),_.result=="Double Fault"&&N({player:_.server,episode:v,stat:"doubleFaults"}),_.result=="Winner"&&N({player:_.winner,episode:v,stat:"winners"}),_.result=="Unforced Error"&&N({team:q,episode:v,stat:"unforcedErrors"}),_.result=="Forced Error"&&N({team:q,episode:v,stat:"forcedErrors"}),_.first_serve||N({player:_.server,episode:v,stat:"serves1stIn"}),!_.first_serve&&_.winner==y&&(N({player:_.server,episode:v,stat:"serves1stWon"}),N({team:q,undefined:void 0,stat:"received1stWon"}),N({team:q,undefined:void 0,stat:"received2ndWon"})),!_.first_serve&&_.winner!=y&&N({team:P,episode:v,stat:"received1stWon"}),_.first_serve&&_.result!="Double Fault"&&N({player:_.server,episode:v,stat:"serves2ndIn"}),_.first_serve&&_.result!="Double Fault"&&_.winner==_.server&&(N({player:_.server,episode:v,stat:"serves2ndWon"}),N({team:q,undefined:void 0,stat:"received1stWon"}),N({team:q,undefined:void 0,stat:"received2ndWon"})),_.first_serve&&_.result!="Double Fault"&&_.winner!=y&&N({team:P,episode:v,stat:"received2ndWon"}),_.breakpoint&&(N({player:_.server,undefined:void 0,stat:"breakpointsSaved"}),N({player:_.server,episode:v,stat:"breakpointsFaced"})),o&&o.point.breakpoint&&o.point.server==_.winner&&N({player:_.server,episode:v,stat:"breakpointsSaved"}),v.game&&v.game.complete&&N({team:P,episode:v,stat:"gamesWon"}),o=v},removeStatPoint(v){if(!k.live_stats)return;Object.keys(s).forEach(y=>{Object.keys(s[y]).forEach(P=>{Object.keys(s[y][P]).forEach(q=>{s[y][P][q].length&&(s[y][P][q]=s[y][P][q].filter(V=>V.point.index!=v.point.index))})})});const _=k.history.filter(y=>y.action=="addPoint");o=_.length?_[_.length-1]:void 0}};return l.reset(),k;function R(v){if(!v||!v.teams)return[];const _={Aces:{numerators:["aces"],calc:"number"},"Double Faults":{numerators:["doubleFaults"],calc:"number"},"First Serve %":{numerators:["serves1stIn"],denominators:["pointsServed"],calc:"percentage"},"Unforced Errors":{numerators:["unforcedErrors"],calc:"number"},"Forced Errors":{numerators:["forcedErrors"],calc:"number"},Winners:{numerators:["winners"],calc:"number"},"Total Points Won":{numerators:["pointsWon"],calc:"number"},"Max Pts/Row":{numerators:["pointsWon"],calc:"maxConsecutive",attribute:"index"},"Max Games/Row":{numerators:["gamesWon"],calc:"maxConsecutive",attribute:"game"},"Points Won 1st":{numerators:["serves1stWon"],denominators:["serves1stIn"],calc:"percentage"},"Points Won 2nd":{numerators:["serves2ndWon"],denominators:["serves2ndIn"],calc:"percentage"},"Points Won Receiving":{numerators:["received1stWon","received2ndWon"],denominators:["-pointsServed"],calc:"percentage"},"Breakpoints Saved":{numerators:["breakpointsSaved"],denominators:["breakpointsFaced"],calc:"percentage"},"Breakpoints Converted":{numerators:["-breakpointsSaved"],denominators:["-breakpointsFaced"],calc:"difference"},"Aggressive Margin":{calc:"aggressiveMargin",numerators:["*doubleFaults","*unforcedErrors"],denominators:["*aces","*winners","-*forcedErrors"]}},y=(j,$,K)=>{if(!j)return;const H=j.map(Z=>{const X=Z.split("-").reverse()[0].split("*").join(""),B=$[Z.indexOf("-")==0?1-K:K];return B&&B[X]?B[X].length:0});return[].concat(0,0,...H).reduce((Z,X)=>Z+X)},P=(j,$,K)=>{const H=y(j.numerators,$,K),Z=y(j.denominators,$,K);return{numerator:H,denominator:Z}},q=(j,$)=>{const K=Math.round(j/$*100);return{value:K,display:`${K}% (${j}/${$})`}},V={number(j,$,K){const{numerator:H}=P(j,$,K);return{display:H,value:H,numerators:j.numerators}},maxConsecutive(j,$,K){const H=j.numerators[0],Z=j.attribute,X=$[K][H];if(!X)return{value:0,display:0};let B,S=0,C=X.length?1:0;return X.forEach(M=>{B+1==M.point[Z]?C+=1:(C>S&&(S=C),C=1),B=M.point[Z]}),C>S&&(S=C),{display:S,value:S}},percentage(j,$,K){const{numerator:H,denominator:Z}=P(j,$,K);return H==null||!Z?{value:0,display:0}:Object.assign(q(H,Z),{numerators:j.numerators})},difference(j,$,K){const{numerator:H,denominator:Z}=P(j,$,K);if(H==null||!Z)return{value:0,display:0};const X=Math.abs(Z-H);return Object.assign(q(X,Z),{numerators:j.numerators})},aggressiveMargin(j,$,K){const{numerator:H,denominator:Z}=P(j,$,K),X=Z-H,B=Object.keys($).map(C=>$[C].pointsWon?$[C].pointsWon.length:0),S=[].concat(0,0,...B).reduce((C,M)=>C+M);return Object.assign(q(X,S),{numerators:j.numerators})}},Q=[].concat(...Object.keys(v.teams).map(j=>Object.keys(v.teams[j])));return Object.keys(_).map(j=>{const $=_[j];$.denominators||($.denominators=[]);let K=[].concat(...$.numerators,...$.denominators).map(X=>X.split("-").reverse()[0]);if(K=K.filter(X=>X.indexOf("*")<0),!(K.map(X=>Q.indexOf(X)<0).filter(X=>X).length<1))return!1;const Z=[0,1].map(X=>V[$.calc]($,v.teams,X));return{name:j,team_stats:Z}}).filter(j=>j)}function N(v){const{player:_,episode:y,stat:P}=v??{};let q=v==null?void 0:v.team;_!=null&&(s.players[_]||(s.players[_]={}),s.players[_][P]||(s.players[_][P]=[]),y&&s.players[_][P].push(y),q=l.playerTeam(_)),q!=null&&(s.teams[q]||(s.teams[q]={}),s.teams[q][P]||(s.teams[q][P]=[]),y&&s.teams[q][P].push(y))}};function Oi(t){return Array.isArray(t)?t.map(e=>!isNaN(e)).indexOf(!1)>=0:!1}const Xa=nt,Za="1.9",ot={},It=Xa.Match(),St={broadcast:void 0,user_uuid:void 0},zt={track_shot_types:void 0,audible_clicks:void 0,display_gamefish:void 0,auto_swap_sides:void 0,point_buttons:void 0},b={lets:0,rally:0,undone:[],view:"entry",serve2nd:!1,rally_mode:!1,edit_player:void 0,match_swap:!1,swap_sides:!1,orientation:"vertical",serving:It.nextTeamServing(),receiving:It.nextTeamReceiving(),edit_point_index:void 0,provider:void 0,match:It},Bn="rgb(64, 168, 75)",Fn="rgb(255, 116, 51)",Un="rgb(221, 56, 48)",Mt={first_serve:{color:Bn,type:"toggle"},second_serve:{color:Fn,type:"toggle"},double_fault:{color:Un,type:"flash"},penalty:{color:Un,type:"flash"},first_ace:{color:Bn,type:"flash"},second_ace:{color:Fn,type:"flash"},server_winner:{color:Bn,type:"flash"},server_unforced:{color:Un,type:"flash"},server_forced:{color:Fn,type:"flash"},receiving_winner:{color:Bn,type:"flash"},receiving_unforced:{color:Un,type:"flash"},receiving_forced:{color:Fn,type:"flash"}},bn={user_swap:!1,highlight_better_stats:!0,vertical_view:rt.get("vertical_view")||"vblack",horizontal_view:rt.get("horizontal_view")||"hblack"},us={isStandalone:"standalone"in window.navigator&&window.navigator.standalone,isIDevice:/iphone|ipod|ipad/i.test(window.navigator.userAgent),isMobile:typeof window.orientation<"u",geoposition:{}},cr=["Player One","Player Two"];function Uu(){It.events.clearEvents()}function Rr(){const t=b.swap_sides?1:0,e=b.swap_sides?0:1;de();const n=It.metadata.players(),r=document.getElementById("playerone"),i=document.getElementById("playertwo");r&&(r.innerHTML=_n(n[t].name)),i&&(i.innerHTML=_n(n[e].name)),Array.from(document.querySelectorAll(".display_player_0")).forEach(a=>a.innerHTML=n[t].name),Array.from(document.querySelectorAll(".display_player_1")).forEach(a=>a.innerHTML=n[e].name)}function de(t){const e=It.history.points(),n=rt.get("current_match");if(!n)return;const r=It.metadata.players();if(!(t||e.length||r[0].name!=cr[0]&&r[1].name!=cr[1]))return;const s=JSON.parse(rt.get("match_archive")||"[]");s.indexOf(n)<0&&(s.push(n),rt.set("match_archive",JSON.stringify(s)));const o={ch_version:Za,players:r,first_service:It.set.firstService(),match:It.metadata.defineMatch(),format:It.format.settings(),tournament:It.metadata.defineTournament(),points:e,scoreboard:It.scoreboard()};rt.set(n,JSON.stringify(o))}function Hu(){const t=rt.get("CH_AppSettings");t&&Object.assign(zt,JSON.parse(t)),Object.keys(zt).forEach(n=>{const r=document.getElementById(n);r&&(r.checked=zt[n])});const e=rt.get("CH_AppState");e&&Object.assign(St,JSON.parse(e))}function fs(){Object.keys(zt).forEach(t=>{const e=document.getElementById(t);e&&(zt[t]=e.checked)}),rt.set("CH_AppSettings",JSON.stringify(zt)),rt.set("CH_AppState",JSON.stringify(St))}function Qa(){us.isMobile?b.orientation=window.screen.orientation.type=="landscape-primary"?"landscape":"portrait":b.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}function $u(){return b.match.history.points().length==0}function zu(){const t=qu(),e=b.match.metadata.players();let n="";if(!t.length)return!1;t.forEach(i=>{i.points&&i.points.length&&(n+=Gu(i,e))}),n+=`
    <div class="flexrows ph_game">
      <div class='ph_margin' style='width: 100%'>
          <div class='flexcenter' style='width: 100%'>Duration ${Vu()}</div>
      </div>
    </div>
  `;const r=document.getElementById("ph_frame");r&&(r.innerHTML=n)}function qu(){const t=b.match.history.action("addPoint"),e=[{points:[]}];let n=0,r=0;return t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function Gu(t,e){const n=t.points[t.points.length-1],r=t.complete?t.score.join("-"):void 0,i=n.tiebreak,s=i?"Tiebreak":e[n.server].name,o=i?"":n.server?"playertwo":"playerone",a=i?"":n.server==n.winner?"won":"lost";let l=`
         <div class="flexrows ph_game">
            <div class='ph_margin flexrows'>
               <div class="ph_server ${o}">${s}</div>
               <div class="ph_action flexcenter"> 
                  <div class='ph_fish iconfish'></div>
               </div>
               <div class='viewGameFish ph_rally gameIndex="${t.index}" ph_${a}''> <b class="viewGameFish" gameIndex="${t.index}">${r||""}</b> </div>
            </div>
         </div>
      `;return t.points.forEach(c=>{l+=Wu(c,e)}),l}function Wu(t,e){const n=t.index%2?"even":"odd";let r=!t.tiebreak&&t.server?t.score.split("-").reverse().join("-"):t.score,i;if(t.result){let c;["Ace","Winner"].indexOf(t.result)>=0?c=e[t.winner].name:c=e[1-t.winner].name,i=c.split(" ").map(u=>u[0]).join("")}const s=t.hand?t.hand+" ":"",o=t.result||"",a=o?`${i}: ${s}${o}`:"";r=r=="0-0"?"GAME":r,t.tiebreak&&(t.server&&(r=`&nbsp;${r}*`),t.server||(r=`*${r}&nbsp;`));const l=t.rally?t.rally.length+1:"";return`
    <div class='flexrows ph_episode' pointIndex="${t.index}">
        <div class='ph_point_${n} flexrows'>
          <div class='viewEditPoint ph_result'>${a}</div>
          <div class='viewEditPoint ph_score'>${r} </div>
          <div class='viewEditPoint ph_score'>${l}</div>
        </div>
    </div>
    `}function Vu(){const t=b.match.history.points().map(i=>i.uts),e=Math.min(...t),r=(Math.max(...t)-e)/1e3;return Yu(r)}function Yu(t){const e=parseInt(t,10);let n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),i=e-n*3600-r*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i}function hs(t){t=t||b.match.history.action("addPoint");const e=[{points:[]}];let n=0,r=0;return t==null||t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function be(){Array.from(document.querySelectorAll(".ch_modal")).forEach(t=>t.style.display="none")}function Lr(){const t=b.match.score(),e=t.counters.sets,n=t.counters.games,r=t.points.split("-"),i=b.swap_sides?1:0,s=b.swap_sides?0:1;Array.from(document.getElementsByClassName("points")).forEach((g,x)=>{g.value=r[b.swap_sides?1-x:x]}),Array.from(document.querySelectorAll(".display_points_0")).forEach(g=>g.innerHTML=r[i]),Array.from(document.querySelectorAll(".display_points_1")).forEach(g=>g.innerHTML=r[s]),Array.from(document.querySelectorAll(".display_games_0")).forEach(g=>g.innerHTML=n[i]),Array.from(document.querySelectorAll(".display_games_1")).forEach(g=>g.innerHTML=n[s]),Array.from(document.querySelectorAll(".display_sets_0")).forEach(g=>g.innerHTML=e[i]),Array.from(document.querySelectorAll(".display_sets_1")).forEach(g=>g.innerHTML=e[s]);const d=t.components.sets,p=b.match.format.threshold(),m=p==1?0:p>2?4:2;[0,1,2,3,4].forEach(g=>{(!d||d&&!d[g])&&(Array.from(document.getElementsByClassName("games"+g)).forEach(R=>R.value="-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_0")).forEach(R=>R.innerHTML=g>m?" ":"-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_1")).forEach(R=>R.innerHTML=g>m?" ":"-"))}),d&&d.forEach((g,x)=>{Array.from(document.getElementsByClassName("games"+x)).forEach((N,v)=>N.value=g.games[b.swap_sides?1-v:v]),Array.from(document.getElementsByClassName("display_set_"+x+"_games_0")).forEach(N=>N.innerHTML=g.games[b.swap_sides?1:0]),Array.from(document.getElementsByClassName("display_set_"+x+"_games_1")).forEach(N=>N.innerHTML=g.games[b.swap_sides?0:1])})}function Pr(){b.match.metadata.players().forEach((s,o)=>{["hand","entry","seed","draw_position","ioc","rank"].forEach(l=>{const c=`player${o}_${l}`,u=document.getElementById(c);u&&(u.value=s[l]||"")})});const e=b.match.metadata.defineMatch();["court","umpire"].forEach(s=>{const o=`match_${s}`,a=document.getElementById(o);a&&(a.value=e[s]||"")});const r=b.match.metadata.defineTournament();["name","start_date","tour","rank","surface","in_out","draw","draw_size","round"].forEach(s=>{const o=`tournament_${s}`,a=document.getElementById(o);a&&(a.value=r[s]||"")})}function se(){de(),b.serve2nd=!1,b.rally_mode=!1,ds(),Lr(),Ir()}function Ir(){const t=b.match.history.action("addPoint"),e=JSON.parse(rt.get("match_archive")||"[]");Array.from(document.querySelectorAll(".view_stats")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".change_server")).forEach(s=>s.style.display=t.length==0?"inline":"none"),Array.from(document.querySelectorAll(".view_archive")).forEach(s=>s.style.display=t.length==0&&e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_settings")).forEach(s=>s.style.display=t.length==0&&!e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_history")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".undo")).forEach(s=>{s.style.display=t.length>0||b.serve2nd||b.rally_mode?"flex":"none"}),Array.from(document.querySelectorAll(".redo")).forEach(s=>{s.style.display=b.undone.length?"flex":"none"});const n=t.length?t[t.length-1]:void 0,r=i();b.match.status=r,Array.from(document.querySelectorAll(".status_message")).forEach(s=>s.innerHTML=r);function i(){if(n){if(n.needed.points_to_set&&Math.min(...n.needed.points_to_set)==1)return"SET POINT";if(n.point.breakpoint)return"BREAK POINT";if(n.needed.points_to_game&&n.needed.points_to_game[n.point.server]==1)return"GAME POINT"}return b.lets?`Lets: ${b.lets}`:""}}function ds(){b.match.nextTeamServing()!=b.serving&&setTimeout(()=>Br(),400),Dr(),Rr()}function Dr(){const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;Array.from(document.querySelectorAll(".fault")).forEach(u=>u.innerHTML="Fault");const n=`.modeaction_player${t}`;Array.from(document.querySelectorAll(n)).forEach(u=>u.innerHTML="Serve");const r=`.modeerr_player${t}`;Array.from(document.querySelectorAll(r)).forEach(u=>u.innerHTML="Fault");const i=`.modewin_player${t}`;Array.from(document.querySelectorAll(i)).forEach(u=>u.innerHTML="Ace");const s=`.modeforce_player${t}`;Array.from(document.querySelectorAll(s)).forEach(u=>u.innerHTML="Let");const o=`.modeaction_player${e}`;Array.from(document.querySelectorAll(o)).forEach(u=>u.innerHTML="Return");const a=`.modeerr_player${e}`;Array.from(document.querySelectorAll(a)).forEach(u=>u.innerHTML="UFE");const l=`.modewin_player${e}`;Array.from(document.querySelectorAll(l)).forEach(u=>u.innerHTML="Winner");const c=`.modeforce_player${e}`;Array.from(document.querySelectorAll(c)).forEach(u=>u.innerHTML="Forced"),Array.from(document.querySelectorAll(".vs_point_button")).forEach(u=>u.style.display=zt.point_buttons?"flex":"none"),Array.from(document.querySelectorAll(".rally")).forEach(u=>u.innerHTML="Rally")}function Br(){if(b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),zt.auto_swap_sides){const r=hs();let i=r.length;r[r.length-1].complete&&(i+=1),b.match_swap=ju(i)}else b.match_swap=!1;tc();const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;wo(`.indicate_serve.display_player_${t}`,"yellow"),wo(`.indicate_serve.display_player_${e}`,"white"),t?(Hn(".display_0_serving","none"),Hn(".display_1_serving","flex")):(Hn(".display_0_serving","flex"),Hn(".display_1_serving","none")),Array.from(document.getElementsByClassName("points")).forEach((r,i)=>{const s=b.swap_sides?1-i:i;r.style.backgroundColor=s==b.serving?"#FBF781":"#D1FBFB"}),Dr()}function ju(t){return![!0].concat([...Array(t).keys()].map(n=>(n+1)%4<2))[t]}function tc(){b.swap_sides=b.match_swap,bn.user_swap&&(b.swap_sides=!b.swap_sides),se()}function wo(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.color=e)}function Hn(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.display=e)}function Ku(t){if(t.keyCode==13||t.code==9){const e=document.getElementById("player_hand");e&&e.focus(),Ni()}}function Ni(){const t=document.getElementById("playername"),e=document.getElementById("team"),n=document.getElementById("playerid");if(t){const r={index:b.edit_player,name:t.value};e&&(r.team=e.value),n&&(r.id=n.value),b.match.metadata.definePlayer(r)}Rr()}function Ju(){be();const t=document.getElementById("matchdeets");t&&(t.style.display="flex");const e=document.getElementById("matchdetail_content");e&&(e.scrollTop=0)}const Xu=""+new URL("exportwhite-3Rc7oKSc.png",import.meta.url).href,Zu=""+new URL("recycle-rzIDJowx.png",import.meta.url).href;function Qu(t){t=t||rt.get("current_match"),Array.from(document.querySelectorAll(".mh_export")).forEach(a=>a.style.display="none");const e=rt.get(t),n=`
   <p>&nbsp;</p>
   <h1>Export Options</h1>
   <p>Supported by your device</p>
`,r=`
   <div matchId="${t}" class="exportMatch flexcenter">
      <div matchId="${t}" class='exportMatch export_action action_icon iconsave'></div>
   </div>
`,i=`
   <div class="flexcenter">
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
         <div class='export_action action_icon iconclipboard'></div> 
      </button>
   </div> 
`,s=`<div>${n}<div class="flexrows flexcenter">${us.isIDevice?"":r}${i}</div></div>`;qt(s,e)}const Gt={hasClass:function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){if(this.hasClass(t,e))return;const n=t.className.split(" ");n.push(e),t.className=n.join(" ")},removeClass:function(t,e){if(!this.hasClass(t,e))return;const n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n,"")}},tf={init:t=>{let e=0,n=0;t.buttons.forEach(i=>{i.side=="right"&&(e+=i.width||0),i.side=="left"&&(n+=i.width||0)});const r=Array.from(document.querySelectorAll(t.container));r.forEach(i=>{let s=0,o=0,a=null,l=0,c=0;t.buttons.forEach(u=>{const f=document.createElement("div");f.textContent=u.text,f.className=u.class,u.side=="right"&&(l+=u.width||0,f.style.right=-1*l+"px"),u.side=="left"&&(c+=u.width||0,f.style.left=-1*c+"px");const h=i.appendChild(f);if(u.image){const d=document.createElement("img");d.src=u.image,d.className=u.image_class,h.appendChild(d)}}),i.style.webkitTransform="translateZ(0)",i.style.transform="translateZ(0)",i.addEventListener("touchstart",function(u){i.style.transitionDuration="0ms",r.forEach(h=>{Gt.hasClass(h,"move-out-click")&&h!=i&&(h.style.transitionDuration="325ms",h.style.webkitTransform="translateX(0px)",h.style.transform="translateX(0px)",Gt.removeClass(h,"move-out-click"))});const f=u.changedTouches;a={x:f[0].pageX,y:f[0].pageY}},!0),i.addEventListener("touchmove",function(u){if(a===null)return;const f=u.changedTouches,h=f[0].pageX,d=f[0].pageY;if(s=h-a.x,o=d-a.y,Math.abs(s)>Math.abs(o)){if(s>0){if(Gt.hasClass(i,"move-out-click")){const p=s>e?0:-e+s;i.style.transform="translateX("+p+"px)"}else if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}if(s<0)if(Gt.hasClass(i,"move-out-click")){if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}else{const p=Math.abs(s)>e?-e:s;i.style.transform="translateX("+p+"px)"}}},!0),i.addEventListener("touchend",function(){if(a!==null){if(i.style.transitionDuration="125ms",Gt.hasClass(i,"move-out-click")){if(s>0&&e){const u=s>10?0:-e;i.style.transform="translateX("+u+"px)",u===0&&Gt.removeClass(i,"move-out-click")}else if(n){const u=s<-10?0:e;i.style.transform="translateX("+u+"px)",u===0&&Gt.removeClass(i,"move-out-click")}}else if(s<0&&e){const u=Math.abs(s)>e/2?-e:0;i.style.transform="translateX("+u+"px)",u!==0&&Gt.addClass(i,"move-out-click")}else if(n){const u=Math.abs(s)>e/2?e:0;i.style.transform="translateX("+u+"px)",u!==0&&Gt.addClass(i,"move-out-click")}a=null,s=0}},!0),i.addEventListener("touchcancel",function(){i.style.transitionDuration="225ms",i.style.webkitTransform="translateX(0px)",i.style.transform="translateX(0px)",Gt.removeClass(i,"move-out-click"),a=null,s=0},!0)})}};function ec(){b.match.events.addPoint(se),b.match.events.undo(se),b.match.events.reset(ef)}function ef(){b.match.set.perspectiveScore(!1),b.match.set.liveStats(!0),b.match.metadata.timestamps(!0),b.match.metadata.defineMatch({date:null}),b.serve2nd=!1,b.rally_mode=!1,b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),b.undone=[],b.rally=0,b.lets=0,ps(),Rr(),Br(),se()}function ps(){Object.keys(Mt).forEach(t=>nc(t))}function nc(t){const e=document.getElementById(t);e&&Mt!=null&&Mt[t]&&Mt[t].color&&(e.style.backgroundColor="white",e.style.color=Mt[t].color,e.style.borderColor=Mt[t].color)}function Fr(){const t=[];for(let s=0;s<256;s++)t[s]=(s<16?"0":"")+s.toString(16);const e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return t[e&255]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[n&255]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[r&63|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[i&255]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}function ms(t,e="entry"){if(!t){vt("entry");return}b.match.reset();const n=rt.get(t),r=n&&Pu(n)&&t?JSON.parse(rt.get(t)??"[]"):void 0;if(!r){vt("entry");return}if(Uu(),rt.set("current_match",t),r.match&&(r.match.muid||(r.match.muid=Fr(),rt.remove(t)),b.match.metadata.defineMatch(r.match)),r.first_service&&b.match.set.firstService(r.first_service),r.tournament&&b.match.metadata.defineTournament(r.tournament),r.format){b.match.format.settings(r.format);const i=document.getElementById("md_format");i&&(i.innerHTML=r.format.name)}r.version||r.points.forEach(i=>b.match.addPoint(i)),b.match.metadata.timestamps(!0),r.players&&r.players.forEach((i,s)=>{i.index=s,b.match.metadata.definePlayer(i)}),Rr(),Lr(),Pr(),se(),ec(),vt(e)}function rc(t){const e=t==null?void 0:t.active;let n="<div class='swipe-panel no-top'>";const r=JSON.parse(rt.get("match_archive")||"[]").filter((s,o,a)=>a.lastIndexOf(s)==o).reverse();if(!r.length){ys();return}if(e)return;r.forEach(s=>{const o=s&&JSON.parse(rt.get(s)??"[]");o?n+=sf(s,o):rt.remove(s)}),n+="</div>";const i=document.getElementById("matcharchiveList");return i&&(i.innerHTML=n),tf.init({container:".swipe-item",buttons:[{class:"img_export swipe_img",image_class:"export_icon",image:Xu,side:"right",width:60},{class:"img_recycle swipe_img",image_class:"recycle_icon",image:Zu,side:"right",width:60}]}),i&&i.addEventListener("click",function(s){var c,u;const o=vn(s.target,"swipe-item"),a=o==null?void 0:o.getAttribute("muid");if(vn(s.target,"mh_match"))return ms(a);(((u=(c=s==null?void 0:s.target)==null?void 0:c.className)==null?void 0:u.indexOf("img_export"))>=0||s.target.className=="export_icon")&&(o.classList.remove("move-out-click"),o.style.webkitTransitionDuration="125ms",o.style.transitionDuration="125ms",o.style.webkitTransform="translateX(0px)",o.style.transform="translateX(0px)",Qu(a)),(s.target.className.indexOf("img_recycle")>=0||s.target.className=="recycle_icon")&&(nf(a),o.remove())}),r}function nf(t){rt.remove(t);const e=rt.get("current_match");let n=JSON.parse(rt.get("match_archive")||"[]");n=n.filter(r=>t!=r),rt.set("match_archive",JSON.stringify(n)),t==e&&gs(),rc({active:!0})}function gs(t){b.match.reset(),Pr(),Lr();const e=new Date().valueOf();t=t||Fr(),b.match.metadata.defineMatch({muid:t,date:e}),rt.set("current_match",t),se()}function ys(t){gs(),vt(t?"entry":"matchformat")}const rf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function sf(t,e){const n=new Date(e.match.date),r=[n.getDate(),rf[n.getMonth()],n.getFullYear()].join("-"),i=e.players,s=`
         <span class='nowrap'>${_n(i[0].name)}</span>
         <span> v. </span>
         <span class='nowrap'>${_n(i[1].name)}</span>
         `,o=e.scoreboard,a=e.format.name;return`
      <div id='match_${t}' muid='${t}' class='flexcenter mh_swipe swipe-item'>
         <div class='flexcols mh_match'>
            <div class='mh_players'>${s}</div>
            <div class='mh_details'>
               <div>${r}</div>
               <div class='mh_format'>${a}</div>
            </div>
            <div class='mh_score'>${o}</div>
         </div>
      </div>`}function of(){const t=b.match.format.types();let e="";if(!t.length)return!1;t.forEach(r=>{e+=af(r)});const n=document.getElementById("matchformatlist");n&&(n.innerHTML=e)}function af(t){const{name:e,description:n}=Xa.formats().matches[t];return`
  <div class='changeFormat flexjustifystart mf_format' newFormat="${t}">
      <div class='changeFormat flexcols'>
        <div class='changeFormat mf_name'> <b class='changeFormat'>${e||""}</b> </div>
        <div class='changeFormat mf_description'> ${n} </div>
      </div>
  </div>
  `}function ic(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function cf(t){return t.length===1&&(t=lf(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function lf(t){return function(e,n){return ic(t(e),n)}}var uf=cf(ic),ff=uf.right;function $t(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var hf=Math.sqrt(50),df=Math.sqrt(10),pf=Math.sqrt(2);function mf(t,e,n){var r=lr(t,e,n);return $t(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function lr(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=hf?i*=10:s>=df?i*=5:s>=pf&&(i*=2),e<t?-i:i}var ei=Array.prototype.slice;function xo(t){return t}var ni=1,ri=2,Ri=3,an=4,ko=1e-6;function gf(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function yf(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function _f(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function vf(){return!this.__axis}function sc(t,e){var n=[],r=null,i=null,s=6,o=6,a=3;function l(c){var u=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):xo),h=Math.max(s,0)+a,d=t===ni||t===Ri?gf:yf,p=e.range(),m=p[0]+.5,g=p[p.length-1]+.5,x=(e.bandwidth?_f:xo)(e.copy()),A=c.selection?c.selection():c,k=A.selectAll(".domain").data([null]),R=A.selectAll(".tick").data(u,e).order(),N=R.exit(),v=R.enter().append("g").attr("class","tick"),_=R.select("line"),y=R.select("text"),P=t===ni||t===an?-1:1,q,V=t===an||t===ri?(q="x","y"):(q="y","x");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),R=R.merge(v),_=_.merge(v.append("line").attr("stroke","#000").attr(q+"2",P*s).attr(V+"1",.5).attr(V+"2",.5)),y=y.merge(v.append("text").attr("fill","#000").attr(q,P*h).attr(V,.5).attr("dy",t===ni?"0em":t===Ri?"0.71em":"0.32em")),c!==A&&(k=k.transition(c),R=R.transition(c),_=_.transition(c),y=y.transition(c),N=N.transition(c).attr("opacity",ko).attr("transform",function(Q){return d(x,this.parentNode.__axis||x,Q)}),v.attr("opacity",ko).attr("transform",function(Q){return d(this.parentNode.__axis||x,x,Q)})),N.remove(),k.attr("d",t===an||t==ri?"M"+P*o+","+m+"H0.5V"+g+"H"+P*o:"M"+m+","+P*o+"V0.5H"+g+"V"+P*o),R.attr("opacity",1).attr("transform",function(Q){return d(x,x,Q)}),_.attr(q+"2",P*s),y.attr(q,P*h).text(f),A.filter(vf).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ri?"start":t===an?"end":"middle"),A.each(function(){this.__axis=x})}return l.scale=function(c){return arguments.length?(e=c,l):e},l.ticks=function(){return n=ei.call(arguments),l},l.tickArguments=function(c){return arguments.length?(n=c==null?[]:ei.call(c),l):n.slice()},l.tickValues=function(c){return arguments.length?(r=c==null?null:ei.call(c),l):r&&r.slice()},l.tickFormat=function(c){return arguments.length?(i=c,l):i},l.tickSize=function(c){return arguments.length?(s=o=+c,l):s},l.tickSizeInner=function(c){return arguments.length?(s=+c,l):s},l.tickSizeOuter=function(c){return arguments.length?(o=+c,l):o},l.tickPadding=function(c){return arguments.length?(a=+c,l):a},l}function bf(t){return sc(Ri,t)}function wf(t){return sc(an,t)}var xf={value:function(){}};function oc(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Zn(n)}function Zn(t){this._=t}function kf(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zn.prototype=oc.prototype={constructor:Zn,on:function(t,e){var n=this._,r=kf(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Af(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Ao(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ao(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Zn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Af(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ao(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=xf,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Li="http://www.w3.org/1999/xhtml";const Eo={svg:"http://www.w3.org/2000/svg",xhtml:Li,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ur(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Eo.hasOwnProperty(e)?{space:Eo[e],local:t}:t}function Ef(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Li&&e.documentElement.namespaceURI===Li?e.createElement(t):e.createElementNS(n,t)}}function Sf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ac(t){var e=Ur(t);return(e.local?Sf:Ef)(e)}var Tf=0;function So(){this._="@"+(++Tf).toString(36)}So.prototype={constructor:So,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var cc=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var Je=document.documentElement;if(!Je.matches){var Cf=Je.webkitMatchesSelector||Je.msMatchesSelector||Je.mozMatchesSelector||Je.oMatchesSelector;cc=function(t){return function(){return Cf.call(this,t)}}}}const lc=cc;var uc={};if(typeof document<"u"){var Mf=document.documentElement;"onmouseenter"in Mf||(uc={mouseenter:"mouseover",mouseleave:"mouseout"})}function Of(t,e,n){return t=fc(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function fc(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Nf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Rf(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function Lf(t,e,n){var r=uc.hasOwnProperty(t.type)?Of:fc;return function(i,s,o){var a=this.__on,l,c=r(e,s,o);if(a){for(var u=0,f=a.length;u<f;++u)if((l=a[u]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},a?a.push(l):this.__on=[l]}}function Pf(t,e,n){var r=Nf(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Lf:Rf,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}function If(){}function _s(t){return t==null?If:function(){return this.querySelector(t)}}function Df(t){typeof t!="function"&&(t=_s(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Tt(r,this._parents)}function Bf(){return[]}function hc(t){return t==null?Bf:function(){return this.querySelectorAll(t)}}function Ff(t){typeof t!="function"&&(t=hc(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Tt(r,i)}function Uf(t){typeof t!="function"&&(t=lc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Tt(r,this._parents)}function dc(t){return new Array(t.length)}function Hf(){return new Tt(this._enter||this._groups.map(dc),this._parents)}function ur(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ur.prototype={constructor:ur,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $f(t){return function(){return t}}var To="$";function zf(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new ur(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function qf(t,e,n,r,i,s,o){var a,l,c={},u=e.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(h[a]=d=To+o.call(l,l.__data__,a,e),d in c?i[a]=l:c[d]=l);for(a=0;a<f;++a)d=To+o.call(t,s[a],a,s),(l=c[d])?(r[a]=l,l.__data__=s[a],c[d]=null):n[a]=new ur(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c[h[a]]===l&&(i[a]=l)}function Gf(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(v){d[++c]=v}),d;var n=e?qf:zf,r=this._parents,i=this._groups;typeof t!="function"&&(t=$f(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=t.call(u,u&&u.__data__,c,r),p=d.length,m=a[c]=new Array(p),g=o[c]=new Array(p),x=l[c]=new Array(h);n(u,f,m,g,x,d,e);for(var A=0,k=0,R,N;A<p;++A)if(R=m[A]){for(A>=k&&(k=A+1);!(N=g[k])&&++k<p;);R._next=N||null}}return o=new Tt(o,r),o._enter=a,o._exit=l,o}function Wf(){return new Tt(this._exit||this._groups.map(dc),this._parents)}function Vf(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Tt(o,this._parents)}function Yf(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o);return this}function jf(t){t||(t=Kf);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Tt(i,this._parents).order()}function Kf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Jf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Xf(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Zf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Qf(){var t=0;return this.each(function(){++t}),t}function th(){return!this.node()}function eh(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function nh(t){return function(){this.removeAttribute(t)}}function rh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ih(t,e){return function(){this.setAttribute(t,e)}}function sh(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ah(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ch(t,e){var n=Ur(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rh:nh:typeof e=="function"?n.local?ah:oh:n.local?sh:ih)(n,e))}function Cn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function lh(t){return function(){this.style.removeProperty(t)}}function uh(t,e,n){return function(){this.style.setProperty(t,e,n)}}function fh(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function hh(t,e,n){var r;return arguments.length>1?this.each((e==null?lh:typeof e=="function"?fh:uh)(t,e,n??"")):Cn(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function dh(t){return function(){delete this[t]}}function ph(t,e){return function(){this[t]=e}}function mh(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gh(t,e){return arguments.length>1?this.each((e==null?dh:typeof e=="function"?mh:ph)(t,e)):this.node()[t]}function pc(t){return t.trim().split(/^|\s+/)}function vs(t){return t.classList||new mc(t)}function mc(t){this._node=t,this._names=pc(t.getAttribute("class")||"")}mc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function gc(t,e){for(var n=vs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function yc(t,e){for(var n=vs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function yh(t){return function(){gc(this,t)}}function _h(t){return function(){yc(this,t)}}function vh(t,e){return function(){(e.apply(this,arguments)?gc:yc)(this,t)}}function bh(t,e){var n=pc(t+"");if(arguments.length<2){for(var r=vs(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?vh:e?yh:_h)(n,e))}function wh(){this.textContent=""}function xh(t){return function(){this.textContent=t}}function kh(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ah(t){return arguments.length?this.each(t==null?wh:(typeof t=="function"?kh:xh)(t)):this.node().textContent}function Eh(){this.innerHTML=""}function Sh(t){return function(){this.innerHTML=t}}function Th(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ch(t){return arguments.length?this.each(t==null?Eh:(typeof t=="function"?Th:Sh)(t)):this.node().innerHTML}function Mh(){this.nextSibling&&this.parentNode.appendChild(this)}function Oh(){return this.each(Mh)}function Nh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rh(){return this.each(Nh)}function Lh(t){var e=typeof t=="function"?t:ac(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ph(){return null}function Ih(t,e){var n=typeof t=="function"?t:ac(t),r=e==null?Ph:typeof e=="function"?e:_s(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dh(){var t=this.parentNode;t&&t.removeChild(this)}function Bh(){return this.each(Dh)}function Fh(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _c(t,e,n){var r=Cn(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Uh(t,e){return function(){return _c(this,t,e)}}function Hh(t,e){return function(){return _c(this,t,e.apply(this,arguments))}}function $h(t,e){return this.each((typeof e=="function"?Hh:Uh)(t,e))}var bs=[null];function Tt(t,e){this._groups=t,this._parents=e}function Mn(){return new Tt([[document.documentElement]],bs)}Tt.prototype=Mn.prototype={constructor:Tt,select:Df,selectAll:Ff,filter:Uf,data:Gf,enter:Hf,exit:Wf,merge:Vf,order:Yf,sort:jf,call:Jf,nodes:Xf,node:Zf,size:Qf,empty:th,each:eh,attr:ch,style:hh,property:gh,classed:bh,text:Ah,html:Ch,raise:Oh,lower:Rh,append:Lh,insert:Ih,remove:Bh,datum:Fh,on:Pf,dispatch:$h};function lt(t){return typeof t=="string"?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],bs)}function Pi(t){return typeof t=="string"?new Tt([document.querySelectorAll(t)],[document.documentElement]):new Tt([t??[]],bs)}function Ge(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function On(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function pe(){}var _e=.7,Be=1/_e,Le="\\s*([+-]?\\d+)\\s*",wn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zh=/^#([0-9a-f]{3})$/,qh=/^#([0-9a-f]{6})$/,Gh=new RegExp("^rgb\\("+[Le,Le,Le]+"\\)$"),Wh=new RegExp("^rgb\\("+[jt,jt,jt]+"\\)$"),Vh=new RegExp("^rgba\\("+[Le,Le,Le,wn]+"\\)$"),Yh=new RegExp("^rgba\\("+[jt,jt,jt,wn]+"\\)$"),jh=new RegExp("^hsl\\("+[wn,jt,jt]+"\\)$"),Kh=new RegExp("^hsla\\("+[wn,jt,jt,wn]+"\\)$"),Co={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ge(pe,ve,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function ve(t){var e;return t=(t+"").trim().toLowerCase(),(e=zh.exec(t))?(e=parseInt(e[1],16),new kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1)):(e=qh.exec(t))?Mo(parseInt(e[1],16)):(e=Gh.exec(t))?new kt(e[1],e[2],e[3],1):(e=Wh.exec(t))?new kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Vh.exec(t))?Oo(e[1],e[2],e[3],e[4]):(e=Yh.exec(t))?Oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jh.exec(t))?No(e[1],e[2]/100,e[3]/100,1):(e=Kh.exec(t))?No(e[1],e[2]/100,e[3]/100,e[4]):Co.hasOwnProperty(t)?Mo(Co[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function Mo(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function Oo(t,e,n,r){return r<=0&&(t=e=n=NaN),new kt(t,e,n,r)}function ws(t){return t instanceof pe||(t=ve(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function Ii(t,e,n,r){return arguments.length===1?ws(t):new kt(t,e,n,r??1)}function kt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ge(kt,Ii,On(pe,{brighter:function(t){return t=t==null?Be:Math.pow(Be,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?_e:Math.pow(_e,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function No(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wt(t,e,n,r)}function Jh(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof pe||(t=ve(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Wt(o,a,l,t.opacity)}function Xh(t,e,n,r){return arguments.length===1?Jh(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ge(Wt,Xh,On(pe,{brighter:function(t){return t=t==null?Be:Math.pow(Be,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?_e:Math.pow(_e,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new kt(ii(t>=240?t-240:t+120,i,r),ii(t,i,r),ii(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));function ii(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var vc=Math.PI/180,bc=180/Math.PI,fr=18,wc=.95047,xc=1,kc=1.08883,Ac=4/29,Pe=6/29,Ec=3*Pe*Pe,Zh=Pe*Pe*Pe;function xs(t){if(t instanceof te)return new te(t.l,t.a,t.b,t.opacity);if(t instanceof fe){var e=t.h*vc;return new te(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof kt||(t=ws(t));var n=ci(t.r),r=ci(t.g),i=ci(t.b),s=si((.4124564*n+.3575761*r+.1804375*i)/wc),o=si((.2126729*n+.7151522*r+.072175*i)/xc),a=si((.0193339*n+.119192*r+.9503041*i)/kc);return new te(116*o-16,500*(s-o),200*(o-a),t.opacity)}function Qh(t,e,n,r){return arguments.length===1?xs(t):new te(t,e,n,r??1)}function te(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Ge(te,Qh,On(pe,{brighter:function(t){return new te(this.l+fr*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new te(this.l-fr*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=xc*oi(t),e=wc*oi(e),n=kc*oi(n),new kt(ai(3.2404542*e-1.5371385*t-.4985314*n),ai(-.969266*e+1.8760108*t+.041556*n),ai(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}}));function si(t){return t>Zh?Math.pow(t,1/3):t/Ec+Ac}function oi(t){return t>Pe?t*t*t:Ec*(t-Ac)}function ai(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ci(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function td(t){if(t instanceof fe)return new fe(t.h,t.c,t.l,t.opacity);t instanceof te||(t=xs(t));var e=Math.atan2(t.b,t.a)*bc;return new fe(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Di(t,e,n,r){return arguments.length===1?td(t):new fe(t,e,n,r??1)}function fe(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Ge(fe,Di,On(pe,{brighter:function(t){return new fe(this.h,this.c,this.l+fr*(t??1),this.opacity)},darker:function(t){return new fe(this.h,this.c,this.l-fr*(t??1),this.opacity)},rgb:function(){return xs(this).rgb()}}));var Sc=-.14861,ks=1.78277,As=-.29227,Hr=-.90649,xn=1.97294,Ro=xn*Hr,Lo=xn*ks,Po=ks*As-Hr*Sc;function ed(t){if(t instanceof ye)return new ye(t.h,t.s,t.l,t.opacity);t instanceof kt||(t=ws(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Po*r+Ro*e-Lo*n)/(Po+Ro-Lo),s=r-i,o=(xn*(n-i)-As*s)/Hr,a=Math.sqrt(o*o+s*s)/(xn*i*(1-i)),l=a?Math.atan2(o,s)*bc-120:NaN;return new ye(l<0?l+360:l,a,i,t.opacity)}function Jt(t,e,n,r){return arguments.length===1?ed(t):new ye(t,e,n,r??1)}function ye(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ge(ye,Jt,On(pe,{brighter:function(t){return t=t==null?Be:Math.pow(Be,t),new ye(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?_e:Math.pow(_e,t),new ye(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*vc,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new kt(255*(e+n*(Sc*r+ks*i)),255*(e+n*(As*r+Hr*i)),255*(e+n*(xn*r)),this.opacity)}}));function $r(t){return function(){return t}}function Tc(t,e){return function(n){return t+n*e}}function nd(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cc(t,e){var n=e-t;return n?Tc(t,n>180||n<-180?n-360*Math.round(n/360):n):$r(isNaN(t)?e:t)}function rd(t){return(t=+t)==1?ne:function(e,n){return n-e?nd(e,n,t):$r(isNaN(e)?n:e)}}function ne(t,e){var n=e-t;return n?Tc(t,n):$r(isNaN(t)?e:t)}const hr=function t(e){var n=rd(e);function r(i,s){var o=n((i=Ii(i)).r,(s=Ii(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=ne(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function id(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(n),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Es(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function sd(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function Ht(t,e){return t=+t,e-=t,function(n){return t+e*n}}function od(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Es(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Bi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,li=new RegExp(Bi.source,"g");function ad(t){return function(){return t}}function cd(t){return function(e){return t(e)+""}}function Mc(t,e){var n=Bi.lastIndex=li.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Bi.exec(t))&&(i=li.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Ht(r,i)})),n=li.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?cd(l[0].x):ad(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Es(t,e){var n=typeof e,r;return e==null||n==="boolean"?$r(e):(n==="number"?Ht:n==="string"?(r=ve(e))?(e=r,hr):Mc:e instanceof ve?hr:e instanceof Date?sd:Array.isArray(e)?id:isNaN(e)?od:Ht)(t,e)}function ld(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}var Io=180/Math.PI,Fi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oc(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Io,skewX:Math.atan(l)*Io,scaleX:o,scaleY:a}}var Xe,ui,Do,$n;function ud(t){return t==="none"?Fi:(Xe||(Xe=document.createElement("DIV"),ui=document.documentElement,Do=document.defaultView),Xe.style.transform=t,t=Do.getComputedStyle(ui.appendChild(Xe),null).getPropertyValue("transform"),ui.removeChild(Xe),t=t.slice(7,-1).split(","),Oc(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function fd(t){return t==null||($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",t),!(t=$n.transform.baseVal.consolidate()))?Fi:(t=t.matrix,Oc(t.a,t.b,t.c,t.d,t.e,t.f))}function Nc(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ht(c,f)},{i:m-2,x:Ht(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ht(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ht(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ht(c,f)},{i:m-2,x:Ht(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,m=h.length,g;++p<m;)f[(g=h[p]).i]=g.x(d);return f.join("")}}}var hd=Nc(ud,"px, ","px)","deg)"),dd=Nc(fd,", ",")",")");function pd(t){return function(e,n){var r=t((e=Di(e)).h,(n=Di(n)).h),i=ne(e.c,n.c),s=ne(e.l,n.l),o=ne(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const md=pd(Cc);function Rc(t){return function e(n){n=+n;function r(i,s){var o=t((i=Jt(i)).h,(s=Jt(s)).h),a=ne(i.s,s.s),l=ne(i.l,s.l),c=ne(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}Rc(Cc);var Ss=Rc(ne),Fe=0,cn=0,Ze=0,Lc=1e3,dr,ln,pr=0,he=0,Ts=0,Cs=typeof performance=="object"&&performance.now?performance:Date,Pc=typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){setTimeout(t,17)};function zr(){return he||(Pc(gd),he=Cs.now()+Ts)}function gd(){he=0}function mr(){this._call=this._time=this._next=null}mr.prototype=Ic.prototype={constructor:mr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?zr():+n)+(e==null?0:+e),!this._next&&ln!==this&&(ln?ln._next=this:dr=this,ln=this),this._call=t,this._time=n,Ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ui())}};function Ic(t,e,n){var r=new mr;return r.restart(t,e,n),r}function yd(){zr(),++Fe;for(var t=dr,e;t;)(e=he-t._time)>=0&&t._call.call(null,e),t=t._next;--Fe}function Bo(){he=(pr=Cs.now())+Ts,Fe=cn=0;try{yd()}finally{Fe=0,vd(),he=0}}function _d(){var t=Cs.now(),e=t-pr;e>Lc&&(Ts-=e,pr=t)}function vd(){for(var t,e=dr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:dr=n);ln=t,Ui(r)}function Ui(t){if(!Fe){cn&&(cn=clearTimeout(cn));var e=t-he;e>24?(t<1/0&&(cn=setTimeout(Bo,e)),Ze&&(Ze=clearInterval(Ze))):(Ze||(pr=he,Ze=setInterval(_d,Lc)),Fe=1,Pc(Bo))}}function Fo(t,e,n){var r=new mr;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var bd=oc("start","end","interrupt"),wd=[],Dc=0,Hi=1,gr=2,fi=3,Uo=4,$i=5,Qn=6;function qr(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;xd(t,n,{name:e,index:r,group:i,on:bd,tween:wd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Dc})}function Ms(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Dc)throw new Error("too late");return n}function we(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>gr)throw new Error("too late");return n}function oe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function xd(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ic(s,0,n.time);function s(c){n.state=Hi,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==Hi)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===fi)return Fo(o);d.state===Uo?(d.state=Qn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Qn,d.timer.stop(),delete r[u])}if(Fo(function(){n.state===fi&&(n.state=Uo,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=gr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===gr){for(n.state=fi,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=$i,1),f=-1,h=i.length;++f<h;)i[f].call(null,u);n.state===$i&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Qn,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function kd(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>gr&&r.state<$i,r.state=Qn,r.timer.stop(),i&&r.on.call("interrupt",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Ad(t){return this.each(function(){kd(this,t)})}function Ed(t,e){var n,r;return function(){var i=we(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Sd(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=we(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function Td(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=oe(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Ed:Sd)(n,t,e))}function Os(t,e,n){var r=t._id;return t.each(function(){var i=we(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return oe(i,r).value[e]}}function Bc(t,e){var n;return(typeof e=="number"?Ht:e instanceof ve?hr:(n=ve(e))?(e=n,hr):Mc)(t,e)}function Cd(t){return function(){this.removeAttribute(t)}}function Md(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Od(t,e,n){var r,i;return function(){var s=this.getAttribute(t);return s===n?null:s===r?i:i=e(r=s,n)}}function Nd(t,e,n){var r,i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===r?i:i=e(r=s,n)}}function Rd(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function Ld(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function Pd(t,e){var n=Ur(t),r=n==="transform"?dd:Bc;return this.attrTween(t,typeof e=="function"?(n.local?Ld:Rd)(n,r,Os(this,"attr."+t,e)):e==null?(n.local?Md:Cd)(n):(n.local?Nd:Od)(n,r,e))}function Id(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttributeNS(t.space,t.local,i(s))}}return n._value=e,n}function Dd(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttribute(t,i(s))}}return n._value=e,n}function Bd(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ur(t);return this.tween(n,(r.local?Id:Dd)(r,e))}function Fd(t,e){return function(){Ms(this,t).delay=+e.apply(this,arguments)}}function Ud(t,e){return e=+e,function(){Ms(this,t).delay=e}}function Hd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fd:Ud)(e,t)):oe(this.node(),e).delay}function $d(t,e){return function(){we(this,t).duration=+e.apply(this,arguments)}}function zd(t,e){return e=+e,function(){we(this,t).duration=e}}function qd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$d:zd)(e,t)):oe(this.node(),e).duration}function Gd(t,e){if(typeof e!="function")throw new Error;return function(){we(this,t).ease=e}}function Wd(t){var e=this._id;return arguments.length?this.each(Gd(e,t)):oe(this.node(),e).ease}function Vd(t){typeof t!="function"&&(t=lc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Xt(r,this._parents,this._name,this._id)}function Yd(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Xt(o,this._parents,this._name,this._id)}function jd(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Kd(t,e,n){var r,i,s=jd(e)?Ms:we;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function Jd(t,e){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(t):this.each(Kd(n,t,e))}function Xd(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Zd(){return this.on("end.remove",Xd(this._id))}function Qd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_s(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,qr(c[h],e,n,h,c,oe(u,n)));return new Xt(s,this._parents,e,n)}function tp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hc(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,p=oe(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&qr(d,e,n,m,h,p);s.push(h),o.push(u)}return new Xt(s,o,e,n)}var ep=Mn.prototype.constructor;function np(){return new ep(this._groups,this._parents)}function rp(t,e){var n,r,i;return function(){var s=Cn(this).getComputedStyle(this,null),o=s.getPropertyValue(t),a=(this.style.removeProperty(t),s.getPropertyValue(t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function ip(t){return function(){this.style.removeProperty(t)}}function sp(t,e,n){var r,i;return function(){var s=Cn(this).getComputedStyle(this,null).getPropertyValue(t);return s===n?null:s===r?i:i=e(r=s,n)}}function op(t,e,n){var r,i,s;return function(){var o=Cn(this).getComputedStyle(this,null),a=o.getPropertyValue(t),l=n(this);return l==null&&(l=(this.style.removeProperty(t),o.getPropertyValue(t))),a===l?null:a===r&&l===i?s:s=e(r=a,i=l)}}function ap(t,e,n){var r=(t+="")=="transform"?hd:Bc;return e==null?this.styleTween(t,rp(t,r)).on("end.style."+t,ip(t)):this.styleTween(t,typeof e=="function"?op(t,r,Os(this,"style."+t,e)):sp(t,r,e),n)}function cp(t,e,n){function r(){var i=this,s=e.apply(i,arguments);return s&&function(o){i.style.setProperty(t,s(o),n)}}return r._value=e,r}function lp(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,cp(t,e,n??""))}function up(t){return function(){this.textContent=t}}function fp(t){return function(){var e=t(this);this.textContent=e??""}}function hp(t){return this.tween("text",typeof t=="function"?fp(Os(this,"text",t)):up(t==null?"":t+""))}function dp(){for(var t=this._name,e=this._id,n=Fc(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=oe(l,e);qr(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Xt(r,this._parents,t,n)}var pp=0;function Xt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Fc(){return++pp}var Se=Mn.prototype;Xt.prototype={constructor:Xt,select:Qd,selectAll:tp,filter:Vd,merge:Yd,selection:np,transition:dp,call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:Jd,attr:Pd,attrTween:Bd,style:ap,styleTween:lp,text:hp,remove:Zd,tween:Td,delay:Hd,duration:qd,ease:Wd};function mp(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ns=3;(function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n})(Ns);(function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n})(Ns);(function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n})(Ns);var Rs=1.70158;(function t(e){e=+e;function n(r){return r*r*((e+1)*r-e)}return n.overshoot=t,n})(Rs);(function t(e){e=+e;function n(r){return--r*r*((e+1)*r+e)+1}return n.overshoot=t,n})(Rs);(function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n})(Rs);var Ue=2*Math.PI,Ls=1,Ps=.3;(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ue);function i(s){return e*Math.pow(2,10*--s)*Math.sin((r-s)/n)}return i.amplitude=function(s){return t(s,n*Ue)},i.period=function(s){return t(e,s)},i})(Ls,Ps);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ue);function i(s){return 1-e*Math.pow(2,-10*(s=+s))*Math.sin((s+r)/n)}return i.amplitude=function(s){return t(s,n*Ue)},i.period=function(s){return t(e,s)},i})(Ls,Ps);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ue);function i(s){return((s=s*2-1)<0?e*Math.pow(2,10*s)*Math.sin((r-s)/n):2-e*Math.pow(2,-10*s)*Math.sin((r+s)/n))/2}return i.amplitude=function(s){return t(s,n*Ue)},i.period=function(s){return t(e,s)},i})(Ls,Ps);var zi={time:null,delay:0,duration:250,ease:mp};function gp(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return zi.time=zr(),zi;return n}function yp(t){var e,n;t instanceof Xt?(e=t._id,t=t._name):(e=Fc(),(n=zi).time=zr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&qr(l,t,e,c,o,n||gp(l,e));return new Xt(r,this._parents,t,e)}Mn.prototype.interrupt=Ad;Mn.prototype.transition=yp;var _p=[null];function vp(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>Hi&&r.name===e)return new Xt([[t]],_p,e,+i)}return null}var qi=Math.PI,Gi=2*qi,Ce=1e-6,bp=Gi-Ce;function Wi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Uc(){return new Wi}Wi.prototype=Uc.prototype={constructor:Wi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Ce)if(!(Math.abs(u*a-l*c)>Ce)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=r-o,p=a*a+l*l,m=h*h+d*d,g=Math.sqrt(p),x=Math.sqrt(f),A=i*Math.tan((qi-Math.acos((p+f-m)/(2*g*x)))/2),k=A/x,R=A/g;Math.abs(k-1)>Ce&&(this._+="L"+(t+k*c)+","+(e+k*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+R*a)+","+(this._y1=e+R*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Ce||Math.abs(this._y1-c)>Ce)&&(this._+="L"+l+","+c),n&&(f>bp?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):(f<0&&(f=f%Gi+Gi),this._+="A"+n+","+n+",0,"+ +(f>=qi)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Lt="$";function yr(){}yr.prototype=_r.prototype={constructor:yr,has:function(t){return Lt+t in this},get:function(t){return this[Lt+t]},set:function(t,e){return this[Lt+t]=e,this},remove:function(t){var e=Lt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Lt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Lt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Lt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Lt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Lt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Lt)return!1;return!0},each:function(t){for(var e in this)e[0]===Lt&&t(this[e],e.slice(1),this)}};function _r(t,e){var n=new yr;if(t instanceof yr)t.each(function(a,l){n.set(l,a)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Ho(){}var ge=_r.prototype;Ho.prototype={constructor:Ho,has:ge.has,add:function(t){return t+="",this[Lt+t]=t,this},remove:ge.remove,clear:ge.clear,values:ge.keys,size:ge.size,empty:ge.empty,each:ge.each};function Hc(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function wp(t,e){var n=Hc(t);return function(r,i){return e(n(r),i,t)}}function xp(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function $c(t){var e=new RegExp('["'+t+`
]`),n=t.charCodeAt(0);function r(c,u){var f,h,d=i(c,function(p,m){if(f)return f(p,m-1);h=p,f=u?wp(p,u):Hc(p)});return d.columns=h,d}function i(c,u){var f={},h={},d=[],p=c.length,m=0,g=0,x,A;function k(){if(m>=p)return h;if(A)return A=!1,f;var N=m,v;if(c.charCodeAt(N)===34){for(var _=N;_++<p;)if(c.charCodeAt(_)===34){if(c.charCodeAt(_+1)!==34)break;++_}return m=_+2,v=c.charCodeAt(_+1),v===13?(A=!0,c.charCodeAt(_+2)===10&&++m):v===10&&(A=!0),c.slice(N+1,_).replace(/""/g,'"')}for(;m<p;){var y=1;if(v=c.charCodeAt(m++),v===10)A=!0;else if(v===13)A=!0,c.charCodeAt(m)===10&&(++m,++y);else if(v!==n)continue;return c.slice(N,m-y)}return c.slice(N)}for(;(x=k())!==h;){for(var R=[];x!==f&&x!==h;)R.push(x),x=k();u&&(R=u(R,g++))==null||d.push(R)}return d}function s(c,u){return u==null&&(u=xp(c)),[u.map(l).join(t)].concat(c.map(function(f){return u.map(function(h){return l(f[h])}).join(t)})).join(`
`)}function o(c){return c.map(a).join(`
`)}function a(c){return c.map(l).join(t)}function l(c){return c==null?"":e.test(c+="")?'"'+c.replace(/\"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatRows:o}}$c(",");$c("	");function kp(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return zc(this.cover(e,n),e,n,t)}function zc(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,m,g,x,A;if(!s)return t._root=o,t;for(;s.length;)if((m=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[x=g<<1|m]))return i[x]=o,t;if(d=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===d&&n===p)return o.next=s,i?i[x]=o:t._root=o,t;do i=i?i[x]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h;while((x=g<<1|m)===(A=(p>=h)<<1|d>=f));return i[A]=s,i[x]=o,t}function Ap(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));for(u<l&&(l=this._x0,u=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(l,c).cover(u,f),n=0;n<r;++n)zc(this,o[n],a[n],t[n]);return this}function Ep(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else if(n>t||t>i||r>e||e>s){var o=i-n,a=this._root,l,c;switch(c=(e<(r+s)/2)<<1|t<(n+i)/2){case 0:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,s=r+o,t>i||e>s);break}case 1:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,s=r+o,n>t||e>s);break}case 2:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,r=s-o,t>i||r>e);break}case 3:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,r=s-o,n>t||r>e);break}}this._root&&this._root.length&&(this._root=a)}else return this;return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Sp(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Tp(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Et(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Cp(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,m;for(d&&h.push(new Et(d,i,s,u,f)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(a=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var g=(o+l)/2,x=(a+c)/2;h.push(new Et(d[3],g,x,l,c),new Et(d[2],o,x,g,c),new Et(d[1],g,a,l,x),new Et(d[0],o,a,g,x)),(m=(e>=x)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=p)}else{var A=t-+this._x.call(null,d.data),k=e-+this._y.call(null,d.data),R=A*A+k*k;if(R<n){var N=Math.sqrt(n=R);i=t-N,s=e-N,u=t+N,f=e+N,r=d.data}}return r}function Mp(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,m,g,x;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(m=f>=(d=(a+c)/2))?a=d:c=d,e=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,x=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Op(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Np(){return this._root}function Rp(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Lp(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new Et(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new Et(i,c,u,a,l)),(i=r[2])&&e.push(new Et(i,s,u,c,l)),(i=r[1])&&e.push(new Et(i,c,o,a,u)),(i=r[0])&&e.push(new Et(i,s,o,c,u))}return this}function Pp(t){var e=[],n=[],r;for(this._root&&e.push(new Et(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(a+c)/2;(s=i[0])&&e.push(new Et(s,o,a,u,f)),(s=i[1])&&e.push(new Et(s,u,a,l,f)),(s=i[2])&&e.push(new Et(s,o,f,u,c)),(s=i[3])&&e.push(new Et(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Ip(t){return arguments.length?(this._x=t,this):this._x}function Dp(t){return arguments.length?(this._y=t,this):this._y}function qc(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function $o(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ct=qc.prototype;Ct.copy=function(){var t=new qc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=$o(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=$o(r));return t};Ct.add=kp;Ct.addAll=Ap;Ct.cover=Ep;Ct.data=Sp;Ct.extent=Tp;Ct.find=Cp;Ct.remove=Mp;Ct.removeAll=Op;Ct.root=Np;Ct.size=Rp;Ct.visit=Lp;Ct.visitAfter=Pp;Ct.x=Ip;Ct.y=Dp;function vr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function He(t){return t=vr(Math.abs(t)),t?t[1]:NaN}function Bp(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Fp(t,e){t=t.toPrecision(e);t:for(var n=t.length,r=1,i=-1,s;r<n;++r)switch(t[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break t;default:i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var Gc;function Up(t,e){var n=vr(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Gc=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+vr(t,Math.max(0,e+s-1))[0]}function zo(t,e){var n=vr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Wc={"":Fp,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return zo(t*100,e)},r:zo,s:Up,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var Hp=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Vi(t){return new Vc(t)}function Vc(t){if(!(e=Hp.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",o=!!e[5],a=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";u==="n"?(l=!0,u="g"):Wc[u]||(u=""),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=c,this.type=u}Vc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var qo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $p(t){return t}function zp(t){var e=t.grouping&&t.thousands?Bp(t.grouping,t.thousands):$p,n=t.currency,r=t.decimal;function i(o){o=Vi(o);var a=o.fill,l=o.align,c=o.sign,u=o.symbol,f=o.zero,h=o.width,d=o.comma,p=o.precision,m=o.type,g=u==="$"?n[0]:u==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x=u==="$"?n[1]:/[%p]/.test(m)?"%":"",A=Wc[m],k=!m||/[defgprs%]/.test(m);p=p==null?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function R(N){var v=g,_=x,y,P,q;if(m==="c")_=A(N)+_,N="";else{N=+N;var V=(N<0||1/N<0)&&(N*=-1,!0);if(N=A(N,p),V){for(y=-1,P=N.length,V=!1;++y<P;)if(q=N.charCodeAt(y),48<q&&q<58||m==="x"&&96<q&&q<103||m==="X"&&64<q&&q<71){V=!0;break}}if(v=(V?c==="("?c:"-":c==="-"||c==="("?"":c)+v,_=_+(m==="s"?qo[8+Gc/3]:"")+(V&&c==="("?")":""),k){for(y=-1,P=N.length;++y<P;)if(q=N.charCodeAt(y),48>q||q>57){_=(q===46?r+N.slice(y+1):N.slice(y))+_,N=N.slice(0,y);break}}}d&&!f&&(N=e(N,1/0));var Q=v.length+N.length+_.length,j=Q<h?new Array(h-Q+1).join(a):"";switch(d&&f&&(N=e(j+N,j.length?h-_.length:1/0),j=""),l){case"<":return v+N+_+j;case"=":return v+j+N+_;case"^":return j.slice(0,Q=j.length>>1)+v+N+_+j.slice(Q)}return j+v+N+_}return R.toString=function(){return o+""},R}function s(o,a){var l=i((o=Vi(o),o.type="f",o)),c=Math.max(-8,Math.min(8,Math.floor(He(a)/3)))*3,u=Math.pow(10,-c),f=qo[8+c/3];return function(h){return l(u*h)+f}}return{format:i,formatPrefix:s}}var zn,Yc,jc;qp({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function qp(t){return zn=zp(t),Yc=zn.format,jc=zn.formatPrefix,zn}function Gp(t){return Math.max(0,-He(Math.abs(t)))}function Wp(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(He(e)/3)))*3-He(Math.abs(t)))}function Vp(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,He(e)-He(t))+1}function xe(){return new br}function br(){this.reset()}br.prototype={constructor:br,reset:function(){this.s=this.t=0},add:function(t){Go(qn,t,this.t),Go(this,qn.s,this.s),this.s?this.t+=qn.t:this.s=qn.t},valueOf:function(){return this.s}};var qn=new br;function Go(t,e,n){var r=t.s=e+n,i=r-e,s=r-i;t.t=e-s+(n-i)}var Yi=Math.PI,Wo=Yi*2;xe();xe();xe();function Vo(t,e){return[t>Yi?t-Wo:t<-Yi?t+Wo:t,e]}Vo.invert=Vo;xe();xe();xe();xe();function Yo(){}Yo.prototype={constructor:Yo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function jo(t,e){return[t,e]}jo.invert=jo;function Yp(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function jp(){return this.eachAfter(Yp)}function Kp(t){var e=this,n,r=[e],i,s,o;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length);return this}function Jp(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function Xp(t){for(var e=this,n=[e],r=[],i,s,o;e=n.pop();)if(r.push(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)n.push(i[s]);for(;e=r.pop();)t(e);return this}function Zp(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Qp(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function tm(t){for(var e=this,n=em(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function em(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function nm(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function rm(){var t=[];return this.each(function(e){t.push(e)}),t}function im(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function sm(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Kc(t,e){var n=new kn(t),r=+t.value&&(n.value=t.value),i,s=[n],o,a,l,c;for(e==null&&(e=am);i=s.pop();)if(r&&(i.value=+i.data.value),(a=e(i.data))&&(c=a.length))for(i.children=new Array(c),l=c-1;l>=0;--l)s.push(o=i.children[l]=new kn(a[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(lm)}function om(){return Kc(this).eachBefore(cm)}function am(t){return t.children}function cm(t){t.data=t.data.data}function lm(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function kn(t){this.data=t,this.depth=this.height=0,this.parent=null}kn.prototype=Kc.prototype={constructor:kn,count:jp,each:Kp,eachAfter:Xp,eachBefore:Jp,sum:Zp,sort:Qp,path:tm,ancestors:nm,descendants:rm,leaves:im,links:sm,copy:om};function Jc(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}Object.create(kn.prototype);function Xc(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(i-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var Zc=(1+Math.sqrt(5))/2;function Qc(t,e,n,r,i,s){for(var o=[],a=e.children,l,c,u=0,f=0,h=a.length,d,p,m=e.value,g,x,A,k,R,N,v;u<h;){d=i-n,p=s-r;do g=a[f++].value;while(!g&&f<h);for(x=A=g,N=Math.max(p/d,d/p)/(m*t),v=g*g*N,R=Math.max(A/v,v/x);f<h;++f){if(g+=c=a[f].value,c<x&&(x=c),c>A&&(A=c),v=g*g*N,k=Math.max(A/v,v/x),k>R){g-=c;break}R=k}o.push(l={value:g,dice:d<p,children:a.slice(u,f)}),l.dice?Jc(l,n,r,i,m?r+=p*g/m:s):Xc(l,n,r,m?n+=d*g/m:i,s),m-=g,u=f}return o}(function t(e){function n(r,i,s,o,a){Qc(e,r,i,s,o,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Zc);(function t(e){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,p=l.length,m=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?Jc(c,i,s,o,s+=(a-s)*c.value/m):Xc(c,i,s,i+=(o-i)*c.value/m,a),m-=c.value}else r._squarify=l=Qc(e,r,i,s,o,a),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Zc);var um=[].slice,fm={};function Ko(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}Ko.prototype={constructor:Ko,defer:function(t){if(typeof t!="function"||this._call)throw new Error;if(this._error!=null)return this;var e=um.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),tl(this),this},abort:function(){return this._error==null&&Is(this,new Error("abort")),this},await:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},wr(this),this},awaitAll:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=t,wr(this),this}};function tl(t){if(!t._start)try{hm(t)}catch(e){if(t._tasks[t._ended+t._active-1])Is(t,e);else if(!t._data)throw e}}function hm(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=dm(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||fm)}}function dm(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,t._error==null&&(n!=null?Is(t,n):(t._data[e]=r,t._waiting?tl(t):wr(t))))}}function Is(t,e){var n=t._tasks.length,r;for(t._error=e,t._data=void 0,t._waiting=NaN;--n>=0;)if((r=t._tasks[n])&&(t._tasks[n]=null,r.abort))try{r.abort()}catch{}t._active=NaN,wr(t)}function wr(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}var el=Array.prototype,pm=el.map,xr=el.slice,Jo={name:"implicit"};function nl(t){var e=_r(),n=[],r=Jo;t=t==null?[]:xr.call(t);function i(s){var o=s+"",a=e.get(o);if(!a){if(r!==Jo)return r;e.set(o,a=n.push(s))}return t[(a-1)%t.length]}return i.domain=function(s){if(!arguments.length)return n.slice();n=[],e=_r();for(var o=-1,a=s.length,l,c;++o<a;)e.has(c=(l=s[o])+"")||e.set(c,n.push(l));return i},i.range=function(s){return arguments.length?(t=xr.call(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return nl().domain(n).range(t).unknown(r)},i}function Gr(){var t=nl().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,o=!1,a=0,l=0,c=.5;delete t.unknown;function u(){var f=e().length,h=r[1]<r[0],d=r[h-0],p=r[1-h];i=(p-d)/Math.max(1,f-a+l*2),o&&(i=Math.floor(i)),d+=(p-d-i*(f-a))*c,s=i*(1-a),o&&(d=Math.round(d),s=Math.round(s));var m=$t(f).map(function(g){return d+i*g});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(o=!!f,u()):o},t.padding=function(f){return arguments.length?(a=l=Math.max(0,Math.min(1,f)),u()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.copy=function(){return Gr().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function rl(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rl(e())},t}function mm(){return rl(Gr().paddingInner(1))}function gm(t){return function(){return t}}function ym(t){return+t}var Xo=[0,1];function il(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gm(e)}function _m(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=e?0:i>=n?1:r(i)}}}function vm(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=0?e:i>=1?n:r(i)}}}function bm(t,e,n,r){var i=t[0],s=t[1],o=e[0],a=e[1];return s<i?(i=n(s,i),o=r(a,o)):(i=n(i,s),o=r(o,a)),function(l){return o(i(l))}}function wm(t,e,n,r){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=n(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=ff(t,l,1,i)-1;return o[c](s[c](l))}}function xm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function km(t,e){var n=Xo,r=Xo,i=Es,s=!1,o,a,l;function c(){return o=Math.min(n.length,r.length)>2?wm:bm,a=l=null,u}function u(f){return(a||(a=o(n,r,s?_m(t):t,i)))(+f)}return u.invert=function(f){return(l||(l=o(r,n,il,s?vm(e):e)))(+f)},u.domain=function(f){return arguments.length?(n=pm.call(f,ym),c()):n.slice()},u.range=function(f){return arguments.length?(r=xr.call(f),c()):r.slice()},u.rangeRound=function(f){return r=xr.call(f),i=ld,c()},u.clamp=function(f){return arguments.length?(s=!!f,c()):s},u.interpolate=function(f){return arguments.length?(i=f,c()):i},c()}function Am(t,e,n){var r=t[0],i=t[t.length-1],s=lr(r,i,e??10),o;switch(n=Vi(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(i));return n.precision==null&&!isNaN(o=Wp(s,a))&&(n.precision=o),jc(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Vp(s,Math.max(Math.abs(r),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Gp(s))&&(n.precision=o-(n.type==="%")*2);break}}return Yc(n)}function Em(t){var e=t.domain;return t.ticks=function(n){var r=e();return mf(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){return Am(e(),n,r)},t.nice=function(n){var r=e(),i=r.length-1,s=n??10,o=r[0],a=r[i],l=lr(o,a,s);return l&&(l=lr(Math.floor(o/l)*l,Math.ceil(a/l)*l,s),r[0]=Math.floor(o/l)*l,r[i]=Math.ceil(a/l)*l,e(r)),t},t}function re(){var t=km(il,Ht);return t.copy=function(){return xm(t,re())},Em(t)}var hi=new Date,di=new Date;function wt(t,e,n,r){function i(s){return t(s=new Date(+s)),s}return i.floor=i,i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(new Date(+s));while(e(s,a),t(s),s<o);return l},i.filter=function(s){return wt(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return hi.setTime(+s),di.setTime(+o),t(hi),t(di),Math.floor(n(hi,di))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var ji=wt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ji.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ji};ji.range;var Gn=1e3,ee=6e4,ue=36e5,sl=864e5,ol=6048e5,Sm=wt(function(t){t.setTime(Math.floor(t/Gn)*Gn)},function(t,e){t.setTime(+t+e*Gn)},function(t,e){return(e-t)/Gn},function(t){return t.getUTCSeconds()});Sm.range;var Tm=wt(function(t){t.setTime(Math.floor(t/ee)*ee)},function(t,e){t.setTime(+t+e*ee)},function(t,e){return(e-t)/ee},function(t){return t.getMinutes()});Tm.range;var Cm=wt(function(t){var e=t.getTimezoneOffset()*ee%ue;e<0&&(e+=ue),t.setTime(Math.floor((+t-e)/ue)*ue+e)},function(t,e){t.setTime(+t+e*ue)},function(t,e){return(e-t)/ue},function(t){return t.getHours()});Cm.range;var al=wt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ee)/sl},function(t){return t.getDate()-1});al.range;function ke(t){return wt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ee)/ol})}var cl=ke(0),ll=ke(1),Mm=ke(2),Om=ke(3),Nm=ke(4),Rm=ke(5),Lm=ke(6);cl.range;ll.range;Mm.range;Om.range;Nm.range;Rm.range;Lm.range;var Pm=wt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});Pm.range;var Nn=wt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Nn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:wt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};Nn.range;var Im=wt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ee)},function(t,e){return(e-t)/ee},function(t){return t.getUTCMinutes()});Im.range;var Dm=wt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ue)},function(t,e){return(e-t)/ue},function(t){return t.getUTCHours()});Dm.range;var ul=wt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/sl},function(t){return t.getUTCDate()-1});ul.range;function Ae(t){return wt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/ol})}var fl=Ae(0),hl=Ae(1),Bm=Ae(2),Fm=Ae(3),Um=Ae(4),Hm=Ae(5),$m=Ae(6);fl.range;hl.range;Bm.range;Fm.range;Um.range;Hm.range;$m.range;var zm=wt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});zm.range;var Rn=wt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Rn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:wt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};Rn.range;function qm(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mi(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Gm(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Qe(i),u=tn(i),f=Qe(s),h=tn(s),d=Qe(o),p=tn(o),m=Qe(a),g=tn(a),x=Qe(l),A=tn(l),k={a:Z,A:X,b:B,B:S,c:null,d:ea,e:ea,H:og,I:ag,j:cg,L:lg,m:ug,M:fg,p:C,S:hg,U:dg,w:pg,W:mg,x:null,X:null,y:gg,Y:yg,Z:_g,"%":ra},R={a:M,A:T,b:O,B:z,c:null,d:na,e:na,H:vg,I:bg,j:wg,L:xg,m:kg,M:Ag,p:Y,S:Eg,U:Sg,w:Tg,W:Cg,x:null,X:null,y:Mg,Y:Og,Z:Ng,"%":ra},N={a:q,A:V,b:Q,B:j,c:$,d:Qo,e:Qo,H:ta,I:ta,j:eg,L:ig,m:tg,M:ng,p:P,S:rg,U:Km,w:jm,W:Jm,x:K,X:H,y:Zm,Y:Xm,Z:Qm,"%":sg};k.x=v(n,k),k.X=v(r,k),k.c=v(e,k),R.x=v(n,R),R.X=v(r,R),R.c=v(e,R);function v(E,F){return function(U){var W=[],at=-1,xt=0,D=E.length,G,ct,w;for(U instanceof Date||(U=new Date(+U));++at<D;)E.charCodeAt(at)===37&&(W.push(E.slice(xt,at)),(ct=Zo[G=E.charAt(++at)])!=null?G=E.charAt(++at):ct=G==="e"?" ":"0",(w=F[G])&&(G=w(U,ct)),W.push(G),xt=at+1);return W.push(E.slice(xt,at)),W.join("")}}function _(E,F){return function(U){var W=mi(1900),at=y(W,E,U+="",0);if(at!=U.length)return null;if("p"in W&&(W.H=W.H%12+W.p*12),"W"in W||"U"in W){"w"in W||(W.w="W"in W?1:0);var xt="Z"in W?pi(mi(W.y)).getUTCDay():F(mi(W.y)).getDay();W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(xt+5)%7:W.w+W.U*7-(xt+6)%7}return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,pi(W)):F(W)}}function y(E,F,U,W){for(var at=0,xt=F.length,D=U.length,G,ct;at<xt;){if(W>=D)return-1;if(G=F.charCodeAt(at++),G===37){if(G=F.charAt(at++),ct=N[G in Zo?F.charAt(at++):G],!ct||(W=ct(E,U,W))<0)return-1}else if(G!=U.charCodeAt(W++))return-1}return W}function P(E,F,U){var W=c.exec(F.slice(U));return W?(E.p=u[W[0].toLowerCase()],U+W[0].length):-1}function q(E,F,U){var W=d.exec(F.slice(U));return W?(E.w=p[W[0].toLowerCase()],U+W[0].length):-1}function V(E,F,U){var W=f.exec(F.slice(U));return W?(E.w=h[W[0].toLowerCase()],U+W[0].length):-1}function Q(E,F,U){var W=x.exec(F.slice(U));return W?(E.m=A[W[0].toLowerCase()],U+W[0].length):-1}function j(E,F,U){var W=m.exec(F.slice(U));return W?(E.m=g[W[0].toLowerCase()],U+W[0].length):-1}function $(E,F,U){return y(E,e,F,U)}function K(E,F,U){return y(E,n,F,U)}function H(E,F,U){return y(E,r,F,U)}function Z(E){return o[E.getDay()]}function X(E){return s[E.getDay()]}function B(E){return l[E.getMonth()]}function S(E){return a[E.getMonth()]}function C(E){return i[+(E.getHours()>=12)]}function M(E){return o[E.getUTCDay()]}function T(E){return s[E.getUTCDay()]}function O(E){return l[E.getUTCMonth()]}function z(E){return a[E.getUTCMonth()]}function Y(E){return i[+(E.getUTCHours()>=12)]}return{format:function(E){var F=v(E+="",k);return F.toString=function(){return E},F},parse:function(E){var F=_(E+="",qm);return F.toString=function(){return E},F},utcFormat:function(E){var F=v(E+="",R);return F.toString=function(){return E},F},utcParse:function(E){var F=_(E,pi);return F.toString=function(){return E},F}}}var Zo={"-":"",_:" ",0:"0"},Ft=/^\s*\d+/,Wm=/^%/,Vm=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function ut(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Ym(t){return t.replace(Vm,"\\$&")}function Qe(t){return new RegExp("^(?:"+t.map(Ym).join("|")+")","i")}function tn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function jm(t,e,n){var r=Ft.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Km(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Jm(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xm(t,e,n){var r=Ft.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Zm(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qm(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function tg(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qo(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function eg(t,e,n){var r=Ft.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ta(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ng(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rg(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ig(t,e,n){var r=Ft.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function sg(t,e,n){var r=Wm.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ea(t,e){return ut(t.getDate(),e,2)}function og(t,e){return ut(t.getHours(),e,2)}function ag(t,e){return ut(t.getHours()%12||12,e,2)}function cg(t,e){return ut(1+al.count(Nn(t),t),e,3)}function lg(t,e){return ut(t.getMilliseconds(),e,3)}function ug(t,e){return ut(t.getMonth()+1,e,2)}function fg(t,e){return ut(t.getMinutes(),e,2)}function hg(t,e){return ut(t.getSeconds(),e,2)}function dg(t,e){return ut(cl.count(Nn(t),t),e,2)}function pg(t){return t.getDay()}function mg(t,e){return ut(ll.count(Nn(t),t),e,2)}function gg(t,e){return ut(t.getFullYear()%100,e,2)}function yg(t,e){return ut(t.getFullYear()%1e4,e,4)}function _g(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ut(e/60|0,"0",2)+ut(e%60,"0",2)}function na(t,e){return ut(t.getUTCDate(),e,2)}function vg(t,e){return ut(t.getUTCHours(),e,2)}function bg(t,e){return ut(t.getUTCHours()%12||12,e,2)}function wg(t,e){return ut(1+ul.count(Rn(t),t),e,3)}function xg(t,e){return ut(t.getUTCMilliseconds(),e,3)}function kg(t,e){return ut(t.getUTCMonth()+1,e,2)}function Ag(t,e){return ut(t.getUTCMinutes(),e,2)}function Eg(t,e){return ut(t.getUTCSeconds(),e,2)}function Sg(t,e){return ut(fl.count(Rn(t),t),e,2)}function Tg(t){return t.getUTCDay()}function Cg(t,e){return ut(hl.count(Rn(t),t),e,2)}function Mg(t,e){return ut(t.getUTCFullYear()%100,e,2)}function Og(t,e){return ut(t.getUTCFullYear()%1e4,e,4)}function Ng(){return"+0000"}function ra(){return"%"}var Te,dl,pl;Rg({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rg(t){return Te=Gm(t),Te.format,Te.parse,dl=Te.utcFormat,pl=Te.utcParse,Te}var ml="%Y-%m-%dT%H:%M:%S.%LZ";function Lg(t){return t.toISOString()}Date.prototype.toISOString||dl(ml);function Pg(t){var e=new Date(t);return isNaN(e)?null:e}+new Date("2000-01-01T00:00:00.000Z")||pl(ml);function me(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}me("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");me("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");me("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");me("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");Ss(Jt(300,.5,0),Jt(-240,.5,1));Ss(Jt(-100,.75,.35),Jt(80,1.5,.8));Ss(Jt(260,.75,.35),Jt(80,1.5,.8));Jt();function Wr(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Wr(me("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Wr(me("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Wr(me("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));Wr(me("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Wn(t){return function(){return t}}var ia=1e-12;function gl(t){this._context=t}gl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ig(t){return new gl(t)}function Dg(t){return t[0]}function Bg(t){return t[1]}function yl(){var t=Dg,e=Bg,n=Wn(!0),r=null,i=Ig,s=null;function o(a){var l,c=a.length,u,f=!1,h;for(r==null&&(s=i(h=Uc())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,l,a),+e(u,l,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Wn(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Wn(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Wn(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function kr(){}function sa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ds(t){this._context=t}Ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _l(t,e){this._basis=new Ds(t),this._beta=e}_l.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new Ds(r):new _l(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Ar(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Bs(t,e){this._context=t,this._k=(1-e)/6}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ar(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ar(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Bs(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Fs(t,e){this._context=t,this._k=(1-e)/6}Fs.prototype={areaStart:kr,areaEnd:kr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ar(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Fs(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Us(t,e){this._context=t,this._k=(1-e)/6}Us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ar(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Us(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Hs(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>ia){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ia){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function vl(t,e){this._context=t,this._alpha=e}vl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Hs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new vl(r,e):new Bs(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function bl(t,e){this._context=t,this._alpha=e}bl.prototype={areaStart:kr,areaEnd:kr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Hs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new bl(r,e):new Fs(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function wl(t,e){this._context=t,this._alpha=e}wl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new wl(r,e):new Us(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function oa(t){return t<0?-1:1}function aa(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(oa(s)+oa(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function ca(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function gi(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Ki(t){this._context=t}Ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gi(this,this._t0,ca(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,gi(this,ca(this,n=aa(this,t,e)),n);break;default:gi(this,this._t0,n=aa(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(Ki.prototype).point=function(t,e){Ki.prototype.point.call(this,e,t)};function Er(){this._=null}function Vr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Er.prototype={constructor:Er,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=la(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(en(this,n),t=n,n=t.U),n.C=!1,r.C=!0,nn(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(nn(this,n),t=n,n=t.U),n.C=!1,r.C=!0,en(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,o;if(r?i?s=la(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(o=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(o=t.C,t=s),t&&(t.U=e),!o){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,en(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,nn(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,en(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,nn(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,en(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,nn(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function en(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function nn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function la(t){for(;t.L;)t=t.L;return t}function un(t,e,n,r){var i=[null,null],s=At.push(i)-1;return i.left=t,i.right=e,n&&Sr(i,t,e,n),r&&Sr(i,e,t,r),Nt[t.index].halfedges.push(s),Nt[e.index].halfedges.push(s),i}function rn(t,e,n){var r=[e,n];return r.left=t,r}function Sr(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function Fg(t,e,n,r,i){var s=t[0],o=t[1],a=s[0],l=s[1],c=o[0],u=o[1],f=0,h=1,d=c-a,p=u-l,m;if(m=e-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=r-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=n-l,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>f&&(f=m)}if(m=i-l,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<h&&(h=m)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[a+f*d,l+f*p]),h<1&&(t[1]=[a+h*d,l+h*p])),!0}}}}}function Ug(t,e,n,r,i){var s=t[1];if(s)return!0;var o=t[0],a=t.left,l=t.right,c=a[0],u=a[1],f=l[0],h=l[1],d=(c+f)/2,p=(u+h)/2,m,g;if(h===u){if(d<e||d>=r)return;if(c>f){if(!o)o=[d,n];else if(o[1]>=i)return;s=[d,i]}else{if(!o)o=[d,i];else if(o[1]<n)return;s=[d,n]}}else if(m=(c-f)/(h-u),g=p-m*d,m<-1||m>1)if(c>f){if(!o)o=[(n-g)/m,n];else if(o[1]>=i)return;s=[(i-g)/m,i]}else{if(!o)o=[(i-g)/m,i];else if(o[1]<n)return;s=[(n-g)/m,n]}else if(u<h){if(!o)o=[e,m*e+g];else if(o[0]>=r)return;s=[r,m*r+g]}else{if(!o)o=[r,m*r+g];else if(o[0]<e)return;s=[e,m*e+g]}return t[0]=o,t[1]=s,!0}function Hg(t,e,n,r){for(var i=At.length,s;i--;)(!Ug(s=At[i],t,e,n,r)||!Fg(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>dt||Math.abs(s[0][1]-s[1][1])>dt))&&delete At[i]}function $g(t){return Nt[t.index]={site:t,halfedges:[]}}function zg(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function xl(t,e){return e[+(e.left!==t.site)]}function qg(t,e){return e[+(e.left===t.site)]}function Gg(){for(var t=0,e=Nt.length,n,r,i,s;t<e;++t)if((n=Nt[t])&&(s=(r=n.halfedges).length)){var o=new Array(s),a=new Array(s);for(i=0;i<s;++i)o[i]=i,a[i]=zg(n,At[r[i]]);for(o.sort(function(l,c){return a[c]-a[l]}),i=0;i<s;++i)a[i]=r[o[i]];for(i=0;i<s;++i)r[i]=a[i]}}function Wg(t,e,n,r){var i=Nt.length,s,o,a,l,c,u,f,h,d,p,m,g,x=!0;for(s=0;s<i;++s)if(o=Nt[s]){for(a=o.site,c=o.halfedges,l=c.length;l--;)At[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)p=qg(o,At[c[l]]),m=p[0],g=p[1],f=xl(o,At[c[++l%u]]),h=f[0],d=f[1],(Math.abs(m-h)>dt||Math.abs(g-d)>dt)&&(c.splice(l,0,At.push(rn(a,p,Math.abs(m-t)<dt&&r-g>dt?[t,Math.abs(h-t)<dt?d:r]:Math.abs(g-r)<dt&&n-m>dt?[Math.abs(d-r)<dt?h:n,r]:Math.abs(m-n)<dt&&g-e>dt?[n,Math.abs(h-n)<dt?d:e]:Math.abs(g-e)<dt&&m-t>dt?[Math.abs(d-e)<dt?h:t,e]:null))-1),++u);u&&(x=!1)}if(x){var A,k,R,N=1/0;for(s=0,x=null;s<i;++s)(o=Nt[s])&&(a=o.site,A=a[0]-t,k=a[1]-e,R=A*A+k*k,R<N&&(N=R,x=o));if(x){var v=[t,e],_=[t,r],y=[n,r],P=[n,e];x.halfedges.push(At.push(rn(a=x.site,v,_))-1,At.push(rn(a,_,y))-1,At.push(rn(a,y,P))-1,At.push(rn(a,P,v))-1)}}for(s=0;s<i;++s)(o=Nt[s])&&(o.halfedges.length||delete Nt[s])}var kl=[],$s;function Vg(){Vr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Oe(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var o=i[0],a=i[1],l=r[0]-o,c=r[1]-a,u=s[0]-o,f=s[1]-a,h=2*(l*f-c*u);if(!(h>=-Xg)){var d=l*l+c*c,p=u*u+f*f,m=(f*d-c*p)/h,g=(l*p-u*d)/h,x=kl.pop()||new Vg;x.arc=t,x.site=i,x.x=m+o,x.y=(x.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=x;for(var A=null,k=An._;k;)if(x.y<k.y||x.y===k.y&&x.x<=k.x)if(k.L)k=k.L;else{A=k.P;break}else if(k.R)k=k.R;else{A=k;break}An.insert(A,x),A||($s=x)}}}}function Ie(t){var e=t.circle;e&&(e.P||($s=e.N),An.remove(e),kl.push(e),Vr(e),t.circle=null)}var Al=[];function Yg(){Vr(this),this.edge=this.site=this.circle=null}function ua(t){var e=Al.pop()||new Yg;return e.site=t,e}function yi(t){Ie(t),De.remove(t),Al.push(t),Vr(t)}function jg(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,o=t.N,a=[t];yi(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<dt&&Math.abs(r-l.circle.cy)<dt;)s=l.P,a.unshift(l),yi(l),l=s;a.unshift(l),Ie(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<dt&&Math.abs(r-c.circle.cy)<dt;)o=c.N,a.push(c),yi(c),c=o;a.push(c),Ie(c);var u=a.length,f;for(f=1;f<u;++f)c=a[f],l=a[f-1],Sr(c.edge,l.site,c.site,i);l=a[0],c=a[u-1],c.edge=un(l.site,c.site,null,i),Oe(l),Oe(c)}function Kg(t){for(var e=t[0],n=t[1],r,i,s,o,a=De._;a;)if(s=El(a,n)-e,s>dt)a=a.L;else if(o=e-Jg(a,n),o>dt){if(!a.R){r=a;break}a=a.R}else{s>-dt?(r=a.P,i=a):o>-dt?(r=a,i=a.N):r=i=a;break}$g(t);var l=ua(t);if(De.insert(r,l),!(!r&&!i)){if(r===i){Ie(r),i=ua(r.site),De.insert(l,i),l.edge=i.edge=un(r.site,l.site),Oe(r),Oe(i);return}if(!i){l.edge=un(r.site,l.site);return}Ie(r),Ie(i);var c=r.site,u=c[0],f=c[1],h=t[0]-u,d=t[1]-f,p=i.site,m=p[0]-u,g=p[1]-f,x=2*(h*g-d*m),A=h*h+d*d,k=m*m+g*g,R=[(g*A-d*k)/x+u,(h*k-m*A)/x+f];Sr(i.edge,c,p,R),l.edge=un(c,t,null,R),i.edge=un(t,p,null,R),Oe(r),Oe(i)}}function El(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var o=t.P;if(!o)return-1/0;n=o.site;var a=n[0],l=n[1],c=l-e;if(!c)return a;var u=a-r,f=1/s-1/c,h=u/c;return f?(-h+Math.sqrt(h*h-2*f*(u*u/(-2*c)-l+c/2+i-s/2)))/f+r:(r+a)/2}function Jg(t,e){var n=t.N;if(n)return El(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var dt=1e-6,Xg=1e-12,De,Nt,An,At;function Zg(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Qg(t,e){return e[1]-t[1]||e[0]-t[0]}function fa(t,e){var n=t.sort(Qg).pop(),r,i,s;for(At=[],Nt=new Array(t.length),De=new Er,An=new Er;;)if(s=$s,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(Kg(n),r=n[0],i=n[1]),n=t.pop();else if(s)jg(s.arc);else break;if(Gg(),e){var o=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];Hg(o,a,l,c),Wg(o,a,l,c)}this.edges=At,this.cells=Nt,De=An=At=Nt=null}fa.prototype={constructor:fa,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return xl(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(s=n.halfedges).length)for(var i=n.site,s,o=-1,a,l,c=e[s[a-1]],u=c.left===i?c.right:c.left;++o<a;)l=u,c=e[s[o]],u=c.left===i?c.right:c.left,l&&u&&r<l.index&&r<u.index&&Zg(i,l,u)<0&&t.push([i.data,l.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,o=r.cells.length,a;!(a=r.cells[s]);)if(++s>=o)return null;var l=t-a.site[0],c=e-a.site[1],u=l*l+c*c;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(f){var h=r.edges[f],d=h.left;if(!((d===a.site||!d)&&!(d=h.right))){var p=t-d[0],m=e-d[1],g=p*p+m*m;g<u&&(u=g,s=d.index)}});while(s!==null);return r._found=i,n==null||u<=n*n?a.site:null}};function fn(t,e,n){this.k=t,this.x=e,this.y=n}fn.prototype={constructor:fn,scale:function(t){return t===1?this:new fn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};fn.prototype;function zs(t){let e;const n=window.innerWidth,r=document.getElementById("stroke_slider"),i=document.getElementById("slideright"),s=document.getElementById("slideleft"),o=()=>{r&&(r.style.display="none")};t?(r&&(r.style.display="flex",r.style.left=t=="left"?n*-1+"px":n*1.5+"px"),s&&(s.style.display=t=="right"?"flex":"none"),i&&(i.style.display=t=="left"?"flex":"none"),e=t=="left"?$t(0,1.1,.1):$t(0,1.1,.1).reverse(),Pi(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})):(e=((s==null?void 0:s.style.display)=="flex"?"right":"left")=="left"?$t(-1.5,1.1,.1):$t(1,2.6,.1).reverse(),setTimeout(()=>o(),700)),Pi(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})}let tr=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(tr=!0,!0)});window.addEventListener("test",null,t)}catch(t){console.log(t)}const bt={orientation:void 0,time_threshold:200,diff_threshold:130,press_hold_threshold:400,prevent_touch:!0,prevent_double_tap:!1,addSwipeTarget(t){t.addEventListener("touchstart",Vn,tr?{passive:!0}:!1),t.addEventListener("touchmove",ma,tr?{passive:!0}:!1),t.addEventListener("touchend",ga,!1),t.addEventListener("mousedown",Vn,!1),t.addEventListener("mousemove",ma,!1),t.addEventListener("mouseup",ga,!1)},addPressAndHold(t){t.addEventListener("touchstart",Vn,tr?{passive:!0}:!1),t.addEventListener("mousedown",Vn,!1),t.addEventListener("touchend",ya,!1),t.addEventListener("mouseup",ya,!1)},disableDrag(){document.addEventListener("touchmove",ha,!1),document.addEventListener("touchend",da,!1),document.addEventListener("mousemove",ha,!1),document.addEventListener("mouseup",da,!1)}};function ha(t){bt.prevent_touch&&(window.innerHeight>450||bt.orientation=="landscape")&&t.preventDefault()}function da(t){const e=new Date().getTime();bt.prevent_double_tap&&e-pa<500&&t.preventDefault(),pa=e}let $e=null,ze=null,mn=null,gn=null,En=null,Ne=null,pa=new Date().getTime();function ma(t){if(!$e||!ze)return;let e,n;t.type=="mousemove"?(e=t.clientX,n=t.clientY):(e=t.touches[0].clientX,n=t.touches[0].clientY),mn=$e-e,gn=ze-n}function Vn(t){Ne=t.target,En=Date.now(),t.type=="mousedown"?($e=t.clientX,ze=t.clientY):($e=t.touches[0].clientX,ze=t.touches[0].clientY),mn=0,gn=0}function hn(t,e){if(t.classList.contains(e))return t;for(;t=t.parentNode&&t.classList&&!t.classList.contains(e););return t}function ga(){const t=Date.now()-En;(Math.abs(mn)>bt.diff_threshold||Math.abs(gn)>bt.diff_threshold)&&t<bt.time_threshold&&(Math.abs(mn)>Math.abs(gn)?mn>0?typeof bt.swipeLeft=="function"&&bt.swipeLeft(hn(Ne,"swipe")):typeof bt.swipeRight=="function"&&bt.swipeRight(hn(Ne,"swipe")):gn>0?typeof bt.swipeUp=="function"&&bt.swipeUp(hn(Ne,"swipe")):typeof bt.swipeDown=="function"&&bt.swipeDown(hn(Ne,"swipe"))),$e=null,ze=null,En=null}function ya(){Date.now()-En>bt.press_hold_threshold&&typeof bt.pressAndHold=="function"&&bt.pressAndHold(hn(Ne,"pressAndHold")),$e=null,ze=null,En=null}const Pt=bt;function t0(t,e){const n=lt("#"+t),r=window.innerWidth*.85,i=r/2,s=50,o=["blue","red"];n.selectAll("svg").remove();const a=n.append("svg").attr("width",r).attr("height",i),l={top:20,right:20,bottom:30,left:40},c=+a.attr("width")-l.left-l.right,u=+a.attr("height")-l.top-l.bottom,f=re().range([0,c]),h=re().range([u,0]),d=yl().x(function(k){return f(k[0])}).y(function(k){return h(k[1])}),p=a.append("g").attr("transform","translate("+l.left+","+l.top+")"),m=Math.max(...e.map(k=>k.length));f.domain([0,Math.max(...e.map(k=>Math.max(...k)),s)]),h.domain([0,m]),p.append("g").attr("transform","translate(0,"+u+")").call(bf(f).ticks(0)),p.append("g").style("font","24px times").call(wf(h).ticks(Math.min(m,4)).tickFormat(k=>k)),x(e),A(e);function g(k){return k=k.map((R,N)=>[R,N+1]),k.unshift([0,0]),k}function x(k){k.forEach((R,N)=>{p.append("path").datum(g(R)).attr("fill","none").attr("stroke",o[N]).attr("stroke-width","5px").attr("shape-rendering","crispEdges").attr("d",d)})}function A(k){k.forEach((R,N)=>{const v=".datapoint"+N;R.length<10&&p.selectAll(v).data(g(R)).enter().append("circle").attr("class",v).attr("fill","#FFFFFF").attr("stroke",o[N]).attr("stroke-width","2px").attr("r",3.5).attr("cx",function(_){return f(_[0])}).attr("cy",function(_){return h(_[1])})})}}function Sl(t){const e=t?t.getAttribute("setNumber"):void 0,n=e?parseInt(e):void 0;let r="";const i=[],s=b.match.sets().length;let o="<div class='updateStats s_set'>Match</div>";const a=b.match.stats.calculated(n),l=c=>{var u;return(u=c.match(/[A-Za-z0-9_]/g))==null?void 0:u.join("")};if(a&&a.length){if(s>1)for(let p=0;p<s;p++)o+=`<div class='updateStats s_set' setNumber="${p}">Set ${p+1}</div>`;const c=document.querySelector("#statview");c&&(c.innerHTML=o);let u,f;a.forEach(p=>{b.swap_sides?[f,u]=p.team_stats:[u,f]=p.team_stats;const m=[0].concat(...[u,f].map(v=>v.value?v.value:[])).reduce((v,_)=>v+_,0),g=l(p.name.toLowerCase().split(" ").join("_"));let x=u.display,A=f.display;const k=[].concat(...[u,f].map(v=>v.numerators?v.numerators:[])).filter((v,_,y)=>y.lastIndexOf(v)==_).join(","),R=k&&m&&p.name!="Aggressive Margin"?"statname_chart":"statname";isNaN(u.value)&&(u.value=0,x="0"),isNaN(f.value)&&(f.value=0,A="0"),["Double Faults","Unforced Errors","Forced Errors"].indexOf(p.name)>=0?(u.value<f.value&&(x=`<b class="toggleChart">${x}</b>`),f.value<u.value&&(A=`<b class="toggleChart">${A}</b>`)):(u.value>f.value&&(x=`<b class="toggleChart">${x}</b>`),f.value>u.value&&(A=`<b class="toggleChart">${A}</b>`)),r+=`<div class='statrow' id="${g}"><div class='toggleChart statleft'>${x}</div><div class='toggleChart ${R}'>${p.name}</div><div class='toggleChart statright'>${A}</div></div>`;const N=`<div class='statrow' id="${g}_chart" style='display:none' onclick="showChartSource('${k}')"></div>`;k&&m&&p.name!="Aggressive Margin"&&(i.push({target:`${g}_chart`,numerators:k}),r+=N)});const h=b.match.stats.counters(n).teams;if(h[0].Backhand||h[0].Forehand||h[1].Backhand||h[1].Forehand){const p=b.swap_sides?1:0,m=b.swap_sides?0:1;r+="<div class='statsection flexcenter'>Finishing Shots - Strokes</div>",["Forehand","Backhand"].forEach(g=>{if(h[0][g]||h[1][g]){const x=h[p][g]?h[p][g].length:0,A=h[m][g]?h[m][g].length:0;r+=`<div class='statrow'><div class='statleft'><b>${x}</b></div><div class='statname'><b>Total ${g} Shots</b></div><div class='statright'><b>${A}</b></div></div>`,[].concat(...Object.keys(h).map(R=>h[R][g]?h[R][g].map(N=>N.point.result).filter(Boolean):[])).filter((R,N,v)=>v.lastIndexOf(R)==N).forEach(R=>{const N=h[p][g]?h[p][g].filter(y=>y.point.result==R):[],v=h[m][g]?h[m][g].filter(y=>y.point.result==R):[];(N.length||v.length)&&(r+=`<div class='statrow'><div class='statleft'>${N.length}</div><div class='statname'>${g} ${R}s</div><div class='statright'>${v.length}</div></div>`),[].concat(...Object.keys(h).map(y=>h[y][g]?h[y][g].map(P=>P.point.stroke).filter(Boolean):[])).filter((y,P,q)=>q.lastIndexOf(y)==P).forEach(y=>{const P=h[p][g]?h[p][g].filter(V=>V.point.result==R&&V.point.stroke==y):[],q=h[m][g]?h[m][g].filter(V=>V.point.result==R&&V.point.stroke==y):[];(P.length||q.length)&&(r+=`<div class='statrow'><div class='statleft'>${P.length}</div><div class='statname'><i>${g} ${y} ${R}s</i></div><div class='statright'>${q.length}</div></div>`)})})}})}const d=document.querySelector("#statlines");d&&(d.innerHTML=r),e0(i)}else vt("entry")}function e0(t){const e=b.match.stats.counters(),n=r=>{var i;return(i=r.match(/[A-Za-z0-9]/g))==null?void 0:i.join("")};e&&t.forEach(r=>{const i=[];Object.keys(e.teams).forEach(s=>{const o=e.teams[s],a=r.numerators.split(",").map(u=>n(u)),c=[].concat(...a.map(u=>o[u])).map(u=>u?u.point:void 0).filter(u=>u).sort((u,f)=>u.index-f.index);i.push(c.map(u=>u.index))}),t0(r.target,i)})}const pt=(t,e)=>{const n=document.getElementById(e);n&&(n.style.display=t)};function vt(t=b.view,e){zs();const n={mainmenu({activate:i=!0}={}){if(i){Pt.prevent_touch=!1;const s=JSON.parse(rt.get("match_archive")||"[]"),o=document.getElementById("menu_match_archive");o&&(o.style.display=s.length?"flex":"none");const a=document.getElementById("menu_match_format");a&&(a.style.display=$u()?"flex":"none");const l=b.match.history.points(),c=document.getElementById("menu_change_server");c&&(c.style.display=l.length==0?"flex":"none")}pt(i?"flex":"none","mainmenu")},pointhistory({activate:i=!0}={}){i&&(Pt.prevent_touch=!1,zu()),pt(i?"flex":"none","pointhistory")},matcharchive({activate:i=!0}={}){i&&(Pt.prevent_touch=!1,rc()),pt(i?"flex":"none","matcharchive")},matchformat({activate:i=!0}={}){of(),i&&(Pt.prevent_touch=!1),pt(i?"flex":"none","matchformats")},settings({activate:i=!0}={}){pt(i?"flex":"none","settings")},welcome({activate:i=!0}={}){pt(i?"flex":"none","welcome")},matchdetails({activate:i=!0}={}){i&&(Pt.prevent_touch=!1),pt(i?"flex":"none","matchdetails")},entry({activate:i=!0}={}){i&&(Pt.prevent_touch=!0),pt(i&&b.orientation=="landscape"?"flex":"none",bn.horizontal_view),pt(i&&b.orientation=="portrait"?"flex":"none",bn.vertical_view),pt(i&&b.orientation=="portrait"?"flex":"none","toolbar")},stats({activate:i=!0}={}){pt(i?"flex":"none","statsscreen"),i&&(Pt.prevent_touch=!1,b.match.metadata.resetStats(),Sl())},momentum({activate:i=!0}={}){if(!i)pt("none","momentum"),pt("none","pts");else{b.orientation=="landscape"?(pt("none","momentum"),pt("flex","pts"),ot.pts_match.update()):(pt("inline","momentum"),pt("none","pts")),Pt.prevent_touch=!1;const s=b.match.history.action("addPoint");ot.mc.width(window.innerWidth).height(820),ot.mc.data(s).update(),ot.mc.update()}},gametree({activate:i=!0}={}){if(pt(i?"flex":"none","gametree"),i){Pt.prevent_touch=!1;const s=b.match.history.action("addPoint"),o=b.match.format.settings().code.indexOf("n_")>=0;ot.gametree.options({display:{noAd:o}}),ot.gametree.data(s).update(),ot.gametree.update({sizeToFit:!0})}}},r=Object.keys(n);if(r.indexOf(t)>=0)return r.filter(i=>i!=t).forEach(i=>n[i]({activate:!1})),n[t]({activate:!0,params:e}),b.view=t,t}function Tl(){let t,e,n,r=[0,0],i,s;const o={left:void 0,right:void 0},a={id:"gf1",score:[0,0],width:window.innerWidth,height:window.innerHeight,margins:{top:10,bottom:10,left:10,right:10},fish:{school:!1,gridcells:["0","15","30","40","G"],max_rally:void 0,cell_size:void 0,min_cell_size:5,max_cell_size:20},set:{tiebreak_to:7},display:{orientation:"vertical",transition_time:0,sizeToFit:!1,leftImg:!1,rightImg:!1,show_images:void 0,reverse:!1,point_score:!0,service:!0,player:!0,rally:!0,score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}},l={default:"#235dba"};let c=JSON.parse(JSON.stringify(l));const u={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};let f,h,d,p,m;function g(A){A._groups[0][0].tagName.toLowerCase()!="svg"&&(h=A.append("div").attr("class","fishRoot"),f=h.append("svg").attr("id","gameFish"+a.id).attr("class","fishFrame"),d=f.append("g"),p=f.append("g"),m=f.append("g")),s=function(N){if(d==null||p==null||m==null)return;if(a.display.sizeToFit||N&&N.sizeToFit){const L=A.node().getBoundingClientRect();a.width=Math.max(L.width,100),a.height=Math.max(L.height,100)}if(a.fish.cell_size&&!a.fish.school){const L=Math.max(10,t.length+2);a.height=a.fish.cell_size*L*.9}let v=!1,_=0;t.forEach(L=>{L.rally&&L.rally.length>_&&(_=L.rally.length),L.score.indexOf("T")>0&&(v=!0)}),a.fish.max_rally&&a.fish.max_rally>_&&(_=a.fish.max_rally),e=a.width-(a.margins.left+a.margins.right),n=a.height-(a.margins.top+a.margins.bottom);const y=a.display.orientation=="vertical"?1:0,P=y?e:n,q=y?n:e,V=(y?a.margins.left:a.margins.top)+P/2,Q=1,j=.9;d.attr("transform","translate("+(y?0:r[0])+","+(y?r[1]:0)+")"),p.attr("transform","translate("+r[0]+","+r[1]+")"),m.attr("transform","translate("+r[0]+","+r[1]+")");let $;if(a.fish.cell_size)$=a.fish.cell_size;else{const L=v?a.set.tiebreak_to+4:a.fish.gridcells.length+2,J=P/(a.fish.gridcells.length+(a.display.service?L:0)),et=q/(t.length+2);$=Math.min(J,et),$=Math.max(a.fish.min_cell_size,$),$=Math.min(a.fish.max_cell_size,$)}const K=Math.sqrt(2*Math.pow($,2)),H=K/2,Z=[],X=[],B=v?a.set.tiebreak_to:a.fish.gridcells.length-1;for(let L=0;L<B;L++){const J=v?L:a.fish.gridcells[L];X.push({label:J,l:(L+(y?1.25:.75))*H,o:(L+(y?.75:1.25))*H,rotate:45}),X.push({label:J,l:(L+1.25)*H,o:-1*(L+.75)*H,rotate:-45});for(let et=0;et<B;et++)Z.push([L,et])}if(h&&(h.attr("width",a.width+"px").attr("height",a.height+"px"),f.attr("width",a.width+"px").attr("height",a.height+"px")),a.display.point_score){const L=p.selectAll(".game_score"+a.id).data(X);L.exit().remove(),L.enter().append("text").attr("font-size",H*.8+"px").attr("transform",at).attr("text-anchor","middle").merge(L).transition().duration(a.display.transition_time).attr("class","game_score"+a.id).attr("font-size",H*.8+"px").attr("transform",at).attr("text-anchor","middle").text(function(J){return J.label})}else p.selectAll(".game_score"+a.id).remove();if(a.display.grid){const L=p.selectAll(".gridcell"+a.id).data(Z);L.exit().remove(),L.enter().append("rect").attr("stroke","#ccccdd").attr("stroke-width",z).attr("transform",xt).attr("width",$).attr("height",$).merge(L).transition().duration(a.display.transition_time).attr("class","gridcell"+a.id).attr("stroke-width",z).attr("width",$).attr("height",$).attr("transform",xt).attr("fill-opacity",0)}else p.selectAll(".gridcell"+a.id).remove();const S=m.selectAll(".gamecell"+a.id).data(t);S.exit().remove(),S.enter().append("rect").attr("opacity",0).attr("width",$).attr("height",$).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",z).merge(S).attr("id",(L,J)=>a.id+"Gs"+L.set+"g"+L.game+"p"+J).transition().duration(a.display.transition_time).attr("class","gamecell"+a.id).attr("width",$).attr("height",$).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",z).attr("opacity",a.display.player?1:0).style("fill",function(L){return a.colors.players[L.winner]});const C=m.selectAll(".result"+a.id).data(t);C.exit().remove(),C.enter().append("circle").attr("stroke","black").attr("id",function(L,J){return a.id+"Rs"+L.set+"g"+L.game+"p"+J}).attr("class","result"+a.id).attr("opacity",1).attr("stroke-width",z).attr("cx",po).attr("cy",mo).attr("r",O).style("fill",function(L){return a.colors.results[L.result]}).merge(C).attr("id",function(L,J){return a.id+"Rs"+L.set+"g"+L.game+"p"+J}).attr("class","result"+a.id).transition().duration(a.display.transition_time).attr("stroke-width",z).attr("cx",po).attr("cy",mo).attr("r",O).style("fill",function(L){return a.colors.results[L.result]});const M=re().range([0,P*j]).domain([0,_]),T=Gr().domain($t(t.length)).range([0,t.length*H]).round(!0);if(a.display.rally){const L=d.selectAll(".rally_bar"+a.id).data(t);L.exit().remove(),L.enter().append("rect").attr("opacity",0).attr("transform",ct).attr("height",y?T.bandwidth():0).attr("width",y?0:T.bandwidth()).merge(L).attr("class","rally_bar"+a.id).on("mouseover",(J,et,ft)=>{lt(ft[et]).attr("fill","yellow")}).on("mouseout",(J,et,ft)=>{lt(ft[et]).attr("fill","#eeeeff")}).transition().duration(a.display.transition_time).attr("id",function(J,et){return a.id+"Bs"+J.set+"g"+J.game+"p"+et}).attr("opacity",1).attr("stroke","white").attr("stroke-width",z).attr("fill","#eeeeff").attr("transform",w).attr("height",y?T.bandwidth():F).attr("width",y?F:T.bandwidth())}else d.selectAll(".rally_bar"+a.id).remove();if(a.display.score){const L=a.score.slice();a.display.reverse&&L.reverse();const J=d.selectAll(".set_score"+a.id).data(L);J.exit().remove(),J.enter().append("text").attr("class","set_score"+a.id).attr("transform",U).attr("font-size",H*.8+"px").attr("text-anchor","middle").text(function(ft){return ft}).merge(J).attr("class","set_score"+a.id).attr("transform",U).attr("font-size",H*.8+"px").attr("text-anchor","middle").text(function(ft){return ft});const et=d.selectAll(".ssb"+a.id).data(a.score);et.exit().remove(),et.enter().append("rect").merge(et).attr("class","ssb"+a.id).attr("transform",W).attr("stroke","black").attr("stroke-width",z).attr("fill-opacity",0).attr("height",H+"px").attr("width",H+"px")}else d.selectAll(".set_score"+a.id).remove(),d.selectAll(".ssb"+a.id).remove();if(a.display.service){const L=[];t.forEach(function(ce,_o){let vo=!1;const Nu=["Ace","Serve Winner","Double Fault"];ce.first_serve&&(vo=!0,L.push({point:_o,serve:"first",server:ce.server,result:ce.first_serve.error})),L.push({point:_o,serve:vo?"second":"first",server:ce.server,result:Nu.indexOf(ce.result)>=0?ce.result:"In"})});const J=d.selectAll(".serve"+a.id).data(L);J.exit().remove(),J.enter().append("circle").attr("class","serve"+a.id).attr("cx",lo).attr("cy",uo).attr("r",O).attr("stroke",Y).attr("stroke-width",z).attr("fill",Y).merge(J).attr("class","serve"+a.id).attr("cx",lo).attr("cy",uo).attr("r",O).attr("stroke",Y).attr("stroke-width",z).attr("fill",Y);const et=d.selectAll(".sbox"+a.id).data(t);et.exit().remove(),et.enter().append("rect").attr("stroke","#ccccdd").attr("fill-opacity",0).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",z).attr("height",y?T.bandwidth():1.5*H).attr("width",y?1.5*H:T.bandwidth()).merge(et).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",z).attr("height",y?T.bandwidth():1.5*H).attr("width",y?1.5*H:T.bandwidth());const ft=d.selectAll(".return"+a.id).data(t);ft.exit().remove(),ft.enter().append("circle").attr("class","return"+a.id).attr("cx",ae).attr("cy",Ke).attr("r",O).attr("stroke",E).attr("stroke-width",z).attr("fill",E).merge(ft).attr("class","return"+a.id).attr("cx",ae).attr("cy",Ke).attr("r",O).attr("stroke",E).attr("stroke-width",z).attr("fill",E)}else d.selectAll(".sbox"+a.id).remove(),d.selectAll(".return"+a.id).remove(),d.selectAll(".serve"+a.id).remove();a.display.rightImg?(o.right=f.selectAll("image.rightImage").data([0]),o.right.exit().remove(),o.right.enter().append("image").attr("class","rightImage").attr("xlink:href",a.display.rightImg).attr("x",a.width-30).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)}).merge(o.right).attr("x",a.width-30).attr("xlink:href",a.display.rightImg).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)})):f&&f.selectAll("image.rightImage").remove(),a.display.leftImg?(o.left=f.selectAll("image.leftImage").data([0]),o.left.enter().append("image").attr("class","leftImage").attr("xlink:href",a.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.leftImage.click&&u.leftImage.click()}).merge(o.left).attr("xlink:href",a.display.leftImg).on("click",function(){u.leftImage.click&&u.leftImage.click(a.id)}),o.left.exit().remove()):f&&f.selectAll("image.leftImage").remove();function O(){return a.display.player||a.display.service?H/4:H/2}function z(){return H>20?1:.5}function Y(L){return a.colors.results[L.result]}function E(L){return L.rally==null?"white":L.rally.length>1?"yellow":L.rally.length==1?a.colors.results[L.result]:"white"}function F(L){return L.rally?M(L.rally.length):0}function U(L,J){let et=J?V+H*.5:V-H*.5;et=y?et:et+H*.3;const ft=H*(y?.8:.5);return tt(et,ft,0)}function W(L,J){const et=J?V:V-H;return tt(et,0,0)}function at(L){const J=+V+L.o,et=H+L.l;return tt(J,et,L.rotate)}function xt(L){const J=V+(L[1]-L[0]+y-1)*H,et=(L[0]+L[1]+3-y)*H;return tt(J,et,45)}function D(L,J){const et=V+(R(L)+y-1)*H,ft=(J+4-y)*H;return i=[et-V,ft-K,K],tt(et,ft,45)}function G(L,J){const et=L.server==0?V-P/2*Q:V+P/2*Q-1.5*H,ft=H+Rt(L,J);return tt(et,ft,0)}function ct(L,J){const et=V,ft=H+Rt(L,J);return tt(et,ft,0)}function w(L,J){const et=L.rally?V-M(L.rally.length)/2:0,ft=H+Rt(L,J);return tt(et,ft,0)}function tt(L,J,et){const ft=y?L:J,ce=y?J:L;return"translate("+ft+","+ce+") rotate("+et+")"}function Rt(L,J){return(J+2.5)*H}function ae(L,J){return y?co(L):ao(L,J)}function Ke(L,J){return y?ao(L,J):co(L)}function ao(L,J){return H+(J+3)*H}function co(L){return L.server==0?V+P/2*Q-.75*H:V-P/2*Q+.75*H}function lo(L){return y?ho(L):fo(L)}function uo(L){return y?fo(L):ho(L)}function fo(L){return H+(L.point+3)*H}function ho(L){const J=L.serve=="first"&&L.server==0||L.serve=="second"&&L.server==1?.4:1.1;return L.server==0?V-P/2*Q+J*H:V+P/2*Q-J*H}function po(L,J){return y?yo(L):go(L,J)}function mo(L,J){return y?go(L,J):yo(L)}function go(L,J){return H+(J+3)*H}function yo(L){return+V+R(L)*H}};function R(N){return N.points[a.display.reverse?0:1]-N.points[a.display.reverse?1:0]}}g.g=function(A){if(!arguments.length)return g;typeof A!="object"||A.constructor==Array||(A.bars&&(d=A.bars),A.fish&&(p=A.fish),A.game&&(m=A.game))},g.options=function(A){return arguments.length?(x(A,a),g):a};function x(A,k){if(!A||!k)return;const R=Object.keys(A),N=Object.keys(k);for(let v=0;v<R.length;v++)if(N.indexOf(R[v])>=0){const _=k[R[v]],y=A[R[v]];typeof _=="object"&&typeof y!="function"&&_&&_.constructor!==Array?x(A[R[v]],k[R[v]]):k[R[v]]=A[R[v]]}}return g.events=function(A){return arguments.length?(x(A,u),g):u},g.width=function(A){return arguments.length?(a.width=A,g):a.width},g.height=function(A){return arguments.length?(a.height=A,g):a.height},g.coords=function(A){return arguments.length?(r=A,g):i},g.data=function(A){return arguments.length?(t=JSON.parse(JSON.stringify(A)),g):t},g.update=function(A){u.update.begin&&u.update.begin(),typeof s=="function"&&t&&s(A),setTimeout(function(){u.update.end&&u.update.end()},a.display.transition_time)},g.colors=function(A){if(!arguments.length)return c;if(typeof A!="object")return!1;const k=Object.keys(A);return k.length?(k.forEach(function(R){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(A[R])||delete A[R]}),Object.keys(A).length?c=A:c=JSON.parse(JSON.stringify(l)),g):!1},g}function n0(){let t,e,n=[];const r={left:void 0,right:void 0},i={id:"m1",fullWidth:window.innerWidth,fullHeight:window.innerHeight,margins:{top:1,bottom:1,left:3,right:3},fish:{gridcells:["0","15","30","40","G"],cell_size:void 0,min_cell_size:5,max_cell_size:10},display:{continuous:!1,reverse:!1,orientation:"vertical",leftImg:!1,rightImg:!1,show_images:void 0,transition_time:0,sizeToFit:!0,service:!0,player:!0,rally:!0,score:!1,momentum_score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}};function s(){return i.fullWidth-i.margins.left-i.margins.right}function o(){return i.fullHeight-i.margins.top-i.margins.bottom}i.height=o(),i.width=s();const a={default:"#235dba"};let l=JSON.parse(JSON.stringify(a));const c={score:{click:null},leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};function u(h){h.each(function(d,p,m){const x=lt(m[p]).append("div").attr("class","momentumRoot").attr("transform","translate(0, 0)"),A=x.append("svg").attr("class","momentumFrame");A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const k=A.append("g").attr("id","momentumBars"),R=A.append("g").attr("id","momentumFish"),N=A.append("g").attr("id","momentumGame");e=function(v){if(i.display.sizeToFit||v&&v.sizeToFit){const E=h.node().getBoundingClientRect();i.display.orientation=="vertical"&&(i.fullWidth=Math.max(E.width,100)),i.fullHeight=Math.max(E.height,100)}i.height=o(),i.width=s();const _=i.display.orientation=="vertical"?1:0,y=_?i.width:i.height,P=y/2,q=hs(t);let V=0;t.forEach(function(E){E.rally!=null&&E.rally.length>V&&(V=E.rally.length)});const Q=T();n.slice(q.length).forEach(function(E){Pi(".c"+E.options().id).remove()}),n=n.slice(0,q.length);let $;const K=[0,0],H=[];q.forEach(function(E,F){n[F]||(n.push(Tl()),A.call(n[F]),n[F].g({bars:k.append("g").attr("class","cGF"+F),fish:R.append("g").attr("class","cGF"+F),game:N.append("g").attr("class","cGF"+F)}),n[F].options({id:"GF"+F,display:{score:!1,point_score:!1},fish:{school:!0}})),n[F].width(y).height(y),n[F].options({score:E.score,fish:{cell_size:Q,max_rally:V},display:{orientation:i.display.orientation,service:i.display.service,rally:i.display.rally,player:i.display.player,grid:i.display.grid},colors:{players:{0:i.colors.players[0],1:i.colors.players[1]}}}),n[F].data(E.points),n[F].coords(K).update();const U=n[F].coords();K[0]+=_?U==null?void 0:U[0]:(U==null?void 0:U[1])-(U==null?void 0:U[2])/2,K[1]+=_?U==null?void 0:U[1]:(U==null?void 0:U[0])+(U==null?void 0:U[2])/2,H.push({score:E.score,index:E.index,l:K[1]+(U==null?void 0:U[2])*1.75,o:K[0]+(U==null?void 0:U[2])*1.75,set_end:E.last_game}),E.last_game&&!i.display.continuous&&(K[_?0:1]=0),$=(U==null?void 0:U[2])/2}),x.attr("width",i.width+"px").attr("height",(_?100+K[1]:i.height)+"px").on("mouseover",z).on("mouseout",Y),A.attr("width",i.width+"px").attr("height",(_?100+K[1]:i.height)+"px");const Z=R.selectAll(".midline"+i.id).data([0]);Z.enter().append("line").attr("class","midline"+i.id).attr("x1",_?P:$).attr("x2",_?P:K[0]+5*($||0)).attr("y1",_?$:P).attr("y2",_?K[1]+5*$:P).attr("stroke-width",M).attr("stroke","#ccccdd"),Z.exit().remove(),Z.transition().duration(i.display.transition_time).attr("x1",_?P:$).attr("x2",_?P:K[0]+5*($||0)).attr("y1",_?$:P).attr("y2",_?K[1]+5*$:P).attr("stroke-width",M).attr("stroke","#ccccdd");const X=R.selectAll(".score_line"+i.id).data(H);if(X.enter().append("line").attr("class","score_line"+i.id).attr("x1",function(E){return _?Q*2:E.o}).attr("x2",function(E){return _?y-Q*2:E.o}).attr("y1",function(E){return _?E.l:Q*3}).attr("y2",function(E){return _?E.l:y-Q*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),X.exit().remove(),X.transition().duration(i.display.transition_time).attr("x1",function(E){return _?Q*2:E.o}).attr("x2",function(E){return _?y-Q*2:E.o}).attr("y1",function(E){return _?E.l:Q*3}).attr("y2",function(E){return _?E.l:y-Q*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),i.display.momentum_score){const E=R.selectAll(".score_text"+i.id).data(H);E.exit().remove(),E.enter().append("g").attr("class","score_text"+i.id).attr("transform",B).on("click",function(U){c.score.click&&c.score.click(U)}).merge(E).attr("class","score_text"+i.id).attr("transform",B).on("click",function(U){c.score.click&&c.score.click(U)});const F=E.selectAll(".score"+i.id).data(function(U){return U.score});F.exit().remove(),F.enter().append("text").attr("class","score"+i.id).attr("transform",S).attr("font-size",$*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(U){return U}).merge(F).attr("class","score"+i.id).transition().duration(i.display.transition_time).attr("transform",S).attr("font-size",$*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(U){return U})}else R.selectAll(".score_text"+i.id).remove();function B(E){return C(0,_?E.l:E.o-$,0)}function S(E,F){const U=_?y/3:i.height/3,W=F?P+U:P-U+$*3,at=-1*$*(_?.25:.5);return C(W,at,0)}function C(E,F,U){const W=_?E:F,at=_?F:E;return"translate("+W+","+at+") rotate("+U+")"}function M(){return $>20?2:1}function T(){let E;if(i.display.orientation=="vertical")E=i.width/2/(O()+1);else{const F=i.width/(t.length+4);E=Math.sqrt(2*F*F)}return Math.min(i.fish.max_cell_size,E)}function O(){let E=0;const F=[0,0];return t.forEach(function(U){F[U.point.winner]+=1;const W=Math.abs(F[0]-F[1]);W>E&&(E=W)}),E}i.display.rightImg?(r.right=A.selectAll("image.rightImage").data([0]),r.right.exit().remove(),r.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-20).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)}).merge(r.right).attr("x",i.width-20).attr("xlink:href",i.display.rightImg).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)})):A.selectAll("image.rightImage").remove(),i.display.leftImg?(r.left=A.selectAll("image.leftImage").data([0]),r.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.leftImage.click&&c.leftImage.click()}).merge(r.left).attr("xlink:href",i.display.leftImg).on("click",function(){c.leftImage.click&&c.leftImage.click(i.id)}),r.left.exit().remove()):A.selectAll("image.leftImage").remove();function z(){i.display.show_images!=!1&&(i.display.leftImg&&r.left.attr("opacity",1),i.display.rightImg&&r.right.attr("opacity",1))}function Y(){i.display.show_images||(i.display.leftImg&&r.left.attr("opacity",0),i.display.rightImg&&r.right.attr("opacity",0))}}})}u.options=function(h){return arguments.length?(f(h,i),u):i};function f(h,d){if(!h||!d)return;const p=Object.keys(h),m=Object.keys(d);for(let g=0;g<p.length;g++)if(m.indexOf(p[g])>=0){const x=d[p[g]],A=h[p[g]];typeof x=="object"&&typeof A!="function"&&x.constructor!==Array?f(h[p[g]],d[p[g]]):d[p[g]]=h[p[g]]}}return u.events=function(h){return arguments.length?(f(h,c),u):c},u.width=function(h){return arguments.length?(i.fullWidth=h,u):i.fullWidth},u.height=function(h){return arguments.length?(i.fullHeight=h,u):i.fullHeight},u.data=function(h){return arguments.length?(t=h,u):t},u.update=function(h){c.update.begin&&c.update.begin(),typeof e=="function"&&t&&e(h),setTimeout(function(){c.update.end&&c.update.end()},i.display.transition_time)},u.colors=function(h){if(!arguments.length)return l;if(typeof h!="object")return!1;const d=Object.keys(h);return d.length?(d.forEach(function(p){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(h[p])||delete h[p]}),Object.keys(h).length?l=h:l=JSON.parse(JSON.stringify(a)),u):!1},u}function r0(){function t(B){return Math.max.apply(null,B)}function e(B){return Math.min.apply(null,B)}const n={left:void 0,right:void 0};let r=[];const i={width:150,height:150,min_max:20,margins:{top:0,right:0,bottom:0,left:0},display:{noAd:!1,leftImg:!1,rightImg:!1,show_images:!1,sizeToFit:!0,showEmpty:!1},lines:{easing:!1,duration:600,points:{winners:"#2ed2db",errors:"#2ed2db",unknown:"#2ed2db"},colors:{underlines:"#2ed2db"}},nodes:{colors:{0:"black",1:"red",neutral:"#ecf0f1"}},points:{winners:["Winner","Ace","Serve Winner","Passing Shot","Return Winner","Forcing Error","Forcing Volley Error","Net Cord","In"],errors:["Unforced Error","Unforced","Forced Error","Error","Out","Net","Netted Passing Shot","L","Overhead Passing Shot","Double Fault"],highlight:[]},selectors:{enabled:!0,selected:{0:!1,1:!1}},labels:{Game:"GAME",Player:"Player",Opponent:"Opponent"}};let s,o,a;const l=0,c="x";let u={w:{},e:{},p:{},n:{}};const f={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mousemove:null,mouseout:null},node:{mousemove:null,mouseout:null},score:{mousemove:null,mouseout:null},label:{mousemove:null,mouseout:null,click:x},selector:{mousemove:null,mouseout:null,click:x}};function h(B){const S=B.append("div").attr("class","gametreeRoot");o=S.append("svg"),s=function(C){if(!r.length&&!i.display.showEmpty){o.selectAll("*").remove();return}if(p(),i.display.sizeToFit||C&&C.sizeToFit){const w=B.node().getBoundingClientRect();i.width=Math.min(w.width,w.height)}const M=i.width-(i.margins.left+i.margins.right),T=i.width*.9;a=(T+M)/2*.03;const O=q.map(function(w){return w.id}),z=e(O.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),Y=t([t(O.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),i.min_max]),E=re().domain([z,Y]).range([0,a*2]);o.transition().duration(l).attr("width",M).attr("height",T);const F=o.selectAll(".gradient").data(q,m);F.exit().remove(),F.enter().append("linearGradient").attr("id",function(w){return"gradient"+w.id}).attr("class","gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).merge(F).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T});const U=F.selectAll(".points_stop").data(w=>A(w));U.exit().remove(),U.enter().append("stop").attr("class","points_stop").attr("offset",function(w){return w.offset}).attr("stop-color",function(w){return w.color}).merge(U).attr("offset",function(w){return w.offset});const W=o.selectAll(".line").data(q);W.exit().remove(),W.enter().append("line").attr("class","line").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(w){return"url(#gradient"+w.id+")"}).on("mousemove",function(w,tt){f.point.mousemove&&f.point.mousemove(w,tt)}).on("mouseout",function(w,tt){f.point.mouseout&&f.point.mouseout(w,tt)}).on("click",function(w,tt){f.point.click&&f.point.click(w,tt)}).merge(W).transition().duration(i.lines.easing||C&&C.easing?i.lines.duration:0).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return u.p[w.id]?E(u.p[w.id]):0});const at=o.selectAll(".uline").data(V);at.exit().remove(),at.enter().append("line").attr("class","uline").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(){return i.lines.colors.underlines}).merge(at).transition().duration(l).attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0});const xt=o.selectAll(".node").data(P);xt.exit().remove(),xt.enter().append("circle").attr("class","node").attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a}).attr("stroke",function(w){return w.color_pct!=null?Z(X(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).attr("fill",function(w){return w.color_pct!=null?Z(X(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).on("mousemove",function(w,tt){f.score.mousemove&&f.score.mousemove(w,tt)}).on("mouseout",function(w,tt){f.node.mouseout&&f.node.mouseout(w,tt)}).on("click",function(w,tt){f.node.click&&f.node.click(w,tt)}).merge(xt).transition().duration(l).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a});const D=o.selectAll(".score").data(Q);D.exit().remove(),D.enter().append("text").attr("class","score").attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("font-family","Lato, Arial, sans-serif").attr("text-anchor","middle").attr("alignment-baseline","central").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>7)return w.text}).on("mousemove",function(w,tt){f.score.mousemove&&f.score.mousemove(w,tt)}).on("mouseout",function(w,tt){f.score.mouseout&&f.score.mouseout(w,tt)}).on("click",function(w,tt){f.score.click&&f.score.click(w,tt)}).merge(D).transition().duration(l).attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return w.text});const G=o.selectAll(".gt_label").data(j);G.exit().remove(),G.enter().append("text").attr("class","gt_label").attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("alignment-baseline",function(w){return w.baseline?w.baseline:void 0}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("text-anchor",function(w){return w.anchor?w.anchor:void 0}).attr("font-family","Lato, Arial, sans-serif").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>5)return w.id}).attr("selector",function(w){return w.id}).on("click",function(w,tt,Rt){f.label.click&&f.label.click(w,tt,Rt[tt])}).merge(G).transition().duration(l).attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return i.labels[w.id]});const ct=o.selectAll(".selector").data($);ct.exit(),ct.enter().append("circle").attr("class","selector").attr("status",function(w){return w.status}).attr("id",function(w){return w.id}).attr("selector",function(w){return w.id}).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke",function(w,tt){return i.nodes.colors[tt]}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,tt){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[tt]?i.nodes.colors[tt]:i.nodes.colors.neutral}).attr("opacity",function(w){return w.opacity}).on("mousemove",function(w,tt){f.selector.mousemove&&f.selector.mousemove(w,tt)}).on("mouseout",function(w,tt){f.selector.mouseout&&f.selector.mouseout(w,tt)}).on("click",function(w,tt,Rt){f.selector.click&&f.selector.click(w,tt,Rt[tt])}).merge(ct).transition().duration(l).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,tt){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[tt]?i.nodes.colors[tt]:i.nodes.colors.neutral}),i.display.rightImg?(n.right=o.selectAll("image.rightImage").data([0]),n.right.exit().remove(),n.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-(i.margins.right+30)).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)}).merge(n.right).attr("x",i.width-(i.margins.right+30)).attr("xlink:href",i.display.rightImg).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)})):S.selectAll("image.rightImage").remove(),i.display.leftImg?(n.left=o.selectAll("image.leftImage").data([0]),n.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10+i.margins.left).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.leftImage.click&&f.leftImage.click()}).merge(n.left).attr("x",10+i.margins.left).attr("xlink:href",i.display.leftImg).on("click",function(){f.leftImage.click&&f.leftImage.click(i.id)}),n.left.exit().remove()):S.selectAll("image.leftImage").remove()}}h.exports=function(){return{selectView:x}},h.options=function(B){return arguments.length?(d(B,i),h):i};function d(B,S){if(!B||!S)return;const C=Object.keys(B),M=Object.keys(S);for(let T=0;T<C.length;T++)if(M.indexOf(C[T])>=0){const O=S[C[T]],z=B[C[T]];typeof O=="object"&&typeof z!="function"&&O&&O.constructor!==Array?d(B[C[T]],S[C[T]]):S[C[T]]=B[C[T]]}}h.events=function(B){return arguments.length?(d(B,f),h):f},h.reset=function(){return r=[],g(),u={w:{},e:{},p:{},n:{}},h},h.width=function(B){return arguments.length?(i.width=B,h):i.width},h.height=function(B){return arguments.length?(i.height=B,h):i.height},h.data=function(B){return arguments.length?(B.constructor===Array&&(h.reset(),r=B),h):r},h.counters=function(){return p(),u},h.update=function(B){f.update.begin&&f.update.begin(),typeof s=="function"&&s(B),setTimeout(function(){f.update.end&&f.update.end()},l)};function p(){let B;if(u={w:{},e:{},p:{},n:{}},i.selectors.selected[0]||i.selectors.selected[1]){const C=i.selectors.selected[0]?0:1;B=r.filter(function(M){return M.point.server==C})}else B=r;B=B.filter(function(C){return!C.point.tiebreak});for(let C=0;C<B.length;C++){const M=B[C-1],O="L"+(C==0||M.game.complete?S([0,0]):S(M.point.points))+c+S(B[C].point.points);i.points.highlight.length&&i.points.highlight.indexOf(C)<0||(u.p[O]=u.p[O]?u.p[O]+1:1,i.points.winners.indexOf(B[C].point.result)>=0?u.w[O]=u.w[O]?u.w[O]+1:1:i.points.errors.indexOf(B[C].point.result)>=0&&(u.e[O]=u.e[O]?u.e[O]+1:1))}function S(C){const M=Math.min(...C),T=M>=4?M-3:0;return C.map((z,Y)=>i.display.noAd&&z==4&&C[1-Y]==3?"G":z-T).join("-")}}function m(B){return B&&B.id}function g(){lt("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),lt("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),i.selectors.selected[1]=!1,i.selectors.selected[0]=!1}function x(B,S,C){if(!i.selectors.enabled)return;const M=lt(C).attr("selector");lt("[id="+M+"]").attr("status")=="none"?lt(C).attr("selector")=="Opponent"?(lt("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),lt("[id=Opponent]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[1]=!0,i.selectors.selected[0]=!1):(lt("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),lt("[id=Player]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[0]=!0,i.selectors.selected[1]=!1):(lt("[id="+M+"]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),lt(C).attr("selector")=="Opponent"?i.selectors.selected[1]=!1:i.selectors.selected[0]=!1),s()}function A(B){if(!u.p[B.id])return[];const S=u.p[B.id]==null?1:u.p[B.id],C=u.w[B.id]?u.w[B.id]:0,M=u.e[B.id]?u.e[B.id]:0,T=C/S*100,O=(S-(C+M))/S*100;return[{offset:"0%",color:i.lines.points.unknown},{offset:O+"%",color:i.lines.points.unknown},{offset:O+"%",color:i.lines.points.winners},{offset:O+T+"%",color:i.lines.points.winners},{offset:O+T+"%",color:i.lines.points.errors},{offset:"100%",color:i.lines.points.errors}]}const k=.07,R=.14,N=.05,v=.21,_={col1:k,col2:k+R,col3:k+2*R,col4:k+3*R,col5:k+4*R,col6:k+5*R,col7:k+6*R,row1:N,row2:N+v,row3:N+2*v,row4:N+3*v,row5:N+4*v,foot:N+4.1*v,adr1:N+3.5*v,adc1:k+R*2.5,adc2:k+R*3.5,selc:k*.8,tslc:k,sl1r:N/2,sl2r:N*1.5,plr1:k*.8,plr2:k+4*R,plrs:N+4.25*v},y={"p0-0":{x:_.col4,y:_.row1},"p1-1":{x:_.col4,y:_.row2},"p2-2":{x:_.col4,y:_.row3},"p3-3":{x:_.col4,y:_.row4},"p1-0":{x:_.col3,y:_.row2},"p0-1":{x:_.col5,y:_.row2},"p2-1":{x:_.col3,y:_.row3},"p1-2":{x:_.col5,y:_.row3},"p2-0":{x:_.col2,y:_.row3},"p0-2":{x:_.col6,y:_.row3},"p3-2":{x:_.col3,y:_.row4},"p2-3":{x:_.col5,y:_.row4},"p3-1":{x:_.col2,y:_.row4},"p1-3":{x:_.col6,y:_.row4},"p3-0":{x:_.col1,y:_.row4},"p0-3":{x:_.col7,y:_.row4},"p3-4":{x:_.adc1,y:_.adr1},"p4-3":{x:_.adc2,y:_.adr1},"p5-3":{x:_.adc2,y:_.row5},"p3-5":{x:_.adc1,y:_.row5},"p4-1":{x:_.col2,y:_.row5},"p1-4":{x:_.col6,y:_.row5},"p4-2":{x:_.col3,y:_.row5},"p2-4":{x:_.col5,y:_.row5},"p4-0":{x:_.col1,y:_.row5},"p0-4":{x:_.col7,y:_.row5},"pG-3":{x:_.col4,y:_.row5},"p3-G":{x:_.col4,y:_.row5},sPlyr:{x:_.adc1,y:_.plrs},tPlyr:{x:_.col2,y:_.plrs},sOpp:{x:_.adc2,y:_.plrs},tOpp:{x:_.col6,y:_.plrs},GAME:{x:_.col4,y:_.foot},L1s:{x:_.col1,y:_.foot},L1e:{x:_.adc1,y:_.foot},L2s:{x:_.adc2,y:_.foot},L2e:{x:_.col7,y:_.foot}},P=[{name:"0-0",pos:y["p0-0"],player:0},{name:"15-15",pos:y["p1-1"],player:0},{name:"30-30",pos:y["p2-2"],player:0},{name:"40-40",pos:y["p3-3"],player:0},{name:"0-15",pos:y["p0-1"],color_pct:.4,player:1},{name:"15-30",pos:y["p1-2"],color_pct:.4,player:1},{name:"0-30",pos:y["p0-2"],color_pct:.2,player:1},{name:"30-40",pos:y["p2-3"],color_pct:.4,player:1},{name:"15-40",pos:y["p1-3"],color_pct:.2,player:1},{name:"0-40",pos:y["p0-3"],color_pct:0,player:1},{name:"40-A",pos:y["p4-3"],color_pct:.5,player:1},{name:"15-0",pos:y["p1-0"],color_pct:.4,player:0},{name:"30-15",pos:y["p2-1"],color_pct:.4,player:0},{name:"30-0",pos:y["p2-0"],color_pct:.2,player:0},{name:"40-30",pos:y["p3-2"],color_pct:.4,player:0},{name:"40-15",pos:y["p3-1"],color_pct:.2,player:0},{name:"40-0",pos:y["p3-0"],color_pct:0,player:0},{name:"A-40",pos:y["p3-4"],color_pct:.5,player:0}],q=[{id:"L0-0x0-1",start:y["p0-0"],end:y["p0-1"]},{id:"L0-0x1-0",start:y["p0-0"],end:y["p1-0"]},{id:"L0-1x0-2",start:y["p0-1"],end:y["p0-2"]},{id:"L0-1x1-1",start:y["p0-1"],end:y["p1-1"]},{id:"L1-0x2-0",start:y["p1-0"],end:y["p2-0"]},{id:"L1-0x1-1",start:y["p1-0"],end:y["p1-1"]},{id:"L1-1x1-2",start:y["p1-1"],end:y["p1-2"]},{id:"L1-1x2-1",start:y["p1-1"],end:y["p2-1"]},{id:"L2-0x2-1",start:y["p2-0"],end:y["p2-1"]},{id:"L2-0x3-0",start:y["p2-0"],end:y["p3-0"]},{id:"L2-1x2-2",start:y["p2-1"],end:y["p2-2"]},{id:"L2-1x3-1",start:y["p2-1"],end:y["p3-1"]},{id:"L2-2x2-3",start:y["p2-2"],end:y["p2-3"]},{id:"L2-2x3-2",start:y["p2-2"],end:y["p3-2"]},{id:"L0-2x0-3",start:y["p0-2"],end:y["p0-3"]},{id:"L0-2x1-2",start:y["p0-2"],end:y["p1-2"]},{id:"L0-3x0-4",start:y["p0-3"],end:y["p0-4"]},{id:"L0-3x1-3",start:y["p0-3"],end:y["p1-3"]},{id:"L1-2x2-2",start:y["p1-2"],end:y["p2-2"]},{id:"L1-2x1-3",start:y["p1-2"],end:y["p1-3"]},{id:"L1-3x2-3",start:y["p1-3"],end:y["p2-3"]},{id:"L1-3x1-4",start:y["p1-3"],end:y["p1-4"]},{id:"L2-3x3-3",start:y["p2-3"],end:y["p3-3"]},{id:"L2-3x2-4",start:y["p2-3"],end:y["p2-4"]},{id:"L3-3x3-4",start:y["p3-3"],end:y["p4-3"]},{id:"L3-3x4-3",start:y["p3-3"],end:y["p3-4"]},{id:"L3-2x3-3",start:y["p3-2"],end:y["p3-3"]},{id:"L3-2x4-2",start:y["p3-2"],end:y["p4-2"]},{id:"L3-1x3-2",start:y["p3-1"],end:y["p3-2"]},{id:"L3-1x4-1",start:y["p3-1"],end:y["p4-1"]},{id:"L3-0x3-1",start:y["p3-0"],end:y["p3-1"]},{id:"L3-0x4-0",start:y["p3-0"],end:y["p4-0"]},{id:"L3-4x3-5",start:y["p4-3"],end:y["p5-3"]},{id:"L4-3x5-3",start:y["p3-4"],end:y["p3-5"]},{id:"L3-3xG-3",start:y["p3-3"],end:y["pG-3"]},{id:"L3-3x3-G",start:y["p3-3"],end:y["p3-G"]}],V=[{stroke:"blue",start:y.L1s,end:y.L1e,width:2},{stroke:"blue",start:y.L2s,end:y.L2e,width:2}],Q=[{pos:y["p0-0"],fill:"black",fontsize:.7,text:"0-0"},{pos:y["p1-1"],fill:"black",fontsize:.7,text:"15-15"},{pos:y["p2-2"],fill:"black",fontsize:.7,text:"30-30"},{pos:y["p3-3"],fill:"black",fontsize:.7,text:"40-40"},{pos:y["p0-1"],fill:"white",fontsize:.7,text:"0-15"},{pos:y["p1-2"],fill:"white",fontsize:.7,text:"15-30"},{pos:y["p0-2"],fill:"white",fontsize:.7,text:"0-30"},{pos:y["p2-3"],fill:"white",fontsize:.7,text:"30-40"},{pos:y["p1-3"],fill:"white",fontsize:.7,text:"15-40"},{pos:y["p0-3"],fill:"white",fontsize:.7,text:"0-40"},{pos:y["p4-3"],fill:"white",fontsize:.7,text:"40-A"},{pos:y["p1-0"],fill:"white",fontsize:.7,text:"15-0"},{pos:y["p2-1"],fill:"white",fontsize:.7,text:"30-15"},{pos:y["p2-0"],fill:"white",fontsize:.7,text:"30-0"},{pos:y["p3-2"],fill:"white",fontsize:.7,text:"40-30"},{pos:y["p3-1"],fill:"white",fontsize:.7,text:"40-15"},{pos:y["p3-0"],fill:"white",fontsize:.7,text:"40-0"},{pos:y["p3-4"],fill:"white",fontsize:.7,text:"A-40"}],j=[{pos:y.tPlyr,fill:"black",fontsize:.9,id:"Player",anchor:"middle",baseline:"hanging"},{pos:y.tOpp,fill:"black",fontsize:.9,id:"Opponent",anchor:"middle",baseline:"hanging"},{pos:y.GAME,fill:"#555555",fontsize:.9,id:"Game",anchor:"middle",baseline:"central"}],$=[{id:"Player",pos:y.sPlyr,r_pct:.4,opacity:1,status:"none"},{id:"Opponent",pos:y.sOpp,r_pct:.4,opacity:.4,status:"none"}];function K(B,S){const C=parseInt(B.slice(1),16),M=S<0?0:255,T=S<0?S*-1:S,O=C>>16,z=C>>8&255,Y=C&255;return"#"+(16777216+(Math.round((M-O)*T)+O)*65536+(Math.round((M-z)*T)+z)*256+(Math.round((M-Y)*T)+Y)).toString(16).slice(1)}function H(B,S){const C=B.split(","),M=S<0?0:255,T=S<0?S*-1:S,O=parseInt(C[0].slice(4)),z=parseInt(C[1]),Y=parseInt(C[2]);return"rgb("+(Math.round((M-O)*T)+O)+","+(Math.round((M-z)*T)+z)+","+(Math.round((M-Y)*T)+Y)+")"}function Z(B,S){return B.length>7?H(B,S):K(B,S)}function X(B){const S=document.createElement("div");S.style.color=B;const C=window.getComputedStyle(document.body.appendChild(S)).color.match(/\d+/g).map(function(M){return parseInt(M,10)});return document.body.removeChild(S),C.length>=3?"#"+((1<<24)+(C[0]<<16)+(C[1]<<8)+C[2]).toString(16).substr(1):!1}return h}function i0(){let t;const e={id:0,class:"ptsMatch",resize:!0,width:window.innerWidth,height:80,max_height:100,margins:{top:0,right:0,bottom:0,left:0},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{sizeToFit:!0,transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!0,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"#a55194",1:"#6b6ecf"}}};let n;const r=[];let i;const s=[];for(let c=0;c<5;c++)s.push(s0());const o={update:{begin:null,end:null},set_box:{mouseover:null,mouseout:null},point_bars:{mouseover:null,mouseout:null,click:null}};function a(c){if(i=c,e.display.sizeToFit){const f=c.node().getBoundingClientRect();e.width=Math.max(f.width,400)}const u=i.append("div").attr("class",e.class+"root").style("width",e.width+"px").style("height",e.height+"px");for(let f=0;f<5;f++)r[f]=u.append("div").attr("class","pts").style("display","none"),r[f].call(s[f]);n=function(f){var p;const h=t.sets();if(e.display.sizeToFit||f!=null&&f.sizeToFit){const m=c.node().getBoundingClientRect();e.width=Math.max(m.width,400),e.height=(m.height-(+e.margins.top+ +e.margins.bottom))/h.length,e.height>e.max_height&&(e.height=e.max_height)}let d=0;for(let m=0;m<s.length;m++)(p=h==null?void 0:h[m])!=null&&p.history.points().length?(r[m].style("display","inline"),s[m].width(e.width),s[m].height(e.height),s[m].update(),d+=+e.height+5):r[m].style("display","none");u.style("width",e.width+"px").style("height",d+"px")}}a.options=function(c){return arguments.length?(l(c,e),a):e};function l(c,u){if(!c||!u)return;const f=Object.keys(c),h=Object.keys(u);for(const d of f)if(h.indexOf(d)>=0){const p=u[d],m=c[d];typeof p=="object"&&typeof m!="function"&&p&&p.constructor!==Array?l(c[d],u[d]):u[d]=c[d]}}return a.events=function(c){return arguments.length?(l(c,o),a):o},a.colors=function(c){return arguments.length?(e.colors.players=c,a):e.colors},a.width=function(c){return arguments.length?(e.width=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.width(c)}),a):e.width},a.height=function(c){return arguments.length?(e.height=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.height(c)}),a):e.height},a.duration=function(c){return arguments.length?(e.display.transition_time=c,a):e.display.transition_time},a.update=function(c){o.update.begin&&o.update.begin();const u=t.sets(),f=Math.max(...u.map((h,d)=>h.history.points().filter(p=>p.set==d).length));return u.length>1&&a.options({points:{max_width_points:f}}),u.forEach(function(h,d){s[d].data(u[d]),s[d].options({id:d}),s[d].options({lines:e.lines,points:e.points,score:e.score,header:e.header}),s[d].options({set:e.set,display:e.display,colors:e.colors}),s[d].events(o),s[d].width(e.width).height(e.height).update(c)}),typeof n=="function"&&n(c),setTimeout(function(){o.update.end&&o.update.end()},e.display.transition_time),!0},a.data=function(c){if(!arguments.length)return t;t=c,a.update()},a}function s0(){let t,e,n;const r=["Ace","Winner","Serve Winner"],i=["Forced Error","Unforced Error","Double Fault","Penalty","Out","Net"],s={id:0,class:"ptsChart",resize:!0,width:window.innerWidth,height:80,margins:{top:5,right:15,bottom:5,left:5},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!1,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"blue",1:"purple"}}};let o,a;const l={set_box:{mouseover:null,mouseout:null},update:{begin:null,end:null},point_bars:{mouseover:null,mouseout:null,click:null}};function c(p){p.each(function(m,g,x){a=lt(x[g]);const A=a.append("svg").attr("class",s.class+"root").style("width",s.width+"px").style("height",s.height+"px"),k=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),R=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),N=k.append("text").attr("class",s.class+"Header").attr("opacity",0).attr("font-size",s.header.font_size).attr("font-weight",s.header.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+8+"px"}),v=k.append("text").attr("class",s.class+"Score").attr("opacity",0).attr("font-size",s.score.font_size).attr("font-weight",s.score.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+20+"px"});o=function(_,y){if(!t)return!1;A.transition().duration(s.display.transition_time).style("width",s.width+"px").style("height",s.height+"px");const P=t.history.action("addPoint").filter(D=>D.point.set==s.id),q=P[0].point.index;e=d(P),n=P.map(D=>D.needed.points_to_set);const V=Math.max(...[].concat(n.map(D=>D[0]),n.map(D=>D[1]))),Q=Math.max(...n[0]);n.unshift([Q,Q]);const j=Math.max.apply(null,P.map(function(D){return D.point.rally?D.point.rally.length:0}))+2;at(y);const $=re().domain([0,h()]).range([0,s.width-(s.margins.left+s.margins.right)]);function K(D,G,ct){return D.range[G]<q?$(D.range[G]+ct):$(D.range[G]+ct-q)}const H=re().range([s.height-(s.margins.top+s.margins.bottom),s.margins.bottom]).domain([-2,V-1]),Z=k.selectAll("."+s.class+"SetBox").data([s.id]);Z.enter().append("rect").attr("class",s.class+"SetBox").style("position","relative").attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return $(f()+1)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none").on("mouseover",function(D,G){l.set_box.mouseover&&l.set_box.mouseover(D,G)}).on("mouseout",function(D,G){l.set_box.mouseout&&l.set_box.mouseout(D,G)}).merge(Z).transition().duration(y?0:s.display.transition_time).attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return $(f()+1)}),Z.exit().transition().duration(y?0:s.display.transition_time).style("opacity",0).remove();const X=k.selectAll("."+s.class+"GameBoundary").data(e);X.exit().remove(),X.enter().append("rect").attr("class",s.class+"GameBoundary").merge(X).attr("id",function(D,G){return s.class+s.id+"boundary"+G}).transition().duration(y?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+K(D,0,0)+", 0)"}).attr("height",H(-2)).attr("width",function(D){return K(D,1,1)-K(D,0,0)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none");const B=k.selectAll("."+s.class+"Game").data(e);B.exit().remove(),B.enter().append("rect").attr("class",s.class+"Game").merge(B).attr("id",function(D,G){return s.class+s.id+"game"+G}).transition().duration(y?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+K(D,0,0)+", 0)"}).attr("height",H(-2)).attr("width",function(D){return K(D,1,1)-K(D,0,0)}).attr("stroke",function(D){return s.colors.players[D.winner]}).attr("stroke-width",1).attr("fill",function(D){return D.winner!=null?s.colors.players[D.winner]:"none"});const S=yl().x(function(D,G){return $(G)}).y(function(D){return H(V-D)}),C=k.selectAll("."+s.class+"Line").data([0,1]);C.exit().remove(),C.enter().append("path").attr("class",s.class+"Line").attr("id",function(D){return s.class+s.id+"player"+D+"Line"}).attr("fill","none").merge(C).transition().duration(y?0:s.display.transition_time/2).style("opacity",.1).transition().duration(y?0:s.display.transition_time/2).style("opacity",1).attr("stroke",function(D){return s.colors.players[D]}).attr("stroke-width",function(){return s.lines.width}).attr("d",function(D){return S(n.map(G=>G[D]))});const M=[n.map(D=>({pts:D[0]})),n.map(D=>({pts:D[1]}))],T=k.selectAll("."+s.class+"BPWrapper").data(M);T.enter().append("g").attr("class",s.class+"BPWrapper"),T.exit().remove();const O=T.selectAll("."+s.class+"Breakpoint").data(function(D,G){return u(D,G)});O.exit().attr("opacity","0").remove(),O.enter().append("circle").attr("class",s.class+"Breakpoint").attr("opacity","0").merge(O).transition().duration(y?0:s.display.transition_time/2).style("opacity",0).transition().duration(y?0:s.display.transition_time/2).attr("fill",function(D,G){if(P[G-1]&&P[G-1].point.breakpoint!=null)return s.colors.players[D._i]}).style("opacity",function(D,G){if(P[G-1]&&P[G-1].point.breakpoint!=null)return P[G-1].point.server==1-D._i?1:0}).attr("cx",function(D,G){return $(G)}).attr("cy",function(D){return H(V-D.pts)}).attr("r",2);const z=$t(P.length),Y=Gr().domain(z).range([0,$(P.length)]).round(!0),E=re().domain([0,P.length]).range([0,$(P.length)]);k.selectAll(".gradient"+s.id).remove();const F=k.selectAll(".gradient"+s.id).data($t(P.length));F.exit().remove(),F.enter().append("linearGradient").attr("id",function(D,G){return"gradient"+s.id+G}).attr("class",function(){return"gradient"+s.id}).attr("gradientUnits","userSpaceOnUse").attr("x1",function(){return Y.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return Y.bandwidth()/2}).attr("y2",function(){return H(-2)}).merge(F).attr("transform",function(D,G){return"translate("+E(G)+", 0)"});const U=F.selectAll(".points_stop").data(function(D){return xt(P[D].point)});U.exit().remove(),U.enter().append("stop").attr("class","points_stop").attr("offset",function(D){return D.offset}).attr("stop-color",function(D){return D.color}).merge(U).attr("offset",function(D){return D.offset});const W=R.selectAll("."+s.class+"Bar").data($t(P.length));W.exit().transition().duration(y?0:s.display.transition_time).attr("opacity","0").remove(),W.enter().append("line").attr("class",s.class+"Bar").attr("opacity","0").merge(W).attr("opacity","0").attr("transform",function(D,G){return"translate("+E(G)+", 0)"}).attr("x1",function(){return Y.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return Y.bandwidth()/2}).attr("y2",function(){return H(-2)}).attr("stroke-width",function(){return Y.bandwidth()}).attr("stroke",function(D,G){return"url(#gradient"+s.id+G+")"}).attr("uid",function(D,G){return"point"+G}).on("mousemove",function(D,G,ct){s.display.point_highlighting&&lt(ct[G]).attr("opacity",s.display.point_opacity),s.display.game_highlighting&&P[G]&&lt('[id="'+s.class+s.id+"game"+P[G].point.game+'"]').attr("opacity",s.display.game_opacity),l.point_bars.mouseover&&l.point_bars.mouseover(P[D],G),D==0&&R.selectAll("."+s.class+"Bar").attr("opacity",s.display.point_opacity)}).on("mouseout",function(D,G){R.selectAll("."+s.class+"Bar").attr("opacity",0),k.selectAll("."+s.class+"Game").attr("opacity","0"),l.point_bars.mouseout&&l.point_bars.mouseout(P[D],G),at()}).on("click",function(D,G,ct){l.point_bars.click&&l.point_bars.click(P[D],G,ct[G])});function at(D){const G=t.winner(),ct=t.metadata.players();function w(ae){const Ke=ae.split(" ");return Ke[Ke.length-1]}const tt=G!=null?ct[G].name:`${w(ct[0].name)}/${w(ct[1].name)}`;N.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(tt);const Rt=t.scoreboard(G);v.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(Rt)}function xt(D){let G=0,ct=0,w=0;if(s.display.win_err_highlight){console.log("calcstops:",D);const tt=D.rally,Rt=D.result,ae=tt?100-Math.floor(tt.length/j*100):100;r.indexOf(Rt)>=0?G=ae:i.indexOf(Rt)>=0?ct=ae:w=ae}return[{offset:"0%",color:"blue"},{offset:w+"%",color:"blue"},{offset:w+"%",color:"green"},{offset:w+G+"%",color:"green"},{offset:w+G+"%",color:"red"},{offset:w+G+ct+"%",color:"red"},{offset:w+G+ct+"%",color:s.colors.orientation},{offset:"100%",color:s.colors.orientation}]}}})}function u(p,m){for(const g of p)g._i=m;return p}function f(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return t.complete()?p:p<s.set.average_points?s.set.average_points:p}function h(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return Math.max(p,s.points.max_width_points,s.set.average_points)}function d(p){const m=[{points:[],range:[0,0]}];let g=0,x=0;return p.forEach(A=>{const k=A.point;k.game!=x&&(g+=1,x=k.game,m[g]={points:[],range:[k.index,k.index]}),m[g].points.push(k),m[g].index=g,m[g].set=A.set.index,m[g].score=A.game.games,m[g].complete=A.game.complete,m[g].range[1]=k.index,A.game.complete&&(m[g].winner=k.winner)}),m}return c.options=function(p){if(!arguments.length)return s;const m=Object.keys(p),g=Object.keys(s);for(const x of m)if(g.indexOf(x)>=0)if(typeof s[x]=="object"){const A=Object.keys(p[x]),k=Object.keys(s[x]);for(const R of A)k.indexOf(R)>=0&&(s[x][R]=p[x][R])}else s[x]=p[x];return c},c.data=function(p){if(!arguments.length)return t;t=p},c.events=function(p){if(!arguments.length)return l;const m=Object.keys(p),g=Object.keys(l);for(const x of m)g.indexOf(x)>=0&&(l[x]=p[x]);return c},c.colors=function(p){return arguments.length?(s.colors.players=p,c):s.colors},c.width=function(p){return arguments.length?(s.width=p,c):s.width},c.height=function(p){return arguments.length?(s.height=p,c):s.height},c.update=function(p){return l.update.begin&&l.update.begin(),typeof o=="function"&&o(p),setTimeout(function(){l.update.end&&l.update.end()},s.display.transition_time),!0},c.duration=function(p){return arguments.length?(s.display.transition_time=p,c):s.display.transition_time},c}function o0(){let t=["#a55194","#6b6ecf"];ot.mc=n0(),ot.mc.options({display:{sizeToFit:!1,continuous:!1,orientation:"vertical",transition_time:0,service:!1,rally:!0,player:!1,grid:!1,score:!0},colors:t}),ot.mc.events({score:{click:a0}}),lt("#momentumChart").call(ot.mc),t={players:["#a55194","#6b6ecf"]},ot.gamefish=Tl(),ot.gamefish.options({display:{sizeToFit:!0},colors:t}),lt("#gameFishChart").call(ot.gamefish),ot.gametree=r0();const e={display:{sizeToFit:!0},lines:{points:{winners:"green",errors:"#BA1212",unknown:"#2ed2db"},colors:{underlines:"black"}},nodes:{colors:{0:t.players[0],1:t.players[1],neutral:"#ecf0f1"}},selectors:{enabled:!0,selected:{0:!1,1:!1}}};ot.gametree.options(e),lt("#gameTreeChart").call(ot.gametree),ot.pts_match=i0(),ot.pts_match.options({margins:{top:40,bottom:20},display:{sizeToFit:!0}}),ot.pts_match.data(b.match),lt("#PTSChart").call(ot.pts_match)}function a0(t){qs(t.index)}function c0(){const t=document.getElementById("gamefish");t&&(t.style.display="none")}function qs(t){const e=document.getElementById("gamefish");e&&(e.style.display="flex");const n=hs(),r=t!=null?n[t]:n[n.length-1],i=r.points[0].tiebreak?["0","1","2","3","4","5","6","7"]:["0","15","30","40","G"];ot.gamefish.options({display:{reverse:b.swap_sides},fish:{gridcells:i,cell_size:20},score:r.score}),ot.gamefish.data(r.points).update(),window.scrollTo(0,0)}function Cl(){const t=b.orientation=="landscape"?"horizontal":"vertical";b.view=="pts"&&t=="vertical"?(pt("none","pts"),pt("inline","momentum"),ot.mc.width(window.innerWidth).height(820),ot.mc.update(),b.view="momentum"):b.view=="momentum"&&t=="horizontal"&&(pt("none","momentum"),pt("flex","pts"),ot.pts_match.update({sizeToFit:!0}),b.view="pts"),ot.gamefish&&ot.gamefish.update();const e=b.match.metadata.players();ot.gametree&&(ot.gametree.options({labels:{Player:e[0].name,Opponent:e[1].name}}),ot.gametree.update({sizeToFit:!0}))}function _a(){Qa(),Cl(),vt()}function l0(){document.oncontextmenu=()=>!1,window.addEventListener("contextmenu",t=>{t.preventDefault()},!1),window.onunhandledrejection=t=>{t.preventDefault();const e=t.reason,n=e&&(e.stack||e);n&&n.indexOf("blocked")>0?console.warn("popup blocked"):console.warn("Unhandled rejection:",e&&(e.stack||e))}}const Gs="@VERSION@";function u0(){console.log(`%cversion: ${Gs}`,"color: lightblue");const t=rt.get("mobile-provider");if(t){b.provider=t;const e=document.getElementById("provider");e&&(e.value=t)}l0()}function Ws(){return"tmxToken"}function f0(){let t,e,n=50,r=1e3;const i="black";let s=5,o=10,a=150,l=["white","blue"];const c={top:0,right:0,bottom:0,left:0};function u(f){const h=f.node().getBoundingClientRect();if((!e||!t)&&(n=Math.min(t||h.width,h.width,e||h.height,h.height)*.45,o=n/3),t=t||h.width,e=e||h.height,!e||!t)return;const d=re().domain([100,0]).range(l).interpolate(md),p=function(A){return d(Math.abs(A%20-10))},m=mm().domain($t(s)).range([0,e]);f.append("svg").attr("width",t).attr("height",e).append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(m.domain()).enter().append("circle").attr("fill","#000").attr("stroke",i).attr("stroke-width",o+"px").attr("r",0).attr("cx",t/2).attr("cy",e/2).style("fill",p).on("click",Yl).transition().duration(r).delay(A=>A*a).on("start",function A(k,R,N){vp(N[R]).attr("r",n).attr("stroke-width","0px").transition().attr("r",0).attr("stroke-width",o+"px").transition().on("start",A)})}return u.height=f=>f?(e=f,u):e,u.width=f=>f?(t=f,u):t,u.duration=f=>f?(r=f,u):r,u.pulse_circles=f=>f?(s=f,u):s,u.radius=f=>f?(n=f,u):n,u.delay_multiplier=f=>f?(a=f,u):a,u.stroke_width=f=>f?(o=f,u):o,u.color_range=f=>f?(l=f,u):l,u}const Zt=Object.create(null);Zt.open="0";Zt.close="1";Zt.ping="2";Zt.pong="3";Zt.message="4";Zt.upgrade="5";Zt.noop="6";const er=Object.create(null);Object.keys(Zt).forEach(t=>{er[Zt[t]]=t});const Ji={type:"error",data:"parser error"},Ml=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ol=typeof ArrayBuffer=="function",Nl=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Vs=({type:t,data:e},n,r)=>Ml&&e instanceof Blob?n?r(e):va(e,r):Ol&&(e instanceof ArrayBuffer||Nl(e))?n?r(e):va(new Blob([e]),r):r(Zt[t]+(e||"")),va=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function ba(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let _i;function h0(t,e){if(Ml&&t.data instanceof Blob)return t.data.arrayBuffer().then(ba).then(e);if(Ol&&(t.data instanceof ArrayBuffer||Nl(t.data)))return e(ba(t.data));Vs(t,!1,n=>{_i||(_i=new TextEncoder),e(_i.encode(n))})}const wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<wa.length;t++)dn[wa.charCodeAt(t)]=t;const d0=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=dn[t.charCodeAt(r)],o=dn[t.charCodeAt(r+1)],a=dn[t.charCodeAt(r+2)],l=dn[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},p0=typeof ArrayBuffer=="function",Ys=(t,e)=>{if(typeof t!="string")return{type:"message",data:Rl(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:m0(t.substring(1),e)}:er[n]?t.length>1?{type:er[n],data:t.substring(1)}:{type:er[n]}:Ji},m0=(t,e)=>{if(p0){const n=d0(t);return Rl(n,e)}else return{base64:!0,data:t}},Rl=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ll="",g0=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Vs(s,!1,a=>{r[o]=a,++i===n&&e(r.join(Ll))})})},y0=(t,e)=>{const n=t.split(Ll),r=[];for(let i=0;i<n.length;i++){const s=Ys(n[i],e);if(r.push(s),s.type==="error")break}return r};function _0(){return new TransformStream({transform(t,e){h0(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let vi;function Yn(t){return t.reduce((e,n)=>e+n.length,0)}function jn(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function v0(t,e){vi||(vi=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Yn(n)<1)break;const l=jn(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Yn(n)<2)break;const l=jn(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Yn(n)<8)break;const l=jn(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Ji);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Yn(n)<i)break;const l=jn(n,i);a.enqueue(Ys(s?l:vi.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(Ji);break}}}})}const Pl=4;function yt(t){if(t)return b0(t)}function b0(t){for(var e in yt.prototype)t[e]=yt.prototype[e];return t}yt.prototype.on=yt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};yt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};yt.prototype.off=yt.prototype.removeListener=yt.prototype.removeAllListeners=yt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};yt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};yt.prototype.emitReserved=yt.prototype.emit;yt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};yt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Dt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Il(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const w0=Dt.setTimeout,x0=Dt.clearTimeout;function Yr(t,e){e.useNativeTimers?(t.setTimeoutFn=w0.bind(Dt),t.clearTimeoutFn=x0.bind(Dt)):(t.setTimeoutFn=Dt.setTimeout.bind(Dt),t.clearTimeoutFn=Dt.clearTimeout.bind(Dt))}const k0=1.33;function A0(t){return typeof t=="string"?E0(t):Math.ceil((t.byteLength||t.size)*k0)}function E0(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function S0(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function T0(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class C0 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class js extends yt{constructor(e){super(),this.writable=!1,Yr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new C0(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Ys(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=S0(e);return n.length?"?"+n:""}}const Dl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Xi=64,M0={};let xa=0,Kn=0,ka;function Aa(t){let e="";do e=Dl[t%Xi]+e,t=Math.floor(t/Xi);while(t>0);return e}function Bl(){const t=Aa(+new Date);return t!==ka?(xa=0,ka=t):t+"."+Aa(xa++)}for(;Kn<Xi;Kn++)M0[Dl[Kn]]=Kn;let Fl=!1;try{Fl=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const O0=Fl;function Ul(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||O0))return new XMLHttpRequest}catch{}if(!e)try{return new Dt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function N0(){}const R0=function(){return new Ul({xdomain:!1}).responseType!=null}();class L0 extends js{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=R0&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};y0(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,g0(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Bl()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Kt(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Kt extends yt{constructor(e,n){super(),Yr(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Il(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new Ul(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=Kt.requestsCount++,Kt.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=N0,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Kt.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Kt.requestsCount=0;Kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ea);else if(typeof addEventListener=="function"){const t="onpagehide"in Dt?"pagehide":"unload";addEventListener(t,Ea,!1)}}function Ea(){for(let t in Kt.requests)Kt.requests.hasOwnProperty(t)&&Kt.requests[t].abort()}const Ks=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Jn=Dt.WebSocket||Dt.MozWebSocket,Sa=!0,P0="arraybuffer",Ta=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class I0 extends js{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Ta?{}:Il(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Sa&&!Ta?n?new Jn(e,n):new Jn(e):new Jn(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Vs(r,this.supportsBinary,s=>{const o={};try{Sa&&this.ws.send(s)}catch{}i&&Ks(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Bl()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Jn}}class D0 extends js{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=v0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=_0();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&Ks(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const B0={websocket:I0,webtransport:D0,polling:L0},F0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,U0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zi(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=F0.exec(t||""),s={},o=14;for(;o--;)s[U0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=H0(s,s.path),s.queryKey=$0(s,s.query),s}function H0(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function $0(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let Hl=class Me extends yt{constructor(e,n={}){super(),this.binaryType=P0,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=Zi(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=Zi(n.host).host),Yr(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=T0(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Pl,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new B0[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Me.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;Me.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Me.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Me.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=A0(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Me.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Hl.protocol=Pl;function z0(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Zi(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const q0=typeof ArrayBuffer=="function",G0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,$l=Object.prototype.toString,W0=typeof Blob=="function"||typeof Blob<"u"&&$l.call(Blob)==="[object BlobConstructor]",V0=typeof File=="function"||typeof File<"u"&&$l.call(File)==="[object FileConstructor]";function Js(t){return q0&&(t instanceof ArrayBuffer||G0(t))||W0&&t instanceof Blob||V0&&t instanceof File}function nr(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(nr(t[n]))return!0;return!1}if(Js(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return nr(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&nr(t[n]))return!0;return!1}function Y0(t){const e=[],n=t.data,r=t;return r.data=Qi(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Qi(t,e){if(!t)return t;if(Js(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Qi(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Qi(t[r],e));return n}return t}function j0(t,e){return t.data=ts(t.data,e),delete t.attachments,t}function ts(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ts(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ts(t[n],e));return t}const K0=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],J0=5;var it;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(it||(it={}));class X0{constructor(e){this.replacer=e}encode(e){return(e.type===it.EVENT||e.type===it.ACK)&&nr(e)?this.encodeAsBinary({type:e.type===it.EVENT?it.BINARY_EVENT:it.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===it.BINARY_EVENT||e.type===it.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Y0(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Ca(t){return Object.prototype.toString.call(t)==="[object Object]"}class Xs extends yt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===it.BINARY_EVENT;r||n.type===it.BINARY_ACK?(n.type=r?it.EVENT:it.ACK,this.reconstructor=new Z0(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Js(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(it[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===it.BINARY_EVENT||r.type===it.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Xs.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case it.CONNECT:return Ca(n);case it.DISCONNECT:return n===void 0;case it.CONNECT_ERROR:return typeof n=="string"||Ca(n);case it.EVENT:case it.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&K0.indexOf(n[0])===-1);case it.ACK:case it.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Z0{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=j0(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Q0=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xs,Encoder:X0,get PacketType(){return it},protocol:J0},Symbol.toStringTag,{value:"Module"}));function Ut(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ty=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zl extends yt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ut(e,"open",this.onopen.bind(this)),Ut(e,"packet",this.onpacket.bind(this)),Ut(e,"error",this.onerror.bind(this)),Ut(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(ty.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:it.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...o])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((o,a)=>r?o?s(o):i(a):i(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:it.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case it.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case it.EVENT:case it.BINARY_EVENT:this.onevent(e);break;case it.ACK:case it.BINARY_ACK:this.onack(e);break;case it.DISCONNECT:this.ondisconnect();break;case it.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:it.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:it.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function We(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}We.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};We.prototype.reset=function(){this.attempts=0};We.prototype.setMin=function(t){this.ms=t};We.prototype.setMax=function(t){this.max=t};We.prototype.setJitter=function(t){this.jitter=t};class es extends yt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Yr(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new We({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Q0;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Hl(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Ut(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ut(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ut(e,"ping",this.onping.bind(this)),Ut(e,"data",this.ondata.bind(this)),Ut(e,"error",this.onerror.bind(this)),Ut(e,"close",this.onclose.bind(this)),Ut(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Ks(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new zl(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const sn={};function rr(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=z0(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=sn[i]&&s in sn[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new es(r,e):(sn[i]||(sn[i]=new es(r,e)),l=sn[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(rr,{Manager:es,Socket:zl,io:rr,connect:rr});function ey(){const t=rt.get(Ws());return t?{authorization:`Bearer ${t}`}:void 0}const ht={socket:void 0};function Ve(){if((navigator.onLine||window.location.hostname=="localhost")&&!ht.socket){const e=`${window.location.hostname.startsWith("localhost")||window.location.hostname==="127.0.0.1"?"http://127.0.0.1:8383":window.location.hostname}/mobile`,n={transportOptions:{polling:{extraHeaders:ey()}},reconnectionAttempts:"Infinity","force new connection":!0,reconnectionDelay:1e3,timeout:2e4};ht.socket=rr(e,n),ht.socket&&(ht.socket.on("connect",ny),ht.socket.on("ack",r=>console.log({ack:r})),ht.socket.on("disconnect",ry),ht.socket.on("connect_error",iy),ht.socket.on("history request",Zs),ht.socket.on("tmx message",sy),ht.socket.on("exception",r=>console.log(r)),ht.socket.on("success",r=>console.log(r)))}}function jr(){ht.socket&&(ht.socket.disconnect(),ht.socket=void 0)}function Zs(){if(Ve(),ht.socket){const t=b.match.metadata.defineMatch(),e={matchUp:{tournament:b.match.metadata.defineTournament(),first_service:b.match.set.firstService(),players:b.match.metadata.players(),format:b.match.format.settings(),scoreboard:b.match.scoreboard(),points:b.match.history.points(),provider:b.provider,matchUpId:t.muid,ch_version:Gs,match:t}};t.muid&&ht.socket.emit("mh",{type:"history",payload:e})}be()}function ny(){console.log("connect")}function ry(){console.log("socket closed")}function iy(){qt(" <p> <h1>No Internet Connection!</h1>"),Wl()}function sy(t){if(!(t!=null&&t.matchUpId))return qt("<h2>Invalid Data</h2>");const e=Bu(t.data);de(),gs(e.match.muid),b.match.metadata.defineTournament({name:e.tournament.name,tuid:e.tournament.tuid,start_date:Fu(e.tournament.start)}),b.match.metadata.defineMatch({euid:e.event.euid});const n=e.teams&&e.teams[0].length===2?"doubles":"singles",r=Iu({sides:e.teams,format:n});b.match.metadata.definePlayer({index:0,name:r[0]}),b.match.metadata.definePlayer({index:1,name:r[1]});const i=e.event.surface;if(i){const o={C:"clay",H:"hard",G:"grass"};o[i]&&b.match.metadata.defineTournament({surface:o[i]})}const s=e.event.inout;if(s){const o={o:"out",i:"in"};o[s]&&b.match.metadata.defineTournament({in_out:o[s]})}Pr(),se(),vt("entry")}function ql(){return St.broadcast&&ht.socket?!0:(St.broadcast&&Ve(),!1)}function Gl(){Ve();const t=f0().color_range(["white","white"]).height(60).width(60).radius(28).stroke_width(5);lt("#startpulse").style("display","none"),lt("#pulse").style("display","block").call(t)}function Wl(){St.broadcast=!1,lt("#startpulse").style("display","flex"),lt("#pulse").style("display","none").selectAll("svg").remove(),jr()}function Vl(t){Object.assign(t,{timestamp:new Date().getTime(),uuuid:St.user_uuid}),ht.socket?(ht.socket.emit("mh",{type:"key",payload:t}),be()):qt(" <p> <h1>Not connected</h1> <p><i>Connection Error</i></p> </p> ")}function Yl(){St.broadcast=!St.broadcast,St.broadcast?Gl():Wl(),fs()}function Ma(t){if(ql()){const n={muid:b.match.metadata.defineMatch().muid,status:t},r=b.match.metadata.defineTournament();n.tuid=r.tuid||r.name,ht.socket.emit("mh",{type:"status",payload:n})}}class pn extends Error{}pn.prototype.name="InvalidTokenError";function oy(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function ay(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return oy(e)}catch{return atob(e)}}function cy(t,e){if(typeof t!="string")throw new pn("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new pn(`Invalid token specified: missing part #${n+1}`);let i;try{i=ay(r)}catch(s){throw new pn(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new pn(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}function ly(t){if(!t||t==="undefined")return;const e=cy(t),n=new Date;if(!((e==null?void 0:e.exp)<n.getTime()/1e3))return e}const jl=Ws();function uy(){rt.remove(jl),ht.socket&&(jr(),Ve())}function fy({data:t}){ly(t.token)&&(rt.set(jl,t.token),jr(),Ve(),console.log({intent:"is-success",message:"Login successful"}))}function Kl(t,e){return function(){return t.apply(e,arguments)}}const{toString:hy}=Object.prototype,{getPrototypeOf:Qs}=Object,Kr=(t=>e=>{const n=hy.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qt=t=>(t=t.toLowerCase(),e=>Kr(e)===t),Jr=t=>e=>typeof e===t,{isArray:Ye}=Array,Sn=Jr("undefined");function dy(t){return t!==null&&!Sn(t)&&t.constructor!==null&&!Sn(t.constructor)&&Bt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Jl=Qt("ArrayBuffer");function py(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Jl(t.buffer),e}const my=Jr("string"),Bt=Jr("function"),Xl=Jr("number"),Xr=t=>t!==null&&typeof t=="object",gy=t=>t===!0||t===!1,ir=t=>{if(Kr(t)!=="object")return!1;const e=Qs(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},yy=Qt("Date"),_y=Qt("File"),vy=Qt("Blob"),by=Qt("FileList"),wy=t=>Xr(t)&&Bt(t.pipe),xy=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Bt(t.append)&&((e=Kr(t))==="formdata"||e==="object"&&Bt(t.toString)&&t.toString()==="[object FormData]"))},ky=Qt("URLSearchParams"),Ay=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ln(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ye(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Zl(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tu=t=>!Sn(t)&&t!==Ql;function ns(){const{caseless:t}=tu(this)&&this||{},e={},n=(r,i)=>{const s=t&&Zl(e,i)||i;ir(e[s])&&ir(r)?e[s]=ns(e[s],r):ir(r)?e[s]=ns({},r):Ye(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ln(arguments[r],n);return e}const Ey=(t,e,n,{allOwnKeys:r}={})=>(Ln(e,(i,s)=>{n&&Bt(i)?t[s]=Kl(i,n):t[s]=i},{allOwnKeys:r}),t),Sy=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ty=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Cy=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Qs(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},My=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Oy=t=>{if(!t)return null;if(Ye(t))return t;let e=t.length;if(!Xl(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ny=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Qs(Uint8Array)),Ry=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Ly=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Py=Qt("HTMLFormElement"),Iy=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Oa=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Dy=Qt("RegExp"),eu=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ln(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},By=t=>{eu(t,(e,n)=>{if(Bt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Bt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Fy=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ye(t)?r(t):r(String(t).split(e)),n},Uy=()=>{},Hy=(t,e)=>(t=+t,Number.isFinite(t)?t:e),bi="abcdefghijklmnopqrstuvwxyz",Na="0123456789",nu={DIGIT:Na,ALPHA:bi,ALPHA_DIGIT:bi+bi.toUpperCase()+Na},$y=(t=16,e=nu.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function zy(t){return!!(t&&Bt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const qy=t=>{const e=new Array(10),n=(r,i)=>{if(Xr(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ye(r)?[]:{};return Ln(r,(o,a)=>{const l=n(o,i+1);!Sn(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},Gy=Qt("AsyncFunction"),Wy=t=>t&&(Xr(t)||Bt(t))&&Bt(t.then)&&Bt(t.catch),I={isArray:Ye,isArrayBuffer:Jl,isBuffer:dy,isFormData:xy,isArrayBufferView:py,isString:my,isNumber:Xl,isBoolean:gy,isObject:Xr,isPlainObject:ir,isUndefined:Sn,isDate:yy,isFile:_y,isBlob:vy,isRegExp:Dy,isFunction:Bt,isStream:wy,isURLSearchParams:ky,isTypedArray:Ny,isFileList:by,forEach:Ln,merge:ns,extend:Ey,trim:Ay,stripBOM:Sy,inherits:Ty,toFlatObject:Cy,kindOf:Kr,kindOfTest:Qt,endsWith:My,toArray:Oy,forEachEntry:Ry,matchAll:Ly,isHTMLForm:Py,hasOwnProperty:Oa,hasOwnProp:Oa,reduceDescriptors:eu,freezeMethods:By,toObjectSet:Fy,toCamelCase:Iy,noop:Uy,toFiniteNumber:Hy,findKey:Zl,global:Ql,isContextDefined:tu,ALPHABET:nu,generateString:$y,isSpecCompliantForm:zy,toJSONObject:qy,isAsyncFn:Gy,isThenable:Wy};function st(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}I.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ru=st.prototype,iu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{iu[t]={value:t}});Object.defineProperties(st,iu);Object.defineProperty(ru,"isAxiosError",{value:!0});st.from=(t,e,n,r,i,s)=>{const o=Object.create(ru);return I.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),st.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Vy=null;function rs(t){return I.isPlainObject(t)||I.isArray(t)}function su(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function Ra(t,e,n){return t?t.concat(e).map(function(i,s){return i=su(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Yy(t){return I.isArray(t)&&!t.some(rs)}const jy=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Zr(t,e,n){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!I.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(I.isDate(p))return p.toISOString();if(!l&&I.isBlob(p))throw new st("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(p)||I.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let x=p;if(p&&!g&&typeof p=="object"){if(I.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(I.isArray(p)&&Yy(p)||(I.isFileList(p)||I.endsWith(m,"[]"))&&(x=I.toArray(p)))return m=su(m),x.forEach(function(k,R){!(I.isUndefined(k)||k===null)&&e.append(o===!0?Ra([m],R,s):o===null?m:m+"[]",c(k))}),!1}return rs(p)?!0:(e.append(Ra(g,m,s),c(p)),!1)}const f=[],h=Object.assign(jy,{defaultVisitor:u,convertValue:c,isVisitable:rs});function d(p,m){if(!I.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),I.forEach(p,function(x,A){(!(I.isUndefined(x)||x===null)&&i.call(e,x,I.isString(A)?A.trim():A,m,h))===!0&&d(x,m?m.concat(A):[A])}),f.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return d(t),e}function La(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function to(t,e){this._pairs=[],t&&Zr(t,this,e)}const ou=to.prototype;ou.append=function(e,n){this._pairs.push([e,n])};ou.toString=function(e){const n=e?function(r){return e.call(this,r,La)}:La;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Ky(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function au(t,e,n){if(!e)return t;const r=n&&n.encode||Ky,i=n&&n.serialize;let s;if(i?s=i(e,n):s=I.isURLSearchParams(e)?e.toString():new to(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Jy{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Pa=Jy,cu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xy=typeof URLSearchParams<"u"?URLSearchParams:to,Zy=typeof FormData<"u"?FormData:null,Qy=typeof Blob<"u"?Blob:null,t_={isBrowser:!0,classes:{URLSearchParams:Xy,FormData:Zy,Blob:Qy},protocols:["http","https","file","blob","url","data"]},lu=typeof window<"u"&&typeof document<"u",e_=(t=>lu&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),n_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lu,hasStandardBrowserEnv:e_,hasStandardBrowserWebWorkerEnv:n_},Symbol.toStringTag,{value:"Module"})),Vt={...r_,...t_};function i_(t,e){return Zr(t,new Vt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Vt.isNode&&I.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function s_(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function o_(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function uu(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&I.isArray(i)?i.length:o,l?(I.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!I.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&I.isArray(i[o])&&(i[o]=o_(i[o])),!a)}if(I.isFormData(t)&&I.isFunction(t.entries)){const n={};return I.forEachEntry(t,(r,i)=>{e(s_(r),i,n,0)}),n}return null}function a_(t,e,n){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const eo={transitional:cu,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=I.isObject(e);if(s&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return i&&i?JSON.stringify(uu(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return i_(e,this.formSerializer).toString();if((a=I.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Zr(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),a_(e)):e}],transformResponse:[function(e){const n=this.transitional||eo.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&I.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?st.from(a,st.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{eo.headers[t]={}});const no=eo,c_=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l_=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&c_[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Ia=Symbol("internals");function on(t){return t&&String(t).trim().toLowerCase()}function sr(t){return t===!1||t==null?t:I.isArray(t)?t.map(sr):String(t)}function u_(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const f_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wi(t,e,n,r,i){if(I.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!I.isString(e)){if(I.isString(r))return e.indexOf(r)!==-1;if(I.isRegExp(r))return r.test(e)}}function h_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function d_(t,e){const n=I.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Qr{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=on(l);if(!u)throw new Error("header name must be a non-empty string");const f=I.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=sr(a))}const o=(a,l)=>I.forEach(a,(c,u)=>s(c,u,l));return I.isPlainObject(e)||e instanceof this.constructor?o(e,n):I.isString(e)&&(e=e.trim())&&!f_(e)?o(l_(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=on(e),e){const r=I.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return u_(i);if(I.isFunction(n))return n.call(this,i,r);if(I.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=on(e),e){const r=I.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||wi(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=on(o),o){const a=I.findKey(r,o);a&&(!n||wi(r,r[a],a,n))&&(delete r[a],i=!0)}}return I.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||wi(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return I.forEach(this,(i,s)=>{const o=I.findKey(r,s);if(o){n[o]=sr(i),delete n[s];return}const a=e?h_(s):String(s).trim();a!==s&&delete n[s],n[a]=sr(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return I.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&I.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ia]=this[Ia]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=on(o);r[a]||(d_(i,o),r[a]=!0)}return I.isArray(e)?e.forEach(s):s(e),this}}Qr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Qr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});I.freezeMethods(Qr);const ie=Qr;function xi(t,e){const n=this||no,r=e||n,i=ie.from(r.headers);let s=r.data;return I.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function fu(t){return!!(t&&t.__CANCEL__)}function Pn(t,e,n){st.call(this,t??"canceled",st.ERR_CANCELED,e,n),this.name="CanceledError"}I.inherits(Pn,st,{__CANCEL__:!0});function p_(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new st("Request failed with status code "+n.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const m_=Vt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];I.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),I.isString(r)&&o.push("path="+r),I.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function g_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function y_(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hu(t,e){return t&&!g_(e)?y_(t,e):e}const __=Vt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=I.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function v_(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function b_(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,h=0;for(;f!==i;)h+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Da(t,e){let n=0;const r=b_(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const w_=typeof XMLHttpRequest<"u",x_=w_&&function(t){return new Promise(function(n,r){let i=t.data;const s=ie.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(I.isFormData(i)){if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[m,...g]=u?u.split(";").map(x=>x.trim()).filter(Boolean):[];s.setContentType([m||"multipart/form-data",...g].join("; "))}}let f=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+g))}const h=hu(t.baseURL,t.url);f.open(t.method.toUpperCase(),au(h,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function d(){if(!f)return;const m=ie.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:m,config:t,request:f};p_(function(k){n(k),c()},function(k){r(k),c()},x),f=null}if("onloadend"in f?f.onloadend=d:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(d)},f.onabort=function(){f&&(r(new st("Request aborted",st.ECONNABORTED,t,f)),f=null)},f.onerror=function(){r(new st("Network Error",st.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||cu;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new st(g,x.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,t,f)),f=null},Vt.hasStandardBrowserEnv&&(a&&I.isFunction(a)&&(a=a(t)),a||a!==!1&&__(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&m_.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}i===void 0&&s.setContentType(null),"setRequestHeader"in f&&I.forEach(s.toJSON(),function(g,x){f.setRequestHeader(x,g)}),I.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),o&&o!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",Da(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",Da(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{f&&(r(!m||m.type?new Pn(null,t,f):m),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=v_(h);if(p&&Vt.protocols.indexOf(p)===-1){r(new st("Unsupported protocol "+p+":",st.ERR_BAD_REQUEST,t));return}f.send(i||null)})},is={http:Vy,xhr:x_};I.forEach(is,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ba=t=>`- ${t}`,k_=t=>I.isFunction(t)||t===null||t===!1,du={getAdapter:t=>{t=I.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!k_(n)&&(r=is[(o=String(n)).toLowerCase()],r===void 0))throw new st(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Ba).join(`
`):" "+Ba(s[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:is};function ki(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pn(null,t)}function Fa(t){return ki(t),t.headers=ie.from(t.headers),t.data=xi.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),du.getAdapter(t.adapter||no.adapter)(t).then(function(r){return ki(t),r.data=xi.call(t,t.transformResponse,r),r.headers=ie.from(r.headers),r},function(r){return fu(r)||(ki(t),r&&r.response&&(r.response.data=xi.call(t,t.transformResponse,r.response),r.response.headers=ie.from(r.response.headers))),Promise.reject(r)})}const Ua=t=>t instanceof ie?t.toJSON():t;function qe(t,e){e=e||{};const n={};function r(c,u,f){return I.isPlainObject(c)&&I.isPlainObject(u)?I.merge.call({caseless:f},c,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function i(c,u,f){if(I.isUndefined(u)){if(!I.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!I.isUndefined(u))return r(void 0,u)}function o(c,u){if(I.isUndefined(u)){if(!I.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(Ua(c),Ua(u),!0)};return I.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||i,h=f(t[u],e[u],u);I.isUndefined(h)&&f!==a||(n[u]=h)}),n}const pu="1.6.5",ro={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ro[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Ha={};ro.transitional=function(e,n,r){function i(s,o){return"[Axios v"+pu+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new st(i(o," has been removed"+(n?" in "+n:"")),st.ERR_DEPRECATED);return n&&!Ha[o]&&(Ha[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function A_(t,e,n){if(typeof t!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new st("option "+s+" must be "+l,st.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new st("Unknown option "+s,st.ERR_BAD_OPTION)}}const ss={assertOptions:A_,validators:ro},le=ss.validators;class Tr{constructor(e){this.defaults=e,this.interceptors={request:new Pa,response:new Pa}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=qe(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ss.assertOptions(r,{silentJSONParsing:le.transitional(le.boolean),forcedJSONParsing:le.transitional(le.boolean),clarifyTimeoutError:le.transitional(le.boolean)},!1),i!=null&&(I.isFunction(i)?n.paramsSerializer={serialize:i}:ss.assertOptions(i,{encode:le.function,serialize:le.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&I.merge(s.common,s[n.method]);s&&I.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=ie.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!l){const p=[Fa.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),h=p.length,u=Promise.resolve(n);f<h;)u=u.then(p[f++],p[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const p=a[f++],m=a[f++];try{d=p(d)}catch(g){m.call(this,g);break}}try{u=Fa.call(this,d)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=qe(this.defaults,e);const n=hu(e.baseURL,e.url);return au(n,e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(e){Tr.prototype[e]=function(n,r){return this.request(qe(r||{},{method:e,url:n,data:(r||{}).data}))}});I.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(qe(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Tr.prototype[e]=n(),Tr.prototype[e+"Form"]=n(!0)});const or=Tr;class io{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Pn(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new io(function(i){e=i}),cancel:e}}}const E_=io;function S_(t){return function(n){return t.apply(null,n)}}function T_(t){return I.isObject(t)&&t.isAxiosError===!0}const os={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(os).forEach(([t,e])=>{os[e]=t});const C_=os;function mu(t){const e=new or(t),n=Kl(or.prototype.request,e);return I.extend(n,or.prototype,e,{allOwnKeys:!0}),I.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return mu(qe(t,i))},n}const _t=mu(no);_t.Axios=or;_t.CanceledError=Pn;_t.CancelToken=E_;_t.isCancel=fu;_t.VERSION=pu;_t.toFormData=Zr;_t.AxiosError=st;_t.Cancel=_t.CanceledError;_t.all=function(e){return Promise.all(e)};_t.spread=S_;_t.isAxiosError=T_;_t.mergeConfig=qe;_t.AxiosHeaders=ie;_t.formToJSON=t=>uu(I.isHTMLForm(t)?new FormData(t):t);_t.getAdapter=du.getAdapter;_t.HttpStatusCode=C_;_t.default=_t;const M_=_t,gu=Ws(),O_="http://localhost:8383",In=M_.create({baseURL:O_});In.interceptors.request.use(t=>{const e=rt.get(gu);return e&&(t.headers.common.authorization=`Bearer ${e}`),t},t=>Promise.reject(t));In.interceptors.response.use(t=>t,t=>{var e;if(t.message==="Network Error"&&console.log({message:t.message,intent:"is-danger"}),t.response){((e=t.response)==null?void 0:e.status)===401&&yu();const n=t.response.data.message||t.response.data.error||t.response.data;console.log({message:n,intent:"is-danger"})}});const N_=()=>{const t=rt.get(gu);t&&(In.defaults.headers.common.authorization=`Bearer ${t}`)},yu=()=>{In.defaults.headers.common.authorization=void 0},R_={...In,removeAuthorization:yu,addAuthorization:N_};async function L_(t,e){return R_.post("/auth/login",{password:e,email:t})}function P_({email:t,password:e}){const n=r=>{(r==null?void 0:r.status)===200&&fy(r)};L_(t,e).then(n,r=>console.log({err:r}))}function I_(){window.dev={submitCredentials:P_,disconnectSocket:jr,connectSocket:Ve,sendHistory:Zs,viewManager:vt,version:Gs,logOut:uy,coms:ht,app:St,env:b}}function _u(){const t={};let e=["surface","in_out","draw","draw_size","round"];e.forEach(n=>{const r=`tournament_${n}`,i=document.getElementById(r);if(i.selectedIndex>=0){const s=i.options[i.selectedIndex].value;s&&(t[n]=s)}}),e=["name","start_date","tour","rank"],e.forEach(n=>{const i=document.getElementById(`tournament_${n}`).value;i&&(t[n]=i.trim())}),b.match.metadata.defineTournament(t),de()}function vu(){const t={};["court","umpire"].forEach(n=>{const i=document.getElementById(`match_${n}`).value;i&&(t[n]=i)}),b.match.metadata.defineMatch(t),de()}function D_(){_u(),vu();const e=document.getElementById("provider").value;b.provider=e,e&&rt.set("mobile-provider",e)}let bu;const gt={elapsed:1e5,held:void 0,touched:void 0,holdTime:800,holdAction:void 0,holdActions:{}},Tn={};let Ot={};const B_=(t,e)=>t.filter(n=>e.indexOf(n)!==-1).filter((n,r,i)=>i.indexOf(n)===r);gt.reset=()=>(Ot={},gt);gt.register=(t,e,n,r)=>(typeof n=="function"&&(Ot[e]||(Ot[e]={},Tn[e]=[]),Ot[e][t]={fx:n,delay:r},Tn[e]=Object.keys(Ot[e])),gt);gt.deRegister=(t,e)=>(Ot[e]&&(delete Ot[e][t],Tn[e]=Object.keys(Ot[e])),gt);gt.call=(t,e,...n)=>{var r,i;return(i=(r=Ot==null?void 0:Ot[e])==null?void 0:r[t])==null?void 0:i.fx(...n)};gt.trigger=(t,e,n,r)=>Ot[e][t].fx(n,r,e);gt.list=()=>console.log(Ot);const F_="ontouchstart"in document.documentElement?"touchstart":"click";document.addEventListener(F_,t=>je({evt:t,evnt:"tap"}));document.addEventListener("change",t=>je({evt:t,evnt:"change"}));document.addEventListener("click",t=>je({evt:t,evnt:"click"}));document.addEventListener("mouseover",t=>je({evt:t,evnt:"mouseover",stopPropagation:!1}));document.addEventListener("mouseout",t=>je({evt:t,evnt:"mouseout",stopPropagation:!1}));document.addEventListener("keyup",t=>je({evt:t,evnt:"keyup",stopPropagation:!1}));let $a=0;function je({evt:t,evnt:e,stopPropagation:n=!0}){n&&t.stopPropagation();const r={x:t.clientX,y:t.clientY,pageX:t.pageX,pageY:t.pageY},i=Array.from(t.target.classList),s=i.length&&Tn[e]?B_(i,Tn[e]):[];if(s.length){const o=new Date().getTime();gt.elapsed=o-$a,$a=o,s.forEach(a=>{U_({cls:a,evt:t,evnt:e,mouse:r})})}}function U_({cls:t,evt:e,evnt:n,mouse:r}){const i=e.target;Ot[n][t].fx(i,r,n,e)}document.addEventListener("touchstart",t=>{gt.touched=t.target,gt.coords=[t.touches[0].clientX,t.touches[0].clientY],gt.touched&&(bu=setTimeout(function(){H_()},gt.holdTime))},!1);document.addEventListener("touchend",function(){wu()},!1);document.addEventListener("touchmove",function(t){gt.touched!==t.target&&wu()},!1);function wu(){clearTimeout(bu)}function H_(){typeof gt.holdAction=="function"&&(gt.held=gt.touched,gt.holdAction(gt.held,gt.coords))}let Cr=!1,za,yn="";function $_(){clearTimeout(za),Cr=!0,yn!=="can-touch"&&(yn="can-touch",document.documentElement.classList.add(yn)),za=setTimeout(function(){Cr=!1},500)}function z_(){!Cr&&yn==="can-touch"&&(Cr=!1,yn="",document.documentElement.classList.remove("can-touch"))}document.addEventListener("touchstart",$_,!1);document.addEventListener("mouseover",z_,!1);const q_=gt;function Dn(t){t=t||b.match.history.lastPoint();const e=b.match.metadata.players();if(e[0].name!=cr[0]&&e[1].name!=cr[1]&&ql()){const r=us.geoposition.coords||{},i=b.match.metadata.defineTournament(),s=b.match.metadata.defineMatch(),o={tournament:i,match:b.match.metadata.defineMatch(),event:{euid:s.euid},status:b.match.status,players:b.match.metadata.players(),score:b.match.score(),point:t.point,serving:b.match.nextTeamServing(),complete:b.match.complete(),winner:b.match.winner(),geoposition:{latitude:r.latitude,longitude:r.longitude},undo:typeof t=="string"&&t=="Undo"};G_(o)}}let Ai,Ei,Xn=0;const qa=1e4;function G_(t){const e=Date.now();if(Ai=t,e-Xn>qa)ht.socket.emit("mh",{type:"score",payload:{next_update:Ai}}),Xn=e;else{Ei&&clearTimeout(Ei);const n=qa-(e-Xn);Ei=setTimeout(function(){ht.socket.emit("mh",{type:"score",payload:{next_update:Ai}}),Xn=e},n)}}function as(t){if(b.match.complete()){const e=b.match.metadata.players()[b.match.winner()].name;return qt(`<div style="height: 50vh" class="flexcols flexcenter"><div>Match Complete!</div><div>Winner: ${e}</div></div>`),!0}else t!=null&&t.game.complete&&zt.display_gamefish&&qs()}function W_(t){const e=t.getAttribute("hand"),n=t.getAttribute("stroke");if(e&&n){const s=b.match.history.lastPoint();b.match.decoratePoint(s,{hand:e,stroke:n}),se()}zs();const r=b.match.history.action("addPoint"),i=r[r.length-1];as(i),Dn(i)}function V_(){b.match.metadata.definePlayer(Y_()),de()}function Y_(){const t={index:b.edit_player};["hand","entry","seed","draw_position","ioc"].forEach(a=>{const l=`player_${a}`,c=document.getElementById(l);if(c.selectedIndex>=0){const u=c.options[c.selectedIndex].value;u&&(t[a]=u)}});const n=document.getElementById("player_rank");n.value&&(t.rank=n.value);const r=document.getElementById("player_wtn");r.value&&(t.wtn=r.value);const i=document.getElementById("player_utr");i.value&&(t.utr=i.value);const s=document.getElementById("team");s.value&&(t.team=s.value);const o=document.getElementById("playerid");return o.value&&(t.id=o.value),t}function j_(t){const e=vn(t,"mf_format");if(e){const n=e.getAttribute("newFormat");b.match.format.type(n);const r=b.match.format.settings().name;document.getElementById("md_format").innerHTML=r,Lr(),de(),vt("entry")}}const Si="Double Fault",Ti={};function K_(t){const e=t.getAttribute("action");let n=parseInt(t.getAttribute("side")??0);const r=t.getAttribute("service"),i=t.getAttribute("role");if(as())return;const s=n?"right":"left";b.swap_sides&&["server","receiver"].indexOf(i)<0&&(n=1-n),ps();function o(d,p){Array.from(document.querySelectorAll(d)).forEach(g=>g.innerHTML=p)}function a(){b.rally_mode=!0,Array.from(document.querySelectorAll(".modeforce")).forEach(d=>d.style.display="flex"),o(".vs_action_button.winner","Winner"),o(".vs_action_button.fault","UFE"),o(".vs_action_button.forced","Forced"),Array.from(document.querySelectorAll(".vs_mode_button")).forEach(d=>{["Serve","Return","2nd Serve"].indexOf(d.innerHTML)>=0&&(d.innerHTML="Base Line")})}const l={firstServe(){b.serve2nd=!1},secondServe(){b.serve2nd=!Ti.serve2nd,Ti.serve2nd=!Ti.serve2nd},fault(d){if(d!=b.serving)return;if(b.serve2nd)return{code:"D"};const p=b.swap_sides?1-d:d;o(`.fault.display_${p}_serving`,Si),o(`.fault.modeerr_player${p}`,Si);const g=`.modeaction_player${b.swap_sides?1-b.serving:b.serving}`;Array.from(document.querySelectorAll(g)).forEach(x=>x.innerHTML="2nd Serve"),b.serve2nd=!0,Ma("Service Fault")},doubleFault(d){return d!=b.serving?void 0:{code:"d"}},ace(d){return d!=b.serving?void 0:b.serve2nd?{code:"a"}:{code:"A"}},winner(d){return{winner:d,result:"Winner"}},unforced(d){return{winner:1-d,result:"Unforced Error"}},forced(d){return{winner:1-d,result:"Forced Error"}},point(d){return{winner:d}},penalty(d){return console.log("penalty"),{winner:1-d,result:"Penalty",code:d==b.serving?"P":"Q"}},modewin(d,p){const m=t.innerHTML;if(m=="Ace")return l.ace(d,p);if(m=="Winner")return l.winner(d,p)},modeerr(d,p){const m=t.innerHTML;if(m=="Fault"||m==Si)return l.fault(d,p);if(m=="UFE")return l.unforced(d,p);if(m=="Forced")return l.forced(d,p);if(m=="Let")return l.let(d,p)},modeaction(){const d=t.innerHTML;["Serve","2nd Serve","Return"].indexOf(d)>=0&&a(),(d=="Serve"||d=="Return")&&a(),d=="Net"&&(t.innerHTML="Base Line"),d=="Base Line"&&(t.innerHTML="Net")},rally(){const d=t.innerHTML;b.rally=parseInt((d.match(/\d+/g)||["0"]).join("")),b.rally+=1,o(".rally",`Rally: ${b.rally}`),b.rally==1&&a()},let(){Ma("Service: Let"),b.lets+=1}},c=document.getElementById("click");if(c&&zt.audible_clicks&&c.play(),t.id&&J_(t.id),r&&r=="second_service"&&(b.serve2nd=!0),Object.keys(l).indexOf(e)<0)return;const u=["server","receiver"].indexOf(i);u>=0&&(n=u?b.receiving:b.serving);const f=b.serve2nd?{first_serve:{error:"Error",serves:["0e"]}}:{},h=l[e](n,f);if(h){X_(),Object.assign(f,h),b.rally&&(f.rally=new Array(b.rally));const d=Z_(f);d&&(f.location=d);const p=b.match.addPoint(f);zt.track_shot_types&&p.result&&p.point.result&&["Penalty","Ace","Double Fault"].indexOf(p.point.result)<0?zs(s):(as(p),Dn(p)),b.rally=0,b.lets=0,b.undone=[],ds()}Ir()}function J_(t){const e=document.getElementById(t);e&&(Mt[t].type=="flash"?(e.style.backgroundColor=Mt[t].color,e.style.color="white",setTimeout(()=>ps(),300)):Mt[t].type=="toggle"&&(e.style.backgroundColor=="white"?(b.serve2nd=t=="second_serve",e.style.backgroundColor=Mt[t].color,e.style.color="white"):(b.serve2nd=!1,e.style.backgroundColor="white",e.style.color=Mt[t].color),Object.keys(Mt).filter(r=>Mt[r].type=="toggle").filter(r=>r!=t).forEach(r=>nc(r))))}function X_(){if(b.match.history.points().length==0){const e=new Date;b.match.metadata.defineMatch({date:e.valueOf()})}}function Z_(t){const e=document.querySelectorAll(".modeaction_player0"),n=document.querySelectorAll(".modeaction_player1");if(e&&e[0].innerHTML=="Net"||n&&n[0].innerHTML=="Net"){if(t.result=="Unforced Error"||t.result=="Forced Error"){if(t.winner==0&&n[0].innerHTML=="Net"||t.winner==1&&e[0].innerHTML=="Net")return"Net"}else if(t.result=="Winner"&&(t.winner==0&&e[0].innerHTML=="Net"||t.winner==1&&n[0].innerHTML=="Net"))return"Net"}}function Q_(t){const e=t.getAttribute("matchId"),n=rt.get(e);n&&(tv(n,`match_${e}.json`),be())}function tv(t,e){e=e||"match.json";const n=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",window.URL!=null&&(r.href=window.URL.createObjectURL(n),r.click())}function ev(t){const n=vn(t,"statrow").getAttribute("id"),r=document.getElementById(n+"_chart");if(console.log({id:n,el:r}),r){const i=r.style.display!="none";r.style.display=i?"none":"flex"}}const nv=""+new URL("emailblack-vRUY2-4u.png",import.meta.url).href;function rv(){Dn();const t=rt.get("current_match"),e=t&&rt.get(t);if(e){const n=JSON.parse(e);let r=n.match.muid;r||(r=Fr(),n.match.muid=r,b.match.metadata.defineMatch({muid:r}),rt.set(t,JSON.stringify(n))),iv(n)}else qt(" <p> <h1>First Track a Match!</h1> </p> ")}function iv(t){var l;if(!ht.socket){qt(" <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> ");return}const n=`${St.broadcast?`CourtHive Live Score: ${location.origin}/scores?muid=${t.muid}`:""}%0D%0A `,r=St.broadcast?`
    <div class='closeModal flexcenter iconmargin'>
      <a href='mailto:?subject=CourtHive Match Link&body=${n}' class="notextdecoration">
          <img class="icon_large" src='${nv}'>
      </a> 
    </div>
  `:"",i=t?`
    <div class='flexcenter iconmargin'>
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
          <div class='export_action action_icon_large iconclipboard'></div> 
      </button>
    </div>
  `:"",s=(l=t==null?void 0:t.match)==null?void 0:l.muid,o=s?`
   <div matchId="${s}" class="sendHistory flexcenter">
      <div matchId="${s}" class='sendHistory export_action action_icon iconsave'></div>
   </div>
`:"",a=`
      <p>&nbsp;</p>
      <h1>Options for Sharing</h1>
      <div class='flexrows'> 
        ${r}
        ${o}
        ${i}
      </div>`;qt(a,JSON.stringify(t))}function sv(t){b.edit_point_index=t;const e=b.match.history.action("addPoint");b.edit_point=e[t].point,b.edit_point_result=b.edit_point.result;let n=b.edit_point.server?b.edit_point.score.split("-").reverse().join("-"):b.edit_point.score;n=="0-0"&&(n="Gamepoint");const r=document.getElementById("ep_sgp");r&&(r.innerHTML=`Set: ${b.edit_point.set+1}, Game: ${b.edit_point.game+1}, Point: ${n}`);const i=b.match.metadata.players();Array.from(document.querySelectorAll(".select_player")).forEach(c=>i.forEach((u,f)=>c.options[f]=new Option(u.name,f.toString())));const o=document.getElementById("point_winner"),a=document.getElementById("point_loser");o&&(o.value=b.edit_point.winner),a&&(a.value=b.edit_point.result||""),ov(),av(),xu();const l=document.getElementById("editpoint");l&&(l.style.display="flex")}function ov(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e==null?void 0:e.value,s=n==null?void 0:n.value;i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==s&&(t.value=1-s),(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=s&&(t.value=s)}function xu(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=t==null?void 0:t.value;b.edit_point_result=e.value,e.innerHTML="",e.options[0]=new Option("- select -","");let r=[];n==b.edit_point.server&&(r=["Ace","Double Fault"].concat(...r)),r=["Winner","Unforced Error","Forced Error"].concat(...r),r.forEach((i,s)=>e.options[s+1]=new Option(i,i)),e.value=b.edit_point_result}function av(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e.value;b.edit_point.result=i,(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=n.value&&(n.value=r),i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==n.value&&(n.value=1-r),xu()}function cv(){const t=document.getElementById("point_result"),n=document.getElementById("point_winner").value,r=t.value;b.edit_point.winner=n,b.edit_point.result=r,b.edit_point.code=void 0,se();const i=rt.get("current_match");if(i){ms(i,"pointhistory");const s=document.getElementById("editpoint");s&&(s.style.display="none")}}function lv(t){const e=parseInt(t.getAttribute("playerIndex")??0);b.edit_player=b.swap_sides?1-e:e,be();const n=document.getElementById("editplayer");n&&(n.style.display="flex");const r=b.match.metadata.players(b.edit_player),i=document.getElementById("playername");i&&(i.value=r.name);const s=document.getElementById("team");s&&(s.value=r.team??"");const o=document.getElementById("playerid");o&&(o.value=r.id??""),["hand","entry","seed","draw_position","ioc"].forEach(f=>{const h=`player_${f}`,d=document.getElementById(h);d&&(d.value=r[f]||"")});const l=document.getElementById("player_rank");l&&(l.value=r.rank||"");const c=document.getElementById("player_wtn");c&&(c.value=r.wtn||"");const u=document.getElementById("player_utr");u&&(u.value=r.utr||"")}const uv=""+new URL("points-zyGL2AXB.jpg",import.meta.url).href;function ku(t){const e=`
         <div class="helpintro">Quick Start</div>
         <div class="flexhelp"> <div class='iconmenub action_icon_large'></div> <div class="quicktitle">Main Menu</div> </div>
         <div class="quickitem"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>
         <div class="flexhelp"> <div class='iconsettingsb action_icon_large'></div> <div class="quicktitle">Settings</div> </div>
         <div class="quickitem"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>
         <div class="flexhelp"> <div class='iconchangeb action_icon_large'></div> <div class="quicktitle">Change First Server</div> </div>
         <div class="quickitem"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>
         <div class="quickitem"> <span>To simply advance points, tap the <b>Points</b> display </span></div>
         <div class="flexhelp"> <img src='${uv}'> </div>
      `,n=`
         <div class="helpintro">Save To Home Screen</div>
         <div class="helpitem">CourtHive is a Progressive Web App</div>
         <div class="helpitem"><b>For Full Screen View:</b></div>
         <div class="helpitem">On iOS use Safari to Save</div>
         <div class="helpitem">On Android use Chrome</div>
      `,r=`
         <div class="helpintro">How to</div>
         <div class="helpitem"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>
         <div class="helpitem"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>
         <div class="helpitem"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>
         <div class="helpitem"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>
         <div class="helpitem"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>
         <div class="helpitem"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>
         <div class="flexhelp"> <div class='iconbroadcast icon icon_5'></div> <div class="quicktitle">Enable Broadcast</div> </div>
         <div class="flexhelp"> <div class='iconshare icon icon_3'></div> <div class="quicktitle">Share (Email, Copy/Paste)</div> </div>
      `,i=t?e+n+r:r+n+e;qt(i)}function fv(){const t=`
         <p>&nbsp;</b>
         <h2>CourtHive</h2>
         <p>version <a id="version" target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">${Za}</a></p>
         <p>An 
            <a target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">Open Source</a> project developed by 
            <a target="_blank" href="http://TennisVisuals.com">TennisVisuals</a>
         </p>
         <p><a href="mailto:tennis.aip@gmail.com?subject=CourtHive">Feedback Welcome!</a></p>
         <h2>Help</h2>
         <div class="helpitem">Difficulties after an app update?</div>
         <div class="flexcenter">
            <div class='flexcenter reset' onclick="appReset()">Reset</div>
         </div>
         <p>&nbsp;</b>
      `;qt(t)}function hv(){qt(`
    <h2>Enter key:</h2>
    <input id='key' class='key_input input is-primary'>
    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>
  `);const e=document.getElementById("key"),n=document.getElementById("key");n&&n.addEventListener("keyup",s);const r=document.getElementById("submit_key");r&&r.addEventListener("click",i);function i(){e.value&&Vl({key:e.value})}function s(o){o.which==13&&i()}}function dv(t){const e=parseInt(t.getAttribute("gameIndex")??0);qs(e)}function pv(t){const e=vn(t,"ph_episode"),n=parseInt((e==null?void 0:e.getAttribute("pointIndex"))??0);sv(n)}function mv(){vt("stats")}function gv(){vt("matchformat")}function yv(){vt("gametree")}function _v(){vt("momentum")}function vv(){vt("pointhistory")}function bv(){vt("settings")}function wv(){vt("matcharchive")}function xv(){vt("entry")}function kv(){vt("mainmenu")}function Av(){if(b.serve2nd||b.rally_mode)b.serve2nd=!1,b.rally_mode=!1,b.rally=0,b.lets=0,Dr();else{const t=b.match.undo();Dn("Undo"),t&&b.undone.push(t),de(!0)}Ir()}function Ev(){if(!b.undone.length)return;const t=b.match.addPoint(b.undone.pop());Dn(t)}function Sv(){console.log("changeServer"),b.match.history.points().length||(b.match.set.firstService(1-b.serving),ds(),vt("entry"))}function Tv(){console.log("swapAction"),bn.user_swap=!bn.user_swap,tc(),Br()}function Cv(){q_.register("modalInfo","tap",fv).register("toggleChart","tap",ev).register("broadcastToggle","tap",Yl).register("modalShare","tap",rv).register("enterKey","tap",hv).register("changeFormat","tap",j_).register("closeModal","tap",be).register("newMatch","tap",ys).register("exportMatch","tap",Q_).register("sendHistory","tap",Zs).register("settings","tap",bv).register("outcomeEntry","tap",xv).register("matchArchive","tap",wv).register("mainMenu","tap",kv).register("modalHelp","tap",ku).register("updateAppState","tap",fs).register("updateStats","tap",Sl).register("closeGameFish","tap",c0).register("strokeAction","tap",W_).register("swapAction","tap",Tv).register("undoAction","tap",Av).register("redoAction","tap",Ev).register("changeServer","tap",Sv).register("updatePoint","tap",cv).register("editPlayer","tap",lv).register("updatePlayer","tap",V_).register("updateTournamentDetails","tap",_u).register("updateMatchDetails","tap",vu).register("updateDetails","tap",D_).register("viewGameFish","tap",dv).register("viewStats","tap",mv).register("viewGameTree","tap",yv).register("viewMomentum","tap",_v).register("viewEditPoint","tap",pv).register("viewMatchFormat","tap",gv).register("viewPointHistory","tap",vv).register("editMatchDetails","tap",Ju).register("classAction","tap",K_)}var Mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ov(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Au={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */(function(t,e){(function(r,i){t.exports=i()})(Mv,function(){return function(){var n={686:function(s,o,a){a.d(o,{default:function(){return C}});var l=a(279),c=a.n(l),u=a(370),f=a.n(u),h=a(817),d=a.n(h);function p(M){try{return document.execCommand(M)}catch{return!1}}var m=function(T){var O=d()(T);return p("cut"),O},g=m;function x(M){var T=document.documentElement.getAttribute("dir")==="rtl",O=document.createElement("textarea");O.style.fontSize="12pt",O.style.border="0",O.style.padding="0",O.style.margin="0",O.style.position="absolute",O.style[T?"right":"left"]="-9999px";var z=window.pageYOffset||document.documentElement.scrollTop;return O.style.top="".concat(z,"px"),O.setAttribute("readonly",""),O.value=M,O}var A=function(T,O){var z=x(T);O.container.appendChild(z);var Y=d()(z);return p("copy"),z.remove(),Y},k=function(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},z="";return typeof T=="string"?z=A(T,O):T instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(T==null?void 0:T.type)?z=A(T.value,O):(z=d()(T),p("copy")),z},R=k;function N(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(O){return typeof O}:N=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},N(M)}var v=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=T.action,z=O===void 0?"copy":O,Y=T.container,E=T.target,F=T.text;if(z!=="copy"&&z!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(E!==void 0)if(E&&N(E)==="object"&&E.nodeType===1){if(z==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(z==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(F)return R(F,{container:Y});if(E)return z==="cut"?g(E):R(E,{container:Y})},_=v;function y(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(O){return typeof O}:y=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},y(M)}function P(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")}function q(M,T){for(var O=0;O<T.length;O++){var z=T[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(M,z.key,z)}}function V(M,T,O){return T&&q(M.prototype,T),O&&q(M,O),M}function Q(M,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(T&&T.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),T&&j(M,T)}function j(M,T){return j=Object.setPrototypeOf||function(z,Y){return z.__proto__=Y,z},j(M,T)}function $(M){var T=Z();return function(){var z=X(M),Y;if(T){var E=X(this).constructor;Y=Reflect.construct(z,arguments,E)}else Y=z.apply(this,arguments);return K(this,Y)}}function K(M,T){return T&&(y(T)==="object"||typeof T=="function")?T:H(M)}function H(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function X(M){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},X(M)}function B(M,T){var O="data-clipboard-".concat(M);if(T.hasAttribute(O))return T.getAttribute(O)}var S=function(M){Q(O,M);var T=$(O);function O(z,Y){var E;return P(this,O),E=T.call(this),E.resolveOptions(Y),E.listenClick(z),E}return V(O,[{key:"resolveOptions",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof Y.action=="function"?Y.action:this.defaultAction,this.target=typeof Y.target=="function"?Y.target:this.defaultTarget,this.text=typeof Y.text=="function"?Y.text:this.defaultText,this.container=y(Y.container)==="object"?Y.container:document.body}},{key:"listenClick",value:function(Y){var E=this;this.listener=f()(Y,"click",function(F){return E.onClick(F)})}},{key:"onClick",value:function(Y){var E=Y.delegateTarget||Y.currentTarget,F=this.action(E)||"copy",U=_({action:F,container:this.container,target:this.target(E),text:this.text(E)});this.emit(U?"success":"error",{action:F,text:U,trigger:E,clearSelection:function(){E&&E.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(Y){return B("action",Y)}},{key:"defaultTarget",value:function(Y){var E=B("target",Y);if(E)return document.querySelector(E)}},{key:"defaultText",value:function(Y){return B("text",Y)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(Y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return R(Y,E)}},{key:"cut",value:function(Y){return g(Y)}},{key:"isSupported",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],E=typeof Y=="string"?[Y]:Y,F=!!document.queryCommandSupported;return E.forEach(function(U){F=F&&!!document.queryCommandSupported(U)}),F}}]),O}(c()),C=S},828:function(s){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==o;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}s.exports=l},438:function(s,o,a){var l=a(828);function c(h,d,p,m,g){var x=f.apply(this,arguments);return h.addEventListener(p,x,g),{destroy:function(){h.removeEventListener(p,x,g)}}}function u(h,d,p,m,g){return typeof h.addEventListener=="function"?c.apply(null,arguments):typeof p=="function"?c.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(x){return c(x,d,p,m,g)}))}function f(h,d,p,m){return function(g){g.delegateTarget=l(g.target,d),g.delegateTarget&&m.call(h,g)}}s.exports=u},879:function(s,o){o.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},o.nodeList=function(a){var l=Object.prototype.toString.call(a);return a!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in a&&(a.length===0||o.node(a[0]))},o.string=function(a){return typeof a=="string"||a instanceof String},o.fn=function(a){var l=Object.prototype.toString.call(a);return l==="[object Function]"}},370:function(s,o,a){var l=a(879),c=a(438);function u(p,m,g){if(!p&&!m&&!g)throw new Error("Missing required arguments");if(!l.string(m))throw new TypeError("Second argument must be a String");if(!l.fn(g))throw new TypeError("Third argument must be a Function");if(l.node(p))return f(p,m,g);if(l.nodeList(p))return h(p,m,g);if(l.string(p))return d(p,m,g);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(p,m,g){return p.addEventListener(m,g),{destroy:function(){p.removeEventListener(m,g)}}}function h(p,m,g){return Array.prototype.forEach.call(p,function(x){x.addEventListener(m,g)}),{destroy:function(){Array.prototype.forEach.call(p,function(x){x.removeEventListener(m,g)})}}}function d(p,m,g){return c(document.body,p,m,g)}s.exports=u},817:function(s){function o(a){var l;if(a.nodeName==="SELECT")a.focus(),l=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),l=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(a),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}s.exports=o},279:function(s){function o(){}o.prototype={on:function(a,l,c){var u=this.e||(this.e={});return(u[a]||(u[a]=[])).push({fn:l,ctx:c}),this},once:function(a,l,c){var u=this;function f(){u.off(a,f),l.apply(c,arguments)}return f._=l,this.on(a,f,c)},emit:function(a){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(a,l){var c=this.e||(this.e={}),u=c[a],f=[];if(u&&l)for(var h=0,d=u.length;h<d;h++)u[h].fn!==l&&u[h].fn._!==l&&f.push(u[h]);return f.length?c[a]=f:delete c[a],this}},s.exports=o,s.exports.TinyEmitter=o}},r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s](o,o.exports,i),o.exports}return function(){i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,{a:o}),o}}(),function(){i.d=function(s,o){for(var a in o)i.o(o,a)&&!i.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}}(),function(){i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)}}(),i(686)}().default})})(Au);var Nv=Au.exports;const Rv=Ov(Nv),Lv=[{ioc:"AFG",name:"Afghanistan"},{ioc:"ALB",name:"Albania"},{ioc:"ALG",name:"Algeria"},{ioc:"ASA",name:"American Samoa"},{ioc:"AND",name:"Andorra"},{ioc:"ANG",name:"Angola"},{ioc:"AIA",name:"Anguilla"},{ioc:"ANT",name:"Antigua & Barbuda"},{ioc:"ARG",name:"Argentina"},{ioc:"ARM",name:"Armenia"},{ioc:"ARU",name:"Aruba"},{ioc:"AUS",name:"Australia"},{ioc:"AUT",name:"Austria"},{ioc:"AZE",name:"Azerbaijan"},{ioc:"BAH",name:"Bahamas"},{ioc:"BRN",name:"Bahrain"},{ioc:"BAN",name:"Bangladesh"},{ioc:"BAR",name:"Barbados"},{ioc:"BLR",name:"Belarus"},{ioc:"BEL",name:"Belgium"},{ioc:"BIZ",name:"Belize"},{ioc:"BEN",name:"Benin"},{ioc:"BER",name:"Bermuda"},{ioc:"BHU",name:"Bhutan"},{ioc:"BOL",name:"Bolivia"},{ioc:"BIH",name:"Bosnia"},{ioc:"BOT",name:"Botswana"},{ioc:"BRA",name:"Brazil"},{ioc:"IVB",name:"British Virgin Islands"},{ioc:"BRU",name:"Brunei"},{ioc:"BUL",name:"Bulgaria"},{ioc:"BUR",name:"Burkina Faso"},{ioc:"BDI",name:"Burundi"},{ioc:"CAM",name:"Cambodia"},{ioc:"CMR",name:"Cameroon"},{ioc:"CAN",name:"Canada"},{ioc:"CPV",name:"Cape Verde"},{ioc:"AHO",name:"Caribbean Netherlands"},{ioc:"CAY",name:"Cayman Islands"},{ioc:"CAF",name:"Central African Republic"},{ioc:"CHA",name:"Chad"},{ioc:"CHI",name:"Chile"},{ioc:"CHN",name:"China"},{ioc:"COL",name:"Colombia"},{ioc:"COM",name:"Comoros"},{ioc:"CGO",name:"Congo - Brazzaville"},{ioc:"COD",name:"Congo - Kinshasa"},{ioc:"COK",name:"Cook Islands"},{ioc:"CRC",name:"Costa Rica"},{ioc:"CRO",name:"Croatia"},{ioc:"CUB",name:"Cuba"},{ioc:"CYP",name:"Cyprus"},{ioc:"CZE",name:"Czech Republic"},{ioc:"CIV",name:"Cte dIvoire"},{ioc:"DEN",name:"Denmark"},{ioc:"DJI",name:"Djibouti"},{ioc:"DMA",name:"Dominica"},{ioc:"DOM",name:"Dominican Republic"},{ioc:"ECU",name:"Ecuador"},{ioc:"EGY",name:"Egypt"},{ioc:"ESA",name:"El Salvador"},{ioc:"GEQ",name:"Equatorial Guinea"},{ioc:"ERI",name:"Eritrea"},{ioc:"EST",name:"Estonia"},{ioc:"ETH",name:"Ethiopia"},{ioc:"FLK",name:"Falkland Islands"},{ioc:"FAR",name:"Faroe Islands"},{ioc:"FIJ",name:"Fiji"},{ioc:"FIN",name:"Finland"},{ioc:"FRA",name:"France"},{ioc:"FGU",name:"French Guiana"},{ioc:"FPO",name:"French Polynesia"},{ioc:"GAB",name:"Gabon"},{ioc:"GAM",name:"Gambia"},{ioc:"GEO",name:"Georgia"},{ioc:"GER",name:"Germany"},{ioc:"GHA",name:"Ghana"},{ioc:"GIB",name:"Gibraltar"},{ioc:"GRE",name:"Greece"},{ioc:"GRL",name:"Greenland"},{ioc:"GRN",name:"Grenada"},{ioc:"GUD",name:"Guadeloupe"},{ioc:"GUM",name:"Guam"},{ioc:"GUA",name:"Guatemala"},{ioc:"GUI",name:"Guinea"},{ioc:"GBS",name:"Guinea-Bissau"},{ioc:"GUY",name:"Guyana"},{ioc:"HAI",name:"Haiti"},{ioc:"HON",name:"Honduras"},{ioc:"HKG",name:"Hong Kong"},{ioc:"HUN",name:"Hungary"},{ioc:"ISL",name:"Iceland"},{ioc:"IND",name:"India"},{ioc:"INA",name:"Indonesia"},{ioc:"IRI",name:"Iran"},{ioc:"IRQ",name:"Iraq"},{ioc:"IRL",name:"Ireland"},{ioc:"ISR",name:"Israel"},{ioc:"ITA",name:"Italy"},{ioc:"JAM",name:"Jamaica"},{ioc:"JPN",name:"Japan"},{ioc:"JOR",name:"Jordan"},{ioc:"KAZ",name:"Kazakhstan"},{ioc:"KEN",name:"Kenya"},{ioc:"KIR",name:"Kiribati"},{ioc:"KUW",name:"Kuwait"},{ioc:"KGZ",name:"Kyrgyzstan"},{ioc:"LAO",name:"Laos"},{ioc:"LAT",name:"Latvia"},{ioc:"LIB",name:"Lebanon"},{ioc:"LES",name:"Lesotho"},{ioc:"LBR",name:"Liberia"},{ioc:"LBA",name:"Libya"},{ioc:"LIE",name:"Liechtenstein"},{ioc:"LTU",name:"Lithuania"},{ioc:"LUX",name:"Luxembourg"},{ioc:"MAC",name:"Macau"},{ioc:"MKD",name:"Macedonia"},{ioc:"MAD",name:"Madagascar"},{ioc:"MAW",name:"Malawi"},{ioc:"MAS",name:"Malaysia"},{ioc:"MDV",name:"Maldives"},{ioc:"MLI",name:"Mali"},{ioc:"MLT",name:"Malta"},{ioc:"MSH",name:"Marshall Islands"},{ioc:"MRT",name:"Martinique"},{ioc:"MTN",name:"Mauritania"},{ioc:"MRI",name:"Mauritius"},{ioc:"MAY",name:"Mayotte"},{ioc:"MEX",name:"Mexico"},{ioc:"FSM",name:"Micronesia"},{ioc:"MDA",name:"Moldova"},{ioc:"MON",name:"Monaco"},{ioc:"MGL",name:"Mongolia"},{ioc:"MGO",name:"Montenegro"},{ioc:"MNT",name:"Montserrat"},{ioc:"MAR",name:"Morocco"},{ioc:"MOZ",name:"Mozambique"},{ioc:"MYA",name:"Myanmar"},{ioc:"NAM",name:"Namibia"},{ioc:"NRU",name:"Nauru"},{ioc:"NEP",name:"Nepal"},{ioc:"NED",name:"Netherlands"},{ioc:"NCD",name:"New Caledonia"},{ioc:"NZL",name:"New Zealand"},{ioc:"NCA",name:"Nicaragua"},{ioc:"NIG",name:"Niger"},{ioc:"NGR",name:"Nigeria"},{ioc:"NIU",name:"Niue"},{ioc:"NFI",name:"Norfolk Island"},{ioc:"PRK",name:"North Korea"},{ioc:"NMA",name:"Northern Mariana Islands"},{ioc:"NOR",name:"Norway"},{ioc:"OMA",name:"Oman"},{ioc:"PAK",name:"Pakistan"},{ioc:"PLW",name:"Palau"},{ioc:"PLE",name:"Palestine"},{ioc:"PAN",name:"Panama"},{ioc:"PNG",name:"Papua New Guinea"},{ioc:"PAR",name:"Paraguay"},{ioc:"PER",name:"Peru"},{ioc:"PHI",name:"Philippines"},{ioc:"POL",name:"Poland"},{ioc:"POR",name:"Portugal"},{ioc:"PUR",name:"Puerto Rico"},{ioc:"QAT",name:"Qatar"},{ioc:"ROU",name:"Romania"},{ioc:"RUS",name:"Russia"},{ioc:"RWA",name:"Rwanda"},{ioc:"REU",name:"Runion"},{ioc:"SAM",name:"Samoa"},{ioc:"SMR",name:"San Marino"},{ioc:"KSA",name:"Saudi Arabia"},{ioc:"SEN",name:"Senegal"},{ioc:"SRB",name:"Serbia"},{ioc:"SEY",name:"Seychelles"},{ioc:"SLE",name:"Sierra Leone"},{ioc:"SIN",name:"Singapore"},{ioc:"SVK",name:"Slovakia"},{ioc:"SLO",name:"Slovenia"},{ioc:"SOL",name:"Solomon Islands"},{ioc:"SOM",name:"Somalia"},{ioc:"RSA",name:"South Africa"},{ioc:"KOR",name:"South Korea"},{ioc:"ESP",name:"Spain"},{ioc:"SRI",name:"Sri Lanka"},{ioc:"HEL",name:"St. Helena"},{ioc:"SKN",name:"St. Kitts & Nevis"},{ioc:"LCA",name:"St. Lucia"},{ioc:"SPM",name:"St. Pierre & Miquelon"},{ioc:"VIN",name:"St. Vincent & Grenadines"},{ioc:"SUD",name:"Sudan"},{ioc:"SUR",name:"Suriname"},{ioc:"SWZ",name:"Swaziland"},{ioc:"SWE",name:"Sweden"},{ioc:"SUI",name:"Switzerland"},{ioc:"SYR",name:"Syria"},{ioc:"STP",name:"So Tom & Prncipe"},{ioc:"TPE",name:"Taiwan"},{ioc:"TJK",name:"Tajikistan"},{ioc:"TAN",name:"Tanzania"},{ioc:"THA",name:"Thailand"},{ioc:"TLS",name:"Timor-Leste"},{ioc:"TOG",name:"Togo"},{ioc:"TGA",name:"Tonga"},{ioc:"TTO",name:"Trinidad & Tobago"},{ioc:"TUN",name:"Tunisia"},{ioc:"TUR",name:"Turkey"},{ioc:"TKM",name:"Turkmenistan"},{ioc:"TKS",name:"Turks & Caicos Islands"},{ioc:"TUV",name:"Tuvalu"},{ioc:"ISV",name:"U.S. Virgin Islands"},{ioc:"GBR",name:"UK"},{ioc:"USA",name:"United States"},{ioc:"UGA",name:"Uganda"},{ioc:"UKR",name:"Ukraine"},{ioc:"UAE",name:"United Arab Emirates"},{ioc:"URU",name:"Uruguay"},{ioc:"UZB",name:"Uzbekistan"},{ioc:"VAN",name:"Vanuatu"},{ioc:"VEN",name:"Venezuela"},{ioc:"VIE",name:"Vietnam"},{ioc:"WAF",name:"Wallis & Futuna"},{ioc:"YEM",name:"Yemen"},{ioc:"ZAM",name:"Zambia"},{ioc:"ZIM",name:"Zimbabwe"}];function Pv(){I_(),window.addEventListener("orientationchange",function(){_a()},!1),window.addEventListener("resize",function(){_a()},!1);const t={},n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const l=n[a].split("=");if(typeof t[l[0]]>"u")t[l[0]]=l[1];else if(typeof t[l[0]]=="string"){const c=[t[l[0]],l[1]];t[l[0]]=c}else t[l[0]].push(l[1])}history.pushState("",document.title,window.location.pathname),Pt.disableDrag(),Cv(),pt("none","welcome"),new Rv(".c2c").on("success",()=>{be()}),Hu(),Iv(),St.broadcast&&navigator.onLine&&Gl(),Dv(),ec(),Pt.addSwipeTarget(document.getElementById("mainmenu")),Array.from(document.querySelectorAll(".md_seed")).forEach(a=>{bo(0,32).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_draw_position")).forEach(a=>{bo(0,128).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_ioc")).forEach(a=>{Lv.forEach((l,c)=>a.options[c+1]=new Option(l.name,l.ioc))}),Pr(),Qa(),Bv(),o0(),Cl(),t.key&&setTimeout(()=>Vl({key:t.key}),1e3),u0()}function Iv(){St.user_uuid||(St.user_uuid=Fr(),fs())}function Dv(){const t=a=>{a.which==9&&a.preventDefault()},e=document.getElementById("playername");e&&(e.addEventListener("keyup",Ku,!1),e.addEventListener("keydown",t,!1),e.onblur=function(){Ni()},e.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const n=document.getElementById("team");n&&(n.onblur=function(){Ni()},n.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const r=document.getElementById("player_rank");r&&(r.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const i=document.getElementById("player_wtn");i&&(i.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const s=document.getElementById("player_utr");s&&(s.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const o=Array.from(document.querySelectorAll(".pressAndHold"));Array.from(o).forEach(a=>Pt.addPressAndHold(a))}function Bv(){const t=rt.get("current_match");if(t)ms(t),Br(),Dr(),Ir();else{const e=rt.get("match_archive");ys(),e||ku(!0)}}const Fv=""+new URL("courthive-transparent-logo-EnCfo38b.png",import.meta.url).href;function Uv(t){t&&(document.querySelector("#app").innerHTML=`
  <div>
    <a href="https://courthive.com" target="_blank">
      <img src="${Fv}" class="logo" alt="Vite logo" />
    </a>
    <h1 class="name">CourtHive</h1>
  </div>
`)}var Hv=/([:*])(\w+)/g,$v="([^/]+)",zv=/\*/g,qv="?(?:.*)",Gv=/\/\?/g,Wv="/?([^/]+|)",Vv="(?:/^|^)",Yv="";function Eu(t){return t===void 0&&(t="/"),oo()?location.pathname+location.search+location.hash:t}function mt(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function Mr(t){return typeof t=="string"}function jv(t){return typeof t=="function"}function Or(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function Kv(t,e){return e.length===0||!t?null:t.slice(1,t.length).reduce(function(n,r,i){return n===null&&(n={}),n[e[i]]=decodeURIComponent(r),n},null)}function Nr(t){var e=mt(t).split(/\?(.*)?$/);return[mt(e[0]),e.slice(1).join("")]}function so(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]!==""){var s=decodeURIComponent(i[0]);e[s]?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(decodeURIComponent(i[1]||""))):e[s]=decodeURIComponent(i[1]||"")}}return e}function Su(t,e){var n=Nr(mt(t.currentLocationPath)),r=n[0],i=n[1],s=i===""?null:so(i),o=[],a;if(Mr(e.path)){if(a=Vv+mt(e.path).replace(Hv,function(f,h,d){return o.push(d),$v}).replace(zv,qv).replace(Gv,Wv)+"$",mt(e.path)===""&&mt(r)==="")return{url:r,queryString:i,hashString:Or(t.to),route:e,data:null,params:s}}else a=e.path;var l=new RegExp(a,Yv),c=r.match(l);if(c){var u=Mr(e.path)?Kv(c,o):c.groups?c.groups:c.slice(1);return{url:mt(r.replace(new RegExp("^"+t.instance.root),"")),queryString:i,hashString:Or(t.to),route:e,data:u,params:s}}return!1}function Tu(){return!!(typeof window<"u"&&window.history&&window.history.pushState)}function Ee(t,e){return typeof t[e]>"u"||t[e]===!0}function Jv(t){if(!t)return{};var e=t.split(","),n={},r;return e.forEach(function(i){var s=i.split(":").map(function(o){return o.replace(/(^ +| +$)/g,"")});switch(s[0]){case"historyAPIMethod":n.historyAPIMethod=s[1];break;case"resolveOptionsStrategy":r||(r={}),r.strategy=s[1];break;case"resolveOptionsHash":r||(r={}),r.hash=s[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":n[s[0]]=s[1]==="true";break}}),r&&(n.resolveOptions=r),n}function oo(){return typeof window<"u"}function Xv(t,e){return t===void 0&&(t=[]),e===void 0&&(e={}),t.filter(function(n){return n}).forEach(function(n){["before","after","already","leave"].forEach(function(r){n[r]&&(e[r]||(e[r]=[]),e[r].push(n[r]))})}),e}function Yt(t,e,n){var r=e||{},i=0;(function s(){if(!t[i]){n&&n(r);return}Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),s()):t[i](r,function(o){typeof o>"u"||o===!0?(i+=1,s()):n&&n(r)})})()}Yt.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};function Ga(t,e){typeof t.currentLocationPath>"u"&&(t.currentLocationPath=t.to=Eu(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function Ci(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=t.instance.routes[n],i=Su(t,r);if(i&&(t.matches||(t.matches=[]),t.matches.push(i),t.resolveOptions.strategy==="ONE")){e();return}}e()}function Zv(t,e){t.navigateOptions&&(typeof t.navigateOptions.shouldResolve<"u"&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),typeof t.navigateOptions.silent<"u"&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function Qv(t,e){t.navigateOptions.force===!0?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}var Wa=oo(),t1=Tu();function e1(t,e){if(Ee(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=Wa&&t.resolveOptions&&t.resolveOptions.hash===!0;t1?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout(function(){if(!r){var i=location.hash;location.hash="",location.hash=i}t.instance.__freezeListening=!1},1))):Wa&&(window.location.href=t.to)}e()}function Cu(t,e){var n=t.instance;if(!n.lastResolved()){e();return}Yt(n.lastResolved().map(function(r){return function(i,s){if(!r.route.hooks||!r.route.hooks.leave){s();return}var o=!1,a=t.instance.matchLocation(r.route.path,t.currentLocationPath,!1);if(r.route.path!=="*")o=!a;else{var l=t.matches?t.matches.find(function(c){return r.route.path===c.route.path}):!1;o=!l}if(Ee(t.navigateOptions,"callHooks")&&o){Yt(r.route.hooks.leave.map(function(c){return function(u,f){return c(function(h){h===!1?t.instance.__markAsClean(t):f()},t.matches&&t.matches.length>0?t.matches.length===1?t.matches[0]:t.matches:void 0)}}).concat([function(){return s()}]));return}else s()}}),{},function(){return e()})}function n1(t,e){t.match.route.hooks&&t.match.route.hooks.before&&Ee(t.navigateOptions,"callHooks")?Yt(t.match.route.hooks.before.map(function(n){return function(i,s){return n(function(o){o===!1?t.instance.__markAsClean(t):s()},t.match)}}).concat([function(){return e()}])):e()}function r1(t,e){Ee(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()}function i1(t,e){t.match.route.hooks&&t.match.route.hooks.after&&Ee(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach(function(n){return n(t.match)}),e()}function s1(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString){n.forEach(function(r){r.route.hooks&&r.route.hooks.already&&Ee(t.navigateOptions,"callHooks")&&r.route.hooks.already.forEach(function(i){return i(t.match)})}),e(!1);return}e()}function o1(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=Nr(t.currentLocationPath),i=r[0],s=r[1],o=Or(t.to);n.path=mt(i);var a={url:n.path,queryString:s,hashString:o,data:null,route:n,params:s!==""?so(s):null};t.matches=[a],t.match=a}e()}function a1(t,e){(!t.resolveOptions||t.resolveOptions.noMatchWarning===!1||typeof t.resolveOptions.noMatchWarning>"u")&&console.warn('Navigo: "'+t.currentLocationPath+`" didn't match any of the registered routes.`),e()}function c1(t,e){t.instance._setCurrent(null),e()}function Mu(t,e){Ee(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var Ou=[s1,n1,r1,i1],Va=[Cu,o1,Yt.if(function(t){var e=t.notFoundHandled;return e},Ou.concat([Mu]),[a1,c1])];function cs(){return cs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cs.apply(this,arguments)}function Ya(t,e){var n=0;function r(){if(n===t.matches.length){Mu(t,e);return}Yt(Ou,cs({},t,{match:t.matches[n]}),function(){n+=1,r()})}Cu(t,r)}function Mi(t){t.instance.__markAsClean(t)}function ls(){return ls=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ls.apply(this,arguments)}var ja="[data-navigo]";function l1(t,e){var n=e||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:ja},r=this,i="/",s=null,o=[],a=!1,l,c=Tu(),u=oo();t?i=mt(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.');function f(S){return S.indexOf("#")>=0&&(n.hash===!0?S=S.split("#")[1]||"/":S=S.split("#")[0]),S}function h(S){return mt(i+"/"+mt(S))}function d(S,C,M,T){return S=Mr(S)?h(S):S,{name:T||mt(String(S)),path:S,handler:C,hooks:Xv(M)}}function p(S,C,M){var T=this;return typeof S=="object"&&!(S instanceof RegExp)?(Object.keys(S).forEach(function(O){if(typeof S[O]=="function")T.on(O,S[O]);else{var z=S[O],Y=z.uses,E=z.as,F=z.hooks;o.push(d(O,Y,[l,F],E))}}),this):(typeof S=="function"&&(M=C,C=S,S=i),o.push(d(S,C,[l,M])),this)}function m(S,C){if(r.__dirty){r.__waiting.push(function(){return r.resolve(S,C)});return}else r.__dirty=!0;S=S?mt(i)+"/"+mt(S):void 0;var M={instance:r,to:S,currentLocationPath:S,navigateOptions:{},resolveOptions:ls({},n,C)};return Yt([Ga,Ci,Yt.if(function(T){var O=T.matches;return O&&O.length>0},Ya,Va)],M,Mi),M.matches?M.matches:!1}function g(S,C){if(r.__dirty){r.__waiting.push(function(){return r.navigate(S,C)});return}else r.__dirty=!0;S=mt(i)+"/"+mt(S);var M={instance:r,to:S,navigateOptions:C||{},resolveOptions:C&&C.resolveOptions?C.resolveOptions:n,currentLocationPath:f(S)};Yt([Zv,Qv,Ci,Yt.if(function(T){var O=T.matches;return O&&O.length>0},Ya,Va),e1,Mi],M,Mi)}function x(S,C,M){var T=V(S,C);return T!==null?(g(T.replace(new RegExp("^/?"+i),""),M),!0):!1}function A(S){return this.routes=o=o.filter(function(C){return Mr(S)?mt(C.path)!==mt(S):jv(S)?S!==C.handler:String(C.path)!==String(S)}),this}function k(){c&&(this.__popstateListener=function(){r.__freezeListening||m()},window.addEventListener("popstate",this.__popstateListener))}function R(){this.routes=o=[],c&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=a=!0}function N(S,C){return r._notFoundRoute=d("*",S,[l,C],"__NOT_FOUND__"),this}function v(){if(u)return _().forEach(function(S){if(S.getAttribute("data-navigo")==="false"||S.getAttribute("target")==="_blank"){S.hasListenerAttached&&S.removeEventListener("click",S.navigoHandler);return}S.hasListenerAttached||(S.hasListenerAttached=!0,S.navigoHandler=function(C){if((C.ctrlKey||C.metaKey)&&C.target.tagName.toLowerCase()==="a")return!1;var M=S.getAttribute("href");if(typeof M>"u"||M===null)return!1;if(M.match(/^(http|https)/)&&typeof URL<"u")try{var T=new URL(M);M=T.pathname+T.search}catch{}var O=Jv(S.getAttribute("data-navigo-options"));a||(C.preventDefault(),C.stopPropagation(),r.navigate(mt(M),O))},S.addEventListener("click",S.navigoHandler))}),r}function _(){return u?[].slice.call(document.querySelectorAll(n.linksSelector||ja)):[]}function y(S){return"/"+i+"/"+mt(S)}function P(S){return l=S,this}function q(){return s}function V(S,C,M){var T=o.find(function(Y){return Y.name===S}),O=null;if(T){if(O=T.path,C)for(var z in C)O=O.replace(":"+z,C[z]);O=O.match(/^\//)?O:"/"+O}return O&&M&&!M.includeRoot&&(O=O.replace(new RegExp("^/"+i),"")),O}function Q(S){return S.getAttribute("href")}function j(S){var C=Nr(mt(S)),M=C[0],T=C[1],O=T===""?null:so(T),z=Or(S),Y=d(M,function(){},[l],M);return{url:M,queryString:T,hashString:z,route:Y,data:null,params:O}}function $(){return j(mt(Eu(i)).replace(new RegExp("^"+i),""))}function K(S){var C={instance:r,currentLocationPath:S,to:S,navigateOptions:{},resolveOptions:n};return Ci(C,function(){}),C.matches?C.matches:!1}function H(S,C,M){typeof C<"u"&&(typeof M>"u"||M)&&(C=h(C));var T={instance:r,to:C,currentLocationPath:C};Ga(T,function(){}),typeof S=="string"&&(S=typeof M>"u"||M?h(S):S);var O=Su(T,{name:String(S),path:S,handler:function(){},hooks:{}});return O||!1}function Z(S,C,M){return typeof C=="string"&&(C=X(C)),C?(C.hooks[S]||(C.hooks[S]=[]),C.hooks[S].push(M),function(){C.hooks[S]=C.hooks[S].filter(function(T){return T!==M})}):(console.warn("Route doesn't exists: "+C),function(){})}function X(S){return typeof S=="string"?o.find(function(C){return C.name===h(S)}):o.find(function(C){return C.handler===S})}function B(S){S.instance.__dirty=!1,S.instance.__waiting.length>0&&S.instance.__waiting.shift()()}this.root=i,this.routes=o,this.destroyed=a,this.current=s,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=B,this.on=p,this.off=A,this.resolve=m,this.navigate=g,this.navigateByName=x,this.destroy=R,this.notFound=N,this.updatePageLinks=v,this.link=y,this.hooks=P,this.extractGETParameters=function(S){return Nr(f(S))},this.lastResolved=q,this.generate=V,this.getLinkPath=Q,this.match=K,this.matchLocation=H,this.getCurrentLocation=$,this.addBeforeHook=Z.bind(this,"before"),this.addAfterHook=Z.bind(this,"after"),this.addAlreadyHook=Z.bind(this,"already"),this.addLeaveHook=Z.bind(this,"leave"),this.getRoute=X,this._pathToMatchObject=j,this._clean=mt,this._checkForAHash=f,this._setCurrent=function(S){return s=r.current=S},k.call(this),v.call(this)}var u1={};function f1(){window.location.host.startsWith("localhost")||u1.PUBLIC_URL;const t=!0,e=new l1("/",{hash:t});e.on("/default",()=>Uv(!1)),e.notFound(()=>{e.navigate("/default")}),e.resolve()}Pv();f1();
//# sourceMappingURL=index-DiXniCsH.js.map
