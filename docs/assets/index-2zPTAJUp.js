(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const fi=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),ju=function(t){const e=t+"=",n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.startsWith(e))return i.substring(e.length,i.length)}return null},Ku=function(t,e,n){const r=function(){if(n){const i=new Date;return i.setTime(i.getTime()+n*24*60*60*1e3),"; expires="+i.toUTCString()}else return""}();document.cookie=t+"="+e+r+"; path=/"},rt={set:function(t,e,n){fi?localStorage.setItem(t,e):Ku(t,e,n)},get:function(t){return fi?localStorage.getItem(t):ju(t)},remove:function(t){fi?localStorage.removeItem(t):this.set(t,"",-1)}};function Ju(t){try{JSON.parse(t)}catch{return!1}return!0}function zt(t,e){const n=document.getElementById("modaltext");if(n&&(n.innerHTML=t),e){const i=document.getElementById("copy2clipboard");i&&i.setAttribute("data-clipboard-text",e)}const r=document.getElementById("modal");r&&(r.style.display="flex")}function An(t){const e=t.split(" ");let n=e[0];return e.length>1&&(n+=" "+e[e.length-1]),n}function Xu(t){const e=t.format,n=t.sides;return e==="singles"?n.map(function(r){return An(r[0])}):n.map(Zu)}function Zu(t){return t[0].last_name+"/"+t[1].last_name}function Qu(t){if(t)try{return JSON.parse(t)}catch{return}}function tf(t,e="-",n="YMD"){if(!t)return"";const r=new Date(t);let i=""+(r.getMonth()+1),s=""+r.getDate();const o=r.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),n=="DMY"?[s,i,o].join(e):n=="MDY"?[i,s,o].join(e):n=="YDM"?[o,s,i].join(e):n=="DYM"?[s,o,i].join(e):n=="MYD"?[i,o,s].join(e):[o,i,s].join(e)}function Io(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function En(t,e){for(;t.parentNode;)if(t=t.parentNode,t.classList&&Array.from(t.classList).indexOf(e)>=0)return t;return null}const nt=function(){};nt.addPoint_events=[];nt.undo_events=[];nt.reset_events=[];nt.pointParser=dc;const Pe={games:{advantage:{description:"Advantage Game",tiebreak:!1,hasDecider:!1,threshold:4,minDiff:2},noAdvantage:{description:"No Advantage Game",tiebreak:!1,hasDecider:!0,threshold:4,minDiff:1},tiebreak7a:{description:"Tiebreak to 7",tiebreak:!0,hasDecider:!1,threshold:7,minDiff:2},tiebreak10a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:10,minDiff:2},tiebreak12a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:12,minDiff:2},tiebreak9n:{description:"Tiebreak to 9, Golden Point",tiebreak:!0,hasDecider:!0,threshold:9,minDiff:1}},sets:{AdSetsTo6tb7:{description:"Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},NoAdSetsTo6tb7:{description:"No-Ad, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"},NoAdSetsTo4tb7:{description:"No-Ad, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:0,children:"noAdvantage",decidingChild:"tiebreak7a"},longSetTo6by2:{description:"Advantage, 6 games for set, win by 2 games",hasDecider:!1,threshold:6,minDiff:2,children:"advantage",decidingChild:"advantage"},supertiebreak:{description:"Supertiebreak",hasDecider:!0,threshold:1,minDiff:1,children:"tiebreak10a",decidingChild:"tiebreak10a"},pro10a12:{description:"10 Game No Ad Pro Set; tiebreak to 12",hasDecider:!0,threshold:10,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak12a"},pro8a7:{description:"8 Game Pro Set; tiebreak to 7",hasDecider:!0,threshold:8,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},college6a7:{description:"6 Game College Doubless Set; no advantage; tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"}},matches:{"3_6a_7":{name:"Standard Advantage",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"3_6n_7":{name:"Standard No-Advantage",description:"best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"NoAdSetsTo6tb7"},"3_4n_10":{name:"Standard Under 10",description:"best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"supertiebreak"},"1_4n_7":{name:"Under 10 Qualifying",description:"4 games for set, No Advantage, Tiebreak to 7 at 3-3",hasDecider:!1,threshold:1,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"NoAdSetsTo4tb7"},"3_6n_10":{name:"No-Ad, 3rd Set Supertiebreak",description:"best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"supertiebreak"},"5_6a_7":{name:"US Open Men",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"5_6a_7_long":{name:"Grand Slam Men - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"3_6a_7_long":{name:"Grand Slam Women - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"1_8a_7":{name:"8 Game Pro Set",description:"1 set, Advantage, 8 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"pro8a7",decidingChild:"pro8a7"},"1_6a_7":{name:"6 Game College Doubles Set",description:"1 set, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"college6a7",decidingChild:"college6a7"}}};nt.formats=()=>Pe;nt.newFormat=({type:t,code:e,description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l})=>{const c=Object.keys(Pe).indexOf(t)>=0,u=c&&Object.keys(Pe[t]).indexOf(e)>=0;return c&&u?!1:(Pe[t][e]={description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l},!0)};nt.stateObject=({index:t,object:e,parent_object:n,child:r,format:i,common:s=nt.common()})=>{const o={};o.child=r,o.format=i,o.child_attributes=["hasDecider","threshold","minDiff","tiebreak","code","description"],(o.reset=c=>{o.children=[],o.local_history=[],o.counter=[0,0],o.first_service=0,n||(s.metadata.reset(),s.metadata.resetStats(),s.history=[],s.perspective_score=!1,s.events.reset().forEach(u=>u())),!n&&c&&(o.format.singles(!0),o.format.type(c))})(),o.set={index(c){return arguments.length?(isNaN(c)||(t=c),o.set):t},liveStats(c){return arguments.length?[!0,!1].indexOf(c)<0?!1:(c&&!s.live_stats&&o.history.points().length&&(s.metadata.resetStats(),s.stats.counters()),!c&&s.live_stats&&s.metadata.resetStats(),s.live_stats=c,o.set):s.live_stats},perspectiveScore(c){return arguments.length?o.history.points().length?!1:([!0,!1].indexOf(c)>=0&&(s.perspective_score=c),o.set):s.perspective_score},firstService(c){return arguments.length?s.metadata.serviceOrder().indexOf(c)<0?!1:(o.first_service=c,o.set):o.first_service}},o.history={},o.history.local=()=>o.local_history,o.history.action=c=>s.history.filter(u=>u.action==c),o.history.points=c=>{let u=s.history.filter(f=>f.action=="addPoint").map(f=>f.point);return c!=null&&(u=u.filter(f=>f.set==c)),u},o.history.score=()=>e=="Game"?o.history.points().map(c=>c.score):[].concat(...o.children.map(c=>c.history.score())),o.history.games=()=>e=="Set"?o.local_history:[].concat(...o.children.map(c=>c.history.games())),o.history.lastPoint=()=>{const c=o.history.points();return c[c.length-1]||{score:"0-0"}},o.history.common=()=>s.history,o.score=()=>{const c={local:o.counter};c.points=e=="Game"?o.complete()?[0,0]:o.counter:o.lastChild()?o.lastChild().score().counters.points:[0,0],c.games=e=="Set"?o.complete()?[0,0]:o.counter:e=="Match"?o.lastChild()?o.lastChild().score().counters.games:[0,0]:void 0,c.sets=e=="Match"?o.counter:void 0;const u={counters:c};return u.points=e=="Game"?o.complete()?"0-0":o.scoreboard():o.lastChild()?o.lastChild().score().points:"0-0",u.games=e=="Set"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().games:"0-0",u.sets=e=="Match"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().sets:"0-0",u.components={},e=="Match"&&o.children.length&&(u.components.sets=o.children.map(f=>{const h={games:f.score().counters.local};return f.lastChild()&&f.lastChild().format.tiebreak()&&(h.tiebreak=f.lastChild().score().counters.local),h})),u.display={},u},o.accessChildren=()=>o.children,o.lastChild=()=>o.children[o.children.length-1],o.scoreDifference=()=>Math.abs(o.counter[0]-o.counter[1]),o.thresholdMet=()=>Math.max(...o.counter)>=o.format.threshold(),o.minDifferenceMet=()=>o.scoreDifference()>=o.format.minDiff(),o.singleThresholdMet=()=>Math.max(...o.counter)>=o.format.threshold()&&Math.min(...o.counter)<o.format.threshold(),o.winner=()=>o.complete()?o.counter[0]>o.counter[1]?0:1:void 0,o.reverseScore=()=>s.perspective_score&&o.nextTeamServing()%2==1,o.nextTeamServing=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!0),o.nextTeamReceiving=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!1),o.perspectiveScore=(c=o.counter,u)=>u!=null?u?c.slice().reverse():c:o.reverseScore()?c.slice().reverse():c,o.complete=()=>{function c(){return o.counter[0]>=o.format.threshold()&&o.counter[1]>=o.format.threshold()}return!!(o.thresholdMet()&&o.minDifferenceMet()||c()&&o.scoreDifference()&&o.format.hasDecider())},o.nextService=()=>{if(o.complete())return!1;let c=o.lastChild();if(s.metadata.serviceOrder().indexOf(o.first_service)<0&&console.log("PROBLEM"),e=="Game")return o.format.tiebreak()?s.nextTiebreakService(o.local_history,o.first_service):o.first_service;if(!c)return o.first_service;if(c.complete()){let u=c.lastChild();for(;u;)c=u,u=c.lastChild();const f=c.set.firstService();return s.advanceService(f)}return c.nextService()},o.currentChild=()=>{if(o.complete())return!1;const c=o.lastChild();return c&&!c.complete()?c:o.newChild()},o.newChild=()=>{let c=o.lastChild(),u;if(!c)u=o.first_service;else{let k=c.lastChild();for(;k;)c=k,k=c.lastChild();u=s.advanceService(c.set.firstService())}const f=o.format.threshold(),h=o.format.minDiff(),d=k=>o.counter[0]==k&&o.counter[1]==k,p=d(f)&&(o.format.hasDecider()||h==1)||d(f-1)&&h==0,m=p?o.format.decidingChild.settings().code:o.format.children.settings().code,g=o.children.length,x=nt[o.child.object]({index:g,parent_object:o,type:m,common:s});if(x.set.firstService(u),!m){const k=p?o.format.decidingChild:o.format.children;A(k,x.format,o.child_attributes),k.children&&(A(k.children,x.format.children,o.child_attributes),A(k.decidingChild,x.format.decidingChild,o.child_attributes))}return o.children.push(x),x;function A(k,N,I){I.forEach(v=>{if(typeof k[v]=="function"){const _=k[v]();N[v](_)}})}};const a=c=>{if(o.complete())return{result:!1};const u=o.nextService(),f=s.pointParser(c,u,o.history.lastPoint(),o.format,s.metadata.teams(),o.set.perspectiveScore(),o.score());if(!f)return{result:!1};o.counter[f.winner]+=1;const h={points:o.counter.slice(),score:o.scoreboard(),number:o.local_history.filter(x=>x.winner!=null).length,index:o.history.points().length,[e.toLowerCase()]:t},d=o.pointsToGame(),p=d?d.indexOf(1):void 0;p>=0&&p==1-s.metadata.playerTeam(u)&&(h.breakpoint=!0),o.format.tiebreak()&&(h.tiebreak=!0),s.metadata.timestamps()&&!f.uts&&(h.uts=new Date().valueOf()),Object.assign(f,h),o.local_history.push(f);const g={action:"addPoint",result:!0,complete:o.complete(),point:f,needed:{points_to_game:d}};return s.history.push(g),g};o.addPoint=c=>{if(Array.isArray(c))return!1;if(e=="Game")return a(c);const u=o.currentChild();if(!u)return{result:!1};const f=u.addPoint(c);if(!f.result)return f;u.complete()&&(o.counter[f.point.winner]+=1,o.local_history.push({winner:f.point.winner,[o.child.plural]:o.counter.slice(),index:u.set.index()})),f.complete=o.complete(),f.next_service=o.nextService();const h=o.pointsNeeded?o.pointsNeeded():void 0;return h&&(f.needed=Object.assign({},f.needed,h)),f.point[o.child.label]=u.set.index(),f[o.child.label]={complete:u.complete(),winner:u.winner(),[o.child.plural]:o.counter.slice(),index:u.set.index()},n||s.addStatPoint(f),n||s.events.addPoint().forEach(d=>d(f)),f},o.addPoints=(c=[])=>o.addMultiple({values:c}),o.addScore=c=>{const u=o.addPoint(c);if(u.result)return u;const f=o.history.lastPoint(),h=!f||f.score=="0-0"?[0,0]:f.points,d=o.change.pointScore(c);if(d.result){o.undo();const m=d.pointChange.to.map((g,x)=>({diff:g-h[x],i:x})).filter(g=>g.diff);if(m.length==1&&m[0].diff>0){let g;const x=m[0].i,A=m[0].diff;for(let k=0;k<A;k++)if(g=o.addPoint(x),!g.result||g.game.complete)return g;return g}}return{result:!1}},o.addScores=(c=[])=>o.addMultiple({values:c,fx:o.addScore}),o.addMultiple=({values:c=[],fx:u=o.addPoint})=>{typeof c=="string"&&(c=c.match(/[01A-Za-z][*#@]*/g));const f=[];let h=[];for(;c.length;){const d=c.shift(),p=u(d);p.result?f.push(p):(c.unshift(d),h=c.slice(),c=[])}return{result:f.length,added:f,rejected:h}},o.decoratePoint=(c,u)=>{const f=s.history.map((d,p)=>{if(d.action==="addPoint"&&d.point.index==c.index)return p}).filter(d=>d!==void 0);if(!f.length)return!1;const h=s.history[f[0]];h.point=Object.assign({},h.point,u)},o.change={},o.change.points=c=>{if(!zi(c)||c.length!=2)return!1;if(e=="Game"){const u=Math.max(...c)>o.format.threshold(),f=Math.abs(c[0]-c[1]);if(u&&f>o.format.minDiff())return!1;if(o.complete())return{result:!1};const h={action:"changePoints",result:!0,pointChange:{from:o.counter,to:c}};if(o.local_history.push(h),s.history.push(h),o.counter=c,o.complete()){const d=parseInt(o.winner());n.counter[d]+=1,n.local_history.push({winner:d,games:n.counter.slice(),index:t})}return h}return o.propagatePointChange(c,"points")},o.change.pointScore=c=>{if(c=="0-0")return o.change.points([0,0]);if(e=="Game"){if(o.format.tiebreak())return o.change.points(c.split("-").map(p=>parseInt(p)));c=c.replace(":","-").split("-").map(p=>p.trim()).join("-").split("D").join("40");const u=Object.assign({},pc);if(o.format.hasDecider()&&Object.keys(mr).forEach(p=>u[p]=mr[p]),[].concat(...Object.keys(u).map(p=>u[p])).indexOf(c)<0)return!1;const h=["0","15","30","40","A","G"],d=c.split("-").map(p=>h.indexOf(p));return d[0]==5&&d[1]!=3&&(d[0]=4),d[1]==5&&d[0]!=3&&(d[1]=4),o.change.points(d)}return o.propagatePointChange(c,"pointScore")},o.propagatePointChange=(c,u)=>{const f=o.lastChild();if(!f){if(e=="Match")return o.newChild().newChild().change[u](c);if(e=="Set")return o.newChild().change[u](c)}return!n&&o.complete()?{result:!1}:f.complete()?o.newChild().change[u](c):f.change[u](c)},o.change.games=c=>{if(!zi(c)||c.length!=2)return!1;if(e=="Game")return{result:!1};if(e=="Set"){if(o.complete())return{result:!1};const f={action:"changeGames",result:!0,gameChange:{from:o.counter,to:c}};return o.local_history.push(f),s.history.push(f),o.counter=c,f}const u=o.lastChild();return!u&&e=="Match"?o.newChild().change.games(c):!n&&o.complete()?{result:!1}:u.complete()?o.newChild().change.games(c):u.change.games(c)},o.undo=(c=1)=>{if(isNaN(c)||e!="Game"&&!o.children.length&&!o.local_history.length||!s.history.length)return!1;const u=()=>{const h=s.history[s.history.length-1].action;return l[h]()},f=[...Array(c).keys()].map(()=>u());return s.events.undo().forEach(h=>h(f)),c==1?f[0]:f};const l={};return l.addPoint=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter[c.point.winner]-=1,s.removeStatPoint(c),c.point}return o.propagateUndo()},l.changePoints=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter=c.pointChange.from,c}return o.propagateUndo()},l.changeGames=()=>{if(e=="Set"){o.local_history.pop();const c=s.history.pop();return o.counter=c.gameChange.from,c}return o.propagateUndo()},o.propagateUndo=()=>{const c=o.lastChild(),u=c.complete(),f=c.undo();if(u){const h=o.local_history.pop();h&&h.winner!=null&&(o.counter[h.winner]-=1)}return!c.history.local().length&&c.lastChild()==null&&o.children.pop(),f},o};nt.Match=t=>{const{index:e,type:n,common:r=nt.common()}=t??{},i={object:"Set",label:"set",plural:"sets"},s=nt.matchFormat({type:n,common:r}),o=nt.stateObject({index:e,object:"Match",format:s,child:i,common:r});return o.scoreboard=a=>o.children.length?(a==null&&(a=o.set.perspectiveScore()?o.nextService():void 0),o.children.map(l=>l.scoreboard(a)).join(", ")):"0-0",{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,history:o.history,stats:r.stats}};nt.Set=({index:t,parent_object:e,type:n,common:r=nt.common()})=>{const i={object:"Game",label:"game",plural:"games"},s=nt.setFormat({type:n,common:r}),o=nt.stateObject({index:t,parent_object:e,object:"Set",format:s,child:i,common:r});o.pointsNeeded=()=>{const l=o.format.threshold();if(o.complete()){const g=[];g[o.winner()]=0;const x=1-o.winner(),A=o.history.action("addPoint").filter(k=>k.point.set==t).map(k=>k.needed.points_to_set).filter(k=>k);return g[x]=Math.max(...A.map(k=>k[x])),{points_to_set:g}}const c=o.format.hasDecider(),u=o.scoreDifference(),f=o.format.minDiff(),h=[!1,!1],d=o.counter.map((g,x)=>{const A=o.counter[1-x];return g>A?A==l&&c||g>=l&&u>=f?0:g>=l-1?1:l-g:A>g?(h[x]=c&&l==A,g==l&&c||A>=l&&u>=f?0:h[x]?u+1:A>=l-1?u+f:l-g):(h[x]=c&&l==g&&l==A||f==1&&l==g&&l==A||f==0&&l-1==g&&l-1==A,h[x]?1:g>=l-1?f:l-g)}),p=o.lastChild();return{points_to_set:d.map((g,x)=>{let A=0;if(p&&!p.complete()&&(A+=p.pointsToGame()[x],g-=1),!g)return A;h[x]&&(A+=o.format.decidingChild.threshold(),g-=1);for(let k=g;k;k--)A+=o.format.children.threshold();return A}),games_to_set:d}};const a=([l,c],[u,f])=>((u||f)&&(u>f&&(c+=`(${f})`),f>u&&(l+=`(${u})`)),`${l}-${c}`);return o.scoreboard=l=>{const c=o.lastChild(),u=o.perspectiveScore(o.counter,l);if(!c)return u.join("-");const f=c.format.tiebreak()===!0;if(c.complete()&&!f)return u.join("-");if(!c.complete())return`${u.join("-")} (${c.scoreboard(l)})`;const h=c.score().counters.local,d=o.perspectiveScore(h,l);return f&&o.complete()&&o.children.length==1?d.join("-"):a(u,d)},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,children:o.accessChildren,lastChild:o.lastChild,newChild:o.newChild,history:o.history,pointsNeeded:o.pointsNeeded}};nt.Game=({index:t,parent_object:e,type:n,common:r=nt.common()})=>{const i={object:"Point",label:"point",plural:"points"},s=nt.gameFormat({type:n,common:r}),o=nt.stateObject({index:t,object:"Game",parent_object:e,format:s,child:i,common:r});return o.pointsToGame=()=>{if(o.complete())return;const a=o.format.threshold(),l=o.format.hasDecider(),c=o.scoreDifference(),u=o.format.minDiff();return o.counter.map((f,h)=>{const d=o.counter[1-h];return f>d?d==a&&l||f>=a&&c>=u?0:f>=a-1?1:a-f:d>f?f==a&&l||d>=a&&c>=u?0:d==a&&l?c+1:d>=a-1?c+u:a-f:l&&a==f&&a==d?1:f>=a-1?u:a-f})},o.scoreboard=a=>{let l;const c=o.format.threshold(),u=o.format.minDiff(),f=o.perspectiveScore(o.counter,a);if(c!=4||o.format.tiebreak())return f.join("-");if(!o.thresholdMet()||o.singleThresholdMet()&&o.minDifferenceMet()||o.singleThresholdMet()&&o.format.hasDecider()&&u==1){const d=["0","15","30","40","G","G"];l=f.map(p=>d[p]).join("-")}else l=f.map((d,p)=>{const m=f[1-p],g=d-c,x=m-c;return g>x&&o.minDifferenceMet()?"G":g>x?"A":"40"}).join("-");return l.indexOf("G")>=0?"0-0":l},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,history:o.history,lastChild:o.lastChild,pointsToGame:o.pointsToGame}};nt.defaultPointParser=dc;function dc(t,e,n,r,i,s,o){if(t==null)return!1;if(t.toString().length==1&&!isNaN(t)){const h=+t==e?"S":"R";return[0,1].indexOf(+t)<0?!1:{winner:+t,server:e,code:h}}let a;const l=i.map(h=>h.indexOf(e)>=0).indexOf(!0),c={server:e};if(typeof t=="object"){if(t.winner!=null&&[0,1].indexOf(+t.winner)>=0)return t.winner=parseInt(t.winner),t.code=t.code?t.code:t.winner==e?"S":"R",t.first_serve&&(t.code=t.code.toLowerCase()),Object.assign({},t,c);if(t.code&&u(t.code))return Object.assign({},t,c)}if(typeof t=="string"&&(f(t)||u(t)))return c;function u(h){let d=h.toUpperCase().match(/[A-Za-z]/g),p=h.match(/[*#@]/g);if(d&&(d=d.join("")),p&&(p=p.join("")),"SAQDRP".split("").indexOf(String(d))>=0)return["S","A","Q"].indexOf(d)>=0&&(a=l),["D","R","P"].indexOf(d)>=0&&(a=1-l),["Q","P"].indexOf(d)>=0&&(c.result="Penalty"),d=="A"&&(c.result="Ace"),d=="D"&&(c.first_serve={error:"Error",serves:["0e"]},c.result="Double Fault"),p&&!c.result&&(p=="*"&&(c.result="Winner"),p=="#"&&(c.result="Forced Error"),p=="@"&&(c.result="Unforced Error")),c.code=h,c.winner=parseInt(a),h===h.toLowerCase()&&(c.first_serve={error:"Error",serves:["0e"]}),c}function f(h){if(h=h.replace(":","-").split("-").map(x=>x.trim()).join("-").split("D").join("40"),h.split("-").length!=2)return!1;let d=o.points;const p=x=>x.reduce((A,k)=>A+k);if(r.tiebreak()){const x=h.split("-").map(N=>parseInt(N)),A=d.split("-").map(N=>parseInt(N));if(!zi(x)||x.length!=2||p(A)+1!=p(x))return!1;const k=[Math.abs(x[0]-A[0]),Math.abs(x[1]-A[1])];return c.winner=k.indexOf(1),c}const m=Object.assign({},pc);if(r.hasDecider()&&Object.keys(mr).forEach(x=>m[x]=mr[x]),h=="0-0"&&m[d].join("-").indexOf("G")>=0)return c.winner=n.points.indexOf(Math.max(...n.points)),c;m[d]==null&&(d="0-0");let g=m[d]?m[d].indexOf(h):!1;if(g>=0)return s&&e&&(g=1-g),c.winner=g,c}}const mr={"40-40":["G-40","40-G"]},pc={"0-0":["15-0","0-15"],"0-15":["15-15","0-30"],"0-30":["15-30","0-40"],"0-40":["15-40","0-G"],"15-0":["30-0","15-15"],"15-15":["30-15","15-30"],"15-30":["30-30","15-40"],"15-40":["30-40","15-G"],"30-0":["40-0","30-15"],"30-15":["40-15","30-30"],"30-30":["40-30","30-40"],"30-40":["40-40","30-G"],"40-0":["G-0","40-15"],"40-15":["G-15","40-30"],"40-30":["G-30","40-40"],"40-40":["A-40","40-A"],"A-40":["G-40","40-40"],"40-A":["40-40","40-G"]};nt.matchFormat=({type:t="3_6a_7",common:e})=>{const n=nt.formatObject({plural:"matches",common:e});return n.children=nt.setFormat({common:e}),n.decidingChild=nt.setFormat({common:e}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};nt.setFormat=({type:t="AdSetsTo6tb7",common:e})=>{const n=nt.formatObject({plural:"sets",common:e});return n.children=nt.gameFormat({common:e}),n.decidingChild=nt.gameFormat({common:e,type:"tiebreak7a"}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};nt.gameFormat=({type:t="advantage",common:e})=>{const n=nt.formatObject({plural:"games",common:e});return n.init(t),{description:n.description,settings:n.settings,singles:n.singles,doubles:n.doubles,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,tiebreak:n.tiebreak}};nt.formatObject=({plural:t,common:e=nt.common()})=>{const n={values:{plural:t},singles:e.singles,doubles:e.doubles,init(r){n.types(n.values.plural).indexOf(r)>=0&&(n.type(r),n.values.initial_code=r)},types(r=n.values.plural){return Object.keys(Pe[r])},type(r){if(!n.values.plural)return!1;if(r===!0&&n.values.initial_code&&(r=n.values.initial_code),n.types(n.values.plural).indexOf(r)>=0){const i=Pe[n.values.plural][r];return n.hasDecider(i.hasDecider).minDiff(i.minDiff).threshold(i.threshold),i.tiebreak!=null&&n.tiebreak(i.tiebreak),n.name(i.name),n.description(i.description),n.values.code=r,i.children&&n.children.type(i.children),i.decidingChild&&n.decidingChild.type(i.decidingChild),!0}},settings(r){const{name:i,description:s,code:o,players:a,threshold:l,has_decider:c,min_diff:u,tiebreak:f}=r??{};if(o)n.type(o);else if(!l||!c||!u||!f){const h=typeof e.singles=="function"?e.singles()?2:4:"";return{name:n.values.name,description:n.values.description,code:n.values.code,players:h,threshold:n.values.threshold,has_decider:n.values.has_decider,min_diff:n.values.min_diff,tiebreak:n.values.tiebreak}}else n.tiebreak(f),n.threshold(l),n.minDiff(u),n.hasDecider(c),s&&n.description(s),i&&n.name(i),a&&(a==4?n.doubles():n.singles())},name(r){return arguments.length?(typeof r=="string"&&(n.values.name=r),n):n.values.name},description(r){return arguments.length?(typeof r=="string"&&(n.values.description=r),n):n.values.description},tiebreak(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.tiebreak=r),n):n.values.tiebreak},threshold(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.threshold=r),n):n.values.threshold},minDiff(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.min_diff=r),n):n.values.min_diff},hasDecider(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.has_decider=r),n):n.values.has_decider}};return n};nt.common=()=>{let t=2,e=nt.addPoint_events.slice(),n=nt.undo_events.slice(),r=nt.reset_events.slice(),i={},s,o,a;const l={resetStats(){s=void 0,o=void 0,a=void 0},reset(){i={players:[],teams:[],service_order:[0,1],receive_order:[1,0],tournament:{},match:{},timestamps:!1,charter:void 0}},timestamps(v){return arguments.length?([!0,!1].indexOf(v)>=0&&(i.timestamps=v),l):i.timestamps},serviceOrder(v){return arguments.length?c(v,"service_order","receive_order"):i.service_order.slice()},doublesServiceChange(){if(t!=4)return!1},receiveOrder(v){return arguments.length?c(v,"receive_order","service_order"):i.receive_order.slice()},teams(){const v=[];return v[0]=i.service_order.filter((_,y)=>(y+1)%2).sort(),v[1]=i.service_order.filter((_,y)=>y%2).sort(),v.sort(),v},playerTeam(v){return l.teams().map(_=>_.indexOf(v)>=0).indexOf(!0)},teamPlayers(){return l.teams().map(v=>v.map(_=>l.players(_).name))},players(v){return arguments.length?isNaN(v)||v<0||v>3?!1:i.players[v]?i.players[v]:{name:`Player ${["One","Two","Three","Four"][v]}`}:i.players.length>i.service_order.length?i.players:i.service_order.map(_=>l.players(_))},definePlayer(v){const{name:_,birth:y,playerId:L,hand:W,seed:Y,rank:Q,age:K,entry:H,ioc:V,draw_position:z,team:Z,wtn:X,utr:U,id:S}=v??{};let C=v==null?void 0:v.index;C==null&&(C=i.players.length);const M=i.players[C]||{};if(!_&&!M.name||isNaN(C)||C>3)return!1;const T={name:_,birth:y,playerId:L,hand:W,team:Z,seed:Y,rank:Q,age:K,entry:H,ioc:V,draw_position:z,wtn:X,utr:U,id:S};return Object.keys(T).forEach(O=>{T[O]&&(M[O]=T[O])}),i.players[C]=M,{index:C,player:M}},defineTournament(v){const{name:_,tuid:y,start_date:L,tour:W,rank:Y,surface:Q,in_out:K,draw:H,draw_size:V,round:z,level:Z}=v??{},X={name:_,tuid:y,start_date:L,tour:W,rank:Y,surface:Q,in_out:K,draw:H,draw_size:V,round:z,level:Z};return Object.keys(X).forEach(U=>{X[U]&&(i.tournament[U]=X[U])}),i.tournament},defineMatch(v){const{muid:_,date:y,gender:L,year:W,court:Y,start_time:Q,end_time:K,duration:H,status:V,umpire:z,official_score:Z}=v??{},X={muid:_,date:y,gender:L,year:W,court:Y,start_time:Q,end_time:K,duration:H,status:V,umpire:z,official_score:Z};return Object.keys(X).forEach(U=>{X[U]&&(i.match[U]=X[U])}),i.match},showTiebreakOrder(v){return f(12,v)}};function c(v,_,y){const L=(H,V)=>!H.filter((z,Z)=>z!=V[Z]).length,W=(H,V)=>V.filter(z=>H.indexOf(z)!=-1).length!=V.length;if(!Array.isArray(v)||v.length!=t||W(v,[0,1])||W([0,1,2,3],v))return!1;const Y=v.length==i[_].length;if(L(v,i[_])&&Y)return l;const Q=l.teams();i[_]=v;const K=l.teams();return v.length==4&&L(Q[0],K[0])&&Y&&u(i[_],i[y],K)||(i[y]=v.map(H=>v.length-1-H)),l}function u(v,_,y){const L=(W,Y)=>y.filter(Q=>Q.filter(K=>[W,Y].indexOf(K)>=0).length>1).length;return!v.filter((W,Y)=>L(W,_[Y])).length}function f(v,_){const y=[];return[...Array(v).keys()].map(()=>{const L=h(y,_);return y.push(L),L})}function h(v,_){const y=d(v.length),L=(v.length+1)%4<2,W=v[v.length-1],Y=W??_??i.service_order[0];return L==y?Y:k.advanceService(Y)}function d(v){return[!0].concat([...Array(v).keys()].map(y=>(y+1)%4<2))[v]}function p(){if(t==2){const v=k.metadata.serviceOrder();if(v.length==2)return;k.metadata.serviceOrder(v.filter(_=>[0,1].indexOf(_)>=0))}else{const v=k.metadata.serviceOrder();if(v.length==4)return;const _=v.slice();v.forEach(y=>_.push(y+2)),k.metadata.serviceOrder(_)}}const m=v=>{if(!v)return e;typeof v=="function"?e.indexOf(v)<0&&e.push(v):Array.isArray(v)&&console.log({add_event:v})},g=v=>{if(!v)return n;typeof v=="function"?n.indexOf(v)<0&&n.push(v):Array.isArray(v)&&console.log({undo_event:v})},x=v=>{if(!v)return r;typeof v=="function"?r.indexOf(v)<0&&r.push(v):Array.isArray(v)&&console.log({reset_event:v})},A=()=>{e=[],n=[],r=[]},k={metadata:l,pointParser:nt.pointParser,events:{addPoint:m,undo:g,clearEvents:A,reset:x},history:[],live_stats:!1,perspective_score:!1,assignParser(v){k.pointParser=v},advanceService(v){const _=i.service_order.indexOf(v)+1;return i.service_order[_<l.players().length?_:0]},nextTiebreakService(v,_){const y=f(v.length+1,_);return y[y.length-1]},singles(v){return arguments.length?(t=v?2:4,p(),k):t==2},doubles(v){return arguments.length?(t=v?4:2,p(),k):t==4},stats:{calculated(v){return N(k.stats.counters(v))},counters(v){if((v!=null&&a!=v||v==null&&a!=null)&&l.resetStats(),!s){k.live_stats=!0;let _=k.history.filter(y=>y.action==="addPoint");v!=null&&(_=_.filter(y=>y.point.set===v),a=v),_.forEach(y=>k.addStatPoint(y))}return s}},addStatPoint(v){if(!k.live_stats)return;const _=v.point;s||(s={players:{},teams:{}});const y=l.playerTeam(_.server),L=l.playerTeam(_.winner),W=1-L;if(I({player:_.server,episode:v,stat:"pointsServed"}),I({team:L,episode:v,stat:"pointsWon"}),_.result&&_.hand){const Y=_.result=="Winner"?L:W;I({player:Y,episode:v,stat:_.hand})}_.result=="Ace"&&I({player:_.server,episode:v,stat:"aces"}),_.result=="Double Fault"&&I({player:_.server,episode:v,stat:"doubleFaults"}),_.result=="Winner"&&I({player:_.winner,episode:v,stat:"winners"}),_.result=="Unforced Error"&&I({team:W,episode:v,stat:"unforcedErrors"}),_.result=="Forced Error"&&I({team:W,episode:v,stat:"forcedErrors"}),_.first_serve||I({player:_.server,episode:v,stat:"serves1stIn"}),!_.first_serve&&_.winner==y&&(I({player:_.server,episode:v,stat:"serves1stWon"}),I({team:W,undefined:void 0,stat:"received1stWon"}),I({team:W,undefined:void 0,stat:"received2ndWon"})),!_.first_serve&&_.winner!=y&&I({team:L,episode:v,stat:"received1stWon"}),_.first_serve&&_.result!="Double Fault"&&I({player:_.server,episode:v,stat:"serves2ndIn"}),_.first_serve&&_.result!="Double Fault"&&_.winner==_.server&&(I({player:_.server,episode:v,stat:"serves2ndWon"}),I({team:W,undefined:void 0,stat:"received1stWon"}),I({team:W,undefined:void 0,stat:"received2ndWon"})),_.first_serve&&_.result!="Double Fault"&&_.winner!=y&&I({team:L,episode:v,stat:"received2ndWon"}),_.breakpoint&&(I({player:_.server,undefined:void 0,stat:"breakpointsSaved"}),I({player:_.server,episode:v,stat:"breakpointsFaced"})),o&&o.point.breakpoint&&o.point.server==_.winner&&I({player:_.server,episode:v,stat:"breakpointsSaved"}),v.game&&v.game.complete&&I({team:L,episode:v,stat:"gamesWon"}),o=v},removeStatPoint(v){if(!k.live_stats)return;Object.keys(s).forEach(y=>{Object.keys(s[y]).forEach(L=>{Object.keys(s[y][L]).forEach(W=>{s[y][L][W].length&&(s[y][L][W]=s[y][L][W].filter(Y=>Y.point.index!=v.point.index))})})});const _=k.history.filter(y=>y.action=="addPoint");o=_.length?_[_.length-1]:void 0}};return l.reset(),k;function N(v){if(!v||!v.teams)return[];const _={Aces:{numerators:["aces"],calc:"number"},"Double Faults":{numerators:["doubleFaults"],calc:"number"},"First Serve %":{numerators:["serves1stIn"],denominators:["pointsServed"],calc:"percentage"},"Unforced Errors":{numerators:["unforcedErrors"],calc:"number"},"Forced Errors":{numerators:["forcedErrors"],calc:"number"},Winners:{numerators:["winners"],calc:"number"},"Total Points Won":{numerators:["pointsWon"],calc:"number"},"Max Pts/Row":{numerators:["pointsWon"],calc:"maxConsecutive",attribute:"index"},"Max Games/Row":{numerators:["gamesWon"],calc:"maxConsecutive",attribute:"game"},"Points Won 1st":{numerators:["serves1stWon"],denominators:["serves1stIn"],calc:"percentage"},"Points Won 2nd":{numerators:["serves2ndWon"],denominators:["serves2ndIn"],calc:"percentage"},"Points Won Receiving":{numerators:["received1stWon","received2ndWon"],denominators:["-pointsServed"],calc:"percentage"},"Breakpoints Saved":{numerators:["breakpointsSaved"],denominators:["breakpointsFaced"],calc:"percentage"},"Breakpoints Converted":{numerators:["-breakpointsSaved"],denominators:["-breakpointsFaced"],calc:"difference"},"Aggressive Margin":{calc:"aggressiveMargin",numerators:["*doubleFaults","*unforcedErrors"],denominators:["*aces","*winners","-*forcedErrors"]}},y=(K,H,V)=>{if(!K)return;const z=K.map(Z=>{const X=Z.split("-").reverse()[0].split("*").join(""),U=H[Z.indexOf("-")==0?1-V:V];return U&&U[X]?U[X].length:0});return[].concat(0,0,...z).reduce((Z,X)=>Z+X)},L=(K,H,V)=>{const z=y(K.numerators,H,V),Z=y(K.denominators,H,V);return{numerator:z,denominator:Z}},W=(K,H)=>{const V=Math.round(K/H*100);return{value:V,display:`${V}% (${K}/${H})`}},Y={number(K,H,V){const{numerator:z}=L(K,H,V);return{display:z,value:z,numerators:K.numerators}},maxConsecutive(K,H,V){const z=K.numerators[0],Z=K.attribute,X=H[V][z];if(!X)return{value:0,display:0};let U,S=0,C=X.length?1:0;return X.forEach(M=>{U+1==M.point[Z]?C+=1:(C>S&&(S=C),C=1),U=M.point[Z]}),C>S&&(S=C),{display:S,value:S}},percentage(K,H,V){const{numerator:z,denominator:Z}=L(K,H,V);return z==null||!Z?{value:0,display:0}:Object.assign(W(z,Z),{numerators:K.numerators})},difference(K,H,V){const{numerator:z,denominator:Z}=L(K,H,V);if(z==null||!Z)return{value:0,display:0};const X=Math.abs(Z-z);return Object.assign(W(X,Z),{numerators:K.numerators})},aggressiveMargin(K,H,V){const{numerator:z,denominator:Z}=L(K,H,V),X=Z-z,U=Object.keys(H).map(C=>H[C].pointsWon?H[C].pointsWon.length:0),S=[].concat(0,0,...U).reduce((C,M)=>C+M);return Object.assign(W(X,S),{numerators:K.numerators})}},Q=[].concat(...Object.keys(v.teams).map(K=>Object.keys(v.teams[K])));return Object.keys(_).map(K=>{const H=_[K];H.denominators||(H.denominators=[]);let V=[].concat(...H.numerators,...H.denominators).map(X=>X.split("-").reverse()[0]);if(V=V.filter(X=>X.indexOf("*")<0),!(V.map(X=>Q.indexOf(X)<0).filter(X=>X).length<1))return!1;const Z=[0,1].map(X=>Y[H.calc](H,v.teams,X));return{name:K,team_stats:Z}}).filter(K=>K)}function I(v){const{player:_,episode:y,stat:L}=v??{};let W=v==null?void 0:v.team;_!=null&&(s.players[_]||(s.players[_]={}),s.players[_][L]||(s.players[_][L]=[]),y&&s.players[_][L].push(y),W=l.playerTeam(_)),W!=null&&(s.teams[W]||(s.teams[W]={}),s.teams[W][L]||(s.teams[W][L]=[]),y&&s.teams[W][L].push(y))}};function zi(t){return Array.isArray(t)?t.map(e=>!isNaN(e)).indexOf(!1)>=0:!1}const mc=nt,gc="1.9",at={},Dt=mc.Match(),Tt={broadcast:void 0,user_uuid:void 0},$t={track_shot_types:void 0,audible_clicks:void 0,display_gamefish:void 0,auto_swap_sides:void 0,point_buttons:void 0},b={lets:0,rally:0,undone:[],view:"entry",serve2nd:!1,rally_mode:!1,edit_player:void 0,match_swap:!1,swap_sides:!1,orientation:"vertical",serving:Dt.nextTeamServing(),receiving:Dt.nextTeamReceiving(),edit_point_index:void 0,provider:void 0,match:Dt},$n="rgb(64, 168, 75)",zn="rgb(255, 116, 51)",qn="rgb(221, 56, 48)",Ot={first_serve:{color:$n,type:"toggle"},second_serve:{color:zn,type:"toggle"},double_fault:{color:qn,type:"flash"},penalty:{color:qn,type:"flash"},first_ace:{color:$n,type:"flash"},second_ace:{color:zn,type:"flash"},server_winner:{color:$n,type:"flash"},server_unforced:{color:qn,type:"flash"},server_forced:{color:zn,type:"flash"},receiving_winner:{color:$n,type:"flash"},receiving_unforced:{color:qn,type:"flash"},receiving_forced:{color:zn,type:"flash"}},Sn={user_swap:!1,highlight_better_stats:!0,vertical_view:rt.get("vertical_view")||"vblack",horizontal_view:rt.get("horizontal_view")||"hblack"},As={isStandalone:"standalone"in window.navigator&&window.navigator.standalone,isIDevice:/iphone|ipod|ipad/i.test(window.navigator.userAgent),isMobile:typeof window.orientation<"u",geoposition:{}},gr=["Player One","Player Two"];function ef(){Dt.events.clearEvents()}function zr(){const t=b.swap_sides?1:0,e=b.swap_sides?0:1;he();const n=Dt.metadata.players(),r=document.getElementById("playerone"),i=document.getElementById("playertwo");r&&(r.innerHTML=An(n[t].name)),i&&(i.innerHTML=An(n[e].name)),Array.from(document.querySelectorAll(".display_player_0")).forEach(a=>a.innerHTML=n[t].name),Array.from(document.querySelectorAll(".display_player_1")).forEach(a=>a.innerHTML=n[e].name)}function he(t){const e=Dt.history.points(),n=rt.get("current_match");if(!n)return;const r=Dt.metadata.players();if(!(t||e.length||r[0].name!=gr[0]&&r[1].name!=gr[1]))return;const s=JSON.parse(rt.get("match_archive")||"[]");s.indexOf(n)<0&&(s.push(n),rt.set("match_archive",JSON.stringify(s)));const o={ch_version:gc,players:r,first_service:Dt.set.firstService(),match:Dt.metadata.defineMatch(),format:Dt.format.settings(),tournament:Dt.metadata.defineTournament(),points:e,scoreboard:Dt.scoreboard()};rt.set(n,JSON.stringify(o))}function nf(){const t=rt.get("CH_AppSettings");t&&Object.assign($t,JSON.parse(t)),Object.keys($t).forEach(n=>{const r=document.getElementById(n);r&&(r.checked=$t[n])});const e=rt.get("CH_AppState");e&&Object.assign(Tt,JSON.parse(e))}function Es(){Object.keys($t).forEach(t=>{const e=document.getElementById(t);e&&($t[t]=e.checked)}),rt.set("CH_AppSettings",JSON.stringify($t)),rt.set("CH_AppState",JSON.stringify(Tt))}function yc(){As.isMobile?b.orientation=window.screen.orientation.type=="landscape-primary"?"landscape":"portrait":b.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}function rf(){return b.match.history.points().length==0}function sf(){const t=of(),e=b.match.metadata.players();let n="";if(!t.length)return!1;t.forEach(i=>{i.points&&i.points.length&&(n+=af(i,e))}),n+=`
    <div class="flexrows ph_game">
      <div class='ph_margin' style='width: 100%'>
          <div class='flexcenter' style='width: 100%'>Duration ${lf()}</div>
      </div>
    </div>
  `;const r=document.getElementById("ph_frame");r&&(r.innerHTML=n)}function of(){const t=b.match.history.action("addPoint"),e=[{points:[]}];let n=0,r=0;return t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function af(t,e){const n=t.points[t.points.length-1],r=t.complete?t.score.join("-"):void 0,i=n.tiebreak,s=i?"Tiebreak":e[n.server].name,o=i?"":n.server?"playertwo":"playerone",a=i?"":n.server==n.winner?"won":"lost";let l=`
         <div class="flexrows ph_game">
            <div class='ph_margin flexrows'>
               <div class="ph_server ${o}">${s}</div>
               <div class="ph_action flexcenter"> 
                  <div class='ph_fish iconfish'></div>
               </div>
               <div class='viewGameFish ph_rally gameIndex="${t.index}" ph_${a}''> <b class="viewGameFish" gameIndex="${t.index}">${r||""}</b> </div>
            </div>
         </div>
      `;return t.points.forEach(c=>{l+=cf(c,e)}),l}function cf(t,e){const n=t.index%2?"even":"odd";let r=!t.tiebreak&&t.server?t.score.split("-").reverse().join("-"):t.score,i;if(t.result){let c;["Ace","Winner"].indexOf(t.result)>=0?c=e[t.winner].name:c=e[1-t.winner].name,i=c.split(" ").map(u=>u[0]).join("")}const s=t.hand?t.hand+" ":"",o=t.result||"",a=o?`${i}: ${s}${o}`:"";r=r=="0-0"?"GAME":r,t.tiebreak&&(t.server&&(r=`&nbsp;${r}*`),t.server||(r=`*${r}&nbsp;`));const l=t.rally?t.rally.length+1:"";return`
    <div class='flexrows ph_episode' pointIndex="${t.index}">
        <div class='ph_point_${n} flexrows'>
          <div class='viewEditPoint ph_result'>${a}</div>
          <div class='viewEditPoint ph_score'>${r} </div>
          <div class='viewEditPoint ph_score'>${l}</div>
        </div>
    </div>
    `}function lf(){const t=b.match.history.points().map(i=>i.uts),e=Math.min(...t),r=(Math.max(...t)-e)/1e3;return uf(r)}function uf(t){const e=parseInt(t,10);let n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),i=e-n*3600-r*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i}function Ss(t){t=t||b.match.history.action("addPoint");const e=[{points:[]}];let n=0,r=0;return t==null||t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function Ae(){Array.from(document.querySelectorAll(".ch_modal")).forEach(t=>t.style.display="none")}function qr(){const t=b.match.score(),e=t.counters.sets,n=t.counters.games,r=t.points.split("-"),i=b.swap_sides?1:0,s=b.swap_sides?0:1;Array.from(document.getElementsByClassName("points")).forEach((g,x)=>{g.value=r[b.swap_sides?1-x:x]}),Array.from(document.querySelectorAll(".display_points_0")).forEach(g=>g.innerHTML=r[i]),Array.from(document.querySelectorAll(".display_points_1")).forEach(g=>g.innerHTML=r[s]),Array.from(document.querySelectorAll(".display_games_0")).forEach(g=>g.innerHTML=n[i]),Array.from(document.querySelectorAll(".display_games_1")).forEach(g=>g.innerHTML=n[s]),Array.from(document.querySelectorAll(".display_sets_0")).forEach(g=>g.innerHTML=e[i]),Array.from(document.querySelectorAll(".display_sets_1")).forEach(g=>g.innerHTML=e[s]);const d=t.components.sets,p=b.match.format.threshold(),m=p==1?0:p>2?4:2;[0,1,2,3,4].forEach(g=>{(!d||d&&!d[g])&&(Array.from(document.getElementsByClassName("games"+g)).forEach(N=>N.value="-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_0")).forEach(N=>N.innerHTML=g>m?" ":"-"),Array.from(document.getElementsByClassName("display_set_"+g+"_games_1")).forEach(N=>N.innerHTML=g>m?" ":"-"))}),d&&d.forEach((g,x)=>{Array.from(document.getElementsByClassName("games"+x)).forEach((I,v)=>I.value=g.games[b.swap_sides?1-v:v]),Array.from(document.getElementsByClassName("display_set_"+x+"_games_0")).forEach(I=>I.innerHTML=g.games[b.swap_sides?1:0]),Array.from(document.getElementsByClassName("display_set_"+x+"_games_1")).forEach(I=>I.innerHTML=g.games[b.swap_sides?0:1])})}function Gr(){b.match.metadata.players().forEach((s,o)=>{["hand","entry","seed","draw_position","ioc","rank"].forEach(l=>{const c=`player${o}_${l}`,u=document.getElementById(c);u&&(u.value=s[l]||"")})});const e=b.match.metadata.defineMatch();["court","umpire"].forEach(s=>{const o=`match_${s}`,a=document.getElementById(o);a&&(a.value=e[s]||"")});const r=b.match.metadata.defineTournament();["name","start_date","tour","rank","surface","in_out","draw","draw_size","round"].forEach(s=>{const o=`tournament_${s}`,a=document.getElementById(o);a&&(a.value=r[s]||"")})}function oe(){he(),b.serve2nd=!1,b.rally_mode=!1,Ts(),qr(),Wr()}function Wr(){const t=b.match.history.action("addPoint"),e=JSON.parse(rt.get("match_archive")||"[]");Array.from(document.querySelectorAll(".view_stats")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".change_server")).forEach(s=>s.style.display=t.length==0?"inline":"none"),Array.from(document.querySelectorAll(".view_archive")).forEach(s=>s.style.display=t.length==0&&e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_settings")).forEach(s=>s.style.display=t.length==0&&!e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_history")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".undo")).forEach(s=>{s.style.display=t.length>0||b.serve2nd||b.rally_mode?"flex":"none"}),Array.from(document.querySelectorAll(".redo")).forEach(s=>{s.style.display=b.undone.length?"flex":"none"});const n=t.length?t[t.length-1]:void 0,r=i();b.match.status=r,Array.from(document.querySelectorAll(".status_message")).forEach(s=>s.innerHTML=r);function i(){if(n){if(n.needed.points_to_set&&Math.min(...n.needed.points_to_set)==1)return"SET POINT";if(n.point.breakpoint)return"BREAK POINT";if(n.needed.points_to_game&&n.needed.points_to_game[n.point.server]==1)return"GAME POINT"}return b.lets?`Lets: ${b.lets}`:""}}function Ts(){b.match.nextTeamServing()!=b.serving&&setTimeout(()=>Yr(),400),Vr(),zr()}function Vr(){const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;Array.from(document.querySelectorAll(".fault")).forEach(u=>u.innerHTML="Fault");const n=`.modeaction_player${t}`;Array.from(document.querySelectorAll(n)).forEach(u=>u.innerHTML="Serve");const r=`.modeerr_player${t}`;Array.from(document.querySelectorAll(r)).forEach(u=>u.innerHTML="Fault");const i=`.modewin_player${t}`;Array.from(document.querySelectorAll(i)).forEach(u=>u.innerHTML="Ace");const s=`.modeforce_player${t}`;Array.from(document.querySelectorAll(s)).forEach(u=>u.innerHTML="Let");const o=`.modeaction_player${e}`;Array.from(document.querySelectorAll(o)).forEach(u=>u.innerHTML="Return");const a=`.modeerr_player${e}`;Array.from(document.querySelectorAll(a)).forEach(u=>u.innerHTML="UFE");const l=`.modewin_player${e}`;Array.from(document.querySelectorAll(l)).forEach(u=>u.innerHTML="Winner");const c=`.modeforce_player${e}`;Array.from(document.querySelectorAll(c)).forEach(u=>u.innerHTML="Forced"),Array.from(document.querySelectorAll(".vs_point_button")).forEach(u=>u.style.display=$t.point_buttons?"flex":"none"),Array.from(document.querySelectorAll(".rally")).forEach(u=>u.innerHTML="Rally")}function Yr(){if(b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),$t.auto_swap_sides){const r=Ss();let i=r.length;r[r.length-1].complete&&(i+=1),b.match_swap=ff(i)}else b.match_swap=!1;_c();const t=b.swap_sides?1-b.serving:b.serving,e=b.swap_sides?1-b.receiving:b.receiving;Do(`.indicate_serve.display_player_${t}`,"yellow"),Do(`.indicate_serve.display_player_${e}`,"white"),t?(Gn(".display_0_serving","none"),Gn(".display_1_serving","flex")):(Gn(".display_0_serving","flex"),Gn(".display_1_serving","none")),Array.from(document.getElementsByClassName("points")).forEach((r,i)=>{const s=b.swap_sides?1-i:i;r.style.backgroundColor=s==b.serving?"#FBF781":"#D1FBFB"}),Vr()}function ff(t){return![!0].concat([...Array(t).keys()].map(n=>(n+1)%4<2))[t]}function _c(){b.swap_sides=b.match_swap,Sn.user_swap&&(b.swap_sides=!b.swap_sides),oe()}function Do(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.color=e)}function Gn(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.display=e)}function hf(t){if(t.keyCode==13||t.code==9){const e=document.getElementById("player_hand");e&&e.focus(),qi()}}function qi(){const t=document.getElementById("playername"),e=document.getElementById("team"),n=document.getElementById("playerid");if(t){const r={index:b.edit_player,name:t.value};e&&(r.team=e.value),n&&(r.id=n.value),b.match.metadata.definePlayer(r)}zr()}function df(){Ae();const t=document.getElementById("matchdeets");t&&(t.style.display="flex");const e=document.getElementById("matchdetail_content");e&&(e.scrollTop=0)}const pf=""+new URL("exportwhite-3Rc7oKSc.png",import.meta.url).href,mf=""+new URL("recycle-rzIDJowx.png",import.meta.url).href;function gf(t){t=t||rt.get("current_match"),Array.from(document.querySelectorAll(".mh_export")).forEach(a=>a.style.display="none");const e=rt.get(t),n=`
   <p>&nbsp;</p>
   <h1>Export Options</h1>
   <p>Supported by your device</p>
`,r=`
   <div matchId="${t}" class="exportMatch flexcenter">
      <div matchId="${t}" class='exportMatch export_action action_icon iconsave'></div>
   </div>
`,i=`
   <div class="flexcenter">
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
         <div class='export_action action_icon iconclipboard'></div> 
      </button>
   </div> 
`,s=`<div>${n}<div class="flexrows flexcenter">${As.isIDevice?"":r}${i}</div></div>`;zt(s,e)}const Gt={hasClass:function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){if(this.hasClass(t,e))return;const n=t.className.split(" ");n.push(e),t.className=n.join(" ")},removeClass:function(t,e){if(!this.hasClass(t,e))return;const n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n,"")}},yf={init:t=>{let e=0,n=0;t.buttons.forEach(i=>{i.side=="right"&&(e+=i.width||0),i.side=="left"&&(n+=i.width||0)});const r=Array.from(document.querySelectorAll(t.container));r.forEach(i=>{let s=0,o=0,a=null,l=0,c=0;t.buttons.forEach(u=>{const f=document.createElement("div");f.textContent=u.text,f.className=u.class,u.side=="right"&&(l+=u.width||0,f.style.right=-1*l+"px"),u.side=="left"&&(c+=u.width||0,f.style.left=-1*c+"px");const h=i.appendChild(f);if(u.image){const d=document.createElement("img");d.src=u.image,d.className=u.image_class,h.appendChild(d)}}),i.style.webkitTransform="translateZ(0)",i.style.transform="translateZ(0)",i.addEventListener("touchstart",function(u){i.style.transitionDuration="0ms",r.forEach(h=>{Gt.hasClass(h,"move-out-click")&&h!=i&&(h.style.transitionDuration="325ms",h.style.webkitTransform="translateX(0px)",h.style.transform="translateX(0px)",Gt.removeClass(h,"move-out-click"))});const f=u.changedTouches;a={x:f[0].pageX,y:f[0].pageY}},!0),i.addEventListener("touchmove",function(u){if(a===null)return;const f=u.changedTouches,h=f[0].pageX,d=f[0].pageY;if(s=h-a.x,o=d-a.y,Math.abs(s)>Math.abs(o)){if(s>0){if(Gt.hasClass(i,"move-out-click")){const p=s>e?0:-e+s;i.style.transform="translateX("+p+"px)"}else if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}if(s<0)if(Gt.hasClass(i,"move-out-click")){if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}else{const p=Math.abs(s)>e?-e:s;i.style.transform="translateX("+p+"px)"}}},!0),i.addEventListener("touchend",function(){if(a!==null){if(i.style.transitionDuration="125ms",Gt.hasClass(i,"move-out-click")){if(s>0&&e){const u=s>10?0:-e;i.style.transform="translateX("+u+"px)",u===0&&Gt.removeClass(i,"move-out-click")}else if(n){const u=s<-10?0:e;i.style.transform="translateX("+u+"px)",u===0&&Gt.removeClass(i,"move-out-click")}}else if(s<0&&e){const u=Math.abs(s)>e/2?-e:0;i.style.transform="translateX("+u+"px)",u!==0&&Gt.addClass(i,"move-out-click")}else if(n){const u=Math.abs(s)>e/2?e:0;i.style.transform="translateX("+u+"px)",u!==0&&Gt.addClass(i,"move-out-click")}a=null,s=0}},!0),i.addEventListener("touchcancel",function(){i.style.transitionDuration="225ms",i.style.webkitTransform="translateX(0px)",i.style.transform="translateX(0px)",Gt.removeClass(i,"move-out-click"),a=null,s=0},!0)})}};function vc(){b.match.events.addPoint(oe),b.match.events.undo(oe),b.match.events.reset(_f)}function _f(){b.match.set.perspectiveScore(!1),b.match.set.liveStats(!0),b.match.metadata.timestamps(!0),b.match.metadata.defineMatch({date:null}),b.serve2nd=!1,b.rally_mode=!1,b.serving=b.match.nextTeamServing(),b.receiving=b.match.nextTeamReceiving(),b.undone=[],b.rally=0,b.lets=0,Cs(),zr(),Yr(),oe()}function Cs(){Object.keys(Ot).forEach(t=>bc(t))}function bc(t){const e=document.getElementById(t);e&&Ot!=null&&Ot[t]&&Ot[t].color&&(e.style.backgroundColor="white",e.style.color=Ot[t].color,e.style.borderColor=Ot[t].color)}function jr(){const t=[];for(let s=0;s<256;s++)t[s]=(s<16?"0":"")+s.toString(16);const e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return t[e&255]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[n&255]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[r&63|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[i&255]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}function Ms(t,e="entry"){if(!t){bt("entry");return}b.match.reset();const n=rt.get(t),r=n&&Ju(n)&&t?JSON.parse(rt.get(t)??"[]"):void 0;if(!r){bt("entry");return}if(ef(),rt.set("current_match",t),r.match&&(r.match.muid||(r.match.muid=jr(),rt.remove(t)),b.match.metadata.defineMatch(r.match)),r.first_service&&b.match.set.firstService(r.first_service),r.tournament&&b.match.metadata.defineTournament(r.tournament),r.format){b.match.format.settings(r.format);const i=document.getElementById("md_format");i&&(i.innerHTML=r.format.name)}r.version||r.points.forEach(i=>b.match.addPoint(i)),b.match.metadata.timestamps(!0),r.players&&r.players.forEach((i,s)=>{i.index=s,b.match.metadata.definePlayer(i)}),zr(),qr(),Gr(),oe(),vc(),bt(e)}function wc(t){const e=t==null?void 0:t.active;let n="<div class='swipe-panel no-top'>";const r=JSON.parse(rt.get("match_archive")||"[]").filter((s,o,a)=>a.lastIndexOf(s)==o).reverse();if(!r.length){Ns();return}if(e)return;r.forEach(s=>{const o=s&&JSON.parse(rt.get(s)??"[]");o?n+=wf(s,o):rt.remove(s)}),n+="</div>";const i=document.getElementById("matcharchiveList");return i&&(i.innerHTML=n),yf.init({container:".swipe-item",buttons:[{class:"img_export swipe_img",image_class:"export_icon",image:pf,side:"right",width:60},{class:"img_recycle swipe_img",image_class:"recycle_icon",image:mf,side:"right",width:60}]}),i&&i.addEventListener("click",function(s){var c,u;const o=En(s.target,"swipe-item"),a=o==null?void 0:o.getAttribute("muid");if(En(s.target,"mh_match"))return Ms(a);(((u=(c=s==null?void 0:s.target)==null?void 0:c.className)==null?void 0:u.indexOf("img_export"))>=0||s.target.className=="export_icon")&&(o.classList.remove("move-out-click"),o.style.webkitTransitionDuration="125ms",o.style.transitionDuration="125ms",o.style.webkitTransform="translateX(0px)",o.style.transform="translateX(0px)",gf(a)),(s.target.className.indexOf("img_recycle")>=0||s.target.className=="recycle_icon")&&(vf(a),o.remove())}),r}function vf(t){rt.remove(t);const e=rt.get("current_match");let n=JSON.parse(rt.get("match_archive")||"[]");n=n.filter(r=>t!=r),rt.set("match_archive",JSON.stringify(n)),t==e&&Os(),wc({active:!0})}function Os(t){b.match.reset(),Gr(),qr();const e=new Date().valueOf();t=t||jr(),b.match.metadata.defineMatch({muid:t,date:e}),rt.set("current_match",t),oe()}function Ns(t){Os(),bt(t?"entry":"matchformat")}const bf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function wf(t,e){const n=new Date(e.match.date),r=[n.getDate(),bf[n.getMonth()],n.getFullYear()].join("-"),i=e.players,s=`
         <span class='nowrap'>${An(i[0].name)}</span>
         <span> v. </span>
         <span class='nowrap'>${An(i[1].name)}</span>
         `,o=e.scoreboard,a=e.format.name;return`
      <div id='match_${t}' muid='${t}' class='flexcenter mh_swipe swipe-item'>
         <div class='flexcols mh_match'>
            <div class='mh_players'>${s}</div>
            <div class='mh_details'>
               <div>${r}</div>
               <div class='mh_format'>${a}</div>
            </div>
            <div class='mh_score'>${o}</div>
         </div>
      </div>`}function xf(){const t=b.match.format.types();let e="";if(!t.length)return!1;t.forEach(r=>{e+=kf(r)});const n=document.getElementById("matchformatlist");n&&(n.innerHTML=e)}function kf(t){const{name:e,description:n}=mc.formats().matches[t];return`
  <div class='changeFormat flexjustifystart mf_format' newFormat="${t}">
      <div class='changeFormat flexcols'>
        <div class='changeFormat mf_name'> <b class='changeFormat'>${e||""}</b> </div>
        <div class='changeFormat mf_description'> ${n} </div>
      </div>
  </div>
  `}function xc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Af(t){return t.length===1&&(t=Ef(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function Ef(t){return function(e,n){return xc(t(e),n)}}var Sf=Af(xc),Tf=Sf.right;function Vt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Gi=Math.sqrt(50),Wi=Math.sqrt(10),Vi=Math.sqrt(2);function Cf(t,e,n){var r,i=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=rr(t,e,n))===0||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(s=Math.ceil(e-t+1));++i<s;)o[i]=(t+i)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(s=Math.ceil(t-e+1));++i<s;)o[i]=(t-i)/a;return r&&o.reverse(),o}function rr(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Gi?10:s>=Wi?5:s>=Vi?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Gi?10:s>=Wi?5:s>=Vi?2:1)}function Mf(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Gi?i*=10:s>=Wi?i*=5:s>=Vi&&(i*=2),e<t?-i:i}var hi=Array.prototype.slice;function Of(t){return t}var di=1,pi=2,Yi=3,dn=4,Bo=1e-6;function Nf(t){return"translate("+(t+.5)+",0)"}function Rf(t){return"translate(0,"+(t+.5)+")"}function Lf(t){return function(e){return+t(e)}}function Pf(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function If(){return!this.__axis}function kc(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l=t===di||t===dn?-1:1,c=t===dn||t===pi?"x":"y",u=t===di||t===Yi?Nf:Rf;function f(h){var d=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):Of),m=Math.max(s,0)+a,g=e.range(),x=+g[0]+.5,A=+g[g.length-1]+.5,k=(e.bandwidth?Pf:Lf)(e.copy()),N=h.selection?h.selection():h,I=N.selectAll(".domain").data([null]),v=N.selectAll(".tick").data(d,e).order(),_=v.exit(),y=v.enter().append("g").attr("class","tick"),L=v.select("line"),W=v.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),v=v.merge(y),L=L.merge(y.append("line").attr("stroke","#000").attr(c+"2",l*s)),W=W.merge(y.append("text").attr("fill","#000").attr(c,l*m).attr("dy",t===di?"0em":t===Yi?"0.71em":"0.32em")),h!==N&&(I=I.transition(h),v=v.transition(h),L=L.transition(h),W=W.transition(h),_=_.transition(h).attr("opacity",Bo).attr("transform",function(Y){return isFinite(Y=k(Y))?u(Y):this.getAttribute("transform")}),y.attr("opacity",Bo).attr("transform",function(Y){var Q=this.parentNode.__axis;return u(Q&&isFinite(Q=Q(Y))?Q:k(Y))})),_.remove(),I.attr("d",t===dn||t==pi?"M"+l*o+","+x+"H0.5V"+A+"H"+l*o:"M"+x+","+l*o+"V0.5H"+A+"V"+l*o),v.attr("opacity",1).attr("transform",function(Y){return u(k(Y))}),L.attr(c+"2",l*s),W.attr(c,l*m).text(p),N.filter(If).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pi?"start":t===dn?"end":"middle"),N.each(function(){this.__axis=k})}return f.scale=function(h){return arguments.length?(e=h,f):e},f.ticks=function(){return n=hi.call(arguments),f},f.tickArguments=function(h){return arguments.length?(n=h==null?[]:hi.call(h),f):n.slice()},f.tickValues=function(h){return arguments.length?(r=h==null?null:hi.call(h),f):r&&r.slice()},f.tickFormat=function(h){return arguments.length?(i=h,f):i},f.tickSize=function(h){return arguments.length?(s=o=+h,f):s},f.tickSizeInner=function(h){return arguments.length?(s=+h,f):s},f.tickSizeOuter=function(h){return arguments.length?(o=+h,f):o},f.tickPadding=function(h){return arguments.length?(a=+h,f):a},f}function Df(t){return kc(Yi,t)}function Bf(t){return kc(dn,t)}var Ff={value:function(){}};function Ac(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new ir(n)}function ir(t){this._=t}function Uf(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ir.prototype=Ac.prototype={constructor:ir,on:function(t,e){var n=this._,r=Uf(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Hf(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Fo(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Fo(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ir(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Hf(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Fo(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ff,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ji="http://www.w3.org/1999/xhtml";const Uo={svg:"http://www.w3.org/2000/svg",xhtml:ji,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Uo.hasOwnProperty(e)?{space:Uo[e],local:t}:t}function $f(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ji&&e.documentElement.namespaceURI===ji?e.createElement(t):e.createElementNS(n,t)}}function zf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ec(t){var e=Kr(t);return(e.local?zf:$f)(e)}function qf(){}function Rs(t){return t==null?qf:function(){return this.querySelector(t)}}function Gf(t){typeof t!="function"&&(t=Rs(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ct(r,this._parents)}function Wf(){return[]}function Sc(t){return t==null?Wf:function(){return this.querySelectorAll(t)}}function Vf(t){typeof t!="function"&&(t=Sc(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Ct(r,i)}var Tc=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var tn=document.documentElement;if(!tn.matches){var Yf=tn.webkitMatchesSelector||tn.msMatchesSelector||tn.mozMatchesSelector||tn.oMatchesSelector;Tc=function(t){return function(){return Yf.call(this,t)}}}}const Cc=Tc;function jf(t){typeof t!="function"&&(t=Cc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Ct(r,this._parents)}function Mc(t){return new Array(t.length)}function Kf(){return new Ct(this._enter||this._groups.map(Mc),this._parents)}function yr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}yr.prototype={constructor:yr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Jf(t){return function(){return t}}var Ho="$";function Xf(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new yr(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function Zf(t,e,n,r,i,s,o){var a,l,c={},u=e.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(h[a]=d=Ho+o.call(l,l.__data__,a,e),d in c?i[a]=l:c[d]=l);for(a=0;a<f;++a)d=Ho+o.call(t,s[a],a,s),(l=c[d])?(r[a]=l,l.__data__=s[a],c[d]=null):n[a]=new yr(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c[h[a]]===l&&(i[a]=l)}function Qf(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(v){d[++c]=v}),d;var n=e?Zf:Xf,r=this._parents,i=this._groups;typeof t!="function"&&(t=Jf(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=t.call(u,u&&u.__data__,c,r),p=d.length,m=a[c]=new Array(p),g=o[c]=new Array(p),x=l[c]=new Array(h);n(u,f,m,g,x,d,e);for(var A=0,k=0,N,I;A<p;++A)if(N=m[A]){for(A>=k&&(k=A+1);!(I=g[k])&&++k<p;);N._next=I||null}}return o=new Ct(o,r),o._enter=a,o._exit=l,o}function th(){return new Ct(this._exit||this._groups.map(Mc),this._parents)}function eh(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Ct(o,this._parents)}function nh(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o);return this}function rh(t){t||(t=ih);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Ct(i,this._parents).order()}function ih(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sh(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oh(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function ah(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ch(){var t=0;return this.each(function(){++t}),t}function lh(){return!this.node()}function uh(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function fh(t){return function(){this.removeAttribute(t)}}function hh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dh(t,e){return function(){this.setAttribute(t,e)}}function ph(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yh(t,e){var n=Kr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?hh:fh:typeof e=="function"?n.local?gh:mh:n.local?ph:dh)(n,e))}function Oc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _h(t){return function(){this.style.removeProperty(t)}}function vh(t,e,n){return function(){this.style.setProperty(t,e,n)}}function bh(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wh(t,e,n){return arguments.length>1?this.each((e==null?_h:typeof e=="function"?bh:vh)(t,e,n??"")):Ue(this.node(),t)}function Ue(t,e){return t.style.getPropertyValue(e)||Oc(t).getComputedStyle(t,null).getPropertyValue(e)}function xh(t){return function(){delete this[t]}}function kh(t,e){return function(){this[t]=e}}function Ah(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Eh(t,e){return arguments.length>1?this.each((e==null?xh:typeof e=="function"?Ah:kh)(t,e)):this.node()[t]}function Nc(t){return t.trim().split(/^|\s+/)}function Ls(t){return t.classList||new Rc(t)}function Rc(t){this._node=t,this._names=Nc(t.getAttribute("class")||"")}Rc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lc(t,e){for(var n=Ls(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Pc(t,e){for(var n=Ls(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Sh(t){return function(){Lc(this,t)}}function Th(t){return function(){Pc(this,t)}}function Ch(t,e){return function(){(e.apply(this,arguments)?Lc:Pc)(this,t)}}function Mh(t,e){var n=Nc(t+"");if(arguments.length<2){for(var r=Ls(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ch:e?Sh:Th)(n,e))}function Oh(){this.textContent=""}function Nh(t){return function(){this.textContent=t}}function Rh(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Lh(t){return arguments.length?this.each(t==null?Oh:(typeof t=="function"?Rh:Nh)(t)):this.node().textContent}function Ph(){this.innerHTML=""}function Ih(t){return function(){this.innerHTML=t}}function Dh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Bh(t){return arguments.length?this.each(t==null?Ph:(typeof t=="function"?Dh:Ih)(t)):this.node().innerHTML}function Fh(){this.nextSibling&&this.parentNode.appendChild(this)}function Uh(){return this.each(Fh)}function Hh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $h(){return this.each(Hh)}function zh(t){var e=typeof t=="function"?t:Ec(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qh(){return null}function Gh(t,e){var n=typeof t=="function"?t:Ec(t),r=e==null?qh:typeof e=="function"?e:Rs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wh(){var t=this.parentNode;t&&t.removeChild(this)}function Vh(){return this.each(Wh)}function Yh(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function jh(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Kh(t){return this.select(t?jh:Yh)}function Jh(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ic={};if(typeof document<"u"){var Xh=document.documentElement;"onmouseenter"in Xh||(Ic={mouseenter:"mouseover",mouseleave:"mouseout"})}function Zh(t,e,n){return t=Dc(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Dc(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Qh(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function td(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function ed(t,e,n){var r=Ic.hasOwnProperty(t.type)?Zh:Dc;return function(i,s,o){var a=this.__on,l,c=r(e,s,o);if(a){for(var u=0,f=a.length;u<f;++u)if((l=a[u]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},a?a.push(l):this.__on=[l]}}function nd(t,e,n){var r=Qh(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?ed:td,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}function Bc(t,e,n){var r=Oc(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function rd(t,e){return function(){return Bc(this,t,e)}}function id(t,e){return function(){return Bc(this,t,e.apply(this,arguments))}}function sd(t,e){return this.each((typeof e=="function"?id:rd)(t,e))}var Ps=[null];function Ct(t,e){this._groups=t,this._parents=e}function In(){return new Ct([[document.documentElement]],Ps)}Ct.prototype=In.prototype={constructor:Ct,select:Gf,selectAll:Vf,filter:jf,data:Qf,enter:Kf,exit:th,merge:eh,order:nh,sort:rh,call:sh,nodes:oh,node:ah,size:ch,empty:lh,each:uh,attr:yh,style:wh,property:Eh,classed:Mh,text:Lh,html:Bh,raise:Uh,lower:$h,append:zh,insert:Gh,remove:Vh,clone:Kh,datum:Jh,on:nd,dispatch:sd};function ft(t){return typeof t=="string"?new Ct([[document.querySelector(t)]],[document.documentElement]):new Ct([[t]],Ps)}var od=0;function $o(){this._="@"+(++od).toString(36)}$o.prototype={constructor:$o,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ki(t){return typeof t=="string"?new Ct([document.querySelectorAll(t)],[document.documentElement]):new Ct([t??[]],Ps)}function Ye(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Dn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function de(){}var ve=.7,He=1/ve,Ie="\\s*([+-]?\\d+)\\s*",Tn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ad=/^#([0-9a-f]{3})$/,cd=/^#([0-9a-f]{6})$/,ld=new RegExp("^rgb\\("+[Ie,Ie,Ie]+"\\)$"),ud=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),fd=new RegExp("^rgba\\("+[Ie,Ie,Ie,Tn]+"\\)$"),hd=new RegExp("^rgba\\("+[Kt,Kt,Kt,Tn]+"\\)$"),dd=new RegExp("^hsl\\("+[Tn,Kt,Kt]+"\\)$"),pd=new RegExp("^hsla\\("+[Tn,Kt,Kt,Tn]+"\\)$"),zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ye(de,be,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function be(t){var e;return t=(t+"").trim().toLowerCase(),(e=ad.exec(t))?(e=parseInt(e[1],16),new kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1)):(e=cd.exec(t))?qo(parseInt(e[1],16)):(e=ld.exec(t))?new kt(e[1],e[2],e[3],1):(e=ud.exec(t))?new kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fd.exec(t))?Go(e[1],e[2],e[3],e[4]):(e=hd.exec(t))?Go(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dd.exec(t))?Wo(e[1],e[2]/100,e[3]/100,1):(e=pd.exec(t))?Wo(e[1],e[2]/100,e[3]/100,e[4]):zo.hasOwnProperty(t)?qo(zo[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function qo(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function Go(t,e,n,r){return r<=0&&(t=e=n=NaN),new kt(t,e,n,r)}function Is(t){return t instanceof de||(t=be(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function Ji(t,e,n,r){return arguments.length===1?Is(t):new kt(t,e,n,r??1)}function kt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ye(kt,Ji,Dn(de,{brighter:function(t){return t=t==null?He:Math.pow(He,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ve:Math.pow(ve,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function Wo(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wt(t,e,n,r)}function md(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof de||(t=be(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Wt(o,a,l,t.opacity)}function gd(t,e,n,r){return arguments.length===1?md(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ye(Wt,gd,Dn(de,{brighter:function(t){return t=t==null?He:Math.pow(He,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ve:Math.pow(ve,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new kt(mi(t>=240?t-240:t+120,i,r),mi(t,i,r),mi(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));function mi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Fc=Math.PI/180,Uc=180/Math.PI,_r=18,Hc=.95047,$c=1,zc=1.08883,qc=4/29,De=6/29,Gc=3*De*De,yd=De*De*De;function Ds(t){if(t instanceof ee)return new ee(t.l,t.a,t.b,t.opacity);if(t instanceof fe){var e=t.h*Fc;return new ee(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof kt||(t=Is(t));var n=vi(t.r),r=vi(t.g),i=vi(t.b),s=gi((.4124564*n+.3575761*r+.1804375*i)/Hc),o=gi((.2126729*n+.7151522*r+.072175*i)/$c),a=gi((.0193339*n+.119192*r+.9503041*i)/zc);return new ee(116*o-16,500*(s-o),200*(o-a),t.opacity)}function _d(t,e,n,r){return arguments.length===1?Ds(t):new ee(t,e,n,r??1)}function ee(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Ye(ee,_d,Dn(de,{brighter:function(t){return new ee(this.l+_r*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new ee(this.l-_r*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=$c*yi(t),e=Hc*yi(e),n=zc*yi(n),new kt(_i(3.2404542*e-1.5371385*t-.4985314*n),_i(-.969266*e+1.8760108*t+.041556*n),_i(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}}));function gi(t){return t>yd?Math.pow(t,1/3):t/Gc+qc}function yi(t){return t>De?t*t*t:Gc*(t-qc)}function _i(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function vi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vd(t){if(t instanceof fe)return new fe(t.h,t.c,t.l,t.opacity);t instanceof ee||(t=Ds(t));var e=Math.atan2(t.b,t.a)*Uc;return new fe(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Xi(t,e,n,r){return arguments.length===1?vd(t):new fe(t,e,n,r??1)}function fe(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Ye(fe,Xi,Dn(de,{brighter:function(t){return new fe(this.h,this.c,this.l+_r*(t??1),this.opacity)},darker:function(t){return new fe(this.h,this.c,this.l-_r*(t??1),this.opacity)},rgb:function(){return Ds(this).rgb()}}));var Wc=-.14861,Bs=1.78277,Fs=-.29227,Jr=-.90649,Cn=1.97294,Vo=Cn*Jr,Yo=Cn*Bs,jo=Bs*Fs-Jr*Wc;function bd(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);t instanceof kt||(t=Is(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(jo*r+Vo*e-Yo*n)/(jo+Vo-Yo),s=r-i,o=(Cn*(n-i)-Fs*s)/Jr,a=Math.sqrt(o*o+s*s)/(Cn*i*(1-i)),l=a?Math.atan2(o,s)*Uc-120:NaN;return new _e(l<0?l+360:l,a,i,t.opacity)}function Xt(t,e,n,r){return arguments.length===1?bd(t):new _e(t,e,n,r??1)}function _e(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ye(_e,Xt,Dn(de,{brighter:function(t){return t=t==null?He:Math.pow(He,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ve:Math.pow(ve,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Fc,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new kt(255*(e+n*(Wc*r+Bs*i)),255*(e+n*(Fs*r+Jr*i)),255*(e+n*(Cn*r)),this.opacity)}}));function Xr(t){return function(){return t}}function Vc(t,e){return function(n){return t+n*e}}function wd(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Yc(t,e){var n=e-t;return n?Vc(t,n>180||n<-180?n-360*Math.round(n/360):n):Xr(isNaN(t)?e:t)}function xd(t){return(t=+t)==1?re:function(e,n){return n-e?wd(e,n,t):Xr(isNaN(e)?n:e)}}function re(t,e){var n=e-t;return n?Vc(t,n):Xr(isNaN(t)?e:t)}const vr=function t(e){var n=xd(e);function r(i,s){var o=n((i=Ji(i)).r,(s=Ji(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=re(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function kd(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Us(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Ad(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function Ht(t,e){return t=+t,e-=t,function(n){return t+e*n}}function Ed(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Us(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bi=new RegExp(Zi.source,"g");function Sd(t){return function(){return t}}function Td(t){return function(e){return t(e)+""}}function jc(t,e){var n=Zi.lastIndex=bi.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Zi.exec(t))&&(i=bi.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Ht(r,i)})),n=bi.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Td(l[0].x):Sd(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Us(t,e){var n=typeof e,r;return e==null||n==="boolean"?Xr(e):(n==="number"?Ht:n==="string"?(r=be(e))?(e=r,vr):jc:e instanceof be?vr:e instanceof Date?Ad:Array.isArray(e)?kd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ed:Ht)(t,e)}function Cd(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}var Ko=180/Math.PI,Qi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kc(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ko,skewX:Math.atan(l)*Ko,scaleX:o,scaleY:a}}var en,wi,Jo,Wn;function Md(t){return t==="none"?Qi:(en||(en=document.createElement("DIV"),wi=document.documentElement,Jo=document.defaultView),en.style.transform=t,t=Jo.getComputedStyle(wi.appendChild(en),null).getPropertyValue("transform"),wi.removeChild(en),t=t.slice(7,-1).split(","),Kc(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Od(t){return t==null||(Wn||(Wn=document.createElementNS("http://www.w3.org/2000/svg","g")),Wn.setAttribute("transform",t),!(t=Wn.transform.baseVal.consolidate()))?Qi:(t=t.matrix,Kc(t.a,t.b,t.c,t.d,t.e,t.f))}function Jc(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ht(c,f)},{i:m-2,x:Ht(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ht(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ht(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ht(c,f)},{i:m-2,x:Ht(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,m=h.length,g;++p<m;)f[(g=h[p]).i]=g.x(d);return f.join("")}}}var Nd=Jc(Md,"px, ","px)","deg)"),Rd=Jc(Od,", ",")",")");function Ld(t){return function(e,n){var r=t((e=Xi(e)).h,(n=Xi(n)).h),i=re(e.c,n.c),s=re(e.l,n.l),o=re(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const Pd=Ld(Yc);function Xc(t){return function e(n){n=+n;function r(i,s){var o=t((i=Xt(i)).h,(s=Xt(s)).h),a=re(i.s,s.s),l=re(i.l,s.l),c=re(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}Xc(Yc);var Hs=Xc(re),$e=0,pn=0,nn=0,Zc=1e3,br,mn,wr=0,we=0,Zr=0,Mn=typeof performance=="object"&&performance.now?performance:Date,Qc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qr(){return we||(Qc(Id),we=Mn.now()+Zr)}function Id(){we=0}function xr(){this._call=this._time=this._next=null}xr.prototype=tl.prototype={constructor:xr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qr():+n)+(e==null?0:+e),!this._next&&mn!==this&&(mn?mn._next=this:br=this,mn=this),this._call=t,this._time=n,ts()},stop:function(){this._call&&(this._call=null,this._time=1/0,ts())}};function tl(t,e,n){var r=new xr;return r.restart(t,e,n),r}function Dd(){Qr(),++$e;for(var t=br,e;t;)(e=we-t._time)>=0&&t._call.call(null,e),t=t._next;--$e}function Xo(){we=(wr=Mn.now())+Zr,$e=pn=0;try{Dd()}finally{$e=0,Fd(),we=0}}function Bd(){var t=Mn.now(),e=t-wr;e>Zc&&(Zr-=e,wr=t)}function Fd(){for(var t,e=br,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:br=n);mn=t,ts(r)}function ts(t){if(!$e){pn&&(pn=clearTimeout(pn));var e=t-we;e>24?(t<1/0&&(pn=setTimeout(Xo,t-Mn.now()-Zr)),nn&&(nn=clearInterval(nn))):(nn||(wr=Mn.now(),nn=setInterval(Bd,Zc)),$e=1,Qc(Xo))}}function Zo(t,e,n){var r=new xr;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var Ud=Ac("start","end","interrupt"),Hd=[],el=0,es=1,kr=2,xi=3,Qo=4,ns=5,sr=6;function ti(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;$d(t,n,{name:e,index:r,group:i,on:Ud,tween:Hd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:el})}function $s(t,e){var n=qt(t,e);if(n.state>el)throw new Error("too late; already scheduled");return n}function Ee(t,e){var n=qt(t,e);if(n.state>kr)throw new Error("too late; already started");return n}function qt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $d(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=tl(s,0,n.time);function s(c){n.state=es,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==es)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===xi)return Zo(o);d.state===Qo?(d.state=sr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=sr,d.timer.stop(),delete r[u])}if(Zo(function(){n.state===xi&&(n.state=Qo,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=kr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===kr){for(n.state=xi,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=ns,1),f=-1,h=i.length;++f<h;)i[f].call(null,u);n.state===ns&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=sr,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function zd(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>kr&&r.state<ns,r.state=sr,r.timer.stop(),i&&r.on.call("interrupt",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function qd(t){return this.each(function(){zd(this,t)})}function Gd(t,e){var n,r;return function(){var i=Ee(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Wd(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ee(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function Vd(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=qt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Gd:Wd)(n,t,e))}function zs(t,e,n){var r=t._id;return t.each(function(){var i=Ee(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return qt(i,r).value[e]}}function nl(t,e){var n;return(typeof e=="number"?Ht:e instanceof be?vr:(n=be(e))?(e=n,vr):jc)(t,e)}function Yd(t){return function(){this.removeAttribute(t)}}function jd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kd(t,e,n){var r,i;return function(){var s=this.getAttribute(t);return s===n?null:s===r?i:i=e(r=s,n)}}function Jd(t,e,n){var r,i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===r?i:i=e(r=s,n)}}function Xd(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function Zd(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function Qd(t,e){var n=Kr(t),r=n==="transform"?Rd:nl;return this.attrTween(t,typeof e=="function"?(n.local?Zd:Xd)(n,r,zs(this,"attr."+t,e)):e==null?(n.local?jd:Yd)(n):(n.local?Jd:Kd)(n,r,e+""))}function tp(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttributeNS(t.space,t.local,i(s))}}return n._value=e,n}function ep(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttribute(t,i(s))}}return n._value=e,n}function np(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Kr(t);return this.tween(n,(r.local?tp:ep)(r,e))}function rp(t,e){return function(){$s(this,t).delay=+e.apply(this,arguments)}}function ip(t,e){return e=+e,function(){$s(this,t).delay=e}}function sp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rp:ip)(e,t)):qt(this.node(),e).delay}function op(t,e){return function(){Ee(this,t).duration=+e.apply(this,arguments)}}function ap(t,e){return e=+e,function(){Ee(this,t).duration=e}}function cp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?op:ap)(e,t)):qt(this.node(),e).duration}function lp(t,e){if(typeof e!="function")throw new Error;return function(){Ee(this,t).ease=e}}function up(t){var e=this._id;return arguments.length?this.each(lp(e,t)):qt(this.node(),e).ease}function fp(t){typeof t!="function"&&(t=Cc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Zt(r,this._parents,this._name,this._id)}function hp(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Zt(o,this._parents,this._name,this._id)}function dp(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function pp(t,e,n){var r,i,s=dp(e)?$s:Ee;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function mp(t,e){var n=this._id;return arguments.length<2?qt(this.node(),n).on.on(t):this.each(pp(n,t,e))}function gp(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function yp(){return this.on("end.remove",gp(this._id))}function _p(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Rs(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,ti(c[h],e,n,h,c,qt(u,n)));return new Zt(s,this._parents,e,n)}function vp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sc(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,p=qt(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&ti(d,e,n,m,h,p);s.push(h),o.push(u)}return new Zt(s,o,e,n)}var bp=In.prototype.constructor;function wp(){return new bp(this._groups,this._parents)}function xp(t,e){var n,r,i;return function(){var s=Ue(this,t),o=(this.style.removeProperty(t),Ue(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function kp(t){return function(){this.style.removeProperty(t)}}function Ap(t,e,n){var r,i;return function(){var s=Ue(this,t);return s===n?null:s===r?i:i=e(r=s,n)}}function Ep(t,e,n){var r,i,s;return function(){var o=Ue(this,t),a=n(this);return a==null&&(a=(this.style.removeProperty(t),Ue(this,t))),o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function Sp(t,e,n){var r=(t+="")=="transform"?Nd:nl;return e==null?this.styleTween(t,xp(t,r)).on("end.style."+t,kp(t)):this.styleTween(t,typeof e=="function"?Ep(t,r,zs(this,"style."+t,e)):Ap(t,r,e+""),n)}function Tp(t,e,n){function r(){var i=this,s=e.apply(i,arguments);return s&&function(o){i.style.setProperty(t,s(o),n)}}return r._value=e,r}function Cp(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Tp(t,e,n??""))}function Mp(t){return function(){this.textContent=t}}function Op(t){return function(){var e=t(this);this.textContent=e??""}}function Np(t){return this.tween("text",typeof t=="function"?Op(zs(this,"text",t)):Mp(t==null?"":t+""))}function Rp(){for(var t=this._name,e=this._id,n=rl(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=qt(l,e);ti(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Zt(r,this._parents,t,n)}var Lp=0;function Zt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function rl(){return++Lp}var Me=In.prototype;Zt.prototype={constructor:Zt,select:_p,selectAll:vp,filter:fp,merge:hp,selection:wp,transition:Rp,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:mp,attr:Qd,attrTween:np,style:Sp,styleTween:Cp,text:Np,remove:yp,tween:Vd,delay:sp,duration:cp,ease:up};function Pp(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qs=3;(function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n})(qs);(function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n})(qs);(function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n})(qs);var Gs=1.70158;(function t(e){e=+e;function n(r){return r*r*((e+1)*r-e)}return n.overshoot=t,n})(Gs);(function t(e){e=+e;function n(r){return--r*r*((e+1)*r+e)+1}return n.overshoot=t,n})(Gs);(function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n})(Gs);var ze=2*Math.PI,Ws=1,Vs=.3;(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ze);function i(s){return e*Math.pow(2,10*--s)*Math.sin((r-s)/n)}return i.amplitude=function(s){return t(s,n*ze)},i.period=function(s){return t(e,s)},i})(Ws,Vs);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ze);function i(s){return 1-e*Math.pow(2,-10*(s=+s))*Math.sin((s+r)/n)}return i.amplitude=function(s){return t(s,n*ze)},i.period=function(s){return t(e,s)},i})(Ws,Vs);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ze);function i(s){return((s=s*2-1)<0?e*Math.pow(2,10*s)*Math.sin((r-s)/n):2-e*Math.pow(2,-10*s)*Math.sin((r+s)/n))/2}return i.amplitude=function(s){return t(s,n*ze)},i.period=function(s){return t(e,s)},i})(Ws,Vs);var rs={time:null,delay:0,duration:250,ease:Pp};function Ip(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return rs.time=Qr(),rs;return n}function Dp(t){var e,n;t instanceof Zt?(e=t._id,t=t._name):(e=rl(),(n=rs).time=Qr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&ti(l,t,e,c,o,n||Ip(l,e));return new Zt(r,this._parents,t,e)}In.prototype.interrupt=qd;In.prototype.transition=Dp;var Bp=[null];function Fp(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>es&&r.name===e)return new Zt([[t]],Bp,e,+i)}return null}var is=Math.PI,ss=2*is,ye=1e-6,Up=ss-ye;function os(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function il(){return new os}os.prototype=il.prototype={constructor:os,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>ye)if(!(Math.abs(u*a-l*c)>ye)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=r-o,p=a*a+l*l,m=h*h+d*d,g=Math.sqrt(p),x=Math.sqrt(f),A=i*Math.tan((is-Math.acos((p+f-m)/(2*g*x)))/2),k=A/x,N=A/g;Math.abs(k-1)>ye&&(this._+="L"+(t+k*c)+","+(e+k*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+N*a)+","+(this._y1=e+N*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>ye||Math.abs(this._y1-c)>ye)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%ss+ss),f>Up?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>ye&&(this._+="A"+n+","+n+",0,"+ +(f>=is)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Pt="$";function Ar(){}Ar.prototype=Er.prototype={constructor:Ar,has:function(t){return Pt+t in this},get:function(t){return this[Pt+t]},set:function(t,e){return this[Pt+t]=e,this},remove:function(t){var e=Pt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Pt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Pt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Pt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Pt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Pt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Pt)return!1;return!0},each:function(t){for(var e in this)e[0]===Pt&&t(this[e],e.slice(1),this)}};function Er(t,e){var n=new Ar;if(t instanceof Ar)t.each(function(a,l){n.set(l,a)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var o in t)n.set(o,t[o]);return n}function ta(){}var ge=Er.prototype;ta.prototype={constructor:ta,has:ge.has,add:function(t){return t+="",this[Pt+t]=t,this},remove:ge.remove,clear:ge.clear,values:ge.keys,size:ge.size,empty:ge.empty,each:ge.each};var ea={},ki={},Ai=34,rn=10,Ei=13;function sl(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function Hp(t,e){var n=sl(t);return function(r,i){return e(n(r),i,t)}}function $p(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function ol(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(c,u){var f,h,d=i(c,function(p,m){if(f)return f(p,m-1);h=p,f=u?Hp(p,u):sl(p)});return d.columns=h||[],d}function i(c,u){var f=[],h=c.length,d=0,p=0,m,g=h<=0,x=!1;c.charCodeAt(h-1)===rn&&--h,c.charCodeAt(h-1)===Ei&&--h;function A(){if(g)return ki;if(x)return x=!1,ea;var N,I=d,v;if(c.charCodeAt(I)===Ai){for(;d++<h&&c.charCodeAt(d)!==Ai||c.charCodeAt(++d)===Ai;);return(N=d)>=h?g=!0:(v=c.charCodeAt(d++))===rn?x=!0:v===Ei&&(x=!0,c.charCodeAt(d)===rn&&++d),c.slice(I+1,N-1).replace(/""/g,'"')}for(;d<h;){if((v=c.charCodeAt(N=d++))===rn)x=!0;else if(v===Ei)x=!0,c.charCodeAt(d)===rn&&++d;else if(v!==n)continue;return c.slice(I,N)}return g=!0,c.slice(I,h)}for(;(m=A())!==ki;){for(var k=[];m!==ea&&m!==ki;)k.push(m),m=A();u&&(k=u(k,p++))==null||f.push(k)}return f}function s(c,u){return u==null&&(u=$p(c)),[u.map(l).join(t)].concat(c.map(function(f){return u.map(function(h){return l(f[h])}).join(t)})).join(`
`)}function o(c){return c.map(a).join(`
`)}function a(c){return c.map(l).join(t)}function l(c){return c==null?"":e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatRows:o}}ol(",");ol("	");function zp(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return al(this.cover(e,n),e,n,t)}function al(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,m,g,x,A;if(!s)return t._root=o,t;for(;s.length;)if((m=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[x=g<<1|m]))return i[x]=o,t;if(d=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===d&&n===p)return o.next=s,i?i[x]=o:t._root=o,t;do i=i?i[x]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+c)/2))?a=f:c=f,(g=n>=(h=(l+u)/2))?l=h:u=h;while((x=g<<1|m)===(A=(p>=h)<<1|d>=f));return i[A]=s,i[x]=o,t}function qp(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));for(u<l&&(l=this._x0,u=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(l,c).cover(u,f),n=0;n<r;++n)al(this,o[n],a[n],t[n]);return this}function Gp(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else if(n>t||t>i||r>e||e>s){var o=i-n,a=this._root,l,c;switch(c=(e<(r+s)/2)<<1|t<(n+i)/2){case 0:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,s=r+o,t>i||e>s);break}case 1:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,s=r+o,n>t||e>s);break}case 2:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,r=s-o,t>i||r>e);break}case 3:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,r=s-o,n>t||r>e);break}}this._root&&this._root.length&&(this._root=a)}else return this;return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Wp(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Vp(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function St(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Yp(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,m;for(d&&h.push(new St(d,i,s,u,f)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(a=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var g=(o+l)/2,x=(a+c)/2;h.push(new St(d[3],g,x,l,c),new St(d[2],o,x,g,c),new St(d[1],g,a,l,x),new St(d[0],o,a,g,x)),(m=(e>=x)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=p)}else{var A=t-+this._x.call(null,d.data),k=e-+this._y.call(null,d.data),N=A*A+k*k;if(N<n){var I=Math.sqrt(n=N);i=t-I,s=e-I,u=t+I,f=e+I,r=d.data}}return r}function jp(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,m,g,x;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(m=f>=(d=(a+c)/2))?a=d:c=d,e=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,x=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Kp(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Jp(){return this._root}function Xp(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Zp(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new St(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new St(i,c,u,a,l)),(i=r[2])&&e.push(new St(i,s,u,c,l)),(i=r[1])&&e.push(new St(i,c,o,a,u)),(i=r[0])&&e.push(new St(i,s,o,c,u))}return this}function Qp(t){var e=[],n=[],r;for(this._root&&e.push(new St(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(a+c)/2;(s=i[0])&&e.push(new St(s,o,a,u,f)),(s=i[1])&&e.push(new St(s,u,a,l,f)),(s=i[2])&&e.push(new St(s,o,f,u,c)),(s=i[3])&&e.push(new St(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function tm(t){return arguments.length?(this._x=t,this):this._x}function em(t){return arguments.length?(this._y=t,this):this._y}function cl(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function na(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Mt=cl.prototype;Mt.copy=function(){var t=new cl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=na(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=na(r));return t};Mt.add=zp;Mt.addAll=qp;Mt.cover=Gp;Mt.data=Wp;Mt.extent=Vp;Mt.find=Yp;Mt.remove=jp;Mt.removeAll=Kp;Mt.root=Jp;Mt.size=Xp;Mt.visit=Zp;Mt.visitAfter=Qp;Mt.x=tm;Mt.y=em;function Sr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function qe(t){return t=Sr(Math.abs(t)),t?t[1]:NaN}function nm(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function rm(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}function im(t,e){t=t.toPrecision(e);t:for(var n=t.length,r=1,i=-1,s;r<n;++r)switch(t[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break t;default:i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var ll;function sm(t,e){var n=Sr(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ll=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Sr(t,Math.max(0,e+s-1))[0]}function ra(t,e){var n=Sr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ul={"":im,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ra(t*100,e)},r:ra,s:sm,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var om=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Tr(t){return new Ys(t)}Tr.prototype=Ys.prototype;function Ys(t){if(!(e=om.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",o=!!e[5],a=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";u==="n"?(l=!0,u="g"):ul[u]||(u=""),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=c,this.type=u}Ys.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};function ia(t){return t}var sa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function am(t){var e=t.grouping&&t.thousands?nm(t.grouping,t.thousands):ia,n=t.currency,r=t.decimal,i=t.numerals?rm(t.numerals):ia,s=t.percent||"%";function o(l){l=Tr(l);var c=l.fill,u=l.align,f=l.sign,h=l.symbol,d=l.zero,p=l.width,m=l.comma,g=l.precision,x=l.type,A=h==="$"?n[0]:h==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k=h==="$"?n[1]:/[%p]/.test(x)?s:"",N=ul[x],I=!x||/[defgprs%]/.test(x);g=g==null?x?6:12:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function v(_){var y=A,L=k,W,Y,Q;if(x==="c")L=N(_)+L,_="";else{_=+_;var K=_<0;if(_=N(Math.abs(_),g),K&&+_==0&&(K=!1),y=(K?f==="("?f:"-":f==="-"||f==="("?"":f)+y,L=(x==="s"?sa[8+ll/3]:"")+L+(K&&f==="("?")":""),I){for(W=-1,Y=_.length;++W<Y;)if(Q=_.charCodeAt(W),48>Q||Q>57){L=(Q===46?r+_.slice(W+1):_.slice(W))+L,_=_.slice(0,W);break}}}m&&!d&&(_=e(_,1/0));var H=y.length+_.length+L.length,V=H<p?new Array(p-H+1).join(c):"";switch(m&&d&&(_=e(V+_,V.length?p-L.length:1/0),V=""),u){case"<":_=y+_+L+V;break;case"=":_=y+V+_+L;break;case"^":_=V.slice(0,H=V.length>>1)+y+_+L+V.slice(H);break;default:_=V+y+_+L;break}return i(_)}return v.toString=function(){return l+""},v}function a(l,c){var u=o((l=Tr(l),l.type="f",l)),f=Math.max(-8,Math.min(8,Math.floor(qe(c)/3)))*3,h=Math.pow(10,-f),d=sa[8+f/3];return function(p){return u(h*p)+d}}return{format:o,formatPrefix:a}}var Vn,fl,hl;cm({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function cm(t){return Vn=am(t),fl=Vn.format,hl=Vn.formatPrefix,Vn}function lm(t){return Math.max(0,-qe(Math.abs(t)))}function um(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qe(e)/3)))*3-qe(Math.abs(t)))}function fm(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qe(e)-qe(t))+1}function pe(){return new Cr}function Cr(){this.reset()}Cr.prototype={constructor:Cr,reset:function(){this.s=this.t=0},add:function(t){oa(Yn,t,this.t),oa(this,Yn.s,this.s),this.s?this.t+=Yn.t:this.s=Yn.t},valueOf:function(){return this.s}};var Yn=new Cr;function oa(t,e,n){var r=t.s=e+n,i=r-e,s=r-i;t.t=e-s+(n-i)}var as=Math.PI,aa=as*2;pe();pe();pe();function ca(t,e){return[t>as?t-aa:t<-as?t+aa:t,e]}ca.invert=ca;pe();pe();pe();pe();pe();function la(){}la.prototype={constructor:la,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ua(t,e){return[t,e]}ua.invert=ua;function hm(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function dm(){return this.eachAfter(hm)}function pm(t){var e=this,n,r=[e],i,s,o;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length);return this}function mm(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function gm(t){for(var e=this,n=[e],r=[],i,s,o;e=n.pop();)if(r.push(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)n.push(i[s]);for(;e=r.pop();)t(e);return this}function ym(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function _m(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function vm(t){for(var e=this,n=bm(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function bm(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function wm(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function xm(){var t=[];return this.each(function(e){t.push(e)}),t}function km(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Am(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function dl(t,e){var n=new On(t),r=+t.value&&(n.value=t.value),i,s=[n],o,a,l,c;for(e==null&&(e=Sm);i=s.pop();)if(r&&(i.value=+i.data.value),(a=e(i.data))&&(c=a.length))for(i.children=new Array(c),l=c-1;l>=0;--l)s.push(o=i.children[l]=new On(a[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Cm)}function Em(){return dl(this).eachBefore(Tm)}function Sm(t){return t.children}function Tm(t){t.data=t.data.data}function Cm(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function On(t){this.data=t,this.depth=this.height=0,this.parent=null}On.prototype=dl.prototype={constructor:On,count:dm,each:pm,eachAfter:gm,eachBefore:mm,sum:ym,sort:_m,path:vm,ancestors:wm,descendants:xm,leaves:km,links:Am,copy:Em};function pl(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}Object.create(On.prototype);function ml(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(i-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var gl=(1+Math.sqrt(5))/2;function yl(t,e,n,r,i,s){for(var o=[],a=e.children,l,c,u=0,f=0,h=a.length,d,p,m=e.value,g,x,A,k,N,I,v;u<h;){d=i-n,p=s-r;do g=a[f++].value;while(!g&&f<h);for(x=A=g,I=Math.max(p/d,d/p)/(m*t),v=g*g*I,N=Math.max(A/v,v/x);f<h;++f){if(g+=c=a[f].value,c<x&&(x=c),c>A&&(A=c),v=g*g*I,k=Math.max(A/v,v/x),k>N){g-=c;break}N=k}o.push(l={value:g,dice:d<p,children:a.slice(u,f)}),l.dice?pl(l,n,r,i,m?r+=p*g/m:s):ml(l,n,r,m?n+=d*g/m:i,s),m-=g,u=f}return o}(function t(e){function n(r,i,s,o,a){yl(e,r,i,s,o,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(gl);(function t(e){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,p=l.length,m=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?pl(c,i,s,o,s+=(a-s)*c.value/m):ml(c,i,s,i+=(o-i)*c.value/m,a),m-=c.value}else r._squarify=l=yl(e,r,i,s,o,a),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(gl);var Mm=[].slice,Om={};function fa(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}fa.prototype={constructor:fa,defer:function(t){if(typeof t!="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var e=Mm.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),_l(this),this},abort:function(){return this._error==null&&js(this,new Error("abort")),this},await:function(t){if(typeof t!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},Mr(this),this},awaitAll:function(t){if(typeof t!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,Mr(this),this}};function _l(t){if(!t._start)try{Nm(t)}catch(e){if(t._tasks[t._ended+t._active-1])js(t,e);else if(!t._data)throw e}}function Nm(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Rm(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Om)}}function Rm(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,t._error==null&&(n!=null?js(t,n):(t._data[e]=r,t._waiting?_l(t):Mr(t))))}}function js(t,e){var n=t._tasks.length,r;for(t._error=e,t._data=void 0,t._waiting=NaN;--n>=0;)if((r=t._tasks[n])&&(t._tasks[n]=null,r.abort))try{r.abort()}catch{}t._active=NaN,Mr(t)}function Mr(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function je(){return Math.random()}(function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n})(je);const Lm=function t(e){function n(r,i){var s,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var a;if(s!=null)a=s,s=null;else do s=e()*2-1,a=e()*2-1,o=s*s+a*a;while(!o||o>1);return r+i*a*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(je);(function t(e){function n(){var r=Lm.source(e).apply(this,arguments);return function(){return Math.exp(r())}}return n.source=t,n})(je);const Pm=function t(e){function n(r){return function(){for(var i=0,s=0;s<r;++s)i+=e();return i}}return n.source=t,n}(je);(function t(e){function n(r){var i=Pm.source(e)(r);return function(){return i()/r}}return n.source=t,n})(je);(function t(e){function n(r){return function(){return-Math.log(1-e())/r}}return n.source=t,n})(je);var vl=Array.prototype,Im=vl.map,Or=vl.slice,ha={name:"implicit"};function bl(t){var e=Er(),n=[],r=ha;t=t==null?[]:Or.call(t);function i(s){var o=s+"",a=e.get(o);if(!a){if(r!==ha)return r;e.set(o,a=n.push(s))}return t[(a-1)%t.length]}return i.domain=function(s){if(!arguments.length)return n.slice();n=[],e=Er();for(var o=-1,a=s.length,l,c;++o<a;)e.has(c=(l=s[o])+"")||e.set(c,n.push(l));return i},i.range=function(s){return arguments.length?(t=Or.call(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return bl().domain(n).range(t).unknown(r)},i}function ei(){var t=bl().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,o=!1,a=0,l=0,c=.5;delete t.unknown;function u(){var f=e().length,h=r[1]<r[0],d=r[h-0],p=r[1-h];i=(p-d)/Math.max(1,f-a+l*2),o&&(i=Math.floor(i)),d+=(p-d-i*(f-a))*c,s=i*(1-a),o&&(d=Math.round(d),s=Math.round(s));var m=Vt(f).map(function(g){return d+i*g});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(o=!!f,u()):o},t.padding=function(f){return arguments.length?(a=l=Math.max(0,Math.min(1,f)),u()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.copy=function(){return ei().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function wl(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wl(e())},t}function Dm(){return wl(ei().paddingInner(1))}function Bm(t){return function(){return t}}function Fm(t){return+t}var da=[0,1];function xl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Bm(e)}function Um(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=e?0:i>=n?1:r(i)}}}function Hm(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=0?e:i>=1?n:r(i)}}}function $m(t,e,n,r){var i=t[0],s=t[1],o=e[0],a=e[1];return s<i?(i=n(s,i),o=r(a,o)):(i=n(i,s),o=r(o,a)),function(l){return o(i(l))}}function zm(t,e,n,r){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=n(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=Tf(t,l,1,i)-1;return o[c](s[c](l))}}function qm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Gm(t,e){var n=da,r=da,i=Us,s=!1,o,a,l;function c(){return o=Math.min(n.length,r.length)>2?zm:$m,a=l=null,u}function u(f){return(a||(a=o(n,r,s?Um(t):t,i)))(+f)}return u.invert=function(f){return(l||(l=o(r,n,xl,s?Hm(e):e)))(+f)},u.domain=function(f){return arguments.length?(n=Im.call(f,Fm),c()):n.slice()},u.range=function(f){return arguments.length?(r=Or.call(f),c()):r.slice()},u.rangeRound=function(f){return r=Or.call(f),i=Cd,c()},u.clamp=function(f){return arguments.length?(s=!!f,c()):s},u.interpolate=function(f){return arguments.length?(i=f,c()):i},c()}function Wm(t,e,n){var r=t[0],i=t[t.length-1],s=Mf(r,i,e??10),o;switch(n=Tr(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(i));return n.precision==null&&!isNaN(o=um(s,a))&&(n.precision=o),hl(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=fm(s,Math.max(Math.abs(r),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=lm(s))&&(n.precision=o-(n.type==="%")*2);break}}return fl(n)}function Vm(t){var e=t.domain;return t.ticks=function(n){var r=e();return Cf(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){return Wm(e(),n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l;return a<o&&(l=o,o=a,a=l,l=i,i=s,s=l),l=rr(o,a,n),l>0?(o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l,l=rr(o,a,n)):l<0&&(o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l,l=rr(o,a,n)),l>0?(r[i]=Math.floor(o/l)*l,r[s]=Math.ceil(a/l)*l,e(r)):l<0&&(r[i]=Math.ceil(o*l)/l,r[s]=Math.floor(a*l)/l,e(r)),t},t}function ie(){var t=Gm(xl,Ht);return t.copy=function(){return qm(t,ie())},Vm(t)}var Si=new Date,Ti=new Date;function xt(t,e,n,r){function i(s){return t(s=new Date(+s)),s}return i.floor=i,i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return xt(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return Si.setTime(+s),Ti.setTime(+o),t(Si),t(Ti),Math.floor(n(Si,Ti))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var cs=xt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});cs.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?xt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):cs};cs.range;var jn=1e3,ne=6e4,ue=36e5,kl=864e5,Al=6048e5,Ym=xt(function(t){t.setTime(Math.floor(t/jn)*jn)},function(t,e){t.setTime(+t+e*jn)},function(t,e){return(e-t)/jn},function(t){return t.getUTCSeconds()});Ym.range;var jm=xt(function(t){t.setTime(Math.floor(t/ne)*ne)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getMinutes()});jm.range;var Km=xt(function(t){var e=t.getTimezoneOffset()*ne%ue;e<0&&(e+=ue),t.setTime(Math.floor((+t-e)/ue)*ue+e)},function(t,e){t.setTime(+t+e*ue)},function(t,e){return(e-t)/ue},function(t){return t.getHours()});Km.range;var Ks=xt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ne)/kl},function(t){return t.getDate()-1});Ks.range;function Se(t){return xt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ne)/Al})}var El=Se(0),Nr=Se(1),Jm=Se(2),Xm=Se(3),or=Se(4),Zm=Se(5),Qm=Se(6);El.range;Nr.range;Jm.range;Xm.range;or.range;Zm.range;Qm.range;var t0=xt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});t0.range;var xe=xt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});xe.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:xt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};xe.range;var e0=xt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getUTCMinutes()});e0.range;var n0=xt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ue)},function(t,e){return(e-t)/ue},function(t){return t.getUTCHours()});n0.range;var Js=xt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/kl},function(t){return t.getUTCDate()-1});Js.range;function Te(t){return xt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Al})}var Sl=Te(0),Rr=Te(1),r0=Te(2),i0=Te(3),ar=Te(4),s0=Te(5),o0=Te(6);Sl.range;Rr.range;r0.range;i0.range;ar.range;s0.range;o0.range;var a0=xt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});a0.range;var ke=xt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});ke.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:xt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};ke.range;function c0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function l0(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=on(i),u=an(i),f=on(s),h=an(s),d=on(o),p=an(o),m=on(a),g=an(a),x=on(l),A=an(l),k={a:Z,A:X,b:U,B:S,c:null,d:ya,e:ya,f:L0,H:O0,I:N0,j:R0,L:Tl,m:P0,M:I0,p:C,Q:ba,s:wa,S:D0,u:B0,U:F0,V:U0,w:H0,W:$0,x:null,X:null,y:z0,Y:q0,Z:G0,"%":va},N={a:M,A:T,b:O,B:q,c:null,d:_a,e:_a,f:j0,H:W0,I:V0,j:Y0,L:Cl,m:K0,M:J0,p:j,Q:ba,s:wa,S:X0,u:Z0,U:Q0,V:tg,w:eg,W:ng,x:null,X:null,y:rg,Y:ig,Z:sg,"%":va},I={a:W,A:Y,b:Q,B:K,c:H,d:ma,e:ma,f:S0,H:ga,I:ga,j:x0,L:E0,m:w0,M:k0,p:L,Q:C0,s:M0,S:A0,u:p0,U:m0,V:g0,w:d0,W:y0,x:V,X:z,y:v0,Y:_0,Z:b0,"%":T0};k.x=v(n,k),k.X=v(r,k),k.c=v(e,k),N.x=v(n,N),N.X=v(r,N),N.c=v(e,N);function v(E,F){return function($){var B=[],ct=-1,it=0,D=E.length,G,lt,w;for($ instanceof Date||($=new Date(+$));++ct<D;)E.charCodeAt(ct)===37&&(B.push(E.slice(it,ct)),(lt=pa[G=E.charAt(++ct)])!=null?G=E.charAt(++ct):lt=G==="e"?" ":"0",(w=F[G])&&(G=w($,lt)),B.push(G),it=ct+1);return B.push(E.slice(it,ct)),B.join("")}}function _(E,F){return function($){var B=sn(1900),ct=y(B,E,$+="",0),it,D;if(ct!=$.length)return null;if("Q"in B)return new Date(B.Q);if("p"in B&&(B.H=B.H%12+B.p*12),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(it=Kn(sn(B.y)),D=it.getUTCDay(),it=D>4||D===0?Rr.ceil(it):Rr(it),it=Js.offset(it,(B.V-1)*7),B.y=it.getUTCFullYear(),B.m=it.getUTCMonth(),B.d=it.getUTCDate()+(B.w+6)%7):(it=F(sn(B.y)),D=it.getDay(),it=D>4||D===0?Nr.ceil(it):Nr(it),it=Ks.offset(it,(B.V-1)*7),B.y=it.getFullYear(),B.m=it.getMonth(),B.d=it.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),D="Z"in B?Kn(sn(B.y)).getUTCDay():F(sn(B.y)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(D+5)%7:B.w+B.U*7-(D+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Kn(B)):F(B)}}function y(E,F,$,B){for(var ct=0,it=F.length,D=$.length,G,lt;ct<it;){if(B>=D)return-1;if(G=F.charCodeAt(ct++),G===37){if(G=F.charAt(ct++),lt=I[G in pa?F.charAt(ct++):G],!lt||(B=lt(E,$,B))<0)return-1}else if(G!=$.charCodeAt(B++))return-1}return B}function L(E,F,$){var B=c.exec(F.slice($));return B?(E.p=u[B[0].toLowerCase()],$+B[0].length):-1}function W(E,F,$){var B=d.exec(F.slice($));return B?(E.w=p[B[0].toLowerCase()],$+B[0].length):-1}function Y(E,F,$){var B=f.exec(F.slice($));return B?(E.w=h[B[0].toLowerCase()],$+B[0].length):-1}function Q(E,F,$){var B=x.exec(F.slice($));return B?(E.m=A[B[0].toLowerCase()],$+B[0].length):-1}function K(E,F,$){var B=m.exec(F.slice($));return B?(E.m=g[B[0].toLowerCase()],$+B[0].length):-1}function H(E,F,$){return y(E,e,F,$)}function V(E,F,$){return y(E,n,F,$)}function z(E,F,$){return y(E,r,F,$)}function Z(E){return o[E.getDay()]}function X(E){return s[E.getDay()]}function U(E){return l[E.getMonth()]}function S(E){return a[E.getMonth()]}function C(E){return i[+(E.getHours()>=12)]}function M(E){return o[E.getUTCDay()]}function T(E){return s[E.getUTCDay()]}function O(E){return l[E.getUTCMonth()]}function q(E){return a[E.getUTCMonth()]}function j(E){return i[+(E.getUTCHours()>=12)]}return{format:function(E){var F=v(E+="",k);return F.toString=function(){return E},F},parse:function(E){var F=_(E+="",c0);return F.toString=function(){return E},F},utcFormat:function(E){var F=v(E+="",N);return F.toString=function(){return E},F},utcParse:function(E){var F=_(E,Kn);return F.toString=function(){return E},F}}}var pa={"-":"",_:" ",0:"0"},At=/^\s*\d+/,u0=/^%/,f0=/[\\^$*+?|[\]().{}]/g;function ut(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function h0(t){return t.replace(f0,"\\$&")}function on(t){return new RegExp("^(?:"+t.map(h0).join("|")+")","i")}function an(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function d0(t,e,n){var r=At.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function p0(t,e,n){var r=At.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function m0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function g0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function y0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _0(t,e,n){var r=At.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function v0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function b0(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function w0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ma(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function x0(t,e,n){var r=At.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ga(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function k0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function A0(t,e,n){var r=At.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function E0(t,e,n){var r=At.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function S0(t,e,n){var r=At.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function T0(t,e,n){var r=u0.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function C0(t,e,n){var r=At.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function M0(t,e,n){var r=At.exec(e.slice(n));return r?(t.Q=+r[0]*1e3,n+r[0].length):-1}function ya(t,e){return ut(t.getDate(),e,2)}function O0(t,e){return ut(t.getHours(),e,2)}function N0(t,e){return ut(t.getHours()%12||12,e,2)}function R0(t,e){return ut(1+Ks.count(xe(t),t),e,3)}function Tl(t,e){return ut(t.getMilliseconds(),e,3)}function L0(t,e){return Tl(t,e)+"000"}function P0(t,e){return ut(t.getMonth()+1,e,2)}function I0(t,e){return ut(t.getMinutes(),e,2)}function D0(t,e){return ut(t.getSeconds(),e,2)}function B0(t){var e=t.getDay();return e===0?7:e}function F0(t,e){return ut(El.count(xe(t),t),e,2)}function U0(t,e){var n=t.getDay();return t=n>=4||n===0?or(t):or.ceil(t),ut(or.count(xe(t),t)+(xe(t).getDay()===4),e,2)}function H0(t){return t.getDay()}function $0(t,e){return ut(Nr.count(xe(t),t),e,2)}function z0(t,e){return ut(t.getFullYear()%100,e,2)}function q0(t,e){return ut(t.getFullYear()%1e4,e,4)}function G0(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ut(e/60|0,"0",2)+ut(e%60,"0",2)}function _a(t,e){return ut(t.getUTCDate(),e,2)}function W0(t,e){return ut(t.getUTCHours(),e,2)}function V0(t,e){return ut(t.getUTCHours()%12||12,e,2)}function Y0(t,e){return ut(1+Js.count(ke(t),t),e,3)}function Cl(t,e){return ut(t.getUTCMilliseconds(),e,3)}function j0(t,e){return Cl(t,e)+"000"}function K0(t,e){return ut(t.getUTCMonth()+1,e,2)}function J0(t,e){return ut(t.getUTCMinutes(),e,2)}function X0(t,e){return ut(t.getUTCSeconds(),e,2)}function Z0(t){var e=t.getUTCDay();return e===0?7:e}function Q0(t,e){return ut(Sl.count(ke(t),t),e,2)}function tg(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ar(t):ar.ceil(t),ut(ar.count(ke(t),t)+(ke(t).getUTCDay()===4),e,2)}function eg(t){return t.getUTCDay()}function ng(t,e){return ut(Rr.count(ke(t),t),e,2)}function rg(t,e){return ut(t.getUTCFullYear()%100,e,2)}function ig(t,e){return ut(t.getUTCFullYear()%1e4,e,4)}function sg(){return"+0000"}function va(){return"%"}function ba(t){return+t}function wa(t){return Math.floor(+t/1e3)}var Oe,Ml,Ol;og({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function og(t){return Oe=l0(t),Oe.format,Oe.parse,Ml=Oe.utcFormat,Ol=Oe.utcParse,Oe}var Nl="%Y-%m-%dT%H:%M:%S.%LZ";function ag(t){return t.toISOString()}Date.prototype.toISOString||Ml(Nl);function cg(t){var e=new Date(t);return isNaN(e)?null:e}+new Date("2000-01-01T00:00:00.000Z")||Ol(Nl);function me(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}me("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");me("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");me("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");me("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");Hs(Xt(300,.5,0),Xt(-240,.5,1));Hs(Xt(-100,.75,.35),Xt(80,1.5,.8));Hs(Xt(260,.75,.35),Xt(80,1.5,.8));Xt();function ni(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}ni(me("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));ni(me("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));ni(me("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));ni(me("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Jn(t){return function(){return t}}var xa=1e-12;function Rl(t){this._context=t}Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function lg(t){return new Rl(t)}function ug(t){return t[0]}function fg(t){return t[1]}function Ll(){var t=ug,e=fg,n=Jn(!0),r=null,i=lg,s=null;function o(a){var l,c=a.length,u,f=!1,h;for(r==null&&(s=i(h=il())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,l,a),+e(u,l,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Jn(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Jn(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Jn(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function Lr(){}function ka(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Xs(t){this._context=t}Xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ka(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Pl(t,e){this._basis=new Xs(t),this._beta=e}Pl.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new Xs(r):new Pl(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Pr(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Zs(t,e){this._context=t,this._k=(1-e)/6}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Pr(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Pr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Zs(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Qs(t,e){this._context=t,this._k=(1-e)/6}Qs.prototype={areaStart:Lr,areaEnd:Lr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Qs(r,e)}return n.tension=function(r){return t(+r)},n})(0);function to(t,e){this._context=t,this._k=(1-e)/6}to.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pr(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new to(r,e)}return n.tension=function(r){return t(+r)},n})(0);function eo(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>xa){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>xa){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function Il(t,e){this._context=t,this._alpha=e}Il.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:eo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Il(r,e):new Zs(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Dl(t,e){this._context=t,this._alpha=e}Dl.prototype={areaStart:Lr,areaEnd:Lr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:eo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Dl(r,e):new Qs(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Bl(t,e){this._context=t,this._alpha=e}Bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Bl(r,e):new to(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Aa(t){return t<0?-1:1}function Ea(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Aa(s)+Aa(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Sa(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ci(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function ls(t){this._context=t}ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ci(this,this._t0,Sa(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ci(this,Sa(this,n=Ea(this,t,e)),n);break;default:Ci(this,this._t0,n=Ea(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(ls.prototype).point=function(t,e){ls.prototype.point.call(this,e,t)};function Ir(){this._=null}function ri(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Ir.prototype={constructor:Ir,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ta(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(cn(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ln(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ln(this,n),t=n,n=t.U),n.C=!1,r.C=!0,cn(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,o;if(r?i?s=Ta(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(o=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(o=t.C,t=s),t&&(t.U=e),!o){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,cn(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,ln(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,cn(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,ln(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,cn(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,ln(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function cn(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ln(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ta(t){for(;t.L;)t=t.L;return t}function gn(t,e,n,r){var i=[null,null],s=Et.push(i)-1;return i.left=t,i.right=e,n&&Dr(i,t,e,n),r&&Dr(i,e,t,r),Rt[t.index].halfedges.push(s),Rt[e.index].halfedges.push(s),i}function un(t,e,n){var r=[e,n];return r.left=t,r}function Dr(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function hg(t,e,n,r,i){var s=t[0],o=t[1],a=s[0],l=s[1],c=o[0],u=o[1],f=0,h=1,d=c-a,p=u-l,m;if(m=e-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=r-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=n-l,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>f&&(f=m)}if(m=i-l,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<h&&(h=m)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[a+f*d,l+f*p]),h<1&&(t[1]=[a+h*d,l+h*p])),!0}}}}}function dg(t,e,n,r,i){var s=t[1];if(s)return!0;var o=t[0],a=t.left,l=t.right,c=a[0],u=a[1],f=l[0],h=l[1],d=(c+f)/2,p=(u+h)/2,m,g;if(h===u){if(d<e||d>=r)return;if(c>f){if(!o)o=[d,n];else if(o[1]>=i)return;s=[d,i]}else{if(!o)o=[d,i];else if(o[1]<n)return;s=[d,n]}}else if(m=(c-f)/(h-u),g=p-m*d,m<-1||m>1)if(c>f){if(!o)o=[(n-g)/m,n];else if(o[1]>=i)return;s=[(i-g)/m,i]}else{if(!o)o=[(i-g)/m,i];else if(o[1]<n)return;s=[(n-g)/m,n]}else if(u<h){if(!o)o=[e,m*e+g];else if(o[0]>=r)return;s=[r,m*r+g]}else{if(!o)o=[r,m*r+g];else if(o[0]<e)return;s=[e,m*e+g]}return t[0]=o,t[1]=s,!0}function pg(t,e,n,r){for(var i=Et.length,s;i--;)(!dg(s=Et[i],t,e,n,r)||!hg(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>pt||Math.abs(s[0][1]-s[1][1])>pt))&&delete Et[i]}function mg(t){return Rt[t.index]={site:t,halfedges:[]}}function gg(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Fl(t,e){return e[+(e.left!==t.site)]}function yg(t,e){return e[+(e.left===t.site)]}function _g(){for(var t=0,e=Rt.length,n,r,i,s;t<e;++t)if((n=Rt[t])&&(s=(r=n.halfedges).length)){var o=new Array(s),a=new Array(s);for(i=0;i<s;++i)o[i]=i,a[i]=gg(n,Et[r[i]]);for(o.sort(function(l,c){return a[c]-a[l]}),i=0;i<s;++i)a[i]=r[o[i]];for(i=0;i<s;++i)r[i]=a[i]}}function vg(t,e,n,r){var i=Rt.length,s,o,a,l,c,u,f,h,d,p,m,g,x=!0;for(s=0;s<i;++s)if(o=Rt[s]){for(a=o.site,c=o.halfedges,l=c.length;l--;)Et[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)p=yg(o,Et[c[l]]),m=p[0],g=p[1],f=Fl(o,Et[c[++l%u]]),h=f[0],d=f[1],(Math.abs(m-h)>pt||Math.abs(g-d)>pt)&&(c.splice(l,0,Et.push(un(a,p,Math.abs(m-t)<pt&&r-g>pt?[t,Math.abs(h-t)<pt?d:r]:Math.abs(g-r)<pt&&n-m>pt?[Math.abs(d-r)<pt?h:n,r]:Math.abs(m-n)<pt&&g-e>pt?[n,Math.abs(h-n)<pt?d:e]:Math.abs(g-e)<pt&&m-t>pt?[Math.abs(d-e)<pt?h:t,e]:null))-1),++u);u&&(x=!1)}if(x){var A,k,N,I=1/0;for(s=0,x=null;s<i;++s)(o=Rt[s])&&(a=o.site,A=a[0]-t,k=a[1]-e,N=A*A+k*k,N<I&&(I=N,x=o));if(x){var v=[t,e],_=[t,r],y=[n,r],L=[n,e];x.halfedges.push(Et.push(un(a=x.site,v,_))-1,Et.push(un(a,_,y))-1,Et.push(un(a,y,L))-1,Et.push(un(a,L,v))-1)}}for(s=0;s<i;++s)(o=Rt[s])&&(o.halfedges.length||delete Rt[s])}var Ul=[],no;function bg(){ri(this),this.x=this.y=this.arc=this.site=this.cy=null}function Re(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var o=i[0],a=i[1],l=r[0]-o,c=r[1]-a,u=s[0]-o,f=s[1]-a,h=2*(l*f-c*u);if(!(h>=-Eg)){var d=l*l+c*c,p=u*u+f*f,m=(f*d-c*p)/h,g=(l*p-u*d)/h,x=Ul.pop()||new bg;x.arc=t,x.site=i,x.x=m+o,x.y=(x.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=x;for(var A=null,k=Nn._;k;)if(x.y<k.y||x.y===k.y&&x.x<=k.x)if(k.L)k=k.L;else{A=k.P;break}else if(k.R)k=k.R;else{A=k;break}Nn.insert(A,x),A||(no=x)}}}}function Be(t){var e=t.circle;e&&(e.P||(no=e.N),Nn.remove(e),Ul.push(e),ri(e),t.circle=null)}var Hl=[];function wg(){ri(this),this.edge=this.site=this.circle=null}function Ca(t){var e=Hl.pop()||new wg;return e.site=t,e}function Mi(t){Be(t),Fe.remove(t),Hl.push(t),ri(t)}function xg(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,o=t.N,a=[t];Mi(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<pt&&Math.abs(r-l.circle.cy)<pt;)s=l.P,a.unshift(l),Mi(l),l=s;a.unshift(l),Be(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<pt&&Math.abs(r-c.circle.cy)<pt;)o=c.N,a.push(c),Mi(c),c=o;a.push(c),Be(c);var u=a.length,f;for(f=1;f<u;++f)c=a[f],l=a[f-1],Dr(c.edge,l.site,c.site,i);l=a[0],c=a[u-1],c.edge=gn(l.site,c.site,null,i),Re(l),Re(c)}function kg(t){for(var e=t[0],n=t[1],r,i,s,o,a=Fe._;a;)if(s=$l(a,n)-e,s>pt)a=a.L;else if(o=e-Ag(a,n),o>pt){if(!a.R){r=a;break}a=a.R}else{s>-pt?(r=a.P,i=a):o>-pt?(r=a,i=a.N):r=i=a;break}mg(t);var l=Ca(t);if(Fe.insert(r,l),!(!r&&!i)){if(r===i){Be(r),i=Ca(r.site),Fe.insert(l,i),l.edge=i.edge=gn(r.site,l.site),Re(r),Re(i);return}if(!i){l.edge=gn(r.site,l.site);return}Be(r),Be(i);var c=r.site,u=c[0],f=c[1],h=t[0]-u,d=t[1]-f,p=i.site,m=p[0]-u,g=p[1]-f,x=2*(h*g-d*m),A=h*h+d*d,k=m*m+g*g,N=[(g*A-d*k)/x+u,(h*k-m*A)/x+f];Dr(i.edge,c,p,N),l.edge=gn(c,t,null,N),i.edge=gn(t,p,null,N),Re(r),Re(i)}}function $l(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var o=t.P;if(!o)return-1/0;n=o.site;var a=n[0],l=n[1],c=l-e;if(!c)return a;var u=a-r,f=1/s-1/c,h=u/c;return f?(-h+Math.sqrt(h*h-2*f*(u*u/(-2*c)-l+c/2+i-s/2)))/f+r:(r+a)/2}function Ag(t,e){var n=t.N;if(n)return $l(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var pt=1e-6,Eg=1e-12,Fe,Rt,Nn,Et;function Sg(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Tg(t,e){return e[1]-t[1]||e[0]-t[0]}function Ma(t,e){var n=t.sort(Tg).pop(),r,i,s;for(Et=[],Rt=new Array(t.length),Fe=new Ir,Nn=new Ir;;)if(s=no,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(kg(n),r=n[0],i=n[1]),n=t.pop();else if(s)xg(s.arc);else break;if(_g(),e){var o=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];pg(o,a,l,c),vg(o,a,l,c)}this.edges=Et,this.cells=Rt,Fe=Nn=Et=Rt=null}Ma.prototype={constructor:Ma,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return Fl(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(s=n.halfedges).length)for(var i=n.site,s,o=-1,a,l,c=e[s[a-1]],u=c.left===i?c.right:c.left;++o<a;)l=u,c=e[s[o]],u=c.left===i?c.right:c.left,l&&u&&r<l.index&&r<u.index&&Sg(i,l,u)<0&&t.push([i.data,l.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,o=r.cells.length,a;!(a=r.cells[s]);)if(++s>=o)return null;var l=t-a.site[0],c=e-a.site[1],u=l*l+c*c;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(f){var h=r.edges[f],d=h.left;if(!((d===a.site||!d)&&!(d=h.right))){var p=t-d[0],m=e-d[1],g=p*p+m*m;g<u&&(u=g,s=d.index)}});while(s!==null);return r._found=i,n==null||u<=n*n?a.site:null}};function yn(t,e,n){this.k=t,this.x=e,this.y=n}yn.prototype={constructor:yn,scale:function(t){return t===1?this:new yn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};yn.prototype;function ro(t){let e;const n=window.innerWidth,r=document.getElementById("stroke_slider"),i=document.getElementById("slideright"),s=document.getElementById("slideleft"),o=()=>{r&&(r.style.display="none")};t?(r&&(r.style.display="flex",r.style.left=t=="left"?n*-1+"px":n*1.5+"px"),s&&(s.style.display=t=="right"?"flex":"none"),i&&(i.style.display=t=="left"?"flex":"none"),e=t=="left"?Vt(0,1.1,.1):Vt(0,1.1,.1).reverse(),Ki(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})):(e=((s==null?void 0:s.style.display)=="flex"?"right":"left")=="left"?Vt(-1.5,1.1,.1):Vt(1,2.6,.1).reverse(),setTimeout(()=>o(),700)),Ki(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})}let cr=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(cr=!0,!0)});window.addEventListener("test",null,t)}catch(t){console.log(t)}const wt={orientation:void 0,time_threshold:200,diff_threshold:130,press_hold_threshold:400,prevent_touch:!0,prevent_double_tap:!1,addSwipeTarget(t){t.addEventListener("touchstart",Xn,cr?{passive:!0}:!1),t.addEventListener("touchmove",La,cr?{passive:!0}:!1),t.addEventListener("touchend",Pa,!1),t.addEventListener("mousedown",Xn,!1),t.addEventListener("mousemove",La,!1),t.addEventListener("mouseup",Pa,!1)},addPressAndHold(t){t.addEventListener("touchstart",Xn,cr?{passive:!0}:!1),t.addEventListener("mousedown",Xn,!1),t.addEventListener("touchend",Ia,!1),t.addEventListener("mouseup",Ia,!1)},disableDrag(){document.addEventListener("touchmove",Oa,!1),document.addEventListener("touchend",Na,!1),document.addEventListener("mousemove",Oa,!1),document.addEventListener("mouseup",Na,!1)}};function Oa(t){wt.prevent_touch&&(window.innerHeight>450||wt.orientation=="landscape")&&t.preventDefault()}function Na(t){const e=new Date().getTime();wt.prevent_double_tap&&e-Ra<500&&t.preventDefault(),Ra=e}let Ge=null,We=null,wn=null,xn=null,Rn=null,Le=null,Ra=new Date().getTime();function La(t){if(!Ge||!We)return;let e,n;t.type=="mousemove"?(e=t.clientX,n=t.clientY):(e=t.touches[0].clientX,n=t.touches[0].clientY),wn=Ge-e,xn=We-n}function Xn(t){Le=t.target,Rn=Date.now(),t.type=="mousedown"?(Ge=t.clientX,We=t.clientY):(Ge=t.touches[0].clientX,We=t.touches[0].clientY),wn=0,xn=0}function _n(t,e){if(t.classList.contains(e))return t;for(;t=t.parentNode&&t.classList&&!t.classList.contains(e););return t}function Pa(){const t=Date.now()-Rn;(Math.abs(wn)>wt.diff_threshold||Math.abs(xn)>wt.diff_threshold)&&t<wt.time_threshold&&(Math.abs(wn)>Math.abs(xn)?wn>0?typeof wt.swipeLeft=="function"&&wt.swipeLeft(_n(Le,"swipe")):typeof wt.swipeRight=="function"&&wt.swipeRight(_n(Le,"swipe")):xn>0?typeof wt.swipeUp=="function"&&wt.swipeUp(_n(Le,"swipe")):typeof wt.swipeDown=="function"&&wt.swipeDown(_n(Le,"swipe"))),Ge=null,We=null,Rn=null}function Ia(){Date.now()-Rn>wt.press_hold_threshold&&typeof wt.pressAndHold=="function"&&wt.pressAndHold(_n(Le,"pressAndHold")),Ge=null,We=null,Rn=null}const It=wt;function Cg(t,e){const n=ft("#"+t),r=window.innerWidth*.85,i=r/2,s=50,o=["blue","red"];n.selectAll("svg").remove();const a=n.append("svg").attr("width",r).attr("height",i),l={top:20,right:20,bottom:30,left:40},c=+a.attr("width")-l.left-l.right,u=+a.attr("height")-l.top-l.bottom,f=ie().range([0,c]),h=ie().range([u,0]),d=Ll().x(function(k){return f(k[0])}).y(function(k){return h(k[1])}),p=a.append("g").attr("transform","translate("+l.left+","+l.top+")"),m=Math.max(...e.map(k=>k.length));f.domain([0,Math.max(...e.map(k=>Math.max(...k)),s)]),h.domain([0,m]),p.append("g").attr("transform","translate(0,"+u+")").call(Df(f).ticks(0)),p.append("g").style("font","24px times").call(Bf(h).ticks(Math.min(m,4)).tickFormat(k=>k)),x(e),A(e);function g(k){return k=k.map((N,I)=>[N,I+1]),k.unshift([0,0]),k}function x(k){k.forEach((N,I)=>{p.append("path").datum(g(N)).attr("fill","none").attr("stroke",o[I]).attr("stroke-width","5px").attr("shape-rendering","crispEdges").attr("d",d)})}function A(k){k.forEach((N,I)=>{const v=".datapoint"+I;N.length<10&&p.selectAll(v).data(g(N)).enter().append("circle").attr("class",v).attr("fill","#FFFFFF").attr("stroke",o[I]).attr("stroke-width","2px").attr("r",3.5).attr("cx",function(_){return f(_[0])}).attr("cy",function(_){return h(_[1])})})}}function zl(t){const e=t?t.getAttribute("setNumber"):void 0,n=e?parseInt(e):void 0;let r="";const i=[],s=b.match.sets().length;let o="<div class='updateStats s_set'>Match</div>";const a=b.match.stats.calculated(n),l=c=>{var u;return(u=c.match(/[A-Za-z0-9_]/g))==null?void 0:u.join("")};if(a&&a.length){if(s>1)for(let p=0;p<s;p++)o+=`<div class='updateStats s_set' setNumber="${p}">Set ${p+1}</div>`;const c=document.querySelector("#statview");c&&(c.innerHTML=o);let u,f;a.forEach(p=>{b.swap_sides?[f,u]=p.team_stats:[u,f]=p.team_stats;const m=[0].concat(...[u,f].map(v=>v.value?v.value:[])).reduce((v,_)=>v+_,0),g=l(p.name.toLowerCase().split(" ").join("_"));let x=u.display,A=f.display;const k=[].concat(...[u,f].map(v=>v.numerators?v.numerators:[])).filter((v,_,y)=>y.lastIndexOf(v)==_).join(","),N=k&&m&&p.name!="Aggressive Margin"?"statname_chart":"statname";isNaN(u.value)&&(u.value=0,x="0"),isNaN(f.value)&&(f.value=0,A="0"),["Double Faults","Unforced Errors","Forced Errors"].indexOf(p.name)>=0?(u.value<f.value&&(x=`<b class="toggleChart">${x}</b>`),f.value<u.value&&(A=`<b class="toggleChart">${A}</b>`)):(u.value>f.value&&(x=`<b class="toggleChart">${x}</b>`),f.value>u.value&&(A=`<b class="toggleChart">${A}</b>`)),r+=`<div class='statrow' id="${g}"><div class='toggleChart statleft'>${x}</div><div class='toggleChart ${N}'>${p.name}</div><div class='toggleChart statright'>${A}</div></div>`;const I=`<div class='statrow' id="${g}_chart" style='display:none' onclick="showChartSource('${k}')"></div>`;k&&m&&p.name!="Aggressive Margin"&&(i.push({target:`${g}_chart`,numerators:k}),r+=I)});const h=b.match.stats.counters(n).teams;if(h[0].Backhand||h[0].Forehand||h[1].Backhand||h[1].Forehand){const p=b.swap_sides?1:0,m=b.swap_sides?0:1;r+="<div class='statsection flexcenter'>Finishing Shots - Strokes</div>",["Forehand","Backhand"].forEach(g=>{if(h[0][g]||h[1][g]){const x=h[p][g]?h[p][g].length:0,A=h[m][g]?h[m][g].length:0;r+=`<div class='statrow'><div class='statleft'><b>${x}</b></div><div class='statname'><b>Total ${g} Shots</b></div><div class='statright'><b>${A}</b></div></div>`,[].concat(...Object.keys(h).map(N=>h[N][g]?h[N][g].map(I=>I.point.result).filter(Boolean):[])).filter((N,I,v)=>v.lastIndexOf(N)==I).forEach(N=>{const I=h[p][g]?h[p][g].filter(y=>y.point.result==N):[],v=h[m][g]?h[m][g].filter(y=>y.point.result==N):[];(I.length||v.length)&&(r+=`<div class='statrow'><div class='statleft'>${I.length}</div><div class='statname'>${g} ${N}s</div><div class='statright'>${v.length}</div></div>`),[].concat(...Object.keys(h).map(y=>h[y][g]?h[y][g].map(L=>L.point.stroke).filter(Boolean):[])).filter((y,L,W)=>W.lastIndexOf(y)==L).forEach(y=>{const L=h[p][g]?h[p][g].filter(Y=>Y.point.result==N&&Y.point.stroke==y):[],W=h[m][g]?h[m][g].filter(Y=>Y.point.result==N&&Y.point.stroke==y):[];(L.length||W.length)&&(r+=`<div class='statrow'><div class='statleft'>${L.length}</div><div class='statname'><i>${g} ${y} ${N}s</i></div><div class='statright'>${W.length}</div></div>`)})})}})}const d=document.querySelector("#statlines");d&&(d.innerHTML=r),Mg(i)}else bt("entry")}function Mg(t){const e=b.match.stats.counters(),n=r=>{var i;return(i=r.match(/[A-Za-z0-9]/g))==null?void 0:i.join("")};e&&t.forEach(r=>{const i=[];Object.keys(e.teams).forEach(s=>{const o=e.teams[s],a=r.numerators.split(",").map(u=>n(u)),c=[].concat(...a.map(u=>o[u])).map(u=>u?u.point:void 0).filter(u=>u).sort((u,f)=>u.index-f.index);i.push(c.map(u=>u.index))}),Cg(r.target,i)})}const mt=(t,e)=>{const n=document.getElementById(e);n&&(n.style.display=t)};function bt(t=b.view,e){ro();const n={mainmenu({activate:i=!0}={}){if(i){It.prevent_touch=!1;const s=JSON.parse(rt.get("match_archive")||"[]"),o=document.getElementById("menu_match_archive");o&&(o.style.display=s.length?"flex":"none");const a=document.getElementById("menu_match_format");a&&(a.style.display=rf()?"flex":"none");const l=b.match.history.points(),c=document.getElementById("menu_change_server");c&&(c.style.display=l.length==0?"flex":"none")}mt(i?"flex":"none","mainmenu")},pointhistory({activate:i=!0}={}){i&&(It.prevent_touch=!1,sf()),mt(i?"flex":"none","pointhistory")},matcharchive({activate:i=!0}={}){i&&(It.prevent_touch=!1,wc()),mt(i?"flex":"none","matcharchive")},matchformat({activate:i=!0}={}){xf(),i&&(It.prevent_touch=!1),mt(i?"flex":"none","matchformats")},settings({activate:i=!0}={}){mt(i?"flex":"none","settings")},welcome({activate:i=!0}={}){mt(i?"flex":"none","welcome")},matchdetails({activate:i=!0}={}){i&&(It.prevent_touch=!1),mt(i?"flex":"none","matchdetails")},entry({activate:i=!0}={}){i&&(It.prevent_touch=!0),mt(i&&b.orientation=="landscape"?"flex":"none",Sn.horizontal_view),mt(i&&b.orientation=="portrait"?"flex":"none",Sn.vertical_view),mt(i&&b.orientation=="portrait"?"flex":"none","toolbar")},stats({activate:i=!0}={}){mt(i?"flex":"none","statsscreen"),i&&(It.prevent_touch=!1,b.match.metadata.resetStats(),zl())},momentum({activate:i=!0}={}){if(!i)mt("none","momentum"),mt("none","pts");else{b.orientation=="landscape"?(mt("none","momentum"),mt("flex","pts"),at.pts_match.update()):(mt("inline","momentum"),mt("none","pts")),It.prevent_touch=!1;const s=b.match.history.action("addPoint");at.mc.width(window.innerWidth).height(820),at.mc.data(s).update(),at.mc.update()}},gametree({activate:i=!0}={}){if(mt(i?"flex":"none","gametree"),i){It.prevent_touch=!1;const s=b.match.history.action("addPoint"),o=b.match.format.settings().code.indexOf("n_")>=0;at.gametree.options({display:{noAd:o}}),at.gametree.data(s).update(),at.gametree.update({sizeToFit:!0})}}},r=Object.keys(n);if(r.indexOf(t)>=0)return r.filter(i=>i!=t).forEach(i=>n[i]({activate:!1})),n[t]({activate:!0,params:e}),b.view=t,t}function ql(){let t,e,n,r=[0,0],i,s;const o={left:void 0,right:void 0},a={id:"gf1",score:[0,0],width:window.innerWidth,height:window.innerHeight,margins:{top:10,bottom:10,left:10,right:10},fish:{school:!1,gridcells:["0","15","30","40","G"],max_rally:void 0,cell_size:void 0,min_cell_size:5,max_cell_size:20},set:{tiebreak_to:7},display:{orientation:"vertical",transition_time:0,sizeToFit:!1,leftImg:!1,rightImg:!1,show_images:void 0,reverse:!1,point_score:!0,service:!0,player:!0,rally:!0,score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}},l={default:"#235dba"};let c=JSON.parse(JSON.stringify(l));const u={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};let f,h,d,p,m;function g(A){A._groups[0][0].tagName.toLowerCase()!="svg"&&(h=A.append("div").attr("class","fishRoot"),f=h.append("svg").attr("id","gameFish"+a.id).attr("class","fishFrame"),d=f.append("g"),p=f.append("g"),m=f.append("g")),s=function(I){if(d==null||p==null||m==null)return;if(a.display.sizeToFit||I&&I.sizeToFit){const R=A.node().getBoundingClientRect();a.width=Math.max(R.width,100),a.height=Math.max(R.height,100)}if(a.fish.cell_size&&!a.fish.school){const R=Math.max(10,t.length+2);a.height=a.fish.cell_size*R*.9}let v=!1,_=0;t.forEach(R=>{R.rally&&R.rally.length>_&&(_=R.rally.length),R.score.indexOf("T")>0&&(v=!0)}),a.fish.max_rally&&a.fish.max_rally>_&&(_=a.fish.max_rally),e=a.width-(a.margins.left+a.margins.right),n=a.height-(a.margins.top+a.margins.bottom);const y=a.display.orientation=="vertical"?1:0,L=y?e:n,W=y?n:e,Y=(y?a.margins.left:a.margins.top)+L/2,Q=1,K=.9;d.attr("transform","translate("+(y?0:r[0])+","+(y?r[1]:0)+")"),p.attr("transform","translate("+r[0]+","+r[1]+")"),m.attr("transform","translate("+r[0]+","+r[1]+")");let H;if(a.fish.cell_size)H=a.fish.cell_size;else{const R=v?a.set.tiebreak_to+4:a.fish.gridcells.length+2,J=L/(a.fish.gridcells.length+(a.display.service?R:0)),et=W/(t.length+2);H=Math.min(J,et),H=Math.max(a.fish.min_cell_size,H),H=Math.min(a.fish.max_cell_size,H)}const V=Math.sqrt(2*Math.pow(H,2)),z=V/2,Z=[],X=[],U=v?a.set.tiebreak_to:a.fish.gridcells.length-1;for(let R=0;R<U;R++){const J=v?R:a.fish.gridcells[R];X.push({label:J,l:(R+(y?1.25:.75))*z,o:(R+(y?.75:1.25))*z,rotate:45}),X.push({label:J,l:(R+1.25)*z,o:-1*(R+.75)*z,rotate:-45});for(let et=0;et<U;et++)Z.push([R,et])}if(h&&(h.attr("width",a.width+"px").attr("height",a.height+"px"),f.attr("width",a.width+"px").attr("height",a.height+"px")),a.display.point_score){const R=p.selectAll(".game_score"+a.id).data(X);R.exit().remove(),R.enter().append("text").attr("font-size",z*.8+"px").attr("transform",ct).attr("text-anchor","middle").merge(R).transition().duration(a.display.transition_time).attr("class","game_score"+a.id).attr("font-size",z*.8+"px").attr("transform",ct).attr("text-anchor","middle").text(function(J){return J.label})}else p.selectAll(".game_score"+a.id).remove();if(a.display.grid){const R=p.selectAll(".gridcell"+a.id).data(Z);R.exit().remove(),R.enter().append("rect").attr("stroke","#ccccdd").attr("stroke-width",q).attr("transform",it).attr("width",H).attr("height",H).merge(R).transition().duration(a.display.transition_time).attr("class","gridcell"+a.id).attr("stroke-width",q).attr("width",H).attr("height",H).attr("transform",it).attr("fill-opacity",0)}else p.selectAll(".gridcell"+a.id).remove();const S=m.selectAll(".gamecell"+a.id).data(t);S.exit().remove(),S.enter().append("rect").attr("opacity",0).attr("width",H).attr("height",H).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",q).merge(S).attr("id",(R,J)=>a.id+"Gs"+R.set+"g"+R.game+"p"+J).transition().duration(a.display.transition_time).attr("class","gamecell"+a.id).attr("width",H).attr("height",H).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",q).attr("opacity",a.display.player?1:0).style("fill",function(R){return a.colors.players[R.winner]});const C=m.selectAll(".result"+a.id).data(t);C.exit().remove(),C.enter().append("circle").attr("stroke","black").attr("id",function(R,J){return a.id+"Rs"+R.set+"g"+R.game+"p"+J}).attr("class","result"+a.id).attr("opacity",1).attr("stroke-width",q).attr("cx",Mo).attr("cy",Oo).attr("r",O).style("fill",function(R){return a.colors.results[R.result]}).merge(C).attr("id",function(R,J){return a.id+"Rs"+R.set+"g"+R.game+"p"+J}).attr("class","result"+a.id).transition().duration(a.display.transition_time).attr("stroke-width",q).attr("cx",Mo).attr("cy",Oo).attr("r",O).style("fill",function(R){return a.colors.results[R.result]});const M=ie().range([0,L*K]).domain([0,_]),T=ei().domain(Vt(t.length)).range([0,t.length*z]).round(!0);if(a.display.rally){const R=d.selectAll(".rally_bar"+a.id).data(t);R.exit().remove(),R.enter().append("rect").attr("opacity",0).attr("transform",lt).attr("height",y?T.bandwidth():0).attr("width",y?0:T.bandwidth()).merge(R).attr("class","rally_bar"+a.id).on("mouseover",(J,et,ht)=>{ft(ht[et]).attr("fill","yellow")}).on("mouseout",(J,et,ht)=>{ft(ht[et]).attr("fill","#eeeeff")}).transition().duration(a.display.transition_time).attr("id",function(J,et){return a.id+"Bs"+J.set+"g"+J.game+"p"+et}).attr("opacity",1).attr("stroke","white").attr("stroke-width",q).attr("fill","#eeeeff").attr("transform",w).attr("height",y?T.bandwidth():F).attr("width",y?F:T.bandwidth())}else d.selectAll(".rally_bar"+a.id).remove();if(a.display.score){const R=a.score.slice();a.display.reverse&&R.reverse();const J=d.selectAll(".set_score"+a.id).data(R);J.exit().remove(),J.enter().append("text").attr("class","set_score"+a.id).attr("transform",$).attr("font-size",z*.8+"px").attr("text-anchor","middle").text(function(ht){return ht}).merge(J).attr("class","set_score"+a.id).attr("transform",$).attr("font-size",z*.8+"px").attr("text-anchor","middle").text(function(ht){return ht});const et=d.selectAll(".ssb"+a.id).data(a.score);et.exit().remove(),et.enter().append("rect").merge(et).attr("class","ssb"+a.id).attr("transform",B).attr("stroke","black").attr("stroke-width",q).attr("fill-opacity",0).attr("height",z+"px").attr("width",z+"px")}else d.selectAll(".set_score"+a.id).remove(),d.selectAll(".ssb"+a.id).remove();if(a.display.service){const R=[];t.forEach(function(ce,Lo){let Po=!1;const Yu=["Ace","Serve Winner","Double Fault"];ce.first_serve&&(Po=!0,R.push({point:Lo,serve:"first",server:ce.server,result:ce.first_serve.error})),R.push({point:Lo,serve:Po?"second":"first",server:ce.server,result:Yu.indexOf(ce.result)>=0?ce.result:"In"})});const J=d.selectAll(".serve"+a.id).data(R);J.exit().remove(),J.enter().append("circle").attr("class","serve"+a.id).attr("cx",Eo).attr("cy",So).attr("r",O).attr("stroke",j).attr("stroke-width",q).attr("fill",j).merge(J).attr("class","serve"+a.id).attr("cx",Eo).attr("cy",So).attr("r",O).attr("stroke",j).attr("stroke-width",q).attr("fill",j);const et=d.selectAll(".sbox"+a.id).data(t);et.exit().remove(),et.enter().append("rect").attr("stroke","#ccccdd").attr("fill-opacity",0).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",q).attr("height",y?T.bandwidth():1.5*z).attr("width",y?1.5*z:T.bandwidth()).merge(et).attr("transform",G).attr("class","sbox"+a.id).attr("stroke-width",q).attr("height",y?T.bandwidth():1.5*z).attr("width",y?1.5*z:T.bandwidth());const ht=d.selectAll(".return"+a.id).data(t);ht.exit().remove(),ht.enter().append("circle").attr("class","return"+a.id).attr("cx",ae).attr("cy",Qe).attr("r",O).attr("stroke",E).attr("stroke-width",q).attr("fill",E).merge(ht).attr("class","return"+a.id).attr("cx",ae).attr("cy",Qe).attr("r",O).attr("stroke",E).attr("stroke-width",q).attr("fill",E)}else d.selectAll(".sbox"+a.id).remove(),d.selectAll(".return"+a.id).remove(),d.selectAll(".serve"+a.id).remove();a.display.rightImg?(o.right=f.selectAll("image.rightImage").data([0]),o.right.exit().remove(),o.right.enter().append("image").attr("class","rightImage").attr("xlink:href",a.display.rightImg).attr("x",a.width-30).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)}).merge(o.right).attr("x",a.width-30).attr("xlink:href",a.display.rightImg).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)})):f&&f.selectAll("image.rightImage").remove(),a.display.leftImg?(o.left=f.selectAll("image.leftImage").data([0]),o.left.enter().append("image").attr("class","leftImage").attr("xlink:href",a.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.leftImage.click&&u.leftImage.click()}).merge(o.left).attr("xlink:href",a.display.leftImg).on("click",function(){u.leftImage.click&&u.leftImage.click(a.id)}),o.left.exit().remove()):f&&f.selectAll("image.leftImage").remove();function O(){return a.display.player||a.display.service?z/4:z/2}function q(){return z>20?1:.5}function j(R){return a.colors.results[R.result]}function E(R){return R.rally==null?"white":R.rally.length>1?"yellow":R.rally.length==1?a.colors.results[R.result]:"white"}function F(R){return R.rally?M(R.rally.length):0}function $(R,J){let et=J?Y+z*.5:Y-z*.5;et=y?et:et+z*.3;const ht=z*(y?.8:.5);return tt(et,ht,0)}function B(R,J){const et=J?Y:Y-z;return tt(et,0,0)}function ct(R){const J=+Y+R.o,et=z+R.l;return tt(J,et,R.rotate)}function it(R){const J=Y+(R[1]-R[0]+y-1)*z,et=(R[0]+R[1]+3-y)*z;return tt(J,et,45)}function D(R,J){const et=Y+(N(R)+y-1)*z,ht=(J+4-y)*z;return i=[et-Y,ht-V,V],tt(et,ht,45)}function G(R,J){const et=R.server==0?Y-L/2*Q:Y+L/2*Q-1.5*z,ht=z+Lt(R,J);return tt(et,ht,0)}function lt(R,J){const et=Y,ht=z+Lt(R,J);return tt(et,ht,0)}function w(R,J){const et=R.rally?Y-M(R.rally.length)/2:0,ht=z+Lt(R,J);return tt(et,ht,0)}function tt(R,J,et){const ht=y?R:J,ce=y?J:R;return"translate("+ht+","+ce+") rotate("+et+")"}function Lt(R,J){return(J+2.5)*z}function ae(R,J){return y?Ao(R):ko(R,J)}function Qe(R,J){return y?ko(R,J):Ao(R)}function ko(R,J){return z+(J+3)*z}function Ao(R){return R.server==0?Y+L/2*Q-.75*z:Y-L/2*Q+.75*z}function Eo(R){return y?Co(R):To(R)}function So(R){return y?To(R):Co(R)}function To(R){return z+(R.point+3)*z}function Co(R){const J=R.serve=="first"&&R.server==0||R.serve=="second"&&R.server==1?.4:1.1;return R.server==0?Y-L/2*Q+J*z:Y+L/2*Q-J*z}function Mo(R,J){return y?Ro(R):No(R,J)}function Oo(R,J){return y?No(R,J):Ro(R)}function No(R,J){return z+(J+3)*z}function Ro(R){return+Y+N(R)*z}};function N(I){return I.points[a.display.reverse?0:1]-I.points[a.display.reverse?1:0]}}g.g=function(A){if(!arguments.length)return g;typeof A!="object"||A.constructor==Array||(A.bars&&(d=A.bars),A.fish&&(p=A.fish),A.game&&(m=A.game))},g.options=function(A){return arguments.length?(x(A,a),g):a};function x(A,k){if(!A||!k)return;const N=Object.keys(A),I=Object.keys(k);for(let v=0;v<N.length;v++)if(I.indexOf(N[v])>=0){const _=k[N[v]],y=A[N[v]];typeof _=="object"&&typeof y!="function"&&_&&_.constructor!==Array?x(A[N[v]],k[N[v]]):k[N[v]]=A[N[v]]}}return g.events=function(A){return arguments.length?(x(A,u),g):u},g.width=function(A){return arguments.length?(a.width=A,g):a.width},g.height=function(A){return arguments.length?(a.height=A,g):a.height},g.coords=function(A){return arguments.length?(r=A,g):i},g.data=function(A){return arguments.length?(t=JSON.parse(JSON.stringify(A)),g):t},g.update=function(A){u.update.begin&&u.update.begin(),typeof s=="function"&&t&&s(A),setTimeout(function(){u.update.end&&u.update.end()},a.display.transition_time)},g.colors=function(A){if(!arguments.length)return c;if(typeof A!="object")return!1;const k=Object.keys(A);return k.length?(k.forEach(function(N){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(A[N])||delete A[N]}),Object.keys(A).length?c=A:c=JSON.parse(JSON.stringify(l)),g):!1},g}function Og(){let t,e,n=[];const r={left:void 0,right:void 0},i={id:"m1",fullWidth:window.innerWidth,fullHeight:window.innerHeight,margins:{top:1,bottom:1,left:3,right:3},fish:{gridcells:["0","15","30","40","G"],cell_size:void 0,min_cell_size:5,max_cell_size:10},display:{continuous:!1,reverse:!1,orientation:"vertical",leftImg:!1,rightImg:!1,show_images:void 0,transition_time:0,sizeToFit:!0,service:!0,player:!0,rally:!0,score:!1,momentum_score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}};function s(){return i.fullWidth-i.margins.left-i.margins.right}function o(){return i.fullHeight-i.margins.top-i.margins.bottom}i.height=o(),i.width=s();const a={default:"#235dba"};let l=JSON.parse(JSON.stringify(a));const c={score:{click:null},leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};function u(h){h.each(function(d,p,m){const x=ft(m[p]).append("div").attr("class","momentumRoot").attr("transform","translate(0, 0)"),A=x.append("svg").attr("class","momentumFrame");A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),A.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const k=A.append("g").attr("id","momentumBars"),N=A.append("g").attr("id","momentumFish"),I=A.append("g").attr("id","momentumGame");e=function(v){if(i.display.sizeToFit||v&&v.sizeToFit){const E=h.node().getBoundingClientRect();i.display.orientation=="vertical"&&(i.fullWidth=Math.max(E.width,100)),i.fullHeight=Math.max(E.height,100)}i.height=o(),i.width=s();const _=i.display.orientation=="vertical"?1:0,y=_?i.width:i.height,L=y/2,W=Ss(t);let Y=0;t.forEach(function(E){E.rally!=null&&E.rally.length>Y&&(Y=E.rally.length)});const Q=T();n.slice(W.length).forEach(function(E){Ki(".c"+E.options().id).remove()}),n=n.slice(0,W.length);let H;const V=[0,0],z=[];W.forEach(function(E,F){n[F]||(n.push(ql()),A.call(n[F]),n[F].g({bars:k.append("g").attr("class","cGF"+F),fish:N.append("g").attr("class","cGF"+F),game:I.append("g").attr("class","cGF"+F)}),n[F].options({id:"GF"+F,display:{score:!1,point_score:!1},fish:{school:!0}})),n[F].width(y).height(y),n[F].options({score:E.score,fish:{cell_size:Q,max_rally:Y},display:{orientation:i.display.orientation,service:i.display.service,rally:i.display.rally,player:i.display.player,grid:i.display.grid},colors:{players:{0:i.colors.players[0],1:i.colors.players[1]}}}),n[F].data(E.points),n[F].coords(V).update();const $=n[F].coords();V[0]+=_?$==null?void 0:$[0]:($==null?void 0:$[1])-($==null?void 0:$[2])/2,V[1]+=_?$==null?void 0:$[1]:($==null?void 0:$[0])+($==null?void 0:$[2])/2,z.push({score:E.score,index:E.index,l:V[1]+($==null?void 0:$[2])*1.75,o:V[0]+($==null?void 0:$[2])*1.75,set_end:E.last_game}),E.last_game&&!i.display.continuous&&(V[_?0:1]=0),H=($==null?void 0:$[2])/2}),x.attr("width",i.width+"px").attr("height",(_?100+V[1]:i.height)+"px").on("mouseover",q).on("mouseout",j),A.attr("width",i.width+"px").attr("height",(_?100+V[1]:i.height)+"px");const Z=N.selectAll(".midline"+i.id).data([0]);Z.enter().append("line").attr("class","midline"+i.id).attr("x1",_?L:H).attr("x2",_?L:V[0]+5*(H||0)).attr("y1",_?H:L).attr("y2",_?V[1]+5*H:L).attr("stroke-width",M).attr("stroke","#ccccdd"),Z.exit().remove(),Z.transition().duration(i.display.transition_time).attr("x1",_?L:H).attr("x2",_?L:V[0]+5*(H||0)).attr("y1",_?H:L).attr("y2",_?V[1]+5*H:L).attr("stroke-width",M).attr("stroke","#ccccdd");const X=N.selectAll(".score_line"+i.id).data(z);if(X.enter().append("line").attr("class","score_line"+i.id).attr("x1",function(E){return _?Q*2:E.o}).attr("x2",function(E){return _?y-Q*2:E.o}).attr("y1",function(E){return _?E.l:Q*3}).attr("y2",function(E){return _?E.l:y-Q*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),X.exit().remove(),X.transition().duration(i.display.transition_time).attr("x1",function(E){return _?Q*2:E.o}).attr("x2",function(E){return _?y-Q*2:E.o}).attr("y1",function(E){return _?E.l:Q*3}).attr("y2",function(E){return _?E.l:y-Q*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),i.display.momentum_score){const E=N.selectAll(".score_text"+i.id).data(z);E.exit().remove(),E.enter().append("g").attr("class","score_text"+i.id).attr("transform",U).on("click",function($){c.score.click&&c.score.click($)}).merge(E).attr("class","score_text"+i.id).attr("transform",U).on("click",function($){c.score.click&&c.score.click($)});const F=E.selectAll(".score"+i.id).data(function($){return $.score});F.exit().remove(),F.enter().append("text").attr("class","score"+i.id).attr("transform",S).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function($){return $}).merge(F).attr("class","score"+i.id).transition().duration(i.display.transition_time).attr("transform",S).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function($){return $})}else N.selectAll(".score_text"+i.id).remove();function U(E){return C(0,_?E.l:E.o-H,0)}function S(E,F){const $=_?y/3:i.height/3,B=F?L+$:L-$+H*3,ct=-1*H*(_?.25:.5);return C(B,ct,0)}function C(E,F,$){const B=_?E:F,ct=_?F:E;return"translate("+B+","+ct+") rotate("+$+")"}function M(){return H>20?2:1}function T(){let E;if(i.display.orientation=="vertical")E=i.width/2/(O()+1);else{const F=i.width/(t.length+4);E=Math.sqrt(2*F*F)}return Math.min(i.fish.max_cell_size,E)}function O(){let E=0;const F=[0,0];return t.forEach(function($){F[$.point.winner]+=1;const B=Math.abs(F[0]-F[1]);B>E&&(E=B)}),E}i.display.rightImg?(r.right=A.selectAll("image.rightImage").data([0]),r.right.exit().remove(),r.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-20).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)}).merge(r.right).attr("x",i.width-20).attr("xlink:href",i.display.rightImg).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)})):A.selectAll("image.rightImage").remove(),i.display.leftImg?(r.left=A.selectAll("image.leftImage").data([0]),r.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.leftImage.click&&c.leftImage.click()}).merge(r.left).attr("xlink:href",i.display.leftImg).on("click",function(){c.leftImage.click&&c.leftImage.click(i.id)}),r.left.exit().remove()):A.selectAll("image.leftImage").remove();function q(){i.display.show_images!=!1&&(i.display.leftImg&&r.left.attr("opacity",1),i.display.rightImg&&r.right.attr("opacity",1))}function j(){i.display.show_images||(i.display.leftImg&&r.left.attr("opacity",0),i.display.rightImg&&r.right.attr("opacity",0))}}})}u.options=function(h){return arguments.length?(f(h,i),u):i};function f(h,d){if(!h||!d)return;const p=Object.keys(h),m=Object.keys(d);for(let g=0;g<p.length;g++)if(m.indexOf(p[g])>=0){const x=d[p[g]],A=h[p[g]];typeof x=="object"&&typeof A!="function"&&x.constructor!==Array?f(h[p[g]],d[p[g]]):d[p[g]]=h[p[g]]}}return u.events=function(h){return arguments.length?(f(h,c),u):c},u.width=function(h){return arguments.length?(i.fullWidth=h,u):i.fullWidth},u.height=function(h){return arguments.length?(i.fullHeight=h,u):i.fullHeight},u.data=function(h){return arguments.length?(t=h,u):t},u.update=function(h){c.update.begin&&c.update.begin(),typeof e=="function"&&t&&e(h),setTimeout(function(){c.update.end&&c.update.end()},i.display.transition_time)},u.colors=function(h){if(!arguments.length)return l;if(typeof h!="object")return!1;const d=Object.keys(h);return d.length?(d.forEach(function(p){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(h[p])||delete h[p]}),Object.keys(h).length?l=h:l=JSON.parse(JSON.stringify(a)),u):!1},u}function Ng(){function t(U){return Math.max.apply(null,U)}function e(U){return Math.min.apply(null,U)}const n={left:void 0,right:void 0};let r=[];const i={width:150,height:150,min_max:20,margins:{top:0,right:0,bottom:0,left:0},display:{noAd:!1,leftImg:!1,rightImg:!1,show_images:!1,sizeToFit:!0,showEmpty:!1},lines:{easing:!1,duration:600,points:{winners:"#2ed2db",errors:"#2ed2db",unknown:"#2ed2db"},colors:{underlines:"#2ed2db"}},nodes:{colors:{0:"black",1:"red",neutral:"#ecf0f1"}},points:{winners:["Winner","Ace","Serve Winner","Passing Shot","Return Winner","Forcing Error","Forcing Volley Error","Net Cord","In"],errors:["Unforced Error","Unforced","Forced Error","Error","Out","Net","Netted Passing Shot","L","Overhead Passing Shot","Double Fault"],highlight:[]},selectors:{enabled:!0,selected:{0:!1,1:!1}},labels:{Game:"GAME",Player:"Player",Opponent:"Opponent"}};let s,o,a;const l=0,c="x";let u={w:{},e:{},p:{},n:{}};const f={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mousemove:null,mouseout:null},node:{mousemove:null,mouseout:null},score:{mousemove:null,mouseout:null},label:{mousemove:null,mouseout:null,click:x},selector:{mousemove:null,mouseout:null,click:x}};function h(U){const S=U.append("div").attr("class","gametreeRoot");o=S.append("svg"),s=function(C){if(!r.length&&!i.display.showEmpty){o.selectAll("*").remove();return}if(p(),i.display.sizeToFit||C&&C.sizeToFit){const w=U.node().getBoundingClientRect();i.width=Math.min(w.width,w.height)}const M=i.width-(i.margins.left+i.margins.right),T=i.width*.9;a=(T+M)/2*.03;const O=W.map(function(w){return w.id}),q=e(O.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),j=t([t(O.map(function(w){return isNaN(u.p[w])?0:u.p[w]})),i.min_max]),E=ie().domain([q,j]).range([0,a*2]);o.transition().duration(l).attr("width",M).attr("height",T);const F=o.selectAll(".gradient").data(W,m);F.exit().remove(),F.enter().append("linearGradient").attr("id",function(w){return"gradient"+w.id}).attr("class","gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).merge(F).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T});const $=F.selectAll(".points_stop").data(w=>A(w));$.exit().remove(),$.enter().append("stop").attr("class","points_stop").attr("offset",function(w){return w.offset}).attr("stop-color",function(w){return w.color}).merge($).attr("offset",function(w){return w.offset});const B=o.selectAll(".line").data(W);B.exit().remove(),B.enter().append("line").attr("class","line").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(w){return"url(#gradient"+w.id+")"}).on("mousemove",function(w,tt){f.point.mousemove&&f.point.mousemove(w,tt)}).on("mouseout",function(w,tt){f.point.mouseout&&f.point.mouseout(w,tt)}).on("click",function(w,tt){f.point.click&&f.point.click(w,tt)}).merge(B).transition().duration(i.lines.easing||C&&C.easing?i.lines.duration:0).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return u.p[w.id]?E(u.p[w.id]):0});const ct=o.selectAll(".uline").data(Y);ct.exit().remove(),ct.enter().append("line").attr("class","uline").attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0}).attr("stroke",function(){return i.lines.colors.underlines}).merge(ct).transition().duration(l).attr("id",function(w){return w.id}).attr("x1",function(w){return w.start.x*M}).attr("y1",function(w){return w.start.y*T}).attr("x2",function(w){return w.end.x*M}).attr("y2",function(w){return w.end.y*T}).attr("stroke-width",function(w){return w.width?w.width:0});const it=o.selectAll(".node").data(L);it.exit().remove(),it.enter().append("circle").attr("class","node").attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a}).attr("stroke",function(w){return w.color_pct!=null?Z(X(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).attr("fill",function(w){return w.color_pct!=null?Z(X(i.nodes.colors[w.player]),w.color_pct):i.nodes.colors.neutral}).on("mousemove",function(w,tt){f.score.mousemove&&f.score.mousemove(w,tt)}).on("mouseout",function(w,tt){f.node.mouseout&&f.node.mouseout(w,tt)}).on("click",function(w,tt){f.node.click&&f.node.click(w,tt)}).merge(it).transition().duration(l).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T}).attr("r",function(){return a});const D=o.selectAll(".score").data(Q);D.exit().remove(),D.enter().append("text").attr("class","score").attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("font-family","Lato, Arial, sans-serif").attr("text-anchor","middle").attr("alignment-baseline","central").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>7)return w.text}).on("mousemove",function(w,tt){f.score.mousemove&&f.score.mousemove(w,tt)}).on("mouseout",function(w,tt){f.score.mouseout&&f.score.mouseout(w,tt)}).on("click",function(w,tt){f.score.click&&f.score.click(w,tt)}).merge(D).transition().duration(l).attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return w.text});const G=o.selectAll(".gt_label").data(K);G.exit().remove(),G.enter().append("text").attr("class","gt_label").attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("alignment-baseline",function(w){return w.baseline?w.baseline:void 0}).attr("font-size",function(w){return a*w.fontsize+"px"}).attr("text-anchor",function(w){return w.anchor?w.anchor:void 0}).attr("font-family","Lato, Arial, sans-serif").attr("stroke",function(w){return w.stroke}).attr("fill",function(w){return w.fill}).text(function(w){if(a*w.fontsize>5)return w.id}).attr("selector",function(w){return w.id}).on("click",function(w,tt,Lt){f.label.click&&f.label.click(w,tt,Lt[tt])}).merge(G).transition().duration(l).attr("x",function(w){return w.pos.x*M}).attr("y",function(w){return w.pos.y*T}).attr("font-size",function(w){return a*w.fontsize+"px"}).text(function(w){if(a*w.fontsize>5)return i.labels[w.id]});const lt=o.selectAll(".selector").data(H);lt.exit(),lt.enter().append("circle").attr("class","selector").attr("status",function(w){return w.status}).attr("id",function(w){return w.id}).attr("selector",function(w){return w.id}).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke",function(w,tt){return i.nodes.colors[tt]}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,tt){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[tt]?i.nodes.colors[tt]:i.nodes.colors.neutral}).attr("opacity",function(w){return w.opacity}).on("mousemove",function(w,tt){f.selector.mousemove&&f.selector.mousemove(w,tt)}).on("mouseout",function(w,tt){f.selector.mouseout&&f.selector.mouseout(w,tt)}).on("click",function(w,tt,Lt){f.selector.click&&f.selector.click(w,tt,Lt[tt])}).merge(lt).transition().duration(l).attr("cx",function(w){return w.pos.x*M}).attr("cy",function(w){return w.pos.y*T+4}).attr("r",function(w){return a*w.r_pct}).attr("stroke-width",function(){return a*.25}).attr("fill",function(w,tt){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[tt]?i.nodes.colors[tt]:i.nodes.colors.neutral}),i.display.rightImg?(n.right=o.selectAll("image.rightImage").data([0]),n.right.exit().remove(),n.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-(i.margins.right+30)).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)}).merge(n.right).attr("x",i.width-(i.margins.right+30)).attr("xlink:href",i.display.rightImg).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)})):S.selectAll("image.rightImage").remove(),i.display.leftImg?(n.left=o.selectAll("image.leftImage").data([0]),n.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10+i.margins.left).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.leftImage.click&&f.leftImage.click()}).merge(n.left).attr("x",10+i.margins.left).attr("xlink:href",i.display.leftImg).on("click",function(){f.leftImage.click&&f.leftImage.click(i.id)}),n.left.exit().remove()):S.selectAll("image.leftImage").remove()}}h.exports=function(){return{selectView:x}},h.options=function(U){return arguments.length?(d(U,i),h):i};function d(U,S){if(!U||!S)return;const C=Object.keys(U),M=Object.keys(S);for(let T=0;T<C.length;T++)if(M.indexOf(C[T])>=0){const O=S[C[T]],q=U[C[T]];typeof O=="object"&&typeof q!="function"&&O&&O.constructor!==Array?d(U[C[T]],S[C[T]]):S[C[T]]=U[C[T]]}}h.events=function(U){return arguments.length?(d(U,f),h):f},h.reset=function(){return r=[],g(),u={w:{},e:{},p:{},n:{}},h},h.width=function(U){return arguments.length?(i.width=U,h):i.width},h.height=function(U){return arguments.length?(i.height=U,h):i.height},h.data=function(U){return arguments.length?(U.constructor===Array&&(h.reset(),r=U),h):r},h.counters=function(){return p(),u},h.update=function(U){f.update.begin&&f.update.begin(),typeof s=="function"&&s(U),setTimeout(function(){f.update.end&&f.update.end()},l)};function p(){let U;if(u={w:{},e:{},p:{},n:{}},i.selectors.selected[0]||i.selectors.selected[1]){const C=i.selectors.selected[0]?0:1;U=r.filter(function(M){return M.point.server==C})}else U=r;U=U.filter(function(C){return!C.point.tiebreak});for(let C=0;C<U.length;C++){const M=U[C-1],O="L"+(C==0||M.game.complete?S([0,0]):S(M.point.points))+c+S(U[C].point.points);i.points.highlight.length&&i.points.highlight.indexOf(C)<0||(u.p[O]=u.p[O]?u.p[O]+1:1,i.points.winners.indexOf(U[C].point.result)>=0?u.w[O]=u.w[O]?u.w[O]+1:1:i.points.errors.indexOf(U[C].point.result)>=0&&(u.e[O]=u.e[O]?u.e[O]+1:1))}function S(C){const M=Math.min(...C),T=M>=4?M-3:0;return C.map((q,j)=>i.display.noAd&&q==4&&C[1-j]==3?"G":q-T).join("-")}}function m(U){return U&&U.id}function g(){ft("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),ft("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),i.selectors.selected[1]=!1,i.selectors.selected[0]=!1}function x(U,S,C){if(!i.selectors.enabled)return;const M=ft(C).attr("selector");ft("[id="+M+"]").attr("status")=="none"?ft(C).attr("selector")=="Opponent"?(ft("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),ft("[id=Opponent]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[1]=!0,i.selectors.selected[0]=!1):(ft("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),ft("[id=Player]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[0]=!0,i.selectors.selected[1]=!1):(ft("[id="+M+"]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),ft(C).attr("selector")=="Opponent"?i.selectors.selected[1]=!1:i.selectors.selected[0]=!1),s()}function A(U){if(!u.p[U.id])return[];const S=u.p[U.id]==null?1:u.p[U.id],C=u.w[U.id]?u.w[U.id]:0,M=u.e[U.id]?u.e[U.id]:0,T=C/S*100,O=(S-(C+M))/S*100;return[{offset:"0%",color:i.lines.points.unknown},{offset:O+"%",color:i.lines.points.unknown},{offset:O+"%",color:i.lines.points.winners},{offset:O+T+"%",color:i.lines.points.winners},{offset:O+T+"%",color:i.lines.points.errors},{offset:"100%",color:i.lines.points.errors}]}const k=.07,N=.14,I=.05,v=.21,_={col1:k,col2:k+N,col3:k+2*N,col4:k+3*N,col5:k+4*N,col6:k+5*N,col7:k+6*N,row1:I,row2:I+v,row3:I+2*v,row4:I+3*v,row5:I+4*v,foot:I+4.1*v,adr1:I+3.5*v,adc1:k+N*2.5,adc2:k+N*3.5,selc:k*.8,tslc:k,sl1r:I/2,sl2r:I*1.5,plr1:k*.8,plr2:k+4*N,plrs:I+4.25*v},y={"p0-0":{x:_.col4,y:_.row1},"p1-1":{x:_.col4,y:_.row2},"p2-2":{x:_.col4,y:_.row3},"p3-3":{x:_.col4,y:_.row4},"p1-0":{x:_.col3,y:_.row2},"p0-1":{x:_.col5,y:_.row2},"p2-1":{x:_.col3,y:_.row3},"p1-2":{x:_.col5,y:_.row3},"p2-0":{x:_.col2,y:_.row3},"p0-2":{x:_.col6,y:_.row3},"p3-2":{x:_.col3,y:_.row4},"p2-3":{x:_.col5,y:_.row4},"p3-1":{x:_.col2,y:_.row4},"p1-3":{x:_.col6,y:_.row4},"p3-0":{x:_.col1,y:_.row4},"p0-3":{x:_.col7,y:_.row4},"p3-4":{x:_.adc1,y:_.adr1},"p4-3":{x:_.adc2,y:_.adr1},"p5-3":{x:_.adc2,y:_.row5},"p3-5":{x:_.adc1,y:_.row5},"p4-1":{x:_.col2,y:_.row5},"p1-4":{x:_.col6,y:_.row5},"p4-2":{x:_.col3,y:_.row5},"p2-4":{x:_.col5,y:_.row5},"p4-0":{x:_.col1,y:_.row5},"p0-4":{x:_.col7,y:_.row5},"pG-3":{x:_.col4,y:_.row5},"p3-G":{x:_.col4,y:_.row5},sPlyr:{x:_.adc1,y:_.plrs},tPlyr:{x:_.col2,y:_.plrs},sOpp:{x:_.adc2,y:_.plrs},tOpp:{x:_.col6,y:_.plrs},GAME:{x:_.col4,y:_.foot},L1s:{x:_.col1,y:_.foot},L1e:{x:_.adc1,y:_.foot},L2s:{x:_.adc2,y:_.foot},L2e:{x:_.col7,y:_.foot}},L=[{name:"0-0",pos:y["p0-0"],player:0},{name:"15-15",pos:y["p1-1"],player:0},{name:"30-30",pos:y["p2-2"],player:0},{name:"40-40",pos:y["p3-3"],player:0},{name:"0-15",pos:y["p0-1"],color_pct:.4,player:1},{name:"15-30",pos:y["p1-2"],color_pct:.4,player:1},{name:"0-30",pos:y["p0-2"],color_pct:.2,player:1},{name:"30-40",pos:y["p2-3"],color_pct:.4,player:1},{name:"15-40",pos:y["p1-3"],color_pct:.2,player:1},{name:"0-40",pos:y["p0-3"],color_pct:0,player:1},{name:"40-A",pos:y["p4-3"],color_pct:.5,player:1},{name:"15-0",pos:y["p1-0"],color_pct:.4,player:0},{name:"30-15",pos:y["p2-1"],color_pct:.4,player:0},{name:"30-0",pos:y["p2-0"],color_pct:.2,player:0},{name:"40-30",pos:y["p3-2"],color_pct:.4,player:0},{name:"40-15",pos:y["p3-1"],color_pct:.2,player:0},{name:"40-0",pos:y["p3-0"],color_pct:0,player:0},{name:"A-40",pos:y["p3-4"],color_pct:.5,player:0}],W=[{id:"L0-0x0-1",start:y["p0-0"],end:y["p0-1"]},{id:"L0-0x1-0",start:y["p0-0"],end:y["p1-0"]},{id:"L0-1x0-2",start:y["p0-1"],end:y["p0-2"]},{id:"L0-1x1-1",start:y["p0-1"],end:y["p1-1"]},{id:"L1-0x2-0",start:y["p1-0"],end:y["p2-0"]},{id:"L1-0x1-1",start:y["p1-0"],end:y["p1-1"]},{id:"L1-1x1-2",start:y["p1-1"],end:y["p1-2"]},{id:"L1-1x2-1",start:y["p1-1"],end:y["p2-1"]},{id:"L2-0x2-1",start:y["p2-0"],end:y["p2-1"]},{id:"L2-0x3-0",start:y["p2-0"],end:y["p3-0"]},{id:"L2-1x2-2",start:y["p2-1"],end:y["p2-2"]},{id:"L2-1x3-1",start:y["p2-1"],end:y["p3-1"]},{id:"L2-2x2-3",start:y["p2-2"],end:y["p2-3"]},{id:"L2-2x3-2",start:y["p2-2"],end:y["p3-2"]},{id:"L0-2x0-3",start:y["p0-2"],end:y["p0-3"]},{id:"L0-2x1-2",start:y["p0-2"],end:y["p1-2"]},{id:"L0-3x0-4",start:y["p0-3"],end:y["p0-4"]},{id:"L0-3x1-3",start:y["p0-3"],end:y["p1-3"]},{id:"L1-2x2-2",start:y["p1-2"],end:y["p2-2"]},{id:"L1-2x1-3",start:y["p1-2"],end:y["p1-3"]},{id:"L1-3x2-3",start:y["p1-3"],end:y["p2-3"]},{id:"L1-3x1-4",start:y["p1-3"],end:y["p1-4"]},{id:"L2-3x3-3",start:y["p2-3"],end:y["p3-3"]},{id:"L2-3x2-4",start:y["p2-3"],end:y["p2-4"]},{id:"L3-3x3-4",start:y["p3-3"],end:y["p4-3"]},{id:"L3-3x4-3",start:y["p3-3"],end:y["p3-4"]},{id:"L3-2x3-3",start:y["p3-2"],end:y["p3-3"]},{id:"L3-2x4-2",start:y["p3-2"],end:y["p4-2"]},{id:"L3-1x3-2",start:y["p3-1"],end:y["p3-2"]},{id:"L3-1x4-1",start:y["p3-1"],end:y["p4-1"]},{id:"L3-0x3-1",start:y["p3-0"],end:y["p3-1"]},{id:"L3-0x4-0",start:y["p3-0"],end:y["p4-0"]},{id:"L3-4x3-5",start:y["p4-3"],end:y["p5-3"]},{id:"L4-3x5-3",start:y["p3-4"],end:y["p3-5"]},{id:"L3-3xG-3",start:y["p3-3"],end:y["pG-3"]},{id:"L3-3x3-G",start:y["p3-3"],end:y["p3-G"]}],Y=[{stroke:"blue",start:y.L1s,end:y.L1e,width:2},{stroke:"blue",start:y.L2s,end:y.L2e,width:2}],Q=[{pos:y["p0-0"],fill:"black",fontsize:.7,text:"0-0"},{pos:y["p1-1"],fill:"black",fontsize:.7,text:"15-15"},{pos:y["p2-2"],fill:"black",fontsize:.7,text:"30-30"},{pos:y["p3-3"],fill:"black",fontsize:.7,text:"40-40"},{pos:y["p0-1"],fill:"white",fontsize:.7,text:"0-15"},{pos:y["p1-2"],fill:"white",fontsize:.7,text:"15-30"},{pos:y["p0-2"],fill:"white",fontsize:.7,text:"0-30"},{pos:y["p2-3"],fill:"white",fontsize:.7,text:"30-40"},{pos:y["p1-3"],fill:"white",fontsize:.7,text:"15-40"},{pos:y["p0-3"],fill:"white",fontsize:.7,text:"0-40"},{pos:y["p4-3"],fill:"white",fontsize:.7,text:"40-A"},{pos:y["p1-0"],fill:"white",fontsize:.7,text:"15-0"},{pos:y["p2-1"],fill:"white",fontsize:.7,text:"30-15"},{pos:y["p2-0"],fill:"white",fontsize:.7,text:"30-0"},{pos:y["p3-2"],fill:"white",fontsize:.7,text:"40-30"},{pos:y["p3-1"],fill:"white",fontsize:.7,text:"40-15"},{pos:y["p3-0"],fill:"white",fontsize:.7,text:"40-0"},{pos:y["p3-4"],fill:"white",fontsize:.7,text:"A-40"}],K=[{pos:y.tPlyr,fill:"black",fontsize:.9,id:"Player",anchor:"middle",baseline:"hanging"},{pos:y.tOpp,fill:"black",fontsize:.9,id:"Opponent",anchor:"middle",baseline:"hanging"},{pos:y.GAME,fill:"#555555",fontsize:.9,id:"Game",anchor:"middle",baseline:"central"}],H=[{id:"Player",pos:y.sPlyr,r_pct:.4,opacity:1,status:"none"},{id:"Opponent",pos:y.sOpp,r_pct:.4,opacity:.4,status:"none"}];function V(U,S){const C=parseInt(U.slice(1),16),M=S<0?0:255,T=S<0?S*-1:S,O=C>>16,q=C>>8&255,j=C&255;return"#"+(16777216+(Math.round((M-O)*T)+O)*65536+(Math.round((M-q)*T)+q)*256+(Math.round((M-j)*T)+j)).toString(16).slice(1)}function z(U,S){const C=U.split(","),M=S<0?0:255,T=S<0?S*-1:S,O=parseInt(C[0].slice(4)),q=parseInt(C[1]),j=parseInt(C[2]);return"rgb("+(Math.round((M-O)*T)+O)+","+(Math.round((M-q)*T)+q)+","+(Math.round((M-j)*T)+j)+")"}function Z(U,S){return U.length>7?z(U,S):V(U,S)}function X(U){const S=document.createElement("div");S.style.color=U;const C=window.getComputedStyle(document.body.appendChild(S)).color.match(/\d+/g).map(function(M){return parseInt(M,10)});return document.body.removeChild(S),C.length>=3?"#"+((1<<24)+(C[0]<<16)+(C[1]<<8)+C[2]).toString(16).substr(1):!1}return h}function Rg(){let t;const e={id:0,class:"ptsMatch",resize:!0,width:window.innerWidth,height:80,max_height:100,margins:{top:0,right:0,bottom:0,left:0},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{sizeToFit:!0,transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!0,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"#a55194",1:"#6b6ecf"}}};let n;const r=[];let i;const s=[];for(let c=0;c<5;c++)s.push(Lg());const o={update:{begin:null,end:null},set_box:{mouseover:null,mouseout:null},point_bars:{mouseover:null,mouseout:null,click:null}};function a(c){if(i=c,e.display.sizeToFit){const f=c.node().getBoundingClientRect();e.width=Math.max(f.width,400)}const u=i.append("div").attr("class",e.class+"root").style("width",e.width+"px").style("height",e.height+"px");for(let f=0;f<5;f++)r[f]=u.append("div").attr("class","pts").style("display","none"),r[f].call(s[f]);n=function(f){var p;const h=t.sets();if(e.display.sizeToFit||f!=null&&f.sizeToFit){const m=c.node().getBoundingClientRect();e.width=Math.max(m.width,400),e.height=(m.height-(+e.margins.top+ +e.margins.bottom))/h.length,e.height>e.max_height&&(e.height=e.max_height)}let d=0;for(let m=0;m<s.length;m++)(p=h==null?void 0:h[m])!=null&&p.history.points().length?(r[m].style("display","inline"),s[m].width(e.width),s[m].height(e.height),s[m].update(),d+=+e.height+5):r[m].style("display","none");u.style("width",e.width+"px").style("height",d+"px")}}a.options=function(c){return arguments.length?(l(c,e),a):e};function l(c,u){if(!c||!u)return;const f=Object.keys(c),h=Object.keys(u);for(const d of f)if(h.indexOf(d)>=0){const p=u[d],m=c[d];typeof p=="object"&&typeof m!="function"&&p&&p.constructor!==Array?l(c[d],u[d]):u[d]=c[d]}}return a.events=function(c){return arguments.length?(l(c,o),a):o},a.colors=function(c){return arguments.length?(e.colors.players=c,a):e.colors},a.width=function(c){return arguments.length?(e.width=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.width(c)}),a):e.width},a.height=function(c){return arguments.length?(e.height=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.height(c)}),a):e.height},a.duration=function(c){return arguments.length?(e.display.transition_time=c,a):e.display.transition_time},a.update=function(c){o.update.begin&&o.update.begin();const u=t.sets(),f=Math.max(...u.map((h,d)=>h.history.points().filter(p=>p.set==d).length));return u.length>1&&a.options({points:{max_width_points:f}}),u.forEach(function(h,d){s[d].data(u[d]),s[d].options({id:d}),s[d].options({lines:e.lines,points:e.points,score:e.score,header:e.header}),s[d].options({set:e.set,display:e.display,colors:e.colors}),s[d].events(o),s[d].width(e.width).height(e.height).update(c)}),typeof n=="function"&&n(c),setTimeout(function(){o.update.end&&o.update.end()},e.display.transition_time),!0},a.data=function(c){if(!arguments.length)return t;t=c,a.update()},a}function Lg(){let t,e,n;const r=["Ace","Winner","Serve Winner"],i=["Forced Error","Unforced Error","Double Fault","Penalty","Out","Net"],s={id:0,class:"ptsChart",resize:!0,width:window.innerWidth,height:80,margins:{top:5,right:15,bottom:5,left:5},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!1,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"blue",1:"purple"}}};let o,a;const l={set_box:{mouseover:null,mouseout:null},update:{begin:null,end:null},point_bars:{mouseover:null,mouseout:null,click:null}};function c(p){p.each(function(m,g,x){a=ft(x[g]);const A=a.append("svg").attr("class",s.class+"root").style("width",s.width+"px").style("height",s.height+"px"),k=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),N=A.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),I=k.append("text").attr("class",s.class+"Header").attr("opacity",0).attr("font-size",s.header.font_size).attr("font-weight",s.header.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+8+"px"}),v=k.append("text").attr("class",s.class+"Score").attr("opacity",0).attr("font-size",s.score.font_size).attr("font-weight",s.score.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+20+"px"});o=function(_,y){if(!t)return!1;A.transition().duration(s.display.transition_time).style("width",s.width+"px").style("height",s.height+"px");const L=t.history.action("addPoint").filter(D=>D.point.set==s.id),W=L[0].point.index;e=d(L),n=L.map(D=>D.needed.points_to_set);const Y=Math.max(...[].concat(n.map(D=>D[0]),n.map(D=>D[1]))),Q=Math.max(...n[0]);n.unshift([Q,Q]);const K=Math.max.apply(null,L.map(function(D){return D.point.rally?D.point.rally.length:0}))+2;ct(y);const H=ie().domain([0,h()]).range([0,s.width-(s.margins.left+s.margins.right)]);function V(D,G,lt){return D.range[G]<W?H(D.range[G]+lt):H(D.range[G]+lt-W)}const z=ie().range([s.height-(s.margins.top+s.margins.bottom),s.margins.bottom]).domain([-2,Y-1]),Z=k.selectAll("."+s.class+"SetBox").data([s.id]);Z.enter().append("rect").attr("class",s.class+"SetBox").style("position","relative").attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none").on("mouseover",function(D,G){l.set_box.mouseover&&l.set_box.mouseover(D,G)}).on("mouseout",function(D,G){l.set_box.mouseout&&l.set_box.mouseout(D,G)}).merge(Z).transition().duration(y?0:s.display.transition_time).attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}),Z.exit().transition().duration(y?0:s.display.transition_time).style("opacity",0).remove();const X=k.selectAll("."+s.class+"GameBoundary").data(e);X.exit().remove(),X.enter().append("rect").attr("class",s.class+"GameBoundary").merge(X).attr("id",function(D,G){return s.class+s.id+"boundary"+G}).transition().duration(y?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+V(D,0,0)+", 0)"}).attr("height",z(-2)).attr("width",function(D){return V(D,1,1)-V(D,0,0)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none");const U=k.selectAll("."+s.class+"Game").data(e);U.exit().remove(),U.enter().append("rect").attr("class",s.class+"Game").merge(U).attr("id",function(D,G){return s.class+s.id+"game"+G}).transition().duration(y?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+V(D,0,0)+", 0)"}).attr("height",z(-2)).attr("width",function(D){return V(D,1,1)-V(D,0,0)}).attr("stroke",function(D){return s.colors.players[D.winner]}).attr("stroke-width",1).attr("fill",function(D){return D.winner!=null?s.colors.players[D.winner]:"none"});const S=Ll().x(function(D,G){return H(G)}).y(function(D){return z(Y-D)}),C=k.selectAll("."+s.class+"Line").data([0,1]);C.exit().remove(),C.enter().append("path").attr("class",s.class+"Line").attr("id",function(D){return s.class+s.id+"player"+D+"Line"}).attr("fill","none").merge(C).transition().duration(y?0:s.display.transition_time/2).style("opacity",.1).transition().duration(y?0:s.display.transition_time/2).style("opacity",1).attr("stroke",function(D){return s.colors.players[D]}).attr("stroke-width",function(){return s.lines.width}).attr("d",function(D){return S(n.map(G=>G[D]))});const M=[n.map(D=>({pts:D[0]})),n.map(D=>({pts:D[1]}))],T=k.selectAll("."+s.class+"BPWrapper").data(M);T.enter().append("g").attr("class",s.class+"BPWrapper"),T.exit().remove();const O=T.selectAll("."+s.class+"Breakpoint").data(function(D,G){return u(D,G)});O.exit().attr("opacity","0").remove(),O.enter().append("circle").attr("class",s.class+"Breakpoint").attr("opacity","0").merge(O).transition().duration(y?0:s.display.transition_time/2).style("opacity",0).transition().duration(y?0:s.display.transition_time/2).attr("fill",function(D,G){if(L[G-1]&&L[G-1].point.breakpoint!=null)return s.colors.players[D._i]}).style("opacity",function(D,G){if(L[G-1]&&L[G-1].point.breakpoint!=null)return L[G-1].point.server==1-D._i?1:0}).attr("cx",function(D,G){return H(G)}).attr("cy",function(D){return z(Y-D.pts)}).attr("r",2);const q=Vt(L.length),j=ei().domain(q).range([0,H(L.length)]).round(!0),E=ie().domain([0,L.length]).range([0,H(L.length)]);k.selectAll(".gradient"+s.id).remove();const F=k.selectAll(".gradient"+s.id).data(Vt(L.length));F.exit().remove(),F.enter().append("linearGradient").attr("id",function(D,G){return"gradient"+s.id+G}).attr("class",function(){return"gradient"+s.id}).attr("gradientUnits","userSpaceOnUse").attr("x1",function(){return j.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return j.bandwidth()/2}).attr("y2",function(){return z(-2)}).merge(F).attr("transform",function(D,G){return"translate("+E(G)+", 0)"});const $=F.selectAll(".points_stop").data(function(D){return it(L[D].point)});$.exit().remove(),$.enter().append("stop").attr("class","points_stop").attr("offset",function(D){return D.offset}).attr("stop-color",function(D){return D.color}).merge($).attr("offset",function(D){return D.offset});const B=N.selectAll("."+s.class+"Bar").data(Vt(L.length));B.exit().transition().duration(y?0:s.display.transition_time).attr("opacity","0").remove(),B.enter().append("line").attr("class",s.class+"Bar").attr("opacity","0").merge(B).attr("opacity","0").attr("transform",function(D,G){return"translate("+E(G)+", 0)"}).attr("x1",function(){return j.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return j.bandwidth()/2}).attr("y2",function(){return z(-2)}).attr("stroke-width",function(){return j.bandwidth()}).attr("stroke",function(D,G){return"url(#gradient"+s.id+G+")"}).attr("uid",function(D,G){return"point"+G}).on("mousemove",function(D,G,lt){s.display.point_highlighting&&ft(lt[G]).attr("opacity",s.display.point_opacity),s.display.game_highlighting&&L[G]&&ft('[id="'+s.class+s.id+"game"+L[G].point.game+'"]').attr("opacity",s.display.game_opacity),l.point_bars.mouseover&&l.point_bars.mouseover(L[D],G),D==0&&N.selectAll("."+s.class+"Bar").attr("opacity",s.display.point_opacity)}).on("mouseout",function(D,G){N.selectAll("."+s.class+"Bar").attr("opacity",0),k.selectAll("."+s.class+"Game").attr("opacity","0"),l.point_bars.mouseout&&l.point_bars.mouseout(L[D],G),ct()}).on("click",function(D,G,lt){l.point_bars.click&&l.point_bars.click(L[D],G,lt[G])});function ct(D){const G=t.winner(),lt=t.metadata.players();function w(ae){const Qe=ae.split(" ");return Qe[Qe.length-1]}const tt=G!=null?lt[G].name:`${w(lt[0].name)}/${w(lt[1].name)}`;I.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(tt);const Lt=t.scoreboard(G);v.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",G!=null?s.colors.players[G]:"black").text(Lt)}function it(D){let G=0,lt=0,w=0;if(s.display.win_err_highlight){console.log("calcstops:",D);const tt=D.rally,Lt=D.result,ae=tt?100-Math.floor(tt.length/K*100):100;r.indexOf(Lt)>=0?G=ae:i.indexOf(Lt)>=0?lt=ae:w=ae}return[{offset:"0%",color:"blue"},{offset:w+"%",color:"blue"},{offset:w+"%",color:"green"},{offset:w+G+"%",color:"green"},{offset:w+G+"%",color:"red"},{offset:w+G+lt+"%",color:"red"},{offset:w+G+lt+"%",color:s.colors.orientation},{offset:"100%",color:s.colors.orientation}]}}})}function u(p,m){for(const g of p)g._i=m;return p}function f(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return t.complete()?p:p<s.set.average_points?s.set.average_points:p}function h(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return Math.max(p,s.points.max_width_points,s.set.average_points)}function d(p){const m=[{points:[],range:[0,0]}];let g=0,x=0;return p.forEach(A=>{const k=A.point;k.game!=x&&(g+=1,x=k.game,m[g]={points:[],range:[k.index,k.index]}),m[g].points.push(k),m[g].index=g,m[g].set=A.set.index,m[g].score=A.game.games,m[g].complete=A.game.complete,m[g].range[1]=k.index,A.game.complete&&(m[g].winner=k.winner)}),m}return c.options=function(p){if(!arguments.length)return s;const m=Object.keys(p),g=Object.keys(s);for(const x of m)if(g.indexOf(x)>=0)if(typeof s[x]=="object"){const A=Object.keys(p[x]),k=Object.keys(s[x]);for(const N of A)k.indexOf(N)>=0&&(s[x][N]=p[x][N])}else s[x]=p[x];return c},c.data=function(p){if(!arguments.length)return t;t=p},c.events=function(p){if(!arguments.length)return l;const m=Object.keys(p),g=Object.keys(l);for(const x of m)g.indexOf(x)>=0&&(l[x]=p[x]);return c},c.colors=function(p){return arguments.length?(s.colors.players=p,c):s.colors},c.width=function(p){return arguments.length?(s.width=p,c):s.width},c.height=function(p){return arguments.length?(s.height=p,c):s.height},c.update=function(p){return l.update.begin&&l.update.begin(),typeof o=="function"&&o(p),setTimeout(function(){l.update.end&&l.update.end()},s.display.transition_time),!0},c.duration=function(p){return arguments.length?(s.display.transition_time=p,c):s.display.transition_time},c}function Pg(){let t=["#a55194","#6b6ecf"];at.mc=Og(),at.mc.options({display:{sizeToFit:!1,continuous:!1,orientation:"vertical",transition_time:0,service:!1,rally:!0,player:!1,grid:!1,score:!0},colors:t}),at.mc.events({score:{click:Ig}}),ft("#momentumChart").call(at.mc),t={players:["#a55194","#6b6ecf"]},at.gamefish=ql(),at.gamefish.options({display:{sizeToFit:!0},colors:t}),ft("#gameFishChart").call(at.gamefish),at.gametree=Ng();const e={display:{sizeToFit:!0},lines:{points:{winners:"green",errors:"#BA1212",unknown:"#2ed2db"},colors:{underlines:"black"}},nodes:{colors:{0:t.players[0],1:t.players[1],neutral:"#ecf0f1"}},selectors:{enabled:!0,selected:{0:!1,1:!1}}};at.gametree.options(e),ft("#gameTreeChart").call(at.gametree),at.pts_match=Rg(),at.pts_match.options({margins:{top:40,bottom:20},display:{sizeToFit:!0}}),at.pts_match.data(b.match),ft("#PTSChart").call(at.pts_match)}function Ig(t){io(t.index)}function Dg(){const t=document.getElementById("gamefish");t&&(t.style.display="none")}function io(t){const e=document.getElementById("gamefish");e&&(e.style.display="flex");const n=Ss(),r=t!=null?n[t]:n[n.length-1],i=r.points[0].tiebreak?["0","1","2","3","4","5","6","7"]:["0","15","30","40","G"];at.gamefish.options({display:{reverse:b.swap_sides},fish:{gridcells:i,cell_size:20},score:r.score}),at.gamefish.data(r.points).update(),window.scrollTo(0,0)}function Gl(){const t=b.orientation=="landscape"?"horizontal":"vertical";b.view=="pts"&&t=="vertical"?(mt("none","pts"),mt("inline","momentum"),at.mc.width(window.innerWidth).height(820),at.mc.update(),b.view="momentum"):b.view=="momentum"&&t=="horizontal"&&(mt("none","momentum"),mt("flex","pts"),at.pts_match.update({sizeToFit:!0}),b.view="pts"),at.gamefish&&at.gamefish.update();const e=b.match.metadata.players();at.gametree&&(at.gametree.options({labels:{Player:e[0].name,Opponent:e[1].name}}),at.gametree.update({sizeToFit:!0}))}function Da(){yc(),Gl(),bt()}function Bg(){document.oncontextmenu=()=>!1,window.addEventListener("contextmenu",t=>{t.preventDefault()},!1),window.onunhandledrejection=t=>{t.preventDefault();const e=t.reason,n=e&&(e.stack||e);n&&n.indexOf("blocked")>0?console.warn("popup blocked"):console.warn("Unhandled rejection:",e&&(e.stack||e))}}const so="@VERSION@";function Fg(){console.log(`%cversion: ${so}`,"color: lightblue");const t=rt.get("mobile-provider");if(t){b.provider=t;const e=document.getElementById("provider");e&&(e.value=t)}Bg()}function oo(){return"tmxToken"}function Ug(){let t,e,n=50,r=1e3;const i="black";let s=5,o=10,a=150,l=["white","blue"];const c={top:0,right:0,bottom:0,left:0};function u(f){const h=f.node().getBoundingClientRect();if((!e||!t)&&(n=Math.min(t||h.width,h.width,e||h.height,h.height)*.45,o=n/3),t=t||h.width,e=e||h.height,!e||!t)return;const d=ie().domain([100,0]).range(l).interpolate(Pd),p=function(A){return d(Math.abs(A%20-10))},m=Dm().domain(Vt(s)).range([0,e]);f.append("svg").attr("width",t).attr("height",e).append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(m.domain()).enter().append("circle").attr("fill","#000").attr("stroke",i).attr("stroke-width",o+"px").attr("r",0).attr("cx",t/2).attr("cy",e/2).style("fill",p).on("click",lu).transition().duration(r).delay(A=>A*a).on("start",function A(k,N,I){Fp(I[N]).attr("r",n).attr("stroke-width","0px").transition().attr("r",0).attr("stroke-width",o+"px").transition().on("start",A)})}return u.height=f=>f?(e=f,u):e,u.width=f=>f?(t=f,u):t,u.duration=f=>f?(r=f,u):r,u.pulse_circles=f=>f?(s=f,u):s,u.radius=f=>f?(n=f,u):n,u.delay_multiplier=f=>f?(a=f,u):a,u.stroke_width=f=>f?(o=f,u):o,u.color_range=f=>f?(l=f,u):l,u}const Qt=Object.create(null);Qt.open="0";Qt.close="1";Qt.ping="2";Qt.pong="3";Qt.message="4";Qt.upgrade="5";Qt.noop="6";const lr=Object.create(null);Object.keys(Qt).forEach(t=>{lr[Qt[t]]=t});const us={type:"error",data:"parser error"},Wl=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Vl=typeof ArrayBuffer=="function",Yl=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ao=({type:t,data:e},n,r)=>Wl&&e instanceof Blob?n?r(e):Ba(e,r):Vl&&(e instanceof ArrayBuffer||Yl(e))?n?r(e):Ba(new Blob([e]),r):r(Qt[t]+(e||"")),Ba=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Fa(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Oi;function Hg(t,e){if(Wl&&t.data instanceof Blob)return t.data.arrayBuffer().then(Fa).then(e);if(Vl&&(t.data instanceof ArrayBuffer||Yl(t.data)))return e(Fa(t.data));ao(t,!1,n=>{Oi||(Oi=new TextEncoder),e(Oi.encode(n))})}const Ua="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ua.length;t++)vn[Ua.charCodeAt(t)]=t;const $g=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=vn[t.charCodeAt(r)],o=vn[t.charCodeAt(r+1)],a=vn[t.charCodeAt(r+2)],l=vn[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},zg=typeof ArrayBuffer=="function",co=(t,e)=>{if(typeof t!="string")return{type:"message",data:jl(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:qg(t.substring(1),e)}:lr[n]?t.length>1?{type:lr[n],data:t.substring(1)}:{type:lr[n]}:us},qg=(t,e)=>{if(zg){const n=$g(t);return jl(n,e)}else return{base64:!0,data:t}},jl=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Kl="",Gg=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{ao(s,!1,a=>{r[o]=a,++i===n&&e(r.join(Kl))})})},Wg=(t,e)=>{const n=t.split(Kl),r=[];for(let i=0;i<n.length;i++){const s=co(n[i],e);if(r.push(s),s.type==="error")break}return r};function Vg(){return new TransformStream({transform(t,e){Hg(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Ni;function Zn(t){return t.reduce((e,n)=>e+n.length,0)}function Qn(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Yg(t,e){Ni||(Ni=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Zn(n)<1)break;const l=Qn(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Zn(n)<2)break;const l=Qn(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Zn(n)<8)break;const l=Qn(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(us);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Zn(n)<i)break;const l=Qn(n,i);a.enqueue(co(s?l:Ni.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(us);break}}}})}const Jl=4;function _t(t){if(t)return jg(t)}function jg(t){for(var e in _t.prototype)t[e]=_t.prototype[e];return t}_t.prototype.on=_t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};_t.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};_t.prototype.off=_t.prototype.removeListener=_t.prototype.removeAllListeners=_t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};_t.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};_t.prototype.emitReserved=_t.prototype.emit;_t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};_t.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Bt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Xl(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Kg=Bt.setTimeout,Jg=Bt.clearTimeout;function ii(t,e){e.useNativeTimers?(t.setTimeoutFn=Kg.bind(Bt),t.clearTimeoutFn=Jg.bind(Bt)):(t.setTimeoutFn=Bt.setTimeout.bind(Bt),t.clearTimeoutFn=Bt.clearTimeout.bind(Bt))}const Xg=1.33;function Zg(t){return typeof t=="string"?Qg(t):Math.ceil((t.byteLength||t.size)*Xg)}function Qg(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function ty(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function ey(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class ny extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class lo extends _t{constructor(e){super(),this.writable=!1,ii(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new ny(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=co(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=ty(e);return n.length?"?"+n:""}}const Zl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),fs=64,ry={};let Ha=0,tr=0,$a;function za(t){let e="";do e=Zl[t%fs]+e,t=Math.floor(t/fs);while(t>0);return e}function Ql(){const t=za(+new Date);return t!==$a?(Ha=0,$a=t):t+"."+za(Ha++)}for(;tr<fs;tr++)ry[Zl[tr]]=tr;let tu=!1;try{tu=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const iy=tu;function eu(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||iy))return new XMLHttpRequest}catch{}if(!e)try{return new Bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function sy(){}const oy=function(){return new eu({xdomain:!1}).responseType!=null}();class ay extends lo{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=oy&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Wg(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Gg(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Ql()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Jt(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Jt extends _t{constructor(e,n){super(),ii(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Xl(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new eu(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=Jt.requestsCount++,Jt.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=sy,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Jt.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Jt.requestsCount=0;Jt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",qa);else if(typeof addEventListener=="function"){const t="onpagehide"in Bt?"pagehide":"unload";addEventListener(t,qa,!1)}}function qa(){for(let t in Jt.requests)Jt.requests.hasOwnProperty(t)&&Jt.requests[t].abort()}const uo=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),er=Bt.WebSocket||Bt.MozWebSocket,Ga=!0,cy="arraybuffer",Wa=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ly extends lo{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Wa?{}:Xl(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Ga&&!Wa?n?new er(e,n):new er(e):new er(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;ao(r,this.supportsBinary,s=>{const o={};try{Ga&&this.ws.send(s)}catch{}i&&uo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Ql()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!er}}class uy extends lo{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=Yg(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Vg();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&uo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const fy={websocket:ly,webtransport:uy,polling:ay},hy=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hs(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=hy.exec(t||""),s={},o=14;for(;o--;)s[dy[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=py(s,s.path),s.queryKey=my(s,s.query),s}function py(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function my(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let nu=class Ne extends _t{constructor(e,n={}){super(),this.binaryType=cy,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=hs(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=hs(n.host).host),ii(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ey(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Jl,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new fy[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Ne.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;Ne.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ne.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Ne.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Zg(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Ne.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};nu.protocol=Jl;function gy(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hs(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const yy=typeof ArrayBuffer=="function",_y=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,ru=Object.prototype.toString,vy=typeof Blob=="function"||typeof Blob<"u"&&ru.call(Blob)==="[object BlobConstructor]",by=typeof File=="function"||typeof File<"u"&&ru.call(File)==="[object FileConstructor]";function fo(t){return yy&&(t instanceof ArrayBuffer||_y(t))||vy&&t instanceof Blob||by&&t instanceof File}function ur(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(ur(t[n]))return!0;return!1}if(fo(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ur(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&ur(t[n]))return!0;return!1}function wy(t){const e=[],n=t.data,r=t;return r.data=ds(n,e),r.attachments=e.length,{packet:r,buffers:e}}function ds(t,e){if(!t)return t;if(fo(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=ds(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=ds(t[r],e));return n}return t}function xy(t,e){return t.data=ps(t.data,e),delete t.attachments,t}function ps(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ps(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ps(t[n],e));return t}const ky=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ay=5;var st;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(st||(st={}));class Ey{constructor(e){this.replacer=e}encode(e){return(e.type===st.EVENT||e.type===st.ACK)&&ur(e)?this.encodeAsBinary({type:e.type===st.EVENT?st.BINARY_EVENT:st.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===st.BINARY_EVENT||e.type===st.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=wy(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Va(t){return Object.prototype.toString.call(t)==="[object Object]"}class ho extends _t{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===st.BINARY_EVENT;r||n.type===st.BINARY_ACK?(n.type=r?st.EVENT:st.ACK,this.reconstructor=new Sy(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(fo(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(st[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===st.BINARY_EVENT||r.type===st.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(ho.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case st.CONNECT:return Va(n);case st.DISCONNECT:return n===void 0;case st.CONNECT_ERROR:return typeof n=="string"||Va(n);case st.EVENT:case st.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&ky.indexOf(n[0])===-1);case st.ACK:case st.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Sy{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=xy(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ty=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ho,Encoder:Ey,get PacketType(){return st},protocol:Ay},Symbol.toStringTag,{value:"Module"}));function Ut(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Cy=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class iu extends _t{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ut(e,"open",this.onopen.bind(this)),Ut(e,"packet",this.onpacket.bind(this)),Ut(e,"error",this.onerror.bind(this)),Ut(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(Cy.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:st.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...o])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((o,a)=>r?o?s(o):i(a):i(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:st.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case st.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case st.EVENT:case st.BINARY_EVENT:this.onevent(e);break;case st.ACK:case st.BINARY_ACK:this.onack(e);break;case st.DISCONNECT:this.ondisconnect();break;case st.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:st.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:st.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ke(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ke.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ke.prototype.reset=function(){this.attempts=0};Ke.prototype.setMin=function(t){this.ms=t};Ke.prototype.setMax=function(t){this.max=t};Ke.prototype.setJitter=function(t){this.jitter=t};class ms extends _t{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ii(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ke({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Ty;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new nu(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Ut(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ut(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ut(e,"ping",this.onping.bind(this)),Ut(e,"data",this.ondata.bind(this)),Ut(e,"error",this.onerror.bind(this)),Ut(e,"close",this.onclose.bind(this)),Ut(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){uo(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new iu(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fn={};function fr(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=gy(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=fn[i]&&s in fn[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new ms(r,e):(fn[i]||(fn[i]=new ms(r,e)),l=fn[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(fr,{Manager:ms,Socket:iu,io:fr,connect:fr});function My(){const t=rt.get(oo());return t?{authorization:`Bearer ${t}`}:void 0}const dt={socket:void 0};function Je(){if((navigator.onLine||window.location.hostname=="localhost")&&!dt.socket){const e=`${window.location.hostname.startsWith("localhost")||window.location.hostname==="127.0.0.1"?"http://127.0.0.1:8383":window.location.hostname}/mobile`,n={transportOptions:{polling:{extraHeaders:My()}},reconnectionAttempts:"Infinity","force new connection":!0,reconnectionDelay:1e3,timeout:2e4};dt.socket=fr(e,n),dt.socket&&(dt.socket.on("connect",Oy),dt.socket.on("ack",r=>console.log({ack:r})),dt.socket.on("disconnect",Ny),dt.socket.on("connect_error",Ry),dt.socket.on("history request",po),dt.socket.on("tmx message",Ly),dt.socket.on("exception",r=>console.log(r)),dt.socket.on("success",r=>console.log(r)))}}function si(){dt.socket&&(dt.socket.disconnect(),dt.socket=void 0)}function po(){if(Je(),dt.socket){const t=b.match.metadata.defineMatch(),e={matchUp:{tournament:b.match.metadata.defineTournament(),first_service:b.match.set.firstService(),players:b.match.metadata.players(),format:b.match.format.settings(),scoreboard:b.match.scoreboard(),points:b.match.history.points(),provider:b.provider,matchUpId:t.muid,ch_version:so,match:t}};t.muid&&dt.socket.emit("mh",{type:"history",payload:e})}Ae()}function Oy(){console.log("connect")}function Ny(){console.log("socket closed")}function Ry(){zt(" <p> <h1>No Internet Connection!</h1>"),au()}function Ly(t){if(!(t!=null&&t.matchUpId))return zt("<h2>Invalid Data</h2>");const e=Qu(t.data);he(),Os(e.match.muid),b.match.metadata.defineTournament({name:e.tournament.name,tuid:e.tournament.tuid,start_date:tf(e.tournament.start)}),b.match.metadata.defineMatch({euid:e.event.euid});const n=e.teams&&e.teams[0].length===2?"doubles":"singles",r=Xu({sides:e.teams,format:n});b.match.metadata.definePlayer({index:0,name:r[0]}),b.match.metadata.definePlayer({index:1,name:r[1]});const i=e.event.surface;if(i){const o={C:"clay",H:"hard",G:"grass"};o[i]&&b.match.metadata.defineTournament({surface:o[i]})}const s=e.event.inout;if(s){const o={o:"out",i:"in"};o[s]&&b.match.metadata.defineTournament({in_out:o[s]})}Gr(),oe(),bt("entry")}function su(){return Tt.broadcast&&dt.socket?!0:(Tt.broadcast&&Je(),!1)}function ou(){Je();const t=Ug().color_range(["white","white"]).height(60).width(60).radius(28).stroke_width(5);ft("#startpulse").style("display","none"),ft("#pulse").style("display","block").call(t)}function au(){Tt.broadcast=!1,ft("#startpulse").style("display","flex"),ft("#pulse").style("display","none").selectAll("svg").remove(),si()}function cu(t){Object.assign(t,{timestamp:new Date().getTime(),uuuid:Tt.user_uuid}),dt.socket?(dt.socket.emit("mh",{type:"key",payload:t}),Ae()):zt(" <p> <h1>Not connected</h1> <p><i>Connection Error</i></p> </p> ")}function lu(){Tt.broadcast=!Tt.broadcast,Tt.broadcast?ou():au(),Es()}function Ya(t){if(su()){const n={muid:b.match.metadata.defineMatch().muid,status:t},r=b.match.metadata.defineTournament();n.tuid=r.tuid||r.name,dt.socket.emit("mh",{type:"status",payload:n})}}class bn extends Error{}bn.prototype.name="InvalidTokenError";function Py(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Iy(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Py(e)}catch{return atob(e)}}function Dy(t,e){if(typeof t!="string")throw new bn("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new bn(`Invalid token specified: missing part #${n+1}`);let i;try{i=Iy(r)}catch(s){throw new bn(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new bn(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}function By(t){if(!t||t==="undefined")return;const e=Dy(t),n=new Date;if(!((e==null?void 0:e.exp)<n.getTime()/1e3))return e}const uu=oo();function Fy(){rt.remove(uu),dt.socket&&(si(),Je())}function Uy({data:t}){By(t.token)&&(rt.set(uu,t.token),si(),Je(),console.log({intent:"is-success",message:"Login successful"}))}function fu(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hy}=Object.prototype,{getPrototypeOf:mo}=Object,oi=(t=>e=>{const n=Hy.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),te=t=>(t=t.toLowerCase(),e=>oi(e)===t),ai=t=>e=>typeof e===t,{isArray:Xe}=Array,Ln=ai("undefined");function $y(t){return t!==null&&!Ln(t)&&t.constructor!==null&&!Ln(t.constructor)&&Ft(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hu=te("ArrayBuffer");function zy(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hu(t.buffer),e}const qy=ai("string"),Ft=ai("function"),du=ai("number"),ci=t=>t!==null&&typeof t=="object",Gy=t=>t===!0||t===!1,hr=t=>{if(oi(t)!=="object")return!1;const e=mo(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Wy=te("Date"),Vy=te("File"),Yy=te("Blob"),jy=te("FileList"),Ky=t=>ci(t)&&Ft(t.pipe),Jy=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ft(t.append)&&((e=oi(t))==="formdata"||e==="object"&&Ft(t.toString)&&t.toString()==="[object FormData]"))},Xy=te("URLSearchParams"),Zy=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bn(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Xe(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function pu(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const mu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gu=t=>!Ln(t)&&t!==mu;function gs(){const{caseless:t}=gu(this)&&this||{},e={},n=(r,i)=>{const s=t&&pu(e,i)||i;hr(e[s])&&hr(r)?e[s]=gs(e[s],r):hr(r)?e[s]=gs({},r):Xe(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Bn(arguments[r],n);return e}const Qy=(t,e,n,{allOwnKeys:r}={})=>(Bn(e,(i,s)=>{n&&Ft(i)?t[s]=fu(i,n):t[s]=i},{allOwnKeys:r}),t),t_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),e_=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},n_=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&mo(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},r_=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},i_=t=>{if(!t)return null;if(Xe(t))return t;let e=t.length;if(!du(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},s_=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&mo(Uint8Array)),o_=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},a_=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},c_=te("HTMLFormElement"),l_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ja=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),u_=te("RegExp"),yu=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Bn(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},f_=t=>{yu(t,(e,n)=>{if(Ft(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ft(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},h_=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Xe(t)?r(t):r(String(t).split(e)),n},d_=()=>{},p_=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Ri="abcdefghijklmnopqrstuvwxyz",Ka="0123456789",_u={DIGIT:Ka,ALPHA:Ri,ALPHA_DIGIT:Ri+Ri.toUpperCase()+Ka},m_=(t=16,e=_u.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function g_(t){return!!(t&&Ft(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const y_=t=>{const e=new Array(10),n=(r,i)=>{if(ci(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Xe(r)?[]:{};return Bn(r,(o,a)=>{const l=n(o,i+1);!Ln(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},__=te("AsyncFunction"),v_=t=>t&&(ci(t)||Ft(t))&&Ft(t.then)&&Ft(t.catch),P={isArray:Xe,isArrayBuffer:hu,isBuffer:$y,isFormData:Jy,isArrayBufferView:zy,isString:qy,isNumber:du,isBoolean:Gy,isObject:ci,isPlainObject:hr,isUndefined:Ln,isDate:Wy,isFile:Vy,isBlob:Yy,isRegExp:u_,isFunction:Ft,isStream:Ky,isURLSearchParams:Xy,isTypedArray:s_,isFileList:jy,forEach:Bn,merge:gs,extend:Qy,trim:Zy,stripBOM:t_,inherits:e_,toFlatObject:n_,kindOf:oi,kindOfTest:te,endsWith:r_,toArray:i_,forEachEntry:o_,matchAll:a_,isHTMLForm:c_,hasOwnProperty:ja,hasOwnProp:ja,reduceDescriptors:yu,freezeMethods:f_,toObjectSet:h_,toCamelCase:l_,noop:d_,toFiniteNumber:p_,findKey:pu,global:mu,isContextDefined:gu,ALPHABET:_u,generateString:m_,isSpecCompliantForm:g_,toJSONObject:y_,isAsyncFn:__,isThenable:v_};function ot(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}P.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vu=ot.prototype,bu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bu[t]={value:t}});Object.defineProperties(ot,bu);Object.defineProperty(vu,"isAxiosError",{value:!0});ot.from=(t,e,n,r,i,s)=>{const o=Object.create(vu);return P.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ot.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const b_=null;function ys(t){return P.isPlainObject(t)||P.isArray(t)}function wu(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function Ja(t,e,n){return t?t.concat(e).map(function(i,s){return i=wu(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function w_(t){return P.isArray(t)&&!t.some(ys)}const x_=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function li(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!P.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(P.isDate(p))return p.toISOString();if(!l&&P.isBlob(p))throw new ot("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(p)||P.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let x=p;if(p&&!g&&typeof p=="object"){if(P.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(P.isArray(p)&&w_(p)||(P.isFileList(p)||P.endsWith(m,"[]"))&&(x=P.toArray(p)))return m=wu(m),x.forEach(function(k,N){!(P.isUndefined(k)||k===null)&&e.append(o===!0?Ja([m],N,s):o===null?m:m+"[]",c(k))}),!1}return ys(p)?!0:(e.append(Ja(g,m,s),c(p)),!1)}const f=[],h=Object.assign(x_,{defaultVisitor:u,convertValue:c,isVisitable:ys});function d(p,m){if(!P.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),P.forEach(p,function(x,A){(!(P.isUndefined(x)||x===null)&&i.call(e,x,P.isString(A)?A.trim():A,m,h))===!0&&d(x,m?m.concat(A):[A])}),f.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return d(t),e}function Xa(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function go(t,e){this._pairs=[],t&&li(t,this,e)}const xu=go.prototype;xu.append=function(e,n){this._pairs.push([e,n])};xu.toString=function(e){const n=e?function(r){return e.call(this,r,Xa)}:Xa;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function k_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ku(t,e,n){if(!e)return t;const r=n&&n.encode||k_,i=n&&n.serialize;let s;if(i?s=i(e,n):s=P.isURLSearchParams(e)?e.toString():new go(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class A_{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Za=A_,Au={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E_=typeof URLSearchParams<"u"?URLSearchParams:go,S_=typeof FormData<"u"?FormData:null,T_=typeof Blob<"u"?Blob:null,C_={isBrowser:!0,classes:{URLSearchParams:E_,FormData:S_,Blob:T_},protocols:["http","https","file","blob","url","data"]},Eu=typeof window<"u"&&typeof document<"u",M_=(t=>Eu&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),O_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",N_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Eu,hasStandardBrowserEnv:M_,hasStandardBrowserWebWorkerEnv:O_},Symbol.toStringTag,{value:"Module"})),Yt={...N_,...C_};function R_(t,e){return li(t,new Yt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Yt.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function L_(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function P_(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Su(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&P.isArray(i)?i.length:o,l?(P.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!P.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&P.isArray(i[o])&&(i[o]=P_(i[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,i)=>{e(L_(r),i,n,0)}),n}return null}function I_(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const yo={transitional:Au,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(e);if(s&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return i&&i?JSON.stringify(Su(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return R_(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return li(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),I_(e)):e}],transformResponse:[function(e){const n=this.transitional||yo.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ot.from(a,ot.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yt.classes.FormData,Blob:Yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{yo.headers[t]={}});const _o=yo,D_=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B_=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&D_[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Qa=Symbol("internals");function hn(t){return t&&String(t).trim().toLowerCase()}function dr(t){return t===!1||t==null?t:P.isArray(t)?t.map(dr):String(t)}function F_(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const U_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Li(t,e,n,r,i){if(P.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function H_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $_(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class ui{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=hn(l);if(!u)throw new Error("header name must be a non-empty string");const f=P.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=dr(a))}const o=(a,l)=>P.forEach(a,(c,u)=>s(c,u,l));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!U_(e)?o(B_(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=hn(e),e){const r=P.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return F_(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=hn(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Li(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=hn(o),o){const a=P.findKey(r,o);a&&(!n||Li(r,r[a],a,n))&&(delete r[a],i=!0)}}return P.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Li(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return P.forEach(this,(i,s)=>{const o=P.findKey(r,s);if(o){n[o]=dr(i),delete n[s];return}const a=e?H_(s):String(s).trim();a!==s&&delete n[s],n[a]=dr(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Qa]=this[Qa]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=hn(o);r[a]||($_(i,o),r[a]=!0)}return P.isArray(e)?e.forEach(s):s(e),this}}ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(ui.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});P.freezeMethods(ui);const se=ui;function Pi(t,e){const n=this||_o,r=e||n,i=se.from(r.headers);let s=r.data;return P.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Tu(t){return!!(t&&t.__CANCEL__)}function Fn(t,e,n){ot.call(this,t??"canceled",ot.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Fn,ot,{__CANCEL__:!0});function z_(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ot("Request failed with status code "+n.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const q_=Yt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];P.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),P.isString(r)&&o.push("path="+r),P.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function G_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function W_(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Cu(t,e){return t&&!G_(e)?W_(t,e):e}const V_=Yt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=P.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function Y_(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function j_(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,h=0;for(;f!==i;)h+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function tc(t,e){let n=0;const r=j_(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const K_=typeof XMLHttpRequest<"u",J_=K_&&function(t){return new Promise(function(n,r){let i=t.data;const s=se.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(P.isFormData(i)){if(Yt.hasStandardBrowserEnv||Yt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[m,...g]=u?u.split(";").map(x=>x.trim()).filter(Boolean):[];s.setContentType([m||"multipart/form-data",...g].join("; "))}}let f=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+g))}const h=Cu(t.baseURL,t.url);f.open(t.method.toUpperCase(),ku(h,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function d(){if(!f)return;const m=se.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:m,config:t,request:f};z_(function(k){n(k),c()},function(k){r(k),c()},x),f=null}if("onloadend"in f?f.onloadend=d:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(d)},f.onabort=function(){f&&(r(new ot("Request aborted",ot.ECONNABORTED,t,f)),f=null)},f.onerror=function(){r(new ot("Network Error",ot.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||Au;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new ot(g,x.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,t,f)),f=null},Yt.hasStandardBrowserEnv&&(a&&P.isFunction(a)&&(a=a(t)),a||a!==!1&&V_(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&q_.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}i===void 0&&s.setContentType(null),"setRequestHeader"in f&&P.forEach(s.toJSON(),function(g,x){f.setRequestHeader(x,g)}),P.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),o&&o!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",tc(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",tc(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{f&&(r(!m||m.type?new Fn(null,t,f):m),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=Y_(h);if(p&&Yt.protocols.indexOf(p)===-1){r(new ot("Unsupported protocol "+p+":",ot.ERR_BAD_REQUEST,t));return}f.send(i||null)})},_s={http:b_,xhr:J_};P.forEach(_s,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ec=t=>`- ${t}`,X_=t=>P.isFunction(t)||t===null||t===!1,Mu={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!X_(n)&&(r=_s[(o=String(n)).toLowerCase()],r===void 0))throw new ot(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ec).join(`
`):" "+ec(s[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:_s};function Ii(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fn(null,t)}function nc(t){return Ii(t),t.headers=se.from(t.headers),t.data=Pi.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Mu.getAdapter(t.adapter||_o.adapter)(t).then(function(r){return Ii(t),r.data=Pi.call(t,t.transformResponse,r),r.headers=se.from(r.headers),r},function(r){return Tu(r)||(Ii(t),r&&r.response&&(r.response.data=Pi.call(t,t.transformResponse,r.response),r.response.headers=se.from(r.response.headers))),Promise.reject(r)})}const rc=t=>t instanceof se?t.toJSON():t;function Ve(t,e){e=e||{};const n={};function r(c,u,f){return P.isPlainObject(c)&&P.isPlainObject(u)?P.merge.call({caseless:f},c,u):P.isPlainObject(u)?P.merge({},u):P.isArray(u)?u.slice():u}function i(c,u,f){if(P.isUndefined(u)){if(!P.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!P.isUndefined(u))return r(void 0,u)}function o(c,u){if(P.isUndefined(u)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(rc(c),rc(u),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||i,h=f(t[u],e[u],u);P.isUndefined(h)&&f!==a||(n[u]=h)}),n}const Ou="1.6.5",vo={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vo[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ic={};vo.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Ou+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ot(i(o," has been removed"+(n?" in "+n:"")),ot.ERR_DEPRECATED);return n&&!ic[o]&&(ic[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Z_(t,e,n){if(typeof t!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ot("option "+s+" must be "+l,ot.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ot("Unknown option "+s,ot.ERR_BAD_OPTION)}}const vs={assertOptions:Z_,validators:vo},le=vs.validators;class Br{constructor(e){this.defaults=e,this.interceptors={request:new Za,response:new Za}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ve(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&vs.assertOptions(r,{silentJSONParsing:le.transitional(le.boolean),forcedJSONParsing:le.transitional(le.boolean),clarifyTimeoutError:le.transitional(le.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:vs.assertOptions(i,{encode:le.function,serialize:le.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&P.merge(s.common,s[n.method]);s&&P.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=se.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!l){const p=[nc.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),h=p.length,u=Promise.resolve(n);f<h;)u=u.then(p[f++],p[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const p=a[f++],m=a[f++];try{d=p(d)}catch(g){m.call(this,g);break}}try{u=nc.call(this,d)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Ve(this.defaults,e);const n=Cu(e.baseURL,e.url);return ku(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){Br.prototype[e]=function(n,r){return this.request(Ve(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Ve(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Br.prototype[e]=n(),Br.prototype[e+"Form"]=n(!0)});const pr=Br;class bo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Fn(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new bo(function(i){e=i}),cancel:e}}}const Q_=bo;function tv(t){return function(n){return t.apply(null,n)}}function ev(t){return P.isObject(t)&&t.isAxiosError===!0}const bs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bs).forEach(([t,e])=>{bs[e]=t});const nv=bs;function Nu(t){const e=new pr(t),n=fu(pr.prototype.request,e);return P.extend(n,pr.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Nu(Ve(t,i))},n}const vt=Nu(_o);vt.Axios=pr;vt.CanceledError=Fn;vt.CancelToken=Q_;vt.isCancel=Tu;vt.VERSION=Ou;vt.toFormData=li;vt.AxiosError=ot;vt.Cancel=vt.CanceledError;vt.all=function(e){return Promise.all(e)};vt.spread=tv;vt.isAxiosError=ev;vt.mergeConfig=Ve;vt.AxiosHeaders=se;vt.formToJSON=t=>Su(P.isHTMLForm(t)?new FormData(t):t);vt.getAdapter=Mu.getAdapter;vt.HttpStatusCode=nv;vt.default=vt;const rv=vt,Ru=oo(),iv="http://localhost:8383",Un=rv.create({baseURL:iv});Un.interceptors.request.use(t=>{const e=rt.get(Ru);return e&&(t.headers.common.authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Un.interceptors.response.use(t=>t,t=>{var e;if(t.message==="Network Error"&&console.log({message:t.message,intent:"is-danger"}),t.response){((e=t.response)==null?void 0:e.status)===401&&Lu();const n=t.response.data.message||t.response.data.error||t.response.data;console.log({message:n,intent:"is-danger"})}});const sv=()=>{const t=rt.get(Ru);t&&(Un.defaults.headers.common.authorization=`Bearer ${t}`)},Lu=()=>{Un.defaults.headers.common.authorization=void 0},ov={...Un,removeAuthorization:Lu,addAuthorization:sv};async function av(t,e){return ov.post("/auth/login",{password:e,email:t})}function cv({email:t,password:e}){const n=r=>{(r==null?void 0:r.status)===200&&Uy(r)};av(t,e).then(n,r=>console.log({err:r}))}function lv(){window.dev={submitCredentials:cv,disconnectSocket:si,connectSocket:Je,sendHistory:po,viewManager:bt,version:so,logOut:Fy,coms:dt,app:Tt,env:b}}function Pu(){const t={};let e=["surface","in_out","draw","draw_size","round"];e.forEach(n=>{const r=`tournament_${n}`,i=document.getElementById(r);if(i.selectedIndex>=0){const s=i.options[i.selectedIndex].value;s&&(t[n]=s)}}),e=["name","start_date","tour","rank"],e.forEach(n=>{const i=document.getElementById(`tournament_${n}`).value;i&&(t[n]=i.trim())}),b.match.metadata.defineTournament(t),he()}function Iu(){const t={};["court","umpire"].forEach(n=>{const i=document.getElementById(`match_${n}`).value;i&&(t[n]=i)}),b.match.metadata.defineMatch(t),he()}function uv(){Pu(),Iu();const e=document.getElementById("provider").value;b.provider=e,e&&rt.set("mobile-provider",e)}let Du;const yt={elapsed:1e5,held:void 0,touched:void 0,holdTime:800,holdAction:void 0,holdActions:{}},Pn={};let Nt={};const fv=(t,e)=>t.filter(n=>e.indexOf(n)!==-1).filter((n,r,i)=>i.indexOf(n)===r);yt.reset=()=>(Nt={},yt);yt.register=(t,e,n,r)=>(typeof n=="function"&&(Nt[e]||(Nt[e]={},Pn[e]=[]),Nt[e][t]={fx:n,delay:r},Pn[e]=Object.keys(Nt[e])),yt);yt.deRegister=(t,e)=>(Nt[e]&&(delete Nt[e][t],Pn[e]=Object.keys(Nt[e])),yt);yt.call=(t,e,...n)=>{var r,i;return(i=(r=Nt==null?void 0:Nt[e])==null?void 0:r[t])==null?void 0:i.fx(...n)};yt.trigger=(t,e,n,r)=>Nt[e][t].fx(n,r,e);yt.list=()=>console.log(Nt);const hv="ontouchstart"in document.documentElement?"touchstart":"click";document.addEventListener(hv,t=>Ze({evt:t,evnt:"tap"}));document.addEventListener("change",t=>Ze({evt:t,evnt:"change"}));document.addEventListener("click",t=>Ze({evt:t,evnt:"click"}));document.addEventListener("mouseover",t=>Ze({evt:t,evnt:"mouseover",stopPropagation:!1}));document.addEventListener("mouseout",t=>Ze({evt:t,evnt:"mouseout",stopPropagation:!1}));document.addEventListener("keyup",t=>Ze({evt:t,evnt:"keyup",stopPropagation:!1}));let sc=0;function Ze({evt:t,evnt:e,stopPropagation:n=!0}){n&&t.stopPropagation();const r={x:t.clientX,y:t.clientY,pageX:t.pageX,pageY:t.pageY},i=Array.from(t.target.classList),s=i.length&&Pn[e]?fv(i,Pn[e]):[];if(s.length){const o=new Date().getTime();yt.elapsed=o-sc,sc=o,s.forEach(a=>{dv({cls:a,evt:t,evnt:e,mouse:r})})}}function dv({cls:t,evt:e,evnt:n,mouse:r}){const i=e.target;Nt[n][t].fx(i,r,n,e)}document.addEventListener("touchstart",t=>{yt.touched=t.target,yt.coords=[t.touches[0].clientX,t.touches[0].clientY],yt.touched&&(Du=setTimeout(function(){pv()},yt.holdTime))},!1);document.addEventListener("touchend",function(){Bu()},!1);document.addEventListener("touchmove",function(t){yt.touched!==t.target&&Bu()},!1);function Bu(){clearTimeout(Du)}function pv(){typeof yt.holdAction=="function"&&(yt.held=yt.touched,yt.holdAction(yt.held,yt.coords))}let Fr=!1,oc,kn="";function mv(){clearTimeout(oc),Fr=!0,kn!=="can-touch"&&(kn="can-touch",document.documentElement.classList.add(kn)),oc=setTimeout(function(){Fr=!1},500)}function gv(){!Fr&&kn==="can-touch"&&(Fr=!1,kn="",document.documentElement.classList.remove("can-touch"))}document.addEventListener("touchstart",mv,!1);document.addEventListener("mouseover",gv,!1);const yv=yt;function Hn(t){t=t||b.match.history.lastPoint();const e=b.match.metadata.players();if(e[0].name!=gr[0]&&e[1].name!=gr[1]&&su()){const r=As.geoposition.coords||{},i=b.match.metadata.defineTournament(),s=b.match.metadata.defineMatch(),o={tournament:i,match:b.match.metadata.defineMatch(),event:{euid:s.euid},status:b.match.status,players:b.match.metadata.players(),score:b.match.score(),point:t.point,serving:b.match.nextTeamServing(),complete:b.match.complete(),winner:b.match.winner(),geoposition:{latitude:r.latitude,longitude:r.longitude},undo:typeof t=="string"&&t=="Undo"};_v(o)}}let Di,Bi,nr=0;const ac=1e4;function _v(t){const e=Date.now();if(Di=t,e-nr>ac)dt.socket.emit("mh",{type:"score",payload:{next_update:Di}}),nr=e;else{Bi&&clearTimeout(Bi);const n=ac-(e-nr);Bi=setTimeout(function(){dt.socket.emit("mh",{type:"score",payload:{next_update:Di}}),nr=e},n)}}function ws(t){if(b.match.complete()){const e=b.match.metadata.players()[b.match.winner()].name;return zt(`<div style="height: 50vh" class="flexcols flexcenter"><div>Match Complete!</div><div>Winner: ${e}</div></div>`),!0}else t!=null&&t.game.complete&&$t.display_gamefish&&io()}function vv(t){const e=t.getAttribute("hand"),n=t.getAttribute("stroke");if(e&&n){const s=b.match.history.lastPoint();b.match.decoratePoint(s,{hand:e,stroke:n}),oe()}ro();const r=b.match.history.action("addPoint"),i=r[r.length-1];ws(i),Hn(i)}function bv(){b.match.metadata.definePlayer(wv()),he()}function wv(){const t={index:b.edit_player};["hand","entry","seed","draw_position","ioc"].forEach(a=>{const l=`player_${a}`,c=document.getElementById(l);if(c.selectedIndex>=0){const u=c.options[c.selectedIndex].value;u&&(t[a]=u)}});const n=document.getElementById("player_rank");n.value&&(t.rank=n.value);const r=document.getElementById("player_wtn");r.value&&(t.wtn=r.value);const i=document.getElementById("player_utr");i.value&&(t.utr=i.value);const s=document.getElementById("team");s.value&&(t.team=s.value);const o=document.getElementById("playerid");return o.value&&(t.id=o.value),t}function xv(t){const e=En(t,"mf_format");if(e){const n=e.getAttribute("newFormat");b.match.format.type(n);const r=b.match.format.settings().name;document.getElementById("md_format").innerHTML=r,qr(),he(),bt("entry")}}const Fi="Double Fault",Ui={};function kv(t){const e=t.getAttribute("action");let n=parseInt(t.getAttribute("side")??0);const r=t.getAttribute("service"),i=t.getAttribute("role");if(ws())return;const s=n?"right":"left";b.swap_sides&&["server","receiver"].indexOf(i)<0&&(n=1-n),Cs();function o(d,p){Array.from(document.querySelectorAll(d)).forEach(g=>g.innerHTML=p)}function a(){b.rally_mode=!0,Array.from(document.querySelectorAll(".modeforce")).forEach(d=>d.style.display="flex"),o(".vs_action_button.winner","Winner"),o(".vs_action_button.fault","UFE"),o(".vs_action_button.forced","Forced"),Array.from(document.querySelectorAll(".vs_mode_button")).forEach(d=>{["Serve","Return","2nd Serve"].indexOf(d.innerHTML)>=0&&(d.innerHTML="Base Line")})}const l={firstServe(){b.serve2nd=!1},secondServe(){b.serve2nd=!Ui.serve2nd,Ui.serve2nd=!Ui.serve2nd},fault(d){if(d!=b.serving)return;if(b.serve2nd)return{code:"D"};const p=b.swap_sides?1-d:d;o(`.fault.display_${p}_serving`,Fi),o(`.fault.modeerr_player${p}`,Fi);const g=`.modeaction_player${b.swap_sides?1-b.serving:b.serving}`;Array.from(document.querySelectorAll(g)).forEach(x=>x.innerHTML="2nd Serve"),b.serve2nd=!0,Ya("Service Fault")},doubleFault(d){return d!=b.serving?void 0:{code:"d"}},ace(d){return d!=b.serving?void 0:b.serve2nd?{code:"a"}:{code:"A"}},winner(d){return{winner:d,result:"Winner"}},unforced(d){return{winner:1-d,result:"Unforced Error"}},forced(d){return{winner:1-d,result:"Forced Error"}},point(d){return{winner:d}},penalty(d){return console.log("penalty"),{winner:1-d,result:"Penalty",code:d==b.serving?"P":"Q"}},modewin(d,p){const m=t.innerHTML;if(m=="Ace")return l.ace(d,p);if(m=="Winner")return l.winner(d,p)},modeerr(d,p){const m=t.innerHTML;if(m=="Fault"||m==Fi)return l.fault(d,p);if(m=="UFE")return l.unforced(d,p);if(m=="Forced")return l.forced(d,p);if(m=="Let")return l.let(d,p)},modeaction(){const d=t.innerHTML;["Serve","2nd Serve","Return"].indexOf(d)>=0&&a(),(d=="Serve"||d=="Return")&&a(),d=="Net"&&(t.innerHTML="Base Line"),d=="Base Line"&&(t.innerHTML="Net")},rally(){const d=t.innerHTML;b.rally=parseInt((d.match(/\d+/g)||["0"]).join("")),b.rally+=1,o(".rally",`Rally: ${b.rally}`),b.rally==1&&a()},let(){Ya("Service: Let"),b.lets+=1}},c=document.getElementById("click");if(c&&$t.audible_clicks&&c.play(),t.id&&Av(t.id),r&&r=="second_service"&&(b.serve2nd=!0),Object.keys(l).indexOf(e)<0)return;const u=["server","receiver"].indexOf(i);u>=0&&(n=u?b.receiving:b.serving);const f=b.serve2nd?{first_serve:{error:"Error",serves:["0e"]}}:{},h=l[e](n,f);if(h){Ev(),Object.assign(f,h),b.rally&&(f.rally=new Array(b.rally));const d=Sv(f);d&&(f.location=d);const p=b.match.addPoint(f);$t.track_shot_types&&p.result&&p.point.result&&["Penalty","Ace","Double Fault"].indexOf(p.point.result)<0?ro(s):(ws(p),Hn(p)),b.rally=0,b.lets=0,b.undone=[],Ts()}Wr()}function Av(t){const e=document.getElementById(t);e&&(Ot[t].type=="flash"?(e.style.backgroundColor=Ot[t].color,e.style.color="white",setTimeout(()=>Cs(),300)):Ot[t].type=="toggle"&&(e.style.backgroundColor=="white"?(b.serve2nd=t=="second_serve",e.style.backgroundColor=Ot[t].color,e.style.color="white"):(b.serve2nd=!1,e.style.backgroundColor="white",e.style.color=Ot[t].color),Object.keys(Ot).filter(r=>Ot[r].type=="toggle").filter(r=>r!=t).forEach(r=>bc(r))))}function Ev(){if(b.match.history.points().length==0){const e=new Date;b.match.metadata.defineMatch({date:e.valueOf()})}}function Sv(t){const e=document.querySelectorAll(".modeaction_player0"),n=document.querySelectorAll(".modeaction_player1");if(e&&e[0].innerHTML=="Net"||n&&n[0].innerHTML=="Net"){if(t.result=="Unforced Error"||t.result=="Forced Error"){if(t.winner==0&&n[0].innerHTML=="Net"||t.winner==1&&e[0].innerHTML=="Net")return"Net"}else if(t.result=="Winner"&&(t.winner==0&&e[0].innerHTML=="Net"||t.winner==1&&n[0].innerHTML=="Net"))return"Net"}}function Tv(t){const e=t.getAttribute("matchId"),n=rt.get(e);n&&(Cv(n,`match_${e}.json`),Ae())}function Cv(t,e){e=e||"match.json";const n=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",window.URL!=null&&(r.href=window.URL.createObjectURL(n),r.click())}function Mv(t){const n=En(t,"statrow").getAttribute("id"),r=document.getElementById(n+"_chart");if(console.log({id:n,el:r}),r){const i=r.style.display!="none";r.style.display=i?"none":"flex"}}const Ov=""+new URL("emailblack-vRUY2-4u.png",import.meta.url).href;function Nv(){Hn();const t=rt.get("current_match"),e=t&&rt.get(t);if(e){const n=JSON.parse(e);let r=n.match.muid;r||(r=jr(),n.match.muid=r,b.match.metadata.defineMatch({muid:r}),rt.set(t,JSON.stringify(n))),Rv(n)}else zt(" <p> <h1>First Track a Match!</h1> </p> ")}function Rv(t){var l;if(!dt.socket){zt(" <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> ");return}const n=`${Tt.broadcast?`CourtHive Live Score: ${location.origin}/scores?muid=${t.muid}`:""}%0D%0A `,r=Tt.broadcast?`
    <div class='closeModal flexcenter iconmargin'>
      <a href='mailto:?subject=CourtHive Match Link&body=${n}' class="notextdecoration">
          <img class="icon_large" src='${Ov}'>
      </a> 
    </div>
  `:"",i=t?`
    <div class='flexcenter iconmargin'>
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
          <div class='export_action action_icon_large iconclipboard'></div> 
      </button>
    </div>
  `:"",s=(l=t==null?void 0:t.match)==null?void 0:l.muid,o=s?`
   <div matchId="${s}" class="sendHistory flexcenter">
      <div matchId="${s}" class='sendHistory export_action action_icon iconsave'></div>
   </div>
`:"",a=`
      <p>&nbsp;</p>
      <h1>Options for Sharing</h1>
      <div class='flexrows'> 
        ${r}
        ${o}
        ${i}
      </div>`;zt(a,JSON.stringify(t))}function Lv(t){b.edit_point_index=t;const e=b.match.history.action("addPoint");b.edit_point=e[t].point,b.edit_point_result=b.edit_point.result;let n=b.edit_point.server?b.edit_point.score.split("-").reverse().join("-"):b.edit_point.score;n=="0-0"&&(n="Gamepoint");const r=document.getElementById("ep_sgp");r&&(r.innerHTML=`Set: ${b.edit_point.set+1}, Game: ${b.edit_point.game+1}, Point: ${n}`);const i=b.match.metadata.players();Array.from(document.querySelectorAll(".select_player")).forEach(c=>i.forEach((u,f)=>c.options[f]=new Option(u.name,f.toString())));const o=document.getElementById("point_winner"),a=document.getElementById("point_loser");o&&(o.value=b.edit_point.winner),a&&(a.value=b.edit_point.result||""),Pv(),Iv(),Fu();const l=document.getElementById("editpoint");l&&(l.style.display="flex")}function Pv(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e==null?void 0:e.value,s=n==null?void 0:n.value;i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==s&&(t.value=1-s),(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=s&&(t.value=s)}function Fu(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=t==null?void 0:t.value;b.edit_point_result=e.value,e.innerHTML="",e.options[0]=new Option("- select -","");let r=[];n==b.edit_point.server&&(r=["Ace","Double Fault"].concat(...r)),r=["Winner","Unforced Error","Forced Error"].concat(...r),r.forEach((i,s)=>e.options[s+1]=new Option(i,i)),e.value=b.edit_point_result}function Iv(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e.value;b.edit_point.result=i,(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=n.value&&(n.value=r),i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==n.value&&(n.value=1-r),Fu()}function Dv(){const t=document.getElementById("point_result"),n=document.getElementById("point_winner").value,r=t.value;b.edit_point.winner=n,b.edit_point.result=r,b.edit_point.code=void 0,oe();const i=rt.get("current_match");if(i){Ms(i,"pointhistory");const s=document.getElementById("editpoint");s&&(s.style.display="none")}}function Bv(t){const e=parseInt(t.getAttribute("playerIndex")??0);b.edit_player=b.swap_sides?1-e:e,Ae();const n=document.getElementById("editplayer");n&&(n.style.display="flex");const r=b.match.metadata.players(b.edit_player),i=document.getElementById("playername");i&&(i.value=r.name);const s=document.getElementById("team");s&&(s.value=r.team??"");const o=document.getElementById("playerid");o&&(o.value=r.id??""),["hand","entry","seed","draw_position","ioc"].forEach(f=>{const h=`player_${f}`,d=document.getElementById(h);d&&(d.value=r[f]||"")});const l=document.getElementById("player_rank");l&&(l.value=r.rank||"");const c=document.getElementById("player_wtn");c&&(c.value=r.wtn||"");const u=document.getElementById("player_utr");u&&(u.value=r.utr||"")}const Fv=""+new URL("points-zyGL2AXB.jpg",import.meta.url).href;function Uu(t){const e=`
         <div class="helpintro">Quick Start</div>
         <div class="flexhelp"> <div class='iconmenub action_icon_large'></div> <div class="quicktitle">Main Menu</div> </div>
         <div class="quickitem"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>
         <div class="flexhelp"> <div class='iconsettingsb action_icon_large'></div> <div class="quicktitle">Settings</div> </div>
         <div class="quickitem"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>
         <div class="flexhelp"> <div class='iconchangeb action_icon_large'></div> <div class="quicktitle">Change First Server</div> </div>
         <div class="quickitem"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>
         <div class="quickitem"> <span>To simply advance points, tap the <b>Points</b> display </span></div>
         <div class="flexhelp"> <img src='${Fv}'> </div>
      `,n=`
         <div class="helpintro">Save To Home Screen</div>
         <div class="helpitem">CourtHive is a Progressive Web App</div>
         <div class="helpitem"><b>For Full Screen View:</b></div>
         <div class="helpitem">On iOS use Safari to Save</div>
         <div class="helpitem">On Android use Chrome</div>
      `,r=`
         <div class="helpintro">How to</div>
         <div class="helpitem"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>
         <div class="helpitem"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>
         <div class="helpitem"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>
         <div class="helpitem"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>
         <div class="helpitem"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>
         <div class="helpitem"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>
         <div class="flexhelp"> <div class='iconbroadcast icon icon_5'></div> <div class="quicktitle">Enable Broadcast</div> </div>
         <div class="flexhelp"> <div class='iconshare icon icon_3'></div> <div class="quicktitle">Share (Email, Copy/Paste)</div> </div>
      `,i=t?e+n+r:r+n+e;zt(i)}function Uv(){const t=`
         <p>&nbsp;</b>
         <h2>CourtHive</h2>
         <p>version <a id="version" target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">${gc}</a></p>
         <p>An 
            <a target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">Open Source</a> project developed by 
            <a target="_blank" href="http://TennisVisuals.com">TennisVisuals</a>
         </p>
         <p><a href="mailto:tennis.aip@gmail.com?subject=CourtHive">Feedback Welcome!</a></p>
         <h2>Help</h2>
         <div class="helpitem">Difficulties after an app update?</div>
         <div class="flexcenter">
            <div class='flexcenter reset' onclick="appReset()">Reset</div>
         </div>
         <p>&nbsp;</b>
      `;zt(t)}function Hv(){zt(`
    <h2>Enter key:</h2>
    <input id='key' class='key_input input is-primary'>
    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>
  `);const e=document.getElementById("key"),n=document.getElementById("key");n&&n.addEventListener("keyup",s);const r=document.getElementById("submit_key");r&&r.addEventListener("click",i);function i(){e.value&&cu({key:e.value})}function s(o){o.which==13&&i()}}function $v(t){const e=parseInt(t.getAttribute("gameIndex")??0);io(e)}function zv(t){const e=En(t,"ph_episode"),n=parseInt((e==null?void 0:e.getAttribute("pointIndex"))??0);Lv(n)}function qv(){bt("stats")}function Gv(){bt("matchformat")}function Wv(){bt("gametree")}function Vv(){bt("momentum")}function Yv(){bt("pointhistory")}function jv(){bt("settings")}function Kv(){bt("matcharchive")}function Jv(){bt("entry")}function Xv(){bt("mainmenu")}function Zv(){if(b.serve2nd||b.rally_mode)b.serve2nd=!1,b.rally_mode=!1,b.rally=0,b.lets=0,Vr();else{const t=b.match.undo();Hn("Undo"),t&&b.undone.push(t),he(!0)}Wr()}function Qv(){if(!b.undone.length)return;const t=b.match.addPoint(b.undone.pop());Hn(t)}function t1(){console.log("changeServer"),b.match.history.points().length||(b.match.set.firstService(1-b.serving),Ts(),bt("entry"))}function e1(){console.log("swapAction"),Sn.user_swap=!Sn.user_swap,_c(),Yr()}function n1(){yv.register("modalInfo","tap",Uv).register("toggleChart","tap",Mv).register("broadcastToggle","tap",lu).register("modalShare","tap",Nv).register("enterKey","tap",Hv).register("changeFormat","tap",xv).register("closeModal","tap",Ae).register("newMatch","tap",Ns).register("exportMatch","tap",Tv).register("sendHistory","tap",po).register("settings","tap",jv).register("outcomeEntry","tap",Jv).register("matchArchive","tap",Kv).register("mainMenu","tap",Xv).register("modalHelp","tap",Uu).register("updateAppState","tap",Es).register("updateStats","tap",zl).register("closeGameFish","tap",Dg).register("strokeAction","tap",vv).register("swapAction","tap",e1).register("undoAction","tap",Zv).register("redoAction","tap",Qv).register("changeServer","tap",t1).register("updatePoint","tap",Dv).register("editPlayer","tap",Bv).register("updatePlayer","tap",bv).register("updateTournamentDetails","tap",Pu).register("updateMatchDetails","tap",Iu).register("updateDetails","tap",uv).register("viewGameFish","tap",$v).register("viewStats","tap",qv).register("viewGameTree","tap",Wv).register("viewMomentum","tap",Vv).register("viewEditPoint","tap",zv).register("viewMatchFormat","tap",Gv).register("viewPointHistory","tap",Yv).register("editMatchDetails","tap",df).register("classAction","tap",kv)}var r1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hu={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */(function(t,e){(function(r,i){t.exports=i()})(r1,function(){return function(){var n={686:function(s,o,a){a.d(o,{default:function(){return C}});var l=a(279),c=a.n(l),u=a(370),f=a.n(u),h=a(817),d=a.n(h);function p(M){try{return document.execCommand(M)}catch{return!1}}var m=function(T){var O=d()(T);return p("cut"),O},g=m;function x(M){var T=document.documentElement.getAttribute("dir")==="rtl",O=document.createElement("textarea");O.style.fontSize="12pt",O.style.border="0",O.style.padding="0",O.style.margin="0",O.style.position="absolute",O.style[T?"right":"left"]="-9999px";var q=window.pageYOffset||document.documentElement.scrollTop;return O.style.top="".concat(q,"px"),O.setAttribute("readonly",""),O.value=M,O}var A=function(T,O){var q=x(T);O.container.appendChild(q);var j=d()(q);return p("copy"),q.remove(),j},k=function(T){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},q="";return typeof T=="string"?q=A(T,O):T instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(T==null?void 0:T.type)?q=A(T.value,O):(q=d()(T),p("copy")),q},N=k;function I(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(O){return typeof O}:I=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},I(M)}var v=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=T.action,q=O===void 0?"copy":O,j=T.container,E=T.target,F=T.text;if(q!=="copy"&&q!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(E!==void 0)if(E&&I(E)==="object"&&E.nodeType===1){if(q==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(q==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(F)return N(F,{container:j});if(E)return q==="cut"?g(E):N(E,{container:j})},_=v;function y(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(O){return typeof O}:y=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},y(M)}function L(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")}function W(M,T){for(var O=0;O<T.length;O++){var q=T[O];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(M,q.key,q)}}function Y(M,T,O){return T&&W(M.prototype,T),O&&W(M,O),M}function Q(M,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(T&&T.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),T&&K(M,T)}function K(M,T){return K=Object.setPrototypeOf||function(q,j){return q.__proto__=j,q},K(M,T)}function H(M){var T=Z();return function(){var q=X(M),j;if(T){var E=X(this).constructor;j=Reflect.construct(q,arguments,E)}else j=q.apply(this,arguments);return V(this,j)}}function V(M,T){return T&&(y(T)==="object"||typeof T=="function")?T:z(M)}function z(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function X(M){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},X(M)}function U(M,T){var O="data-clipboard-".concat(M);if(T.hasAttribute(O))return T.getAttribute(O)}var S=function(M){Q(O,M);var T=H(O);function O(q,j){var E;return L(this,O),E=T.call(this),E.resolveOptions(j),E.listenClick(q),E}return Y(O,[{key:"resolveOptions",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof j.action=="function"?j.action:this.defaultAction,this.target=typeof j.target=="function"?j.target:this.defaultTarget,this.text=typeof j.text=="function"?j.text:this.defaultText,this.container=y(j.container)==="object"?j.container:document.body}},{key:"listenClick",value:function(j){var E=this;this.listener=f()(j,"click",function(F){return E.onClick(F)})}},{key:"onClick",value:function(j){var E=j.delegateTarget||j.currentTarget,F=this.action(E)||"copy",$=_({action:F,container:this.container,target:this.target(E),text:this.text(E)});this.emit($?"success":"error",{action:F,text:$,trigger:E,clearSelection:function(){E&&E.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(j){return U("action",j)}},{key:"defaultTarget",value:function(j){var E=U("target",j);if(E)return document.querySelector(E)}},{key:"defaultText",value:function(j){return U("text",j)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(j){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return N(j,E)}},{key:"cut",value:function(j){return g(j)}},{key:"isSupported",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],E=typeof j=="string"?[j]:j,F=!!document.queryCommandSupported;return E.forEach(function($){F=F&&!!document.queryCommandSupported($)}),F}}]),O}(c()),C=S},828:function(s){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==o;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}s.exports=l},438:function(s,o,a){var l=a(828);function c(h,d,p,m,g){var x=f.apply(this,arguments);return h.addEventListener(p,x,g),{destroy:function(){h.removeEventListener(p,x,g)}}}function u(h,d,p,m,g){return typeof h.addEventListener=="function"?c.apply(null,arguments):typeof p=="function"?c.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(x){return c(x,d,p,m,g)}))}function f(h,d,p,m){return function(g){g.delegateTarget=l(g.target,d),g.delegateTarget&&m.call(h,g)}}s.exports=u},879:function(s,o){o.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},o.nodeList=function(a){var l=Object.prototype.toString.call(a);return a!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in a&&(a.length===0||o.node(a[0]))},o.string=function(a){return typeof a=="string"||a instanceof String},o.fn=function(a){var l=Object.prototype.toString.call(a);return l==="[object Function]"}},370:function(s,o,a){var l=a(879),c=a(438);function u(p,m,g){if(!p&&!m&&!g)throw new Error("Missing required arguments");if(!l.string(m))throw new TypeError("Second argument must be a String");if(!l.fn(g))throw new TypeError("Third argument must be a Function");if(l.node(p))return f(p,m,g);if(l.nodeList(p))return h(p,m,g);if(l.string(p))return d(p,m,g);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(p,m,g){return p.addEventListener(m,g),{destroy:function(){p.removeEventListener(m,g)}}}function h(p,m,g){return Array.prototype.forEach.call(p,function(x){x.addEventListener(m,g)}),{destroy:function(){Array.prototype.forEach.call(p,function(x){x.removeEventListener(m,g)})}}}function d(p,m,g){return c(document.body,p,m,g)}s.exports=u},817:function(s){function o(a){var l;if(a.nodeName==="SELECT")a.focus(),l=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),l=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(a),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}s.exports=o},279:function(s){function o(){}o.prototype={on:function(a,l,c){var u=this.e||(this.e={});return(u[a]||(u[a]=[])).push({fn:l,ctx:c}),this},once:function(a,l,c){var u=this;function f(){u.off(a,f),l.apply(c,arguments)}return f._=l,this.on(a,f,c)},emit:function(a){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(a,l){var c=this.e||(this.e={}),u=c[a],f=[];if(u&&l)for(var h=0,d=u.length;h<d;h++)u[h].fn!==l&&u[h].fn._!==l&&f.push(u[h]);return f.length?c[a]=f:delete c[a],this}},s.exports=o,s.exports.TinyEmitter=o}},r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s](o,o.exports,i),o.exports}return function(){i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,{a:o}),o}}(),function(){i.d=function(s,o){for(var a in o)i.o(o,a)&&!i.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}}(),function(){i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)}}(),i(686)}().default})})(Hu);var s1=Hu.exports;const o1=i1(s1),a1=[{ioc:"AFG",name:"Afghanistan"},{ioc:"ALB",name:"Albania"},{ioc:"ALG",name:"Algeria"},{ioc:"ASA",name:"American Samoa"},{ioc:"AND",name:"Andorra"},{ioc:"ANG",name:"Angola"},{ioc:"AIA",name:"Anguilla"},{ioc:"ANT",name:"Antigua & Barbuda"},{ioc:"ARG",name:"Argentina"},{ioc:"ARM",name:"Armenia"},{ioc:"ARU",name:"Aruba"},{ioc:"AUS",name:"Australia"},{ioc:"AUT",name:"Austria"},{ioc:"AZE",name:"Azerbaijan"},{ioc:"BAH",name:"Bahamas"},{ioc:"BRN",name:"Bahrain"},{ioc:"BAN",name:"Bangladesh"},{ioc:"BAR",name:"Barbados"},{ioc:"BLR",name:"Belarus"},{ioc:"BEL",name:"Belgium"},{ioc:"BIZ",name:"Belize"},{ioc:"BEN",name:"Benin"},{ioc:"BER",name:"Bermuda"},{ioc:"BHU",name:"Bhutan"},{ioc:"BOL",name:"Bolivia"},{ioc:"BIH",name:"Bosnia"},{ioc:"BOT",name:"Botswana"},{ioc:"BRA",name:"Brazil"},{ioc:"IVB",name:"British Virgin Islands"},{ioc:"BRU",name:"Brunei"},{ioc:"BUL",name:"Bulgaria"},{ioc:"BUR",name:"Burkina Faso"},{ioc:"BDI",name:"Burundi"},{ioc:"CAM",name:"Cambodia"},{ioc:"CMR",name:"Cameroon"},{ioc:"CAN",name:"Canada"},{ioc:"CPV",name:"Cape Verde"},{ioc:"AHO",name:"Caribbean Netherlands"},{ioc:"CAY",name:"Cayman Islands"},{ioc:"CAF",name:"Central African Republic"},{ioc:"CHA",name:"Chad"},{ioc:"CHI",name:"Chile"},{ioc:"CHN",name:"China"},{ioc:"COL",name:"Colombia"},{ioc:"COM",name:"Comoros"},{ioc:"CGO",name:"Congo - Brazzaville"},{ioc:"COD",name:"Congo - Kinshasa"},{ioc:"COK",name:"Cook Islands"},{ioc:"CRC",name:"Costa Rica"},{ioc:"CRO",name:"Croatia"},{ioc:"CUB",name:"Cuba"},{ioc:"CYP",name:"Cyprus"},{ioc:"CZE",name:"Czech Republic"},{ioc:"CIV",name:"Cte dIvoire"},{ioc:"DEN",name:"Denmark"},{ioc:"DJI",name:"Djibouti"},{ioc:"DMA",name:"Dominica"},{ioc:"DOM",name:"Dominican Republic"},{ioc:"ECU",name:"Ecuador"},{ioc:"EGY",name:"Egypt"},{ioc:"ESA",name:"El Salvador"},{ioc:"GEQ",name:"Equatorial Guinea"},{ioc:"ERI",name:"Eritrea"},{ioc:"EST",name:"Estonia"},{ioc:"ETH",name:"Ethiopia"},{ioc:"FLK",name:"Falkland Islands"},{ioc:"FAR",name:"Faroe Islands"},{ioc:"FIJ",name:"Fiji"},{ioc:"FIN",name:"Finland"},{ioc:"FRA",name:"France"},{ioc:"FGU",name:"French Guiana"},{ioc:"FPO",name:"French Polynesia"},{ioc:"GAB",name:"Gabon"},{ioc:"GAM",name:"Gambia"},{ioc:"GEO",name:"Georgia"},{ioc:"GER",name:"Germany"},{ioc:"GHA",name:"Ghana"},{ioc:"GIB",name:"Gibraltar"},{ioc:"GRE",name:"Greece"},{ioc:"GRL",name:"Greenland"},{ioc:"GRN",name:"Grenada"},{ioc:"GUD",name:"Guadeloupe"},{ioc:"GUM",name:"Guam"},{ioc:"GUA",name:"Guatemala"},{ioc:"GUI",name:"Guinea"},{ioc:"GBS",name:"Guinea-Bissau"},{ioc:"GUY",name:"Guyana"},{ioc:"HAI",name:"Haiti"},{ioc:"HON",name:"Honduras"},{ioc:"HKG",name:"Hong Kong"},{ioc:"HUN",name:"Hungary"},{ioc:"ISL",name:"Iceland"},{ioc:"IND",name:"India"},{ioc:"INA",name:"Indonesia"},{ioc:"IRI",name:"Iran"},{ioc:"IRQ",name:"Iraq"},{ioc:"IRL",name:"Ireland"},{ioc:"ISR",name:"Israel"},{ioc:"ITA",name:"Italy"},{ioc:"JAM",name:"Jamaica"},{ioc:"JPN",name:"Japan"},{ioc:"JOR",name:"Jordan"},{ioc:"KAZ",name:"Kazakhstan"},{ioc:"KEN",name:"Kenya"},{ioc:"KIR",name:"Kiribati"},{ioc:"KUW",name:"Kuwait"},{ioc:"KGZ",name:"Kyrgyzstan"},{ioc:"LAO",name:"Laos"},{ioc:"LAT",name:"Latvia"},{ioc:"LIB",name:"Lebanon"},{ioc:"LES",name:"Lesotho"},{ioc:"LBR",name:"Liberia"},{ioc:"LBA",name:"Libya"},{ioc:"LIE",name:"Liechtenstein"},{ioc:"LTU",name:"Lithuania"},{ioc:"LUX",name:"Luxembourg"},{ioc:"MAC",name:"Macau"},{ioc:"MKD",name:"Macedonia"},{ioc:"MAD",name:"Madagascar"},{ioc:"MAW",name:"Malawi"},{ioc:"MAS",name:"Malaysia"},{ioc:"MDV",name:"Maldives"},{ioc:"MLI",name:"Mali"},{ioc:"MLT",name:"Malta"},{ioc:"MSH",name:"Marshall Islands"},{ioc:"MRT",name:"Martinique"},{ioc:"MTN",name:"Mauritania"},{ioc:"MRI",name:"Mauritius"},{ioc:"MAY",name:"Mayotte"},{ioc:"MEX",name:"Mexico"},{ioc:"FSM",name:"Micronesia"},{ioc:"MDA",name:"Moldova"},{ioc:"MON",name:"Monaco"},{ioc:"MGL",name:"Mongolia"},{ioc:"MGO",name:"Montenegro"},{ioc:"MNT",name:"Montserrat"},{ioc:"MAR",name:"Morocco"},{ioc:"MOZ",name:"Mozambique"},{ioc:"MYA",name:"Myanmar"},{ioc:"NAM",name:"Namibia"},{ioc:"NRU",name:"Nauru"},{ioc:"NEP",name:"Nepal"},{ioc:"NED",name:"Netherlands"},{ioc:"NCD",name:"New Caledonia"},{ioc:"NZL",name:"New Zealand"},{ioc:"NCA",name:"Nicaragua"},{ioc:"NIG",name:"Niger"},{ioc:"NGR",name:"Nigeria"},{ioc:"NIU",name:"Niue"},{ioc:"NFI",name:"Norfolk Island"},{ioc:"PRK",name:"North Korea"},{ioc:"NMA",name:"Northern Mariana Islands"},{ioc:"NOR",name:"Norway"},{ioc:"OMA",name:"Oman"},{ioc:"PAK",name:"Pakistan"},{ioc:"PLW",name:"Palau"},{ioc:"PLE",name:"Palestine"},{ioc:"PAN",name:"Panama"},{ioc:"PNG",name:"Papua New Guinea"},{ioc:"PAR",name:"Paraguay"},{ioc:"PER",name:"Peru"},{ioc:"PHI",name:"Philippines"},{ioc:"POL",name:"Poland"},{ioc:"POR",name:"Portugal"},{ioc:"PUR",name:"Puerto Rico"},{ioc:"QAT",name:"Qatar"},{ioc:"ROU",name:"Romania"},{ioc:"RUS",name:"Russia"},{ioc:"RWA",name:"Rwanda"},{ioc:"REU",name:"Runion"},{ioc:"SAM",name:"Samoa"},{ioc:"SMR",name:"San Marino"},{ioc:"KSA",name:"Saudi Arabia"},{ioc:"SEN",name:"Senegal"},{ioc:"SRB",name:"Serbia"},{ioc:"SEY",name:"Seychelles"},{ioc:"SLE",name:"Sierra Leone"},{ioc:"SIN",name:"Singapore"},{ioc:"SVK",name:"Slovakia"},{ioc:"SLO",name:"Slovenia"},{ioc:"SOL",name:"Solomon Islands"},{ioc:"SOM",name:"Somalia"},{ioc:"RSA",name:"South Africa"},{ioc:"KOR",name:"South Korea"},{ioc:"ESP",name:"Spain"},{ioc:"SRI",name:"Sri Lanka"},{ioc:"HEL",name:"St. Helena"},{ioc:"SKN",name:"St. Kitts & Nevis"},{ioc:"LCA",name:"St. Lucia"},{ioc:"SPM",name:"St. Pierre & Miquelon"},{ioc:"VIN",name:"St. Vincent & Grenadines"},{ioc:"SUD",name:"Sudan"},{ioc:"SUR",name:"Suriname"},{ioc:"SWZ",name:"Swaziland"},{ioc:"SWE",name:"Sweden"},{ioc:"SUI",name:"Switzerland"},{ioc:"SYR",name:"Syria"},{ioc:"STP",name:"So Tom & Prncipe"},{ioc:"TPE",name:"Taiwan"},{ioc:"TJK",name:"Tajikistan"},{ioc:"TAN",name:"Tanzania"},{ioc:"THA",name:"Thailand"},{ioc:"TLS",name:"Timor-Leste"},{ioc:"TOG",name:"Togo"},{ioc:"TGA",name:"Tonga"},{ioc:"TTO",name:"Trinidad & Tobago"},{ioc:"TUN",name:"Tunisia"},{ioc:"TUR",name:"Turkey"},{ioc:"TKM",name:"Turkmenistan"},{ioc:"TKS",name:"Turks & Caicos Islands"},{ioc:"TUV",name:"Tuvalu"},{ioc:"ISV",name:"U.S. Virgin Islands"},{ioc:"GBR",name:"UK"},{ioc:"USA",name:"United States"},{ioc:"UGA",name:"Uganda"},{ioc:"UKR",name:"Ukraine"},{ioc:"UAE",name:"United Arab Emirates"},{ioc:"URU",name:"Uruguay"},{ioc:"UZB",name:"Uzbekistan"},{ioc:"VAN",name:"Vanuatu"},{ioc:"VEN",name:"Venezuela"},{ioc:"VIE",name:"Vietnam"},{ioc:"WAF",name:"Wallis & Futuna"},{ioc:"YEM",name:"Yemen"},{ioc:"ZAM",name:"Zambia"},{ioc:"ZIM",name:"Zimbabwe"}];function c1(){lv(),window.addEventListener("orientationchange",function(){Da()},!1),window.addEventListener("resize",function(){Da()},!1);const t={},n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const l=n[a].split("=");if(typeof t[l[0]]>"u")t[l[0]]=l[1];else if(typeof t[l[0]]=="string"){const c=[t[l[0]],l[1]];t[l[0]]=c}else t[l[0]].push(l[1])}history.pushState("",document.title,window.location.pathname),It.disableDrag(),n1(),mt("none","welcome"),new o1(".c2c").on("success",()=>{Ae()}),nf(),l1(),Tt.broadcast&&navigator.onLine&&ou(),u1(),vc(),It.addSwipeTarget(document.getElementById("mainmenu")),Array.from(document.querySelectorAll(".md_seed")).forEach(a=>{Io(0,32).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_draw_position")).forEach(a=>{Io(0,128).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_ioc")).forEach(a=>{a1.forEach((l,c)=>a.options[c+1]=new Option(l.name,l.ioc))}),Gr(),yc(),f1(),Pg(),Gl(),t.key&&setTimeout(()=>cu({key:t.key}),1e3),Fg()}function l1(){Tt.user_uuid||(Tt.user_uuid=jr(),Es())}function u1(){const t=a=>{a.which==9&&a.preventDefault()},e=document.getElementById("playername");e&&(e.addEventListener("keyup",hf,!1),e.addEventListener("keydown",t,!1),e.onblur=function(){qi()},e.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const n=document.getElementById("team");n&&(n.onblur=function(){qi()},n.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},100)});const r=document.getElementById("player_rank");r&&(r.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const i=document.getElementById("player_wtn");i&&(i.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const s=document.getElementById("player_utr");s&&(s.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const o=Array.from(document.querySelectorAll(".pressAndHold"));Array.from(o).forEach(a=>It.addPressAndHold(a))}function f1(){const t=rt.get("current_match");if(t)Ms(t),Yr(),Vr(),Wr();else{const e=rt.get("match_archive");Ns(),e||Uu(!0)}}const h1=""+new URL("courthive-transparent-logo-EnCfo38b.png",import.meta.url).href;function d1(t){t&&(document.querySelector("#app").innerHTML=`
  <div>
    <a href="https://courthive.com" target="_blank">
      <img src="${h1}" class="logo" alt="Vite logo" />
    </a>
    <h1 class="name">CourtHive</h1>
  </div>
`)}var p1=/([:*])(\w+)/g,m1="([^/]+)",g1=/\*/g,y1="?(?:.*)",_1=/\/\?/g,v1="/?([^/]+|)",b1="(?:/^|^)",w1="";function $u(t){return t===void 0&&(t="/"),xo()?location.pathname+location.search+location.hash:t}function gt(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function Ur(t){return typeof t=="string"}function x1(t){return typeof t=="function"}function Hr(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function k1(t,e){return e.length===0||!t?null:t.slice(1,t.length).reduce(function(n,r,i){return n===null&&(n={}),n[e[i]]=decodeURIComponent(r),n},null)}function $r(t){var e=gt(t).split(/\?(.*)?$/);return[gt(e[0]),e.slice(1).join("")]}function wo(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]!==""){var s=decodeURIComponent(i[0]);e[s]?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(decodeURIComponent(i[1]||""))):e[s]=decodeURIComponent(i[1]||"")}}return e}function zu(t,e){var n=$r(gt(t.currentLocationPath)),r=n[0],i=n[1],s=i===""?null:wo(i),o=[],a;if(Ur(e.path)){if(a=b1+gt(e.path).replace(p1,function(f,h,d){return o.push(d),m1}).replace(g1,y1).replace(_1,v1)+"$",gt(e.path)===""&&gt(r)==="")return{url:r,queryString:i,hashString:Hr(t.to),route:e,data:null,params:s}}else a=e.path;var l=new RegExp(a,w1),c=r.match(l);if(c){var u=Ur(e.path)?k1(c,o):c.groups?c.groups:c.slice(1);return{url:gt(r.replace(new RegExp("^"+t.instance.root),"")),queryString:i,hashString:Hr(t.to),route:e,data:u,params:s}}return!1}function qu(){return!!(typeof window<"u"&&window.history&&window.history.pushState)}function Ce(t,e){return typeof t[e]>"u"||t[e]===!0}function A1(t){if(!t)return{};var e=t.split(","),n={},r;return e.forEach(function(i){var s=i.split(":").map(function(o){return o.replace(/(^ +| +$)/g,"")});switch(s[0]){case"historyAPIMethod":n.historyAPIMethod=s[1];break;case"resolveOptionsStrategy":r||(r={}),r.strategy=s[1];break;case"resolveOptionsHash":r||(r={}),r.hash=s[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":n[s[0]]=s[1]==="true";break}}),r&&(n.resolveOptions=r),n}function xo(){return typeof window<"u"}function E1(t,e){return t===void 0&&(t=[]),e===void 0&&(e={}),t.filter(function(n){return n}).forEach(function(n){["before","after","already","leave"].forEach(function(r){n[r]&&(e[r]||(e[r]=[]),e[r].push(n[r]))})}),e}function jt(t,e,n){var r=e||{},i=0;(function s(){if(!t[i]){n&&n(r);return}Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),s()):t[i](r,function(o){typeof o>"u"||o===!0?(i+=1,s()):n&&n(r)})})()}jt.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};function cc(t,e){typeof t.currentLocationPath>"u"&&(t.currentLocationPath=t.to=$u(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function Hi(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=t.instance.routes[n],i=zu(t,r);if(i&&(t.matches||(t.matches=[]),t.matches.push(i),t.resolveOptions.strategy==="ONE")){e();return}}e()}function S1(t,e){t.navigateOptions&&(typeof t.navigateOptions.shouldResolve<"u"&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),typeof t.navigateOptions.silent<"u"&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function T1(t,e){t.navigateOptions.force===!0?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}var lc=xo(),C1=qu();function M1(t,e){if(Ce(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=lc&&t.resolveOptions&&t.resolveOptions.hash===!0;C1?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout(function(){if(!r){var i=location.hash;location.hash="",location.hash=i}t.instance.__freezeListening=!1},1))):lc&&(window.location.href=t.to)}e()}function Gu(t,e){var n=t.instance;if(!n.lastResolved()){e();return}jt(n.lastResolved().map(function(r){return function(i,s){if(!r.route.hooks||!r.route.hooks.leave){s();return}var o=!1,a=t.instance.matchLocation(r.route.path,t.currentLocationPath,!1);if(r.route.path!=="*")o=!a;else{var l=t.matches?t.matches.find(function(c){return r.route.path===c.route.path}):!1;o=!l}if(Ce(t.navigateOptions,"callHooks")&&o){jt(r.route.hooks.leave.map(function(c){return function(u,f){return c(function(h){h===!1?t.instance.__markAsClean(t):f()},t.matches&&t.matches.length>0?t.matches.length===1?t.matches[0]:t.matches:void 0)}}).concat([function(){return s()}]));return}else s()}}),{},function(){return e()})}function O1(t,e){t.match.route.hooks&&t.match.route.hooks.before&&Ce(t.navigateOptions,"callHooks")?jt(t.match.route.hooks.before.map(function(n){return function(i,s){return n(function(o){o===!1?t.instance.__markAsClean(t):s()},t.match)}}).concat([function(){return e()}])):e()}function N1(t,e){Ce(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()}function R1(t,e){t.match.route.hooks&&t.match.route.hooks.after&&Ce(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach(function(n){return n(t.match)}),e()}function L1(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString){n.forEach(function(r){r.route.hooks&&r.route.hooks.already&&Ce(t.navigateOptions,"callHooks")&&r.route.hooks.already.forEach(function(i){return i(t.match)})}),e(!1);return}e()}function P1(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=$r(t.currentLocationPath),i=r[0],s=r[1],o=Hr(t.to);n.path=gt(i);var a={url:n.path,queryString:s,hashString:o,data:null,route:n,params:s!==""?wo(s):null};t.matches=[a],t.match=a}e()}function I1(t,e){(!t.resolveOptions||t.resolveOptions.noMatchWarning===!1||typeof t.resolveOptions.noMatchWarning>"u")&&console.warn('Navigo: "'+t.currentLocationPath+`" didn't match any of the registered routes.`),e()}function D1(t,e){t.instance._setCurrent(null),e()}function Wu(t,e){Ce(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var Vu=[L1,O1,N1,R1],uc=[Gu,P1,jt.if(function(t){var e=t.notFoundHandled;return e},Vu.concat([Wu]),[I1,D1])];function xs(){return xs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xs.apply(this,arguments)}function fc(t,e){var n=0;function r(){if(n===t.matches.length){Wu(t,e);return}jt(Vu,xs({},t,{match:t.matches[n]}),function(){n+=1,r()})}Gu(t,r)}function $i(t){t.instance.__markAsClean(t)}function ks(){return ks=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ks.apply(this,arguments)}var hc="[data-navigo]";function B1(t,e){var n=e||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:hc},r=this,i="/",s=null,o=[],a=!1,l,c=qu(),u=xo();t?i=gt(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.');function f(S){return S.indexOf("#")>=0&&(n.hash===!0?S=S.split("#")[1]||"/":S=S.split("#")[0]),S}function h(S){return gt(i+"/"+gt(S))}function d(S,C,M,T){return S=Ur(S)?h(S):S,{name:T||gt(String(S)),path:S,handler:C,hooks:E1(M)}}function p(S,C,M){var T=this;return typeof S=="object"&&!(S instanceof RegExp)?(Object.keys(S).forEach(function(O){if(typeof S[O]=="function")T.on(O,S[O]);else{var q=S[O],j=q.uses,E=q.as,F=q.hooks;o.push(d(O,j,[l,F],E))}}),this):(typeof S=="function"&&(M=C,C=S,S=i),o.push(d(S,C,[l,M])),this)}function m(S,C){if(r.__dirty){r.__waiting.push(function(){return r.resolve(S,C)});return}else r.__dirty=!0;S=S?gt(i)+"/"+gt(S):void 0;var M={instance:r,to:S,currentLocationPath:S,navigateOptions:{},resolveOptions:ks({},n,C)};return jt([cc,Hi,jt.if(function(T){var O=T.matches;return O&&O.length>0},fc,uc)],M,$i),M.matches?M.matches:!1}function g(S,C){if(r.__dirty){r.__waiting.push(function(){return r.navigate(S,C)});return}else r.__dirty=!0;S=gt(i)+"/"+gt(S);var M={instance:r,to:S,navigateOptions:C||{},resolveOptions:C&&C.resolveOptions?C.resolveOptions:n,currentLocationPath:f(S)};jt([S1,T1,Hi,jt.if(function(T){var O=T.matches;return O&&O.length>0},fc,uc),M1,$i],M,$i)}function x(S,C,M){var T=Y(S,C);return T!==null?(g(T.replace(new RegExp("^/?"+i),""),M),!0):!1}function A(S){return this.routes=o=o.filter(function(C){return Ur(S)?gt(C.path)!==gt(S):x1(S)?S!==C.handler:String(C.path)!==String(S)}),this}function k(){c&&(this.__popstateListener=function(){r.__freezeListening||m()},window.addEventListener("popstate",this.__popstateListener))}function N(){this.routes=o=[],c&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=a=!0}function I(S,C){return r._notFoundRoute=d("*",S,[l,C],"__NOT_FOUND__"),this}function v(){if(u)return _().forEach(function(S){if(S.getAttribute("data-navigo")==="false"||S.getAttribute("target")==="_blank"){S.hasListenerAttached&&S.removeEventListener("click",S.navigoHandler);return}S.hasListenerAttached||(S.hasListenerAttached=!0,S.navigoHandler=function(C){if((C.ctrlKey||C.metaKey)&&C.target.tagName.toLowerCase()==="a")return!1;var M=S.getAttribute("href");if(typeof M>"u"||M===null)return!1;if(M.match(/^(http|https)/)&&typeof URL<"u")try{var T=new URL(M);M=T.pathname+T.search}catch{}var O=A1(S.getAttribute("data-navigo-options"));a||(C.preventDefault(),C.stopPropagation(),r.navigate(gt(M),O))},S.addEventListener("click",S.navigoHandler))}),r}function _(){return u?[].slice.call(document.querySelectorAll(n.linksSelector||hc)):[]}function y(S){return"/"+i+"/"+gt(S)}function L(S){return l=S,this}function W(){return s}function Y(S,C,M){var T=o.find(function(j){return j.name===S}),O=null;if(T){if(O=T.path,C)for(var q in C)O=O.replace(":"+q,C[q]);O=O.match(/^\//)?O:"/"+O}return O&&M&&!M.includeRoot&&(O=O.replace(new RegExp("^/"+i),"")),O}function Q(S){return S.getAttribute("href")}function K(S){var C=$r(gt(S)),M=C[0],T=C[1],O=T===""?null:wo(T),q=Hr(S),j=d(M,function(){},[l],M);return{url:M,queryString:T,hashString:q,route:j,data:null,params:O}}function H(){return K(gt($u(i)).replace(new RegExp("^"+i),""))}function V(S){var C={instance:r,currentLocationPath:S,to:S,navigateOptions:{},resolveOptions:n};return Hi(C,function(){}),C.matches?C.matches:!1}function z(S,C,M){typeof C<"u"&&(typeof M>"u"||M)&&(C=h(C));var T={instance:r,to:C,currentLocationPath:C};cc(T,function(){}),typeof S=="string"&&(S=typeof M>"u"||M?h(S):S);var O=zu(T,{name:String(S),path:S,handler:function(){},hooks:{}});return O||!1}function Z(S,C,M){return typeof C=="string"&&(C=X(C)),C?(C.hooks[S]||(C.hooks[S]=[]),C.hooks[S].push(M),function(){C.hooks[S]=C.hooks[S].filter(function(T){return T!==M})}):(console.warn("Route doesn't exists: "+C),function(){})}function X(S){return typeof S=="string"?o.find(function(C){return C.name===h(S)}):o.find(function(C){return C.handler===S})}function U(S){S.instance.__dirty=!1,S.instance.__waiting.length>0&&S.instance.__waiting.shift()()}this.root=i,this.routes=o,this.destroyed=a,this.current=s,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=U,this.on=p,this.off=A,this.resolve=m,this.navigate=g,this.navigateByName=x,this.destroy=N,this.notFound=I,this.updatePageLinks=v,this.link=y,this.hooks=L,this.extractGETParameters=function(S){return $r(f(S))},this.lastResolved=W,this.generate=Y,this.getLinkPath=Q,this.match=V,this.matchLocation=z,this.getCurrentLocation=H,this.addBeforeHook=Z.bind(this,"before"),this.addAfterHook=Z.bind(this,"after"),this.addAlreadyHook=Z.bind(this,"already"),this.addLeaveHook=Z.bind(this,"leave"),this.getRoute=X,this._pathToMatchObject=K,this._clean=gt,this._checkForAHash=f,this._setCurrent=function(S){return s=r.current=S},k.call(this),v.call(this)}var F1={};function U1(){window.location.host.startsWith("localhost")||F1.PUBLIC_URL;const t=!0,e=new B1("/",{hash:t});e.on("/default",()=>d1(!1)),e.notFound(()=>{e.navigate("/default")}),e.resolve()}c1();U1();
//# sourceMappingURL=index-2zPTAJUp.js.map
