{"version":3,"file":"index-MMoUjJbG.js","sources":["../../src/transition/browserStorage.ts","../../src/transition/utilities.ts","../../src/transition/umo.ts","../../src/transition/env.ts","../../src/transition/formatChangePossible.ts","../../src/transition/displayPointHistory.ts","../../src/transition/groupGames.ts","../../src/transition/modals.ts","../../src/transition/displayUpdate.ts","../../src/assets/icons/exportwhite.png","../../src/assets/icons/recycle.png","../../src/transition/modalExport.ts","../../src/transition/swipeList.ts","../../src/transition/events.ts","../../src/transition/UUID.ts","../../src/transition/loadMatch.ts","../../src/transition/displayMatchArchive.ts","../../src/transition/displayFormats.ts","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/ascending.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/bisector.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/bisect.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/range.js","../../node_modules/.pnpm/d3-array@1.0.2/node_modules/d3-array/src/ticks.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/array.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/identity.js","../../node_modules/.pnpm/d3-axis@1.0.4/node_modules/d3-axis/src/axis.js","../../node_modules/.pnpm/d3-dispatch@1.0.2/node_modules/d3-dispatch/src/dispatch.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/namespaces.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/namespace.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/creator.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/local.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/matcher.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/on.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selector.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/select.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selectorAll.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/filter.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/sparse.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/enter.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/constant.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/data.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/exit.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/merge.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/order.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/sort.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/call.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/nodes.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/node.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/size.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/empty.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/each.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/attr.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/window.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/style.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/property.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/classed.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/text.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/html.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/raise.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/lower.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/append.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/insert.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/remove.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/datum.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selection/index.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/select.js","../../node_modules/.pnpm/d3-selection@1.0.3/node_modules/d3-selection/src/selectAll.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/define.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/color.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/math.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/lab.js","../../node_modules/.pnpm/d3-color@1.0.2/node_modules/d3-color/src/cubehelix.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/constant.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/color.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/rgb.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/array.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/date.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/number.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/object.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/string.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/value.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/round.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/transform/index.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/hcl.js","../../node_modules/.pnpm/d3-interpolate@1.1.3/node_modules/d3-interpolate/src/cubehelix.js","../../node_modules/.pnpm/d3-timer@1.0.4/node_modules/d3-timer/src/timer.js","../../node_modules/.pnpm/d3-timer@1.0.4/node_modules/d3-timer/src/timeout.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/schedule.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/interrupt.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/tween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/attr.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/delay.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/duration.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/ease.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/filter.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/merge.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/on.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/remove.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/select.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/selection.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/style.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/text.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/transition.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/transition/index.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/cubic.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/poly.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/back.js","../../node_modules/.pnpm/d3-ease@1.0.2/node_modules/d3-ease/src/elastic.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/transition.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/selection/index.js","../../node_modules/.pnpm/d3-transition@1.0.3/node_modules/d3-transition/src/active.js","../../node_modules/.pnpm/d3-path@1.0.3/node_modules/d3-path/src/path.js","../../node_modules/.pnpm/d3-collection@1.0.2/node_modules/d3-collection/src/map.js","../../node_modules/.pnpm/d3-collection@1.0.2/node_modules/d3-collection/src/set.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/dsv.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/csv.js","../../node_modules/.pnpm/d3-dsv@1.0.3/node_modules/d3-dsv/src/tsv.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/add.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/cover.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/data.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/extent.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/quad.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/find.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/remove.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/root.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/size.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/visit.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/visitAfter.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/x.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/y.js","../../node_modules/.pnpm/d3-quadtree@1.0.2/node_modules/d3-quadtree/src/quadtree.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDecimal.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/exponent.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatGroup.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatDefault.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatRounded.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatTypes.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/formatSpecifier.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/locale.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/defaultLocale.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionFixed.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionPrefix.js","../../node_modules/.pnpm/d3-format@1.0.2/node_modules/d3-format/src/precisionRound.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/adder.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/math.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/area.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/bounds.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/rotation.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/length.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/path/area.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/polygonContains.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/transform.js","../../node_modules/.pnpm/d3-geo@1.4.0/node_modules/d3-geo/src/projection/equirectangular.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/count.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/each.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/sum.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/sort.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/path.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/descendants.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/leaves.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/links.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/hierarchy/index.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/dice.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/tree.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/slice.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/squarify.js","../../node_modules/.pnpm/d3-hierarchy@1.1.1/node_modules/d3-hierarchy/src/treemap/resquarify.js","../../node_modules/.pnpm/d3-queue@3.0.3/node_modules/d3-queue/src/array.js","../../node_modules/.pnpm/d3-queue@3.0.3/node_modules/d3-queue/src/queue.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/array.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/ordinal.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/band.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/constant.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/number.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/continuous.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/tickFormat.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/linear.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/interval.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/millisecond.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/duration.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/second.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/minute.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/hour.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/day.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/week.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/month.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/year.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcMinute.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcHour.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcDay.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcWeek.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcMonth.js","../../node_modules/.pnpm/d3-time@1.0.4/node_modules/d3-time/src/utcYear.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/locale.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/defaultLocale.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/isoFormat.js","../../node_modules/.pnpm/d3-time-format@2.0.3/node_modules/d3-time-format/src/isoParse.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/colors.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category10.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20b.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20c.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/category20.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/cubehelix.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/rainbow.js","../../node_modules/.pnpm/d3-scale@1.0.4/node_modules/d3-scale/src/viridis.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/constant.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/math.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/linear.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/point.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/line.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/noop.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/basis.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/bundle.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinal.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinalClosed.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/cardinalOpen.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRom.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRomClosed.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/catmullRomOpen.js","../../node_modules/.pnpm/d3-shape@1.0.4/node_modules/d3-shape/src/curve/monotone.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/RedBlackTree.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Edge.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Cell.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Circle.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Beach.js","../../node_modules/.pnpm/d3-voronoi@1.1.1/node_modules/d3-voronoi/src/Diagram.js","../../node_modules/.pnpm/d3-zoom@1.1.1/node_modules/d3-zoom/src/transform.js","../../src/transition/strokeSlider.ts","../../src/transition/touchManager.ts","../../src/transition/simpleChart.ts","../../src/transition/updateStats.ts","../../src/transition/viewManager.ts","../../src/transition/gameFish.ts","../../src/transition/momentumChart.ts","../../src/transition/gameTree.ts","../../src/transition/ptsChart.ts","../../src/transition/configureViz.ts","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/.pnpm/engine.io-parser@5.2.1/node_modules/engine.io-parser/build/esm/index.js","../../node_modules/.pnpm/@socket.io+component-emitter@3.1.0/node_modules/@socket.io/component-emitter/index.mjs","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/globalThis.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/util.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transport.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/yeast.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/.pnpm/engine.io-client@6.5.3/node_modules/engine.io-client/build/esm/socket.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/url.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/.pnpm/socket.io-parser@4.2.4/node_modules/socket.io-parser/build/esm/index.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/on.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/socket.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/manager.js","../../node_modules/.pnpm/socket.io-client@4.7.2/node_modules/socket.io-client/build/esm/index.js","../../src/transition/pulseCircle.ts","../../src/transition/coms.ts","../../src/transition/eventManager.ts","../../src/transition/broadcastScore.ts","../../src/transition/checkMatchEnd.ts","../../src/transition/strokeAction.ts","../../src/transition/updatePlayer.ts","../../src/transition/changeFormat.ts","../../src/transition/constants.ts","../../src/transition/classAction.ts","../../src/transition/exportMatch.ts","../../src/assets/icons/emailblack.png","../../src/transition/modalShare.ts","../../src/transition/editPoint.ts","../../src/transition/editPlayer.ts","../../src/assets/icons/points.jpg","../../src/transition/modalHelp.ts","../../src/transition/modalInfo.ts","../../src/transition/enterKey.ts","../../src/transition/clickActions.ts","../../src/transition/registerEvents.ts","../../node_modules/.pnpm/clipboard@2.0.11/node_modules/clipboard/dist/clipboard.js","../../src/transition/init.ts","../../src/assets/images/courthive-transparent-logo.png","../../src/pages/courthive/default.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/constants.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/utils.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/Q.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/setLocationPath.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/matchPathToRegisteredRoutes.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForDeprecationMethods.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForForceOp.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/updateBrowserURL.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForLeaveHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForBeforeHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/callHandler.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForAfterHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForAlreadyHook.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/checkForNotFoundHandler.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/errorOut.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/flushCurrent.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/updateState.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/lifecycles.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/processMatches.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/middlewares/waitingList.js","../../node_modules/.pnpm/navigo@8.11.1/node_modules/navigo/lib/es/index.js","../../src/router/router.js","../../src/main.ts"],"sourcesContent":["/**\n * Whether the current browser supports local storage as a way of storing data\n * @var {Boolean}\n */\nconst _hasLocalStorageSupport = (function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n * @param {String} name The name of the property to read from this document's cookies\n * @return {?String} The specified cookie property's value (or null if it has not been set)\n */\nconst _readCookie = function (name: string) {\n  const nameEQ = name + '=';\n  const ca = document.cookie.split(';');\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n    if (c.startsWith(nameEQ)) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n};\n\n/**\n * @param {String} name The name of the property to set by writing to a cookie\n * @param {String} value The value to use when setting the specified property\n * @param {int} [days] The number of days until the storage of this item expires\n */\nconst _writeCookie = function (name: string, value: string, days?: any) {\n  const expiration = (function () {\n    if (days) {\n      const date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      return '; expires=' + date.toUTCString();\n    } else {\n      return '';\n    }\n  })();\n\n  document.cookie = name + '=' + value + expiration + '; path=/';\n};\n\nexport const browserStorage = {\n  /**\n   * @param {String} name The name of the property to set\n   * @param {String} value The value to use when setting the specified property\n   * @param {int} [days] The number of days until the storage of this item expires (if storage of the provided item must fallback to using cookies)\n   */\n  set: function (name: string, value: string, days?: any) {\n    _hasLocalStorageSupport ? localStorage.setItem(name, value) : _writeCookie(name, value, days);\n  },\n\n  /**\n   * @param {String} name The name of the value to retrieve\n   * @return {?String} The value of the\n   */\n  get: function (name: string) {\n    return _hasLocalStorageSupport ? localStorage.getItem(name) : _readCookie(name);\n  },\n\n  /**\n   * @param {String} name The name of the value to delete/remove from storage\n   */\n  remove: function (name: string) {\n    _hasLocalStorageSupport ? localStorage.removeItem(name) : this.set(name, '', -1);\n  }\n};\n","export function isJSON(str: any) {\n  try {\n    JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nexport function showModal(text: string, data?: any) {\n  const modalText = document.getElementById('modaltext');\n  if (modalText) modalText.innerHTML = text;\n  if (data) {\n    console.log({ data });\n    const c2c = document.getElementById('copy2clipboard');\n    if (c2c) c2c.setAttribute('data-clipboard-text', data);\n  }\n  const modal = document.getElementById('modal');\n  if (modal) modal.style.display = 'flex';\n}\n\nexport function firstAndLast(value: string) {\n  const parts = value.split(' ');\n  let display = parts[0];\n  if (parts.length > 1) display += ' ' + parts[parts.length - 1];\n  return display;\n}\n\nexport function getOpponents(match: any) {\n  const format = match.format;\n  const sides = match.sides;\n  return 'singles' === format\n    ? sides.map(function (e: any) {\n        return firstAndLast(e[0]);\n      })\n    : sides.map(teamName);\n}\n\nfunction teamName(side: any[]) {\n  return side[0].last_name + '/' + side[1].last_name;\n}\n\nexport function attemptJSONparse(data: string) {\n  if (!data) return undefined;\n  try {\n    return JSON.parse(data);\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport function formatDate(date: string, separator = '-', format = 'YMD') {\n  if (!date) return '';\n\n  const d = new Date(date);\n  let month = '' + (d.getMonth() + 1);\n  let day = '' + d.getDate();\n  const year = d.getFullYear();\n\n  if (month.length < 2) month = '0' + month;\n  if (day.length < 2) day = '0' + day;\n\n  if (format == 'DMY') return [day, month, year].join(separator);\n  if (format == 'MDY') return [month, day, year].join(separator);\n  if (format == 'YDM') return [year, day, month].join(separator);\n  if (format == 'DYM') return [day, year, month].join(separator);\n  if (format == 'MYD') return [month, year, day].join(separator);\n  return [year, month, day].join(separator);\n}\n\nexport function generateRange(start: number, end: number) {\n  return Array.from({ length: end - start }, (_, k) => k + start);\n}\n\nexport function findUpClass(el: any, class_name: string) {\n  while (el.parentNode) {\n    el = el.parentNode;\n    if (el.classList && Array.from(el.classList).indexOf(class_name) >= 0) return el;\n  }\n  return null;\n}\n","const umo: any = function () {};\n\n// these events will propagate to all objects created with factory functions\numo.addPoint_events = [];\numo.undo_events = [];\numo.reset_events = [];\n\numo.pointParser = defaultPointParser;\n\nconst formats = {\n  games: {\n    advantage: { description: 'Advantage Game', tiebreak: false, hasDecider: false, threshold: 4, minDiff: 2 },\n    noAdvantage: { description: 'No Advantage Game', tiebreak: false, hasDecider: true, threshold: 4, minDiff: 1 },\n    tiebreak7a: { description: 'Tiebreak to 7', tiebreak: true, hasDecider: false, threshold: 7, minDiff: 2 },\n    tiebreak10a: { description: 'Tiebreak to 10', tiebreak: true, hasDecider: false, threshold: 10, minDiff: 2 },\n    tiebreak12a: { description: 'Tiebreak to 10', tiebreak: true, hasDecider: false, threshold: 12, minDiff: 2 },\n    tiebreak9n: {\n      description: 'Tiebreak to 9, Golden Point',\n      tiebreak: true,\n      hasDecider: true,\n      threshold: 9,\n      minDiff: 1\n    }\n  },\n  sets: {\n    AdSetsTo6tb7: {\n      description: 'Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 6,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'tiebreak7a'\n    },\n    NoAdSetsTo6tb7: {\n      description: 'No-Ad, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 6,\n      minDiff: 2,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak7a'\n    },\n    NoAdSetsTo4tb7: {\n      description: 'No-Ad, 4 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 4,\n      minDiff: 0,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak7a'\n    },\n    longSetTo6by2: {\n      description: 'Advantage, 6 games for set, win by 2 games',\n      hasDecider: false,\n      threshold: 6,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'advantage'\n    },\n    supertiebreak: {\n      description: 'Supertiebreak',\n      hasDecider: true,\n      threshold: 1,\n      minDiff: 1,\n      children: 'tiebreak10a',\n      decidingChild: 'tiebreak10a'\n    },\n    pro10a12: {\n      description: '10 Game No Ad Pro Set; tiebreak to 12',\n      hasDecider: true,\n      threshold: 10,\n      minDiff: 2,\n      children: 'noAdvantage',\n      decidingChild: 'tiebreak12a'\n    },\n    pro8a7: {\n      description: '8 Game Pro Set; tiebreak to 7',\n      hasDecider: true,\n      threshold: 8,\n      minDiff: 2,\n      children: 'advantage',\n      decidingChild: 'tiebreak7a'\n    }\n  },\n  matches: {\n    '3_6a_7': {\n      name: 'Standard Advantage',\n      description: 'best of 3 sets, Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'AdSetsTo6tb7'\n    },\n    '3_6n_7': {\n      name: 'Standard No-Advantage',\n      description: 'best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo6tb7',\n      decidingChild: 'NoAdSetsTo6tb7'\n    },\n    '3_4n_10': {\n      name: 'Standard Under 10',\n      description: 'best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo4tb7',\n      decidingChild: 'supertiebreak'\n    },\n    '1_4n_7': {\n      name: 'Under 10 Qualifying',\n      description: '4 games for set, No Advantage, Tiebreak to 7 at 3-3',\n      hasDecider: false,\n      threshold: 1,\n      minDiff: 0,\n      children: 'NoAdSetsTo4tb7',\n      decidingChild: 'NoAdSetsTo4tb7'\n    },\n    '3_6n_10': {\n      name: 'No-Ad, 3rd Set Supertiebreak',\n      description: 'best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'NoAdSetsTo6tb7',\n      decidingChild: 'supertiebreak'\n    },\n    '5_6a_7': {\n      name: 'US Open Men',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 3,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'AdSetsTo6tb7'\n    },\n    '5_6a_7_long': {\n      name: 'Grand Slam Men - Final Advantage Set',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games',\n      hasDecider: true,\n      threshold: 3,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'longSetTo6by2'\n    },\n    '3_6a_7_long': {\n      name: 'Grand Slam Women - Final Advantage Set',\n      description: 'best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games',\n      hasDecider: true,\n      threshold: 2,\n      minDiff: 0,\n      children: 'AdSetsTo6tb7',\n      decidingChild: 'longSetTo6by2'\n    },\n    '1_8a_7': {\n      name: '8 Game Pro Set',\n      description: '1 set, Advantage, 8 games for set, Tiebreak to 7',\n      hasDecider: true,\n      threshold: 1,\n      minDiff: 0,\n      children: 'pro8a7',\n      decidingChild: 'pro8a7'\n    }\n  }\n};\n\numo.formats = () => formats;\numo.newFormat = ({ type, code, description, tiebreak, hasDecider, threshold, minDiff, children, decidingChild }) => {\n  const hasType = Object.keys(formats).indexOf(type) >= 0;\n  const hasCode = hasType && Object.keys(formats[type]).indexOf(code) >= 0;\n  if (hasType && hasCode) return false;\n  formats[type][code] = { description, tiebreak, hasDecider, threshold, minDiff, children, decidingChild };\n  return true;\n};\n\numo.stateObject = ({ index, object, parent_object, child, format, common = umo.common() }) => {\n  const so: any = {};\n  so.child = child;\n  so.format = format;\n  so.child_attributes = ['hasDecider', 'threshold', 'minDiff', 'tiebreak', 'code', 'description'];\n\n  (so.reset = (format?: any) => {\n    so.children = [];\n    so.local_history = [];\n    so.counter = [0, 0];\n    so.first_service = 0;\n    if (!parent_object) {\n      common.metadata.reset();\n      common.metadata.resetStats();\n      common.history = [];\n      common.perspective_score = false;\n      common.events.reset().forEach((fx) => fx());\n    }\n    if (!parent_object && format) {\n      so.format.singles(true);\n      so.format.type(format);\n    }\n  })();\n\n  so.set = {\n    index(value) {\n      if (!arguments.length) return index;\n      if (!isNaN(value)) index = value;\n      return so.set;\n    },\n    liveStats(value) {\n      if (!arguments.length) return common.live_stats;\n      if ([true, false].indexOf(value) < 0) return false;\n      if (value && !common.live_stats && so.history.points().length) {\n        common.metadata.resetStats();\n        common.stats.counters();\n      }\n      if (!value && common.live_stats) common.metadata.resetStats();\n      common.live_stats = value;\n      return so.set;\n    },\n    perspectiveScore(value) {\n      if (!arguments.length) return common.perspective_score;\n      if (so.history.points().length) return false;\n      if ([true, false].indexOf(value) >= 0) common.perspective_score = value;\n      return so.set;\n    },\n    firstService(value) {\n      if (!arguments.length) return so.first_service;\n      if (common.metadata.serviceOrder().indexOf(value) < 0) return false;\n      so.first_service = value;\n      return so.set;\n    }\n  };\n\n  so.history = {};\n  so.history.local = () => so.local_history;\n  so.history.action = (action) => common.history.filter((episode) => episode.action == action);\n  so.history.points = (set) => {\n    let points = common.history.filter((episode) => episode.action == 'addPoint').map((episode) => episode.point);\n    if (set != undefined) points = points.filter((point) => point.set == set);\n    return points;\n  };\n  so.history.score = () => {\n    if (object == 'Game') return so.history.points().map((point) => point.score);\n    return [].concat(...so.children.map((child) => child.history.score()));\n  };\n  so.history.games = () =>\n    object == 'Set' ? so.local_history : [].concat(...so.children.map((child) => child.history.games()));\n  so.history.lastPoint = () => {\n    const point_history = so.history.points();\n    return point_history[point_history.length - 1] || { score: '0-0' };\n  };\n  so.history.common = () => common.history;\n\n  so.score = () => {\n    const counters: any = {\n      local: so.counter\n    };\n    counters.points =\n      object == 'Game'\n        ? so.complete()\n          ? [0, 0]\n          : so.counter\n        : so.lastChild()\n          ? so.lastChild().score().counters.points\n          : [0, 0];\n    counters.games =\n      object == 'Set'\n        ? so.complete()\n          ? [0, 0]\n          : so.counter\n        : object == 'Match'\n          ? so.lastChild()\n            ? so.lastChild().score().counters.games\n            : [0, 0]\n          : undefined;\n    counters.sets = object == 'Match' ? so.counter : undefined;\n    // let current = {};\n    const score: any = { counters };\n    score.points =\n      object == 'Game'\n        ? so.complete()\n          ? '0-0'\n          : so.scoreboard()\n        : so.lastChild()\n          ? so.lastChild().score().points\n          : '0-0';\n    score.games =\n      object == 'Set'\n        ? so.complete()\n          ? '0-0'\n          : so.perspectiveScore().join('-')\n        : so.lastChild()\n          ? so.lastChild().score().games\n          : '0-0';\n    score.sets =\n      object == 'Match'\n        ? so.complete()\n          ? '0-0'\n          : so.perspectiveScore().join('-')\n        : so.lastChild()\n          ? so.lastChild().score().sets\n          : '0-0';\n    score.components = {};\n    if (object == 'Match' && so.children.length) {\n      score.components.sets = so.children.map((set) => {\n        const map: any = { games: set.score().counters.local };\n        if (set.lastChild() && set.lastChild().format.tiebreak()) map.tiebreak = set.lastChild().score().counters.local;\n        return map;\n      });\n    }\n    score.display = {};\n    return score;\n  };\n\n  so.accessChildren = () => so.children;\n  so.lastChild = () => so.children[so.children.length - 1];\n  so.scoreDifference = () => Math.abs(so.counter[0] - so.counter[1]);\n  so.thresholdMet = () => Math.max(...so.counter) >= so.format.threshold();\n  so.minDifferenceMet = () => so.scoreDifference() >= so.format.minDiff();\n  so.singleThresholdMet = () =>\n    Math.max(...so.counter) >= so.format.threshold() && Math.min(...so.counter) < so.format.threshold();\n  so.winner = () => (so.complete() ? (so.counter[0] > so.counter[1] ? 0 : 1) : undefined);\n  so.reverseScore = () => common.perspective_score && so.nextTeamServing() % 2 == 1;\n  so.nextTeamServing = () =>\n    common.metadata\n      .teams()\n      .map((team: any) => team.indexOf(so.nextService()) >= 0)\n      .indexOf(true);\n  so.nextTeamReceiving = () =>\n    common.metadata\n      .teams()\n      .map((team: any) => team.indexOf(so.nextService()) >= 0)\n      .indexOf(false);\n  so.perspectiveScore = (counter = so.counter, force: boolean) => {\n    if (force != undefined) return force ? counter.slice().reverse() : counter;\n    return so.reverseScore() ? counter.slice().reverse() : counter;\n  };\n  so.complete = () => {\n    function beyondDoubleThreshold() {\n      return so.counter[0] >= so.format.threshold() && so.counter[1] >= so.format.threshold();\n    }\n    return (so.thresholdMet() && so.minDifferenceMet()) ||\n      (beyondDoubleThreshold() && so.scoreDifference() && so.format.hasDecider())\n      ? true\n      : false;\n  };\n  so.nextService = () => {\n    if (so.complete()) return false;\n    let last_child = so.lastChild();\n\n    if (common.metadata.serviceOrder().indexOf(so.first_service) < 0) {\n      // this would imply that #players decreased from 4 to 2\n      // so, if at the beginning of a game the next team should be 1 - last team\n      console.log('PROBLEM');\n    }\n\n    if (object == 'Game') {\n      if (!so.format.tiebreak()) return so.first_service;\n      return common.nextTiebreakService(so.local_history, so.first_service);\n    }\n\n    if (!last_child) return so.first_service;\n    if (last_child.complete()) {\n      let descendent = last_child.lastChild();\n      while (descendent) {\n        last_child = descendent;\n        descendent = last_child.lastChild();\n      }\n      const last_first_service = last_child.set.firstService();\n      return common.advanceService(last_first_service);\n    }\n    return last_child.nextService();\n  };\n\n  so.currentChild = () => {\n    if (so.complete()) return false;\n    const last_child = so.lastChild();\n    if (last_child && !last_child.complete()) return last_child;\n    return so.newChild();\n  };\n\n  so.newChild = () => {\n    let last_child = so.lastChild();\n    let next_first_service;\n    if (!last_child) {\n      next_first_service = so.first_service;\n    } else {\n      let descendent = last_child.lastChild();\n      while (descendent) {\n        last_child = descendent;\n        descendent = last_child.lastChild();\n      }\n      next_first_service = common.advanceService(last_child.set.firstService());\n    }\n\n    const threshold = so.format.threshold();\n    const min_diff = so.format.minDiff();\n    const countersAtValue = (value: any) => so.counter[0] == value && so.counter[1] == value;\n    const deciding_child_required =\n      (countersAtValue(threshold) && (so.format.hasDecider() || min_diff == 1)) ||\n      (countersAtValue(threshold - 1) && min_diff == 0);\n    const code = deciding_child_required ? so.format.decidingChild.settings().code : so.format.children.settings().code;\n    const total_children = so.children.length;\n\n    const new_child = umo[so.child.object]({ index: total_children, parent_object: so, type: code, common: common });\n    new_child.set.firstService(next_first_service);\n\n    if (!code) {\n      const source_format = deciding_child_required ? so.format.decidingChild : so.format.children;\n      copyAttributes(source_format, new_child.format, so.child_attributes);\n      if (source_format.children) {\n        copyAttributes(source_format.children, new_child.format.children, so.child_attributes);\n        copyAttributes(source_format.decidingChild, new_child.format.decidingChild, so.child_attributes);\n      }\n    }\n\n    so.children.push(new_child);\n    return new_child;\n\n    function copyAttributes(source, target, attributes) {\n      attributes.forEach((attribute: any) => {\n        if (typeof source[attribute] == 'function') {\n          const value = source[attribute]();\n          // let existing_value = target[attribute]();\n          target[attribute](value);\n          // let new_value = target[attribute]();\n        }\n      });\n    }\n  };\n\n  const addPoint = (value: any) => {\n    if (so.complete()) return { result: false };\n\n    const server = so.nextService();\n    const point = common.pointParser(\n      value,\n      server,\n      so.history.lastPoint(),\n      so.format,\n      common.metadata.teams(),\n      so.set.perspectiveScore(),\n      so.score()\n    );\n    if (!point) return { result: false };\n    so.counter[point.winner] += 1;\n\n    const attributes: any = {\n      points: so.counter.slice(),\n      score: so.scoreboard(),\n      number: so.local_history.filter((episode: any) => episode.winner != undefined).length,\n      index: so.history.points().length,\n      [object.toLowerCase()]: index\n    };\n\n    const points_to_game = so.pointsToGame();\n    const has_game_point = points_to_game ? points_to_game.indexOf(1) : undefined;\n    const breakpoint = has_game_point >= 0 && has_game_point == 1 - common.metadata.playerTeam(server);\n\n    if (breakpoint) attributes.breakpoint = true;\n    if (so.format.tiebreak()) attributes.tiebreak = true;\n    if (common.metadata.timestamps() && !point.uts) attributes.uts = new Date().valueOf();\n    Object.assign(point, attributes);\n    so.local_history.push(point);\n\n    const episode = {\n      action: 'addPoint',\n      result: true,\n      complete: so.complete(),\n      point: point,\n      needed: { points_to_game }\n    };\n\n    common.history.push(episode);\n    return episode;\n  };\n\n  so.addPoint = (value: any) => {\n    if (Array.isArray(value)) return false;\n    if (object == 'Game') return addPoint(value);\n\n    const child = so.currentChild();\n    if (!child) return { result: false };\n    const episode = child.addPoint(value);\n    if (!episode.result) return episode;\n\n    if (child.complete()) {\n      so.counter[episode.point.winner] += 1;\n      so.local_history.push({\n        winner: episode.point.winner,\n        [so.child.plural]: so.counter.slice(),\n        index: child.set.index()\n      });\n    }\n    episode.complete = so.complete();\n    episode.next_service = so.nextService();\n    const points_to_set = so.pointsNeeded ? so.pointsNeeded() : undefined;\n    if (points_to_set) episode.needed = Object.assign({}, episode.needed, points_to_set);\n    episode.point[so.child.label] = child.set.index();\n    episode[so.child.label] = {\n      complete: child.complete(),\n      winner: child.winner(),\n      [so.child.plural]: so.counter.slice(),\n      index: child.set.index()\n    };\n    if (!parent_object) common.addStatPoint(episode);\n    if (!parent_object) common.events.addPoint().forEach((fx) => fx(episode));\n    return episode;\n  };\n\n  so.addPoints = (values = []) => so.addMultiple({ values });\n\n  so.addScore = (value: any) => {\n    const episode = so.addPoint(value);\n    if (episode.result) return episode;\n    const last_point = so.history.lastPoint();\n    const last_points = !last_point || last_point.score == '0-0' ? [0, 0] : last_point.points;\n    // let total_points = last_points.reduce((a, b) => a + b);\n    const attempt = so.change.pointScore(value);\n    if (attempt.result) {\n      so.undo();\n      const new_points = attempt.pointChange.to;\n      // let new_total = new_points.reduce((a, b) => a + b);\n      const change = new_points\n        .map((p, i) => {\n          return { diff: p - last_points[i], i };\n        })\n        .filter((f) => f.diff);\n      if (change.length == 1 && change[0].diff > 0) {\n        let result;\n        const player = change[0].i;\n        const points_to_player = change[0].diff;\n        for (let p = 0; p < points_to_player; p++) {\n          result = so.addPoint(player);\n          if (!result.result) return result;\n          if (result.game.complete) return result;\n        }\n        return result;\n      }\n    }\n    return { result: false };\n  };\n\n  so.addScores = (values = []) => so.addMultiple({ values, fx: so.addScore });\n\n  so.addMultiple = ({ values = [], fx = so.addPoint }: { values: any; fx: any }) => {\n    if (typeof values == 'string') values = values.match(/[01A-Za-z][*#@]*/g);\n    const added = [];\n    let rejected: any[] = [];\n    while (values.length) {\n      const value = values.shift();\n      const episode = fx(value);\n      if (episode.result) {\n        added.push(episode);\n      } else {\n        values.unshift(value);\n        rejected = values.slice();\n        values = [];\n      }\n    }\n    return { result: added.length, added, rejected };\n  };\n\n  so.decoratePoint = (point, attributes) => {\n    const indices = common.history\n      .map((episode, i) => {\n        if (episode.action === 'addPoint' && episode.point.index == point.index) return i;\n      })\n      .filter((index) => index !== undefined);\n    if (!indices.length) return false;\n    const episode = common.history[indices[0]];\n    episode.point = Object.assign({}, episode.point, attributes);\n  };\n\n  so.change = {};\n  so.change.points = (values) => {\n    if (!numbersArray(values) || values.length != 2) return false;\n    if (object == 'Game') {\n      const past_threshold = Math.max(...values) > so.format.threshold();\n      const value_difference = Math.abs(values[0] - values[1]);\n      if (past_threshold && value_difference > so.format.minDiff()) return false;\n      if (so.complete()) return { result: false };\n      const episode = { action: 'changePoints', result: true, pointChange: { from: so.counter, to: values } };\n      so.local_history.push(episode);\n      common.history.push(episode);\n      so.counter = values;\n      if (so.complete()) {\n        const winner = parseInt(so.winner());\n        parent_object.counter[winner] += 1;\n        parent_object.local_history.push({ winner: winner, games: parent_object.counter.slice(), index: index });\n      }\n      return episode;\n    }\n    return so.propagatePointChange(values, 'points');\n  };\n  so.change.pointScore = (value) => {\n    if (value == '0-0') return so.change.points([0, 0]);\n    if (object == 'Game') {\n      if (so.format.tiebreak()) return so.change.points(value.split('-').map((v) => parseInt(v)));\n      value = value\n        .replace(':', '-')\n        .split('-')\n        .map((m) => m.trim())\n        .join('-')\n        .split('D')\n        .join('40');\n      const progression = Object.assign({}, adProgression);\n      if (so.format.hasDecider())\n        Object.keys(noAdProgression).forEach((key) => (progression[key] = noAdProgression[key]));\n      const valid_values = [].concat(...Object.keys(progression).map((key) => progression[key]));\n      if (valid_values.indexOf(value) < 0) return false;\n      const point_value = ['0', '15', '30', '40', 'A', 'G'];\n      const values = value.split('-').map((v) => point_value.indexOf(v));\n\n      // correct for advantage games that don't reach deuce\n      if (values[0] == 5 && values[1] != 3) values[0] = 4;\n      if (values[1] == 5 && values[0] != 3) values[1] = 4;\n      return so.change.points(values);\n    }\n    return so.propagatePointChange(value, 'pointScore');\n  };\n  so.propagatePointChange = (values, fx) => {\n    const last_child = so.lastChild();\n    if (!last_child) {\n      if (object == 'Match') {\n        return so.newChild().newChild().change[fx](values);\n      }\n      if (object == 'Set') {\n        return so.newChild().change[fx](values);\n      }\n    }\n    if (!parent_object && so.complete()) return { result: false };\n    if (last_child.complete()) {\n      return so.newChild().change[fx](values);\n    }\n    return last_child.change[fx](values);\n  };\n  so.change.games = (values) => {\n    if (!numbersArray(values) || values.length != 2) return false;\n    if (object == 'Game') return { result: false };\n    if (object == 'Set') {\n      if (so.complete()) return { result: false };\n      const episode = { action: 'changeGames', result: true, gameChange: { from: so.counter, to: values } };\n      so.local_history.push(episode);\n      common.history.push(episode);\n      so.counter = values;\n      return episode;\n    }\n    const last_child = so.lastChild();\n    if (!last_child && object == 'Match') {\n      return so.newChild().change.games(values);\n    }\n    if (!parent_object && so.complete()) return { result: false };\n    if (last_child.complete()) {\n      return so.newChild().change.games(values);\n    }\n    return last_child.change.games(values);\n  };\n\n  so.undo = (count = 1) => {\n    if (isNaN(count)) return false;\n    if (object != 'Game' && !so.children.length && !so.local_history.length) return false;\n    if (!common.history.length) return false;\n    const undo = () => {\n      const action = common.history[common.history.length - 1].action;\n      return undo_actions[action]();\n    };\n    const undone = [...Array(count).keys()].map(() => undo());\n    common.events.undo().forEach((fx) => fx(undone));\n    return count == 1 ? undone[0] : undone;\n  };\n\n  const undo_actions: any = {};\n  undo_actions.addPoint = () => {\n    if (object == 'Game') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter[common_episode.point.winner] -= 1;\n      common.removeStatPoint(common_episode);\n      // common.events.undo().forEach(fx => fx(common_episode.point));\n      return common_episode.point;\n    }\n    return so.propagateUndo();\n  };\n  undo_actions.changePoints = () => {\n    if (object == 'Game') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter = common_episode.pointChange.from;\n      return common_episode;\n    }\n    return so.propagateUndo();\n  };\n  undo_actions.changeGames = () => {\n    if (object == 'Set') {\n      // clean up local and common histories\n      so.local_history.pop();\n      const common_episode = common.history.pop();\n      so.counter = common_episode.gameChange.from;\n      return common_episode;\n    }\n    return so.propagateUndo();\n  };\n\n  so.propagateUndo = () => {\n    const last_child = so.lastChild();\n    const last_child_complete = last_child.complete();\n    const episode = last_child.undo();\n\n    // remove the last history event and decrement the counter\n    if (last_child_complete) {\n      // pop history of non-game object\n      const episode = so.local_history.pop();\n      if (episode && episode.winner != undefined) so.counter[episode.winner] -= 1;\n    }\n\n    if (!last_child.history.local().length && last_child.lastChild() == undefined) so.children.pop();\n    return episode;\n  };\n  return so;\n};\n\numo.Match = (params: any) => {\n  const { index, type, common = umo.common() } = params ?? {};\n  const child = { object: 'Set', label: 'set', plural: 'sets' };\n  const format = umo.matchFormat({ type, common });\n  const match = umo.stateObject({ index, object: 'Match', format, child, common });\n\n  match.scoreboard = (perspective) => {\n    if (!match.children.length) return '0-0';\n    if (perspective == undefined) perspective = match.set.perspectiveScore() ? match.nextService() : undefined;\n    return match.children.map((child) => child.scoreboard(perspective)).join(', ');\n  };\n\n  return {\n    set: match.set,\n    reset: match.reset,\n    format: match.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: match.nextService,\n    nextTeamServing: match.nextTeamServing,\n    nextTeamReceiving: match.nextTeamReceiving,\n    change: match.change,\n    undo: match.undo,\n    addPoint: match.addPoint,\n    addPoints: match.addPoints,\n    decoratePoint: match.decoratePoint,\n    addScore: match.addScore,\n    addScores: match.addScores,\n    complete: match.complete,\n    winner: match.winner,\n    score: match.score,\n    scoreboard: match.scoreboard,\n    [match.child.plural]: match.accessChildren,\n    history: match.history,\n    stats: common.stats\n  };\n};\n\numo.Set = ({ index, parent_object, type, common = umo.common() }) => {\n  const child = { object: 'Game', label: 'game', plural: 'games' };\n  const format = umo.setFormat({ type, common });\n  const set = umo.stateObject({ index, parent_object, object: 'Set', format, child, common });\n\n  set.pointsNeeded = () => {\n    const threshold = set.format.threshold();\n    if (set.complete()) {\n      const points_to_set = [];\n      points_to_set[set.winner()] = 0;\n      const loser = 1 - set.winner();\n      const pts = set.history\n        .action('addPoint')\n        .filter((episode) => episode.point.set == index)\n        .map((episode) => episode.needed.points_to_set)\n        .filter((f) => f);\n      points_to_set[loser] = Math.max(...pts.map((p) => p[loser]));\n      return { points_to_set };\n    }\n    const deciding_game = set.format.hasDecider();\n    const score_difference = set.scoreDifference();\n    const min_diff = set.format.minDiff();\n    const deciding_game_format_required = [false, false];\n    const games_to_set = set.counter.map((player_score, player) => {\n      const opponent_score = set.counter[1 - player];\n      if (player_score > opponent_score) {\n        if (opponent_score == threshold && deciding_game) return 0;\n        if (player_score >= threshold && score_difference >= min_diff) return 0;\n        if (player_score >= threshold - 1) return 1;\n        return threshold - player_score;\n      } else if (opponent_score > player_score) {\n        deciding_game_format_required[player] = deciding_game && threshold == opponent_score;\n        if (player_score == threshold && deciding_game) return 0;\n        if (opponent_score >= threshold && score_difference >= min_diff) return 0;\n        if (deciding_game_format_required[player]) return score_difference + 1;\n        if (opponent_score >= threshold - 1) return score_difference + min_diff;\n        return threshold - player_score;\n      } else {\n        deciding_game_format_required[player] =\n          (deciding_game && threshold == player_score && threshold == opponent_score) ||\n          (min_diff == 1 && threshold == player_score && threshold == opponent_score) ||\n          (min_diff == 0 && threshold - 1 == player_score && threshold - 1 == opponent_score);\n        if (deciding_game_format_required[player]) return 1;\n        if (player_score >= threshold - 1) return min_diff;\n        return threshold - player_score;\n      }\n    });\n\n    const last_game = set.lastChild();\n    const points_to_set = games_to_set.map((player_games_to_set, player) => {\n      let points_needed = 0;\n      if (last_game && !last_game.complete()) {\n        points_needed += last_game.pointsToGame()[player];\n        player_games_to_set -= 1;\n      }\n      if (!player_games_to_set) return points_needed;\n\n      if (deciding_game_format_required[player]) {\n        points_needed += set.format.decidingChild.threshold();\n        player_games_to_set -= 1;\n      }\n\n      for (let i = player_games_to_set; i; i--) {\n        points_needed += set.format.children.threshold();\n      }\n      return points_needed;\n    });\n\n    return { points_to_set, games_to_set };\n  };\n\n  // let formatScore = ([p0score, p1score], [t0score, t1score], tiebreak_to) => {\n  const formatScore = ([p0score, p1score], [t0score, t1score]) => {\n    if (t0score || t1score) {\n      if (t0score > t1score) p1score += `(${t1score})`;\n      if (t1score > t0score) p0score += `(${t0score})`;\n    }\n    return `${p0score}-${p1score}`;\n  };\n\n  set.scoreboard = (perspective) => {\n    const last_game = set.lastChild();\n    const score = set.perspectiveScore(set.counter, perspective);\n    if (!last_game) return score.join('-');\n    const tiebreak = last_game.format.tiebreak() === true;\n    if (last_game.complete() && !tiebreak) return score.join('-');\n    if (!last_game.complete()) return `${score.join('-')} (${last_game.scoreboard(perspective)})`;\n    const last_game_score = last_game.score().counters.local;\n    const tiebreak_score = set.perspectiveScore(last_game_score, perspective);\n    if (tiebreak && set.complete() && set.children.length == 1) return tiebreak_score.join('-');\n    // let tiebreak_to = last_game.format.threshold();\n    // return formatScore(score, tiebreak_score, tiebreak_to);\n    return formatScore(score, tiebreak_score);\n  };\n\n  return {\n    set: set.set,\n    reset: set.reset,\n    format: set.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: set.nextService,\n    nextTeamServing: set.nextTeamServing,\n    nextTeamReceiving: set.nextTeamReceiving,\n    change: set.change,\n    undo: set.undo,\n    addPoint: set.addPoint,\n    addPoints: set.addPoints,\n    decoratePoint: set.decoratePoint,\n    addScore: set.addScore,\n    addScores: set.addScores,\n    complete: set.complete,\n    winner: set.winner,\n    score: set.score,\n    scoreboard: set.scoreboard,\n    [set.child.plural]: set.accessChildren,\n    children: set.accessChildren,\n    lastChild: set.lastChild,\n    newChild: set.newChild,\n    history: set.history,\n    pointsNeeded: set.pointsNeeded\n  };\n};\n\numo.Game = ({ index, parent_object, type, common = umo.common() }) => {\n  const child = { object: 'Point', label: 'point', plural: 'points' };\n  const format = umo.gameFormat({ type, common });\n  const game = umo.stateObject({ index, object: 'Game', parent_object, format, child, common });\n\n  game.pointsToGame = () => {\n    if (game.complete()) return undefined;\n    const threshold = game.format.threshold();\n    const deciding_point = game.format.hasDecider();\n    const score_difference = game.scoreDifference();\n    const min_diff = game.format.minDiff();\n    return game.counter.map((player_score, player) => {\n      const opponent_score = game.counter[1 - player];\n      if (player_score > opponent_score) {\n        if (opponent_score == threshold && deciding_point) return 0;\n        if (player_score >= threshold && score_difference >= min_diff) return 0;\n        if (player_score >= threshold - 1) return 1;\n        return threshold - player_score;\n      } else if (opponent_score > player_score) {\n        if (player_score == threshold && deciding_point) return 0;\n        if (opponent_score >= threshold && score_difference >= min_diff) return 0;\n        if (opponent_score == threshold && deciding_point) return score_difference + 1;\n        if (opponent_score >= threshold - 1) return score_difference + min_diff;\n        return threshold - player_score;\n      } else {\n        if (deciding_point && threshold == player_score && threshold == opponent_score) return 1;\n        if (player_score >= threshold - 1) return min_diff;\n        return threshold - player_score;\n      }\n    });\n  };\n\n  game.scoreboard = (perspective) => {\n    let scoreboard;\n    const threshold = game.format.threshold();\n    const min_diff = game.format.minDiff();\n    const score = game.perspectiveScore(game.counter, perspective);\n    const tiebreak = threshold != 4 || game.format.tiebreak() == true;\n    if (tiebreak) return score.join('-');\n    if (\n      !game.thresholdMet() ||\n      (game.singleThresholdMet() && game.minDifferenceMet()) ||\n      (game.singleThresholdMet() && game.format.hasDecider() && min_diff == 1)\n    ) {\n      const progression = ['0', '15', '30', '40', 'G', 'G'];\n      scoreboard = score.map((points) => progression[points]).join('-');\n    } else {\n      scoreboard = score\n        .map((points, player) => {\n          const opponent_points = score[1 - player];\n          const point = points - threshold;\n          const opponent_point = opponent_points - threshold;\n          if (point > opponent_point && game.minDifferenceMet()) return 'G';\n          return point > opponent_point ? 'A' : '40';\n        })\n        .join('-');\n    }\n    return scoreboard.indexOf('G') >= 0 ? '0-0' : scoreboard;\n  };\n\n  return {\n    set: game.set,\n    reset: game.reset,\n    format: game.format,\n    events: common.events,\n    assignParser: common.assignParser,\n    metadata: common.metadata,\n    nextService: game.nextService,\n    nextTeamServing: game.nextTeamServing,\n    nextTeamReceiving: game.nextTeamReceiving,\n    change: game.change,\n    undo: game.undo,\n    addPoint: game.addPoint,\n    addPoints: game.addPoints,\n    decoratePoint: game.decoratePoint,\n    addScore: game.addScore,\n    addScores: game.addScores,\n    complete: game.complete,\n    winner: game.winner,\n    score: game.score,\n    scoreboard: game.scoreboard,\n    history: game.history,\n    lastChild: game.lastChild,\n    pointsToGame: game.pointsToGame\n  };\n};\n\n// necessary to define it this way so that hoisting works!\numo.defaultPointParser = defaultPointParser;\nfunction defaultPointParser(value, server, last_point, format, teams, perspective, score_object) {\n  if (value == undefined) return false;\n  if (value.toString().length == 1 && !isNaN(value)) {\n    const code = +value == server ? 'S' : 'R';\n    return [0, 1].indexOf(+value) < 0 ? false : { winner: +value, server: server, code: code };\n  }\n\n  let winning_team;\n  const serving_team = teams.map((team) => team.indexOf(server) >= 0).indexOf(true);\n  const point: any = { server: server };\n\n  if (typeof value == 'object') {\n    if (value.winner != undefined && [0, 1].indexOf(+value.winner) >= 0) {\n      value.winner = parseInt(value.winner);\n      value.code = !value.code ? (value.winner == server ? 'S' : 'R') : value.code;\n      // lowercase indicates that point was played on second serve\n      if (value.first_serve) value.code = value.code.toLowerCase();\n      return Object.assign({}, value, point);\n    }\n    if (value.code && parseCode(value.code)) return Object.assign({}, value, point);\n  }\n\n  if (typeof value == 'string') {\n    if (parseScore(value)) return point;\n    if (parseCode(value)) return point;\n  }\n\n  function parseCode(code) {\n    let upper_code = code.toUpperCase().match(/[A-Za-z]/g);\n    let modifier = code.match(/[*#@]/g);\n    if (upper_code) upper_code = upper_code.join('');\n    if (modifier) modifier = modifier.join('');\n    if ('SAQDRP'.split('').indexOf(String(upper_code)) >= 0) {\n      if (['S', 'A', 'Q'].indexOf(upper_code) >= 0) {\n        winning_team = serving_team;\n      }\n      if (['D', 'R', 'P'].indexOf(upper_code) >= 0) {\n        winning_team = 1 - serving_team;\n      }\n      if (['Q', 'P'].indexOf(upper_code) >= 0) {\n        point.result = 'Penalty';\n      }\n      if (upper_code == 'A') point.result = 'Ace';\n      if (upper_code == 'D') {\n        point.first_serve = { error: 'Error', serves: ['0e'] };\n        point.result = 'Double Fault';\n      }\n      if (modifier && !point.result) {\n        if (modifier == '*') point.result = 'Winner';\n        if (modifier == '#') point.result = 'Forced Error';\n        if (modifier == '@') point.result = 'Unforced Error';\n      }\n      point.code = code;\n      point.winner = parseInt(winning_team);\n      if (code === code.toLowerCase()) point.first_serve = { error: 'Error', serves: ['0e'] };\n      return point;\n    }\n  }\n\n  function parseScore(value) {\n    value = value\n      .replace(':', '-')\n      .split('-')\n      .map((m) => m.trim())\n      .join('-')\n      .split('D')\n      .join('40');\n    if (value.split('-').length != 2) return false;\n    let last_score = score_object.points;\n    const combinedTotal = (score) => score.reduce((a, b) => a + b);\n    if (format.tiebreak()) {\n      const values = value.split('-').map((m) => parseInt(m));\n      const last_values = last_score.split('-').map((m) => parseInt(m));\n      if (!numbersArray(values) || values.length != 2) return false;\n      if (combinedTotal(last_values) + 1 != combinedTotal(values)) return false;\n      const change = [Math.abs(values[0] - last_values[0]), Math.abs(values[1] - last_values[1])];\n      point.winner = change.indexOf(1);\n      return point;\n    }\n    const progression = Object.assign({}, adProgression);\n    if (format.hasDecider()) Object.keys(noAdProgression).forEach((key) => (progression[key] = noAdProgression[key]));\n\n    if (value == '0-0' && progression[last_score].join('-').indexOf('G') >= 0) {\n      // one player had game point.  assign winner based on which player has greater # of points.\n      point.winner = last_point.points.indexOf(Math.max(...last_point.points));\n      return point;\n    }\n    // after a tiebreak, for instance...\n    if (progression[last_score] == undefined) last_score = '0-0';\n    let winner = progression[last_score] ? progression[last_score].indexOf(value) : false;\n    if (winner >= 0) {\n      if (perspective && server) winner = 1 - winner;\n      point.winner = winner;\n      return point;\n    }\n  }\n}\n\nconst noAdProgression = { '40-40': ['G-40', '40-G'] };\nconst adProgression = {\n  '0-0': ['15-0', '0-15'],\n  '0-15': ['15-15', '0-30'],\n  '0-30': ['15-30', '0-40'],\n  '0-40': ['15-40', '0-G'],\n  '15-0': ['30-0', '15-15'],\n  '15-15': ['30-15', '15-30'],\n  '15-30': ['30-30', '15-40'],\n  '15-40': ['30-40', '15-G'],\n  '30-0': ['40-0', '30-15'],\n  '30-15': ['40-15', '30-30'],\n  '30-30': ['40-30', '30-40'],\n  '30-40': ['40-40', '30-G'],\n  '40-0': ['G-0', '40-15'],\n  '40-15': ['G-15', '40-30'],\n  '40-30': ['G-30', '40-40'],\n  '40-40': ['A-40', '40-A'],\n  'A-40': ['G-40', '40-40'],\n  '40-A': ['40-40', '40-G']\n};\n\numo.matchFormat = ({ type = '3_6a_7', common }) => {\n  const mf = umo.formatObject({ plural: 'matches', common });\n  mf.children = umo.setFormat({ common });\n  mf.decidingChild = umo.setFormat({ common });\n  mf.init(type);\n\n  return {\n    description: mf.description,\n    singles: mf.singles,\n    doubles: mf.doubles,\n    settings: mf.settings,\n    type: mf.type,\n    types: mf.types,\n    threshold: mf.threshold,\n    hasDecider: mf.hasDecider,\n    minDiff: mf.minDiff,\n    children: mf.children,\n    decidingChild: mf.decidingChild\n  };\n};\n\numo.setFormat = ({ type = 'AdSetsTo6tb7', common }) => {\n  const sf = umo.formatObject({ plural: 'sets', common });\n  sf.children = umo.gameFormat({ common });\n  sf.decidingChild = umo.gameFormat({ common, type: 'tiebreak7a' });\n  sf.init(type);\n\n  return {\n    description: sf.description,\n    singles: sf.singles,\n    doubles: sf.doubles,\n    settings: sf.settings,\n    type: sf.type,\n    types: sf.types,\n    threshold: sf.threshold,\n    hasDecider: sf.hasDecider,\n    minDiff: sf.minDiff,\n    children: sf.children,\n    decidingChild: sf.decidingChild\n  };\n};\n\numo.gameFormat = ({ type = 'advantage', common }) => {\n  const gf = umo.formatObject({ plural: 'games', common });\n  gf.init(type);\n\n  return {\n    description: gf.description,\n    settings: gf.settings,\n    singles: gf.singles,\n    doubles: gf.doubles,\n    type: gf.type,\n    types: gf.types,\n    threshold: gf.threshold,\n    hasDecider: gf.hasDecider,\n    minDiff: gf.minDiff,\n    tiebreak: gf.tiebreak\n  };\n};\n\numo.formatObject = ({ plural, common = umo.common() }) => {\n  const fo = {\n    values: { plural: plural },\n    singles: common.singles,\n    doubles: common.doubles,\n    init(format_type) {\n      if (fo.types(fo.values.plural).indexOf(format_type) >= 0) {\n        fo.type(format_type);\n        fo.values.initial_code = format_type;\n      }\n    },\n    types(object = fo.values.plural) {\n      return Object.keys(formats[object]);\n    },\n    type(format_type) {\n      if (!fo.values.plural) return false;\n      if (format_type === true && fo.values.initial_code) format_type = fo.values.initial_code;\n      if (fo.types(fo.values.plural).indexOf(format_type) >= 0) {\n        const f = formats[fo.values.plural][format_type];\n\n        fo.hasDecider(f.hasDecider).minDiff(f.minDiff).threshold(f.threshold);\n        if (f.tiebreak != undefined) fo.tiebreak(f.tiebreak);\n\n        // must be set after all other attributes!\n        fo.name(f.name);\n        fo.description(f.description);\n        fo.values.code = format_type;\n\n        if (f.children) fo.children.type(f.children);\n        if (f.decidingChild) fo.decidingChild.type(f.decidingChild);\n        return true;\n      }\n    },\n    settings(params?: any) {\n      const { name, description, code, players, threshold, has_decider, min_diff, tiebreak } = params ?? {};\n      if (code) {\n        fo.type(code);\n      } else if (!threshold || !has_decider || !min_diff || !tiebreak) {\n        const number_of_players = typeof common.singles == 'function' ? (common.singles() ? 2 : 4) : '';\n        return {\n          name: fo.values.name,\n          description: fo.values.description,\n          code: fo.values.code,\n          players: number_of_players,\n          threshold: fo.values.threshold,\n          has_decider: fo.values.has_decider,\n          min_diff: fo.values.min_diff,\n          tiebreak: fo.values.tiebreak\n        };\n      } else {\n        // TODO: propagate these settings down to unfinished sets/games\n        fo.tiebreak(tiebreak);\n        fo.threshold(threshold);\n        fo.minDiff(min_diff);\n        fo.hasDecider(has_decider);\n        if (description) fo.description(description);\n        if (name) fo.name(name);\n        if (players) {\n          if (players == 4) {\n            fo.doubles();\n          } else {\n            fo.singles();\n          }\n        }\n      }\n    },\n    name(value) {\n      if (!arguments.length) return fo.values.name;\n      if (typeof value == 'string') fo.values.name = value;\n      return fo;\n    },\n    description(value) {\n      if (!arguments.length) return fo.values.description;\n      if (typeof value == 'string') fo.values.description = value;\n      return fo;\n    },\n    tiebreak(value) {\n      if (!arguments.length) return fo.values.tiebreak;\n      fo.values.description = fo.values.code = undefined;\n      if ([true, false].indexOf(value) >= 0) fo.values.tiebreak = value;\n      return fo;\n    },\n    threshold(value) {\n      if (!arguments.length) return fo.values.threshold;\n      fo.values.description = fo.values.code = undefined;\n      if (!isNaN(value)) fo.values.threshold = value;\n      return fo;\n    },\n    minDiff(value) {\n      if (!arguments.length) return fo.values.min_diff;\n      fo.values.description = fo.values.code = undefined;\n      if (!isNaN(value)) fo.values.min_diff = value;\n      return fo;\n    },\n    hasDecider(value) {\n      if (!arguments.length) return fo.values.has_decider;\n      fo.values.description = fo.values.code = undefined;\n      if ([true, false].indexOf(value) >= 0) fo.values.has_decider = value;\n      return fo;\n    }\n  };\n  return fo;\n};\n\numo.common = () => {\n  let number_of_players = 2;\n  let addPoint_events = umo.addPoint_events.slice();\n  let undo_events = umo.undo_events.slice();\n  let reset_events = umo.reset_events.slice();\n  let metadata: any = {};\n\n  let stat_points;\n  let last_episode;\n  let filtered_stats;\n\n  const accessors = {\n    resetStats() {\n      stat_points = undefined;\n      last_episode = undefined;\n      filtered_stats = undefined;\n    },\n    reset() {\n      metadata = {\n        players: [],\n        teams: [],\n        service_order: [0, 1],\n        receive_order: [1, 0],\n        tournament: {},\n        match: {},\n        timestamps: false,\n        charter: undefined\n      };\n    },\n    timestamps(value) {\n      if (!arguments.length) return metadata.timestamps;\n      if ([true, false].indexOf(value) >= 0) metadata.timestamps = value;\n      return accessors;\n    },\n    serviceOrder(order?: any) {\n      if (!arguments.length) return metadata.service_order.slice();\n      return changeOrder(order, 'service_order', 'receive_order');\n    },\n    doublesServiceChange() {\n      if (number_of_players != 4) return false;\n      // FIXME: Not allowed if not the end of a set; how to determine within common?\n    },\n    receiveOrder(order) {\n      if (!arguments.length) return metadata.receive_order.slice();\n      return changeOrder(order, 'receive_order', 'service_order');\n    },\n    teams() {\n      const teams = [];\n      teams[0] = metadata.service_order.filter((_, i: number) => (i + 1) % 2).sort();\n      teams[1] = metadata.service_order.filter((_, i: number) => i % 2).sort();\n      teams.sort();\n      return teams;\n    },\n    playerTeam(player) {\n      return accessors\n        .teams()\n        .map((team) => team.indexOf(player) >= 0)\n        .indexOf(true);\n    },\n    teamPlayers() {\n      return accessors.teams().map((team) => team.map((i) => accessors.players(i).name));\n    },\n    players(index?: number) {\n      if (!arguments.length) {\n        if (metadata.players.length > metadata.service_order.length) return metadata.players;\n        return metadata.service_order.map((i) => accessors.players(i));\n      }\n      if (isNaN(index) || index < 0 || index > 3) return false;\n      if (metadata.players[index]) return metadata.players[index];\n      return { name: `Player ${['One', 'Two', 'Three', 'Four'][index]}` };\n    },\n    definePlayer(params?: any) {\n      const { name, birth, puid, hand, seed, rank, age, entry, ioc, draw_position } = params ?? {};\n      let index = params?.index;\n      if (index == undefined) index = metadata.players.length;\n      const player = metadata.players[index] || {};\n      if ((!name && !player.name) || isNaN(index) || index > 3) return false;\n      const definition = { name, birth, puid, hand, seed, rank, age, entry, ioc, draw_position };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) player[key] = definition[key];\n      });\n      metadata.players[index] = player;\n      return { index, player };\n    },\n    defineTournament(params?: any) {\n      const { name, tuid, start_date, tour, rank, surface, in_out, draw, draw_size, round, level } = params ?? {};\n      const definition = { name, tuid, start_date, tour, rank, surface, in_out, draw, draw_size, round, level };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) metadata.tournament[key] = definition[key];\n      });\n      return metadata.tournament;\n    },\n    defineMatch(params?: any) {\n      const { muid, date, gender, year, court, start_time, end_time, duration, status, umpire, official_score } =\n        params ?? {};\n      const definition = {\n        muid,\n        date,\n        gender,\n        year,\n        court,\n        start_time,\n        end_time,\n        duration,\n        status,\n        umpire,\n        official_score\n      };\n      Object.keys(definition).forEach((key) => {\n        if (definition[key]) metadata.match[key] = definition[key];\n      });\n      return metadata.match;\n    },\n    showTiebreakOrder(first_service) {\n      return calcTiebreakService(12, first_service);\n    }\n  };\n\n  function changeOrder(order, submitted, counterpart) {\n    const sameOrder = (a, b) => !a.filter((o, i) => o != b[i]).length;\n    const notXinY = (x, y) => y.filter((n) => x.indexOf(n) != -1).length != y.length;\n    if (\n      !Array.isArray(order) ||\n      order.length != number_of_players ||\n      notXinY(order, [0, 1]) ||\n      notXinY([0, 1, 2, 3], order)\n    )\n      return false;\n\n    const no_format_change = order.length == metadata[submitted].length;\n    if (sameOrder(order, metadata[submitted]) && no_format_change) return accessors;\n\n    const teams = accessors.teams();\n    metadata[submitted] = order;\n    const new_teams = accessors.teams();\n\n    if (\n      order.length == 4 &&\n      sameOrder(teams[0], new_teams[0]) &&\n      no_format_change &&\n      serviceToOpponent(metadata[submitted], metadata[counterpart], new_teams)\n    )\n      return accessors;\n\n    metadata[counterpart] = order.map((o) => order.length - 1 - o);\n    return accessors;\n  }\n\n  function serviceToOpponent(players, opponents, teams) {\n    const sameTeam = (p, o) =>\n      teams.filter((team) => team.filter((player) => [p, o].indexOf(player) >= 0).length > 1).length;\n    return !players.filter((s, i) => sameTeam(s, opponents[i])).length;\n  }\n\n  function calcTiebreakService(number, first_service) {\n    const progression = [];\n    return [...Array(number).keys()].map(() => {\n      const result = calcNext(progression, first_service);\n      progression.push(result);\n      return result;\n    });\n  }\n\n  function calcNext(progression, first_service) {\n    const last_position = pos(progression.length);\n    const next_position = (progression.length + 1) % 4 < 2;\n    const last_score = progression[progression.length - 1];\n    const last_service =\n      last_score != undefined ? last_score : first_service != undefined ? first_service : metadata.service_order[0];\n    return next_position == last_position ? last_service : pub.advanceService(last_service);\n  }\n\n  function pos(number) {\n    const iterations = [true].concat([...Array(number).keys()].map((i) => (i + 1) % 4 < 2));\n    return iterations[number];\n  }\n\n  function setServiceOrder() {\n    if (number_of_players == 2) {\n      const existing_order = pub.metadata.serviceOrder();\n      if (existing_order.length == 2) return;\n      pub.metadata.serviceOrder(existing_order.filter((f) => [0, 1].indexOf(f) >= 0));\n    } else {\n      const existing_order = pub.metadata.serviceOrder();\n      if (existing_order.length == 4) return;\n      const new_order = existing_order.slice();\n      existing_order.forEach((o) => new_order.push(o + 2));\n      pub.metadata.serviceOrder(new_order);\n    }\n  }\n\n  const addEvent = (add_event) => {\n    if (!add_event) return addPoint_events;\n    if (typeof add_event == 'function') {\n      if (addPoint_events.indexOf(add_event) < 0) addPoint_events.push(add_event);\n    } else if (Array.isArray(add_event)) {\n      console.log({ add_event });\n      /*\n      add_event.foreach((e, c) => {\n        if (typeof e == 'function') addPoint_events.push(c);\n      });\n      */\n    }\n  };\n\n  const undoEvent = (undo_event) => {\n    if (!undo_event) return undo_events;\n    if (typeof undo_event == 'function') {\n      if (undo_events.indexOf(undo_event) < 0) undo_events.push(undo_event);\n    } else if (Array.isArray(undo_event)) {\n      console.log({ undo_event });\n      /*\n      undo_event.foreach(e)((e) => {\n        if (typeof e == 'function') undo_events.push(c);\n      });\n      */\n    }\n  };\n\n  const resetEvent = (reset_event) => {\n    if (!reset_event) return reset_events;\n    if (typeof reset_event == 'function') {\n      if (reset_events.indexOf(reset_event) < 0) reset_events.push(reset_event);\n    } else if (Array.isArray(reset_event)) {\n      console.log({ reset_event });\n      /*\n      reset_event.foreach(e)((e) => {\n        if (typeof e == 'function') reset_events.push(c);\n      });\n      */\n    }\n  };\n\n  const clearEvents = () => {\n    addPoint_events = [];\n    undo_events = [];\n    reset_events = [];\n  };\n\n  const pub = {\n    metadata: accessors,\n    pointParser: umo.pointParser,\n    events: { addPoint: addEvent, undo: undoEvent, clearEvents, reset: resetEvent },\n    history: [],\n    live_stats: false,\n    perspective_score: false,\n    assignParser(parser) {\n      pub.pointParser = parser;\n    },\n    advanceService(service) {\n      const index = metadata.service_order.indexOf(service) + 1;\n      return metadata.service_order[index < accessors.players().length ? index : 0];\n    },\n    nextTiebreakService(history, first_service) {\n      const so = calcTiebreakService(history.length + 1, first_service);\n      return so[so.length - 1];\n    },\n    singles(value) {\n      if (!arguments.length) return number_of_players == 2 ? true : false;\n      number_of_players = value ? 2 : 4;\n      setServiceOrder();\n      return pub;\n    },\n    doubles(value) {\n      if (!arguments.length) return number_of_players == 4 ? true : false;\n      number_of_players = value ? 4 : 2;\n      setServiceOrder();\n      return pub;\n    },\n    stats: {\n      calculated(set_filter) {\n        return calculatedStats(pub.stats.counters(set_filter));\n      },\n      counters(set_filter) {\n        if (\n          (set_filter != undefined && filtered_stats != set_filter) ||\n          (set_filter == undefined && filtered_stats != undefined)\n        ) {\n          accessors.resetStats();\n        }\n        if (!stat_points) {\n          pub.live_stats = true;\n          let episodes = pub.history.filter((episode) => episode.action === 'addPoint');\n          if (set_filter != undefined) {\n            episodes = episodes.filter((episode) => episode.point.set === set_filter);\n            filtered_stats = set_filter;\n          }\n          episodes.forEach((episode) => pub.addStatPoint(episode));\n        }\n        return stat_points;\n      }\n    },\n    addStatPoint(episode) {\n      if (!pub.live_stats) return;\n      const point = episode.point;\n      if (!stat_points) stat_points = { players: {}, teams: {} };\n      const server_team = accessors.playerTeam(point.server);\n      const team_winner = accessors.playerTeam(point.winner);\n      const team_loser = 1 - team_winner;\n\n      addStat({ player: point.server, episode, stat: 'pointsServed' });\n      addStat({ team: team_winner, episode, stat: 'pointsWon' });\n      if (point.result && point.hand) {\n        const player = point.result == 'Winner' ? team_winner : team_loser;\n        addStat({ player, episode, stat: point.hand });\n      }\n      if (point.result == 'Ace') addStat({ player: point.server, episode, stat: 'aces' });\n      if (point.result == 'Double Fault') addStat({ player: point.server, episode, stat: 'doubleFaults' });\n      if (point.result == 'Winner') addStat({ player: point.winner, episode, stat: 'winners' });\n\n      if (point.result == 'Unforced Error') addStat({ team: team_loser, episode, stat: 'unforcedErrors' });\n      if (point.result == 'Forced Error') addStat({ team: team_loser, episode, stat: 'forcedErrors' });\n\n      if (!point.first_serve) addStat({ player: point.server, episode, stat: 'serves1stIn' });\n      if (!point.first_serve && point.winner == server_team) {\n        addStat({ player: point.server, episode, stat: 'serves1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received2ndWon' });\n      }\n      if (!point.first_serve && point.winner != server_team)\n        addStat({ team: team_winner, episode, stat: 'received1stWon' });\n      if (point.first_serve && point.result != 'Double Fault')\n        addStat({ player: point.server, episode, stat: 'serves2ndIn' });\n      if (point.first_serve && point.result != 'Double Fault' && point.winner == point.server) {\n        addStat({ player: point.server, episode, stat: 'serves2ndWon' });\n        addStat({ team: team_loser, undefined, stat: 'received1stWon' });\n        addStat({ team: team_loser, undefined, stat: 'received2ndWon' });\n      }\n      if (point.first_serve && point.result != 'Double Fault' && point.winner != server_team) {\n        addStat({ team: team_winner, episode, stat: 'received2ndWon' });\n      }\n      if (point.breakpoint) {\n        addStat({ player: point.server, undefined, stat: 'breakpointsSaved' });\n        addStat({ player: point.server, episode, stat: 'breakpointsFaced' });\n      }\n      if (last_episode && last_episode.point.breakpoint && last_episode.point.server == point.winner) {\n        addStat({ player: point.server, episode, stat: 'breakpointsSaved' });\n      }\n\n      if (episode.game && episode.game.complete) {\n        addStat({ team: team_winner, episode, stat: 'gamesWon' });\n      }\n      last_episode = episode;\n    },\n    removeStatPoint(episode) {\n      if (!pub.live_stats) return;\n      Object.keys(stat_points).forEach((grouping) => {\n        Object.keys(stat_points[grouping]).forEach((group) => {\n          Object.keys(stat_points[grouping][group]).forEach((stat) => {\n            if (stat_points[grouping][group][stat].length) {\n              stat_points[grouping][group][stat] = stat_points[grouping][group][stat].filter(\n                (f) => f.point.index != episode.point.index\n              );\n            }\n          });\n        });\n      });\n      const points = pub.history.filter((episode) => episode.action == 'addPoint');\n      last_episode = points.length ? points[points.length - 1] : undefined;\n    }\n  };\n  accessors.reset();\n  return pub;\n\n  function calculatedStats(stats) {\n    if (!stats || !stats.teams) return [];\n\n    // prefix of '-' indicates that value for opposing team should be used\n    // '*' indicates that value is optional\n    const calculated_stats = {\n      Aces: { numerators: ['aces'], calc: 'number' },\n      'Double Faults': { numerators: ['doubleFaults'], calc: 'number' },\n      'First Serve %': { numerators: ['serves1stIn'], denominators: ['pointsServed'], calc: 'percentage' },\n      'Unforced Errors': { numerators: ['unforcedErrors'], calc: 'number' },\n      'Forced Errors': { numerators: ['forcedErrors'], calc: 'number' },\n      Winners: { numerators: ['winners'], calc: 'number' },\n      'Total Points Won': { numerators: ['pointsWon'], calc: 'number' },\n      'Max Pts/Row': { numerators: ['pointsWon'], calc: 'maxConsecutive', attribute: 'index' },\n      'Max Games/Row': { numerators: ['gamesWon'], calc: 'maxConsecutive', attribute: 'game' },\n      'Points Won 1st': { numerators: ['serves1stWon'], denominators: ['serves1stIn'], calc: 'percentage' },\n      'Points Won 2nd': { numerators: ['serves2ndWon'], denominators: ['serves2ndIn'], calc: 'percentage' },\n      'Points Won Receiving': {\n        numerators: ['received1stWon', 'received2ndWon'],\n        denominators: ['-pointsServed'],\n        calc: 'percentage'\n      },\n      'Breakpoints Saved': {\n        numerators: ['breakpointsSaved'],\n        denominators: ['breakpointsFaced'],\n        calc: 'percentage'\n      },\n      'Breakpoints Converted': {\n        numerators: ['-breakpointsSaved'],\n        denominators: ['-breakpointsFaced'],\n        calc: 'difference'\n      },\n      'Aggressive Margin': {\n        calc: 'aggressiveMargin',\n        numerators: ['*doubleFaults', '*unforcedErrors'],\n        denominators: ['*aces', '*winners', '-*forcedErrors']\n      }\n    };\n\n    const reduceComponents = (components, teams, team) => {\n      if (!components) return undefined;\n      const values = components.map((component) => {\n        const counter = component.split('-').reverse()[0].split('*').join('');\n        const component_team = teams[component.indexOf('-') == 0 ? 1 - team : team];\n        return component_team && component_team[counter] ? component_team[counter].length : 0;\n      });\n      return [].concat(0, 0, ...values).reduce((a, b) => a + b);\n    };\n\n    const numeratorDenominator = (stat_obj, teams, team) => {\n      const numerator = reduceComponents(stat_obj.numerators, teams, team);\n      const denominator = reduceComponents(stat_obj.denominators, teams, team);\n      return { numerator, denominator };\n    };\n\n    const displayPct = (numerator, denominator) => {\n      const pct = Math.round((numerator / denominator) * 100);\n      return { value: pct, display: `${pct}% (${numerator}/${denominator})` };\n    };\n\n    const stat_calcs = {\n      number(stat_obj, teams, team) {\n        // ({ numerator, denominator } = numeratorDenominator(stat_obj, teams, team));\n        const { numerator } = numeratorDenominator(stat_obj, teams, team);\n        return { display: numerator, value: numerator, numerators: stat_obj.numerators };\n      },\n      maxConsecutive(stat_obj, teams, team) {\n        const stat = stat_obj.numerators[0];\n        const attribute = stat_obj.attribute;\n        const episodes = teams[team][stat];\n        if (!episodes) return { value: 0, display: 0 };\n        let current = undefined;\n        let max_consecutive = 0;\n        let consecutive = episodes.length ? 1 : 0;\n        episodes.forEach((episode) => {\n          if (current + 1 == episode.point[attribute]) {\n            consecutive += 1;\n          } else {\n            if (consecutive > max_consecutive) max_consecutive = consecutive;\n            consecutive = 1;\n          }\n          current = episode.point[attribute];\n        });\n        if (consecutive > max_consecutive) max_consecutive = consecutive;\n        return { display: max_consecutive, value: max_consecutive };\n      },\n      percentage(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        if (numerator == undefined || !denominator) return { value: 0, display: 0 };\n        return Object.assign(displayPct(numerator, denominator), { numerators: stat_obj.numerators });\n      },\n      difference(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        if (numerator == undefined || !denominator) return { value: 0, display: 0 };\n        const diff = Math.abs(denominator - numerator);\n        return Object.assign(displayPct(diff, denominator), { numerators: stat_obj.numerators });\n      },\n      aggressiveMargin(stat_obj, teams, team) {\n        const { numerator, denominator } = numeratorDenominator(stat_obj, teams, team);\n        const diff = denominator - numerator;\n        const point_counts = Object.keys(teams).map((team) =>\n          teams[team].pointsWon ? teams[team].pointsWon.length : 0\n        );\n        const total_points = [].concat(0, 0, ...point_counts).reduce((a, b) => a + b);\n        return Object.assign(displayPct(diff, total_points), { numerators: stat_obj.numerators });\n      }\n    };\n\n    const teams_counters = [].concat(...Object.keys(stats.teams).map((team) => Object.keys(stats.teams[team])));\n    return Object.keys(calculated_stats)\n      .map((stat) => {\n        const stat_obj = calculated_stats[stat];\n        if (!stat_obj.denominators) stat_obj.denominators = [];\n        // must remove any '-' indicators to invert\n        let required_counters = []\n          .concat(...stat_obj.numerators, ...stat_obj.denominators)\n          .map((m) => m.split('-').reverse()[0]);\n        required_counters = required_counters.filter((counter) => counter.indexOf('*') < 0);\n        const counters_exist =\n          required_counters.map((counter) => teams_counters.indexOf(counter) < 0).filter((f) => f).length < 1;\n        if (!counters_exist) return false;\n        const team_stats = [0, 1].map((team) => {\n          return stat_calcs[stat_obj.calc](stat_obj, stats.teams, team);\n        });\n        return { name: stat, team_stats };\n      })\n      .filter((f) => f);\n  }\n\n  function addStat(params?: any) {\n    const { player, episode, stat } = params ?? {};\n    let team = params?.team;\n    // stat object is created even if there is no episode to add (=0)\n    if (player != undefined) {\n      if (!stat_points.players[player]) stat_points.players[player] = {};\n      if (!stat_points.players[player][stat]) stat_points.players[player][stat] = [];\n      if (episode) stat_points.players[player][stat].push(episode);\n      team = accessors.playerTeam(player);\n    }\n    if (team != undefined) {\n      if (!stat_points.teams[team]) stat_points.teams[team] = {};\n      if (!stat_points.teams[team][stat]) stat_points.teams[team][stat] = [];\n      if (episode) stat_points.teams[team][stat].push(episode);\n    }\n  }\n};\n\nfunction numbersArray(values) {\n  if (!Array.isArray(values)) return false;\n  return values.map((value) => !isNaN(value)).indexOf(false) >= 0;\n}\n\n/*\nif (typeof define === 'function' && define.amd) define(umo);\nelse if (typeof module === 'object' && module.exports) module.exports = umo;\nthis.umo = umo;\n*/\n\nexport const mo = umo;\nexport default umo;\n","import { browserStorage } from './browserStorage';\nimport { firstAndLast } from './utilities';\nimport { mo } from './umo';\n\nexport const ch_version = '1.9';\nexport const charts: any = {};\nconst match = mo.Match();\n\nexport const app: any = {\n  broadcast: undefined,\n  user_uuid: undefined\n};\n\nexport const settings: any = {\n  track_shot_types: undefined,\n  audible_clicks: undefined,\n  display_gamefish: undefined,\n  auto_swap_sides: undefined,\n  point_buttons: undefined\n};\n\nexport const env: any = {\n  lets: 0,\n  rally: 0,\n  undone: [],\n  view: 'entry',\n  serve2nd: false,\n  rally_mode: false,\n  edit_player: undefined,\n  match_swap: false, // automatic swap\n  swap_sides: false, // user initiated swap\n  orientation: 'vertical',\n  serving: match.nextTeamServing(),\n  receiving: match.nextTeamReceiving(),\n  edit_point_index: undefined,\n  match\n};\n\nconst c1 = 'rgb(64, 168, 75)';\nconst c2 = 'rgb(255, 116, 51)';\nconst c3 = 'rgb(221, 56, 48)';\nexport const buttons: any = {\n  first_serve: { color: c1, type: 'toggle' },\n  second_serve: { color: c2, type: 'toggle' },\n  double_fault: { color: c3, type: 'flash' },\n  penalty: { color: c3, type: 'flash' },\n  first_ace: { color: c1, type: 'flash' },\n  second_ace: { color: c2, type: 'flash' },\n  server_winner: { color: c1, type: 'flash' },\n  server_unforced: { color: c3, type: 'flash' },\n  server_forced: { color: c2, type: 'flash' },\n  receiving_winner: { color: c1, type: 'flash' },\n  receiving_unforced: { color: c3, type: 'flash' },\n  receiving_forced: { color: c2, type: 'flash' }\n};\nexport const options = {\n  user_swap: false,\n  highlight_better_stats: true,\n  vertical_view: browserStorage.get('vertical_view') || 'vblack',\n  horizontal_view: browserStorage.get('horizontal_view') || 'hblack'\n};\n\nexport const device: any = {\n  isStandalone: 'standalone' in window.navigator && window.navigator.standalone,\n  isIDevice: /iphone|ipod|ipad/i.test(window.navigator.userAgent),\n  isMobile: typeof window.orientation !== 'undefined',\n  geoposition: {}\n};\n\nexport const default_players = ['Player One', 'Player Two'];\n\nexport function clearActionEvents() {\n  match.events.clearEvents();\n}\n\nexport function updatePositions() {\n  const left_side = env.swap_sides ? 1 : 0;\n  const right_side = env.swap_sides ? 0 : 1;\n  // var server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  // var receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  updateMatchArchive();\n\n  const player_names = match.metadata.players();\n  // var display_position = Array.from(document.getElementsByClassName(\"position_display\"));\n  // display_position[0].value = firstAndLast(player_names[left_side].name);\n  // display_position[1].value = firstAndLast(player_names[right_side].name);\n  const p1 = document.getElementById('playerone');\n  const p2 = document.getElementById('playertwo');\n  if (p1) p1.innerHTML = firstAndLast(player_names[left_side].name);\n  if (p2) p2.innerHTML = firstAndLast(player_names[right_side].name);\n\n  // new way\n  const display_player_0 = Array.from(document.querySelectorAll('.display_player_0'));\n  display_player_0.forEach((element) => (element.innerHTML = player_names[left_side].name));\n  const display_player_1 = Array.from(document.querySelectorAll('.display_player_1'));\n  display_player_1.forEach((element) => (element.innerHTML = player_names[right_side].name));\n}\n\nexport function updateMatchArchive(force?: boolean) {\n  const points = match.history.points();\n\n  // var match_id = match.metadata.defineMatch().muid;\n  const match_id = browserStorage.get('current_match');\n  if (!match_id) return;\n  const players = match.metadata.players();\n  const save =\n    force || points.length || (players[0].name != default_players[0] && players[1].name != default_players[1]);\n  if (!save) return;\n\n  // add key for current match\n  const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n\n  if (match_archive.indexOf(match_id) < 0) {\n    match_archive.push(match_id);\n    browserStorage.set('match_archive', JSON.stringify(match_archive));\n  }\n\n  const match_object = {\n    ch_version: ch_version,\n    players: players,\n    first_service: match.set.firstService(),\n    match: match.metadata.defineMatch(),\n    format: match.format.settings(),\n    tournament: match.metadata.defineTournament(),\n    points: points,\n    scoreboard: match.scoreboard()\n  };\n  browserStorage.set(match_id, JSON.stringify(match_object));\n}\n\nexport function restoreAppState() {\n  const app_settings = browserStorage.get('CH_AppSettings');\n  if (app_settings) Object.assign(settings, JSON.parse(app_settings));\n  Object.keys(settings).forEach((key) => {\n    const em: any = document.getElementById(key);\n    if (em) em.checked = settings[key];\n  });\n  const app_state = browserStorage.get('CH_AppState');\n  if (app_state) Object.assign(app, JSON.parse(app_state));\n}\n\nexport function updateAppState() {\n  Object.keys(settings).forEach((key) => {\n    const em: any = document.getElementById(key);\n    if (em) settings[key] = em.checked;\n  });\n  browserStorage.set('CH_AppSettings', JSON.stringify(settings));\n  browserStorage.set('CH_AppState', JSON.stringify(app));\n}\n\nexport function setOrientation() {\n  if (device.isMobile) {\n    env.orientation = window.screen.orientation.type == 'landscape-primary' ? 'landscape' : 'portrait';\n  } else {\n    env.orientation = window.innerWidth > window.innerHeight ? 'landscape' : 'portrait';\n  }\n}\n","import { env } from './env';\n\nexport function formatChangePossible() {\n  const points = env.match.history.points();\n  return points.length == 0;\n\n  // TODO: implement when umo can propagate changes to children...\n  /*\n      scores = points.map(point=>point.score);\n      var games = match.score().counters.games.reduce((a, b) => a + b);\n      var advantages = scores.map(m=>m.indexOf('A') >= 0).filter(f=>f);\n      if (games < 1 && advantages < 1) return true;\n      */\n}\n","import { env } from './env';\n\nexport function displayPointHistory() {\n  const games = groupGames();\n  const players = env.match.metadata.players();\n  let html = '';\n  if (!games.length) return false;\n  games.forEach((game: any) => {\n    if (game.points && game.points.length) html += gameEntry(game, players);\n  });\n  html += `\n    <div class=\"flexrows ph_game\">\n      <div class='ph_margin' style='width: 100%'>\n          <div class='flexcenter' style='width: 100%'>Duration ${matchDuration()}</div>\n      </div>\n    </div>\n  `;\n\n  const phFrame = document.getElementById('ph_frame');\n  if (phFrame) phFrame.innerHTML = html;\n}\n\nfunction groupGames() {\n  const point_episodes = env.match.history.action('addPoint');\n  const games: any = [{ points: [] }];\n  let game_counter = 0;\n  let current_game = 0;\n  point_episodes.forEach((episode: any) => {\n    const point = episode.point;\n    if (point.game != current_game) {\n      game_counter += 1;\n      current_game = point.game;\n      games[game_counter] = { points: [] };\n    }\n    games[game_counter].points.push(point);\n    games[game_counter].index = game_counter;\n    games[game_counter].set = episode.set.index;\n    games[game_counter].score = episode.game.games;\n    games[game_counter].complete = episode.game.complete;\n    if (episode.game.complete) games[game_counter].winner = point.winner;\n    if (episode.set.complete) games[game_counter].last_game = true;\n  });\n  return games;\n  // if (set != undefined) games = games.filter(function(game) { return game.set == set });\n}\n\nfunction gameEntry(game: any, players: any[]) {\n  const last_point = game.points[game.points.length - 1];\n  const game_score = game.complete ? game.score.join('-') : undefined;\n  const tiebreak = last_point.tiebreak;\n  const server = tiebreak ? 'Tiebreak' : players[last_point.server].name;\n  const service = tiebreak ? '' : last_point.server ? 'playertwo' : 'playerone';\n  const servergame = tiebreak ? '' : last_point.server == last_point.winner ? 'won' : 'lost';\n  let html = `\n         <div class=\"flexrows ph_game\">\n            <div class='ph_margin flexrows'>\n               <div class=\"ph_server ${service}\">${server}</div>\n               <div class=\"ph_action flexcenter\"> \n                  <div class='ph_fish iconfish'></div>\n               </div>\n               <div class='viewGameFish ph_rally gameIndex=\"${\n                 game.index\n               }\" ph_${servergame}''> <b class=\"viewGameFish\" gameIndex=\"${game.index}\">${game_score || ''}</b> </div>\n            </div>\n         </div>\n      `;\n  game.points.forEach((point: any) => {\n    html += pointEntry(\n      point,\n      players\n      // game.complete && index == game.points.length - 1 ? game.score.join('-') : undefined\n    );\n  });\n  return html;\n}\n\nfunction pointEntry(point: any, players: any[]) {\n  const evenodd = point.index % 2 ? 'even' : 'odd';\n  let point_score = !point.tiebreak && point.server ? point.score.split('-').reverse().join('-') : point.score;\n  let player_initials;\n  if (point.result) {\n    let shot_by;\n    if (['Ace', 'Winner'].indexOf(point.result) >= 0) {\n      shot_by = players[point.winner].name;\n    } else {\n      shot_by = players[1 - point.winner].name;\n    }\n    player_initials = shot_by\n      .split(' ')\n      .map((name: string) => name[0])\n      .join('');\n  }\n  const point_hand = point.hand ? point.hand + ' ' : '';\n  const point_result = point.result || '';\n  const point_description = !point_result ? '' : `${player_initials}: ${point_hand}${point_result}`;\n  point_score = point_score == '0-0' ? 'GAME' : point_score;\n  if (point.tiebreak) {\n    if (point.server) point_score = `&nbsp;${point_score}*`;\n    if (!point.server) point_score = `*${point_score}&nbsp;`;\n  }\n  const rally = point.rally ? point.rally.length + 1 : '';\n  return `\n    <div class='flexrows ph_episode' pointIndex=\"${point.index}\">\n        <div class='ph_point_${evenodd} flexrows'>\n          <div class='viewEditPoint ph_result'>${point_description}</div>\n          <div class='viewEditPoint ph_score'>${point_score} </div>\n          <div class='viewEditPoint ph_score'>${rally}</div>\n        </div>\n    </div>\n    `;\n}\n\nfunction matchDuration() {\n  const timestamps = env.match.history.points().map((p: any) => p.uts);\n  const start = Math.min(...timestamps);\n  const end = Math.max(...timestamps);\n  const seconds = (end - start) / 1000.0;\n  return HHMMSS(seconds);\n}\n\nfunction HHMMSS(s: any) {\n  const sec_num = parseInt(s, 10); // don't forget the second param\n  let hours: any = Math.floor(sec_num / 3600);\n  let minutes: any = Math.floor((sec_num - hours * 3600) / 60);\n  let seconds: any = sec_num - hours * 3600 - minutes * 60;\n\n  if (hours < 10) {\n    hours = '0' + hours;\n  }\n  if (minutes < 10) {\n    minutes = '0' + minutes;\n  }\n  if (seconds < 10) {\n    seconds = '0' + seconds;\n  }\n  return hours + ':' + minutes + ':' + seconds;\n}\n","import { env } from './env';\n\nexport function groupGames(point_episodes?: any[]) {\n  point_episodes = point_episodes || env.match.history.action('addPoint');\n  const games: any = [{ points: [] }];\n  let game_counter = 0;\n  let current_game = 0;\n  point_episodes?.forEach((episode: any) => {\n    const point = episode.point;\n    if (point.game != current_game) {\n      game_counter += 1;\n      current_game = point.game;\n      games[game_counter] = { points: [] };\n    }\n    games[game_counter].points.push(point);\n    games[game_counter].index = game_counter;\n    games[game_counter].set = episode.set.index;\n    games[game_counter].score = episode.game.games;\n    games[game_counter].complete = episode.game.complete;\n    if (episode.game.complete) games[game_counter].winner = point.winner;\n    if (episode.set.complete) games[game_counter].last_game = true;\n  });\n  return games;\n  // if (set != undefined) games = games.filter(function(game) { return game.set == set });\n}\n","export function closeModal() {\n  Array.from(document.querySelectorAll('.modal')).forEach((modal: any) => (modal.style.display = 'none'));\n}\n","import { env, options, settings, updateMatchArchive, updatePositions } from './env';\nimport { browserStorage } from './browserStorage';\nimport { groupGames } from './groupGames';\nimport { closeModal } from './modals';\n\nexport function updateScore() {\n  const score = env.match.score();\n  const sets_counter = score.counters.sets;\n  const games_counter = score.counters.games;\n  const points = score.points.split('-');\n  const left_side = env.swap_sides ? 1 : 0;\n  const right_side = env.swap_sides ? 0 : 1;\n\n  // old way\n  const point_fields: any = Array.from(document.getElementsByClassName('points'));\n  point_fields.forEach((field: any, index: number) => {\n    field.value = points[env.swap_sides ? 1 - index : index];\n  });\n\n  // new way\n  const display_point_0 = Array.from(document.querySelectorAll('.display_points_0'));\n  display_point_0.forEach((element) => (element.innerHTML = points[left_side]));\n  const display_point_1 = Array.from(document.querySelectorAll('.display_points_1'));\n  display_point_1.forEach((element) => (element.innerHTML = points[right_side]));\n\n  const display_game_0 = Array.from(document.querySelectorAll('.display_games_0'));\n  display_game_0.forEach((element) => (element.innerHTML = games_counter[left_side]));\n  const display_game_1 = Array.from(document.querySelectorAll('.display_games_1'));\n  display_game_1.forEach((element) => (element.innerHTML = games_counter[right_side]));\n\n  const display_set_0 = Array.from(document.querySelectorAll('.display_sets_0'));\n  display_set_0.forEach((element) => (element.innerHTML = sets_counter[left_side]));\n  const display_set_1 = Array.from(document.querySelectorAll('.display_sets_1'));\n  display_set_1.forEach((element) => (element.innerHTML = sets_counter[right_side]));\n\n  const sets = score.components.sets;\n  const threshold = env.match.format.threshold();\n  const max_games = threshold == 1 ? 0 : threshold > 2 ? 4 : 2;\n  [0, 1, 2, 3, 4].forEach((index) => {\n    if (!sets || (sets && !sets[index])) {\n      // old way\n      const set_fields = Array.from(document.getElementsByClassName('games' + index));\n      set_fields.forEach((field: any) => (field.value = '-'));\n      // new way\n      const player0_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_0'));\n      player0_games.forEach((field) => (field.innerHTML = index > max_games ? ' ' : '-'));\n      const player1_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_1'));\n      player1_games.forEach((field) => (field.innerHTML = index > max_games ? ' ' : '-'));\n    }\n  });\n\n  if (!sets) return;\n\n  sets.forEach((set: any, index: number) => {\n    // old way\n    const set_fields: any = Array.from(document.getElementsByClassName('games' + index));\n    set_fields.forEach((field: any, index: number) => (field.value = set.games[env.swap_sides ? 1 - index : index]));\n    // new way\n    const player0_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_0'));\n    player0_games.forEach((field) => (field.innerHTML = set.games[env.swap_sides ? 1 : 0]));\n    const player1_games = Array.from(document.getElementsByClassName('display_set_' + index + '_games_1'));\n    player1_games.forEach((field) => (field.innerHTML = set.games[env.swap_sides ? 0 : 1]));\n  });\n}\n\nexport function loadDetails() {\n  const players = env.match.metadata.players();\n  players.forEach((player: any, index: number) => {\n    const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc', 'rank'];\n    attributes.forEach((detail) => {\n      const target_id = `player${index}_${detail}`;\n      const target: any = document.getElementById(target_id);\n      if (target) target.value = player[detail] || '';\n    });\n  });\n\n  const match_details = env.match.metadata.defineMatch();\n  const m_attrs = ['court', 'umpire'];\n  m_attrs.forEach((attribute) => {\n    const target_id = `match_${attribute}`;\n    const tid: any = document.getElementById(target_id);\n    if (tid) tid.value = match_details[attribute] || '';\n  });\n\n  const tournament = env.match.metadata.defineTournament();\n  const t_attrs = ['name', 'start_date', 'tour', 'rank', 'surface', 'in_out', 'draw', 'draw_size', 'round'];\n  t_attrs.forEach((attribute) => {\n    const target_id = `tournament_${attribute}`;\n    const tid: any = document.getElementById(target_id);\n    if (tid) tid.value = tournament[attribute] || '';\n  });\n}\n\nexport function stateChangeEvent() {\n  updateMatchArchive();\n  env.serve2nd = false;\n  env.rally_mode = false;\n  updateState();\n  updateScore();\n  visibleButtons();\n}\n\nexport function visibleButtons() {\n  const points = env.match.history.action('addPoint');\n  const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n  Array.from(document.querySelectorAll('.view_stats')).forEach(\n    (div: any) => (div.style.display = points.length > 0 ? 'inline' : 'none')\n  );\n  Array.from(document.querySelectorAll('.change_server')).forEach(\n    (div: any) => (div.style.display = points.length == 0 ? 'inline' : 'none')\n  );\n  Array.from(document.querySelectorAll('.view_archive')).forEach(\n    (div: any) => (div.style.display = points.length == 0 && match_archive.length ? 'inline' : 'none')\n  );\n  Array.from(document.querySelectorAll('.view_settings')).forEach(\n    (div: any) => (div.style.display = points.length == 0 && !match_archive.length ? 'inline' : 'none')\n  );\n  Array.from(document.querySelectorAll('.view_history')).forEach(\n    (div: any) => (div.style.display = points.length > 0 ? 'inline' : 'none')\n  );\n  Array.from(document.querySelectorAll('.undo')).forEach((div: any) => {\n    div.style.display = points.length > 0 || env.serve2nd || env.rally_mode ? 'flex' : 'none';\n  });\n  Array.from(document.querySelectorAll('.redo')).forEach((div: any) => {\n    div.style.display = env.undone.length ? 'flex' : 'none';\n  });\n  const last_point = points.length ? points[points.length - 1] : undefined;\n  const status_message = statusMessage();\n  env.match.status = status_message;\n  Array.from(document.querySelectorAll('.status_message')).forEach((div) => (div.innerHTML = status_message));\n\n  function statusMessage() {\n    if (last_point) {\n      if (last_point.needed.points_to_set && Math.min(...last_point.needed.points_to_set) == 1) return 'SET POINT';\n      if (last_point.point.breakpoint) return 'BREAK POINT';\n      if (last_point.needed.points_to_game && last_point.needed.points_to_game[last_point.point.server] == 1)\n        return 'GAME POINT';\n    }\n    if (env.lets) return `Lets: ${env.lets}`;\n    return '';\n  }\n}\n\nexport function updateState() {\n  if (env.match.nextTeamServing() != env.serving) setTimeout(() => swapServer(), 400);\n  resetButtons();\n  updatePositions();\n}\n\nexport function resetButtons() {\n  const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  const receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  Array.from(document.querySelectorAll('.fault')).forEach((div) => (div.innerHTML = 'Fault'));\n\n  const server_mode = `.modeaction_player${server_side}`;\n  Array.from(document.querySelectorAll(server_mode)).forEach((div) => (div.innerHTML = 'Serve'));\n\n  const server_fault = `.modeerr_player${server_side}`;\n  Array.from(document.querySelectorAll(server_fault)).forEach((div) => (div.innerHTML = 'Fault'));\n  const server_ace = `.modewin_player${server_side}`;\n  Array.from(document.querySelectorAll(server_ace)).forEach((div) => (div.innerHTML = 'Ace'));\n  const server_let = `.modeforce_player${server_side}`;\n  Array.from(document.querySelectorAll(server_let)).forEach((div) => (div.innerHTML = 'Let'));\n\n  const receiver_mode = `.modeaction_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_mode)).forEach((div) => (div.innerHTML = 'Return'));\n\n  const receiver_ufe = `.modeerr_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_ufe)).forEach((div) => (div.innerHTML = 'UFE'));\n  const receiver_winner = `.modewin_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_winner)).forEach((div) => (div.innerHTML = 'Winner'));\n  const receiver_forced = `.modeforce_player${receiver_side}`;\n  Array.from(document.querySelectorAll(receiver_forced)).forEach((div) => (div.innerHTML = 'Forced'));\n\n  Array.from(document.querySelectorAll('.vs_point_button')).forEach(\n    (div: any) => (div.style.display = settings.point_buttons ? 'flex' : 'none')\n  );\n\n  Array.from(document.querySelectorAll('.rally')).forEach((div) => (div.innerHTML = 'Rally'));\n}\n\nexport function swapServer() {\n  env.serving = env.match.nextTeamServing();\n  env.receiving = env.match.nextTeamReceiving();\n\n  if (settings.auto_swap_sides) {\n    const games = groupGames();\n    let game_number: number = games.length;\n    if (games[games.length - 1].complete) game_number += 1;\n    env.match_swap = swapSides(game_number);\n  } else {\n    env.match_swap = false;\n  }\n  setCourtSide();\n\n  const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n  const receiver_side = env.swap_sides ? 1 - env.receiving : env.receiving;\n\n  /**\n  let div = document.getElementById(server_side ? 'player_receiving' : 'player_serving');\n  div.parentNode.insertBefore(div, document.getElementById('team_two'));\n  div = document.getElementById(server_side ? 'player_serving' : 'player_receiving');\n  div.parentNode.insertBefore(div, document.getElementById('entry_end'));\n  */\n\n  changeTextColor(`.indicate_serve.display_player_${server_side}`, 'yellow');\n  changeTextColor(`.indicate_serve.display_player_${receiver_side}`, 'white');\n\n  /**\n  document.getElementById(\"team_one_role\").innerHTML = server_side ? 'Receiving:' : 'Serving:';\n  document.getElementById(\"team_two_role\").innerHTML = server_side ? 'Serving:' : 'Receiving:';\n  */\n\n  if (server_side) {\n    changeClassDisplay('.display_0_serving', 'none');\n    changeClassDisplay('.display_1_serving', 'flex');\n  } else {\n    changeClassDisplay('.display_0_serving', 'flex');\n    changeClassDisplay('.display_1_serving', 'none');\n  }\n\n  const point_fields = Array.from(document.getElementsByClassName('points'));\n  point_fields.forEach((field: any, index) => {\n    const player = env.swap_sides ? 1 - index : index;\n    field.style.backgroundColor = player == env.serving ? '#FBF781' : '#D1FBFB';\n  });\n  resetButtons();\n}\n\nfunction swapSides(number: number) {\n  const iterations = [true].concat([...Array(number).keys()].map((i) => (i + 1) % 4 < 2));\n  return !iterations[number];\n}\n\nexport function setCourtSide() {\n  env.swap_sides = env.match_swap;\n  if (options.user_swap) env.swap_sides = !env.swap_sides;\n  stateChangeEvent();\n}\n\nfunction changeTextColor(classes: string, value: any) {\n  const objs = Array.from(document.querySelectorAll(classes));\n  objs.forEach((obj: any) => (obj.style.color = value));\n}\n\nfunction changeClassDisplay(className: string, display: string) {\n  const elements = Array.from(document.querySelectorAll(className));\n  elements.forEach((element: any) => (element.style.display = display));\n}\n\nexport function checkPlayerName(keypress: any) {\n  if (keypress.keyCode == 13 || keypress.code == 9) {\n    const player_hand = document.getElementById('player_hand');\n    if (player_hand) player_hand.focus();\n    changePlayerName();\n  }\n}\n\nexport function changePlayerName() {\n  const player_name: any = document.getElementById('playername');\n  if (player_name) env.match.metadata.definePlayer({ index: env.edit_player, name: player_name.value });\n  updatePositions();\n}\n\nexport function editMatchDetails() {\n  closeModal();\n  const matchDetails = document.getElementById('matchdeets');\n  if (matchDetails) matchDetails.style.display = 'flex';\n  const detailContent = document.getElementById('matchdetail_content');\n  if (detailContent) detailContent.scrollTop = 0;\n}\n","export default \"__VITE_ASSET__P0JBwVya__\"","export default \"__VITE_ASSET__86LiX4v4__\"","import { browserStorage } from './browserStorage';\nimport { showModal } from './utilities';\nimport { device } from './env';\n\nexport function modalExport(match_id: any) {\n  match_id = match_id || browserStorage.get('current_match');\n  Array.from(document.querySelectorAll('.mh_export')).forEach((selector: any) => (selector.style.display = 'none'));\n  const match_data = browserStorage.get(match_id);\n  const header = `\n   <p>&nbsp;</p>\n   <h1>Export Options</h1>\n   <p>Supported by your device</p>\n`;\n  const save = `\n   <div matchId=\"${match_id}\" class=\"exportMatch flexcenter\">\n      <div matchId=\"${match_id}\" class='exportMatch export_action action_icon iconsave'></div>\n   </div>\n`;\n  const copy = `\n   <div class=\"flexcenter\">\n      <button id='copy2clipboard' class=\"flexcenter c2c\" data-clipboard-text=\"\"> \n         <div class='export_action action_icon iconclipboard'></div> \n      </button>\n   </div> \n`;\n  const modaltext = `<div>${header}<div class=\"flexrows flexcenter\">${\n    !device.isIDevice ? save : ''\n  }${copy}</div></div>`;\n  const export_data = match_data;\n  showModal(modaltext, export_data);\n}\n","const util = {\n  hasClass: function (e: Element, c: string) {\n    const re = new RegExp('(^|\\\\s)' + c + '(\\\\s|$)');\n    return re.test(e.className);\n  },\n  addClass: function (e: Element, c: string) {\n    if (this.hasClass(e, c)) {\n      return;\n    }\n    const newclass = e.className.split(' ');\n    newclass.push(c);\n    e.className = newclass.join(' ');\n  },\n  removeClass: function (e: Element, c: string) {\n    if (!this.hasClass(e, c)) {\n      return;\n    }\n    const re = new RegExp('(^|\\\\s)' + c + '(\\\\s|$)', 'g');\n    e.className = e.className.replace(re, '');\n  }\n};\n\nexport const SwipeList = {\n  init: (opt: any) => {\n    let swipeLeft = 0;\n    let swipeRight = 0;\n    opt.buttons.forEach((b: any) => {\n      if (b.side == 'right') swipeLeft += b.width || 0;\n      if (b.side == 'left') swipeRight += b.width || 0;\n    });\n\n    const instances = Array.from(document.querySelectorAll(opt.container));\n    instances.forEach((instance) => {\n      let moveX = 0;\n      let moveY = 0;\n      let moveStart: any = null;\n\n      // Button DIVs\n      let leftpx = 0;\n      let rightpx = 0;\n      opt.buttons.forEach((button: any) => {\n        const btn = document.createElement('div');\n        btn.textContent = button.text;\n        btn.className = button.class;\n        if (button.side == 'right') {\n          leftpx += button.width || 0;\n          btn.style.right = -1 * leftpx + 'px';\n        }\n        if (button.side == 'left') {\n          rightpx += button.width || 0;\n          btn.style.left = -1 * rightpx + 'px';\n        }\n        const abtn = instance.appendChild(btn);\n\n        // options image instead of text\n        if (button.image) {\n          const img = document.createElement('img');\n          img.src = button.image;\n          img.className = button.image_class;\n          abtn.appendChild(img);\n        }\n      });\n\n      // Hardware Acceleration\n      instance.style.webkitTransform = 'translateZ(0)';\n      instance.style.transform = 'translateZ(0)';\n\n      // Slide Start\n      instance.addEventListener(\n        'touchstart',\n        function (event: any) {\n          // Reset Animation Time\n          instance.style.transitionDuration = '0ms';\n\n          // Close other items\n          instances.forEach((inst) => {\n            if (util.hasClass(inst, 'move-out-click') && inst != instance) {\n              inst.style.transitionDuration = '325ms';\n              inst.style.webkitTransform = 'translateX(0px)';\n              inst.style.transform = 'translateX(0px)';\n              util.removeClass(inst, 'move-out-click');\n            }\n          });\n\n          // Save slide position\n          const touches = event.changedTouches;\n          moveStart = {\n            x: touches[0].pageX,\n            y: touches[0].pageY\n          };\n        },\n        true\n      );\n\n      // Sliding Animation\n      instance.addEventListener(\n        'touchmove',\n        function (event: any) {\n          // Limit to one instance\n          if (moveStart === null) {\n            return;\n          }\n\n          const touches = event.changedTouches;\n          const nowX = touches[0].pageX;\n          const nowY = touches[0].pageY;\n          moveX = nowX - moveStart.x;\n          moveY = nowY - moveStart.y;\n\n          // Left/Right swipes\n          if (Math.abs(moveX) > Math.abs(moveY)) {\n            if (moveX > 0) {\n              if (util.hasClass(instance, 'move-out-click')) {\n                const x = moveX > swipeLeft ? 0 : -swipeLeft + moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              } else if (swipeRight) {\n                const x = Math.abs(moveX) > swipeLeft ? swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              }\n            }\n            if (moveX < 0) {\n              if (!util.hasClass(instance, 'move-out-click')) {\n                const x = Math.abs(moveX) > swipeLeft ? -swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              } else if (swipeRight) {\n                const x = Math.abs(moveX) > swipeLeft ? swipeLeft : moveX;\n                instance.style.transform = 'translateX(' + x + 'px)';\n              }\n            }\n          }\n        },\n        true\n      );\n\n      // Finish Sliding Action\n      instance.addEventListener(\n        'touchend',\n        function () {\n          // Limit to one instance\n          if (moveStart === null) {\n            return;\n          }\n\n          // Slower Animation\n          instance.style.transitionDuration = '125ms';\n\n          // If swipe active\n          if (util.hasClass(instance, 'move-out-click')) {\n            if (moveX > 0 && swipeLeft) {\n              const x = moveX > 10 ? 0 : -swipeLeft;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x === 0) {\n                util.removeClass(instance, 'move-out-click');\n              }\n            } else if (swipeRight) {\n              const x = moveX < -10 ? 0 : swipeLeft;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x === 0) {\n                util.removeClass(instance, 'move-out-click');\n              }\n            }\n          } else {\n            if (moveX < 0 && swipeLeft) {\n              const x = Math.abs(moveX) > swipeLeft / 2 ? -swipeLeft : 0;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x !== 0) {\n                util.addClass(instance, 'move-out-click');\n              }\n            } else if (swipeRight) {\n              const x = Math.abs(moveX) > swipeLeft / 2 ? swipeLeft : 0;\n              instance.style.transform = 'translateX(' + x + 'px)';\n              if (x !== 0) {\n                util.addClass(instance, 'move-out-click');\n              }\n            }\n          }\n\n          // Restore initial position\n          moveStart = null;\n          moveX = 0;\n        },\n        true\n      );\n\n      // Cancel\n      instance.addEventListener(\n        'touchcancel',\n        function () {\n          instance.style.transitionDuration = '225ms';\n          instance.style.webkitTransform = 'translateX(0px)';\n          instance.style.transform = 'translateX(0px)';\n          util.removeClass(instance, 'move-out-click');\n          moveStart = null;\n          moveX = 0;\n        },\n        true\n      );\n    });\n  }\n};\n","import { stateChangeEvent, swapServer } from './displayUpdate';\nimport { buttons, env, updatePositions } from './env';\n\nexport function defineActionEvents() {\n  env.match.events.addPoint(stateChangeEvent);\n  env.match.events.undo(stateChangeEvent);\n  env.match.events.reset(resetEvent);\n}\n\nexport function resetEvent() {\n  env.match.set.perspectiveScore(false);\n  env.match.set.liveStats(true);\n  env.match.metadata.timestamps(true);\n  env.match.metadata.defineMatch({ date: null });\n\n  env.serve2nd = false;\n  env.rally_mode = false;\n  env.serving = env.match.nextTeamServing();\n  env.receiving = env.match.nextTeamReceiving();\n  env.undone = [];\n  env.rally = 0;\n  env.lets = 0;\n\n  resetStyles();\n  updatePositions();\n  swapServer();\n  stateChangeEvent();\n}\n\nexport function resetStyles() {\n  Object.keys(buttons).forEach((id) => resetButton(id));\n}\n\nexport function resetButton(id: string) {\n  const button = document.getElementById(id);\n  if (!button) return;\n  if (buttons?.[id] && buttons[id].color) {\n    button.style.backgroundColor = 'white';\n    button.style.color = buttons[id].color;\n    button.style.borderColor = buttons[id].color;\n  }\n}\n","export function UUID() {\n  const lut: string[] = [];\n\n  for (let i = 0; i < 256; i++) {\n    lut[i] = (i < 16 ? '0' : '') + i.toString(16);\n  }\n\n  const d0 = (Math.random() * 0xffffffff) | 0;\n  const d1 = (Math.random() * 0xffffffff) | 0;\n  const d2 = (Math.random() * 0xffffffff) | 0;\n  const d3 = (Math.random() * 0xffffffff) | 0;\n  // eslint-disable-next-line no-mixed-operators\n  return (\n    lut[d0 & 0xff] +\n    lut[(d0 >> 8) & 0xff] +\n    lut[(d0 >> 16) & 0xff] +\n    lut[(d0 >> 24) & 0xff] +\n    '-' +\n    // eslint-disable-next-line no-mixed-operators\n    lut[d1 & 0xff] +\n    lut[(d1 >> 8) & 0xff] +\n    '-' +\n    lut[((d1 >> 16) & 0x0f) | 0x40] +\n    lut[(d1 >> 24) & 0xff] +\n    '-' +\n    // eslint-disable-next-line no-mixed-operators\n    lut[(d2 & 0x3f) | 0x80] +\n    lut[(d2 >> 8) & 0xff] +\n    '-' +\n    lut[(d2 >> 16) & 0xff] +\n    lut[(d2 >> 24) & 0xff] +\n    // eslint-disable-next-line no-mixed-operators\n    lut[d3 & 0xff] +\n    lut[(d3 >> 8) & 0xff] +\n    lut[(d3 >> 16) & 0xff] +\n    lut[(d3 >> 24) & 0xff]\n  );\n}\n\n/**\n * UUID prepended with 'u_' which is safe for html attribute ids\n */\nexport function safeUUID() {\n  return `u_${UUID()}`;\n}\n","import { loadDetails, stateChangeEvent, updateScore } from './displayUpdate';\nimport { clearActionEvents, env, updatePositions } from './env';\nimport { browserStorage } from './browserStorage';\nimport { defineActionEvents } from './events';\nimport { viewManager } from './viewManager';\nimport { isJSON } from './utilities';\nimport { UUID } from './UUID';\n\nexport function loadMatch(match_id: string, view = 'entry') {\n  if (!match_id) {\n    viewManager('entry');\n    return;\n  }\n  env.match.reset();\n  const json = browserStorage.get(match_id);\n  const match_data = json && isJSON(json) && match_id ? JSON.parse(browserStorage.get(match_id) ?? '[]') : undefined;\n  if (!match_data) {\n    // newMatch(); ??\n    // insure match_id is not in match_archive ??\n    viewManager('entry');\n    return;\n  }\n\n  // reduce overhead by turning off matchObject state change events;\n  clearActionEvents();\n  browserStorage.set('current_match', match_id);\n  if (match_data.match) {\n    if (!match_data.match.muid) {\n      match_data.match.muid = UUID();\n      browserStorage.remove(match_id);\n    }\n    env.match.metadata.defineMatch(match_data.match);\n  }\n  if (match_data.first_service) env.match.set.firstService(match_data.first_service);\n  if (match_data.tournament) env.match.metadata.defineTournament(match_data.tournament);\n  if (match_data.format) {\n    env.match.format.settings(match_data.format);\n    const mdFormat = document.getElementById('md_format');\n    if (mdFormat) mdFormat.innerHTML = match_data.format.name;\n  }\n\n  if (!match_data.version) {\n    match_data.points.forEach((point: any) => env.match.addPoint(point));\n  }\n\n  // turn on timestamps *after* loading all points\n  env.match.metadata.timestamps(true);\n\n  if (match_data.players) {\n    match_data.players.forEach((player: any, index: number) => {\n      player.index = index;\n      env.match.metadata.definePlayer(player);\n    });\n  }\n  updatePositions();\n  updateScore();\n  loadDetails();\n  stateChangeEvent();\n  defineActionEvents();\n  viewManager(view);\n}\n","import { loadDetails, stateChangeEvent, updateScore } from './displayUpdate';\nimport exportImage from '../assets/icons/exportwhite.png';\nimport recycleImage from '../assets/icons/recycle.png';\nimport { findUpClass, firstAndLast } from './utilities';\nimport { browserStorage } from './browserStorage';\nimport { modalExport } from './modalExport';\nimport { viewManager } from './viewManager';\nimport { SwipeList } from './swipeList';\nimport { loadMatch } from './loadMatch';\nimport { UUID } from './UUID';\nimport { env } from './env';\n\nexport function displayMatchArchive(params?: any) {\n  const active = params?.active;\n  let html = `<div class='swipe-panel no-top'>`;\n  // archive used to sort by match.date when match_id was timestamp...\n  // need a fix for this...\n  const match_archive: string[] = JSON.parse(browserStorage.get('match_archive') || '[]')\n    .filter((item: any, i: number, s: any) => s.lastIndexOf(item) == i)\n    .reverse();\n  if (!match_archive.length) {\n    newMatch();\n    return;\n  }\n  if (active) return;\n\n  match_archive.forEach((match_id: string) => {\n    const match_data = match_id && JSON.parse(browserStorage.get(match_id) ?? '[]');\n    if (match_data) {\n      html += archiveEntry(match_id, match_data);\n    } else {\n      browserStorage.remove(match_id);\n    }\n  });\n  html += '</div>';\n  const ma_elem = document.getElementById('matcharchiveList');\n  if (ma_elem) ma_elem.innerHTML = html;\n\n  SwipeList.init({\n    container: '.swipe-item',\n    buttons: [\n      {\n        class: 'img_export swipe_img',\n        image_class: 'export_icon',\n        image: exportImage,\n        side: 'right',\n        width: 60\n      },\n      {\n        class: 'img_recycle swipe_img',\n        image_class: 'recycle_icon',\n        image: recycleImage,\n        side: 'right',\n        width: 60\n      }\n    ]\n  });\n\n  if (ma_elem) {\n    ma_elem.addEventListener('click', function (e: any) {\n      const p = findUpClass(e.target, 'swipe-item');\n      const muid = p?.getAttribute('muid');\n      const selected_match = findUpClass(e.target, 'mh_match');\n      if (selected_match) {\n        return loadMatch(muid);\n      }\n\n      if (e?.target?.className?.indexOf('img_export') >= 0 || e.target.className == 'export_icon') {\n        p.classList.remove('move-out-click');\n        p.style.webkitTransitionDuration = '125ms';\n        p.style.transitionDuration = '125ms';\n        p.style.webkitTransform = 'translateX(0px)';\n        p.style.transform = 'translateX(0px)';\n        modalExport(muid);\n      }\n      if (e.target.className.indexOf('img_recycle') >= 0 || e.target.className == 'recycle_icon') {\n        deleteMatch(muid);\n        p.remove();\n      }\n    });\n  }\n\n  return match_archive;\n}\n\nfunction deleteMatch(match_id: string) {\n  /*\n  if (broadcasting()) {\n    const match_data = JSON.parse(browserStorage.get(match_id));\n    const data: any = { muid: match_id };\n    const tournament = (match_data && match_data.tournament) || {};\n    data.tuid = tournament.tuid || tournament.name;\n    // coms.socket.emit('delete match', data);\n  }\n  */\n\n  browserStorage.remove(match_id);\n  const current_match_id = browserStorage.get('current_match');\n  let match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n  match_archive = match_archive.filter((archive_id: string) => match_id != archive_id);\n  browserStorage.set('match_archive', JSON.stringify(match_archive));\n  if (match_id == current_match_id) {\n    resetMatch();\n  }\n  displayMatchArchive({ active: true });\n}\n\nexport function resetMatch(muid?: string) {\n  env.match.reset();\n  loadDetails();\n  updateScore();\n  const date = new Date().valueOf();\n  muid = muid || UUID();\n  env.match.metadata.defineMatch({ muid, date });\n  browserStorage.set('current_match', muid);\n  stateChangeEvent();\n}\n\nexport function newMatch(force_format?: boolean) {\n  resetMatch();\n  viewManager(force_format ? 'entry' : 'matchformat');\n}\n\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nfunction archiveEntry(match_id: string, match_data: any) {\n  const date = new Date(match_data.match.date);\n  const display_date = [date.getDate(), months[date.getMonth()], date.getFullYear()].join('-');\n  const players = match_data.players;\n  const display_players = `\n         <span class='nowrap'>${firstAndLast(players[0].name)}</span>\n         <span> v. </span>\n         <span class='nowrap'>${firstAndLast(players[1].name)}</span>\n         `;\n  const match_score = match_data.scoreboard;\n  const match_format = match_data.format.name;\n  return `\n      <div id='match_${match_id}' muid='${match_id}' class='flexcenter mh_swipe swipe-item'>\n         <div class='flexcols mh_match'>\n            <div class='mh_players'>${display_players}</div>\n            <div class='mh_details'>\n               <div>${display_date}</div>\n               <div class='mh_format'>${match_format}</div>\n            </div>\n            <div class='mh_score'>${match_score}</div>\n         </div>\n      </div>`;\n}\n","import { env } from './env';\nimport { mo } from './umo';\n\nexport function displayFormats() {\n  const format_types = env.match.format.types();\n  let html = '';\n  if (!format_types.length) return false;\n  format_types.forEach((format: any) => {\n    html += formatEntry(format);\n  });\n  const matchFormatList = document.getElementById('matchformatlist');\n  if (matchFormatList) matchFormatList.innerHTML = html;\n}\n\nfunction formatEntry(format: any) {\n  const { name, description } = mo.formats().matches[format];\n  return `\n  <div class='changeFormat flexjustifystart mf_format' newFormat=\"${format}\">\n      <div class='changeFormat flexcols'>\n        <div class='changeFormat mf_name'> <b class='changeFormat'>${name || ''}</b> </div>\n        <div class='changeFormat mf_description'> ${description} </div>\n      </div>\n  </div>\n  `;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import range from \"./range\";\n\nvar e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var step = tickStep(start, stop, count);\n  return range(\n    Math.ceil(start / step) * step,\n    Math.floor(stop / step) * step + step / 2, // inclusive\n    step\n  );\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array\";\nimport identity from \"./identity\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(scale0, scale1, d) {\n  var x = scale0(d);\n  return \"translate(\" + (isFinite(x) ? x : scale1(d)) + \",0)\";\n}\n\nfunction translateY(scale0, scale1, d) {\n  var y = scale0(d);\n  return \"translate(0,\" + (isFinite(y) ? y : scale1(d)) + \")\";\n}\n\nfunction center(scale) {\n  var offset = scale.bandwidth() / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        transform = orient === top || orient === bottom ? translateX : translateY,\n        range = scale.range(),\n        range0 = range[0] + 0.5,\n        range1 = range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : identity)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\"),\n        k = orient === top || orient === left ? -1 : 1,\n        x, y = orient === left || orient === right ? (x = \"x\", \"y\") : (x = \"y\", \"x\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner)\n        .attr(y + \"1\", 0.5)\n        .attr(y + \"2\", 0.5));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(y, 0.5)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return transform(position, this.parentNode.__axis || position, d); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return transform(this.parentNode.__axis || position, position, d); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position, position, d); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  var node;\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : defaultView(node = this.node())\n          .getComputedStyle(node, null)\n          .getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (event) {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(nb),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow;\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, delay);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clockNow, interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id]) || schedule.state > CREATED) throw new Error(\"too late\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id]) || schedule.state > STARTING) throw new Error(\"too late\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"too late\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      // Dispatch the interrupt event.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions. No interrupt event is dispatched\n      // because the cancelled transitions never started. Note that this also\n      // removes this transition from the pending list!\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(null, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    if (active) schedule.on.call(\"interrupt\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttribute(name);\n    value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrTweenNS(fullname, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttributeNS(fullname.space, fullname.local, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttribute(name, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {window} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction styleRemove(name, interpolate) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var style = window(this).getComputedStyle(this, null),\n        value0 = style.getPropertyValue(name),\n        value1 = (this.style.removeProperty(name), style.getPropertyValue(name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction styleRemoveEnd(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = window(this).getComputedStyle(this, null).getPropertyValue(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var style = window(this).getComputedStyle(this, null),\n        value0 = style.getPropertyValue(name),\n        value1 = value(this);\n    if (value1 == null) value1 = (this.style.removeProperty(name), style.getPropertyValue(name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n          .styleTween(name, styleRemove(name, i))\n          .on(\"end.style.\" + name, styleRemoveEnd(name))\n      : this.styleTween(name, typeof value === \"function\"\n          ? styleFunction(name, i, tweenValue(this, \"style.\" + name, value))\n          : styleConstant(name, i, value), priority);\n}\n","function styleTween(name, value, priority) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.style.setProperty(name, i(t), priority);\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {Transition, newId} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr\";\nimport transition_attrTween from \"./attrTween\";\nimport transition_delay from \"./delay\";\nimport transition_duration from \"./duration\";\nimport transition_ease from \"./ease\";\nimport transition_filter from \"./filter\";\nimport transition_merge from \"./merge\";\nimport transition_on from \"./on\";\nimport transition_remove from \"./remove\";\nimport transition_select from \"./select\";\nimport transition_selectAll from \"./selectAll\";\nimport transition_selection from \"./selection\";\nimport transition_style from \"./style\";\nimport transition_styleTween from \"./styleTween\";\nimport transition_text from \"./text\";\nimport transition_transition from \"./transition\";\nimport transition_tween from \"./tween\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","import {Transition, newId} from \"../transition/index\";\nimport schedule from \"../transition/schedule\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt\";\nimport selection_transition from \"./transition\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import {Transition} from \"./transition/index\";\nimport {SCHEDULED} from \"./transition/schedule\";\n\nvar root = [null];\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) {}\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      if (da < 0) da = da % tau + tau;\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","function objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n]\"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns;\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I, c;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.slice(j + 1, i).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var k = 1;\n        c = text.charCodeAt(I++);\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.slice(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.slice(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && (a = f(a, n++)) == null) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\"\n        : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;\n","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y1 = y0 + z, x > x1 || y > y1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y1 = y0 + z, x0 > x || y > y1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y0 = y1 - z, x > x1 || y0 > y);\n        break;\n      }\n      case 3: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y0 = y1 - z, x0 > x || y0 > y);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the quadtree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","import Quad from \"./quad\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction identity(x) {\n  return x;\n}\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal;\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Convert negative to positive, and compute the prefix.\n        // Note that -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n        // Perform the initial formatting.\n        value = formatType(value, precision);\n\n        // If the original value was negative, it may be rounded to zero during\n        // formatting; treat this as (positive) zero.\n        if (valueNegative) {\n          i = -1, n = value.length;\n          valueNegative = false;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), (48 < c && c < 58)\n                || (type === \"x\" && 96 < c && c < 103)\n                || (type === \"X\" && 64 < c && c < 71)) {\n              valueNegative = true;\n              break;\n            }\n          }\n        }\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": return valuePrefix + value + valueSuffix + padding;\n        case \"=\": return valuePrefix + padding + value + valueSuffix;\n        case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n      }\n      return padding + valuePrefix + value + valueSuffix;\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","import adder from \"./adder\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nexport var areaRingSum = adder();\n\nvar areaSum = adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import adder from \"./adder\";\nimport {areaStream, areaRingSum} from \"./area\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport {abs, degrees, epsilon, radians} from \"./math\";\nimport stream from \"./stream\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum = adder(),\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    boundsPoint(lambda, phi);\n  }\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360) % 360, except that we want\n// the distance between 180 to be 360.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import compose from \"./compose\";\nimport {asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import adder from \"./adder\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nvar lengthSum = adder(),\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum.reset();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","import adder from \"../adder\";\nimport {abs} from \"../math\";\nimport noop from \"../noop\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import adder from \"./adder\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian\";\nimport {asin, atan2, cos, epsilon, pi, quarterPi, sin, tau} from \"./math\";\n\nvar sum = adder();\n\nexport default function(polygon, point) {\n  var lambda = point[0],\n      phi = point[1],\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = point0[0],\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = point1[0],\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import projection from \"./index\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","import node_count from \"./count\";\nimport node_each from \"./each\";\nimport node_eachBefore from \"./eachBefore\";\nimport node_eachAfter from \"./eachAfter\";\nimport node_sum from \"./sum\";\nimport node_sort from \"./sort\";\nimport node_path from \"./path\";\nimport node_ancestors from \"./ancestors\";\nimport node_descendants from \"./descendants\";\nimport node_leaves from \"./leaves\";\nimport node_links from \"./links\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","import {Node} from \"./hierarchy/index\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice\";\nimport treemapSlice from \"./slice\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","import treemapDice from \"./dice\";\nimport treemapSlice from \"./slice\";\nimport {phi, squarifyRatio} from \"./squarify\";\n\nexport default (function custom(ratio) {\n\n  function resquarify(parent, x0, y0, x1, y1) {\n    if ((rows = parent._squarify) && (rows.ratio === ratio)) {\n      var rows,\n          row,\n          nodes,\n          i,\n          j = -1,\n          n,\n          m = rows.length,\n          value = parent.value;\n\n      while (++j < m) {\n        row = rows[j], nodes = row.children;\n        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;\n        if (row.dice) treemapDice(row, x0, y0, x1, y0 += (y1 - y0) * row.value / value);\n        else treemapSlice(row, x0, y0, x0 += (x1 - x0) * row.value / value, y1);\n        value -= row.value;\n      }\n    } else {\n      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);\n      rows.ratio = ratio;\n    }\n  }\n\n  resquarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return resquarify;\n})(phi);\n","export var slice = [].slice;\n","import {slice} from \"./array\";\n\nvar noabort = {};\n\nfunction Queue(size) {\n  if (!(size >= 1)) throw new Error;\n  this._size = size;\n  this._call =\n  this._error = null;\n  this._tasks = [];\n  this._data = [];\n  this._waiting =\n  this._active =\n  this._ended =\n  this._start = 0; // inside a synchronous task callback?\n}\n\nQueue.prototype = queue.prototype = {\n  constructor: Queue,\n  defer: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    if (this._error != null) return this;\n    var t = slice.call(arguments, 1);\n    t.push(callback);\n    ++this._waiting, this._tasks.push(t);\n    poke(this);\n    return this;\n  },\n  abort: function() {\n    if (this._error == null) abort(this, new Error(\"abort\"));\n    return this;\n  },\n  await: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    this._call = function(error, results) { callback.apply(null, [error].concat(results)); };\n    maybeNotify(this);\n    return this;\n  },\n  awaitAll: function(callback) {\n    if (typeof callback !== \"function\" || this._call) throw new Error;\n    this._call = callback;\n    maybeNotify(this);\n    return this;\n  }\n};\n\nfunction poke(q) {\n  if (!q._start) {\n    try { start(q); } // let the current task complete\n    catch (e) {\n      if (q._tasks[q._ended + q._active - 1]) abort(q, e); // task errored synchronously\n      else if (!q._data) throw e; // await callback errored synchronously\n    }\n  }\n}\n\nfunction start(q) {\n  while (q._start = q._waiting && q._active < q._size) {\n    var i = q._ended + q._active,\n        t = q._tasks[i],\n        j = t.length - 1,\n        c = t[j];\n    t[j] = end(q, i);\n    --q._waiting, ++q._active;\n    t = c.apply(null, t);\n    if (!q._tasks[i]) continue; // task finished synchronously\n    q._tasks[i] = t || noabort;\n  }\n}\n\nfunction end(q, i) {\n  return function(e, r) {\n    if (!q._tasks[i]) return; // ignore multiple callbacks\n    --q._active, ++q._ended;\n    q._tasks[i] = null;\n    if (q._error != null) return; // ignore secondary errors\n    if (e != null) {\n      abort(q, e);\n    } else {\n      q._data[i] = r;\n      if (q._waiting) poke(q);\n      else maybeNotify(q);\n    }\n  };\n}\n\nfunction abort(q, e) {\n  var i = q._tasks.length, t;\n  q._error = e; // ignore active callbacks\n  q._data = undefined; // allow gc\n  q._waiting = NaN; // prevent starting\n\n  while (--i >= 0) {\n    if (t = q._tasks[i]) {\n      q._tasks[i] = null;\n      if (t.abort) {\n        try { t.abort(); }\n        catch (e) { /* ignore */ }\n      }\n    }\n  }\n\n  q._active = NaN; // allow notification\n  maybeNotify(q);\n}\n\nfunction maybeNotify(q) {\n  if (!q._active && q._call) {\n    var d = q._data;\n    q._data = undefined; // allow gc\n    q._call(q._error, d);\n  }\n}\n\nexport default function queue(concurrency) {\n  return new Queue(arguments.length ? +concurrency : Infinity);\n}\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band()\n        .domain(domain())\n        .range(range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return rescale();\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band().paddingInner(1));\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    var d = domain(),\n        i = d.length - 1,\n        n = count == null ? 10 : count,\n        start = d[0],\n        stop = d[i],\n        step = tickStep(start, stop, n);\n\n    if (step) {\n      step = tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n      d[0] = Math.floor(start / step) * step;\n      d[i] = Math.ceil(stop / step) * step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {timeDay, timeSunday, timeMonday, timeYear, utcDay, utcSunday, utcMonday, utcYear} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"S\": formatSeconds,\n    \"U\": formatWeekNumberSunday,\n    \"w\": formatWeekdayNumber,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"S\": formatUTCSeconds,\n    \"U\": formatUTCWeekNumberSunday,\n    \"w\": formatUTCWeekdayNumber,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"S\": parseSeconds,\n    \"U\": parseWeekNumberSunday,\n    \"w\": parseWeekdayNumber,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0);\n      if (i != string.length) return null;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n        var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekdayNumber(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekdayNumber(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\n\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n\n  insert: function(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n      if (after.R) {\n        after = after.R;\n        while (after.L) after = after.L;\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n\n    after = node;\n    while (parent && parent.C) {\n      grandpa = parent.U;\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n      parent = after.U;\n    }\n    this._.C = false;\n  },\n\n  remove: function(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n\n    if (!left) next = right;\n    else if (!right) next = left;\n    else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;\n      else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n    if (node && node.C) { node.C = false; return; }\n\n    do {\n      if (node === this._) break;\n      if (node === parent.L) {\n        sibling = parent.R;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n        if ((sibling.L && sibling.L.C)\n            || (sibling.R && sibling.R.C)) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n        if ((sibling.L && sibling.L.C)\n          || (sibling.R && sibling.R.C)) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) node = node.L;\n  return node;\n}\n\nexport default RedBlackTree;\n","import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// LiangBarsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n","import {createBorderEdge} from \"./Edge\";\nimport {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];\n  else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\n\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\n\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      index.sort(function(i, j) { return array[j] - array[i]; });\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\n    }\n  }\n}\n\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length;\n\n      // Remove any dangling clipped edges.\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      }\n\n      // Insert any border edges as necessary.\n      iHalfedge = 0, nHalfedges = halfedges.length;\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\n              : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  }\n\n  // If there werent any edges, have the closest site cover the extent.\n  // It doesnt matter which corner of the extent we measure!\n  if (cover) {\n    var dx, dy, d2, dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\n      cover.halfedges.push(\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\n        edges.push(createBorderEdge(site, v10, v00)) - 1\n      );\n    }\n  }\n\n  // Lastly delete any cells with no edges; these were entirely clipped.\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {circles, epsilon2} from \"./Diagram\";\n\nvar circlePool = [];\n\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x =\n  this.y =\n  this.arc =\n  this.site =\n  this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n\n  if (!lArc || !rArc) return;\n\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n\n  if (lSite === rSite) return;\n\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n\n  var circle = circlePool.pop() || new Circle;\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\n      if (node.L) node = node.L;\n      else { before = node.P; break; }\n    } else {\n      if (node.R) node = node.R;\n      else { before = node; break; }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\n\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {createCell} from \"./Cell\";\nimport {attachCircle, detachCircle} from \"./Circle\";\nimport {createEdge, setEdgeEnd} from \"./Edge\";\nimport {beaches, epsilon} from \"./Diagram\";\n\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge =\n  this.site =\n  this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach;\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n\n  detachBeach(beach);\n\n  var lArc = previous;\n  while (lArc.circle\n      && Math.abs(x - lArc.circle.x) < epsilon\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n\n  var rArc = next;\n  while (rArc.circle\n      && Math.abs(x - rArc.circle.x) < epsilon\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n\n  var nArcs = disappearing.length,\n      iArc;\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L; else {\n      dxr = x - rightBreakPoint(node, directrix);\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) { // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  }\n\n  // else lArc !== rArc\n  detachCircle(lArc);\n  detachCircle(rArc);\n\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n\n  if (!pby2) return rfocx;\n\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n\n  if (!plby2) return lfocx;\n\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}\n","import {addBeach, removeBeach} from \"./Beach\";\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\nimport {firstCircle} from \"./Circle\";\nimport {clipEdges} from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1]\n      || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree;\n  circles = new RedBlackTree;\n\n  while (true) {\n    circle = firstCircle;\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n\n  beaches =\n  circles =\n  edges =\n  cells = null;\n}\n\nDiagram.prototype = {\n  constructor: Diagram,\n\n  polygons: function() {\n    var edges = this.edges;\n\n    return this.cells.map(function(cell) {\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n\n  triangles: function() {\n    var triangles = [],\n        edges = this.edges;\n\n    this.cells.forEach(function(cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n\n    return triangles;\n  },\n\n  links: function() {\n    return this.edges.filter(function(edge) {\n      return edge.right;\n    }).map(function(edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n\n  find: function(x, y, radius) {\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\n\n    // Use the previously-found cell, or start with an arbitrary one.\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\n\n    // Traverse the half-edges to find a closer cell, if any.\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function(e) {\n        var edge = that.edges[e], v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  return node.__zoom || identity;\n}\n","import * as d3 from 'd3';\n\nexport function strokeSlider(show?: string) {\n  let range;\n  const width = window.innerWidth;\n  const stroke_slider = document.getElementById('stroke_slider');\n  const slideRight = document.getElementById('slideright');\n  const slideLeft = document.getElementById('slideleft');\n\n  const hideSlide = () => {\n    if (stroke_slider) stroke_slider.style.display = 'none';\n  };\n\n  if (show) {\n    if (stroke_slider) {\n      stroke_slider.style.display = 'flex';\n      stroke_slider.style.left = show == 'left' ? width * -1 + 'px' : width * 1.5 + 'px';\n    }\n    if (slideLeft) slideLeft.style.display = show == 'right' ? 'flex' : 'none';\n    if (slideRight) slideRight.style.display = show == 'left' ? 'flex' : 'none';\n\n    range = show == 'left' ? d3.range(0, 1.1, 0.1) : d3.range(0, 1.1, 0.1).reverse();\n    d3.selectAll('.stroke_slider')\n      .data(range)\n      .transition()\n      .duration(500)\n      .style('left', function (d: number) {\n        return d * width * 0.5 + 'px';\n      });\n  } else {\n    const side = slideLeft?.style.display == 'flex' ? 'right' : 'left';\n    range = side == 'left' ? d3.range(-1.5, 1.1, 0.1) : d3.range(1, 2.6, 0.1).reverse();\n    setTimeout(() => hideSlide(), 700);\n  }\n  d3.selectAll('.stroke_slider')\n    .data(range)\n    .transition()\n    .duration(500)\n    .style('left', function (d: number) {\n      return d * width * 0.5 + 'px';\n    });\n}\n","// Test via a getter in the options object to see if the passive property is accessed\nlet supportsPassive = false;\ntry {\n  const opts = Object.defineProperty({}, 'passive', {\n    get: () => {\n      supportsPassive = true;\n      return true;\n    }\n  });\n  window.addEventListener('test', null, opts);\n} catch (e) {\n  console.log(e);\n}\n\nconst behaviors: any = {\n  orientation: undefined,\n  time_threshold: 200,\n  diff_threshold: 130,\n  press_hold_threshold: 400,\n  prevent_touch: true,\n  prevent_double_tap: false,\n  addSwipeTarget(target) {\n    target.addEventListener('touchstart', handleTouchStart, supportsPassive ? { passive: true } : false);\n    target.addEventListener('touchmove', handleTouchMove, supportsPassive ? { passive: true } : false);\n    target.addEventListener('touchend', swipeTouchEnd, false);\n\n    target.addEventListener('mousedown', handleTouchStart, false);\n    target.addEventListener('mousemove', handleTouchMove, false);\n    target.addEventListener('mouseup', swipeTouchEnd, false);\n  },\n  addPressAndHold(target) {\n    target.addEventListener('touchstart', handleTouchStart, supportsPassive ? { passive: true } : false);\n    target.addEventListener('mousedown', handleTouchStart, false);\n    target.addEventListener('touchend', pressAndHoldEnd, false);\n    target.addEventListener('mouseup', pressAndHoldEnd, false);\n  },\n  disableDrag() {\n    document.addEventListener('touchmove', preventDrag, false);\n    document.addEventListener('touchend', preventDoubleTap, false);\n    document.addEventListener('mousemove', preventDrag, false);\n    document.addEventListener('mouseup', preventDoubleTap, false);\n  }\n};\n\n/* to make it appear more like a native app disable dragging and double tap */\nfunction preventDrag(evt) {\n  if (behaviors.prevent_touch && (window.innerHeight > 450 || behaviors.orientation == 'landscape'))\n    evt.preventDefault();\n}\n\nfunction preventDoubleTap(evt) {\n  const now = new Date().getTime();\n  if (behaviors.prevent_double_tap && now - last_touch < 500) evt.preventDefault();\n  last_touch = now;\n}\n\nlet xDown = null;\nlet yDown = null;\nlet xDiff = null;\nlet yDiff = null;\nlet timeDown = null;\nlet touch_target = null;\nlet last_touch = new Date().getTime();\n\nfunction handleTouchMove(evt) {\n  if (!xDown || !yDown) return;\n  let xUp: number, yUp: number;\n  if (evt.type == 'mousemove') {\n    xUp = evt.clientX;\n    yUp = evt.clientY;\n  } else {\n    xUp = evt.touches[0].clientX;\n    yUp = evt.touches[0].clientY;\n  }\n  xDiff = xDown - xUp;\n  yDiff = yDown - yUp;\n}\n\n/**\nfunction containsClassName(evntarget, classArr) {\n  for (let i = classArr.length - 1; i >= 0; i--) {\n    if (evntarget.classList.contains(classArr[i])) return true;\n  }\n}\n*/\n\nfunction handleTouchStart(evt) {\n  touch_target = evt.target;\n  timeDown = Date.now();\n  if (evt.type == 'mousedown') {\n    xDown = evt.clientX;\n    yDown = evt.clientY;\n  } else {\n    xDown = evt.touches[0].clientX;\n    yDown = evt.touches[0].clientY;\n  }\n  xDiff = 0;\n  yDiff = 0;\n}\n\nfunction findAncestor(el, cls) {\n  if (el.classList.contains(cls)) return el;\n  while ((el = el.parentNode && el.classList && !el.classList.contains(cls)));\n  return el;\n}\n\nfunction swipeTouchEnd() {\n  const timeDiff = Date.now() - timeDown;\n  if (\n    (Math.abs(xDiff) > behaviors.diff_threshold || Math.abs(yDiff) > behaviors.diff_threshold) &&\n    timeDiff < behaviors.time_threshold\n  ) {\n    if (Math.abs(xDiff) > Math.abs(yDiff)) {\n      if (xDiff > 0) {\n        if (typeof behaviors.swipeLeft == 'function') behaviors.swipeLeft(findAncestor(touch_target, 'swipe'));\n      } else if (typeof behaviors.swipeRight == 'function') {\n        behaviors.swipeRight(findAncestor(touch_target, 'swipe'));\n      }\n    } else if (yDiff > 0) {\n      if (typeof behaviors.swipeUp == 'function') behaviors.swipeUp(findAncestor(touch_target, 'swipe'));\n    } else if (typeof behaviors.swipeDown == 'function') {\n      behaviors.swipeDown(findAncestor(touch_target, 'swipe'));\n    }\n  }\n  xDown = null;\n  yDown = null;\n  timeDown = null;\n}\n\nfunction pressAndHoldEnd() {\n  const timeDiff = Date.now() - timeDown;\n  if (timeDiff > behaviors.press_hold_threshold && typeof behaviors.pressAndHold == 'function')\n    behaviors.pressAndHold(findAncestor(touch_target, 'pressAndHold'));\n  xDown = null;\n  yDown = null;\n  timeDown = null;\n}\n\nexport const touchManager = behaviors;\nexport default behaviors;\n","import * as d3 from 'd3';\n\nexport function simpleChart(target: any, data: any) {\n  const dom_parent = d3.select('#' + target);\n  // let dims = dom_parent.node().getBoundingClientRect();\n  //   let screen_width = dims.width;\n  //   let screen_height = screen_width / 2;\n  const screen_width = window.innerWidth * 0.85;\n  const screen_height = screen_width / 2;\n\n  const min_points = 50;\n  const colors = ['blue', 'red'];\n  dom_parent.selectAll('svg').remove();\n  const svg = dom_parent.append('svg').attr('width', screen_width).attr('height', screen_height);\n\n  const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  const width = +svg.attr('width') - margin.left - margin.right;\n  const height = +svg.attr('height') - margin.top - margin.bottom;\n\n  const x = d3.scaleLinear().range([0, width]);\n  const y = d3.scaleLinear().range([height, 0]);\n\n  const line = d3\n    .line()\n    .x(function (d) {\n      return x(d[0]);\n    })\n    .y(function (d) {\n      return y(d[1]);\n    });\n  //      .curve(d3.curveStepAfter);\n\n  const chart = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  const maxY = Math.max(...data.map((p) => p.length));\n  x.domain([0, Math.max(...data.map((p) => Math.max(...p)), min_points)]);\n  y.domain([0, maxY]);\n\n  chart\n    .append('g')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x).ticks(0));\n\n  chart\n    .append('g')\n    .style('font', '24px times')\n    .call(\n      d3\n        .axisLeft(y)\n        .ticks(Math.min(maxY, 4))\n        .tickFormat((d) => d)\n    );\n\n  drawLines(data);\n  appendCircles(data);\n\n  function lineData(points) {\n    points = points.map((point, index) => [point, index + 1]);\n    points.unshift([0, 0]);\n    return points;\n  }\n\n  function drawLines(players) {\n    players.forEach((points, index) => {\n      chart\n        .append('path')\n        .datum(lineData(points))\n        .attr('fill', 'none')\n        .attr('stroke', colors[index])\n        .attr('stroke-width', '5px')\n        .attr('shape-rendering', 'crispEdges')\n        .attr('d', line);\n    });\n  }\n\n  function appendCircles(players) {\n    players.forEach((points, index) => {\n      const targetclass = '.datapoint' + index;\n      if (points.length < 10) {\n        chart\n          .selectAll(targetclass)\n          .data(lineData(points))\n          .enter()\n          .append('circle')\n          .attr('class', targetclass)\n          .attr('fill', '#FFFFFF')\n          .attr('stroke', colors[index])\n          .attr('stroke-width', '2px')\n          .attr('r', 3.5)\n          .attr('cx', function (d) {\n            return x(d[0]);\n          })\n          .attr('cy', function (d) {\n            return y(d[1]);\n          });\n      }\n    });\n  }\n}\n","import { simpleChart } from './simpleChart';\nimport { viewManager } from './viewManager';\nimport { env, options } from './env';\n\nexport function updateStats(set_filter?: any) {\n  let html = '';\n  const charts: any[] = [];\n  const sets = env.match.sets().length;\n  let statselectors = `<div class='s_set' onclick=\"updateStats()\">Match</div>`;\n  const stats = env.match.stats.calculated(set_filter);\n  const stripModifiers = (text: string) => text.match(/[A-Za-z0-9_]/g)?.join('');\n  if (stats && stats.length) {\n    // generate & display match/set view selectors\n    if (sets > 1) {\n      for (let s = 0; s < sets; s++) {\n        statselectors += `<div class='s_set' onclick=\"updateStats(${s})\">Set ${s + 1}</div>`;\n      }\n    }\n    const statView = document.querySelector('#statview');\n    if (statView) statView.innerHTML = statselectors;\n\n    // generate & display stats html\n    let left: any, right: any;\n    stats.forEach((stat: any) => {\n      if (env.swap_sides) {\n        [right, left] = stat.team_stats;\n      } else {\n        [left, right] = stat.team_stats;\n      }\n      const value: number = [0]\n        .concat(...[left, right].map((side: any) => (side.value ? side.value : [])))\n        .reduce((a: number, b: number) => a + b, 0);\n      const id = stripModifiers(stat.name.toLowerCase().split(' ').join('_'));\n      let left_display = left.display;\n      let right_display = right.display;\n\n      const numerators = []\n        .concat(...[left, right].map((value: any) => (value.numerators ? value.numerators : [])))\n        .filter((item, i, s) => s.lastIndexOf(item) == i)\n        .join(',');\n      const statclass = numerators && value && stat.name != 'Aggressive Margin' ? 'statname_chart' : 'statname';\n\n      if (isNaN(left.value)) {\n        left.value = 0;\n        left_display = '0';\n      }\n      if (isNaN(right.value)) {\n        right.value = 0;\n        right_display = '0';\n      }\n\n      if (options.highlight_better_stats) {\n        if (['Double Faults', 'Unforced Errors', 'Forced Errors'].indexOf(stat.name) >= 0) {\n          if (left.value < right.value) left_display = `<b>${left_display}</b>`;\n          if (right.value < left.value) right_display = `<b>${right_display}</b>`;\n        } else {\n          if (left.value > right.value) left_display = `<b>${left_display}</b>`;\n          if (right.value > left.value) right_display = `<b>${right_display}</b>`;\n        }\n      }\n      html +=\n        `<div class='statrow' id=\"${id}\" onClick=\"toggleChart(this)\"><div class='statleft'>${left_display}</div>` +\n        `<div class='${statclass}'>${stat.name}</div><div class='statright'>${right_display}</div></div>`;\n      const table = `<div class='statrow' id=\"${id}_chart\" style='display:none' onclick=\"showChartSource('${numerators}')\"></div>`;\n\n      if (numerators && value && stat.name != 'Aggressive Margin') {\n        charts.push({ target: `${id}_chart`, numerators });\n        html += table;\n      }\n    });\n\n    const counters = env.match.stats.counters(set_filter).teams;\n    if (counters[0].Backhand || counters[0].Forehand || counters[1].Backhand || counters[1].Forehand) {\n      const left = env.swap_sides ? 1 : 0;\n      const right = env.swap_sides ? 0 : 1;\n      html += `<div class='statsection flexcenter'>Finishing Shots - Strokes</div>`;\n      ['Forehand', 'Backhand'].forEach((hand) => {\n        if (counters[0][hand] || counters[1][hand]) {\n          const left_display = counters[left][hand] ? counters[left][hand].length : 0;\n          const right_display = counters[right][hand] ? counters[right][hand].length : 0;\n          html +=\n            `<div class='statrow'><div class='statleft'><b>${left_display}</b></div>` +\n            `<div class='statname'><b>Total ${hand} Shots</b></div><div class='statright'><b>${right_display}</b></div></div>`;\n          // get a list of unique results\n          const results = []\n            .concat(\n              ...Object.keys(counters).map((key) => {\n                return counters[key][hand]\n                  ? counters[key][hand].map((episode: any) => episode.point.result).filter(Boolean)\n                  : [];\n              })\n            )\n            .filter((item, i, s) => s.lastIndexOf(item) == i);\n          results.forEach((result) => {\n            const left_results = counters[left][hand]\n              ? counters[left][hand].filter((f: any) => f.point.result == result)\n              : [];\n            const right_results = counters[right][hand]\n              ? counters[right][hand].filter((f: any) => f.point.result == result)\n              : [];\n            if (left_results.length || right_results.length) {\n              html +=\n                `<div class='statrow'><div class='statleft'>${left_results.length}</div>` +\n                `<div class='statname'>${hand} ${result}s</div><div class='statright'>${right_results.length}</div></div>`;\n            }\n            // get a list of unique strokes\n            const strokes = []\n              .concat(\n                ...Object.keys(counters).map((key) => {\n                  return counters[key][hand]\n                    ? counters[key][hand].map((episode: any) => episode.point.stroke).filter(Boolean)\n                    : [];\n                })\n              )\n              .filter((item, i, s) => s.lastIndexOf(item) == i);\n            strokes.forEach((stroke) => {\n              const left_results = counters[left][hand]\n                ? counters[left][hand].filter((f: any) => f.point.result == result && f.point.stroke == stroke)\n                : [];\n              const right_results = counters[right][hand]\n                ? counters[right][hand].filter((f: any) => f.point.result == result && f.point.stroke == stroke)\n                : [];\n              if (left_results.length || right_results.length) {\n                html +=\n                  `<div class='statrow'><div class='statleft'>${left_results.length}</div>` +\n                  `<div class='statname'><i>${hand} ${stroke} ${result}s</i></div><div class='statright'>${right_results.length}</div></div>`;\n              }\n            });\n          });\n        }\n      });\n    }\n\n    const statLines = document.querySelector('#statlines');\n    if (statLines) statLines.innerHTML = html;\n    addCharts(charts);\n  } else {\n    viewManager('entry');\n  }\n}\n\nfunction addCharts(charts: any[]) {\n  const counters = env.match.stats.counters();\n  const stripModifiers = (text: string) => text.match(/[A-Za-z0-9]/g)?.join('');\n  if (!counters) return;\n  charts.forEach((chart) => {\n    const player_points: any = [];\n    Object.keys(counters.teams).forEach((key) => {\n      const team = counters.teams[key];\n      const numerators = chart.numerators.split(',').map((numerator: any) => stripModifiers(numerator));\n      const episodes = [].concat(...numerators.map((numerator: any) => team[numerator]));\n      const points = episodes\n        .map((episode: any) => (episode ? episode.point : undefined))\n        .filter((f) => f)\n        .sort((a, b) => a.index - b.index);\n      player_points.push(points.map((point) => point.index));\n    });\n    simpleChart(chart.target, player_points);\n  });\n}\n","import { formatChangePossible } from './formatChangePossible';\nimport { displayPointHistory } from './displayPointHistory';\nimport { displayMatchArchive } from './displayMatchArchive';\nimport { browserStorage } from './browserStorage';\nimport { displayFormats } from './displayFormats';\nimport { strokeSlider } from './strokeSlider';\nimport { touchManager } from './touchManager';\nimport { env, options, charts } from './env';\nimport { updateStats } from './updateStats';\n\nexport const changeDisplay = (display: string, id: string) => {\n  const element = document.getElementById(id);\n  if (element) element.style.display = display;\n};\n\nexport function viewManager(new_view = env.view, params?: any) {\n  // hide strokeslider any time view changes\n  strokeSlider();\n  // changeDisplay('none', 'system');\n\n  const views: any = {\n    mainmenu({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n\n        const match_archive = JSON.parse(browserStorage.get('match_archive') || '[]');\n        const menuMatchArchive = document.getElementById('menu_match_archive');\n        if (menuMatchArchive) menuMatchArchive.style.display = match_archive.length ? 'flex' : 'none';\n\n        const menuMatchFormat = document.getElementById('menu_match_format');\n        if (menuMatchFormat) menuMatchFormat.style.display = formatChangePossible() ? 'flex' : 'none';\n\n        const points = env.match.history.points();\n        const menuChangeServer = document.getElementById('menu_change_server');\n        if (menuChangeServer) menuChangeServer.style.display = points.length == 0 ? 'flex' : 'none';\n        // document.getElementById('footer_change_server').style.display = points.length == 0 ? 'inline' : 'none';\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'mainmenu');\n    },\n    pointhistory({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n        displayPointHistory();\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'pointhistory');\n    },\n    matcharchive({ activate = true } = {}) {\n      if (activate) {\n        touchManager.prevent_touch = false;\n        displayMatchArchive();\n      }\n      changeDisplay(activate ? 'flex' : 'none', 'matcharchive');\n    },\n    matchformat({ activate = true } = {}) {\n      displayFormats();\n      if (activate) touchManager.prevent_touch = false;\n      changeDisplay(activate ? 'flex' : 'none', 'matchformats');\n    },\n    settings({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'settings');\n    },\n    welcome({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'welcome');\n    },\n    matchdetails({ activate = true } = {}) {\n      if (activate) touchManager.prevent_touch = false;\n      changeDisplay(activate ? 'flex' : 'none', 'matchdetails');\n    },\n    entry({ activate = true } = {}) {\n      if (activate) touchManager.prevent_touch = true;\n      changeDisplay(activate && env.orientation == 'landscape' ? 'flex' : 'none', options.horizontal_view);\n      changeDisplay(activate && env.orientation == 'portrait' ? 'flex' : 'none', options.vertical_view);\n      changeDisplay(activate && env.orientation == 'portrait' ? 'flex' : 'none', 'toolbar');\n    },\n    stats({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'statsscreen');\n      if (activate) {\n        touchManager.prevent_touch = false;\n        env.match.metadata.resetStats(); // necessary because decorations not added when calculated\n        updateStats();\n      }\n    },\n    momentum({ activate = true } = {}) {\n      if (!activate) {\n        changeDisplay('none', 'momentum');\n        changeDisplay('none', 'pts');\n      } else {\n        if (env.orientation == 'landscape') {\n          changeDisplay('none', 'momentum');\n          changeDisplay('flex', 'pts');\n          charts.pts_match.update();\n        } else {\n          changeDisplay('inline', 'momentum');\n          changeDisplay('none', 'pts');\n        }\n        touchManager.prevent_touch = false;\n        const point_episodes = env.match.history.action('addPoint');\n        charts.mc.width(window.innerWidth).height(820);\n        charts.mc.data(point_episodes).update();\n        charts.mc.update();\n      }\n    },\n    gametree({ activate = true } = {}) {\n      changeDisplay(activate ? 'flex' : 'none', 'gametree');\n      if (activate) {\n        touchManager.prevent_touch = false;\n        const point_episodes = env.match.history.action('addPoint');\n        const noAd = env.match.format.settings().code.indexOf('n_') >= 0;\n        charts.gametree.options({ display: { noAd } });\n        charts.gametree.data(point_episodes).update();\n        charts.gametree.update({ sizeToFit: true });\n      }\n    }\n  };\n\n  const view_keys = Object.keys(views);\n  if (view_keys.indexOf(new_view) >= 0) {\n    // disactivate all views that don't match the new_view\n    view_keys.filter((view) => view != new_view).forEach((view) => views[view]({ activate: false }));\n    views[new_view]({ activate: true, params });\n    env.view = new_view;\n    return new_view;\n  }\n}\n","import * as d3 from 'd3';\n\nexport function gameFish() {\n  let data: any;\n  let fish_width;\n  let fish_height;\n  let coords = [0, 0];\n  let last_coords: any;\n  let update: any;\n  const images: any = { left: undefined, right: undefined };\n\n  const options: any = {\n    id: 'gf1',\n    score: [0, 0],\n    width: window.innerWidth,\n    height: window.innerHeight,\n    margins: {\n      top: 10,\n      bottom: 10,\n      left: 10,\n      right: 10\n    },\n    fish: {\n      school: false,\n      gridcells: ['0', '15', '30', '40', 'G'],\n      max_rally: undefined,\n      cell_size: undefined,\n      min_cell_size: 5,\n      max_cell_size: 20\n    },\n    set: {\n      tiebreak_to: 7\n    },\n    display: {\n      orientation: 'vertical',\n      transition_time: 0,\n      sizeToFit: false,\n      leftImg: false,\n      rightImg: false,\n      show_images: undefined,\n      reverse: false,\n      point_score: true,\n      service: true,\n      player: true,\n      rally: true,\n      score: true,\n      grid: true\n    },\n    colors: {\n      players: { 0: 'red', 1: 'black' },\n      results: {\n        Out: 'red',\n        Net: 'coral',\n        'Unforced Error': 'red',\n        Forced: 'orange',\n        Ace: 'lightgreen',\n        'Serve Winner': 'lightgreen',\n        Winner: 'lightgreen',\n        'Forced Volley Error': 'orange',\n        'Forced Error': 'orange',\n        In: 'yellow',\n        'Passing Shot': 'lightgreen',\n        'Out Passing Shot': 'red',\n        'Net Cord': 'yellow',\n        'Out Wide': 'red',\n        'Out Long': 'red',\n        'Double Fault': 'red',\n        Unknown: 'blue',\n        Error: 'red'\n      }\n    }\n  };\n\n  const default_colors = { default: '#235dba' };\n  let colors = JSON.parse(JSON.stringify(default_colors));\n\n  const events: any = {\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mouseover: null, mouseout: null, click: null }\n  };\n\n  let fishFrame: any;\n  let root: any;\n  let bars: any;\n  let fish: any;\n  let game: any;\n\n  function chart(selection: any) {\n    const parent_type = selection._groups[0][0].tagName.toLowerCase();\n\n    if (parent_type != 'svg') {\n      root = selection.append('div').attr('class', 'fishRoot');\n\n      fishFrame = root\n        .append('svg')\n        .attr('id', 'gameFish' + options.id)\n        .attr('class', 'fishFrame');\n\n      bars = fishFrame.append('g');\n      fish = fishFrame.append('g');\n      game = fishFrame.append('g');\n    }\n\n    update = function (opts: any) {\n      if (bars == undefined || fish == undefined || game == undefined) return;\n\n      if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.max(dims.width, 100);\n        options.height = Math.max(dims.height, 100);\n      }\n\n      if (options.fish.cell_size && !options.fish.school) {\n        const multiplier = Math.max(10, data.length + 2);\n        options.height = options.fish.cell_size * multiplier * 0.9;\n      }\n\n      let tiebreak = false;\n      let max_rally = 0;\n      data.forEach((e: any) => {\n        if (e.rally && e.rally.length > max_rally) max_rally = e.rally.length;\n        if (e.score.indexOf('T') > 0) tiebreak = true;\n      });\n\n      if (options.fish.max_rally && options.fish.max_rally > max_rally) max_rally = options.fish.max_rally;\n\n      fish_width = options.width - (options.margins.left + options.margins.right);\n      fish_height = options.height - (options.margins.top + options.margins.bottom);\n      const vert = options.display.orientation == 'vertical' ? 1 : 0;\n      const fish_offset = vert ? fish_width : fish_height;\n      const fish_length = vert ? fish_height : fish_width;\n      const midpoint = (vert ? options.margins.left : options.margins.top) + fish_offset / 2;\n      const sw = 1; // service box % offset\n      const rw = 0.9; // rally_width % offset\n\n      bars.attr('transform', 'translate(' + (vert ? 0 : coords[0]) + ',' + (vert ? coords[1] : 0) + ')');\n      fish.attr('transform', 'translate(' + coords[0] + ',' + coords[1] + ')');\n      game.attr('transform', 'translate(' + coords[0] + ',' + coords[1] + ')');\n\n      let cell_size;\n      if (options.fish.cell_size) {\n        cell_size = options.fish.cell_size;\n      } else {\n        const offset_divisor = tiebreak ? options.set.tiebreak_to + 4 : options.fish.gridcells.length + 2;\n        const cell_offset =\n          fish_offset / (options.fish.gridcells.length + (options.display.service ? offset_divisor : 0));\n        const cell_length = fish_length / (data.length + 2);\n        cell_size = Math.min(cell_offset, cell_length);\n        cell_size = Math.max(options.fish.min_cell_size, cell_size);\n        cell_size = Math.min(options.fish.max_cell_size, cell_size);\n      }\n\n      const diag = Math.sqrt(2 * Math.pow(cell_size, 2));\n      const radius = diag / 2;\n\n      const grid_data = [];\n      const grid_labels = [];\n      const grid_side = tiebreak ? options.set.tiebreak_to : options.fish.gridcells.length - 1;\n      for (let g = 0; g < grid_side; g++) {\n        const label = tiebreak ? g : options.fish.gridcells[g];\n        // l = length, o = offset\n        grid_labels.push({\n          label: label,\n          l: (g + (vert ? 1.25 : 0.75)) * radius,\n          o: (g + (vert ? 0.75 : 1.25)) * radius,\n          rotate: 45\n        });\n        grid_labels.push({ label: label, l: (g + 1.25) * radius, o: -1 * (g + 0.75) * radius, rotate: -45 });\n        for (let c = 0; c < grid_side; c++) {\n          grid_data.push([g, c]);\n        }\n      }\n\n      // const score_offset = options.display.score ? cell_size : 0;\n\n      // check if this is a standalone SVG or part of larger SVG\n      if (root) {\n        root.attr('width', options.width + 'px').attr('height', options.height + 'px');\n\n        fishFrame.attr('width', options.width + 'px').attr('height', options.height + 'px');\n      }\n\n      if (options.display.point_score) {\n        const game_score = fish.selectAll('.game_score' + options.id).data(grid_labels);\n\n        game_score.exit().remove();\n\n        game_score\n          .enter()\n          .append('text')\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('transform', gscoreT)\n          .attr('text-anchor', 'middle')\n          .merge(game_score)\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('class', 'game_score' + options.id)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('transform', gscoreT)\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d.label;\n          });\n      } else {\n        fish.selectAll('.game_score' + options.id).remove();\n      }\n\n      if (options.display.grid) {\n        const gridcells = fish.selectAll('.gridcell' + options.id).data(grid_data);\n\n        gridcells.exit().remove();\n\n        gridcells\n          .enter()\n          .append('rect')\n          .attr('stroke', '#ccccdd')\n          .attr('stroke-width', lineWidth)\n          .attr('transform', gridCT)\n          .attr('width', cell_size)\n          .attr('height', cell_size)\n          .merge(gridcells)\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('class', 'gridcell' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('width', cell_size)\n          .attr('height', cell_size)\n          .attr('transform', gridCT)\n          .attr('fill-opacity', 0);\n      } else {\n        fish.selectAll('.gridcell' + options.id).remove();\n      }\n\n      const gamecells = game.selectAll('.gamecell' + options.id).data(data);\n\n      gamecells.exit().remove();\n\n      gamecells\n        .enter()\n        .append('rect')\n        .attr('opacity', 0)\n        .attr('width', cell_size)\n        .attr('height', cell_size)\n        .attr('transform', gameCT)\n        .attr('stroke', '#ccccdd')\n        .attr('stroke-width', lineWidth)\n        .merge(gamecells)\n        .attr('id', (d: any, i: number) => {\n          return options.id + 'Gs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .transition()\n        .duration(options.display.transition_time)\n        .attr('class', 'gamecell' + options.id)\n        .attr('width', cell_size)\n        .attr('height', cell_size)\n        .attr('transform', gameCT)\n        .attr('stroke', '#ccccdd')\n        .attr('stroke-width', lineWidth)\n        .attr('opacity', options.display.player ? 1 : 0)\n        .style('fill', function (d: any) {\n          return options.colors.players[d.winner];\n        });\n\n      const results = game.selectAll('.result' + options.id).data(data);\n\n      results.exit().remove();\n\n      results\n        .enter()\n        .append('circle')\n        .attr('stroke', 'black')\n        .attr('id', function (d: any, i: number) {\n          return options.id + 'Rs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .attr('class', 'result' + options.id)\n        .attr('opacity', 1)\n        .attr('stroke-width', lineWidth)\n        .attr('cx', zX)\n        .attr('cy', zY)\n        .attr('r', circleRadius)\n        .style('fill', function (d: any) {\n          return options.colors.results[d.result];\n        })\n        .merge(results)\n        .attr('id', function (d: any, i: number) {\n          return options.id + 'Rs' + d.set + 'g' + d.game + 'p' + i;\n        })\n        .attr('class', 'result' + options.id)\n        .transition()\n        .duration(options.display.transition_time)\n        .attr('stroke-width', lineWidth)\n        .attr('cx', zX)\n        .attr('cy', zY)\n        .attr('r', circleRadius)\n        .style('fill', function (d: any) {\n          return options.colors.results[d.result];\n        });\n\n      // offset Scale\n      const oScale = d3\n        .scaleLinear()\n        .range([0, fish_offset * rw])\n        .domain([0, max_rally]);\n\n      // lengthScale\n      const lScale = d3\n        .scaleBand()\n        .domain(d3.range(data.length))\n        .range([0, data.length * radius])\n        .round(true);\n\n      if (options.display.rally) {\n        const rally_bars = bars.selectAll('.rally_bar' + options.id).data(data);\n\n        rally_bars.exit().remove();\n\n        rally_bars\n          .enter()\n          .append('rect')\n          .attr('opacity', 0)\n          .attr('transform', rallyTstart)\n          .attr('height', vert ? lScale.bandwidth() : 0)\n          .attr('width', vert ? 0 : lScale.bandwidth())\n          .merge(rally_bars)\n          .attr('class', 'rally_bar' + options.id)\n          .on('mouseover', (_: any, i: number, n: any) => {\n            d3.select(n[i]).attr('fill', 'yellow');\n          })\n          .on('mouseout', (_: any, i: number, n: any) => {\n            d3.select(n[i]).attr('fill', '#eeeeff');\n          })\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('id', function (d: any, i: number) {\n            return options.id + 'Bs' + d.set + 'g' + d.game + 'p' + i;\n          })\n          .attr('opacity', 1)\n          .attr('stroke', 'white')\n          .attr('stroke-width', lineWidth)\n          .attr('fill', '#eeeeff')\n          .attr('transform', rallyT)\n          .attr('height', vert ? lScale.bandwidth() : rallyCalc)\n          .attr('width', vert ? rallyCalc : lScale.bandwidth());\n      } else {\n        bars.selectAll('.rally_bar' + options.id).remove();\n      }\n\n      if (options.display.score) {\n        const score = options.score.slice();\n        if (options.display.reverse) score.reverse();\n        const set_score = bars.selectAll('.set_score' + options.id).data(score);\n\n        set_score.exit().remove();\n\n        set_score\n          .enter()\n          .append('text')\n          .attr('class', 'set_score' + options.id)\n          .attr('transform', sscoreT)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d;\n          })\n          .merge(set_score)\n          .attr('class', 'set_score' + options.id)\n          .attr('transform', sscoreT)\n          .attr('font-size', radius * 0.8 + 'px')\n          .attr('text-anchor', 'middle')\n          .text(function (d: any) {\n            return d;\n          });\n\n        const ssb = bars.selectAll('.ssb' + options.id).data(options.score);\n\n        ssb.exit().remove();\n\n        ssb\n          .enter()\n          .append('rect')\n          .merge(ssb)\n          .attr('class', 'ssb' + options.id)\n          .attr('transform', ssbT)\n          .attr('stroke', 'black')\n          .attr('stroke-width', lineWidth)\n          .attr('fill-opacity', 0)\n          .attr('height', radius + 'px')\n          .attr('width', radius + 'px');\n      } else {\n        bars.selectAll('.set_score' + options.id).remove();\n        bars.selectAll('.ssb' + options.id).remove();\n      }\n\n      if (options.display.service) {\n        const serves: any = [];\n        data.forEach(function (s: any, i: number) {\n          let first_serve = false;\n          const serve_outcomes = ['Ace', 'Serve Winner', 'Double Fault'];\n          if (s.first_serve) {\n            first_serve = true;\n            serves.push({ point: i, serve: 'first', server: s.server, result: s.first_serve.error });\n          }\n\n          serves.push({\n            point: i,\n            serve: first_serve ? 'second' : 'first',\n            server: s.server,\n            result: serve_outcomes.indexOf(s.result) >= 0 ? s.result : 'In'\n          });\n        });\n\n        const service = bars.selectAll('.serve' + options.id).data(serves);\n\n        service.exit().remove();\n\n        service\n          .enter()\n          .append('circle')\n          .attr('class', 'serve' + options.id)\n          .attr('cx', sX)\n          .attr('cy', sY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorShot)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorShot)\n          .merge(service)\n          .attr('class', 'serve' + options.id)\n          .attr('cx', sX)\n          .attr('cy', sY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorShot)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorShot);\n\n        const service_box = bars.selectAll('.sbox' + options.id).data(data);\n\n        service_box.exit().remove();\n\n        service_box\n          .enter()\n          .append('rect')\n          .attr('stroke', '#ccccdd')\n          .attr('fill-opacity', 0)\n          .attr('transform', sBoxT)\n          .attr('class', 'sbox' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('height', vert ? lScale.bandwidth() : 1.5 * radius)\n          .attr('width', vert ? 1.5 * radius : lScale.bandwidth())\n          .merge(service_box)\n          .attr('transform', sBoxT)\n          .attr('class', 'sbox' + options.id)\n          .attr('stroke-width', lineWidth)\n          .attr('height', vert ? lScale.bandwidth() : 1.5 * radius)\n          .attr('width', vert ? 1.5 * radius : lScale.bandwidth());\n\n        const returns = bars.selectAll('.return' + options.id).data(data);\n\n        returns.exit().remove();\n\n        returns\n          .enter()\n          .append('circle')\n          .attr('class', 'return' + options.id)\n          .attr('cx', rX)\n          .attr('cy', rY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorReturn)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorReturn)\n          .merge(returns)\n          .attr('class', 'return' + options.id)\n          .attr('cx', rX)\n          .attr('cy', rY)\n          .attr('r', circleRadius)\n          .attr('stroke', colorReturn)\n          .attr('stroke-width', lineWidth)\n          .attr('fill', colorReturn);\n      } else {\n        bars.selectAll('.sbox' + options.id).remove();\n        bars.selectAll('.return' + options.id).remove();\n        bars.selectAll('.serve' + options.id).remove();\n      }\n\n      if (options.display.rightImg) {\n        images.right = fishFrame.selectAll('image.rightImage').data([0]);\n\n        images.right.exit().remove();\n\n        images.right\n          .enter()\n          .append('image')\n          .attr('class', 'rightImage')\n          .attr('xlink:href', options.display.rightImg)\n          .attr('x', options.width - 30)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          })\n          .merge(images.right)\n          .attr('x', options.width - 30)\n          .attr('xlink:href', options.display.rightImg)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          });\n      } else {\n        if (fishFrame) fishFrame.selectAll('image.rightImage').remove();\n      }\n\n      if (options.display.leftImg) {\n        images.left = fishFrame.selectAll('image.leftImage').data([0]);\n\n        images.left\n          .enter()\n          .append('image')\n          .attr('class', 'leftImage')\n          .attr('xlink:href', options.display.leftImg)\n          .attr('x', 10)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click();\n          })\n          .merge(images.left)\n          .attr('xlink:href', options.display.leftImg)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click(options.id);\n          });\n\n        images.left.exit().remove();\n      } else {\n        if (fishFrame) fishFrame.selectAll('image.leftImage').remove();\n      }\n\n      // ancillary functions for update()\n      function circleRadius() {\n        return options.display.player || options.display.service ? radius / 4 : radius / 2;\n      }\n      function lineWidth() {\n        return radius > 20 ? 1 : 0.5;\n      }\n      function colorShot(d: any) {\n        return options.colors.results[d.result];\n      }\n      function colorReturn(d: any) {\n        if (d.rally == undefined) return 'white';\n        if (d.rally.length > 1) return 'yellow';\n        if (d.rally.length == 1) return options.colors.results[d.result];\n        return 'white';\n      }\n\n      function rallyCalc(d: any) {\n        return d.rally ? oScale(d.rally.length) : 0;\n      }\n\n      function sscoreT(_: any, i: number) {\n        let o = i ? midpoint + radius * 0.5 : midpoint - radius * 0.5;\n        o = vert ? o : o + radius * 0.3;\n        const l = radius * (vert ? 0.8 : 0.5);\n        return translate(o, l, 0);\n      }\n\n      function ssbT(_: any, i: number) {\n        const o = i ? midpoint : midpoint - radius;\n        const l = 0;\n        return translate(o, l, 0);\n      }\n\n      function gscoreT(d: any) {\n        const o = +midpoint + d.o;\n        const l = radius + d.l;\n        return translate(o, l, d.rotate);\n      }\n\n      function gridCT(d: any) {\n        const o = midpoint + (d[1] - d[0] + vert - 1) * radius;\n        const l = (d[0] + d[1] + 3 - vert) * radius;\n        return translate(o, l, 45);\n      }\n\n      function gameCT(d: any, i: number) {\n        const o = midpoint + (findOffset(d) + vert - 1) * radius;\n        const l = (i + 4 - vert) * radius;\n        last_coords = [o - midpoint, l - diag, diag];\n        return translate(o, l, 45);\n      }\n\n      function sBoxT(d: any, i: number) {\n        const o = d.server == 0 ? midpoint - (fish_offset / 2) * sw : midpoint + (fish_offset / 2) * sw - 1.5 * radius;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function rallyTstart(d: any, i: number) {\n        const o = midpoint;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function rallyT(d: any, i: number) {\n        const o = d.rally ? midpoint - oScale(d.rally.length) / 2 : 0;\n        const l = radius + cL(d, i);\n        return translate(o, l, 0);\n      }\n\n      function translate(o: any, l: any, rotate: any) {\n        const x = vert ? o : l;\n        const y = vert ? l : o;\n        return 'translate(' + x + ',' + y + ') rotate(' + rotate + ')';\n      }\n\n      function cL(_: any, i: number) {\n        return (i + 2.5) * radius;\n      }\n\n      function rX(d: any, i: number) {\n        return vert ? rO(d) : rL(d, i);\n      }\n      function rY(d: any, i: number) {\n        return vert ? rL(d, i) : rO(d);\n      }\n      function rL(_: any, i: number) {\n        return radius + (i + 3) * radius;\n      }\n      function rO(d: any) {\n        return d.server == 0\n          ? midpoint + (fish_offset / 2) * sw - 0.75 * radius\n          : midpoint - (fish_offset / 2) * sw + 0.75 * radius;\n      }\n\n      function sX(d: any) {\n        return vert ? sO(d) : sL(d);\n      }\n      function sY(d: any) {\n        return vert ? sL(d) : sO(d);\n      }\n      function sL(d: any) {\n        return radius + (d.point + 3) * radius;\n      }\n      function sO(d: any) {\n        const offset = (d.serve == 'first' && d.server == 0) || (d.serve == 'second' && d.server == 1) ? 0.4 : 1.1;\n        return d.server == 0\n          ? midpoint - (fish_offset / 2) * sw + offset * radius\n          : midpoint + (fish_offset / 2) * sw - offset * radius;\n      }\n\n      function zX(d: any, i: number) {\n        return vert ? zO(d) : zL(d, i);\n      }\n      function zY(d, i: number) {\n        return vert ? zL(d, i) : zO(d);\n      }\n      function zL(_, i: number) {\n        return radius + (i + 3) * radius;\n      }\n      function zO(d: any) {\n        return +midpoint + findOffset(d) * radius;\n      }\n    };\n\n    function findOffset(point: any) {\n      return point.points[options.display.reverse ? 0 : 1] - point.points[options.display.reverse ? 1 : 0];\n    }\n  }\n\n  // ACCESSORS\n\n  chart.g = function (values: any) {\n    if (!arguments.length) return chart;\n    if (typeof values != 'object' || values.constructor == Array) return;\n    if (values.bars) bars = values.bars;\n    if (values.fish) fish = values.fish;\n    if (values.game) game = values.game;\n  };\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values: any) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject: any, optionsObject: any) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions: any[]) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value: any) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.coords = function (value: any) {\n    if (!arguments.length) return last_coords;\n    coords = value;\n    return chart;\n  };\n\n  chart.data = function (value: any) {\n    if (!arguments.length) return data;\n    data = JSON.parse(JSON.stringify(value));\n    return chart;\n  };\n\n  chart.update = function (opts: any) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function' && data) update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n  };\n\n  chart.colors = function (color3s: any) {\n    if (!arguments.length) return colors;\n    if (typeof color3s !== 'object') return false;\n    const keys = Object.keys(color3s);\n    if (!keys.length) return false;\n    // remove all properties that are not colors\n    keys.forEach(function (f) {\n      if (!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color3s[f])) delete color3s[f];\n    });\n    if (Object.keys(color3s).length) {\n      colors = color3s;\n    } else {\n      colors = JSON.parse(JSON.stringify(default_colors));\n    }\n    return chart;\n  };\n\n  return chart;\n\n  // ancillary functions\n}\n","import { groupGames } from './groupGames';\nimport { gameFish } from './gameFish';\n\nimport * as d3 from 'd3';\n\nexport function momentumChart() {\n  let data: any;\n  let update: any;\n  let fish_school: any[] = [];\n  const images = { left: undefined, right: undefined };\n\n  const options: any = {\n    id: 'm1',\n    fullWidth: window.innerWidth,\n    fullHeight: window.innerHeight,\n    margins: {\n      top: 1,\n      bottom: 1, // Chrome bug can't be 0\n      left: 3,\n      right: 3 // Chrome bug can't be 0\n    },\n    fish: {\n      gridcells: ['0', '15', '30', '40', 'G'],\n      cell_size: undefined,\n      min_cell_size: 5,\n      max_cell_size: 10\n    },\n    display: {\n      continuous: false,\n      reverse: false,\n      orientation: 'vertical',\n      leftImg: false,\n      rightImg: false,\n      show_images: undefined,\n      transition_time: 0,\n      sizeToFit: true,\n      service: true,\n      player: true,\n      rally: true,\n      score: false,\n      momentum_score: true,\n      grid: true\n    },\n    colors: {\n      players: { 0: 'red', 1: 'black' },\n      results: {\n        Out: 'red',\n        Net: 'coral',\n        'Unforced Error': 'red',\n        Forced: 'orange',\n        Ace: 'lightgreen',\n        'Serve Winner': 'lightgreen',\n        Winner: 'lightgreen',\n        'Forced Volley Error': 'orange',\n        'Forced Error': 'orange',\n        In: 'yellow',\n        'Passing Shot': 'lightgreen',\n        'Out Passing Shot': 'red',\n        'Net Cord': 'yellow',\n        'Out Wide': 'red',\n        'Out Long': 'red',\n        'Double Fault': 'red',\n        Unknown: 'blue',\n        Error: 'red'\n      }\n    }\n  };\n\n  function width() {\n    return options.fullWidth - options.margins.left - options.margins.right;\n  }\n  function height() {\n    return options.fullHeight - options.margins.top - options.margins.bottom;\n  }\n\n  options.height = height();\n  options.width = width();\n\n  const default_colors = { default: '#235dba' };\n  let colors = JSON.parse(JSON.stringify(default_colors));\n\n  const events: any = {\n    score: { click: null },\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection: any) {\n    selection.each(function (_, i: number, n: any) {\n      const dom_parent = d3.select(n[i]);\n\n      const root = dom_parent.append('div').attr('class', 'momentumRoot').attr('transform', 'translate(0, 0)');\n\n      const momentumFrame = root.append('svg').attr('class', 'momentumFrame');\n\n      momentumFrame.node().setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', 'http://www.w3.org/2000/svg');\n      momentumFrame\n        .node()\n        .setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n      const bars = momentumFrame.append('g').attr('id', 'momentumBars');\n      const fish = momentumFrame.append('g').attr('id', 'momentumFish');\n      const game = momentumFrame.append('g').attr('id', 'momentumGame');\n\n      update = function (opts: any) {\n        if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n          const dims = selection.node().getBoundingClientRect();\n          if (options.display.orientation == 'vertical') {\n            options.fullWidth = Math.max(dims.width, 100);\n            options.fullHeight = Math.max(dims.height, 100);\n          } else {\n            options.fullHeight = Math.max(dims.height, 100);\n            /**\n            options.fullWidth = Math.max(dims.width, 100);\n            options.fullHeight = cellSize() * maxDiff() * 2;\n            */\n          }\n        }\n\n        options.height = height();\n        options.width = width();\n\n        const vert = options.display.orientation == 'vertical' ? 1 : 0;\n        const fish_offset = vert ? options.width : options.height;\n        /** const fish_length = vert ? options.height : options.width; */\n        const midpoint = fish_offset / 2;\n\n        const all_games = groupGames(data);\n        let max_rally = 0;\n        data.forEach(function (point) {\n          if (point.rally != undefined && point.rally.length > max_rally) max_rally = point.rally.length;\n        });\n\n        const cell_size = cellSize();\n\n        // remove extraneous fish instances\n        const old_fish = fish_school.slice(all_games.length);\n        old_fish.forEach(function (f) {\n          d3.selectAll('.c' + f.options().id).remove();\n        });\n        // trim school based on length of data\n        fish_school = fish_school.slice(0, all_games.length);\n\n        let radius: number;\n        const coords = [0, 0];\n        const score_lines: any[] = [];\n        all_games.forEach(function (g, i) {\n          // add fish where necessary\n          if (!fish_school[i]) {\n            fish_school.push(gameFish());\n            momentumFrame.call(fish_school[i]);\n            fish_school[i].g({\n              bars: bars.append('g').attr('class', 'cGF' + i),\n              fish: fish.append('g').attr('class', 'cGF' + i),\n              game: game.append('g').attr('class', 'cGF' + i)\n            });\n            fish_school[i].options({\n              id: 'GF' + i,\n              display: { score: false, point_score: false },\n              fish: { school: true }\n            });\n          }\n          fish_school[i].width(fish_offset).height(fish_offset);\n          fish_school[i].options({\n            score: g.score,\n            fish: { cell_size: cell_size, max_rally: max_rally },\n            display: {\n              orientation: options.display.orientation,\n              service: options.display.service,\n              rally: options.display.rally,\n              player: options.display.player,\n              grid: options.display.grid\n            },\n            colors: { players: { 0: options.colors.players[0], 1: options.colors.players[1] } }\n          });\n          fish_school[i].data(g.points);\n          fish_school[i].coords(coords).update();\n          const new_coords = fish_school[i].coords();\n          coords[0] += vert ? new_coords?.[0] : new_coords?.[1] - new_coords?.[2] / 2;\n          coords[1] += vert ? new_coords?.[1] : new_coords?.[0] + new_coords?.[2] / 2;\n          score_lines.push({\n            score: g.score,\n            index: g.index,\n            l: coords[1] + new_coords?.[2] * 1.75,\n            o: coords[0] + new_coords?.[2] * 1.75,\n            set_end: g.last_game\n          });\n          if (g.last_game && !options.display.continuous) {\n            coords[vert ? 0 : 1] = 0;\n          }\n          radius = new_coords?.[2] / 2;\n        });\n\n        // This resize *must* take place after the fishshcool has been generated!\n        // ---------------------------------------------------------------------\n        root\n          .attr('width', options.width + 'px')\n          .attr('height', (vert ? 100 + coords[1] : options.height) + 'px')\n          .on('mouseover', showImages)\n          .on('mouseout', hideImages);\n\n        momentumFrame\n          .attr('width', options.width + 'px')\n          .attr('height', (vert ? 100 + coords[1] : options.height) + 'px');\n        // ---------------------------------------------------------------------\n\n        const midline = fish.selectAll('.midline' + options.id).data([0]);\n\n        midline\n          .enter()\n          .append('line')\n          .attr('class', 'midline' + options.id)\n          .attr('x1', vert ? midpoint : radius)\n          .attr('x2', vert ? midpoint : coords[0] + 5 * (radius || 0))\n          .attr('y1', vert ? radius : midpoint)\n          .attr('y2', vert ? coords[1] + 5 * radius : midpoint)\n          .attr('stroke-width', lineWidth)\n          .attr('stroke', '#ccccdd');\n\n        midline.exit().remove();\n\n        midline\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('x1', vert ? midpoint : radius)\n          .attr('x2', vert ? midpoint : coords[0] + 5 * (radius || 0))\n          .attr('y1', vert ? radius : midpoint)\n          .attr('y2', vert ? coords[1] + 5 * radius : midpoint)\n          .attr('stroke-width', lineWidth)\n          .attr('stroke', '#ccccdd');\n\n        const scoreLines = fish.selectAll('.score_line' + options.id).data(score_lines);\n\n        scoreLines\n          .enter()\n          .append('line')\n          .attr('class', 'score_line' + options.id)\n          .attr('x1', function (d) {\n            return vert ? cell_size * 2 : d.o;\n          })\n          .attr('x2', function (d) {\n            return vert ? fish_offset - cell_size * 2 : d.o;\n          })\n          .attr('y1', function (d) {\n            return vert ? d.l : cell_size * 3;\n          })\n          .attr('y2', function (d) {\n            return vert ? d.l : fish_offset - cell_size * 3;\n          })\n          .attr('stroke-width', lineWidth)\n          .attr('stroke-dasharray', function (d) {\n            return d.set_end ? '0' : '5,5';\n          })\n          .attr('stroke', function (d) {\n            return d.set_end ? '#000000' : '#ccccdd';\n          });\n\n        scoreLines.exit().remove();\n\n        scoreLines\n          .transition()\n          .duration(options.display.transition_time)\n          .attr('x1', function (d) {\n            return vert ? cell_size * 2 : d.o;\n          })\n          .attr('x2', function (d) {\n            return vert ? fish_offset - cell_size * 2 : d.o;\n          })\n          .attr('y1', function (d) {\n            return vert ? d.l : cell_size * 3;\n          })\n          .attr('y2', function (d) {\n            return vert ? d.l : fish_offset - cell_size * 3;\n          })\n          .attr('stroke-width', lineWidth)\n          .attr('stroke-dasharray', function (d) {\n            return d.set_end ? '0' : '5,5';\n          })\n          .attr('stroke', function (d) {\n            return d.set_end ? '#000000' : '#ccccdd';\n          });\n\n        if (options.display.momentum_score) {\n          const score_text = fish.selectAll('.score_text' + options.id).data(score_lines);\n\n          score_text.exit().remove();\n\n          score_text\n            .enter()\n            .append('g')\n            .attr('class', 'score_text' + options.id)\n            .attr('transform', scoreText)\n            .on('click', function (d) {\n              if (events.score.click) events.score.click(d);\n            })\n            .merge(score_text)\n            .attr('class', 'score_text' + options.id)\n            .attr('transform', scoreText)\n            .on('click', function (d) {\n              if (events.score.click) events.score.click(d);\n            });\n\n          const scores = score_text.selectAll('.score' + options.id).data(function (d) {\n            return d.score;\n          });\n\n          scores.exit().remove();\n\n          scores\n            .enter()\n            .append('text')\n            .attr('class', 'score' + options.id)\n            .attr('transform', scoreT)\n            .attr('font-size', radius * 4.0 + 'px')\n            .attr('opacity', 0.1)\n            .attr('text-anchor', 'middle')\n            .text(function (d) {\n              return d;\n            })\n            .merge(scores)\n            .attr('class', 'score' + options.id)\n            .transition()\n            .duration(options.display.transition_time)\n            .attr('transform', scoreT)\n            .attr('font-size', radius * 4.0 + 'px')\n            .attr('opacity', 0.1)\n            .attr('text-anchor', 'middle')\n            .text(function (d) {\n              return d;\n            });\n        } else {\n          fish.selectAll('.score_text' + options.id).remove();\n        }\n\n        function scoreText(d: any) {\n          return translate(0, vert ? d.l : d.o - radius, 0);\n        }\n        function scoreT(_, i: number) {\n          const offset = vert ? fish_offset / 3 : options.height / 3;\n          const o = i ? midpoint + offset : midpoint - offset + radius * 3;\n          const l = -1 * radius * (vert ? 0.25 : 0.5);\n          return translate(o, l, 0);\n        }\n\n        function translate(o, l, rotate) {\n          const x = vert ? o : l;\n          const y = vert ? l : o;\n          return 'translate(' + x + ',' + y + ') rotate(' + rotate + ')';\n        }\n\n        function lineWidth() {\n          return radius > 20 ? 2 : 1;\n        }\n\n        function cellSize() {\n          let cell_size;\n\n          if (options.display.orientation == 'vertical') {\n            // if the display is vertical use the width divided by maxDiff\n            cell_size = options.width / 2 / (maxDiff() + 1);\n          } else {\n            // if the display is horizontal use the width divided by # points\n            // var radius = options.width / (data.points().length + 4);\n            const radius = options.width / (data.length + 4);\n            cell_size = Math.sqrt(2 * radius * radius);\n          }\n          return Math.min(options.fish.max_cell_size, cell_size);\n        }\n\n        function maxDiff() {\n          let max_diff = 0;\n          const cumulative = [0, 0];\n\n          data.forEach(function (episode) {\n            cumulative[episode.point.winner] += 1;\n            const diff = Math.abs(cumulative[0] - cumulative[1]);\n            if (diff > max_diff) max_diff = diff;\n          });\n\n          return max_diff;\n        }\n\n        if (options.display.rightImg) {\n          images.right = momentumFrame.selectAll('image.rightImage').data([0]);\n\n          images.right.exit().remove();\n\n          images.right\n            .enter()\n            .append('image')\n            .attr('class', 'rightImage')\n            .attr('xlink:href', options.display.rightImg)\n            .attr('x', options.width - 20)\n            .attr('y', 5)\n            .attr('height', '20px')\n            .attr('width', '20px')\n            .attr('opacity', options.display.show_images ? 1 : 0)\n            .on('click', function () {\n              if (events.rightImage.click) events.rightImage.click(options.id);\n            })\n            .merge(images.right)\n            .attr('x', options.width - 20)\n            .attr('xlink:href', options.display.rightImg)\n            .on('click', function () {\n              if (events.rightImage.click) events.rightImage.click(options.id);\n            });\n        } else {\n          momentumFrame.selectAll('image.rightImage').remove();\n        }\n\n        if (options.display.leftImg) {\n          images.left = momentumFrame.selectAll('image.leftImage').data([0]);\n\n          images.left\n            .enter()\n            .append('image')\n            .attr('class', 'leftImage')\n            .attr('xlink:href', options.display.leftImg)\n            .attr('x', 10)\n            .attr('y', 5)\n            .attr('height', '20px')\n            .attr('width', '20px')\n            .attr('opacity', options.display.show_images ? 1 : 0)\n            .on('click', function () {\n              if (events.leftImage.click) events.leftImage.click();\n            })\n            .merge(images.left)\n            .attr('xlink:href', options.display.leftImg)\n            .on('click', function () {\n              if (events.leftImage.click) events.leftImage.click(options.id);\n            });\n\n          images.left.exit().remove();\n        } else {\n          momentumFrame.selectAll('image.leftImage').remove();\n        }\n\n        function showImages() {\n          if (options.display.show_images == false) return;\n          if (options.display.leftImg) images.left.attr('opacity', 1);\n          if (options.display.rightImg) images.right.attr('opacity', 1);\n        }\n\n        function hideImages() {\n          if (options.display.show_images) return;\n          if (options.display.leftImg) images.left.attr('opacity', 0);\n          if (options.display.rightImg) images.right.attr('opacity', 0);\n        }\n      };\n    });\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject, optionsObject) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.width = function (value) {\n    if (!arguments.length) return options.fullWidth;\n    options.fullWidth = value;\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.fullHeight;\n    options.fullHeight = value;\n    return chart;\n  };\n\n  chart.data = function (value) {\n    if (!arguments.length) return data;\n    data = value;\n    return chart;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function' && data) update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n  };\n\n  chart.colors = function (color3s) {\n    if (!arguments.length) return colors;\n    if (typeof color3s !== 'object') return false;\n    const keys = Object.keys(color3s);\n    if (!keys.length) return false;\n    // remove all properties that are not colors\n    keys.forEach(function (f) {\n      if (!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color3s[f])) delete color3s[f];\n    });\n    if (Object.keys(color3s).length) {\n      colors = color3s;\n    } else {\n      colors = JSON.parse(JSON.stringify(default_colors));\n    }\n    return chart;\n  };\n\n  return chart;\n}\n","import * as d3 from 'd3';\n\nexport function gameTree() {\n  // TODO\n  // change the gradient direction in lines across width\n  // which means changing line so that it is short and wide\n  // rather than long and thick\n  //\n  // bar chart showing win % for each player or primary/opponents\n  // for each point position\n\n  function applyMax(arr: any) {\n    return Math.max.apply(null, arr);\n  }\n  function applyMin(arr: any) {\n    return Math.min.apply(null, arr);\n  }\n  const images = { left: undefined, right: undefined };\n\n  // All options that should be accessible to caller\n  let data: any[] = [];\n  const options: any = {\n    width: 150,\n    height: 150,\n    min_max: 20, // scaling factor for line widths\n\n    // Margins for the SVG\n    margins: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n\n    display: {\n      noAd: false,\n      leftImg: false,\n      rightImg: false,\n      show_images: false,\n      sizeToFit: true,\n      showEmpty: false // display even if no data\n    },\n\n    lines: {\n      easing: false, // 'bounce'\n      duration: 600,\n      points: { winners: '#2ed2db', errors: '#2ed2db', unknown: '#2ed2db' },\n      colors: { underlines: '#2ed2db' }\n    },\n\n    nodes: {\n      colors: { 0: 'black', 1: 'red', neutral: '#ecf0f1' }\n    },\n\n    points: {\n      winners: [\n        'Winner',\n        'Ace',\n        'Serve Winner',\n        'Passing Shot',\n        'Return Winner',\n        'Forcing Error',\n        'Forcing Volley Error',\n        'Net Cord',\n        'In'\n      ],\n      errors: [\n        'Unforced Error',\n        'Unforced',\n        'Forced Error',\n        'Error',\n        'Out',\n        'Net',\n        'Netted Passing Shot',\n        'L',\n        'Overhead Passing Shot',\n        'Double Fault'\n      ],\n      highlight: [] // opposite of filter; filter unhighlighted...\n    },\n\n    selectors: {\n      enabled: true,\n      selected: { 0: false, 1: false }\n    },\n\n    labels: { Game: 'GAME', Player: 'Player', Opponent: 'Opponent' }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update: any;\n\n  // PROGRAMMATIC\n  // ------------\n  let canvas: any;\n  let radius: any;\n  const transition_time: number = 0;\n  const point_connector: string = 'x';\n  let counters: any = { w: {}, e: {}, p: {}, n: {} };\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events: any = {\n    leftImage: { click: null },\n    rightImage: { click: null },\n    update: { begin: null, end: null },\n    point: { mousemove: null, mouseout: null },\n    node: { mousemove: null, mouseout: null },\n    score: { mousemove: null, mouseout: null },\n    label: { mousemove: null, mouseout: null, click: selectView },\n    selector: { mousemove: null, mouseout: null, click: selectView }\n  };\n\n  function chart(selection: any) {\n    const root = selection.append('div').attr('class', 'gametreeRoot');\n\n    /*\n    const tree_width = options.width - (options.margins.left + options.margins.right);\n    const tree_height = options.width * 0.9;\n    */\n    canvas = root.append('svg');\n\n    update = function (opts: any) {\n      if (!data.length && !options.display.showEmpty) {\n        canvas.selectAll('*').remove();\n        return;\n      }\n\n      counterCalcs();\n\n      if (options.display.sizeToFit || (opts && opts.sizeToFit)) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.min(dims.width, dims.height);\n      }\n\n      const tree_width = options.width - (options.margins.left + options.margins.right);\n      const tree_height = options.width * 0.9;\n      radius = ((tree_height + tree_width) / 2) * 0.03;\n\n      const keys = point_lines.map(function (m) {\n        return m.id;\n      });\n\n      const point_min = applyMin(\n        keys.map(function (k) {\n          return isNaN(counters.p[k]) ? 0 : counters.p[k];\n        })\n      );\n      const point_max = applyMax([\n        applyMax(\n          keys.map(function (k) {\n            return isNaN(counters.p[k]) ? 0 : counters.p[k];\n          })\n        ),\n        options.min_max\n      ]);\n\n      const scale = d3\n        .scaleLinear()\n        .domain([point_min, point_max])\n        .range([0, radius * 2]);\n      canvas.transition().duration(transition_time).attr('width', tree_width).attr('height', tree_height);\n\n      const gradients = canvas.selectAll('.gradient').data(point_lines, get_id);\n\n      gradients.exit().remove();\n\n      gradients\n        .enter()\n        .append('linearGradient')\n        .attr('id', function (d) {\n          return 'gradient' + d.id;\n        })\n        .attr('class', 'gradient')\n        .attr('gradientUnits', 'userSpaceOnUse')\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .merge(gradients)\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        });\n\n      const point_stops = gradients.selectAll('.points_stop').data((d) => {\n        return calcStops(d);\n      });\n\n      point_stops.exit().remove();\n\n      point_stops\n        .enter()\n        .append('stop')\n        .attr('class', 'points_stop')\n        .attr('offset', function (d) {\n          return d.offset;\n        })\n        .attr('stop-color', function (d) {\n          return d.color;\n        })\n        .merge(point_stops)\n        .attr('offset', function (d) {\n          return d.offset;\n        });\n\n      const lines = canvas.selectAll('.line').data(point_lines);\n\n      lines.exit().remove();\n\n      lines\n        .enter()\n        .append('line')\n        .attr('class', 'line')\n        .attr('id', function (d) {\n          return d.id;\n        })\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return d.width ? d.width : 0;\n        })\n        .attr('stroke', function (d) {\n          return 'url(#gradient' + d.id + ')';\n        })\n        .on('mousemove', function (d, i) {\n          if (events.point.mousemove) events.point.mousemove(d, i);\n        })\n        .on('mouseout', function (d, i) {\n          if (events.point.mouseout) events.point.mouseout(d, i);\n        })\n        .on('click', function (d, i) {\n          if (events.point.click) events.point.click(d, i);\n        })\n        .merge(lines)\n        .transition()\n        .duration(options.lines.easing || (opts && opts.easing) ? options.lines.duration : 0)\n        //                     .ease(options.lines.easing || (opts && opts.easing) || 'none')\n        .attr('x1', function (d) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return counters.p[d.id] ? scale(counters.p[d.id]) : 0;\n        });\n\n      const ulines = canvas.selectAll('.uline').data(under_lines);\n\n      ulines.exit().remove();\n\n      ulines\n        .enter()\n        .append('line')\n        .attr('class', 'uline')\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('x1', function (d: any) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d: any) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d: any) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d: any) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d: any) {\n          return d.width ? d.width : 0;\n        })\n        .attr('stroke', function () {\n          return options.lines.colors.underlines;\n        })\n        .merge(ulines)\n        .transition()\n        .duration(transition_time)\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('x1', function (d: any) {\n          return d.start.x * tree_width;\n        })\n        .attr('y1', function (d: any) {\n          return d.start.y * tree_height;\n        })\n        .attr('x2', function (d: any) {\n          return d.end.x * tree_width;\n        })\n        .attr('y2', function (d: any) {\n          return d.end.y * tree_height;\n        })\n        .attr('stroke-width', function (d) {\n          return d.width ? d.width : 0;\n        });\n\n      const nodes = canvas.selectAll('.node').data(point_circles);\n\n      nodes.exit().remove();\n\n      nodes\n        .enter()\n        .append('circle')\n        .attr('class', 'node')\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height;\n        })\n        .attr('r', function () {\n          return radius;\n        })\n        .attr('stroke', function (d: any) {\n          return d.color_pct != undefined\n            ? colorShade(getHexColor(options.nodes.colors[d.player]), d.color_pct)\n            : options.nodes.colors.neutral;\n        })\n        .attr('fill', function (d: any) {\n          return d.color_pct != undefined\n            ? colorShade(getHexColor(options.nodes.colors[d.player]), d.color_pct)\n            : options.nodes.colors.neutral;\n        })\n        .on('mousemove', function (d: any, i: number) {\n          if (events.score.mousemove) events.score.mousemove(d, i);\n        })\n        .on('mouseout', function (d: any, i: number) {\n          if (events.node.mouseout) events.node.mouseout(d, i);\n        })\n        .on('click', function (d: any, i: number) {\n          if (events.node.click) events.node.click(d, i);\n        })\n        .merge(nodes)\n        .transition()\n        .duration(transition_time)\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height;\n        })\n        .attr('r', function () {\n          return radius;\n        });\n\n      const scores = canvas.selectAll('.score').data(point_text);\n\n      scores.exit().remove();\n\n      scores\n        .enter()\n        .append('text')\n        .attr('class', 'score')\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .attr('font-family', 'Lato, Arial, sans-serif')\n        .attr('text-anchor', 'middle')\n        .attr('alignment-baseline', 'central')\n        .attr('stroke', function (d) {\n          return d.stroke;\n        })\n        .attr('fill', function (d) {\n          return d.fill;\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 7) return d.text;\n        })\n        .on('mousemove', function (d, i) {\n          if (events.score.mousemove) events.score.mousemove(d, i);\n        })\n        .on('mouseout', function (d, i) {\n          if (events.score.mouseout) events.score.mouseout(d, i);\n        })\n        .on('click', function (d, i) {\n          if (events.score.click) events.score.click(d, i);\n        })\n        .merge(scores)\n        .transition()\n        .duration(transition_time)\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return d.text;\n        });\n\n      const labels = canvas.selectAll('.gt_label').data(label_text);\n\n      labels.exit().remove();\n\n      labels\n        .enter()\n        .append('text')\n        .attr('class', 'gt_label')\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('alignment-baseline', function (d) {\n          return d.baseline ? d.baseline : undefined;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .attr('text-anchor', function (d) {\n          return d.anchor ? d.anchor : undefined;\n        })\n        .attr('font-family', 'Lato, Arial, sans-serif')\n        .attr('stroke', function (d) {\n          return d.stroke;\n        })\n        .attr('fill', function (d) {\n          return d.fill;\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return d.id;\n        })\n        .attr('selector', function (d) {\n          return d.id;\n        })\n        .on('click', function (d: any, i: number, n: any) {\n          if (events.label.click) events.label.click(d, i, n[i]);\n        })\n        .merge(labels)\n        .transition()\n        .duration(transition_time)\n        .attr('x', function (d) {\n          return d.pos.x * tree_width;\n        })\n        .attr('y', function (d) {\n          return d.pos.y * tree_height;\n        })\n        .attr('font-size', function (d) {\n          return radius * d.fontsize + 'px';\n        })\n        .text(function (d) {\n          if (radius * d.fontsize > 5) return options.labels[d.id];\n        });\n\n      const select = canvas.selectAll('.selector').data(selectors);\n\n      select.exit();\n\n      select\n        .enter()\n        .append('circle')\n        .attr('class', 'selector')\n        .attr('status', function (d: any) {\n          return d.status;\n        })\n        .attr('id', function (d: any) {\n          return d.id;\n        })\n        .attr('selector', function (d: any) {\n          return d.id;\n        })\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height + 4;\n        })\n        .attr('r', function (d: any) {\n          return radius * d.r_pct;\n        })\n        .attr('stroke', function (_, i: number) {\n          return options.nodes.colors[i];\n        })\n        .attr('stroke-width', function () {\n          return radius * 0.25;\n        })\n        .attr('fill', function (_, i: number) {\n          return !options.selectors.enabled || (options.selectors.enabled && options.selectors.selected[i])\n            ? options.nodes.colors[i]\n            : options.nodes.colors.neutral;\n        })\n        .attr('opacity', function (d: any) {\n          return d.opacity;\n        })\n        .on('mousemove', function (d: any, i: number) {\n          if (events.selector.mousemove) events.selector.mousemove(d, i);\n        })\n        .on('mouseout', function (d: any, i: number) {\n          if (events.selector.mouseout) events.selector.mouseout(d, i);\n        })\n        .on('click', function (d: any, i: number, n: any) {\n          if (events.selector.click) events.selector.click(d, i, n[i]);\n        })\n        .merge(select)\n        .transition()\n        .duration(transition_time)\n        .attr('cx', function (d: any) {\n          return d.pos.x * tree_width;\n        })\n        .attr('cy', function (d: any) {\n          return d.pos.y * tree_height + 4;\n        })\n        .attr('r', function (d: any) {\n          return radius * d.r_pct;\n        })\n        .attr('stroke-width', function () {\n          return radius * 0.25;\n        })\n        .attr('fill', function (_, i: number) {\n          return !options.selectors.enabled || (options.selectors.enabled && options.selectors.selected[i])\n            ? options.nodes.colors[i]\n            : options.nodes.colors.neutral;\n        });\n\n      if (options.display.rightImg) {\n        images.right = canvas.selectAll('image.rightImage').data([0]);\n\n        images.right.exit().remove();\n\n        images.right\n          .enter()\n          .append('image')\n          .attr('class', 'rightImage')\n          .attr('xlink:href', options.display.rightImg)\n          .attr('x', options.width - (options.margins.right + 30))\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          })\n          .merge(images.right)\n          .attr('x', options.width - (options.margins.right + 30))\n          .attr('xlink:href', options.display.rightImg)\n          .on('click', function () {\n            if (events.rightImage.click) events.rightImage.click(options.id);\n          });\n      } else {\n        root.selectAll('image.rightImage').remove();\n      }\n\n      if (options.display.leftImg) {\n        images.left = canvas.selectAll('image.leftImage').data([0]);\n\n        images.left\n          .enter()\n          .append('image')\n          .attr('class', 'leftImage')\n          .attr('xlink:href', options.display.leftImg)\n          .attr('x', 10 + options.margins.left)\n          .attr('y', 5)\n          .attr('height', '20px')\n          .attr('width', '20px')\n          .attr('opacity', options.display.show_images ? 1 : 0)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click();\n          })\n          .merge(images.left)\n          .attr('x', 10 + options.margins.left)\n          .attr('xlink:href', options.display.leftImg)\n          .on('click', function () {\n            if (events.leftImage.click) events.leftImage.click(options.id);\n          });\n\n        images.left.exit().remove();\n      } else {\n        root.selectAll('image.leftImage').remove();\n      }\n\n      /*\n      function showImages() {\n        if (options.display.show_images == false) return;\n        if (options.display.leftImg) images.left.attr('opacity', 1);\n        if (options.display.rightImg) images.right.attr('opacity', 1);\n      }\n\n      function hideImages() {\n        if (options.display.show_images) return;\n        if (options.display.leftImg) images.left.attr('opacity', 0);\n        if (options.display.rightImg) images.right.attr('opacity', 0);\n      }\n      */\n    };\n  }\n\n  // ACCESSORS\n\n  chart.exports = function () {\n    return { selectView: selectView };\n  };\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject, optionsObject) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (let k = 0; k < vKeys.length; k++) {\n      if (oKeys.indexOf(vKeys[k]) >= 0) {\n        const oo = optionsObject[vKeys[k]];\n        const vo = valuesObject[vKeys[k]];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[vKeys[k]], optionsObject[vKeys[k]]);\n        } else {\n          optionsObject[vKeys[k]] = valuesObject[vKeys[k]];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.reset = function () {\n    data = [];\n    clearView();\n    counters = { w: {}, e: {}, p: {}, n: {} };\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value: any) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.data = function (values: any) {\n    if (!arguments.length) return data;\n    if (values.constructor === Array) {\n      chart.reset();\n      data = values;\n    }\n    return chart;\n  };\n\n  chart.counters = function () {\n    counterCalcs();\n    return counters;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, transition_time);\n  };\n\n  // REUSABLE FUNCTIONS\n  // ------------------\n\n  function counterCalcs() {\n    let _data;\n    // w = winners, e = errors, p = points, n = nodes\n    counters = { w: {}, e: {}, p: {}, n: {} };\n    if (options.selectors.selected[0] || options.selectors.selected[1]) {\n      const selected = options.selectors.selected[0] ? 0 : 1;\n      _data = data.filter(function (f) {\n        return f.point.server == selected;\n      });\n    } else {\n      _data = data;\n    }\n    _data = _data.filter(function (f) {\n      return !f.point.tiebreak;\n    });\n    for (let d = 0; d < _data.length; d++) {\n      const previous_episode = _data[d - 1];\n      const previous =\n        d == 0 || previous_episode.game.complete ? calcPosition([0, 0]) : calcPosition(previous_episode.point.points);\n      const progression = 'L' + previous + point_connector + calcPosition(_data[d].point.points);\n      if (options.points.highlight.length && options.points.highlight.indexOf(d) < 0) {\n        continue;\n      }\n      counters.p[progression] = counters.p[progression] ? counters.p[progression] + 1 : 1;\n\n      if (options.points.winners.indexOf(_data[d].point.result) >= 0) {\n        counters.w[progression] = counters.w[progression] ? counters.w[progression] + 1 : 1;\n      } else if (options.points.errors.indexOf(_data[d].point.result) >= 0) {\n        counters.e[progression] = counters.e[progression] ? counters.e[progression] + 1 : 1;\n      }\n    }\n\n    // make adjustment for multiple dueces\n    function calcPosition(points) {\n      const point_min = Math.min(...points);\n      const diff = point_min >= 4 ? point_min - 3 : 0;\n      const pos = points.map((point, index) =>\n        options.display.noAd && point == 4 && points[1 - index] == 3 ? 'G' : point - diff\n      );\n      return pos.join('-');\n    }\n  }\n\n  function get_id(d) {\n    return d && d.id;\n  }\n\n  /*\n  function isEven(n) {\n    return n == parseFloat(n) ? !(n % 2) : void 0;\n  }\n  */\n\n  function clearView() {\n    d3.select('[id=Player]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n    d3.select('[id=Opponent]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n    options.selectors.selected[1] = false;\n    options.selectors.selected[0] = false;\n  }\n\n  function selectView(_, i: number, self: any) {\n    if (!options.selectors.enabled) return;\n    const selector = d3.select(self).attr('selector');\n    if (d3.select('[id=' + selector + ']').attr('status') == 'none') {\n      if (d3.select(self).attr('selector') == 'Opponent') {\n        d3.select('[id=Player]').attr('opacity', 0.4).attr('status', 'none').attr('fill', options.nodes.colors.neutral);\n        d3.select('[id=Opponent]').attr('opacity', 1).attr('status', 'selected').attr('fill', options.nodes.colors[i]);\n        options.selectors.selected[1] = true;\n        options.selectors.selected[0] = false;\n      } else {\n        d3.select('[id=Opponent]')\n          .attr('opacity', 0.4)\n          .attr('status', 'none')\n          .attr('fill', options.nodes.colors.neutral);\n        d3.select('[id=Player]').attr('opacity', 1).attr('status', 'selected').attr('fill', options.nodes.colors[i]);\n        options.selectors.selected[0] = true;\n        options.selectors.selected[1] = false;\n      }\n    } else {\n      d3.select('[id=' + selector + ']')\n        .attr('opacity', 0.4)\n        .attr('status', 'none')\n        .attr('fill', options.nodes.colors.neutral);\n      if (d3.select(self).attr('selector') == 'Opponent') {\n        options.selectors.selected[1] = false;\n      } else {\n        options.selectors.selected[0] = false;\n      }\n    }\n    update();\n  }\n\n  function calcStops(d: any) {\n    if (!counters.p[d.id]) return [];\n    const total_points = counters.p[d.id] == undefined ? 1 : counters.p[d.id];\n    const winners = counters.w[d.id] ? counters.w[d.id] : 0;\n    const errors = counters.e[d.id] ? counters.e[d.id] : 0;\n    const winner_pct = (winners / total_points) * 100;\n    // const error_pct = (errors / total_points) * 100;\n    const u_pct = ((total_points - (winners + errors)) / total_points) * 100;\n    return [\n      { offset: '0%', color: options.lines.points.unknown },\n      { offset: u_pct + '%', color: options.lines.points.unknown },\n      { offset: u_pct + '%', color: options.lines.points.winners },\n      { offset: u_pct + winner_pct + '%', color: options.lines.points.winners },\n      { offset: u_pct + winner_pct + '%', color: options.lines.points.errors },\n      { offset: '100%', color: options.lines.points.errors }\n    ];\n  }\n\n  // DATA\n  // --------------\n\n  const c_start = 0.07;\n  const c_dist = 0.14;\n\n  const r_start = 0.05;\n  const r_dist = 0.21;\n\n  const f = {\n    col1: c_start,\n    col2: c_start + c_dist,\n    col3: c_start + 2 * c_dist,\n    col4: c_start + 3 * c_dist,\n    col5: c_start + 4 * c_dist,\n    col6: c_start + 5 * c_dist,\n    col7: c_start + 6 * c_dist,\n\n    row1: r_start,\n    row2: r_start + r_dist,\n    row3: r_start + 2 * r_dist,\n    row4: r_start + 3 * r_dist,\n    row5: r_start + 4 * r_dist,\n    foot: r_start + 4.1 * r_dist,\n\n    adr1: r_start + 3.5 * r_dist,\n    adc1: c_start + c_dist * 2.5,\n    adc2: c_start + c_dist * 3.5,\n\n    selc: c_start * 0.8,\n    tslc: c_start,\n    sl1r: r_start / 2,\n    sl2r: r_start * 1.5,\n    plr1: c_start * 0.8,\n    plr2: c_start + 4 * c_dist,\n    plrs: r_start + 4.25 * r_dist\n  };\n\n  const pos = {\n    'p0-0': { x: f.col4, y: f.row1 },\n    'p1-1': { x: f.col4, y: f.row2 },\n    'p2-2': { x: f.col4, y: f.row3 },\n    'p3-3': { x: f.col4, y: f.row4 },\n    'p1-0': { x: f.col3, y: f.row2 },\n    'p0-1': { x: f.col5, y: f.row2 },\n    'p2-1': { x: f.col3, y: f.row3 },\n    'p1-2': { x: f.col5, y: f.row3 },\n    'p2-0': { x: f.col2, y: f.row3 },\n    'p0-2': { x: f.col6, y: f.row3 },\n    'p3-2': { x: f.col3, y: f.row4 },\n    'p2-3': { x: f.col5, y: f.row4 },\n    'p3-1': { x: f.col2, y: f.row4 },\n    'p1-3': { x: f.col6, y: f.row4 },\n    'p3-0': { x: f.col1, y: f.row4 },\n    'p0-3': { x: f.col7, y: f.row4 },\n    'p3-4': { x: f.adc1, y: f.adr1 },\n    'p4-3': { x: f.adc2, y: f.adr1 },\n    'p5-3': { x: f.adc2, y: f.row5 },\n    'p3-5': { x: f.adc1, y: f.row5 },\n    'p4-1': { x: f.col2, y: f.row5 },\n    'p1-4': { x: f.col6, y: f.row5 },\n    'p4-2': { x: f.col3, y: f.row5 },\n    'p2-4': { x: f.col5, y: f.row5 },\n    'p4-0': { x: f.col1, y: f.row5 },\n    'p0-4': { x: f.col7, y: f.row5 },\n\n    // No Ad\n    'pG-3': { x: f.col4, y: f.row5 },\n    'p3-G': { x: f.col4, y: f.row5 },\n\n    sPlyr: { x: f.adc1, y: f.plrs },\n    tPlyr: { x: f.col2, y: f.plrs },\n    sOpp: { x: f.adc2, y: f.plrs },\n    tOpp: { x: f.col6, y: f.plrs },\n\n    GAME: { x: f.col4, y: f.foot },\n    L1s: { x: f.col1, y: f.foot },\n    L1e: { x: f.adc1, y: f.foot },\n    L2s: { x: f.adc2, y: f.foot },\n    L2e: { x: f.col7, y: f.foot }\n  };\n\n  const point_circles = [\n    { name: '0-0', pos: pos['p0-0'], player: 0 },\n    { name: '15-15', pos: pos['p1-1'], player: 0 },\n    { name: '30-30', pos: pos['p2-2'], player: 0 },\n    { name: '40-40', pos: pos['p3-3'], player: 0 },\n\n    { name: '0-15', pos: pos['p0-1'], color_pct: 0.4, player: 1 },\n    { name: '15-30', pos: pos['p1-2'], color_pct: 0.4, player: 1 },\n    { name: '0-30', pos: pos['p0-2'], color_pct: 0.2, player: 1 },\n    { name: '30-40', pos: pos['p2-3'], color_pct: 0.4, player: 1 },\n    { name: '15-40', pos: pos['p1-3'], color_pct: 0.2, player: 1 },\n    { name: '0-40', pos: pos['p0-3'], color_pct: 0, player: 1 },\n    { name: '40-A', pos: pos['p4-3'], color_pct: 0.5, player: 1 },\n\n    { name: '15-0', pos: pos['p1-0'], color_pct: 0.4, player: 0 },\n    { name: '30-15', pos: pos['p2-1'], color_pct: 0.4, player: 0 },\n    { name: '30-0', pos: pos['p2-0'], color_pct: 0.2, player: 0 },\n    { name: '40-30', pos: pos['p3-2'], color_pct: 0.4, player: 0 },\n    { name: '40-15', pos: pos['p3-1'], color_pct: 0.2, player: 0 },\n    { name: '40-0', pos: pos['p3-0'], color_pct: 0, player: 0 },\n    { name: 'A-40', pos: pos['p3-4'], color_pct: 0.5, player: 0 }\n  ];\n\n  const point_lines = [\n    { id: 'L0-0x0-1', start: pos['p0-0'], end: pos['p0-1'] },\n    { id: 'L0-0x1-0', start: pos['p0-0'], end: pos['p1-0'] },\n    { id: 'L0-1x0-2', start: pos['p0-1'], end: pos['p0-2'] },\n    { id: 'L0-1x1-1', start: pos['p0-1'], end: pos['p1-1'] },\n    { id: 'L1-0x2-0', start: pos['p1-0'], end: pos['p2-0'] },\n    { id: 'L1-0x1-1', start: pos['p1-0'], end: pos['p1-1'] },\n    { id: 'L1-1x1-2', start: pos['p1-1'], end: pos['p1-2'] },\n    { id: 'L1-1x2-1', start: pos['p1-1'], end: pos['p2-1'] },\n    { id: 'L2-0x2-1', start: pos['p2-0'], end: pos['p2-1'] },\n    { id: 'L2-0x3-0', start: pos['p2-0'], end: pos['p3-0'] },\n    { id: 'L2-1x2-2', start: pos['p2-1'], end: pos['p2-2'] },\n    { id: 'L2-1x3-1', start: pos['p2-1'], end: pos['p3-1'] },\n    { id: 'L2-2x2-3', start: pos['p2-2'], end: pos['p2-3'] },\n    { id: 'L2-2x3-2', start: pos['p2-2'], end: pos['p3-2'] },\n    { id: 'L0-2x0-3', start: pos['p0-2'], end: pos['p0-3'] },\n    { id: 'L0-2x1-2', start: pos['p0-2'], end: pos['p1-2'] },\n    { id: 'L0-3x0-4', start: pos['p0-3'], end: pos['p0-4'] },\n    { id: 'L0-3x1-3', start: pos['p0-3'], end: pos['p1-3'] },\n    { id: 'L1-2x2-2', start: pos['p1-2'], end: pos['p2-2'] },\n    { id: 'L1-2x1-3', start: pos['p1-2'], end: pos['p1-3'] },\n    { id: 'L1-3x2-3', start: pos['p1-3'], end: pos['p2-3'] },\n    { id: 'L1-3x1-4', start: pos['p1-3'], end: pos['p1-4'] },\n    { id: 'L2-3x3-3', start: pos['p2-3'], end: pos['p3-3'] },\n    { id: 'L2-3x2-4', start: pos['p2-3'], end: pos['p2-4'] },\n    { id: 'L3-3x3-4', start: pos['p3-3'], end: pos['p4-3'] },\n    { id: 'L3-3x4-3', start: pos['p3-3'], end: pos['p3-4'] },\n    { id: 'L3-2x3-3', start: pos['p3-2'], end: pos['p3-3'] },\n    { id: 'L3-2x4-2', start: pos['p3-2'], end: pos['p4-2'] },\n    { id: 'L3-1x3-2', start: pos['p3-1'], end: pos['p3-2'] },\n    { id: 'L3-1x4-1', start: pos['p3-1'], end: pos['p4-1'] },\n    { id: 'L3-0x3-1', start: pos['p3-0'], end: pos['p3-1'] },\n    { id: 'L3-0x4-0', start: pos['p3-0'], end: pos['p4-0'] },\n    { id: 'L3-4x3-5', start: pos['p4-3'], end: pos['p5-3'] },\n    { id: 'L4-3x5-3', start: pos['p3-4'], end: pos['p3-5'] },\n\n    // no Ad\n    { id: 'L3-3xG-3', start: pos['p3-3'], end: pos['pG-3'] },\n    { id: 'L3-3x3-G', start: pos['p3-3'], end: pos['p3-G'] }\n  ];\n\n  const under_lines = [\n    { stroke: 'blue', start: pos['L1s'], end: pos['L1e'], width: 2 },\n    { stroke: 'blue', start: pos['L2s'], end: pos['L2e'], width: 2 }\n  ];\n\n  const point_text = [\n    { pos: pos['p0-0'], fill: 'black', fontsize: 0.7, text: '0-0' },\n    { pos: pos['p1-1'], fill: 'black', fontsize: 0.7, text: '15-15' },\n    { pos: pos['p2-2'], fill: 'black', fontsize: 0.7, text: '30-30' },\n    { pos: pos['p3-3'], fill: 'black', fontsize: 0.7, text: '40-40' },\n\n    { pos: pos['p0-1'], fill: 'white', fontsize: 0.7, text: '0-15' },\n    { pos: pos['p1-2'], fill: 'white', fontsize: 0.7, text: '15-30' },\n    { pos: pos['p0-2'], fill: 'white', fontsize: 0.7, text: '0-30' },\n    { pos: pos['p2-3'], fill: 'white', fontsize: 0.7, text: '30-40' },\n    { pos: pos['p1-3'], fill: 'white', fontsize: 0.7, text: '15-40' },\n    { pos: pos['p0-3'], fill: 'white', fontsize: 0.7, text: '0-40' },\n    { pos: pos['p4-3'], fill: 'white', fontsize: 0.7, text: '40-A' },\n\n    { pos: pos['p1-0'], fill: 'white', fontsize: 0.7, text: '15-0' },\n    { pos: pos['p2-1'], fill: 'white', fontsize: 0.7, text: '30-15' },\n    { pos: pos['p2-0'], fill: 'white', fontsize: 0.7, text: '30-0' },\n    { pos: pos['p3-2'], fill: 'white', fontsize: 0.7, text: '40-30' },\n    { pos: pos['p3-1'], fill: 'white', fontsize: 0.7, text: '40-15' },\n    { pos: pos['p3-0'], fill: 'white', fontsize: 0.7, text: '40-0' },\n    { pos: pos['p3-4'], fill: 'white', fontsize: 0.7, text: 'A-40' }\n  ];\n\n  const label_text = [\n    { pos: pos['tPlyr'], fill: 'black', fontsize: 0.9, id: 'Player', anchor: 'middle', baseline: 'hanging' },\n    { pos: pos['tOpp'], fill: 'black', fontsize: 0.9, id: 'Opponent', anchor: 'middle', baseline: 'hanging' },\n    { pos: pos['GAME'], fill: '#555555', fontsize: 0.9, id: 'Game', anchor: 'middle', baseline: 'central' }\n  ];\n\n  const selectors = [\n    { id: 'Player', pos: pos['sPlyr'], r_pct: 0.4, opacity: 1, status: 'none' },\n    { id: 'Opponent', pos: pos['sOpp'], r_pct: 0.4, opacity: 0.4, status: 'none' }\n  ];\n\n  // Helper Functions\n  // ----------------\n\n  // http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\n  function shadeColor2(color, percent) {\n    const f = parseInt(color.slice(1), 16),\n      t = percent < 0 ? 0 : 255,\n      p = percent < 0 ? percent * -1 : percent,\n      R = f >> 16,\n      G = (f >> 8) & 0x00ff,\n      B = f & 0x0000ff;\n    return (\n      '#' +\n      (\n        0x1000000 +\n        (Math.round((t - R) * p) + R) * 0x10000 +\n        (Math.round((t - G) * p) + G) * 0x100 +\n        (Math.round((t - B) * p) + B)\n      )\n        .toString(16)\n        .slice(1)\n    );\n  }\n\n  /*\n  function blendColors(c0, c1, p) {\n    const f = parseInt(c0.slice(1), 16),\n      t = parseInt(c1.slice(1), 16),\n      R1 = f >> 16,\n      G1 = (f >> 8) & 0x00ff,\n      B1 = f & 0x0000ff,\n      R2 = t >> 16,\n      G2 = (t >> 8) & 0x00ff,\n      B2 = t & 0x0000ff;\n    return (\n      '#' +\n      (\n        0x1000000 +\n        (Math.round((R2 - R1) * p) + R1) * 0x10000 +\n        (Math.round((G2 - G1) * p) + G1) * 0x100 +\n        (Math.round((B2 - B1) * p) + B1)\n      )\n        .toString(16)\n        .slice(1)\n    );\n  }\n  */\n\n  function shadeRGBColor(color, percent) {\n    const f = color.split(','),\n      t = percent < 0 ? 0 : 255,\n      p = percent < 0 ? percent * -1 : percent,\n      R = parseInt(f[0].slice(4)),\n      G = parseInt(f[1]),\n      B = parseInt(f[2]);\n    return (\n      'rgb(' +\n      (Math.round((t - R) * p) + R) +\n      ',' +\n      (Math.round((t - G) * p) + G) +\n      ',' +\n      (Math.round((t - B) * p) + B) +\n      ')'\n    );\n  }\n\n  /*\n  function blendRGBColors(c0, c1, p) {\n    const f = c0.split(','),\n      t = c1.split(','),\n      R = parseInt(f[0].slice(4)),\n      G = parseInt(f[1]),\n      B = parseInt(f[2]);\n    return (\n      'rgb(' +\n      (Math.round((parseInt(t[0].slice(4)) - R) * p) + R) +\n      ',' +\n      (Math.round((parseInt(t[1]) - G) * p) + G) +\n      ',' +\n      (Math.round((parseInt(t[2]) - B) * p) + B) +\n      ')'\n    );\n  }\n  */\n\n  function colorShade(color, percent) {\n    if (color.length > 7) return shadeRGBColor(color, percent);\n    else return shadeColor2(color, percent);\n  }\n\n  /*\n  function colorBlend(color1, color2, percent) {\n    if (color1.length > 7) return blendRGBColors(color1, color2, percent);\n    else return blendColors(color1, color2, percent);\n  }\n  */\n\n  // http://stackoverflow.com/questions/1573053/javascript-function-to-convert-color-names-to-hex-codes\n  function getHexColor(colorStr) {\n    const a = document.createElement('div');\n    a.style.color = colorStr;\n    const colors = window\n      .getComputedStyle(document.body.appendChild(a))\n      .color.match(/\\d+/g)\n      .map(function (a) {\n        return parseInt(a, 10);\n      });\n    document.body.removeChild(a);\n    return colors.length >= 3\n      ? '#' + ((1 << 24) + (colors[0] << 16) + (colors[1] << 8) + colors[2]).toString(16).substr(1)\n      : false;\n  }\n\n  return chart;\n}\n","import * as d3 from 'd3';\n\nexport function ptsMatch() {\n  let match_data: any;\n\n  const options: any = {\n    id: 0,\n    class: 'ptsMatch',\n\n    resize: true,\n    width: window.innerWidth,\n    height: 80,\n    max_height: 100,\n\n    margins: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n\n    set: {\n      average_points: 56\n    },\n\n    lines: {\n      width: 2,\n      interpolation: 'linear'\n    },\n\n    points: {\n      max_width_points: 100\n    },\n\n    score: {\n      font: 'Arial',\n      font_size: '12px',\n      font_weight: 'bold',\n      reverse: true\n    },\n\n    header: {\n      font: 'Arial',\n      font_size: '14px',\n      font_weight: 'bold'\n    },\n\n    display: {\n      sizeToFit: true,\n      transition_time: 0,\n      point_highlighting: true,\n      point_opacity: 0.4,\n      win_err_highlight: true,\n      game_highlighting: true,\n      game_opacity: 0.2,\n      game_boundaries: true,\n      gamepoints: false,\n      score: true,\n      points: true,\n      winner: true\n    },\n\n    colors: {\n      orientation: 'yellow',\n      gamepoints: 'black',\n      players: { 0: '#a55194', 1: '#6b6ecf' }\n    }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update: any;\n\n  // programmatic\n  const pts_sets: any[] = [];\n  let dom_parent;\n\n  // prepare charts\n  const pts_charts: any[] = [];\n  for (let s = 0; s < 5; s++) {\n    pts_charts.push(ptsChart());\n  }\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events: any = {\n    update: { begin: null, end: null },\n    set_box: { mouseover: null, mouseout: null },\n    point_bars: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection) {\n    dom_parent = selection;\n\n    if (options.display.sizeToFit) {\n      const dims = selection.node().getBoundingClientRect();\n      options.width = Math.max(dims.width, 400);\n    }\n\n    // append svg\n    const root = dom_parent\n      .append('div')\n      .attr('class', options.class + 'root')\n      .style('width', options.width + 'px')\n      .style('height', options.height + 'px');\n\n    for (let s = 0; s < 5; s++) {\n      pts_sets[s] = root.append('div').attr('class', 'pts').style('display', 'none');\n      pts_sets[s].call(pts_charts[s]);\n    }\n\n    update = function (opts) {\n      const sets = match_data.sets();\n\n      if (options.display.sizeToFit || opts?.sizeToFit) {\n        const dims = selection.node().getBoundingClientRect();\n        options.width = Math.max(dims.width, 400);\n        options.height = (dims.height - (+options.margins.top + +options.margins.bottom)) / sets.length;\n        if (options.height > options.max_height) options.height = options.max_height;\n      }\n\n      let true_height = 0;\n      for (let s = 0; s < pts_charts.length; s++) {\n        if (sets?.[s]?.history.points().length) {\n          pts_sets[s].style('display', 'inline');\n          pts_charts[s].width(options.width);\n          pts_charts[s].height(options.height);\n          pts_charts[s].update();\n          true_height += +options.height + 5;\n        } else {\n          pts_sets[s].style('display', 'none');\n        }\n      }\n\n      root.style('width', options.width + 'px').style('height', true_height + 'px');\n    };\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    keyWalk(values, options);\n    return chart;\n  };\n\n  function keyWalk(valuesObject: any, optionsObject: any) {\n    if (!valuesObject || !optionsObject) return;\n    const vKeys = Object.keys(valuesObject);\n    const oKeys = Object.keys(optionsObject);\n    for (const key of vKeys) {\n      if (oKeys.indexOf(key) >= 0) {\n        const oo = optionsObject[key];\n        const vo = valuesObject[key];\n        if (typeof oo == 'object' && typeof vo !== 'function' && oo && oo.constructor !== Array) {\n          keyWalk(valuesObject[key], optionsObject[key]);\n        } else {\n          optionsObject[key] = valuesObject[key];\n        }\n      }\n    }\n  }\n\n  chart.events = function (functions: any) {\n    if (!arguments.length) return events;\n    keyWalk(functions, events);\n    return chart;\n  };\n\n  chart.colors = function (colores: any) {\n    if (!arguments.length) return options.colors;\n    options.colors.players = colores;\n    return chart;\n  };\n\n  chart.width = function (value: any) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    if (typeof update === 'function') update(true);\n    pts_charts.forEach(function (e) {\n      e.width(value);\n    });\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    if (typeof update === 'function') update(true);\n    pts_charts.forEach(function (e) {\n      e.height(value);\n    });\n    return chart;\n  };\n\n  chart.duration = function (value) {\n    if (!arguments.length) return options.display.transition_time;\n    options.display.transition_time = value;\n    return chart;\n  };\n\n  chart.update = function (opts?: any) {\n    if (events.update.begin) events.update.begin();\n    const sets = match_data.sets();\n    const max_width_points = Math.max(\n      ...sets.map((set, index) => set.history.points().filter((f) => f.set == index).length)\n    );\n    if (sets.length > 1) chart.options({ points: { max_width_points } });\n    sets.forEach(function (_, i: number) {\n      pts_charts[i].data(sets[i]);\n      pts_charts[i].options({ id: i });\n      pts_charts[i].options({\n        lines: options.lines,\n        points: options.points,\n        score: options.score,\n        header: options.header\n      });\n      pts_charts[i].options({ set: options.set, display: options.display, colors: options.colors });\n      pts_charts[i].events(events);\n      pts_charts[i].width(options.width).height(options.height).update(opts);\n    });\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n    return true;\n  };\n\n  chart.data = function (matchObject) {\n    if (!arguments.length) {\n      return match_data;\n    }\n    match_data = matchObject;\n    chart.update();\n  };\n\n  return chart;\n}\n\nfunction ptsChart() {\n  let set_data;\n\n  let game_data;\n  let points_to_set;\n\n  const winners = ['Ace', 'Winner', 'Serve Winner'];\n  const errors = ['Forced Error', 'Unforced Error', 'Double Fault', 'Penalty', 'Out', 'Net'];\n\n  const options = {\n    id: 0,\n    class: 'ptsChart',\n\n    resize: true,\n    width: window.innerWidth,\n    height: 80,\n\n    margins: {\n      top: 5,\n      right: 15,\n      bottom: 5,\n      left: 5\n    },\n\n    set: {\n      average_points: 56\n    },\n\n    lines: {\n      width: 2,\n      interpolation: 'linear'\n    },\n\n    points: {\n      max_width_points: 100\n    },\n\n    score: {\n      font: 'Arial',\n      font_size: '12px',\n      font_weight: 'bold',\n      reverse: true\n    },\n\n    header: {\n      font: 'Arial',\n      font_size: '14px',\n      font_weight: 'bold'\n    },\n\n    display: {\n      transition_time: 0,\n      point_highlighting: true,\n      point_opacity: 0.4,\n      win_err_highlight: true,\n      game_highlighting: true,\n      game_opacity: 0.2,\n      game_boundaries: false,\n      gamepoints: false,\n      score: true,\n      points: true,\n      winner: true\n    },\n\n    colors: {\n      orientation: 'yellow',\n      gamepoints: 'black',\n      players: { 0: 'blue', 1: 'purple' }\n    }\n  };\n\n  // functions which should be accessible via ACCESSORS\n  let update;\n\n  // programmatic\n  let dom_parent;\n\n  // DEFINABLE EVENTS\n  // Define with ACCESSOR function chart.events()\n  const events = {\n    set_box: { mouseover: null, mouseout: null },\n    update: { begin: null, end: null },\n    point_bars: { mouseover: null, mouseout: null, click: null }\n  };\n\n  function chart(selection) {\n    selection.each(function (_, i: number, n: any) {\n      dom_parent = d3.select(n[i]);\n\n      // append svg\n      const root = dom_parent\n        .append('svg')\n        .attr('class', options.class + 'root')\n        .style('width', options.width + 'px')\n        .style('height', options.height + 'px');\n\n      // append children g\n      const pts = root\n        .append('g')\n        .attr('class', options.class + 'pts')\n        .attr('transform', 'translate(5, 5)');\n\n      // For Point Bars which must always be on top\n      const ptsHover = root\n        .append('g')\n        .attr('class', options.class + 'pts')\n        .attr('transform', 'translate(5, 5)');\n\n      // append labels\n      const set_winner = pts\n        .append('text')\n        .attr('class', options.class + 'Header')\n        .attr('opacity', 0)\n        .attr('font-size', options.header.font_size)\n        .attr('font-weight', options.header.font_weight)\n        .attr('x', function () {\n          return options.margins.left + 'px';\n        })\n        .attr('y', function () {\n          return options.margins.top + 8 + 'px';\n        });\n\n      const set_score = pts\n        .append('text')\n        .attr('class', options.class + 'Score')\n        .attr('opacity', 0)\n        .attr('font-size', options.score.font_size)\n        .attr('font-weight', options.score.font_weight)\n        .attr('x', function () {\n          return options.margins.left + 'px';\n        })\n        .attr('y', function () {\n          return options.margins.top + 20 + 'px';\n        });\n\n      // resize used to disable transitions during resize operation\n      update = function (_, resize?: boolean) {\n        if (!set_data) {\n          return false;\n        }\n\n        root\n          .transition()\n          .duration(options.display.transition_time)\n          .style('width', options.width + 'px')\n          .style('height', options.height + 'px');\n\n        const points = set_data.history.action('addPoint').filter((f) => f.point.set == options.id);\n        const range_start = points[0].point.index;\n\n        game_data = groupGames(points);\n        points_to_set = points.map((p) => p.needed.points_to_set);\n        const pts_max = Math.max(\n          ...[].concat(\n            points_to_set.map((p) => p[0]),\n            points_to_set.map((p) => p[1])\n          )\n        );\n        const pts_start = Math.max(...points_to_set[0]);\n\n        // add pts prior to first point\n        points_to_set.unshift([pts_start, pts_start]);\n\n        const longest_rally =\n          Math.max.apply(\n            null,\n            points.map(function (m) {\n              return m.point.rally ? m.point.rally.length : 0;\n            })\n          ) + 2;\n\n        displayScore(resize);\n\n        const xScale = d3\n          .scaleLinear()\n          .domain([0, calcWidth()])\n          .range([0, options.width - (options.margins.left + options.margins.right)]);\n\n        function pointScale(d, r, a) {\n          if (d.range[r] < range_start) return xScale(d.range[r] + a);\n          return xScale(d.range[r] + a - range_start);\n        }\n\n        const yScale = d3\n          .scaleLinear()\n          .range([options.height - (options.margins.top + options.margins.bottom), options.margins.bottom])\n          .domain([-2, pts_max - 1]);\n\n        // Set Box\n        const set_box = pts.selectAll('.' + options.class + 'SetBox').data([options.id]); // # of list elements only used for index, data not important\n\n        set_box\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'SetBox')\n          .style('position', 'relative')\n          .attr('height', function () {\n            return options.height - (options.margins.top + options.margins.bottom);\n          })\n          .attr('width', function () {\n            return xScale(boxWidth() + 1);\n          })\n          .attr('stroke', 'black')\n          .attr('stroke-width', 1)\n          .attr('fill', 'none')\n          .on('mouseover', function (d, i) {\n            if (events.set_box.mouseover) events.set_box.mouseover(d, i);\n          })\n          .on('mouseout', function (d, i) {\n            if (events.set_box.mouseout) events.set_box.mouseout(d, i);\n          })\n          .merge(set_box)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('height', function () {\n            return options.height - (options.margins.top + options.margins.bottom);\n          })\n          .attr('width', function () {\n            return xScale(boxWidth() + 1);\n          });\n\n        set_box\n          .exit()\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .style('opacity', 0)\n          .remove();\n\n        // Game Boundaries\n        const game_boundaries = pts.selectAll('.' + options.class + 'GameBoundary').data(game_data);\n\n        game_boundaries.exit().remove();\n\n        game_boundaries\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'GameBoundary')\n          .merge(game_boundaries)\n          .attr('id', function (_, i: number) {\n            return options.class + options.id + 'boundary' + i;\n          })\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', function () {\n            return options.display.game_boundaries ? 0.02 : 0;\n          })\n          .attr('transform', function (d: any) {\n            return 'translate(' + pointScale(d, 0, 0) + ', 0)';\n          })\n          .attr('height', yScale(-2))\n          .attr('width', function (d: any) {\n            return pointScale(d, 1, 1) - pointScale(d, 0, 0);\n          })\n          .attr('stroke', 'black')\n          .attr('stroke-width', 1)\n          .attr('fill', 'none');\n\n        // Game Boxes\n        const game_boxes = pts.selectAll('.' + options.class + 'Game').data(game_data);\n\n        game_boxes.exit().remove();\n\n        game_boxes\n          .enter()\n          .append('rect')\n          .attr('class', options.class + 'Game')\n          .merge(game_boxes)\n          .attr('id', function (_, i: number) {\n            return options.class + options.id + 'game' + i;\n          })\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', function () {\n            return options.display.game_boundaries ? 0.02 : 0;\n          })\n          .attr('transform', function (d: any) {\n            return 'translate(' + pointScale(d, 0, 0) + ', 0)';\n          })\n          .attr('height', yScale(-2))\n          .attr('width', function (d: any) {\n            return pointScale(d, 1, 1) - pointScale(d, 0, 0);\n          })\n          .attr('stroke', function (d: any) {\n            return options.colors.players[d.winner];\n          })\n          .attr('stroke-width', 1)\n          .attr('fill', function (d: any) {\n            return d.winner != undefined ? options.colors.players[d.winner] : 'none';\n          });\n\n        // Player PTS Lines\n        const lineGen = d3\n          .line()\n          .x(function (_, i: number) {\n            return xScale(i);\n          })\n          .y(function (d: number) {\n            return yScale(pts_max - d);\n          });\n\n        const pts_lines = pts.selectAll('.' + options.class + 'Line').data([0, 1]);\n\n        pts_lines.exit().remove();\n\n        pts_lines\n          .enter()\n          .append('path')\n          .attr('class', options.class + 'Line')\n          .attr('id', function (d) {\n            return options.class + options.id + 'player' + d + 'Line';\n          })\n          .attr('fill', 'none')\n          .merge(pts_lines)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 0.1)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 1)\n          .attr('stroke', function (d) {\n            return options.colors.players[d];\n          })\n          .attr('stroke-width', function () {\n            return options.lines.width;\n          })\n          // .attr('d', function(d) { return lineGen(player_data[d]) })\n          .attr('d', function (d) {\n            return lineGen(points_to_set.map((p) => p[d]));\n          });\n\n        const bp_data = [\n          points_to_set.map((p) => {\n            return { pts: p[0] };\n          }),\n          points_to_set.map((p) => {\n            return { pts: p[1] };\n          })\n        ];\n        const bp_wrappers = pts.selectAll('.' + options.class + 'BPWrapper').data(bp_data);\n\n        bp_wrappers\n          .enter()\n          .append('g')\n          .attr('class', options.class + 'BPWrapper');\n\n        bp_wrappers.exit().remove();\n\n        const breakpoints = bp_wrappers.selectAll('.' + options.class + 'Breakpoint').data(function (d, i) {\n          return add_index(d, i);\n        });\n\n        breakpoints.exit().attr('opacity', '0').remove();\n\n        breakpoints\n          .enter()\n          .append('circle')\n          .attr('class', options.class + 'Breakpoint')\n          .attr('opacity', '0')\n          .merge(breakpoints)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .style('opacity', 0)\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time / 2)\n          .attr('fill', function (d, i) {\n            if (points[i - 1] && points[i - 1].point.breakpoint != undefined) {\n              return options.colors.players[d._i];\n            }\n          })\n          .style('opacity', function (d, i) {\n            if (points[i - 1] && points[i - 1].point.breakpoint != undefined) {\n              // return points[i - 1].point.breakpoint == d._i ? 1 : 0\n              return points[i - 1].point.server == 1 - d._i ? 1 : 0;\n            }\n          })\n          .attr('cx', function (_, i: number) {\n            return xScale(i);\n          })\n          .attr('cy', function (d: any) {\n            return yScale(pts_max - d.pts);\n          })\n          .attr('r', 2);\n\n        const points_index = d3.range(points.length);\n        const barsX = d3\n          .scaleBand()\n          .domain(points_index)\n          .range([0, xScale(points.length)])\n          .round(true);\n\n        const bX = d3\n          .scaleLinear()\n          .domain([0, points.length])\n          .range([0, xScale(points.length)]);\n\n        // gradients cause hover errors when data is replaced\n        pts.selectAll('.gradient' + options.id).remove();\n\n        const gradients = pts.selectAll('.gradient' + options.id).data(d3.range(points.length)); // data not important, only length of array\n\n        gradients.exit().remove();\n\n        gradients\n          .enter()\n          .append('linearGradient')\n          .attr('id', function (_, i: number) {\n            return 'gradient' + options.id + i;\n          })\n          .attr('class', function () {\n            return 'gradient' + options.id;\n          })\n          .attr('gradientUnits', 'userSpaceOnUse')\n          .attr('x1', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y1', function () {\n            return 0;\n          })\n          .attr('x2', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y2', function () {\n            return yScale(-2);\n          })\n          .merge(gradients)\n          .attr('transform', function (_, i: number) {\n            return 'translate(' + bX(i) + ', 0)';\n          });\n\n        const point_stops = gradients.selectAll('.points_stop').data(function (d: any) {\n          return calcStops(points[d].point);\n        });\n\n        point_stops.exit().remove();\n\n        point_stops\n          .enter()\n          .append('stop')\n          .attr('class', 'points_stop')\n          .attr('offset', function (d) {\n            return d.offset;\n          })\n          .attr('stop-color', function (d) {\n            return d.color;\n          })\n          .merge(point_stops)\n          .attr('offset', function (d) {\n            return d.offset;\n          });\n\n        const point_bars = ptsHover.selectAll('.' + options.class + 'Bar').data(d3.range(points.length)); // data not important, only length of array\n\n        point_bars\n          .exit()\n          .transition()\n          .duration(resize ? 0 : options.display.transition_time)\n          .attr('opacity', '0')\n          .remove();\n\n        point_bars\n          .enter()\n          .append('line')\n          .attr('class', options.class + 'Bar')\n          .attr('opacity', '0')\n          .merge(point_bars)\n          .attr('opacity', '0')\n          .attr('transform', function (_, i: number) {\n            return 'translate(' + bX(i) + ', 0)';\n          })\n          .attr('x1', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y1', function () {\n            return 0;\n          })\n          .attr('x2', function () {\n            return barsX.bandwidth() / 2;\n          })\n          .attr('y2', function () {\n            return yScale(-2);\n          })\n          .attr('stroke-width', function () {\n            return barsX.bandwidth();\n          })\n          .attr('stroke', function (_, i: number) {\n            return 'url(#gradient' + options.id + i + ')';\n          })\n          .attr('uid', function (_, i: number) {\n            return 'point' + i;\n          })\n          .on('mousemove', function (d: any, i: number, n: Node) {\n            if (options.display.point_highlighting) {\n              d3.select(n[i]).attr('opacity', options.display.point_opacity);\n            }\n            if (options.display.game_highlighting && points[i]) {\n              d3.select('[id=\"' + options.class + options.id + 'game' + points[i].point.game + '\"]').attr(\n                'opacity',\n                options.display.game_opacity\n              );\n            }\n            if (events.point_bars.mouseover) {\n              events.point_bars.mouseover(points[d], i);\n            }\n            if (d == 0) {\n              ptsHover.selectAll('.' + options.class + 'Bar').attr('opacity', options.display.point_opacity);\n            }\n            /** highlightScore(d, i); */\n          })\n          .on('mouseout', function (d, i) {\n            ptsHover.selectAll('.' + options.class + 'Bar').attr('opacity', 0);\n            pts.selectAll('.' + options.class + 'Game').attr('opacity', '0');\n            if (events.point_bars.mouseout) {\n              events.point_bars.mouseout(points[d], i);\n            }\n            displayScore();\n          })\n          .on('click', function (d: any, i: number, n: Node) {\n            if (events.point_bars.click) {\n              events.point_bars.click(points[d], i, n[i]);\n            }\n          });\n\n        function displayScore(resize?: boolean) {\n          const winner = set_data.winner();\n          const players = set_data.metadata.players();\n          function lastName(name) {\n            const split = name.split(' ');\n            return split[split.length - 1];\n          }\n          const legend =\n            winner != undefined ? players[winner].name : `${lastName(players[0].name)}/${lastName(players[1].name)}`;\n\n          set_winner\n            .transition()\n            .duration(resize ? 0 : options.display.transition_time)\n            .attr('opacity', 1)\n            .attr('fill', winner != undefined ? options.colors.players[winner] : 'black')\n            .text(legend);\n\n          const game_score = set_data.scoreboard(winner);\n          set_score\n            .transition()\n            .duration(resize ? 0 : options.display.transition_time)\n            .attr('opacity', 1)\n            .attr('fill', winner != undefined ? options.colors.players[winner] : 'black')\n            .text(game_score);\n        }\n\n        function calcStops(point) {\n          let win_pct = 0;\n          let err_pct = 0;\n          let u_pct = 0;\n\n          if (options.display.win_err_highlight) {\n            console.log('calcstops:', point);\n            const rally = point.rally;\n            const result = point.result;\n            const rally_pct = rally ? 100 - Math.floor((rally.length / longest_rally) * 100) : 100;\n            if (winners.indexOf(result) >= 0) {\n              win_pct = rally_pct;\n            } else if (errors.indexOf(result) >= 0) {\n              err_pct = rally_pct;\n            } else {\n              u_pct = rally_pct;\n            }\n          }\n\n          return [\n            { offset: '0%', color: 'blue' },\n            { offset: u_pct + '%', color: 'blue' },\n            { offset: u_pct + '%', color: 'green' },\n            { offset: u_pct + win_pct + '%', color: 'green' },\n            { offset: u_pct + win_pct + '%', color: 'red' },\n            { offset: u_pct + win_pct + err_pct + '%', color: 'red' },\n            { offset: u_pct + win_pct + err_pct + '%', color: options.colors.orientation },\n            { offset: '100%', color: options.colors.orientation }\n          ];\n        }\n      };\n    });\n  }\n\n  // REUSABLE functions\n  // ------------------\n\n  function add_index(d, i) {\n    for (const item of d) {\n      item['_i'] = i;\n    }\n    return d;\n  }\n\n  function boxWidth() {\n    const dl = set_data.history.points().filter((f) => f.set == options.id).length - 1;\n    return set_data.complete() ? dl : dl < options.set.average_points ? options.set.average_points : dl;\n  }\n\n  function calcWidth() {\n    const dl = set_data.history.points().filter((f) => f.set == options.id).length - 1;\n    return Math.max(dl, options.points.max_width_points, options.set.average_points);\n  }\n\n  function groupGames(point_episodes) {\n    const games: any = [{ points: [], range: [0, 0] }];\n    let game_counter = 0;\n    let current_game = 0;\n    point_episodes.forEach((episode) => {\n      const point = episode.point;\n      if (point.game != current_game) {\n        game_counter += 1;\n        current_game = point.game;\n        games[game_counter] = { points: [], range: [point.index, point.index] };\n      }\n      games[game_counter].points.push(point);\n      games[game_counter].index = game_counter;\n      games[game_counter].set = episode.set.index;\n      games[game_counter].score = episode.game.games;\n      games[game_counter].complete = episode.game.complete;\n      games[game_counter].range[1] = point.index;\n      if (episode.game.complete) {\n        games[game_counter].winner = point.winner;\n      }\n    });\n    return games;\n  }\n\n  // ACCESSORS\n\n  // allows updating individual options and suboptions\n  // while preserving state of other options\n  chart.options = function (values) {\n    if (!arguments.length) return options;\n    const vKeys = Object.keys(values);\n    const oKeys = Object.keys(options);\n    for (const vKey of vKeys) {\n      if (oKeys.indexOf(vKey) >= 0) {\n        if (typeof options[vKey] == 'object') {\n          const sKeys = Object.keys(values[vKey]);\n          const osKeys = Object.keys(options[vKey]);\n          for (const sKey of sKeys) {\n            if (osKeys.indexOf(sKey) >= 0) {\n              options[vKey][sKey] = values[vKey][sKey];\n            }\n          }\n        } else {\n          options[vKey] = values[vKey];\n        }\n      }\n    }\n    return chart;\n  };\n\n  chart.data = function (set_object) {\n    if (!arguments.length) return set_data;\n    set_data = set_object;\n  };\n\n  chart.events = function (functions) {\n    if (!arguments.length) return events;\n    const fKeys = Object.keys(functions);\n    const eKeys = Object.keys(events);\n    for (const fKey of fKeys) {\n      if (eKeys.indexOf(fKey) >= 0) events[fKey] = functions[fKey];\n    }\n    return chart;\n  };\n\n  chart.colors = function (colores) {\n    if (!arguments.length) return options.colors;\n    options.colors.players = colores;\n    return chart;\n  };\n\n  chart.width = function (value) {\n    if (!arguments.length) return options.width;\n    options.width = value;\n    return chart;\n  };\n\n  chart.height = function (value) {\n    if (!arguments.length) return options.height;\n    options.height = value;\n    return chart;\n  };\n\n  chart.update = function (opts) {\n    if (events.update.begin) events.update.begin();\n    if (typeof update === 'function') update(opts);\n    setTimeout(function () {\n      if (events.update.end) events.update.end();\n    }, options.display.transition_time);\n    return true;\n  };\n\n  chart.duration = function (value) {\n    if (!arguments.length) return options.display.transition_time;\n    options.display.transition_time = value;\n    return chart;\n  };\n\n  return chart;\n}\n","import { changeDisplay, viewManager } from './viewManager';\nimport { charts, env, setOrientation } from './env';\nimport { momentumChart } from './momentumChart';\nimport { groupGames } from './groupGames';\nimport { gameTree } from './gameTree';\nimport { ptsMatch } from './ptsChart';\nimport { gameFish } from './gameFish';\n\nimport * as d3 from 'd3';\n\nexport function configureViz() {\n  // set up momentum\n  let pcolors: any = ['#a55194', '#6b6ecf'];\n  charts.mc = momentumChart();\n  charts.mc.options({\n    display: {\n      sizeToFit: false,\n      continuous: false,\n      orientation: 'vertical',\n      transition_time: 0,\n      service: false,\n      rally: true,\n      player: false,\n      grid: false,\n      score: true\n    },\n    colors: pcolors\n  });\n  charts.mc.events({ score: { click: showGame } });\n  d3.select('#momentumChart').call(charts.mc);\n\n  // set up gameFish\n  pcolors = { players: ['#a55194', '#6b6ecf'] };\n  charts.gamefish = gameFish();\n  charts.gamefish.options({\n    display: { sizeToFit: true },\n    colors: pcolors\n  });\n  d3.select('#gameFishChart').call(charts.gamefish);\n\n  // set up gametree\n  charts.gametree = gameTree();\n  const options = {\n    display: { sizeToFit: true },\n    lines: {\n      points: { winners: 'green', errors: '#BA1212', unknown: '#2ed2db' },\n      colors: { underlines: 'black' }\n    },\n    nodes: {\n      colors: {\n        0: pcolors.players[0],\n        1: pcolors.players[1],\n        neutral: '#ecf0f1'\n      }\n    },\n    selectors: {\n      enabled: true,\n      selected: { 0: false, 1: false }\n    }\n  };\n  charts.gametree.options(options);\n  d3.select('#gameTreeChart').call(charts.gametree);\n\n  charts.pts_match = ptsMatch();\n  charts.pts_match.options({\n    margins: { top: 40, bottom: 20 },\n    display: { sizeToFit: true }\n  });\n  charts.pts_match.data(env.match);\n  d3.select('#PTSChart').call(charts.pts_match);\n}\n\nfunction showGame(d: any) {\n  showGameFish(d.index);\n}\nexport function closeGameFish() {\n  const gFish = document.getElementById('gamefish');\n  if (gFish) gFish.style.display = 'none';\n}\nexport function showGameFish(index?: number) {\n  const gFish = document.getElementById('gamefish');\n  if (gFish) gFish.style.display = 'flex';\n  const games = groupGames();\n  const game = index != undefined ? games[index] : games[games.length - 1];\n  const gridcells = game.points[0].tiebreak ? ['0', '1', '2', '3', '4', '5', '6', '7'] : ['0', '15', '30', '40', 'G'];\n  charts.gamefish.options({\n    display: { reverse: env.swap_sides },\n    fish: {\n      gridcells: gridcells,\n      cell_size: 20\n    },\n    score: game.score\n  });\n  charts.gamefish.data(game.points).update();\n  window.scrollTo(0, 0);\n}\n\nexport function vizUpdate() {\n  const direction = env.orientation == 'landscape' ? 'horizontal' : 'vertical';\n\n  if (env.view == 'pts' && direction == 'vertical') {\n    changeDisplay('none', 'pts');\n    changeDisplay('inline', 'momentum');\n    charts.mc.width(window.innerWidth).height(820);\n    charts.mc.update();\n    env.view = 'momentum';\n  } else if (env.view == 'momentum' && direction == 'horizontal') {\n    changeDisplay('none', 'momentum');\n    changeDisplay('flex', 'pts');\n    charts.pts_match.update({ sizeToFit: true });\n    env.view = 'pts';\n  }\n\n  if (charts.gamefish) charts.gamefish.update();\n\n  const players = env.match.metadata.players();\n\n  if (charts.gametree) {\n    charts.gametree.options({\n      labels: {\n        Player: players[0].name,\n        Opponent: players[1].name\n      }\n    });\n    charts.gametree.update({ sizeToFit: true });\n  }\n}\n\nexport function orientationEvent() {\n  setOrientation();\n  vizUpdate();\n  viewManager();\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data\n            .arrayBuffer()\n            .then(toArray)\n            .then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, encodedPacket => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        }\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else if (state === 2 /* READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        }\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexport function createCookieJar() { }\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest, } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n        if (this.opts.withCredentials) {\n            this.cookieJar = createCookieJar();\n        }\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, cookieJar: this.cookieJar }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        var _a;\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, true);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        // @ts-ignore\n        if (typeof WebTransport !== \"function\") {\n            return;\n        }\n        // @ts-ignore\n        this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        this.transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this.transport.ready.then(() => {\n            this.transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this.writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this.writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this.writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: Polling,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 2000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { defaultBinaryType } from \"./transports/websocket-constructor.js\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\n            \"polling\",\n            \"websocket\",\n            \"webtransport\",\n        ];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this.upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            this.resetPingTimeout();\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        // the timeout flag is optional\n        const withErr = this.flags.timeout !== undefined || this._opts.ackTimeout !== undefined;\n        return new Promise((resolve, reject) => {\n            args.push((arg1, arg2) => {\n                if (withErr) {\n                    return arg1 ? reject(arg1) : resolve(arg2);\n                }\n                else {\n                    return resolve(arg1);\n                }\n            });\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import { broadcastToggle } from './coms';\n\nimport * as d3 from 'd3';\n\nexport function pulseCircle() {\n  let width: number; // in pixels\n  let height: number; // in pixels\n  let radius = 50;\n  let duration = 1000;\n  const stroke = 'black';\n  let pulse_circles = 5;\n  let stroke_width = 10;\n  let delay_multiplier = 150;\n  let color_range = ['white', 'blue'];\n  const margins = { top: 0, right: 0, bottom: 0, left: 0 };\n\n  function pulseCircle(selection: any) {\n    const dims = selection.node().getBoundingClientRect();\n    if (!height || !width) {\n      radius = Math.min(width || dims.width, dims.width, height || dims.height, dims.height) * 0.45;\n      stroke_width = radius / 3;\n    }\n    width = width || dims.width;\n    height = height || dims.height;\n\n    if (!height || !width) return;\n\n    const color = d3.scaleLinear().domain([100, 0]).range(color_range).interpolate(d3.interpolateHcl);\n\n    const colorFill = function (d: number) {\n      return color(Math.abs((d % 20) - 10));\n    };\n\n    const y = d3.scalePoint().domain(d3.range(pulse_circles)).range([0, height]);\n\n    /*\n    const z = d3\n      .scaleLinear()\n      .domain([10, 0])\n      .range(['hsl(240, 90%, 100%)', 'hsl(240,90%,40%)'])\n      .interpolate(d3.interpolateHcl);\n      */\n\n    const svg = selection.append('svg').attr('width', width).attr('height', height);\n\n    const g = svg.append('g').attr('transform', 'translate(' + margins.left + ',' + margins.top + ')');\n\n    g.selectAll('circle')\n      .data(y.domain())\n      .enter()\n      .append('circle')\n      .attr('fill', '#000')\n      .attr('stroke', stroke)\n      .attr('stroke-width', stroke_width + 'px')\n      .attr('r', 0)\n      .attr('cx', width / 2)\n      .attr('cy', height / 2)\n      .style('fill', colorFill)\n      .on('click', broadcastToggle)\n      .transition()\n      .duration(duration)\n      .delay((d: number) => {\n        return d * delay_multiplier;\n      })\n      .on('start', function repeat(_, i: number, n: any) {\n        d3.active(n[i])\n          .attr('r', radius)\n          .attr('stroke-width', '0px')\n          .transition()\n          .attr('r', 0)\n          .attr('stroke-width', stroke_width + 'px')\n          .transition()\n          .on('start', repeat);\n      });\n  }\n\n  pulseCircle.height = (d: number) => {\n    return d ? ((height = d), pulseCircle) : height;\n  };\n  pulseCircle.width = (d: number) => {\n    return d ? ((width = d), pulseCircle) : width;\n  };\n  pulseCircle.duration = (d: number) => {\n    return d ? ((duration = d), pulseCircle) : duration;\n  };\n  pulseCircle.pulse_circles = (d: number) => {\n    return d ? ((pulse_circles = d), pulseCircle) : pulse_circles;\n  };\n  pulseCircle.radius = (d: number) => {\n    return d ? ((radius = d), pulseCircle) : radius;\n  };\n  pulseCircle.delay_multiplier = (d: number) => {\n    return d ? ((delay_multiplier = d), pulseCircle) : delay_multiplier;\n  };\n  pulseCircle.stroke_width = (d: number) => {\n    return d ? ((stroke_width = d), pulseCircle) : stroke_width;\n  };\n  pulseCircle.color_range = (d: any) => {\n    return d ? ((color_range = d), pulseCircle) : color_range;\n  };\n\n  return pulseCircle;\n}\n","import { attemptJSONparse, formatDate, getOpponents, showModal } from './utilities';\nimport { app, env, updateAppState, updateMatchArchive } from './env';\nimport { loadDetails, stateChangeEvent } from './displayUpdate';\nimport { resetMatch } from './displayMatchArchive';\nimport { viewManager } from './viewManager';\nimport { connect } from 'socket.io-client';\nimport { pulseCircle } from './pulseCircle';\n\nimport * as d3 from 'd3';\n\ntype ComsObject = {\n  socket: any;\n  connectionOptions: any;\n};\n\nexport const coms: ComsObject = {\n  socket: undefined,\n  connectionOptions: {\n    'force new connection': true,\n    reconnectionDelay: 1000,\n    reconnectionAttempts: 'Infinity',\n    timeout: 20000\n  }\n};\n\nexport function connectSocket() {\n  if ((navigator.onLine || window.location.hostname == 'localhost') && !coms.socket) {\n    const server =\n      window.location.hostname.startsWith('localhost') || window.location.hostname === '127.0.0.1'\n        ? 'http://localhost:8888'\n        : 'https://courthive.com';\n    console.log(server, window.location.hostname);\n    const connectionString = `${server}/match`;\n    coms.socket = connect(connectionString, coms.connectionOptions);\n    if (coms.socket) {\n      coms.socket.on('connect', comsConnect);\n      coms.socket.on('disconnect', comsDisconnect);\n      coms.socket.on('connect_error', comsError);\n      coms.socket.on('history request', sendHistory);\n      coms.socket.on('tmx error', tmxError);\n      coms.socket.on('tmx directive', tmxDirective);\n      coms.socket.on('tmx message', tmxMessage);\n    }\n  }\n}\n\nfunction comsConnect() {}\nfunction comsDisconnect() {}\nfunction comsError() {}\nfunction sendHistory() {\n  const muid = env.match.metadata.defineMatch().muid;\n  const point_history = env.match.history.points();\n  const data = { muid, point_history };\n  if (muid && point_history.length) coms.socket.emit('point history', data);\n}\n\nfunction tmxError(data: any) {\n  const message = `<h2>${data.error}</h2>`;\n  showModal(message);\n}\n\nfunction tmxMessage(data: any) {\n  if (!data || !data.muid) {\n    const message = `<h2>Invalid Key</h2>`;\n    return showModal(message);\n  }\n\n  const auth_match = attemptJSONparse(data.data);\n\n  updateMatchArchive();\n  resetMatch(auth_match.match.muid);\n\n  env.match.metadata.defineTournament({\n    name: auth_match.tournament.name,\n    tuid: auth_match.tournament.tuid,\n    start_date: formatDate(auth_match.tournament.start)\n  });\n\n  env.match.metadata.defineMatch({\n    euid: auth_match.event.euid\n  });\n\n  /*\n  let players = auth_match.teams.map(\n    (t) => `${t[0].first_name} ${t[0].last_name}`\n  );\n  match.metadata.definePlayer({ index: 0, name: players[0] });\n  match.metadata.definePlayer({ index: 1, name: players[1] });\n  */\n  const format = auth_match.teams && 2 === auth_match.teams[0].length ? 'doubles' : 'singles';\n  const teams = getOpponents({\n    sides: auth_match.teams,\n    format\n  });\n  env.match.metadata.definePlayer({ index: 0, name: teams[0] });\n  env.match.metadata.definePlayer({ index: 1, name: teams[1] });\n\n  const surface: any = auth_match.event.surface;\n  if (surface) {\n    const surfaces: any = {\n      C: 'clay',\n      H: 'hard',\n      G: 'grass'\n    };\n    if (surfaces[surface]) {\n      env.match.metadata.defineTournament({ surface: surfaces[surface] });\n    }\n  }\n\n  const in_out = auth_match.event.inout;\n  if (in_out) {\n    const inout: any = {\n      o: 'out',\n      i: 'in'\n    };\n    if (inout[in_out]) {\n      env.match.metadata.defineTournament({ in_out: inout[in_out] });\n    }\n  }\n\n  loadDetails();\n  stateChangeEvent();\n  viewManager('entry');\n}\n\nfunction tmxDirective(data: any) {\n  console.log('tmx directive', data);\n}\n\nexport function broadcasting() {\n  if (app.broadcast && coms.socket) return true;\n  if (app.broadcast) {\n    connectSocket();\n  }\n  return false;\n}\n\nexport function startBroadcast() {\n  connectSocket();\n  //@ts-expect-error unknown reason\n  const pc: any = pulseCircle().color_range(['white', 'white']).height(60).width(60).radius(28).stroke_width(5);\n  d3.select('#startpulse').style('display', 'none');\n  d3.select('#pulse').style('display', 'block').call(pc);\n}\n\nfunction endBroadcast() {\n  app.broadcast = false;\n  d3.select('#startpulse').style('display', 'flex');\n  d3.select('#pulse').style('display', 'none').selectAll('svg').remove();\n}\n\nexport function emitTMX(data: any) {\n  Object.assign(data, {\n    timestamp: new Date().getTime(),\n    uuuid: app.user_uuid\n  });\n  coms.socket.emit('tmx', data);\n}\n\nexport function broadcastToggle() {\n  app.broadcast = !app.broadcast;\n  if (app.broadcast && coms.socket) {\n    startBroadcast();\n  } else {\n    endBroadcast();\n  }\n  if (!navigator.onLine) showModal(` <p> <h1>No Internet Connection!</h1>`);\n  updateAppState();\n}\n\nexport function broadcastStatus(status: string) {\n  if (broadcasting()) {\n    const muid = env.match.metadata.defineMatch().muid;\n    const data: any = { muid, status };\n    const tournament = env.match.metadata.defineTournament();\n    data.tuid = tournament.tuid || tournament.name;\n    coms.socket.emit('match status', data);\n  }\n}\n","let touchTimer: any;\nconst em: any = {\n  elapsed: 100000,\n  held: undefined,\n  touched: undefined,\n  holdTime: 800,\n  holdAction: undefined,\n  holdActions: {}\n};\nconst keys: any = {};\nlet registeredFunctions: any = {};\nconst intersection = (a: any, b: any) =>\n  a.filter((n: any) => b.indexOf(n) !== -1).filter((e: any, i: any, c: any) => c.indexOf(e) === i);\n\nem.reset = () => {\n  registeredFunctions = {};\n  return em;\n};\n\nem.register = (cls: any, evnt: any, fx: any, delay: any) => {\n  if (typeof fx == 'function') {\n    if (!registeredFunctions[evnt]) {\n      registeredFunctions[evnt] = {};\n      keys[evnt] = [];\n    }\n    registeredFunctions[evnt][cls] = { fx, delay };\n    keys[evnt] = Object.keys(registeredFunctions[evnt]);\n  }\n  return em;\n};\n\nem.deRegister = (cls: any, evnt: any) => {\n  if (registeredFunctions[evnt]) {\n    delete registeredFunctions[evnt][cls];\n    keys[evnt] = Object.keys(registeredFunctions[evnt]);\n  }\n  return em;\n};\n\nem.call = (cls: any, evnt: any, ...args: any) => {\n  return registeredFunctions?.[evnt]?.[cls]?.fx(...args);\n};\nem.trigger = (cls: any, evnt: any, target: any, mouse: any) => registeredFunctions[evnt][cls].fx(target, mouse, evnt);\nem.list = () => console.log(registeredFunctions);\n\nconst tapHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\ndocument.addEventListener(tapHandler, (evt) => processEvnt({ evt, evnt: 'tap' }));\ndocument.addEventListener('change', (evt) => processEvnt({ evt, evnt: 'change' }));\ndocument.addEventListener('click', (evt) => processEvnt({ evt, evnt: 'click' }));\ndocument.addEventListener('mouseover', (evt) => processEvnt({ evt, evnt: 'mouseover', stopPropagation: false }));\ndocument.addEventListener('mouseout', (evt) => processEvnt({ evt, evnt: 'mouseout', stopPropagation: false }));\ndocument.addEventListener('keyup', (evt) => processEvnt({ evt, evnt: 'keyup', stopPropagation: false }));\n\nlet lastTap = 0;\n\ntype AnyType = {\n  [key: string]: any;\n};\nfunction processEvnt({ evt, evnt, stopPropagation = true }: AnyType) {\n  if (stopPropagation) evt.stopPropagation();\n  const mouse = {\n    x: evt.clientX,\n    y: evt.clientY,\n    pageX: evt.pageX,\n    pageY: evt.pageY\n  };\n  const classList = Array.from(evt.target.classList);\n  const matchedClasses = classList.length && keys[evnt] ? intersection(classList, keys[evnt]) : [];\n  if (matchedClasses.length) {\n    const thisTap = new Date().getTime();\n    em.elapsed = thisTap - lastTap;\n    lastTap = thisTap;\n    matchedClasses.forEach((cls: any) => {\n      callFunction({ cls, evt, evnt, mouse });\n    });\n  }\n}\n\nfunction callFunction({ cls, evt, evnt, mouse }: AnyType) {\n  const target = evt.target;\n  registeredFunctions[evnt][cls].fx(target, mouse, evnt, evt);\n}\n\ndocument.addEventListener(\n  'touchstart',\n  (pointerEvent) => {\n    em.touched = pointerEvent.target;\n    em.coords = [pointerEvent.touches[0].clientX, pointerEvent.touches[0].clientY];\n    if (em.touched) {\n      touchTimer = setTimeout(function () {\n        holdAction();\n      }, em.holdTime);\n    }\n  },\n  false\n);\ndocument.addEventListener(\n  'touchend',\n  function () {\n    touchleave();\n  },\n  false\n);\ndocument.addEventListener(\n  'touchmove',\n  function (pointerEvent) {\n    if (em.touched !== pointerEvent.target) touchleave();\n  },\n  false\n);\nfunction touchleave() {\n  clearTimeout(touchTimer);\n}\nfunction holdAction() {\n  if (typeof em.holdAction == 'function') {\n    em.held = em.touched;\n    em.holdAction(em.held, em.coords);\n  }\n}\n\nlet isTouch = false; //let to indicate current input type (is touch versus no touch)\nlet isTouchTimer: any;\nlet curRootClass = ''; //let indicating current document root class (\"can-touch\" or \"\")\n\nfunction addtouchclass() {\n  clearTimeout(isTouchTimer);\n  isTouch = true;\n  if (curRootClass !== 'can-touch') {\n    //add \"can-touch' class if it's not already present\n    curRootClass = 'can-touch';\n    document.documentElement.classList.add(curRootClass);\n  }\n  //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n  isTouchTimer = setTimeout(function () {\n    isTouch = false;\n  }, 500);\n}\n\nfunction removetouchclass() {\n  // console.log('removing touch class');\n  if (!isTouch && curRootClass === 'can-touch') {\n    //remove 'can-touch' class if not triggered by a touch event and class is present\n    isTouch = false;\n    curRootClass = '';\n    document.documentElement.classList.remove('can-touch');\n  }\n}\n\ndocument.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\ndocument.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n\nexport const eventManager = em;\n","import { default_players, device, env } from './env';\nimport { broadcasting, coms } from './coms';\n\nexport function broadcastScore(action?: any) {\n  action = action || env.match.history.lastPoint();\n  const players = env.match.metadata.players();\n\n  // don't publish if the player names haven't been changed\n  const pub = players[0].name != default_players[0] && players[1].name != default_players[1];\n\n  if (pub && broadcasting()) {\n    const coords = device.geoposition.coords || {};\n    const tournament = env.match.metadata.defineTournament();\n    const match_meta = env.match.metadata.defineMatch();\n    const match_message = {\n      tournament,\n      match: env.match.metadata.defineMatch(),\n      event: { euid: match_meta.euid },\n      status: env.match.status,\n      players: env.match.metadata.players(),\n      score: env.match.score(),\n      point: action.point,\n      serving: env.match.nextTeamServing(),\n      complete: env.match.complete(),\n      winner: env.match.winner(),\n      geoposition: {\n        latitude: coords.latitude,\n        longitude: coords.longitude\n      },\n      undo: typeof action == 'string' && action == 'Undo'\n    };\n    sendScoreUpdate(match_message);\n  }\n}\n\nlet next_update: any;\nlet last_timeout: any;\nlet last_update = 0;\nconst update_window = 10000;\n\nfunction sendScoreUpdate(update: any) {\n  const now = Date.now();\n  next_update = update;\n\n  if (now - last_update > update_window) {\n    coms.socket.emit('match score', next_update);\n    last_update = now;\n  } else {\n    if (last_timeout) clearTimeout(last_timeout);\n    const wait_time = update_window - (now - last_update);\n    last_timeout = setTimeout(function () {\n      coms.socket.emit('match score', next_update);\n      last_update = now;\n    }, wait_time);\n  }\n}\n","import { showGameFish } from './configureViz';\nimport { showModal } from './utilities';\nimport { env, settings } from './env';\n\nexport function checkMatchEnd(action?: any) {\n  if (env.match.complete()) {\n    const winner = env.match.metadata.players()[env.match.winner()].name;\n    showModal(\n      `<div style=\"height: 50vh\" class=\"flexcols flexcenter\"><div>Match Complete!</div><div>Winner: ${winner}</div></div>`\n    );\n    return true;\n  } else if (action?.game.complete && settings.display_gamefish) {\n    showGameFish();\n  }\n}\n","import { stateChangeEvent } from './displayUpdate';\nimport { broadcastScore } from './broadcastScore';\nimport { checkMatchEnd } from './checkMatchEnd';\nimport { strokeSlider } from './strokeSlider';\nimport { env } from './env';\n\nexport function strokeAction(element: any) {\n  const hand: string = element.getAttribute('hand');\n  const stroke: string = element.getAttribute('stroke');\n  if (hand && stroke) {\n    const last_point = env.match.history.lastPoint();\n    env.match.decoratePoint(last_point, { hand, stroke });\n    stateChangeEvent(); // make sure to save the decoration in case of exit!!\n  }\n  strokeSlider();\n  const point_episodes = env.match.history.action('addPoint');\n  const last_action = point_episodes[point_episodes.length - 1];\n  checkMatchEnd(last_action);\n  broadcastScore(last_action);\n}\n","import { env, updateMatchArchive } from './env';\n\nexport function updatePlayer() {\n  env.match.metadata.definePlayer(updatePlayerDetails());\n  updateMatchArchive();\n}\n\nfunction updatePlayerDetails() {\n  const player: any = { index: env.edit_player };\n  const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc'];\n  attributes.forEach((attribute) => {\n    const target_id = `player_${attribute}`;\n    const obj: any = document.getElementById(target_id);\n    if (obj.selectedIndex >= 0) {\n      const value = obj.options[obj.selectedIndex].value;\n      if (value) player[attribute] = value;\n    }\n  });\n  const rankElement: any = document.getElementById('player_rank');\n  if (rankElement.value) player.rank = rankElement.value;\n  return player;\n}\n","import { env, updateMatchArchive } from './env';\nimport { updateScore } from './displayUpdate';\nimport { viewManager } from './viewManager';\nimport { findUpClass } from './utilities';\n\nexport function changeFormat(element: Element) {\n  const selectionContainer = findUpClass(element, 'mf_format');\n  const format = selectionContainer.getAttribute('newFormat');\n  env.match.format.type(format);\n  const format_name = env.match.format.settings().name;\n  document.getElementById('md_format').innerHTML = format_name;\n  updateScore();\n  updateMatchArchive();\n  viewManager('entry');\n}\n","export const DOUBLE_FAULT = 'Double Fault';\n","import { updateState, visibleButtons } from './displayUpdate';\nimport { resetButton, resetStyles } from './events';\nimport { broadcastScore } from './broadcastScore';\nimport { checkMatchEnd } from './checkMatchEnd';\nimport { buttons, env, settings } from './env';\nimport { strokeSlider } from './strokeSlider';\nimport { broadcastStatus } from './coms';\nimport { DOUBLE_FAULT } from './constants';\n\nconst toggles: any = {};\n\nexport function classAction(element: any) {\n  const action: string = element.getAttribute('action');\n  let side: number = parseInt(element.getAttribute('side') ?? 0);\n  const service: string = element.getAttribute('service');\n  const playerRole: string = element.getAttribute('role');\n\n  if (checkMatchEnd()) return;\n  const slider_side = side ? 'right' : 'left';\n  if (env.swap_sides && ['server', 'receiver'].indexOf(playerRole) < 0) side = 1 - side;\n  resetStyles();\n\n  function changeValue(classes: any, value: any) {\n    const objs = Array.from(document.querySelectorAll(classes));\n    objs.forEach((element) => (element.innerHTML = value));\n  }\n\n  function rallyMode() {\n    env.rally_mode = true;\n    Array.from(document.querySelectorAll('.modeforce')).forEach((div: any) => (div.style.display = 'flex'));\n    changeValue('.vs_action_button.winner', 'Winner');\n    changeValue('.vs_action_button.fault', 'UFE');\n    changeValue('.vs_action_button.forced', 'Forced');\n    Array.from(document.querySelectorAll('.vs_mode_button')).forEach((button) => {\n      if (['Serve', 'Return', '2nd Serve'].indexOf(button.innerHTML) >= 0) button.innerHTML = 'Base Line';\n    });\n  }\n\n  const actions: any = {\n    firstServe() {\n      env.serve2nd = false;\n    },\n    secondServe() {\n      env.serve2nd = toggles.serve2nd ? false : true;\n      toggles.serve2nd = !toggles.serve2nd;\n    },\n    fault(side: number) {\n      if (side != env.serving) return undefined;\n      if (env.serve2nd) return { code: 'D' };\n      const player_side = env.swap_sides ? 1 - side : side;\n      changeValue(`.fault.display_${player_side}_serving`, DOUBLE_FAULT);\n      changeValue(`.fault.modeerr_player${player_side}`, DOUBLE_FAULT);\n      const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n      const server_mode = `.modeaction_player${server_side}`;\n      Array.from(document.querySelectorAll(server_mode)).forEach((div) => (div.innerHTML = '2nd Serve'));\n      env.serve2nd = true;\n      broadcastStatus('Service Fault');\n    },\n    doubleFault(side: number) {\n      return side != env.serving ? undefined : { code: 'd' };\n    },\n    ace(side: number) {\n      return side != env.serving ? undefined : env.serve2nd ? { code: 'a' } : { code: 'A' };\n    },\n    winner(side: number) {\n      return { winner: side, result: 'Winner' };\n    },\n    unforced(side: number) {\n      return { winner: 1 - side, result: 'Unforced Error' };\n    },\n    forced(side: number) {\n      return { winner: 1 - side, result: 'Forced Error' };\n    },\n    point(side: number) {\n      return { winner: side };\n    },\n    penalty(side: number) {\n      console.log('penalty');\n      return {\n        winner: 1 - side,\n        result: 'Penalty',\n        code: side == env.serving ? 'P' : 'Q'\n      };\n    },\n\n    modewin(side: number, point: any) {\n      const action = element.innerHTML;\n      if (action == 'Ace') return actions.ace(side, point);\n      if (action == 'Winner') return actions.winner(side, point);\n    },\n    modeerr(side: number, point: any) {\n      const action = element.innerHTML;\n      if (action == 'Fault' || action == DOUBLE_FAULT) return actions.fault(side, point);\n      if (action == 'UFE') return actions.unforced(side, point);\n      if (action == 'Forced') return actions.forced(side, point);\n      if (action == 'Let') return actions.let(side, point);\n    },\n    modeaction() {\n      const action = element.innerHTML;\n      if (['Serve', '2nd Serve', 'Return'].indexOf(action) >= 0) {\n        rallyMode();\n      }\n      if (action == 'Serve' || action == 'Return') {\n        rallyMode();\n      }\n      if (action == 'Net') {\n        element.innerHTML = 'Base Line';\n      }\n      if (action == 'Base Line') {\n        element.innerHTML = 'Net';\n      }\n    },\n    rally() {\n      const action = element.innerHTML;\n      env.rally = parseInt((action.match(/\\d+/g) || ['0']).join(''));\n      env.rally += 1;\n      changeValue(`.rally`, `Rally: ${env.rally}`);\n      if (env.rally == 1) rallyMode();\n    },\n    let() {\n      broadcastStatus('Service: Let');\n      // const server_side = env.swap_sides ? 1 - env.serving : env.serving;\n      // const server_let = `.modeforce_player${server_side}`;\n      // const action = element.innerHTML;\n      env.lets += 1;\n      // reset serve clock\n    }\n  };\n\n  const sound: any = document.getElementById('click');\n  if (sound && settings.audible_clicks) sound.play();\n  if (element.id) styleButton(element.id);\n  if (service && service == 'second_service') env.serve2nd = true;\n  if (Object.keys(actions).indexOf(action) < 0) return undefined;\n  const player_position = ['server', 'receiver'].indexOf(playerRole);\n  if (player_position >= 0) side = player_position ? env.receiving : env.serving;\n  const point: any = env.serve2nd ? { first_serve: { error: 'Error', serves: ['0e'] } } : {};\n  const result = actions[action](side, point);\n  if (result) {\n    checkStartTime();\n    Object.assign(point, result);\n    if (env.rally) point.rally = new Array(env.rally);\n    const point_location = getPointLocation(point);\n    if (point_location) point.location = point_location;\n\n    // perhaps refactor to defer adding point until\n    // stroke/result action, if any; then decorate point not necessary\n    // and broadcast of point doesn't have to wait until decoration...\n    // would require a global variable, perhaps 'pip' for point-in-progress\n    const what = env.match.addPoint(point);\n\n    if (\n      settings.track_shot_types &&\n      what.result &&\n      what.point.result &&\n      ['Penalty', 'Ace', 'Double Fault'].indexOf(what.point.result) < 0\n    ) {\n      strokeSlider(slider_side);\n    } else {\n      checkMatchEnd(what);\n      broadcastScore(what);\n    }\n\n    env.rally = 0;\n    env.lets = 0;\n    env.undone = [];\n    updateState();\n  }\n  visibleButtons();\n}\n\nfunction styleButton(id: string) {\n  const button = document.getElementById(id);\n  if (!button) return;\n  if (buttons[id].type == 'flash') {\n    button.style.backgroundColor = buttons[id].color;\n    button.style.color = 'white';\n    setTimeout(() => resetStyles(), 300);\n  } else if (buttons[id].type == 'toggle') {\n    if (button.style.backgroundColor == 'white') {\n      env.serve2nd = id == 'second_serve';\n      button.style.backgroundColor = buttons[id].color;\n      button.style.color = 'white';\n    } else {\n      env.serve2nd = false;\n      button.style.backgroundColor = 'white';\n      button.style.color = buttons[id].color;\n    }\n    const toggle_ids = Object.keys(buttons).filter((f) => buttons[f].type == 'toggle');\n    toggle_ids.filter((f) => f != id).forEach((id: string) => resetButton(id));\n  }\n}\n\nfunction checkStartTime() {\n  const points = env.match.history.points();\n  if (points.length == 0) {\n    // if no points, define new start time\n    const date = new Date();\n    env.match.metadata.defineMatch({ date: date.valueOf() });\n  }\n}\n\nfunction getPointLocation(point: any) {\n  const p0location = document.querySelectorAll('.modeaction_player0');\n  const p1location = document.querySelectorAll('.modeaction_player1');\n  if ((p0location && p0location[0].innerHTML == 'Net') || (p1location && p1location[0].innerHTML == 'Net')) {\n    if (point.result == 'Unforced Error' || point.result == 'Forced Error') {\n      if (point.winner == 0 && p1location[0].innerHTML == 'Net') return 'Net';\n      if (point.winner == 1 && p0location[0].innerHTML == 'Net') return 'Net';\n    } else if (point.result == 'Winner') {\n      if (point.winner == 0 && p0location[0].innerHTML == 'Net') return 'Net';\n      if (point.winner == 1 && p1location[0].innerHTML == 'Net') return 'Net';\n    }\n  }\n}\n","import { browserStorage } from './browserStorage';\nimport { closeModal } from './modals';\n\nexport function exportMatch(element: any) {\n  const match_id = element.getAttribute('matchId');\n  const match_data: any = browserStorage.get(match_id);\n  if (match_data) {\n    download(match_data, `match_${match_id}.json`);\n    closeModal();\n  }\n}\n\nfunction download(textToWrite: string, fileNameToSaveAs: string) {\n  fileNameToSaveAs = fileNameToSaveAs || 'match.json';\n  const textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });\n  const downloadLink = document.createElement('a');\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.innerHTML = 'Download File';\n  if (window.URL != null) {\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n    downloadLink.click();\n  }\n}\n","export default \"__VITE_ASSET__SN86_yA3__\"","import emailblackImage from '../assets/icons/emailblack.png';\nimport { broadcastScore } from './broadcastScore';\nimport { browserStorage } from './browserStorage';\nimport { showModal } from './utilities';\nimport { app, env } from './env';\nimport { UUID } from './UUID';\nimport { coms } from './coms';\n\nexport function modalShare() {\n  broadcastScore();\n  const match_id = browserStorage.get('current_match');\n  const match_data = match_id && browserStorage.get(match_id);\n  if (match_data) {\n    const json_data = JSON.parse(match_data);\n    let muid = json_data.match.muid;\n    if (!muid) {\n      muid = UUID();\n      json_data.match.muid = muid;\n      env.match.metadata.defineMatch({ muid });\n      browserStorage.set(match_id, JSON.stringify(json_data));\n    }\n    shareResult(json_data);\n  } else {\n    const modaltext = ` <p> <h1>First Track a Match!</h1> </p> `;\n    showModal(modaltext);\n  }\n}\n\nfunction shareResult(json_data: any) {\n  if (!coms.socket) {\n    const modaltext = ` <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> `;\n    showModal(modaltext);\n    return;\n  }\n  const broadcast_link = app.broadcast ? `CourtHive Live Score: ${location.origin}/scores?muid=${json_data.muid}` : '';\n  const email_message = `${broadcast_link}%0D%0A `;\n  const emailOption = app.broadcast\n    ? `\n    <div class='closeModal flexcenter iconmargin'>\n      <a href='mailto:?subject=CourtHive Match Link&body=${email_message}' class=\"notextdecoration\">\n          <img class=\"icon_large\" src='${emailblackImage}'>\n      </a> \n    </div>\n  `\n    : '';\n  const clipboardOption = json_data\n    ? `\n    <div class='flexcenter iconmargin'>\n      <button id='copy2clipboard' class=\"flexcenter c2c\" data-clipboard-text=\"\"> \n          <div class='export_action action_icon_large iconclipboard'></div> \n      </button>\n    </div>\n  `\n    : '';\n  const modaltext = `\n      <p>&nbsp;</p>\n      <h1>Options for Sharing</h1>\n      <div class='flexrows'> \n        ${emailOption}\n        ${clipboardOption}\n      </div>`;\n  showModal(modaltext, JSON.stringify(json_data));\n}\n","import { browserStorage } from './browserStorage';\nimport { stateChangeEvent } from './displayUpdate';\nimport { loadMatch } from './loadMatch';\nimport { env } from './env';\n\nexport function editPoint(index: number) {\n  env.edit_point_index = index;\n  const episodes = env.match.history.action('addPoint');\n  env.edit_point = episodes[index].point;\n  env.edit_point_result = env.edit_point.result;\n  let score = env.edit_point.server ? env.edit_point.score.split('-').reverse().join('-') : env.edit_point.score;\n  if (score == '0-0') score = 'Gamepoint';\n  const epSGP = document.getElementById('ep_sgp');\n  if (epSGP) epSGP.innerHTML = `Set: ${env.edit_point.set + 1}, Game: ${env.edit_point.game + 1}, Point: ${score}`;\n  const players = env.match.metadata.players();\n  const player_select = Array.from(document.querySelectorAll('.select_player'));\n  player_select.forEach((select: any) =>\n    players.forEach((player: any, index: number) => (select.options[index] = new Option(player.name, index.toString())))\n  );\n  const point_winner: any = document.getElementById('point_winner');\n  const point_loser: any = document.getElementById('point_loser');\n  if (point_winner) point_winner.value = env.edit_point.winner;\n  if (point_loser) point_loser.value = env.edit_point.result || '';\n  changePointWinner();\n  changeResultOptions();\n  const editPointDisplay = document.getElementById('editpoint');\n  if (editPointDisplay) editPointDisplay.style.display = 'flex';\n}\n\nfunction changePointWinner() {\n  const pointPlayer: any = document.getElementById('point_player');\n  const pointResult: any = document.getElementById('point_result');\n  const pointWinner: any = document.getElementById('point_winner');\n  const player = pointPlayer?.value;\n  const result = pointResult?.value;\n  const winner = pointWinner?.value;\n  if (result.indexOf('Winner') < 0 && result.indexOf('Ace') < 0 && player == winner) {\n    pointPlayer.value = 1 - winner;\n  }\n  if ((result.indexOf('Winner') >= 0 || result.indexOf('Ace') >= 0) && player != winner) {\n    pointPlayer.value = winner;\n  }\n}\n\nfunction changeResultOptions() {\n  const pointPlayer: any = document.getElementById('point_player');\n  const pointResult: any = document.getElementById('point_result');\n  const player = pointPlayer?.value;\n  env.edit_point_result = pointResult.value;\n  pointResult.innerHTML = '';\n  pointResult.options[0] = new Option('- select -', '');\n  let results: any[] = [];\n  if (player == env.edit_point.server) results = ['Ace', 'Double Fault'].concat(...results);\n  results = ['Winner', 'Unforced Error', 'Forced Error'].concat(...results);\n  results.forEach((result, index) => (pointResult.options[index + 1] = new Option(result, result)));\n  pointResult.value = env.edit_point_result;\n}\n\n/*\nfunction changePointPlayer() {\n  var player = document.getElementById('point_player').value;\n  var result = document.getElementById('point_result').value;\n  env.edit_point.result = result;\n  var winner = document.getElementById('point_winner').value;\n  if ((result.indexOf('Winner') >= 0 || result.indexOf('Ace') >= 0) && player != winner) {\n    document.getElementById('point_winner').value = player;\n  }\n  if (result.indexOf('Winner') < 0 && result.indexOf('Ace') < 0 && player == winner) {\n    document.getElementById('point_winner').value = 1 - player;\n  }\n  changeResultOptions();\n}\n*/\n\nexport function updatePoint() {\n  const pointResult: any = document.getElementById('point_result');\n  const pointWinner: any = document.getElementById('point_winner');\n  const winner = pointWinner.value;\n  const result = pointResult.value;\n  env.edit_point.winner = winner;\n  env.edit_point.result = result;\n  env.edit_point.code = undefined; // TODO: code needs to be updated properly\n  stateChangeEvent();\n  const current_match_id = browserStorage.get('current_match');\n  if (current_match_id) {\n    loadMatch(current_match_id, 'pointhistory');\n    const editPointDisplay = document.getElementById('editpoint');\n    if (editPointDisplay) editPointDisplay.style.display = 'none';\n  }\n}\n","import { closeModal } from './modals';\nimport { env } from './env';\n\nexport function editPlayer(element: any) {\n  const index = parseInt(element.getAttribute('playerIndex') ?? 0);\n  env.edit_player = env.swap_sides ? 1 - index : index;\n  closeModal();\n  const editPlayerDisplay = document.getElementById('editplayer');\n  if (editPlayerDisplay) editPlayerDisplay.style.display = 'flex';\n  const player = env.match.metadata.players(env.edit_player);\n  const playerName: any = document.getElementById('playername');\n  if (playerName) playerName.value = player.name;\n  const attributes = ['hand', 'entry', 'seed', 'draw_position', 'ioc'];\n  attributes.forEach((attribute) => {\n    const target_id = `player_${attribute}`;\n    const targetElement: any = document.getElementById(target_id);\n    if (targetElement) targetElement.value = player[attribute] || '';\n  });\n  const playerRank: any = document.getElementById('player_rank');\n  if (playerRank) playerRank.value = player.rank || '';\n}\n","export default \"__VITE_ASSET__wUPJvyNp__\"","import pointsImage from '../assets/icons/points.jpg';\nimport { showModal } from './utilities';\n\nexport function modalHelp(quick_start?: boolean) {\n  const quick = `\n         <div class=\"helpintro\">Quick Start</div>\n         <div class=\"flexhelp\"> <div class='iconmenub action_icon_large'></div> <div class=\"quicktitle\">Main Menu</div> </div>\n         <div class=\"quickitem\"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>\n         <div class=\"flexhelp\"> <div class='iconsettingsb action_icon_large'></div> <div class=\"quicktitle\">Settings</div> </div>\n         <div class=\"quickitem\"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>\n         <div class=\"flexhelp\"> <div class='iconchangeb action_icon_large'></div> <div class=\"quicktitle\">Change First Server</div> </div>\n         <div class=\"quickitem\"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>\n         <div class=\"quickitem\"> <span>To simply advance points, tap the <b>Points</b> display </span></div>\n         <div class=\"flexhelp\"> <img src='${pointsImage}'> </div>\n      `;\n  const save = `\n         <div class=\"helpintro\">Save To Home Screen</div>\n         <div class=\"helpitem\">CourtHive is a Progressive Web App</div>\n         <div class=\"helpitem\"><b>For Full Screen View:</b></div>\n         <div class=\"helpitem\">On iOS use Safari to Save</div>\n         <div class=\"helpitem\">On Android use Chrome</div>\n      `;\n  const helptext = `\n         <div class=\"helpintro\">How to</div>\n         <div class=\"helpitem\"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>\n         <div class=\"helpitem\"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>\n         <div class=\"helpitem\"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>\n         <div class=\"helpitem\"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>\n         <div class=\"helpitem\"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>\n         <div class=\"helpitem\"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>\n         <div class=\"flexhelp\"> <div class='iconbroadcast icon icon_5'></div> <div class=\"quicktitle\">Enable Broadcast</div> </div>\n         <div class=\"flexhelp\"> <div class='iconshare icon icon_3'></div> <div class=\"quicktitle\">Share (Email, Copy/Paste)</div> </div>\n      `;\n  const modaltext = quick_start ? quick + save + helptext : helptext + save + quick;\n  showModal(modaltext);\n}\n","import { showModal } from './utilities';\nimport { ch_version } from './env';\n\nexport function modalInfo() {\n  const modaltext = `\n         <p>&nbsp;</b>\n         <h2>CourtHive</h2>\n         <p>version <a id=\"version\" target=\"_blank\" href=\"https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive\">${ch_version}</a></p>\n         <p>An \n            <a target=\"_blank\" href=\"https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive\">Open Source</a> project developed by \n            <a target=\"_blank\" href=\"http://TennisVisuals.com\">TennisVisuals</a>\n         </p>\n         <p><a href=\"mailto:tennis.aip@gmail.com?subject=CourtHive\">Feedback Welcome!</a></p>\n         <h2>Help</h2>\n         <div class=\"helpitem\">Difficulties after an app update?</div>\n         <div class=\"flexcenter\">\n            <div class='flexcenter reset' onclick=\"appReset()\">Reset</div>\n         </div>\n         <p>&nbsp;</b>\n      `;\n  showModal(modaltext);\n}\n","import { showModal } from './utilities';\nimport { closeModal } from './modals';\nimport { emitTMX } from './coms';\n\nexport function enterKey(value: string) {\n  const html = `\n    <h2>Enter key:</h2>\n    <input id='key' class='key_input'>\n    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>\n  `;\n  showModal(html);\n\n  const key: any = document.getElementById('key');\n  if (key && value) key.value = value;\n\n  const key_entry = document.getElementById('key');\n  if (key_entry) key_entry.addEventListener('keyup', keyAction);\n\n  const submit = document.getElementById('submit_key');\n  if (submit) submit.addEventListener('click', submitKey);\n\n  function submitKey() {\n    if (key.value) emitTMX({ key: key.value });\n    closeModal();\n  }\n\n  function keyAction(evt: any) {\n    if (evt.which == 13) submitKey();\n  }\n}\n","import { resetButtons, setCourtSide, swapServer, updateState, visibleButtons } from './displayUpdate';\nimport { env, options, updateMatchArchive } from './env';\nimport { broadcastScore } from './broadcastScore';\nimport { viewManager } from './viewManager';\nimport { showGameFish } from './configureViz';\nimport { findUpClass } from './utilities';\nimport { editPoint } from './editPoint';\n\nexport function viewGameFish(element: any) {\n  const gameIndex: number = parseInt(element.getAttribute('gameIndex') ?? 0);\n  showGameFish(gameIndex);\n}\nexport function viewEditPoint(element: any) {\n  console.log('vep');\n  const parent = findUpClass(element, 'ph_episode');\n  const pointIndex = parseInt(parent?.getAttribute('pointIndex') ?? 0);\n  editPoint(pointIndex);\n}\nexport function viewStats() {\n  viewManager('stats');\n}\nexport function viewMatchFormat() {\n  viewManager('matchformat');\n}\nexport function viewGameTree() {\n  viewManager('gametree');\n}\nexport function viewMomentum() {\n  viewManager('momentum');\n}\nexport function viewPointHistory() {\n  viewManager('pointhistory');\n}\nexport function settings() {\n  viewManager('settings');\n}\nexport function matchArchive() {\n  viewManager('matcharchive');\n}\nexport function outcomeEntry() {\n  viewManager('entry');\n}\nexport function mainMenu() {\n  viewManager('mainmenu');\n}\nexport function undoAction() {\n  if (env.serve2nd || env.rally_mode) {\n    env.serve2nd = false;\n    env.rally_mode = false;\n    env.rally = 0;\n    env.lets = 0;\n    resetButtons();\n  } else {\n    const undo = env.match.undo();\n    broadcastScore('Undo');\n    if (undo) env.undone.push(undo);\n    updateMatchArchive(true);\n  }\n  visibleButtons();\n}\nexport function redoAction() {\n  if (!env.undone.length) return;\n  const action = env.match.addPoint(env.undone.pop());\n  broadcastScore(action);\n}\nexport function changeServer() {\n  console.log('changeServer');\n  if (!env.match.history.points().length) {\n    env.match.set.firstService(1 - env.serving);\n    updateState();\n    viewManager('entry');\n  }\n}\nexport function swapAction() {\n  console.log('swapAction');\n  options.user_swap = !options.user_swap;\n  setCourtSide();\n  swapServer();\n}\n/*\nexport function menuAction(obj, action) {\n  const actions = {\n    horizontalview() {\n      options.horizontal_view = options.horizontal_view == 'hblack' ? 'hwhite' : 'hblack';\n      BrowserStorage.set('horizontal_view', options.horizontal_view);\n      viewManager('entry');\n    },\n    verticalview() {\n            options.vertical_view = (options.vertical_view == 'vblack') ? 'vwhite' : 'vblack';\n            BrowserStorage.set('vertical_view', options.vertical_view);\n            viewManager('entry');\n    }\n  };\n}\n*/\n","import { editMatchDetails } from './displayUpdate';\nimport { newMatch } from './displayMatchArchive';\nimport { eventManager } from './eventManager';\nimport { closeGameFish } from './configureViz';\nimport { strokeAction } from './strokeAction';\nimport { updatePlayer } from './updatePlayer';\nimport { changeFormat } from './changeFormat';\nimport { classAction } from './classAction';\nimport { exportMatch } from './exportMatch';\nimport { modalShare } from './modalShare';\nimport { updatePoint } from './editPoint';\nimport { editPlayer } from './editPlayer';\nimport { broadcastToggle } from './coms';\nimport { modalHelp } from './modalHelp';\nimport { modalInfo } from './modalInfo';\nimport { updateAppState } from './env';\nimport { closeModal } from './modals';\nimport { enterKey } from './enterKey';\nimport {\n  outcomeEntry,\n  matchArchive,\n  settings,\n  mainMenu,\n  swapAction,\n  undoAction,\n  redoAction,\n  changeServer,\n  viewStats,\n  viewPointHistory,\n  viewMomentum,\n  viewGameTree,\n  viewMatchFormat,\n  viewGameFish,\n  viewEditPoint\n} from './clickActions';\n\nexport function registerEvents() {\n  eventManager\n    .register('modalInfo', 'tap', modalInfo)\n    .register('broadcastToggle', 'tap', broadcastToggle)\n    .register('modalShare', 'tap', modalShare)\n    .register('enterKey', 'tap', enterKey)\n    .register('changeFormat', 'tap', changeFormat)\n    .register('closeModal', 'tap', closeModal)\n    .register('newMatch', 'tap', newMatch)\n    .register('exportMatch', 'tap', exportMatch)\n    .register('settings', 'tap', settings)\n    .register('outcomeEntry', 'tap', outcomeEntry)\n    .register('matchArchive', 'tap', matchArchive)\n    .register('mainMenu', 'tap', mainMenu)\n    .register('modalHelp', 'tap', modalHelp)\n    .register('updateAppState', 'tap', updateAppState)\n    .register('closeGameFish', 'tap', closeGameFish)\n    .register('strokeAction', 'tap', strokeAction)\n    .register('swapAction', 'tap', swapAction)\n    .register('undoAction', 'tap', undoAction)\n    .register('redoAction', 'tap', redoAction)\n    .register('changeServer', 'tap', changeServer)\n    .register('updatePoint', 'tap', updatePoint)\n    .register('editPlayer', 'tap', editPlayer)\n    .register('updatePlayer', 'tap', updatePlayer)\n    .register('viewGameFish', 'tap', viewGameFish)\n    .register('viewStats', 'tap', viewStats)\n    .register('viewGameTree', 'tap', viewGameTree)\n    .register('viewMomentum', 'tap', viewMomentum)\n    .register('viewEditPoint', 'tap', viewEditPoint)\n    .register('viewMatchFormat', 'tap', viewMatchFormat)\n    .register('viewPointHistory', 'tap', viewPointHistory)\n    .register('editMatchDetails', 'tap', editMatchDetails)\n    .register('classAction', 'tap', classAction);\n}\n","/*!\n * clipboard.js v2.0.11\n * https://clipboardjs.com/\n *\n * Licensed MIT  Zeno Rocha\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClipboardJS\"] = factory();\n\telse\n\t\troot[\"ClipboardJS\"] = factory();\n})(this, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 686:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ clipboard; }\n});\n\n// EXTERNAL MODULE: ./node_modules/tiny-emitter/index.js\nvar tiny_emitter = __webpack_require__(279);\nvar tiny_emitter_default = /*#__PURE__*/__webpack_require__.n(tiny_emitter);\n// EXTERNAL MODULE: ./node_modules/good-listener/src/listen.js\nvar listen = __webpack_require__(370);\nvar listen_default = /*#__PURE__*/__webpack_require__.n(listen);\n// EXTERNAL MODULE: ./node_modules/select/src/select.js\nvar src_select = __webpack_require__(817);\nvar select_default = /*#__PURE__*/__webpack_require__.n(src_select);\n;// CONCATENATED MODULE: ./src/common/command.js\n/**\n * Executes a given operation type.\n * @param {String} type\n * @return {Boolean}\n */\nfunction command(type) {\n  try {\n    return document.execCommand(type);\n  } catch (err) {\n    return false;\n  }\n}\n;// CONCATENATED MODULE: ./src/actions/cut.js\n\n\n/**\n * Cut action wrapper.\n * @param {String|HTMLElement} target\n * @return {String}\n */\n\nvar ClipboardActionCut = function ClipboardActionCut(target) {\n  var selectedText = select_default()(target);\n  command('cut');\n  return selectedText;\n};\n\n/* harmony default export */ var actions_cut = (ClipboardActionCut);\n;// CONCATENATED MODULE: ./src/common/create-fake-element.js\n/**\n * Creates a fake textarea element with a value.\n * @param {String} value\n * @return {HTMLElement}\n */\nfunction createFakeElement(value) {\n  var isRTL = document.documentElement.getAttribute('dir') === 'rtl';\n  var fakeElement = document.createElement('textarea'); // Prevent zooming on iOS\n\n  fakeElement.style.fontSize = '12pt'; // Reset box model\n\n  fakeElement.style.border = '0';\n  fakeElement.style.padding = '0';\n  fakeElement.style.margin = '0'; // Move element out of screen horizontally\n\n  fakeElement.style.position = 'absolute';\n  fakeElement.style[isRTL ? 'right' : 'left'] = '-9999px'; // Move element to the same position vertically\n\n  var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n  fakeElement.style.top = \"\".concat(yPosition, \"px\");\n  fakeElement.setAttribute('readonly', '');\n  fakeElement.value = value;\n  return fakeElement;\n}\n;// CONCATENATED MODULE: ./src/actions/copy.js\n\n\n\n/**\n * Create fake copy action wrapper using a fake element.\n * @param {String} target\n * @param {Object} options\n * @return {String}\n */\n\nvar fakeCopyAction = function fakeCopyAction(value, options) {\n  var fakeElement = createFakeElement(value);\n  options.container.appendChild(fakeElement);\n  var selectedText = select_default()(fakeElement);\n  command('copy');\n  fakeElement.remove();\n  return selectedText;\n};\n/**\n * Copy action wrapper.\n * @param {String|HTMLElement} target\n * @param {Object} options\n * @return {String}\n */\n\n\nvar ClipboardActionCopy = function ClipboardActionCopy(target) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    container: document.body\n  };\n  var selectedText = '';\n\n  if (typeof target === 'string') {\n    selectedText = fakeCopyAction(target, options);\n  } else if (target instanceof HTMLInputElement && !['text', 'search', 'url', 'tel', 'password'].includes(target === null || target === void 0 ? void 0 : target.type)) {\n    // If input type doesn't support `setSelectionRange`. Simulate it. https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n    selectedText = fakeCopyAction(target.value, options);\n  } else {\n    selectedText = select_default()(target);\n    command('copy');\n  }\n\n  return selectedText;\n};\n\n/* harmony default export */ var actions_copy = (ClipboardActionCopy);\n;// CONCATENATED MODULE: ./src/actions/default.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n/**\n * Inner function which performs selection from either `text` or `target`\n * properties and then executes copy or cut operations.\n * @param {Object} options\n */\n\nvar ClipboardActionDefault = function ClipboardActionDefault() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // Defines base properties passed from constructor.\n  var _options$action = options.action,\n      action = _options$action === void 0 ? 'copy' : _options$action,\n      container = options.container,\n      target = options.target,\n      text = options.text; // Sets the `action` to be performed which can be either 'copy' or 'cut'.\n\n  if (action !== 'copy' && action !== 'cut') {\n    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n  } // Sets the `target` property using an element that will be have its content copied.\n\n\n  if (target !== undefined) {\n    if (target && _typeof(target) === 'object' && target.nodeType === 1) {\n      if (action === 'copy' && target.hasAttribute('disabled')) {\n        throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n      }\n\n      if (action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n        throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n      }\n    } else {\n      throw new Error('Invalid \"target\" value, use a valid Element');\n    }\n  } // Define selection strategy based on `text` property.\n\n\n  if (text) {\n    return actions_copy(text, {\n      container: container\n    });\n  } // Defines which selection strategy based on `target` property.\n\n\n  if (target) {\n    return action === 'cut' ? actions_cut(target) : actions_copy(target, {\n      container: container\n    });\n  }\n};\n\n/* harmony default export */ var actions_default = (ClipboardActionDefault);\n;// CONCATENATED MODULE: ./src/clipboard.js\nfunction clipboard_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { clipboard_typeof = function _typeof(obj) { return typeof obj; }; } else { clipboard_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return clipboard_typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (clipboard_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n/**\n * Helper function to retrieve attribute value.\n * @param {String} suffix\n * @param {Element} element\n */\n\nfunction getAttributeValue(suffix, element) {\n  var attribute = \"data-clipboard-\".concat(suffix);\n\n  if (!element.hasAttribute(attribute)) {\n    return;\n  }\n\n  return element.getAttribute(attribute);\n}\n/**\n * Base class which takes one or more elements, adds event listeners to them,\n * and instantiates a new `ClipboardAction` on each click.\n */\n\n\nvar Clipboard = /*#__PURE__*/function (_Emitter) {\n  _inherits(Clipboard, _Emitter);\n\n  var _super = _createSuper(Clipboard);\n\n  /**\n   * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n   * @param {Object} options\n   */\n  function Clipboard(trigger, options) {\n    var _this;\n\n    _classCallCheck(this, Clipboard);\n\n    _this = _super.call(this);\n\n    _this.resolveOptions(options);\n\n    _this.listenClick(trigger);\n\n    return _this;\n  }\n  /**\n   * Defines if attributes would be resolved using internal setter functions\n   * or custom functions that were passed in the constructor.\n   * @param {Object} options\n   */\n\n\n  _createClass(Clipboard, [{\n    key: \"resolveOptions\",\n    value: function resolveOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n      this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n      this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n      this.container = clipboard_typeof(options.container) === 'object' ? options.container : document.body;\n    }\n    /**\n     * Adds a click event listener to the passed trigger.\n     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n     */\n\n  }, {\n    key: \"listenClick\",\n    value: function listenClick(trigger) {\n      var _this2 = this;\n\n      this.listener = listen_default()(trigger, 'click', function (e) {\n        return _this2.onClick(e);\n      });\n    }\n    /**\n     * Defines a new `ClipboardAction` on each click event.\n     * @param {Event} e\n     */\n\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      var trigger = e.delegateTarget || e.currentTarget;\n      var action = this.action(trigger) || 'copy';\n      var text = actions_default({\n        action: action,\n        container: this.container,\n        target: this.target(trigger),\n        text: this.text(trigger)\n      }); // Fires an event based on the copy operation result.\n\n      this.emit(text ? 'success' : 'error', {\n        action: action,\n        text: text,\n        trigger: trigger,\n        clearSelection: function clearSelection() {\n          if (trigger) {\n            trigger.focus();\n          }\n\n          window.getSelection().removeAllRanges();\n        }\n      });\n    }\n    /**\n     * Default `action` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultAction\",\n    value: function defaultAction(trigger) {\n      return getAttributeValue('action', trigger);\n    }\n    /**\n     * Default `target` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultTarget\",\n    value: function defaultTarget(trigger) {\n      var selector = getAttributeValue('target', trigger);\n\n      if (selector) {\n        return document.querySelector(selector);\n      }\n    }\n    /**\n     * Allow fire programmatically a copy action\n     * @param {String|HTMLElement} target\n     * @param {Object} options\n     * @returns Text copied.\n     */\n\n  }, {\n    key: \"defaultText\",\n\n    /**\n     * Default `text` lookup function.\n     * @param {Element} trigger\n     */\n    value: function defaultText(trigger) {\n      return getAttributeValue('text', trigger);\n    }\n    /**\n     * Destroy lifecycle.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.listener.destroy();\n    }\n  }], [{\n    key: \"copy\",\n    value: function copy(target) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        container: document.body\n      };\n      return actions_copy(target, options);\n    }\n    /**\n     * Allow fire programmatically a cut action\n     * @param {String|HTMLElement} target\n     * @returns Text cutted.\n     */\n\n  }, {\n    key: \"cut\",\n    value: function cut(target) {\n      return actions_cut(target);\n    }\n    /**\n     * Returns the support of the given action, or all actions if no action is\n     * given.\n     * @param {String} [action]\n     */\n\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n      var actions = typeof action === 'string' ? [action] : action;\n      var support = !!document.queryCommandSupported;\n      actions.forEach(function (action) {\n        support = support && !!document.queryCommandSupported(action);\n      });\n      return support;\n    }\n  }]);\n\n  return Clipboard;\n}((tiny_emitter_default()));\n\n/* harmony default export */ var clipboard = (Clipboard);\n\n/***/ }),\n\n/***/ 828:\n/***/ (function(module) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n\n/***/ 438:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar closest = __webpack_require__(828);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n\n/***/ 879:\n/***/ (function(__unused_webpack_module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar is = __webpack_require__(879);\nvar delegate = __webpack_require__(438);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t!function() {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = function(module) {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\tfunction() { return module['default']; } :\n/******/ \t\t\t\tfunction() { return module; };\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(686);\n/******/ })()\n.default;\n});","import { app, env, restoreAppState, setOrientation, updateAppState } from './env';\nimport { configureViz, orientationEvent, vizUpdate } from './configureViz';\nimport { connectSocket, emitTMX, startBroadcast } from './coms';\nimport { changeDisplay, viewManager } from './viewManager';\nimport { browserStorage } from './browserStorage';\nimport { registerEvents } from './registerEvents';\nimport { newMatch } from './displayMatchArchive';\nimport { touchManager } from './touchManager';\nimport { defineActionEvents } from './events';\nimport { generateRange } from './utilities';\nimport { modalHelp } from './modalHelp';\nimport { loadMatch } from './loadMatch';\nimport { closeModal } from './modals';\nimport clipboard from 'clipboard';\nimport { UUID } from './UUID';\nimport {\n  changePlayerName,\n  checkPlayerName,\n  loadDetails,\n  resetButtons,\n  swapServer,\n  visibleButtons\n} from './displayUpdate';\n\nimport iocCodes from './ioc_codes.json';\n\nexport function init() {\n  window['dev'] = {\n    viewManager,\n    app,\n    env\n  };\n\n  window.addEventListener(\n    'orientationchange',\n    function () {\n      orientationEvent();\n    },\n    false\n  );\n  window.addEventListener(\n    'resize',\n    function () {\n      orientationEvent();\n    },\n    false\n  );\n\n  const queryString: any = {};\n  const query = window.location.search.substring(1);\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i++) {\n    const pair = vars[i].split('=');\n    if (typeof queryString[pair[0]] === 'undefined') {\n      queryString[pair[0]] = pair[1];\n    } else if (typeof queryString[pair[0]] === 'string') {\n      const arr = [queryString[pair[0]], pair[1]];\n      queryString[pair[0]] = arr;\n    } else {\n      queryString[pair[0]].push(pair[1]);\n    }\n  }\n  history.pushState('', document.title, window.location.pathname);\n\n  touchManager.disableDrag();\n  registerEvents();\n\n  // dismiss notification of requirements\n  changeDisplay('none', 'welcome');\n\n  // initialize clipboard\n  const clip = new clipboard('.c2c');\n  clip.on('success', () => {\n    closeModal();\n  });\n\n  restoreAppState();\n  checkUserUUID();\n  connectSocket();\n  if (app.broadcast && navigator.onLine) startBroadcast();\n\n  defineEntryEvents();\n  defineActionEvents();\n  touchManager.addSwipeTarget(document.getElementById('mainmenu'));\n\n  // populate drop down list box selectors\n  const select_seed = Array.from(document.querySelectorAll('.md_seed'));\n  select_seed.forEach((select: any) => {\n    generateRange(0, 32).forEach((i: number) => {\n      const optionValue = (i + 1).toString();\n      select.options[i + 1] = new Option(optionValue, optionValue);\n    });\n  });\n  const select_draw_position = Array.from(document.querySelectorAll('.md_draw_position'));\n  select_draw_position.forEach((select: any) => {\n    generateRange(0, 128).forEach((i) => {\n      const optionValue = (i + 1).toString();\n      select.options[i + 1] = new Option(optionValue, optionValue);\n    });\n  });\n  const select_ioc = Array.from(document.querySelectorAll('.md_ioc'));\n  select_ioc.forEach((select: any) => {\n    iocCodes.forEach((entry: any, index: number) => (select.options[index + 1] = new Option(entry.name, entry.ioc)));\n  });\n  // load Details to be sure that ioc data can be used to populate country\n  loadDetails();\n\n  setOrientation();\n  loadCurrent();\n  configureViz();\n  vizUpdate();\n\n  // if (queryString.key) { setTimeout(()=> enterKey(queryString.key), 1000); }\n  if (queryString.key) {\n    setTimeout(() => emitTMX({ key: queryString.key }), 1000);\n  }\n}\n\nfunction checkUserUUID() {\n  if (!app.user_uuid) {\n    app.user_uuid = UUID();\n    updateAppState();\n  }\n}\n\nfunction defineEntryEvents() {\n  const catchTab = (evt: any) => {\n    if (evt.which == 9) {\n      evt.preventDefault();\n    }\n  };\n  const playername = document.getElementById('playername');\n  if (playername) {\n    playername.addEventListener('keyup', checkPlayerName, false);\n    playername.addEventListener('keydown', catchTab, false);\n    playername.onblur = function () {\n      changePlayerName();\n    };\n    playername.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 300);\n    };\n  }\n\n  const playerRank = document.getElementById('player_rank');\n  if (playerRank) {\n    playerRank.onfocus = function () {\n      setTimeout(() => {\n        //@ts-expect-error unknown reason\n        this.setSelectionRange(0, this.value.length);\n      }, 300);\n    };\n  }\n\n  const hold_targets = Array.from(document.querySelectorAll('.pressAndHold'));\n  Array.from(hold_targets).forEach((target) => touchManager.addPressAndHold(target));\n}\n\nfunction loadCurrent() {\n  const current_match_id = browserStorage.get('current_match');\n  if (!current_match_id) {\n    const match_archive = browserStorage.get('match_archive');\n    // only show quick start if this is first launch\n    newMatch();\n    if (!match_archive) modalHelp(true);\n  } else {\n    loadMatch(current_match_id);\n    swapServer();\n    resetButtons();\n    visibleButtons();\n  }\n}\n","export default \"__VITE_ASSET__Q_tt1iRc__\"","import chLogo from \"../../assets/images/courthive-transparent-logo.png\";\nimport \"../../styles/default.css\";\nexport function renderDefaultPage(display) {\n    if (display) {\n        document.querySelector(\"#app\").innerHTML = `\n  <div>\n    <a href=\"https://courthive.com\" target=\"_blank\">\n      <img src=\"${chLogo}\" class=\"logo\" alt=\"Vite logo\" />\n    </a>\n    <h1 class=\"name\">CourtHive</h1>\n  </div>\n`;\n    }\n}\n","export var PARAMETER_REGEXP = /([:*])(\\w+)/g;\nexport var REPLACE_VARIABLE_REGEXP = \"([^/]+)\";\nexport var WILDCARD_REGEXP = /\\*/g;\nexport var REPLACE_WILDCARD = \"?(?:.*)\";\nexport var NOT_SURE_REGEXP = /\\/\\?/g;\nexport var REPLACE_NOT_SURE = \"/?([^/]+|)\";\nexport var START_BY_SLASH_REGEXP = \"(?:/^|^)\";\nexport var MATCH_REGEXP_FLAGS = \"\";","import { PARAMETER_REGEXP, WILDCARD_REGEXP, REPLACE_VARIABLE_REGEXP, REPLACE_WILDCARD, START_BY_SLASH_REGEXP, MATCH_REGEXP_FLAGS, REPLACE_NOT_SURE, NOT_SURE_REGEXP } from \"./constants\";\nexport function getCurrentEnvURL(fallback) {\n  if (fallback === void 0) {\n    fallback = \"/\";\n  }\n\n  if (windowAvailable()) {\n    return location.pathname + location.search + location.hash;\n  }\n\n  return fallback;\n}\nexport function clean(s) {\n  return s.replace(/\\/+$/, \"\").replace(/^\\/+/, \"\");\n}\nexport function isString(s) {\n  return typeof s === \"string\";\n}\nexport function isFunction(s) {\n  return typeof s === \"function\";\n}\nexport function extractHashFromURL(url) {\n  if (url && url.indexOf(\"#\") >= 0) {\n    return url.split(\"#\").pop() || \"\";\n  }\n\n  return \"\";\n}\nexport function regExpResultToParams(match, names) {\n  if (names.length === 0) return null;\n  if (!match) return null;\n  return match.slice(1, match.length).reduce(function (params, value, index) {\n    if (params === null) params = {};\n    params[names[index]] = decodeURIComponent(value);\n    return params;\n  }, null);\n}\nexport function extractGETParameters(url) {\n  var tmp = clean(url).split(/\\?(.*)?$/);\n  return [clean(tmp[0]), tmp.slice(1).join(\"\")];\n}\nexport function parseQuery(queryString) {\n  var query = {};\n  var pairs = queryString.split(\"&\");\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i].split(\"=\");\n\n    if (pair[0] !== \"\") {\n      var key = decodeURIComponent(pair[0]);\n\n      if (!query[key]) {\n        query[key] = decodeURIComponent(pair[1] || \"\");\n      } else {\n        if (!Array.isArray(query[key])) query[key] = [query[key]];\n        query[key].push(decodeURIComponent(pair[1] || \"\"));\n      }\n    }\n  }\n\n  return query;\n}\nexport function matchRoute(context, route) {\n  var _extractGETParameters = extractGETParameters(clean(context.currentLocationPath)),\n      current = _extractGETParameters[0],\n      GETParams = _extractGETParameters[1];\n\n  var params = GETParams === \"\" ? null : parseQuery(GETParams);\n  var paramNames = [];\n  var pattern;\n\n  if (isString(route.path)) {\n    pattern = START_BY_SLASH_REGEXP + clean(route.path).replace(PARAMETER_REGEXP, function (full, dots, name) {\n      paramNames.push(name);\n      return REPLACE_VARIABLE_REGEXP;\n    }).replace(WILDCARD_REGEXP, REPLACE_WILDCARD).replace(NOT_SURE_REGEXP, REPLACE_NOT_SURE) + \"$\";\n\n    if (clean(route.path) === \"\") {\n      if (clean(current) === \"\") {\n        return {\n          url: current,\n          queryString: GETParams,\n          hashString: extractHashFromURL(context.to),\n          route: route,\n          data: null,\n          params: params\n        };\n      }\n    }\n  } else {\n    pattern = route.path;\n  }\n\n  var regexp = new RegExp(pattern, MATCH_REGEXP_FLAGS);\n  var match = current.match(regexp);\n\n  if (match) {\n    var data = isString(route.path) ? regExpResultToParams(match, paramNames) : match.groups ? match.groups : match.slice(1);\n    return {\n      url: clean(current.replace(new RegExp(\"^\" + context.instance.root), \"\")),\n      queryString: GETParams,\n      hashString: extractHashFromURL(context.to),\n      route: route,\n      data: data,\n      params: params\n    };\n  }\n\n  return false;\n}\nexport function pushStateAvailable() {\n  return !!(typeof window !== \"undefined\" && window.history && window.history.pushState);\n}\nexport function undefinedOrTrue(obj, key) {\n  return typeof obj[key] === \"undefined\" || obj[key] === true;\n}\nexport function parseNavigateOptions(source) {\n  if (!source) return {};\n  var pairs = source.split(\",\");\n  var options = {};\n  var resolveOptions;\n  pairs.forEach(function (str) {\n    var temp = str.split(\":\").map(function (v) {\n      return v.replace(/(^ +| +$)/g, \"\");\n    });\n\n    switch (temp[0]) {\n      case \"historyAPIMethod\":\n        options.historyAPIMethod = temp[1];\n        break;\n\n      case \"resolveOptionsStrategy\":\n        if (!resolveOptions) resolveOptions = {};\n        resolveOptions.strategy = temp[1];\n        break;\n\n      case \"resolveOptionsHash\":\n        if (!resolveOptions) resolveOptions = {};\n        resolveOptions.hash = temp[1] === \"true\";\n        break;\n\n      case \"updateBrowserURL\":\n      case \"callHandler\":\n      case \"updateState\":\n      case \"force\":\n        options[temp[0]] = temp[1] === \"true\";\n        break;\n    }\n  });\n\n  if (resolveOptions) {\n    options.resolveOptions = resolveOptions;\n  }\n\n  return options;\n}\nexport function windowAvailable() {\n  return typeof window !== \"undefined\";\n}\nexport function accumulateHooks(hooks, result) {\n  if (hooks === void 0) {\n    hooks = [];\n  }\n\n  if (result === void 0) {\n    result = {};\n  }\n\n  hooks.filter(function (h) {\n    return h;\n  }).forEach(function (h) {\n    [\"before\", \"after\", \"already\", \"leave\"].forEach(function (type) {\n      if (h[type]) {\n        if (!result[type]) result[type] = [];\n        result[type].push(h[type]);\n      }\n    });\n  });\n  return result;\n}","export default function Q(funcs, c, done) {\n  var context = c || {};\n  var idx = 0;\n\n  (function next() {\n    if (!funcs[idx]) {\n      if (done) {\n        done(context);\n      }\n\n      return;\n    }\n\n    if (Array.isArray(funcs[idx])) {\n      funcs.splice.apply(funcs, [idx, 1].concat(funcs[idx][0](context) ? funcs[idx][1] : funcs[idx][2]));\n      next();\n    } else {\n      // console.log(funcs[idx].name + \" / \" + JSON.stringify(context));\n      // console.log(funcs[idx].name);\n      funcs[idx](context, function (moveForward) {\n        if (typeof moveForward === \"undefined\" || moveForward === true) {\n          idx += 1;\n          next();\n        } else if (done) {\n          done(context);\n        }\n      });\n    }\n  })();\n}\n\nQ[\"if\"] = function (condition, one, two) {\n  if (!Array.isArray(one)) one = [one];\n  if (!Array.isArray(two)) two = [two];\n  return [condition, one, two];\n};","import { getCurrentEnvURL } from \"../utils\";\nexport default function setLocationPath(context, done) {\n  if (typeof context.currentLocationPath === \"undefined\") {\n    context.currentLocationPath = context.to = getCurrentEnvURL(context.instance.root);\n  }\n\n  context.currentLocationPath = context.instance._checkForAHash(context.currentLocationPath);\n  done();\n}","import { matchRoute } from \"../utils\";\nexport default function matchPathToRegisteredRoutes(context, done) {\n  for (var i = 0; i < context.instance.routes.length; i++) {\n    var route = context.instance.routes[i];\n    var match = matchRoute(context, route);\n\n    if (match) {\n      if (!context.matches) context.matches = [];\n      context.matches.push(match);\n\n      if (context.resolveOptions.strategy === \"ONE\") {\n        done();\n        return;\n      }\n    }\n  }\n\n  done();\n}","export default function checkForDeprecationMethods(context, done) {\n  if (context.navigateOptions) {\n    if (typeof context.navigateOptions[\"shouldResolve\"] !== \"undefined\") {\n      console.warn(\"\\\"shouldResolve\\\" is deprecated. Please check the documentation.\");\n    }\n\n    if (typeof context.navigateOptions[\"silent\"] !== \"undefined\") {\n      console.warn(\"\\\"silent\\\" is deprecated. Please check the documentation.\");\n    }\n  }\n\n  done();\n}","export default function checkForForceOp(context, done) {\n  if (context.navigateOptions.force === true) {\n    context.instance._setCurrent([context.instance._pathToMatchObject(context.to)]);\n\n    done(false);\n  } else {\n    done();\n  }\n}","import { undefinedOrTrue, pushStateAvailable, windowAvailable } from \"../utils\";\nvar isWindowAvailable = windowAvailable();\nvar isPushStateAvailable = pushStateAvailable();\nexport default function updateBrowserURL(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"updateBrowserURL\")) {\n    var value = (\"/\" + context.to).replace(/\\/\\//g, \"/\"); // making sure that we don't have two slashes\n\n    var isItUsingHash = isWindowAvailable && context.resolveOptions && context.resolveOptions.hash === true;\n\n    if (isPushStateAvailable) {\n      history[context.navigateOptions.historyAPIMethod || \"pushState\"](context.navigateOptions.stateObj || {}, context.navigateOptions.title || \"\", isItUsingHash ? \"#\" + value : value); // This is to solve a nasty bug where the page doesn't scroll to the anchor.\n      // We set a microtask to update the hash only.\n\n      if (location && location.hash) {\n        context.instance.__freezeListening = true;\n        setTimeout(function () {\n          if (!isItUsingHash) {\n            var tmp = location.hash;\n            location.hash = \"\";\n            location.hash = tmp;\n          }\n\n          context.instance.__freezeListening = false;\n        }, 1);\n      }\n    } else if (isWindowAvailable) {\n      window.location.href = context.to;\n    }\n  }\n\n  done();\n}","import Q from \"../Q\";\nimport { undefinedOrTrue } from \"../utils\";\nexport default function checkForLeaveHook(context, done) {\n  var instance = context.instance;\n\n  if (!instance.lastResolved()) {\n    done();\n    return;\n  }\n\n  Q(instance.lastResolved().map(function (oldMatch) {\n    return function (_, leaveLoopDone) {\n      // no leave hook\n      if (!oldMatch.route.hooks || !oldMatch.route.hooks.leave) {\n        leaveLoopDone();\n        return;\n      }\n\n      var runHook = false;\n      var newLocationVSOldMatch = context.instance.matchLocation(oldMatch.route.path, context.currentLocationPath, false);\n\n      if (oldMatch.route.path !== \"*\") {\n        runHook = !newLocationVSOldMatch;\n      } else {\n        var someOfTheLastOnesMatch = context.matches ? context.matches.find(function (match) {\n          return oldMatch.route.path === match.route.path;\n        }) : false;\n        runHook = !someOfTheLastOnesMatch;\n      }\n\n      if (undefinedOrTrue(context.navigateOptions, \"callHooks\") && runHook) {\n        Q(oldMatch.route.hooks.leave.map(function (f) {\n          // just so we match the Q interface\n          return function (_, d) {\n            return f(function (shouldStop) {\n              if (shouldStop === false) {\n                context.instance.__markAsClean(context);\n              } else {\n                d();\n              }\n            }, context.matches && context.matches.length > 0 ? context.matches.length === 1 ? context.matches[0] : context.matches : undefined);\n          };\n        }).concat([function () {\n          return leaveLoopDone();\n        }]));\n        return;\n      } else {\n        leaveLoopDone();\n      }\n    };\n  }), {}, function () {\n    return done();\n  });\n}","import Q from \"../Q\";\nimport { undefinedOrTrue } from \"../utils\";\nexport default function checkForBeforeHook(context, done) {\n  if (context.match.route.hooks && context.match.route.hooks.before && undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n    Q(context.match.route.hooks.before.map(function (f) {\n      // just so we match the Q interface\n      return function beforeHookInternal(_, d) {\n        return f(function (shouldStop) {\n          if (shouldStop === false) {\n            context.instance.__markAsClean(context);\n          } else {\n            d();\n          }\n        }, context.match);\n      };\n    }).concat([function () {\n      return done();\n    }]));\n  } else {\n    done();\n  }\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function callHandler(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"callHandler\")) {\n    context.match.route.handler(context.match);\n  }\n\n  context.instance.updatePageLinks();\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function checkForAfterHook(context, done) {\n  if (context.match.route.hooks && context.match.route.hooks.after && undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n    context.match.route.hooks.after.forEach(function (f) {\n      return f(context.match);\n    });\n  }\n\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function checkForAlreadyHook(context, done) {\n  var current = context.instance.lastResolved();\n\n  if (current && current[0] && current[0].route === context.match.route && current[0].url === context.match.url && current[0].queryString === context.match.queryString) {\n    current.forEach(function (c) {\n      if (c.route.hooks && c.route.hooks.already) {\n        if (undefinedOrTrue(context.navigateOptions, \"callHooks\")) {\n          c.route.hooks.already.forEach(function (f) {\n            return f(context.match);\n          });\n        }\n      }\n    });\n    done(false);\n    return;\n  }\n\n  done();\n}","import { parseQuery, extractGETParameters, clean, extractHashFromURL } from \"../utils\";\nexport default function checkForNotFoundHandler(context, done) {\n  var notFoundRoute = context.instance._notFoundRoute;\n\n  if (notFoundRoute) {\n    context.notFoundHandled = true;\n\n    var _extractGETParameters = extractGETParameters(context.currentLocationPath),\n        url = _extractGETParameters[0],\n        queryString = _extractGETParameters[1];\n\n    var hashString = extractHashFromURL(context.to);\n    notFoundRoute.path = clean(url);\n    var notFoundMatch = {\n      url: notFoundRoute.path,\n      queryString: queryString,\n      hashString: hashString,\n      data: null,\n      route: notFoundRoute,\n      params: queryString !== \"\" ? parseQuery(queryString) : null\n    };\n    context.matches = [notFoundMatch];\n    context.match = notFoundMatch;\n  }\n\n  done();\n}","export default function errorOut(context, done) {\n  if (!context.resolveOptions || context.resolveOptions.noMatchWarning === false || typeof context.resolveOptions.noMatchWarning === \"undefined\") console.warn(\"Navigo: \\\"\" + context.currentLocationPath + \"\\\" didn't match any of the registered routes.\");\n  done();\n}","export default function flushCurrent(context, done) {\n  context.instance._setCurrent(null);\n\n  done();\n}","import { undefinedOrTrue } from \"../utils\";\nexport default function updateState(context, done) {\n  if (undefinedOrTrue(context.navigateOptions, \"updateState\")) {\n    context.instance._setCurrent(context.matches);\n  }\n\n  done();\n}","import Q from \"./Q\";\nimport checkForLeaveHook from \"./middlewares/checkForLeaveHook\";\nimport checkForBeforeHook from \"./middlewares/checkForBeforeHook\";\nimport callHandler from \"./middlewares/callHandler\";\nimport checkForAfterHook from \"./middlewares/checkForAfterHook\";\nimport checkForAlreadyHook from \"./middlewares/checkForAlreadyHook\";\nimport checkForNotFoundHandler from \"./middlewares/checkForNotFoundHandler\";\nimport errorOut from \"./middlewares/errorOut\";\nimport flushCurrent from \"./middlewares/flushCurrent\";\nimport updateState from \"./middlewares/updateState\";\nexport var foundLifecycle = [checkForAlreadyHook, checkForBeforeHook, callHandler, checkForAfterHook];\nexport var notFoundLifeCycle = [checkForLeaveHook, checkForNotFoundHandler, Q[\"if\"](function (_ref) {\n  var notFoundHandled = _ref.notFoundHandled;\n  return notFoundHandled;\n}, foundLifecycle.concat([updateState]), [errorOut, flushCurrent])];","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport Q from \"../Q\";\nimport { foundLifecycle } from \"../lifecycles\";\nimport updateState from \"./updateState\";\nimport checkForLeaveHook from \"./checkForLeaveHook\";\nexport default function processMatches(context, done) {\n  var idx = 0;\n\n  function nextMatch() {\n    if (idx === context.matches.length) {\n      updateState(context, done);\n      return;\n    }\n\n    Q(foundLifecycle, _extends({}, context, {\n      match: context.matches[idx]\n    }), function end() {\n      idx += 1;\n      nextMatch();\n    });\n  }\n\n  checkForLeaveHook(context, nextMatch);\n}","export default function waitingList(context) {\n  context.instance.__markAsClean(context);\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { pushStateAvailable, matchRoute, parseQuery, extractGETParameters, isFunction, isString, clean, parseNavigateOptions, windowAvailable, getCurrentEnvURL, accumulateHooks, extractHashFromURL } from \"./utils\";\nimport Q from \"./Q\";\nimport setLocationPath from \"./middlewares/setLocationPath\";\nimport matchPathToRegisteredRoutes from \"./middlewares/matchPathToRegisteredRoutes\";\nimport checkForDeprecationMethods from \"./middlewares/checkForDeprecationMethods\";\nimport checkForForceOp from \"./middlewares/checkForForceOp\";\nimport updateBrowserURL from \"./middlewares/updateBrowserURL\";\nimport processMatches from \"./middlewares/processMatches\";\nimport waitingList from \"./middlewares/waitingList\";\nimport { notFoundLifeCycle } from \"./lifecycles\";\nvar DEFAULT_LINK_SELECTOR = \"[data-navigo]\";\nexport default function Navigo(appRoute, options) {\n  var DEFAULT_RESOLVE_OPTIONS = options || {\n    strategy: \"ONE\",\n    hash: false,\n    noMatchWarning: false,\n    linksSelector: DEFAULT_LINK_SELECTOR\n  };\n  var self = this;\n  var root = \"/\";\n  var current = null;\n  var routes = [];\n  var destroyed = false;\n  var genericHooks;\n  var isPushStateAvailable = pushStateAvailable();\n  var isWindowAvailable = windowAvailable();\n\n  if (!appRoute) {\n    console.warn('Navigo requires a root path in its constructor. If not provided will use \"/\" as default.');\n  } else {\n    root = clean(appRoute);\n  }\n\n  function _checkForAHash(url) {\n    if (url.indexOf(\"#\") >= 0) {\n      if (DEFAULT_RESOLVE_OPTIONS.hash === true) {\n        url = url.split(\"#\")[1] || \"/\";\n      } else {\n        url = url.split(\"#\")[0];\n      }\n    }\n\n    return url;\n  }\n\n  function composePathWithRoot(path) {\n    return clean(root + \"/\" + clean(path));\n  }\n\n  function createRoute(path, handler, hooks, name) {\n    path = isString(path) ? composePathWithRoot(path) : path;\n    return {\n      name: name || clean(String(path)),\n      path: path,\n      handler: handler,\n      hooks: accumulateHooks(hooks)\n    };\n  } // public APIs\n\n\n  function on(path, handler, hooks) {\n    var _this = this;\n\n    if (typeof path === \"object\" && !(path instanceof RegExp)) {\n      Object.keys(path).forEach(function (p) {\n        if (typeof path[p] === \"function\") {\n          _this.on(p, path[p]);\n        } else {\n          var _path$p = path[p],\n              _handler = _path$p.uses,\n              name = _path$p.as,\n              _hooks = _path$p.hooks;\n          routes.push(createRoute(p, _handler, [genericHooks, _hooks], name));\n        }\n      });\n      return this;\n    } else if (typeof path === \"function\") {\n      hooks = handler;\n      handler = path;\n      path = root;\n    }\n\n    routes.push(createRoute(path, handler, [genericHooks, hooks]));\n    return this;\n  }\n\n  function resolve(to, options) {\n    if (self.__dirty) {\n      self.__waiting.push(function () {\n        return self.resolve(to, options);\n      });\n\n      return;\n    } else {\n      self.__dirty = true;\n    }\n\n    to = to ? clean(root) + \"/\" + clean(to) : undefined; // console.log(\"-- resolve --> \" + to, self.__dirty);\n\n    var context = {\n      instance: self,\n      to: to,\n      currentLocationPath: to,\n      navigateOptions: {},\n      resolveOptions: _extends({}, DEFAULT_RESOLVE_OPTIONS, options)\n    };\n    Q([setLocationPath, matchPathToRegisteredRoutes, Q[\"if\"](function (_ref) {\n      var matches = _ref.matches;\n      return matches && matches.length > 0;\n    }, processMatches, notFoundLifeCycle)], context, waitingList);\n    return context.matches ? context.matches : false;\n  }\n\n  function navigate(to, navigateOptions) {\n    // console.log(\"-- navigate --> \" + to, self.__dirty);\n    if (self.__dirty) {\n      self.__waiting.push(function () {\n        return self.navigate(to, navigateOptions);\n      });\n\n      return;\n    } else {\n      self.__dirty = true;\n    }\n\n    to = clean(root) + \"/\" + clean(to);\n    var context = {\n      instance: self,\n      to: to,\n      navigateOptions: navigateOptions || {},\n      resolveOptions: navigateOptions && navigateOptions.resolveOptions ? navigateOptions.resolveOptions : DEFAULT_RESOLVE_OPTIONS,\n      currentLocationPath: _checkForAHash(to)\n    };\n    Q([checkForDeprecationMethods, checkForForceOp, matchPathToRegisteredRoutes, Q[\"if\"](function (_ref2) {\n      var matches = _ref2.matches;\n      return matches && matches.length > 0;\n    }, processMatches, notFoundLifeCycle), updateBrowserURL, waitingList], context, waitingList);\n  }\n\n  function navigateByName(name, data, options) {\n    var url = generate(name, data);\n\n    if (url !== null) {\n      navigate(url.replace(new RegExp(\"^/?\" + root), \"\"), options);\n      return true;\n    }\n\n    return false;\n  }\n\n  function off(what) {\n    this.routes = routes = routes.filter(function (r) {\n      if (isString(what)) {\n        return clean(r.path) !== clean(what);\n      } else if (isFunction(what)) {\n        return what !== r.handler;\n      }\n\n      return String(r.path) !== String(what);\n    });\n    return this;\n  }\n\n  function listen() {\n    if (isPushStateAvailable) {\n      this.__popstateListener = function () {\n        if (!self.__freezeListening) {\n          resolve();\n        }\n      };\n\n      window.addEventListener(\"popstate\", this.__popstateListener);\n    }\n  }\n\n  function destroy() {\n    this.routes = routes = [];\n\n    if (isPushStateAvailable) {\n      window.removeEventListener(\"popstate\", this.__popstateListener);\n    }\n\n    this.destroyed = destroyed = true;\n  }\n\n  function notFound(handler, hooks) {\n    self._notFoundRoute = createRoute(\"*\", handler, [genericHooks, hooks], \"__NOT_FOUND__\");\n    return this;\n  }\n\n  function updatePageLinks() {\n    if (!isWindowAvailable) return;\n    findLinks().forEach(function (link) {\n      if (\"false\" === link.getAttribute(\"data-navigo\") || \"_blank\" === link.getAttribute(\"target\")) {\n        if (link.hasListenerAttached) {\n          link.removeEventListener(\"click\", link.navigoHandler);\n        }\n\n        return;\n      }\n\n      if (!link.hasListenerAttached) {\n        link.hasListenerAttached = true;\n\n        link.navigoHandler = function (e) {\n          if ((e.ctrlKey || e.metaKey) && e.target.tagName.toLowerCase() === \"a\") {\n            return false;\n          }\n\n          var location = link.getAttribute(\"href\");\n\n          if (typeof location === \"undefined\" || location === null) {\n            return false;\n          } // handling absolute paths\n\n\n          if (location.match(/^(http|https)/) && typeof URL !== \"undefined\") {\n            try {\n              var u = new URL(location);\n              location = u.pathname + u.search;\n            } catch (err) {}\n          }\n\n          var options = parseNavigateOptions(link.getAttribute(\"data-navigo-options\"));\n\n          if (!destroyed) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.navigate(clean(location), options);\n          }\n        };\n\n        link.addEventListener(\"click\", link.navigoHandler);\n      }\n    });\n    return self;\n  }\n\n  function findLinks() {\n    if (isWindowAvailable) {\n      return [].slice.call(document.querySelectorAll(DEFAULT_RESOLVE_OPTIONS.linksSelector || DEFAULT_LINK_SELECTOR));\n    }\n\n    return [];\n  }\n\n  function link(path) {\n    return \"/\" + root + \"/\" + clean(path);\n  }\n\n  function setGenericHooks(hooks) {\n    genericHooks = hooks;\n    return this;\n  }\n\n  function lastResolved() {\n    return current;\n  }\n\n  function generate(name, data, options) {\n    var route = routes.find(function (r) {\n      return r.name === name;\n    });\n    var result = null;\n\n    if (route) {\n      result = route.path;\n\n      if (data) {\n        for (var key in data) {\n          result = result.replace(\":\" + key, data[key]);\n        }\n      }\n\n      result = !result.match(/^\\//) ? \"/\" + result : result;\n    }\n\n    if (result && options && !options.includeRoot) {\n      result = result.replace(new RegExp(\"^/\" + root), \"\");\n    }\n\n    return result;\n  }\n\n  function getLinkPath(link) {\n    return link.getAttribute(\"href\");\n  }\n\n  function pathToMatchObject(path) {\n    var _extractGETParameters = extractGETParameters(clean(path)),\n        url = _extractGETParameters[0],\n        queryString = _extractGETParameters[1];\n\n    var params = queryString === \"\" ? null : parseQuery(queryString);\n    var hashString = extractHashFromURL(path);\n    var route = createRoute(url, function () {}, [genericHooks], url);\n    return {\n      url: url,\n      queryString: queryString,\n      hashString: hashString,\n      route: route,\n      data: null,\n      params: params\n    };\n  }\n\n  function getCurrentLocation() {\n    return pathToMatchObject(clean(getCurrentEnvURL(root)).replace(new RegExp(\"^\" + root), \"\"));\n  }\n\n  function directMatchWithRegisteredRoutes(path) {\n    var context = {\n      instance: self,\n      currentLocationPath: path,\n      to: path,\n      navigateOptions: {},\n      resolveOptions: DEFAULT_RESOLVE_OPTIONS\n    };\n    matchPathToRegisteredRoutes(context, function () {});\n    return context.matches ? context.matches : false;\n  }\n\n  function directMatchWithLocation(path, currentLocation, annotatePathWithRoot) {\n    if (typeof currentLocation !== \"undefined\" && (typeof annotatePathWithRoot === \"undefined\" || annotatePathWithRoot)) {\n      currentLocation = composePathWithRoot(currentLocation);\n    }\n\n    var context = {\n      instance: self,\n      to: currentLocation,\n      currentLocationPath: currentLocation\n    };\n    setLocationPath(context, function () {});\n\n    if (typeof path === \"string\") {\n      path = typeof annotatePathWithRoot === \"undefined\" || annotatePathWithRoot ? composePathWithRoot(path) : path;\n    }\n\n    var match = matchRoute(context, {\n      name: String(path),\n      path: path,\n      handler: function handler() {},\n      hooks: {}\n    });\n    return match ? match : false;\n  }\n\n  function addHook(type, route, func) {\n    if (typeof route === \"string\") {\n      route = getRoute(route);\n    }\n\n    if (route) {\n      if (!route.hooks[type]) route.hooks[type] = [];\n      route.hooks[type].push(func);\n      return function () {\n        route.hooks[type] = route.hooks[type].filter(function (f) {\n          return f !== func;\n        });\n      };\n    } else {\n      console.warn(\"Route doesn't exists: \" + route);\n    }\n\n    return function () {};\n  }\n\n  function getRoute(nameOrHandler) {\n    if (typeof nameOrHandler === \"string\") {\n      return routes.find(function (r) {\n        return r.name === composePathWithRoot(nameOrHandler);\n      });\n    }\n\n    return routes.find(function (r) {\n      return r.handler === nameOrHandler;\n    });\n  }\n\n  function __markAsClean(context) {\n    context.instance.__dirty = false;\n\n    if (context.instance.__waiting.length > 0) {\n      context.instance.__waiting.shift()();\n    }\n  }\n\n  this.root = root;\n  this.routes = routes;\n  this.destroyed = destroyed;\n  this.current = current;\n  this.__freezeListening = false;\n  this.__waiting = [];\n  this.__dirty = false;\n  this.__markAsClean = __markAsClean;\n  this.on = on;\n  this.off = off;\n  this.resolve = resolve;\n  this.navigate = navigate;\n  this.navigateByName = navigateByName;\n  this.destroy = destroy;\n  this.notFound = notFound;\n  this.updatePageLinks = updatePageLinks;\n  this.link = link;\n  this.hooks = setGenericHooks;\n\n  this.extractGETParameters = function (url) {\n    return extractGETParameters(_checkForAHash(url));\n  };\n\n  this.lastResolved = lastResolved;\n  this.generate = generate;\n  this.getLinkPath = getLinkPath;\n  this.match = directMatchWithRegisteredRoutes;\n  this.matchLocation = directMatchWithLocation;\n  this.getCurrentLocation = getCurrentLocation;\n  this.addBeforeHook = addHook.bind(this, \"before\");\n  this.addAfterHook = addHook.bind(this, \"after\");\n  this.addAlreadyHook = addHook.bind(this, \"already\");\n  this.addLeaveHook = addHook.bind(this, \"leave\");\n  this.getRoute = getRoute;\n  this._pathToMatchObject = pathToMatchObject;\n  this._clean = clean;\n  this._checkForAHash = _checkForAHash;\n\n  this._setCurrent = function (c) {\n    return current = self.current = c;\n  };\n\n  listen.call(this);\n  updatePageLinks.call(this);\n}","import { renderDefaultPage } from \"../pages/courthive/default\";\nimport Navigo from \"navigo\";\nexport function router() {\n    const routerRoot = window.location.host.startsWith(\"localhost\")\n        ? \"/\"\n        : process.env.PUBLIC_URL ?? \"/\";\n    const useHash = true;\n    const router = new Navigo(useHash ? \"/\" : `/${routerRoot}`, {\n        hash: useHash,\n    });\n    router.on(`/default`, () => renderDefaultPage(false));\n    router.notFound(() => {\n        router.navigate(\"/default\");\n    });\n    router.resolve();\n}\n","import { init } from './transition/init.ts';\nimport { router } from './router/router';\n\ninit();\nrouter();\n"],"names":["_hasLocalStorageSupport","_readCookie","name","nameEQ","ca","i","c","_writeCookie","value","days","expiration","date","browserStorage","isJSON","str","showModal","text","data","modalText","c2c","modal","firstAndLast","parts","display","getOpponents","match","format","sides","e","teamName","side","attemptJSONparse","formatDate","separator","d","month","day","year","generateRange","start","end","_","k","findUpClass","el","class_name","umo","defaultPointParser","formats","type","code","description","tiebreak","hasDecider","threshold","minDiff","children","decidingChild","hasType","hasCode","index","object","parent_object","child","common","so","fx","action","episode","set","points","point","point_history","counters","score","map","team","counter","force","beyondDoubleThreshold","last_child","descendent","last_first_service","next_first_service","min_diff","countersAtValue","deciding_child_required","total_children","new_child","source_format","copyAttributes","source","target","attributes","attribute","addPoint","server","points_to_game","has_game_point","points_to_set","values","last_point","last_points","attempt","change","p","f","result","player","points_to_player","added","rejected","indices","numbersArray","past_threshold","value_difference","winner","v","m","progression","adProgression","noAdProgression","key","point_value","count","undo","undo_actions","undone","common_episode","last_child_complete","params","perspective","loser","pts","deciding_game","score_difference","deciding_game_format_required","games_to_set","player_score","opponent_score","last_game","player_games_to_set","points_needed","formatScore","p0score","p1score","t0score","t1score","last_game_score","tiebreak_score","game","deciding_point","scoreboard","opponent_points","opponent_point","teams","score_object","winning_team","serving_team","parseCode","parseScore","upper_code","modifier","last_score","combinedTotal","a","b","last_values","mf","sf","gf","plural","fo","format_type","players","has_decider","number_of_players","addPoint_events","undo_events","reset_events","metadata","stat_points","last_episode","filtered_stats","accessors","order","changeOrder","birth","puid","hand","seed","rank","age","entry","ioc","draw_position","definition","tuid","start_date","tour","surface","in_out","draw","draw_size","round","level","muid","gender","court","start_time","end_time","duration","status","umpire","official_score","first_service","calcTiebreakService","submitted","counterpart","sameOrder","o","notXinY","x","y","n","no_format_change","new_teams","serviceToOpponent","opponents","sameTeam","s","number","calcNext","last_position","pos","next_position","last_service","pub","setServiceOrder","existing_order","new_order","addEvent","add_event","undoEvent","undo_event","resetEvent","reset_event","clearEvents","parser","service","history","set_filter","calculatedStats","episodes","server_team","team_winner","team_loser","addStat","grouping","group","stat","stats","calculated_stats","reduceComponents","components","component","component_team","numeratorDenominator","stat_obj","numerator","denominator","displayPct","pct","stat_calcs","current","max_consecutive","consecutive","diff","point_counts","total_points","teams_counters","required_counters","team_stats","mo","ch_version","charts","app","settings","env","c1","c2","c3","buttons","options","device","default_players","clearActionEvents","updatePositions","left_side","right_side","updateMatchArchive","player_names","p1","p2","element","match_id","match_archive","match_object","restoreAppState","app_settings","em","app_state","updateAppState","setOrientation","formatChangePossible","displayPointHistory","games","groupGames","html","gameEntry","matchDuration","phFrame","point_episodes","game_counter","current_game","game_score","servergame","pointEntry","evenodd","point_score","player_initials","shot_by","point_hand","point_result","point_description","rally","timestamps","seconds","HHMMSS","sec_num","hours","minutes","closeModal","updateScore","sets_counter","games_counter","field","sets","max_games","loadDetails","detail","target_id","match_details","tid","tournament","stateChangeEvent","updateState","visibleButtons","div","status_message","statusMessage","swapServer","resetButtons","server_side","receiver_side","server_mode","server_fault","server_ace","server_let","receiver_mode","receiver_ufe","receiver_winner","receiver_forced","game_number","swapSides","setCourtSide","changeTextColor","changeClassDisplay","classes","obj","className","checkPlayerName","keypress","player_hand","changePlayerName","player_name","editMatchDetails","matchDetails","detailContent","exportImage","recycleImage","modalExport","selector","match_data","header","save","copy","modaltext","util","newclass","re","SwipeList","opt","swipeLeft","swipeRight","instances","instance","moveX","moveY","moveStart","leftpx","rightpx","button","btn","abtn","img","event","inst","touches","nowX","nowY","defineActionEvents","resetStyles","id","resetButton","UUID","lut","d0","d1","d2","d3","loadMatch","view","viewManager","json","mdFormat","displayMatchArchive","active","item","newMatch","archiveEntry","ma_elem","_b","_a","deleteMatch","current_match_id","archive_id","resetMatch","force_format","months","display_date","display_players","match_score","match_format","displayFormats","format_types","formatEntry","matchFormatList","ascending$1","bisector","compare","ascendingComparator","lo","hi","mid","ascending","ascendingBisect","bisectRight","sequence","stop","step","range","e10","e5","e2","ticks","tickStep","step0","step1","error","slice","identity$2","top","right","bottom","left","epsilon","translateX","scale0","scale1","translateY","center","scale","offset","entering","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","context","identity","spacing","transform","range0","range1","position","selection","path","tick","tickExit","tickEnter","line","axisBottom","axisLeft","noop","dispatch","t","Dispatch","parseTypenames","typenames","types","typename","callback","T","get","that","args","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","creator","nextId","Local","node","matcher","vendorMatches","matcher$1","filterEvents","filterContextListener","listener","contextListener","related","event1","onRemove","on","j","onAdd","capture","wrap","selection_on","none","selection_select","select","groups","subgroups","subgroup","subnode","Selection","empty","selectorAll","selection_selectAll","parents","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","next","constant$3","keyPrefix","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_merge","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","window$1","styleRemove","styleConstant","priority","styleFunction","selection_style","defaultView","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_datum","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","root","selectAll","define","constructor","factory","prototype","extend","Color","darker","brighter","reI","reN","reP","reHex3","reHex6","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","Rgb","rgbn","rgba","hsla","r","g","rgbConvert","rgb","opacity","h","l","Hsl","hslConvert","min","max","hsl","m2","hsl2rgb","deg2rad","rad2deg","Kn","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","rgb2xyz","xyz2lab","z","lab","lab2xyz","xyz2rgb","hclConvert","hcl","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","constant$2","linear","exponential","hue","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","array$1","nb","na","reinterpolate","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","interpolateValue","array","interpolateRound","degrees","decompose","scaleX","scaleY","skewX","cssNode","cssRoot","cssView","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","interpolateTransformCss","interpolateTransformSvg","colorHcl","hcl$1","cubehelixGamma","colorCubehelix","cubehelixLong","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","self","tween","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","interpolateNumber","value1","value00","interpolate0","value0","value10","transition_attr","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","style","styleRemoveEnd","transition_style","styleTween","transition_styleTween","transition_text","transition_transition","id0","id1","newId","selection_prototype","cubicInOut","exponent","custom","polyIn","polyOut","polyInOut","overshoot","backIn","backOut","backInOut","tau","amplitude","period","elasticIn","elasticOut","elasticInOut","defaultTiming","easeCubicInOut","selection_transition","pi","tauEpsilon","Path","x1","y1","x2","y2","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","t01","t21","a0","a1","ccw","dx","dy","cw","da","w","Map","property","keys","entries","Set","proto","objectConverter","columns","customConverter","row","inferColumns","rows","columnSet","column","dsv","delimiter","reFormat","delimiterCode","convert","parseRows","EOL","EOF","N","I","eol","token","formatValue","formatRows","formatRow","tree_add","add","tree","leaf","xm","ym","xp","yp","addAll","xz","yz","tree_cover","tree_data","tree_extent","Quad","tree_find","radius","x3","y3","quads","tree_remove","retainer","removeAll","tree_root","tree_size","tree_visit","tree_visitAfter","tree_x","tree_y","Quadtree","leaf_copy","treeProto","tree_addAll","tree_removeAll","formatDecimal","coefficient","formatGroup","thousands","width","length","formatDefault","out","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","formatSpecifier","specifier","FormatSpecifier","fill","align","sign","symbol","comma","precision","prefixes","formatLocale$1","locale","currency","decimal","newFormat","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","padding","formatPrefix","defaultLocale","formatLocale","precisionFixed","precisionPrefix","precisionRound","adder","Adder","temp","bv","av","rotationIdentity","lambda","phi","TransformStream","equirectangularRaw","sum","node_count","node_each","node_eachBefore","node_eachAfter","node_sum","node_sort","node_path","ancestor","leastCommonAncestor","aNodes","bNodes","node_ancestors","node_descendants","node_leaves","leaves","node_links","links","hierarchy","Node","valued","childs","defaultChildren","computeHeight","node_copy","copyData","height","treemapDice","treemapSlice","squarifyRatio","ratio","nodeValue","sumValue","minValue","maxValue","newRatio","minRatio","alpha","beta","squarify","resquarify","noabort","Queue","abort","results","maybeNotify","implicit","ordinal","domain","unknown","band","ordinalRange","bandwidth","paddingInner","paddingOuter","rescale","reverse","pointish","constant$1","unit","deinterpolateLinear","deinterpolateClamp","deinterpolate","reinterpolateClamp","bimap","r0","r1","polymap","bisect","continuous","clamp","piecewise","output","input","linearish","newInterval","floori","offseti","test","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","second","minute","hour","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","utcMinute","utcHour","utcDay","utcWeekday","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcMonth","utcYear","localDate","utcDate","newYear","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formatShortWeekday","formatWeekday","formatShortMonth","formatMonth","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatPeriod","formatSeconds","formatWeekNumberSunday","formatWeekdayNumber","formatWeekNumberMonday","formatYear","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCPeriod","formatUTCSeconds","formatUTCWeekNumberSunday","formatUTCWeekdayNumber","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseDayOfMonth","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parsePeriod","parseSeconds","parseWeekNumberSunday","parseWeekdayNumber","parseWeekNumberMonday","parseLocaleDate","parseLocaleTime","parseYear","parseFullYear","parseZone","parseLiteralPercent","pad","pads","newParse","newDate","parseSpecifier","numberRe","percentRe","requoteRe","requote","timeDay","timeYear","timeSunday","timeMonday","utcFormat","utcParse","isoSpecifier","formatIsoNative","parseIsoNative","colors","interpolateCubehelixLong","ramp","Linear","curveLinear","pointX","pointY","defined","curve","defined0","buffer","Basis","Bundle","bundle","Cardinal","tension","cardinal","CardinalClosed","CardinalOpen","CatmullRom","x23","y23","catmullRom","CatmullRomClosed","CatmullRomOpen","slope3","h0","h1","s0","s1","slope2","MonotoneX","RedBlackTree","RedBlackNode","after","grandpa","uncle","RedBlackFirst","RedBlackRotateLeft","RedBlackRotateRight","sibling","red","createEdge","v0","v1","edge","edges","setEdgeEnd","cells","createBorderEdge","vertex","clipEdge","ax","ay","bx","by","connectEdge","lx","ly","rx","ry","fy","fm","fb","clipEdges","createCell","site","cellHalfedgeAngle","cell","va","vb","cellHalfedgeStart","cellHalfedgeEnd","sortCellHalfedges","halfedges","clipCells","nCells","iCell","iHalfedge","nHalfedges","startX","startY","endX","endY","cover","dc","v00","v01","v11","v10","circlePool","firstCircle","Circle","attachCircle","arc","lArc","rArc","lSite","cSite","rSite","cx","cy","epsilon2","ha","hc","circle","circles","detachCircle","beachPool","Beach","createBeach","beach","detachBeach","beaches","removeBeach","disappearing","nArcs","iArc","addBeach","directrix","dxl","dxr","leftBreakPoint","rightBreakPoint","newArc","hb","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","triangleArea","lexicographic","Diagram","sites","extent","polygon","triangles","e1","vx","vy","v2","Transform","location","strokeSlider","show","stroke_slider","slideRight","slideLeft","hideSlide","d3.range","d3.selectAll","supportsPassive","opts","behaviors","handleTouchStart","handleTouchMove","swipeTouchEnd","pressAndHoldEnd","preventDrag","preventDoubleTap","evt","last_touch","xDown","yDown","xDiff","yDiff","timeDown","touch_target","xUp","yUp","findAncestor","cls","timeDiff","touchManager","simpleChart","dom_parent","d3.select","screen_width","screen_height","min_points","svg","margin","d3.scaleLinear","d3.line","chart","maxY","d3.axisBottom","d3.axisLeft","drawLines","appendCircles","lineData","targetclass","updateStats","statselectors","stripModifiers","statView","left_display","right_display","numerators","statclass","table","left_results","right_results","stroke","statLines","addCharts","player_points","changeDisplay","new_view","views","activate","menuMatchArchive","menuMatchFormat","menuChangeServer","noAd","view_keys","gameFish","fish_width","fish_height","coords","last_coords","images","default_colors","events","fishFrame","bars","fish","dims","multiplier","max_rally","vert","fish_offset","fish_length","midpoint","sw","rw","cell_size","offset_divisor","cell_offset","cell_length","diag","grid_data","grid_labels","grid_side","label","gscoreT","gridcells","lineWidth","gridCT","gamecells","gameCT","zX","zY","circleRadius","oScale","lScale","d3.scaleBand","rally_bars","rallyTstart","rallyT","rallyCalc","set_score","sscoreT","ssb","ssbT","serves","first_serve","serve_outcomes","sX","sY","colorShot","service_box","sBoxT","returns","rX","rY","colorReturn","findOffset","cL","rO","rL","sO","sL","zO","zL","keyWalk","valuesObject","optionsObject","vKeys","oKeys","oo","vo","functions","color3s","momentumChart","fish_school","momentumFrame","all_games","cellSize","score_lines","new_coords","showImages","hideImages","midline","scoreLines","score_text","scoreText","scores","scoreT","maxDiff","max_diff","cumulative","gameTree","applyMax","arr","applyMin","canvas","transition_time","point_connector","selectView","counterCalcs","tree_width","tree_height","point_lines","point_min","point_max","gradients","get_id","point_stops","calcStops","lines","ulines","under_lines","point_circles","colorShade","getHexColor","point_text","labels","label_text","selectors","clearView","_data","selected","previous_episode","calcPosition","winners","errors","winner_pct","u_pct","c_start","c_dist","r_start","r_dist","shadeColor2","percent","R","G","shadeRGBColor","colorStr","ptsMatch","pts_sets","pts_charts","ptsChart","true_height","colores","max_width_points","matchObject","set_data","game_data","ptsHover","set_winner","resize","range_start","pts_max","pts_start","longest_rally","displayScore","xScale","calcWidth","pointScale","yScale","set_box","boxWidth","game_boundaries","game_boxes","lineGen","pts_lines","bp_data","bp_wrappers","breakpoints","add_index","points_index","barsX","bX","point_bars","lastName","split","legend","win_pct","err_pct","rally_pct","dl","vKey","sKeys","osKeys","sKey","set_object","fKeys","eKeys","fKey","configureViz","pcolors","showGame","showGameFish","closeGameFish","gFish","vizUpdate","direction","orientationEvent","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","isView","encodePacket","supportsBinary","encodeBlobAsBase64","fileReader","content","toArray","TEXT_ENCODER","encodePacketToBinary","packet","encoded","chars","lookup","decode","base64","bufferLength","len","encoded1","encoded2","encoded3","encoded4","arraybuffer","bytes","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","decoded","SEPARATOR","encodePayload","packets","encodedPackets","decodePayload","encodedPayload","decodedPacket","createPacketEncoderStream","controller","payloadLength","TEXT_DECODER","totalLength","chunks","acc","chunk","concatChunks","createPacketDecoderStream","maxPayload","state","expectedLength","isBinary","headerArray","protocol","Emitter","mixin","fn","callbacks","cb","globalThisShim","pick","attr","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","BASE64_OVERHEAD","byteLength","utf8Length","encode","qs","qry","pairs","pair","TransportError","reason","Transport","details","onPause","schema","query","hostname","encodedQuery","alphabet","prev","num","yeast","hasCORS","XHR","xdomain","hasXHR2","XMLHttpRequest","Polling","isSSL","port","forceBase64","pause","total","close","Request","req","xhrStatus","xhr","err","fromError","unloadHandler","terminationEvent","nextTick","setTimeoutFn","WebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","WS","protocols","closeEvent","ev","lastPacket","WT","stream","decoderStream","reader","encoderStream","read","done","transports","src","pathNames","queryKey","regx","$0","$1","$2","Socket","transport","failed","onTransportOpen","msg","cleanup","freezeTransport","onerror","onTransportClose","onclose","onupgrade","to","payloadSize","cleanupAndClose","waitForUpgrade","upgrades","filteredUpgrades","url","loc","host","toString","withNativeFile","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","Encoder","replacer","deconstruction","isObject","Decoder","reviver","isBinaryEvent","BinaryReconstructor","buf","payload","binData","io","nsp","ack","isTransportWritable","withErr","resolve","reject","arg1","arg2","responseArgs","listeners","sent","pid","subDestroy","compress","Backoff","ms","rand","deviation","jitter","Manager","_parser","Engine","socket","openSubDestroy","onError","errorSub","nsps","cache","parsed","sameNamespace","newConnection","pulseCircle","pulse_circles","stroke_width","delay_multiplier","color_range","margins","d3.interpolateHcl","colorFill","d3.scalePoint","broadcastToggle","repeat","d3.active","coms","connectSocket","connectionString","connect","comsConnect","comsDisconnect","comsError","sendHistory","tmxError","tmxDirective","tmxMessage","message","auth_match","surfaces","inout","broadcasting","startBroadcast","pc","endBroadcast","emitTMX","broadcastStatus","touchTimer","registeredFunctions","intersection","evnt","mouse","tapHandler","processEvnt","lastTap","stopPropagation","matchedClasses","thisTap","callFunction","pointerEvent","holdAction","touchleave","isTouch","isTouchTimer","curRootClass","addtouchclass","removetouchclass","eventManager","broadcastScore","match_meta","match_message","sendScoreUpdate","next_update","last_timeout","last_update","update_window","wait_time","checkMatchEnd","strokeAction","last_action","updatePlayer","updatePlayerDetails","rankElement","changeFormat","format_name","DOUBLE_FAULT","toggles","classAction","playerRole","slider_side","changeValue","rallyMode","actions","player_side","sound","styleButton","player_position","checkStartTime","point_location","getPointLocation","what","p0location","p1location","exportMatch","download","textToWrite","fileNameToSaveAs","textFileAsBlob","downloadLink","emailblackImage","modalShare","json_data","shareResult","email_message","editPoint","epSGP","point_winner","point_loser","changePointWinner","changeResultOptions","editPointDisplay","pointPlayer","pointResult","pointWinner","updatePoint","editPlayer","editPlayerDisplay","playerName","targetElement","playerRank","pointsImage","modalHelp","quick_start","quick","helptext","modalInfo","enterKey","key_entry","keyAction","submit","submitKey","viewGameFish","gameIndex","viewEditPoint","pointIndex","viewStats","viewMatchFormat","viewGameTree","viewMomentum","viewPointHistory","matchArchive","outcomeEntry","mainMenu","undoAction","redoAction","changeServer","swapAction","registerEvents","module","this","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","clipboard","tiny_emitter","tiny_emitter_default","listen","listen_default","src_select","select_default","command","ClipboardActionCut","selectedText","actions_cut","createFakeElement","isRTL","fakeElement","yPosition","fakeCopyAction","ClipboardActionCopy","actions_copy","_typeof","ClipboardActionDefault","_options$action","container","actions_default","clipboard_typeof","_classCallCheck","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","call","_assertThisInitialized","getAttributeValue","Clipboard","_Emitter","_super","trigger","_this","_this2","support","DOCUMENT_NODE_TYPE","closest","__unused_webpack_exports","_delegate","useCapture","listenerFn","delegate","elements","exports","is","listenNode","listenNodeList","listenSelector","nodeList","isReadOnly","ctx","evtArr","evts","liveEvents","__webpack_module_cache__","moduleId","getter","prop","queryString","vars","checkUserUUID","defineEntryEvents","optionValue","iocCodes","loadCurrent","catchTab","playername","hold_targets","chLogo","renderDefaultPage","PARAMETER_REGEXP","REPLACE_VARIABLE_REGEXP","WILDCARD_REGEXP","REPLACE_WILDCARD","NOT_SURE_REGEXP","REPLACE_NOT_SURE","START_BY_SLASH_REGEXP","MATCH_REGEXP_FLAGS","getCurrentEnvURL","fallback","windowAvailable","clean","isString","isFunction","extractHashFromURL","regExpResultToParams","extractGETParameters","tmp","parseQuery","matchRoute","route","_extractGETParameters","GETParams","paramNames","pattern","full","dots","regexp","pushStateAvailable","undefinedOrTrue","parseNavigateOptions","resolveOptions","accumulateHooks","hooks","Q","funcs","idx","moveForward","condition","two","setLocationPath","matchPathToRegisteredRoutes","checkForDeprecationMethods","checkForForceOp","isWindowAvailable","isPushStateAvailable","updateBrowserURL","isItUsingHash","checkForLeaveHook","oldMatch","leaveLoopDone","runHook","newLocationVSOldMatch","someOfTheLastOnesMatch","shouldStop","checkForBeforeHook","callHandler","checkForAfterHook","checkForAlreadyHook","checkForNotFoundHandler","notFoundRoute","hashString","notFoundMatch","errorOut","flushCurrent","foundLifecycle","notFoundLifeCycle","_ref","notFoundHandled","_extends","processMatches","nextMatch","waitingList","DEFAULT_LINK_SELECTOR","Navigo","appRoute","DEFAULT_RESOLVE_OPTIONS","routes","destroyed","genericHooks","_checkForAHash","composePathWithRoot","createRoute","handler","_path$p","_handler","_hooks","matches","navigate","navigateOptions","_ref2","navigateByName","generate","off","destroy","notFound","updatePageLinks","findLinks","link","u","setGenericHooks","lastResolved","getLinkPath","pathToMatchObject","getCurrentLocation","directMatchWithRegisteredRoutes","directMatchWithLocation","currentLocation","annotatePathWithRoot","addHook","func","getRoute","nameOrHandler","__markAsClean","define_process_env_default","router"],"mappings":"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AAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM,EAAG,IAAKA,EAAI,MAAM,CAAE,EACvD,CAAE,GAAI,WAAY,MAAOA,EAAI,MAAM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","x_google_ignoreList":[18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,300,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324]}