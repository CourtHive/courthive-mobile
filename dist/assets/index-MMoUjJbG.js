(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Tr=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),nl=function(t){const e=t+"=",n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.startsWith(e))return i.substring(e.length,i.length)}return null},rl=function(t,e,n){const r=function(){if(n){const i=new Date;return i.setTime(i.getTime()+n*24*60*60*1e3),"; expires="+i.toUTCString()}else return""}();document.cookie=t+"="+e+r+"; path=/"},rt={set:function(t,e,n){Tr?localStorage.setItem(t,e):rl(t,e,n)},get:function(t){return Tr?localStorage.getItem(t):nl(t)},remove:function(t){Tr?localStorage.removeItem(t):this.set(t,"",-1)}};function il(t){try{JSON.parse(t)}catch{return!1}return!0}function Ut(t,e){const n=document.getElementById("modaltext");if(n&&(n.innerHTML=t),e){console.log({data:e});const i=document.getElementById("copy2clipboard");i&&i.setAttribute("data-clipboard-text",e)}const r=document.getElementById("modal");r&&(r.style.display="flex")}function sn(t){const e=t.split(" ");let n=e[0];return e.length>1&&(n+=" "+e[e.length-1]),n}function sl(t){const e=t.format,n=t.sides;return e==="singles"?n.map(function(r){return sn(r[0])}):n.map(ol)}function ol(t){return t[0].last_name+"/"+t[1].last_name}function al(t){if(t)try{return JSON.parse(t)}catch{return}}function cl(t,e="-",n="YMD"){if(!t)return"";const r=new Date(t);let i=""+(r.getMonth()+1),s=""+r.getDate();const o=r.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),n=="DMY"?[s,i,o].join(e):n=="MDY"?[i,s,o].join(e):n=="YDM"?[o,s,i].join(e):n=="DYM"?[s,o,i].join(e):n=="MYD"?[i,o,s].join(e):[o,i,s].join(e)}function Ms(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function Hn(t,e){for(;t.parentNode;)if(t=t.parentNode,t.classList&&Array.from(t.classList).indexOf(e)>=0)return t;return null}const et=function(){};et.addPoint_events=[];et.undo_events=[];et.reset_events=[];et.pointParser=Vo;const xe={games:{advantage:{description:"Advantage Game",tiebreak:!1,hasDecider:!1,threshold:4,minDiff:2},noAdvantage:{description:"No Advantage Game",tiebreak:!1,hasDecider:!0,threshold:4,minDiff:1},tiebreak7a:{description:"Tiebreak to 7",tiebreak:!0,hasDecider:!1,threshold:7,minDiff:2},tiebreak10a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:10,minDiff:2},tiebreak12a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:12,minDiff:2},tiebreak9n:{description:"Tiebreak to 9, Golden Point",tiebreak:!0,hasDecider:!0,threshold:9,minDiff:1}},sets:{AdSetsTo6tb7:{description:"Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},NoAdSetsTo6tb7:{description:"No-Ad, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"},NoAdSetsTo4tb7:{description:"No-Ad, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:0,children:"noAdvantage",decidingChild:"tiebreak7a"},longSetTo6by2:{description:"Advantage, 6 games for set, win by 2 games",hasDecider:!1,threshold:6,minDiff:2,children:"advantage",decidingChild:"advantage"},supertiebreak:{description:"Supertiebreak",hasDecider:!0,threshold:1,minDiff:1,children:"tiebreak10a",decidingChild:"tiebreak10a"},pro10a12:{description:"10 Game No Ad Pro Set; tiebreak to 12",hasDecider:!0,threshold:10,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak12a"},pro8a7:{description:"8 Game Pro Set; tiebreak to 7",hasDecider:!0,threshold:8,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"}},matches:{"3_6a_7":{name:"Standard Advantage",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"3_6n_7":{name:"Standard No-Advantage",description:"best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"NoAdSetsTo6tb7"},"3_4n_10":{name:"Standard Under 10",description:"best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"supertiebreak"},"1_4n_7":{name:"Under 10 Qualifying",description:"4 games for set, No Advantage, Tiebreak to 7 at 3-3",hasDecider:!1,threshold:1,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"NoAdSetsTo4tb7"},"3_6n_10":{name:"No-Ad, 3rd Set Supertiebreak",description:"best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"supertiebreak"},"5_6a_7":{name:"US Open Men",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"5_6a_7_long":{name:"Grand Slam Men - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"3_6a_7_long":{name:"Grand Slam Women - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"1_8a_7":{name:"8 Game Pro Set",description:"1 set, Advantage, 8 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"pro8a7",decidingChild:"pro8a7"}}};et.formats=()=>xe;et.newFormat=({type:t,code:e,description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l})=>{const c=Object.keys(xe).indexOf(t)>=0,u=c&&Object.keys(xe[t]).indexOf(e)>=0;return c&&u?!1:(xe[t][e]={description:n,tiebreak:r,hasDecider:i,threshold:s,minDiff:o,children:a,decidingChild:l},!0)};et.stateObject=({index:t,object:e,parent_object:n,child:r,format:i,common:s=et.common()})=>{const o={};o.child=r,o.format=i,o.child_attributes=["hasDecider","threshold","minDiff","tiebreak","code","description"],(o.reset=c=>{o.children=[],o.local_history=[],o.counter=[0,0],o.first_service=0,n||(s.metadata.reset(),s.metadata.resetStats(),s.history=[],s.perspective_score=!1,s.events.reset().forEach(u=>u())),!n&&c&&(o.format.singles(!0),o.format.type(c))})(),o.set={index(c){return arguments.length?(isNaN(c)||(t=c),o.set):t},liveStats(c){return arguments.length?[!0,!1].indexOf(c)<0?!1:(c&&!s.live_stats&&o.history.points().length&&(s.metadata.resetStats(),s.stats.counters()),!c&&s.live_stats&&s.metadata.resetStats(),s.live_stats=c,o.set):s.live_stats},perspectiveScore(c){return arguments.length?o.history.points().length?!1:([!0,!1].indexOf(c)>=0&&(s.perspective_score=c),o.set):s.perspective_score},firstService(c){return arguments.length?s.metadata.serviceOrder().indexOf(c)<0?!1:(o.first_service=c,o.set):o.first_service}},o.history={},o.history.local=()=>o.local_history,o.history.action=c=>s.history.filter(u=>u.action==c),o.history.points=c=>{let u=s.history.filter(f=>f.action=="addPoint").map(f=>f.point);return c!=null&&(u=u.filter(f=>f.set==c)),u},o.history.score=()=>e=="Game"?o.history.points().map(c=>c.score):[].concat(...o.children.map(c=>c.history.score())),o.history.games=()=>e=="Set"?o.local_history:[].concat(...o.children.map(c=>c.history.games())),o.history.lastPoint=()=>{const c=o.history.points();return c[c.length-1]||{score:"0-0"}},o.history.common=()=>s.history,o.score=()=>{const c={local:o.counter};c.points=e=="Game"?o.complete()?[0,0]:o.counter:o.lastChild()?o.lastChild().score().counters.points:[0,0],c.games=e=="Set"?o.complete()?[0,0]:o.counter:e=="Match"?o.lastChild()?o.lastChild().score().counters.games:[0,0]:void 0,c.sets=e=="Match"?o.counter:void 0;const u={counters:c};return u.points=e=="Game"?o.complete()?"0-0":o.scoreboard():o.lastChild()?o.lastChild().score().points:"0-0",u.games=e=="Set"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().games:"0-0",u.sets=e=="Match"?o.complete()?"0-0":o.perspectiveScore().join("-"):o.lastChild()?o.lastChild().score().sets:"0-0",u.components={},e=="Match"&&o.children.length&&(u.components.sets=o.children.map(f=>{const h={games:f.score().counters.local};return f.lastChild()&&f.lastChild().format.tiebreak()&&(h.tiebreak=f.lastChild().score().counters.local),h})),u.display={},u},o.accessChildren=()=>o.children,o.lastChild=()=>o.children[o.children.length-1],o.scoreDifference=()=>Math.abs(o.counter[0]-o.counter[1]),o.thresholdMet=()=>Math.max(...o.counter)>=o.format.threshold(),o.minDifferenceMet=()=>o.scoreDifference()>=o.format.minDiff(),o.singleThresholdMet=()=>Math.max(...o.counter)>=o.format.threshold()&&Math.min(...o.counter)<o.format.threshold(),o.winner=()=>o.complete()?o.counter[0]>o.counter[1]?0:1:void 0,o.reverseScore=()=>s.perspective_score&&o.nextTeamServing()%2==1,o.nextTeamServing=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!0),o.nextTeamReceiving=()=>s.metadata.teams().map(c=>c.indexOf(o.nextService())>=0).indexOf(!1),o.perspectiveScore=(c=o.counter,u)=>u!=null?u?c.slice().reverse():c:o.reverseScore()?c.slice().reverse():c,o.complete=()=>{function c(){return o.counter[0]>=o.format.threshold()&&o.counter[1]>=o.format.threshold()}return!!(o.thresholdMet()&&o.minDifferenceMet()||c()&&o.scoreDifference()&&o.format.hasDecider())},o.nextService=()=>{if(o.complete())return!1;let c=o.lastChild();if(s.metadata.serviceOrder().indexOf(o.first_service)<0&&console.log("PROBLEM"),e=="Game")return o.format.tiebreak()?s.nextTiebreakService(o.local_history,o.first_service):o.first_service;if(!c)return o.first_service;if(c.complete()){let u=c.lastChild();for(;u;)c=u,u=c.lastChild();const f=c.set.firstService();return s.advanceService(f)}return c.nextService()},o.currentChild=()=>{if(o.complete())return!1;const c=o.lastChild();return c&&!c.complete()?c:o.newChild()},o.newChild=()=>{let c=o.lastChild(),u;if(!c)u=o.first_service;else{let x=c.lastChild();for(;x;)c=x,x=c.lastChild();u=s.advanceService(c.set.firstService())}const f=o.format.threshold(),h=o.format.minDiff(),d=x=>o.counter[0]==x&&o.counter[1]==x,p=d(f)&&(o.format.hasDecider()||h==1)||d(f-1)&&h==0,m=p?o.format.decidingChild.settings().code:o.format.children.settings().code,_=o.children.length,A=et[o.child.object]({index:_,parent_object:o,type:m,common:s});if(A.set.firstService(u),!m){const x=p?o.format.decidingChild:o.format.children;k(x,A.format,o.child_attributes),x.children&&(k(x.children,A.format.children,o.child_attributes),k(x.decidingChild,A.format.decidingChild,o.child_attributes))}return o.children.push(A),A;function k(x,O,L){L.forEach(v=>{if(typeof x[v]=="function"){const y=x[v]();O[v](y)}})}};const a=c=>{if(o.complete())return{result:!1};const u=o.nextService(),f=s.pointParser(c,u,o.history.lastPoint(),o.format,s.metadata.teams(),o.set.perspectiveScore(),o.score());if(!f)return{result:!1};o.counter[f.winner]+=1;const h={points:o.counter.slice(),score:o.scoreboard(),number:o.local_history.filter(A=>A.winner!=null).length,index:o.history.points().length,[e.toLowerCase()]:t},d=o.pointsToGame(),p=d?d.indexOf(1):void 0;p>=0&&p==1-s.metadata.playerTeam(u)&&(h.breakpoint=!0),o.format.tiebreak()&&(h.tiebreak=!0),s.metadata.timestamps()&&!f.uts&&(h.uts=new Date().valueOf()),Object.assign(f,h),o.local_history.push(f);const _={action:"addPoint",result:!0,complete:o.complete(),point:f,needed:{points_to_game:d}};return s.history.push(_),_};o.addPoint=c=>{if(Array.isArray(c))return!1;if(e=="Game")return a(c);const u=o.currentChild();if(!u)return{result:!1};const f=u.addPoint(c);if(!f.result)return f;u.complete()&&(o.counter[f.point.winner]+=1,o.local_history.push({winner:f.point.winner,[o.child.plural]:o.counter.slice(),index:u.set.index()})),f.complete=o.complete(),f.next_service=o.nextService();const h=o.pointsNeeded?o.pointsNeeded():void 0;return h&&(f.needed=Object.assign({},f.needed,h)),f.point[o.child.label]=u.set.index(),f[o.child.label]={complete:u.complete(),winner:u.winner(),[o.child.plural]:o.counter.slice(),index:u.set.index()},n||s.addStatPoint(f),n||s.events.addPoint().forEach(d=>d(f)),f},o.addPoints=(c=[])=>o.addMultiple({values:c}),o.addScore=c=>{const u=o.addPoint(c);if(u.result)return u;const f=o.history.lastPoint(),h=!f||f.score=="0-0"?[0,0]:f.points,d=o.change.pointScore(c);if(d.result){o.undo();const m=d.pointChange.to.map((_,A)=>({diff:_-h[A],i:A})).filter(_=>_.diff);if(m.length==1&&m[0].diff>0){let _;const A=m[0].i,k=m[0].diff;for(let x=0;x<k;x++)if(_=o.addPoint(A),!_.result||_.game.complete)return _;return _}}return{result:!1}},o.addScores=(c=[])=>o.addMultiple({values:c,fx:o.addScore}),o.addMultiple=({values:c=[],fx:u=o.addPoint})=>{typeof c=="string"&&(c=c.match(/[01A-Za-z][*#@]*/g));const f=[];let h=[];for(;c.length;){const d=c.shift(),p=u(d);p.result?f.push(p):(c.unshift(d),h=c.slice(),c=[])}return{result:f.length,added:f,rejected:h}},o.decoratePoint=(c,u)=>{const f=s.history.map((d,p)=>{if(d.action==="addPoint"&&d.point.index==c.index)return p}).filter(d=>d!==void 0);if(!f.length)return!1;const h=s.history[f[0]];h.point=Object.assign({},h.point,u)},o.change={},o.change.points=c=>{if(!Qr(c)||c.length!=2)return!1;if(e=="Game"){const u=Math.max(...c)>o.format.threshold(),f=Math.abs(c[0]-c[1]);if(u&&f>o.format.minDiff())return!1;if(o.complete())return{result:!1};const h={action:"changePoints",result:!0,pointChange:{from:o.counter,to:c}};if(o.local_history.push(h),s.history.push(h),o.counter=c,o.complete()){const d=parseInt(o.winner());n.counter[d]+=1,n.local_history.push({winner:d,games:n.counter.slice(),index:t})}return h}return o.propagatePointChange(c,"points")},o.change.pointScore=c=>{if(c=="0-0")return o.change.points([0,0]);if(e=="Game"){if(o.format.tiebreak())return o.change.points(c.split("-").map(p=>parseInt(p)));c=c.replace(":","-").split("-").map(p=>p.trim()).join("-").split("D").join("40");const u=Object.assign({},Xo);if(o.format.hasDecider()&&Object.keys($n).forEach(p=>u[p]=$n[p]),[].concat(...Object.keys(u).map(p=>u[p])).indexOf(c)<0)return!1;const h=["0","15","30","40","A","G"],d=c.split("-").map(p=>h.indexOf(p));return d[0]==5&&d[1]!=3&&(d[0]=4),d[1]==5&&d[0]!=3&&(d[1]=4),o.change.points(d)}return o.propagatePointChange(c,"pointScore")},o.propagatePointChange=(c,u)=>{const f=o.lastChild();if(!f){if(e=="Match")return o.newChild().newChild().change[u](c);if(e=="Set")return o.newChild().change[u](c)}return!n&&o.complete()?{result:!1}:f.complete()?o.newChild().change[u](c):f.change[u](c)},o.change.games=c=>{if(!Qr(c)||c.length!=2)return!1;if(e=="Game")return{result:!1};if(e=="Set"){if(o.complete())return{result:!1};const f={action:"changeGames",result:!0,gameChange:{from:o.counter,to:c}};return o.local_history.push(f),s.history.push(f),o.counter=c,f}const u=o.lastChild();return!u&&e=="Match"?o.newChild().change.games(c):!n&&o.complete()?{result:!1}:u.complete()?o.newChild().change.games(c):u.change.games(c)},o.undo=(c=1)=>{if(isNaN(c)||e!="Game"&&!o.children.length&&!o.local_history.length||!s.history.length)return!1;const u=()=>{const h=s.history[s.history.length-1].action;return l[h]()},f=[...Array(c).keys()].map(()=>u());return s.events.undo().forEach(h=>h(f)),c==1?f[0]:f};const l={};return l.addPoint=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter[c.point.winner]-=1,s.removeStatPoint(c),c.point}return o.propagateUndo()},l.changePoints=()=>{if(e=="Game"){o.local_history.pop();const c=s.history.pop();return o.counter=c.pointChange.from,c}return o.propagateUndo()},l.changeGames=()=>{if(e=="Set"){o.local_history.pop();const c=s.history.pop();return o.counter=c.gameChange.from,c}return o.propagateUndo()},o.propagateUndo=()=>{const c=o.lastChild(),u=c.complete(),f=c.undo();if(u){const h=o.local_history.pop();h&&h.winner!=null&&(o.counter[h.winner]-=1)}return!c.history.local().length&&c.lastChild()==null&&o.children.pop(),f},o};et.Match=t=>{const{index:e,type:n,common:r=et.common()}=t??{},i={object:"Set",label:"set",plural:"sets"},s=et.matchFormat({type:n,common:r}),o=et.stateObject({index:e,object:"Match",format:s,child:i,common:r});return o.scoreboard=a=>o.children.length?(a==null&&(a=o.set.perspectiveScore()?o.nextService():void 0),o.children.map(l=>l.scoreboard(a)).join(", ")):"0-0",{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,history:o.history,stats:r.stats}};et.Set=({index:t,parent_object:e,type:n,common:r=et.common()})=>{const i={object:"Game",label:"game",plural:"games"},s=et.setFormat({type:n,common:r}),o=et.stateObject({index:t,parent_object:e,object:"Set",format:s,child:i,common:r});o.pointsNeeded=()=>{const l=o.format.threshold();if(o.complete()){const _=[];_[o.winner()]=0;const A=1-o.winner(),k=o.history.action("addPoint").filter(x=>x.point.set==t).map(x=>x.needed.points_to_set).filter(x=>x);return _[A]=Math.max(...k.map(x=>x[A])),{points_to_set:_}}const c=o.format.hasDecider(),u=o.scoreDifference(),f=o.format.minDiff(),h=[!1,!1],d=o.counter.map((_,A)=>{const k=o.counter[1-A];return _>k?k==l&&c||_>=l&&u>=f?0:_>=l-1?1:l-_:k>_?(h[A]=c&&l==k,_==l&&c||k>=l&&u>=f?0:h[A]?u+1:k>=l-1?u+f:l-_):(h[A]=c&&l==_&&l==k||f==1&&l==_&&l==k||f==0&&l-1==_&&l-1==k,h[A]?1:_>=l-1?f:l-_)}),p=o.lastChild();return{points_to_set:d.map((_,A)=>{let k=0;if(p&&!p.complete()&&(k+=p.pointsToGame()[A],_-=1),!_)return k;h[A]&&(k+=o.format.decidingChild.threshold(),_-=1);for(let x=_;x;x--)k+=o.format.children.threshold();return k}),games_to_set:d}};const a=([l,c],[u,f])=>((u||f)&&(u>f&&(c+=`(${f})`),f>u&&(l+=`(${u})`)),`${l}-${c}`);return o.scoreboard=l=>{const c=o.lastChild(),u=o.perspectiveScore(o.counter,l);if(!c)return u.join("-");const f=c.format.tiebreak()===!0;if(c.complete()&&!f)return u.join("-");if(!c.complete())return`${u.join("-")} (${c.scoreboard(l)})`;const h=c.score().counters.local,d=o.perspectiveScore(h,l);return f&&o.complete()&&o.children.length==1?d.join("-"):a(u,d)},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,[o.child.plural]:o.accessChildren,children:o.accessChildren,lastChild:o.lastChild,newChild:o.newChild,history:o.history,pointsNeeded:o.pointsNeeded}};et.Game=({index:t,parent_object:e,type:n,common:r=et.common()})=>{const i={object:"Point",label:"point",plural:"points"},s=et.gameFormat({type:n,common:r}),o=et.stateObject({index:t,object:"Game",parent_object:e,format:s,child:i,common:r});return o.pointsToGame=()=>{if(o.complete())return;const a=o.format.threshold(),l=o.format.hasDecider(),c=o.scoreDifference(),u=o.format.minDiff();return o.counter.map((f,h)=>{const d=o.counter[1-h];return f>d?d==a&&l||f>=a&&c>=u?0:f>=a-1?1:a-f:d>f?f==a&&l||d>=a&&c>=u?0:d==a&&l?c+1:d>=a-1?c+u:a-f:l&&a==f&&a==d?1:f>=a-1?u:a-f})},o.scoreboard=a=>{let l;const c=o.format.threshold(),u=o.format.minDiff(),f=o.perspectiveScore(o.counter,a);if(c!=4||o.format.tiebreak()==!0)return f.join("-");if(!o.thresholdMet()||o.singleThresholdMet()&&o.minDifferenceMet()||o.singleThresholdMet()&&o.format.hasDecider()&&u==1){const d=["0","15","30","40","G","G"];l=f.map(p=>d[p]).join("-")}else l=f.map((d,p)=>{const m=f[1-p],_=d-c,A=m-c;return _>A&&o.minDifferenceMet()?"G":_>A?"A":"40"}).join("-");return l.indexOf("G")>=0?"0-0":l},{set:o.set,reset:o.reset,format:o.format,events:r.events,assignParser:r.assignParser,metadata:r.metadata,nextService:o.nextService,nextTeamServing:o.nextTeamServing,nextTeamReceiving:o.nextTeamReceiving,change:o.change,undo:o.undo,addPoint:o.addPoint,addPoints:o.addPoints,decoratePoint:o.decoratePoint,addScore:o.addScore,addScores:o.addScores,complete:o.complete,winner:o.winner,score:o.score,scoreboard:o.scoreboard,history:o.history,lastChild:o.lastChild,pointsToGame:o.pointsToGame}};et.defaultPointParser=Vo;function Vo(t,e,n,r,i,s,o){if(t==null)return!1;if(t.toString().length==1&&!isNaN(t)){const h=+t==e?"S":"R";return[0,1].indexOf(+t)<0?!1:{winner:+t,server:e,code:h}}let a;const l=i.map(h=>h.indexOf(e)>=0).indexOf(!0),c={server:e};if(typeof t=="object"){if(t.winner!=null&&[0,1].indexOf(+t.winner)>=0)return t.winner=parseInt(t.winner),t.code=t.code?t.code:t.winner==e?"S":"R",t.first_serve&&(t.code=t.code.toLowerCase()),Object.assign({},t,c);if(t.code&&u(t.code))return Object.assign({},t,c)}if(typeof t=="string"&&(f(t)||u(t)))return c;function u(h){let d=h.toUpperCase().match(/[A-Za-z]/g),p=h.match(/[*#@]/g);if(d&&(d=d.join("")),p&&(p=p.join("")),"SAQDRP".split("").indexOf(String(d))>=0)return["S","A","Q"].indexOf(d)>=0&&(a=l),["D","R","P"].indexOf(d)>=0&&(a=1-l),["Q","P"].indexOf(d)>=0&&(c.result="Penalty"),d=="A"&&(c.result="Ace"),d=="D"&&(c.first_serve={error:"Error",serves:["0e"]},c.result="Double Fault"),p&&!c.result&&(p=="*"&&(c.result="Winner"),p=="#"&&(c.result="Forced Error"),p=="@"&&(c.result="Unforced Error")),c.code=h,c.winner=parseInt(a),h===h.toLowerCase()&&(c.first_serve={error:"Error",serves:["0e"]}),c}function f(h){if(h=h.replace(":","-").split("-").map(A=>A.trim()).join("-").split("D").join("40"),h.split("-").length!=2)return!1;let d=o.points;const p=A=>A.reduce((k,x)=>k+x);if(r.tiebreak()){const A=h.split("-").map(O=>parseInt(O)),k=d.split("-").map(O=>parseInt(O));if(!Qr(A)||A.length!=2||p(k)+1!=p(A))return!1;const x=[Math.abs(A[0]-k[0]),Math.abs(A[1]-k[1])];return c.winner=x.indexOf(1),c}const m=Object.assign({},Xo);if(r.hasDecider()&&Object.keys($n).forEach(A=>m[A]=$n[A]),h=="0-0"&&m[d].join("-").indexOf("G")>=0)return c.winner=n.points.indexOf(Math.max(...n.points)),c;m[d]==null&&(d="0-0");let _=m[d]?m[d].indexOf(h):!1;if(_>=0)return s&&e&&(_=1-_),c.winner=_,c}}const $n={"40-40":["G-40","40-G"]},Xo={"0-0":["15-0","0-15"],"0-15":["15-15","0-30"],"0-30":["15-30","0-40"],"0-40":["15-40","0-G"],"15-0":["30-0","15-15"],"15-15":["30-15","15-30"],"15-30":["30-30","15-40"],"15-40":["30-40","15-G"],"30-0":["40-0","30-15"],"30-15":["40-15","30-30"],"30-30":["40-30","30-40"],"30-40":["40-40","30-G"],"40-0":["G-0","40-15"],"40-15":["G-15","40-30"],"40-30":["G-30","40-40"],"40-40":["A-40","40-A"],"A-40":["G-40","40-40"],"40-A":["40-40","40-G"]};et.matchFormat=({type:t="3_6a_7",common:e})=>{const n=et.formatObject({plural:"matches",common:e});return n.children=et.setFormat({common:e}),n.decidingChild=et.setFormat({common:e}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};et.setFormat=({type:t="AdSetsTo6tb7",common:e})=>{const n=et.formatObject({plural:"sets",common:e});return n.children=et.gameFormat({common:e}),n.decidingChild=et.gameFormat({common:e,type:"tiebreak7a"}),n.init(t),{description:n.description,singles:n.singles,doubles:n.doubles,settings:n.settings,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,children:n.children,decidingChild:n.decidingChild}};et.gameFormat=({type:t="advantage",common:e})=>{const n=et.formatObject({plural:"games",common:e});return n.init(t),{description:n.description,settings:n.settings,singles:n.singles,doubles:n.doubles,type:n.type,types:n.types,threshold:n.threshold,hasDecider:n.hasDecider,minDiff:n.minDiff,tiebreak:n.tiebreak}};et.formatObject=({plural:t,common:e=et.common()})=>{const n={values:{plural:t},singles:e.singles,doubles:e.doubles,init(r){n.types(n.values.plural).indexOf(r)>=0&&(n.type(r),n.values.initial_code=r)},types(r=n.values.plural){return Object.keys(xe[r])},type(r){if(!n.values.plural)return!1;if(r===!0&&n.values.initial_code&&(r=n.values.initial_code),n.types(n.values.plural).indexOf(r)>=0){const i=xe[n.values.plural][r];return n.hasDecider(i.hasDecider).minDiff(i.minDiff).threshold(i.threshold),i.tiebreak!=null&&n.tiebreak(i.tiebreak),n.name(i.name),n.description(i.description),n.values.code=r,i.children&&n.children.type(i.children),i.decidingChild&&n.decidingChild.type(i.decidingChild),!0}},settings(r){const{name:i,description:s,code:o,players:a,threshold:l,has_decider:c,min_diff:u,tiebreak:f}=r??{};if(o)n.type(o);else if(!l||!c||!u||!f){const h=typeof e.singles=="function"?e.singles()?2:4:"";return{name:n.values.name,description:n.values.description,code:n.values.code,players:h,threshold:n.values.threshold,has_decider:n.values.has_decider,min_diff:n.values.min_diff,tiebreak:n.values.tiebreak}}else n.tiebreak(f),n.threshold(l),n.minDiff(u),n.hasDecider(c),s&&n.description(s),i&&n.name(i),a&&(a==4?n.doubles():n.singles())},name(r){return arguments.length?(typeof r=="string"&&(n.values.name=r),n):n.values.name},description(r){return arguments.length?(typeof r=="string"&&(n.values.description=r),n):n.values.description},tiebreak(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.tiebreak=r),n):n.values.tiebreak},threshold(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.threshold=r),n):n.values.threshold},minDiff(r){return arguments.length?(n.values.description=n.values.code=void 0,isNaN(r)||(n.values.min_diff=r),n):n.values.min_diff},hasDecider(r){return arguments.length?(n.values.description=n.values.code=void 0,[!0,!1].indexOf(r)>=0&&(n.values.has_decider=r),n):n.values.has_decider}};return n};et.common=()=>{let t=2,e=et.addPoint_events.slice(),n=et.undo_events.slice(),r=et.reset_events.slice(),i={},s,o,a;const l={resetStats(){s=void 0,o=void 0,a=void 0},reset(){i={players:[],teams:[],service_order:[0,1],receive_order:[1,0],tournament:{},match:{},timestamps:!1,charter:void 0}},timestamps(v){return arguments.length?([!0,!1].indexOf(v)>=0&&(i.timestamps=v),l):i.timestamps},serviceOrder(v){return arguments.length?c(v,"service_order","receive_order"):i.service_order.slice()},doublesServiceChange(){if(t!=4)return!1},receiveOrder(v){return arguments.length?c(v,"receive_order","service_order"):i.receive_order.slice()},teams(){const v=[];return v[0]=i.service_order.filter((y,g)=>(g+1)%2).sort(),v[1]=i.service_order.filter((y,g)=>g%2).sort(),v.sort(),v},playerTeam(v){return l.teams().map(y=>y.indexOf(v)>=0).indexOf(!0)},teamPlayers(){return l.teams().map(v=>v.map(y=>l.players(y).name))},players(v){return arguments.length?isNaN(v)||v<0||v>3?!1:i.players[v]?i.players[v]:{name:`Player ${["One","Two","Three","Four"][v]}`}:i.players.length>i.service_order.length?i.players:i.service_order.map(y=>l.players(y))},definePlayer(v){const{name:y,birth:g,puid:P,hand:G,seed:V,rank:Z,age:Y,entry:H,ioc:X,draw_position:U}=v??{};let j=v==null?void 0:v.index;j==null&&(j=i.players.length);const J=i.players[j]||{};if(!y&&!J.name||isNaN(j)||j>3)return!1;const I={name:y,birth:g,puid:P,hand:G,seed:V,rank:Z,age:Y,entry:H,ioc:X,draw_position:U};return Object.keys(I).forEach(S=>{I[S]&&(J[S]=I[S])}),i.players[j]=J,{index:j,player:J}},defineTournament(v){const{name:y,tuid:g,start_date:P,tour:G,rank:V,surface:Z,in_out:Y,draw:H,draw_size:X,round:U,level:j}=v??{},J={name:y,tuid:g,start_date:P,tour:G,rank:V,surface:Z,in_out:Y,draw:H,draw_size:X,round:U,level:j};return Object.keys(J).forEach(I=>{J[I]&&(i.tournament[I]=J[I])}),i.tournament},defineMatch(v){const{muid:y,date:g,gender:P,year:G,court:V,start_time:Z,end_time:Y,duration:H,status:X,umpire:U,official_score:j}=v??{},J={muid:y,date:g,gender:P,year:G,court:V,start_time:Z,end_time:Y,duration:H,status:X,umpire:U,official_score:j};return Object.keys(J).forEach(I=>{J[I]&&(i.match[I]=J[I])}),i.match},showTiebreakOrder(v){return f(12,v)}};function c(v,y,g){const P=(H,X)=>!H.filter((U,j)=>U!=X[j]).length,G=(H,X)=>X.filter(U=>H.indexOf(U)!=-1).length!=X.length;if(!Array.isArray(v)||v.length!=t||G(v,[0,1])||G([0,1,2,3],v))return!1;const V=v.length==i[y].length;if(P(v,i[y])&&V)return l;const Z=l.teams();i[y]=v;const Y=l.teams();return v.length==4&&P(Z[0],Y[0])&&V&&u(i[y],i[g],Y)||(i[g]=v.map(H=>v.length-1-H)),l}function u(v,y,g){const P=(G,V)=>g.filter(Z=>Z.filter(Y=>[G,V].indexOf(Y)>=0).length>1).length;return!v.filter((G,V)=>P(G,y[V])).length}function f(v,y){const g=[];return[...Array(v).keys()].map(()=>{const P=h(g,y);return g.push(P),P})}function h(v,y){const g=d(v.length),P=(v.length+1)%4<2,G=v[v.length-1],V=G??y??i.service_order[0];return P==g?V:x.advanceService(V)}function d(v){return[!0].concat([...Array(v).keys()].map(g=>(g+1)%4<2))[v]}function p(){if(t==2){const v=x.metadata.serviceOrder();if(v.length==2)return;x.metadata.serviceOrder(v.filter(y=>[0,1].indexOf(y)>=0))}else{const v=x.metadata.serviceOrder();if(v.length==4)return;const y=v.slice();v.forEach(g=>y.push(g+2)),x.metadata.serviceOrder(y)}}const m=v=>{if(!v)return e;typeof v=="function"?e.indexOf(v)<0&&e.push(v):Array.isArray(v)&&console.log({add_event:v})},_=v=>{if(!v)return n;typeof v=="function"?n.indexOf(v)<0&&n.push(v):Array.isArray(v)&&console.log({undo_event:v})},A=v=>{if(!v)return r;typeof v=="function"?r.indexOf(v)<0&&r.push(v):Array.isArray(v)&&console.log({reset_event:v})},k=()=>{e=[],n=[],r=[]},x={metadata:l,pointParser:et.pointParser,events:{addPoint:m,undo:_,clearEvents:k,reset:A},history:[],live_stats:!1,perspective_score:!1,assignParser(v){x.pointParser=v},advanceService(v){const y=i.service_order.indexOf(v)+1;return i.service_order[y<l.players().length?y:0]},nextTiebreakService(v,y){const g=f(v.length+1,y);return g[g.length-1]},singles(v){return arguments.length?(t=v?2:4,p(),x):t==2},doubles(v){return arguments.length?(t=v?4:2,p(),x):t==4},stats:{calculated(v){return O(x.stats.counters(v))},counters(v){if((v!=null&&a!=v||v==null&&a!=null)&&l.resetStats(),!s){x.live_stats=!0;let y=x.history.filter(g=>g.action==="addPoint");v!=null&&(y=y.filter(g=>g.point.set===v),a=v),y.forEach(g=>x.addStatPoint(g))}return s}},addStatPoint(v){if(!x.live_stats)return;const y=v.point;s||(s={players:{},teams:{}});const g=l.playerTeam(y.server),P=l.playerTeam(y.winner),G=1-P;if(L({player:y.server,episode:v,stat:"pointsServed"}),L({team:P,episode:v,stat:"pointsWon"}),y.result&&y.hand){const V=y.result=="Winner"?P:G;L({player:V,episode:v,stat:y.hand})}y.result=="Ace"&&L({player:y.server,episode:v,stat:"aces"}),y.result=="Double Fault"&&L({player:y.server,episode:v,stat:"doubleFaults"}),y.result=="Winner"&&L({player:y.winner,episode:v,stat:"winners"}),y.result=="Unforced Error"&&L({team:G,episode:v,stat:"unforcedErrors"}),y.result=="Forced Error"&&L({team:G,episode:v,stat:"forcedErrors"}),y.first_serve||L({player:y.server,episode:v,stat:"serves1stIn"}),!y.first_serve&&y.winner==g&&(L({player:y.server,episode:v,stat:"serves1stWon"}),L({team:G,undefined:void 0,stat:"received1stWon"}),L({team:G,undefined:void 0,stat:"received2ndWon"})),!y.first_serve&&y.winner!=g&&L({team:P,episode:v,stat:"received1stWon"}),y.first_serve&&y.result!="Double Fault"&&L({player:y.server,episode:v,stat:"serves2ndIn"}),y.first_serve&&y.result!="Double Fault"&&y.winner==y.server&&(L({player:y.server,episode:v,stat:"serves2ndWon"}),L({team:G,undefined:void 0,stat:"received1stWon"}),L({team:G,undefined:void 0,stat:"received2ndWon"})),y.first_serve&&y.result!="Double Fault"&&y.winner!=g&&L({team:P,episode:v,stat:"received2ndWon"}),y.breakpoint&&(L({player:y.server,undefined:void 0,stat:"breakpointsSaved"}),L({player:y.server,episode:v,stat:"breakpointsFaced"})),o&&o.point.breakpoint&&o.point.server==y.winner&&L({player:y.server,episode:v,stat:"breakpointsSaved"}),v.game&&v.game.complete&&L({team:P,episode:v,stat:"gamesWon"}),o=v},removeStatPoint(v){if(!x.live_stats)return;Object.keys(s).forEach(g=>{Object.keys(s[g]).forEach(P=>{Object.keys(s[g][P]).forEach(G=>{s[g][P][G].length&&(s[g][P][G]=s[g][P][G].filter(V=>V.point.index!=v.point.index))})})});const y=x.history.filter(g=>g.action=="addPoint");o=y.length?y[y.length-1]:void 0}};return l.reset(),x;function O(v){if(!v||!v.teams)return[];const y={Aces:{numerators:["aces"],calc:"number"},"Double Faults":{numerators:["doubleFaults"],calc:"number"},"First Serve %":{numerators:["serves1stIn"],denominators:["pointsServed"],calc:"percentage"},"Unforced Errors":{numerators:["unforcedErrors"],calc:"number"},"Forced Errors":{numerators:["forcedErrors"],calc:"number"},Winners:{numerators:["winners"],calc:"number"},"Total Points Won":{numerators:["pointsWon"],calc:"number"},"Max Pts/Row":{numerators:["pointsWon"],calc:"maxConsecutive",attribute:"index"},"Max Games/Row":{numerators:["gamesWon"],calc:"maxConsecutive",attribute:"game"},"Points Won 1st":{numerators:["serves1stWon"],denominators:["serves1stIn"],calc:"percentage"},"Points Won 2nd":{numerators:["serves2ndWon"],denominators:["serves2ndIn"],calc:"percentage"},"Points Won Receiving":{numerators:["received1stWon","received2ndWon"],denominators:["-pointsServed"],calc:"percentage"},"Breakpoints Saved":{numerators:["breakpointsSaved"],denominators:["breakpointsFaced"],calc:"percentage"},"Breakpoints Converted":{numerators:["-breakpointsSaved"],denominators:["-breakpointsFaced"],calc:"difference"},"Aggressive Margin":{calc:"aggressiveMargin",numerators:["*doubleFaults","*unforcedErrors"],denominators:["*aces","*winners","-*forcedErrors"]}},g=(Y,H,X)=>{if(!Y)return;const U=Y.map(j=>{const J=j.split("-").reverse()[0].split("*").join(""),I=H[j.indexOf("-")==0?1-X:X];return I&&I[J]?I[J].length:0});return[].concat(0,0,...U).reduce((j,J)=>j+J)},P=(Y,H,X)=>{const U=g(Y.numerators,H,X),j=g(Y.denominators,H,X);return{numerator:U,denominator:j}},G=(Y,H)=>{const X=Math.round(Y/H*100);return{value:X,display:`${X}% (${Y}/${H})`}},V={number(Y,H,X){const{numerator:U}=P(Y,H,X);return{display:U,value:U,numerators:Y.numerators}},maxConsecutive(Y,H,X){const U=Y.numerators[0],j=Y.attribute,J=H[X][U];if(!J)return{value:0,display:0};let I,S=0,C=J.length?1:0;return J.forEach(M=>{I+1==M.point[j]?C+=1:(C>S&&(S=C),C=1),I=M.point[j]}),C>S&&(S=C),{display:S,value:S}},percentage(Y,H,X){const{numerator:U,denominator:j}=P(Y,H,X);return U==null||!j?{value:0,display:0}:Object.assign(G(U,j),{numerators:Y.numerators})},difference(Y,H,X){const{numerator:U,denominator:j}=P(Y,H,X);if(U==null||!j)return{value:0,display:0};const J=Math.abs(j-U);return Object.assign(G(J,j),{numerators:Y.numerators})},aggressiveMargin(Y,H,X){const{numerator:U,denominator:j}=P(Y,H,X),J=j-U,I=Object.keys(H).map(C=>H[C].pointsWon?H[C].pointsWon.length:0),S=[].concat(0,0,...I).reduce((C,M)=>C+M);return Object.assign(G(J,S),{numerators:Y.numerators})}},Z=[].concat(...Object.keys(v.teams).map(Y=>Object.keys(v.teams[Y])));return Object.keys(y).map(Y=>{const H=y[Y];H.denominators||(H.denominators=[]);let X=[].concat(...H.numerators,...H.denominators).map(J=>J.split("-").reverse()[0]);if(X=X.filter(J=>J.indexOf("*")<0),!(X.map(J=>Z.indexOf(J)<0).filter(J=>J).length<1))return!1;const j=[0,1].map(J=>V[H.calc](H,v.teams,J));return{name:Y,team_stats:j}}).filter(Y=>Y)}function L(v){const{player:y,episode:g,stat:P}=v??{};let G=v==null?void 0:v.team;y!=null&&(s.players[y]||(s.players[y]={}),s.players[y][P]||(s.players[y][P]=[]),g&&s.players[y][P].push(g),G=l.playerTeam(y)),G!=null&&(s.teams[G]||(s.teams[G]={}),s.teams[G][P]||(s.teams[G][P]=[]),g&&s.teams[G][P].push(g))}};function Qr(t){return Array.isArray(t)?t.map(e=>!isNaN(e)).indexOf(!1)>=0:!1}const Ko=et,Jo="1.9",it={},Lt=Ko.Match(),kt={broadcast:void 0,user_uuid:void 0},Bt={track_shot_types:void 0,audible_clicks:void 0,display_gamefish:void 0,auto_swap_sides:void 0,point_buttons:void 0},w={lets:0,rally:0,undone:[],view:"entry",serve2nd:!1,rally_mode:!1,edit_player:void 0,match_swap:!1,swap_sides:!1,orientation:"vertical",serving:Lt.nextTeamServing(),receiving:Lt.nextTeamReceiving(),edit_point_index:void 0,match:Lt},vn="rgb(64, 168, 75)",bn="rgb(255, 116, 51)",wn="rgb(221, 56, 48)",Et={first_serve:{color:vn,type:"toggle"},second_serve:{color:bn,type:"toggle"},double_fault:{color:wn,type:"flash"},penalty:{color:wn,type:"flash"},first_ace:{color:vn,type:"flash"},second_ace:{color:bn,type:"flash"},server_winner:{color:vn,type:"flash"},server_unforced:{color:wn,type:"flash"},server_forced:{color:bn,type:"flash"},receiving_winner:{color:vn,type:"flash"},receiving_unforced:{color:wn,type:"flash"},receiving_forced:{color:bn,type:"flash"}},on={user_swap:!1,highlight_better_stats:!0,vertical_view:rt.get("vertical_view")||"vblack",horizontal_view:rt.get("horizontal_view")||"hblack"},Ti={isStandalone:"standalone"in window.navigator&&window.navigator.standalone,isIDevice:/iphone|ipod|ipad/i.test(window.navigator.userAgent),isMobile:typeof window.orientation<"u",geoposition:{}},zn=["Player One","Player Two"];function ll(){Lt.events.clearEvents()}function fr(){const t=w.swap_sides?1:0,e=w.swap_sides?0:1;Re();const n=Lt.metadata.players(),r=document.getElementById("playerone"),i=document.getElementById("playertwo");r&&(r.innerHTML=sn(n[t].name)),i&&(i.innerHTML=sn(n[e].name)),Array.from(document.querySelectorAll(".display_player_0")).forEach(a=>a.innerHTML=n[t].name),Array.from(document.querySelectorAll(".display_player_1")).forEach(a=>a.innerHTML=n[e].name)}function Re(t){const e=Lt.history.points(),n=rt.get("current_match");if(!n)return;const r=Lt.metadata.players();if(!(t||e.length||r[0].name!=zn[0]&&r[1].name!=zn[1]))return;const s=JSON.parse(rt.get("match_archive")||"[]");s.indexOf(n)<0&&(s.push(n),rt.set("match_archive",JSON.stringify(s)));const o={ch_version:Jo,players:r,first_service:Lt.set.firstService(),match:Lt.metadata.defineMatch(),format:Lt.format.settings(),tournament:Lt.metadata.defineTournament(),points:e,scoreboard:Lt.scoreboard()};rt.set(n,JSON.stringify(o))}function ul(){const t=rt.get("CH_AppSettings");t&&Object.assign(Bt,JSON.parse(t)),Object.keys(Bt).forEach(n=>{const r=document.getElementById(n);r&&(r.checked=Bt[n])});const e=rt.get("CH_AppState");e&&Object.assign(kt,JSON.parse(e))}function Mi(){Object.keys(Bt).forEach(t=>{const e=document.getElementById(t);e&&(Bt[t]=e.checked)}),rt.set("CH_AppSettings",JSON.stringify(Bt)),rt.set("CH_AppState",JSON.stringify(kt))}function jo(){Ti.isMobile?w.orientation=window.screen.orientation.type=="landscape-primary"?"landscape":"portrait":w.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}function fl(){return w.match.history.points().length==0}function hl(){const t=dl(),e=w.match.metadata.players();let n="";if(!t.length)return!1;t.forEach(i=>{i.points&&i.points.length&&(n+=pl(i,e))}),n+=`
    <div class="flexrows ph_game">
      <div class='ph_margin' style='width: 100%'>
          <div class='flexcenter' style='width: 100%'>Duration ${gl()}</div>
      </div>
    </div>
  `;const r=document.getElementById("ph_frame");r&&(r.innerHTML=n)}function dl(){const t=w.match.history.action("addPoint"),e=[{points:[]}];let n=0,r=0;return t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function pl(t,e){const n=t.points[t.points.length-1],r=t.complete?t.score.join("-"):void 0,i=n.tiebreak,s=i?"Tiebreak":e[n.server].name,o=i?"":n.server?"playertwo":"playerone",a=i?"":n.server==n.winner?"won":"lost";let l=`
         <div class="flexrows ph_game">
            <div class='ph_margin flexrows'>
               <div class="ph_server ${o}">${s}</div>
               <div class="ph_action flexcenter"> 
                  <div class='ph_fish iconfish'></div>
               </div>
               <div class='viewGameFish ph_rally gameIndex="${t.index}" ph_${a}''> <b class="viewGameFish" gameIndex="${t.index}">${r||""}</b> </div>
            </div>
         </div>
      `;return t.points.forEach(c=>{l+=ml(c,e)}),l}function ml(t,e){const n=t.index%2?"even":"odd";let r=!t.tiebreak&&t.server?t.score.split("-").reverse().join("-"):t.score,i;if(t.result){let c;["Ace","Winner"].indexOf(t.result)>=0?c=e[t.winner].name:c=e[1-t.winner].name,i=c.split(" ").map(u=>u[0]).join("")}const s=t.hand?t.hand+" ":"",o=t.result||"",a=o?`${i}: ${s}${o}`:"";r=r=="0-0"?"GAME":r,t.tiebreak&&(t.server&&(r=`&nbsp;${r}*`),t.server||(r=`*${r}&nbsp;`));const l=t.rally?t.rally.length+1:"";return`
    <div class='flexrows ph_episode' pointIndex="${t.index}">
        <div class='ph_point_${n} flexrows'>
          <div class='viewEditPoint ph_result'>${a}</div>
          <div class='viewEditPoint ph_score'>${r} </div>
          <div class='viewEditPoint ph_score'>${l}</div>
        </div>
    </div>
    `}function gl(){const t=w.match.history.points().map(i=>i.uts),e=Math.min(...t),r=(Math.max(...t)-e)/1e3;return yl(r)}function yl(t){const e=parseInt(t,10);let n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),i=e-n*3600-r*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i}function Ci(t){t=t||w.match.history.action("addPoint");const e=[{points:[]}];let n=0,r=0;return t==null||t.forEach(i=>{const s=i.point;s.game!=r&&(n+=1,r=s.game,e[n]={points:[]}),e[n].points.push(s),e[n].index=n,e[n].set=i.set.index,e[n].score=i.game.games,e[n].complete=i.game.complete,i.game.complete&&(e[n].winner=s.winner),i.set.complete&&(e[n].last_game=!0)}),e}function Pe(){Array.from(document.querySelectorAll(".modal")).forEach(t=>t.style.display="none")}function hr(){const t=w.match.score(),e=t.counters.sets,n=t.counters.games,r=t.points.split("-"),i=w.swap_sides?1:0,s=w.swap_sides?0:1;Array.from(document.getElementsByClassName("points")).forEach((_,A)=>{_.value=r[w.swap_sides?1-A:A]}),Array.from(document.querySelectorAll(".display_points_0")).forEach(_=>_.innerHTML=r[i]),Array.from(document.querySelectorAll(".display_points_1")).forEach(_=>_.innerHTML=r[s]),Array.from(document.querySelectorAll(".display_games_0")).forEach(_=>_.innerHTML=n[i]),Array.from(document.querySelectorAll(".display_games_1")).forEach(_=>_.innerHTML=n[s]),Array.from(document.querySelectorAll(".display_sets_0")).forEach(_=>_.innerHTML=e[i]),Array.from(document.querySelectorAll(".display_sets_1")).forEach(_=>_.innerHTML=e[s]);const d=t.components.sets,p=w.match.format.threshold(),m=p==1?0:p>2?4:2;[0,1,2,3,4].forEach(_=>{(!d||d&&!d[_])&&(Array.from(document.getElementsByClassName("games"+_)).forEach(O=>O.value="-"),Array.from(document.getElementsByClassName("display_set_"+_+"_games_0")).forEach(O=>O.innerHTML=_>m?" ":"-"),Array.from(document.getElementsByClassName("display_set_"+_+"_games_1")).forEach(O=>O.innerHTML=_>m?" ":"-"))}),d&&d.forEach((_,A)=>{Array.from(document.getElementsByClassName("games"+A)).forEach((L,v)=>L.value=_.games[w.swap_sides?1-v:v]),Array.from(document.getElementsByClassName("display_set_"+A+"_games_0")).forEach(L=>L.innerHTML=_.games[w.swap_sides?1:0]),Array.from(document.getElementsByClassName("display_set_"+A+"_games_1")).forEach(L=>L.innerHTML=_.games[w.swap_sides?0:1])})}function dr(){w.match.metadata.players().forEach((s,o)=>{["hand","entry","seed","draw_position","ioc","rank"].forEach(l=>{const c=`player${o}_${l}`,u=document.getElementById(c);u&&(u.value=s[l]||"")})});const e=w.match.metadata.defineMatch();["court","umpire"].forEach(s=>{const o=`match_${s}`,a=document.getElementById(o);a&&(a.value=e[s]||"")});const r=w.match.metadata.defineTournament();["name","start_date","tour","rank","surface","in_out","draw","draw_size","round"].forEach(s=>{const o=`tournament_${s}`,a=document.getElementById(o);a&&(a.value=r[s]||"")})}function Zt(){Re(),w.serve2nd=!1,w.rally_mode=!1,Oi(),hr(),pr()}function pr(){const t=w.match.history.action("addPoint"),e=JSON.parse(rt.get("match_archive")||"[]");Array.from(document.querySelectorAll(".view_stats")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".change_server")).forEach(s=>s.style.display=t.length==0?"inline":"none"),Array.from(document.querySelectorAll(".view_archive")).forEach(s=>s.style.display=t.length==0&&e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_settings")).forEach(s=>s.style.display=t.length==0&&!e.length?"inline":"none"),Array.from(document.querySelectorAll(".view_history")).forEach(s=>s.style.display=t.length>0?"inline":"none"),Array.from(document.querySelectorAll(".undo")).forEach(s=>{s.style.display=t.length>0||w.serve2nd||w.rally_mode?"flex":"none"}),Array.from(document.querySelectorAll(".redo")).forEach(s=>{s.style.display=w.undone.length?"flex":"none"});const n=t.length?t[t.length-1]:void 0,r=i();w.match.status=r,Array.from(document.querySelectorAll(".status_message")).forEach(s=>s.innerHTML=r);function i(){if(n){if(n.needed.points_to_set&&Math.min(...n.needed.points_to_set)==1)return"SET POINT";if(n.point.breakpoint)return"BREAK POINT";if(n.needed.points_to_game&&n.needed.points_to_game[n.point.server]==1)return"GAME POINT"}return w.lets?`Lets: ${w.lets}`:""}}function Oi(){w.match.nextTeamServing()!=w.serving&&setTimeout(()=>gr(),400),mr(),fr()}function mr(){const t=w.swap_sides?1-w.serving:w.serving,e=w.swap_sides?1-w.receiving:w.receiving;Array.from(document.querySelectorAll(".fault")).forEach(u=>u.innerHTML="Fault");const n=`.modeaction_player${t}`;Array.from(document.querySelectorAll(n)).forEach(u=>u.innerHTML="Serve");const r=`.modeerr_player${t}`;Array.from(document.querySelectorAll(r)).forEach(u=>u.innerHTML="Fault");const i=`.modewin_player${t}`;Array.from(document.querySelectorAll(i)).forEach(u=>u.innerHTML="Ace");const s=`.modeforce_player${t}`;Array.from(document.querySelectorAll(s)).forEach(u=>u.innerHTML="Let");const o=`.modeaction_player${e}`;Array.from(document.querySelectorAll(o)).forEach(u=>u.innerHTML="Return");const a=`.modeerr_player${e}`;Array.from(document.querySelectorAll(a)).forEach(u=>u.innerHTML="UFE");const l=`.modewin_player${e}`;Array.from(document.querySelectorAll(l)).forEach(u=>u.innerHTML="Winner");const c=`.modeforce_player${e}`;Array.from(document.querySelectorAll(c)).forEach(u=>u.innerHTML="Forced"),Array.from(document.querySelectorAll(".vs_point_button")).forEach(u=>u.style.display=Bt.point_buttons?"flex":"none"),Array.from(document.querySelectorAll(".rally")).forEach(u=>u.innerHTML="Rally")}function gr(){if(w.serving=w.match.nextTeamServing(),w.receiving=w.match.nextTeamReceiving(),Bt.auto_swap_sides){const r=Ci();let i=r.length;r[r.length-1].complete&&(i+=1),w.match_swap=_l(i)}else w.match_swap=!1;Zo();const t=w.swap_sides?1-w.serving:w.serving,e=w.swap_sides?1-w.receiving:w.receiving;Cs(`.indicate_serve.display_player_${t}`,"yellow"),Cs(`.indicate_serve.display_player_${e}`,"white"),t?(xn(".display_0_serving","none"),xn(".display_1_serving","flex")):(xn(".display_0_serving","flex"),xn(".display_1_serving","none")),Array.from(document.getElementsByClassName("points")).forEach((r,i)=>{const s=w.swap_sides?1-i:i;r.style.backgroundColor=s==w.serving?"#FBF781":"#D1FBFB"}),mr()}function _l(t){return![!0].concat([...Array(t).keys()].map(n=>(n+1)%4<2))[t]}function Zo(){w.swap_sides=w.match_swap,on.user_swap&&(w.swap_sides=!w.swap_sides),Zt()}function Cs(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.color=e)}function xn(t,e){Array.from(document.querySelectorAll(t)).forEach(r=>r.style.display=e)}function vl(t){if(t.keyCode==13||t.code==9){const e=document.getElementById("player_hand");e&&e.focus(),Qo()}}function Qo(){const t=document.getElementById("playername");t&&w.match.metadata.definePlayer({index:w.edit_player,name:t.value}),fr()}function bl(){Pe();const t=document.getElementById("matchdeets");t&&(t.style.display="flex");const e=document.getElementById("matchdetail_content");e&&(e.scrollTop=0)}const wl="/assets/exportwhite-3Rc7oKSc.png",xl="/assets/recycle-rzIDJowx.png";function kl(t){t=t||rt.get("current_match"),Array.from(document.querySelectorAll(".mh_export")).forEach(a=>a.style.display="none");const e=rt.get(t),n=`
   <p>&nbsp;</p>
   <h1>Export Options</h1>
   <p>Supported by your device</p>
`,r=`
   <div matchId="${t}" class="exportMatch flexcenter">
      <div matchId="${t}" class='exportMatch export_action action_icon iconsave'></div>
   </div>
`,i=`
   <div class="flexcenter">
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
         <div class='export_action action_icon iconclipboard'></div> 
      </button>
   </div> 
`,s=`<div>${n}<div class="flexrows flexcenter">${Ti.isIDevice?"":r}${i}</div></div>`;Ut(s,e)}const Ht={hasClass:function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){if(this.hasClass(t,e))return;const n=t.className.split(" ");n.push(e),t.className=n.join(" ")},removeClass:function(t,e){if(!this.hasClass(t,e))return;const n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n,"")}},Al={init:t=>{let e=0,n=0;t.buttons.forEach(i=>{i.side=="right"&&(e+=i.width||0),i.side=="left"&&(n+=i.width||0)});const r=Array.from(document.querySelectorAll(t.container));r.forEach(i=>{let s=0,o=0,a=null,l=0,c=0;t.buttons.forEach(u=>{const f=document.createElement("div");f.textContent=u.text,f.className=u.class,u.side=="right"&&(l+=u.width||0,f.style.right=-1*l+"px"),u.side=="left"&&(c+=u.width||0,f.style.left=-1*c+"px");const h=i.appendChild(f);if(u.image){const d=document.createElement("img");d.src=u.image,d.className=u.image_class,h.appendChild(d)}}),i.style.webkitTransform="translateZ(0)",i.style.transform="translateZ(0)",i.addEventListener("touchstart",function(u){i.style.transitionDuration="0ms",r.forEach(h=>{Ht.hasClass(h,"move-out-click")&&h!=i&&(h.style.transitionDuration="325ms",h.style.webkitTransform="translateX(0px)",h.style.transform="translateX(0px)",Ht.removeClass(h,"move-out-click"))});const f=u.changedTouches;a={x:f[0].pageX,y:f[0].pageY}},!0),i.addEventListener("touchmove",function(u){if(a===null)return;const f=u.changedTouches,h=f[0].pageX,d=f[0].pageY;if(s=h-a.x,o=d-a.y,Math.abs(s)>Math.abs(o)){if(s>0){if(Ht.hasClass(i,"move-out-click")){const p=s>e?0:-e+s;i.style.transform="translateX("+p+"px)"}else if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}if(s<0)if(Ht.hasClass(i,"move-out-click")){if(n){const p=Math.abs(s)>e?e:s;i.style.transform="translateX("+p+"px)"}}else{const p=Math.abs(s)>e?-e:s;i.style.transform="translateX("+p+"px)"}}},!0),i.addEventListener("touchend",function(){if(a!==null){if(i.style.transitionDuration="125ms",Ht.hasClass(i,"move-out-click")){if(s>0&&e){const u=s>10?0:-e;i.style.transform="translateX("+u+"px)",u===0&&Ht.removeClass(i,"move-out-click")}else if(n){const u=s<-10?0:e;i.style.transform="translateX("+u+"px)",u===0&&Ht.removeClass(i,"move-out-click")}}else if(s<0&&e){const u=Math.abs(s)>e/2?-e:0;i.style.transform="translateX("+u+"px)",u!==0&&Ht.addClass(i,"move-out-click")}else if(n){const u=Math.abs(s)>e/2?e:0;i.style.transform="translateX("+u+"px)",u!==0&&Ht.addClass(i,"move-out-click")}a=null,s=0}},!0),i.addEventListener("touchcancel",function(){i.style.transitionDuration="225ms",i.style.webkitTransform="translateX(0px)",i.style.transform="translateX(0px)",Ht.removeClass(i,"move-out-click"),a=null,s=0},!0)})}};function ta(){w.match.events.addPoint(Zt),w.match.events.undo(Zt),w.match.events.reset(Sl)}function Sl(){w.match.set.perspectiveScore(!1),w.match.set.liveStats(!0),w.match.metadata.timestamps(!0),w.match.metadata.defineMatch({date:null}),w.serve2nd=!1,w.rally_mode=!1,w.serving=w.match.nextTeamServing(),w.receiving=w.match.nextTeamReceiving(),w.undone=[],w.rally=0,w.lets=0,Ni(),fr(),gr(),Zt()}function Ni(){Object.keys(Et).forEach(t=>ea(t))}function ea(t){const e=document.getElementById(t);e&&Et!=null&&Et[t]&&Et[t].color&&(e.style.backgroundColor="white",e.style.color=Et[t].color,e.style.borderColor=Et[t].color)}function yr(){const t=[];for(let s=0;s<256;s++)t[s]=(s<16?"0":"")+s.toString(16);const e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return t[e&255]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[n&255]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[r&63|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[i&255]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}function Li(t,e="entry"){if(!t){gt("entry");return}w.match.reset();const n=rt.get(t),r=n&&il(n)&&t?JSON.parse(rt.get(t)??"[]"):void 0;if(!r){gt("entry");return}if(ll(),rt.set("current_match",t),r.match&&(r.match.muid||(r.match.muid=yr(),rt.remove(t)),w.match.metadata.defineMatch(r.match)),r.first_service&&w.match.set.firstService(r.first_service),r.tournament&&w.match.metadata.defineTournament(r.tournament),r.format){w.match.format.settings(r.format);const i=document.getElementById("md_format");i&&(i.innerHTML=r.format.name)}r.version||r.points.forEach(i=>w.match.addPoint(i)),w.match.metadata.timestamps(!0),r.players&&r.players.forEach((i,s)=>{i.index=s,w.match.metadata.definePlayer(i)}),fr(),hr(),dr(),Zt(),ta(),gt(e)}function na(t){const e=t==null?void 0:t.active;let n="<div class='swipe-panel no-top'>";const r=JSON.parse(rt.get("match_archive")||"[]").filter((s,o,a)=>a.lastIndexOf(s)==o).reverse();if(!r.length){Pi();return}if(e)return;r.forEach(s=>{const o=s&&JSON.parse(rt.get(s)??"[]");o?n+=Ml(s,o):rt.remove(s)}),n+="</div>";const i=document.getElementById("matcharchiveList");return i&&(i.innerHTML=n),Al.init({container:".swipe-item",buttons:[{class:"img_export swipe_img",image_class:"export_icon",image:wl,side:"right",width:60},{class:"img_recycle swipe_img",image_class:"recycle_icon",image:xl,side:"right",width:60}]}),i&&i.addEventListener("click",function(s){var c,u;const o=Hn(s.target,"swipe-item"),a=o==null?void 0:o.getAttribute("muid");if(Hn(s.target,"mh_match"))return Li(a);(((u=(c=s==null?void 0:s.target)==null?void 0:c.className)==null?void 0:u.indexOf("img_export"))>=0||s.target.className=="export_icon")&&(o.classList.remove("move-out-click"),o.style.webkitTransitionDuration="125ms",o.style.transitionDuration="125ms",o.style.webkitTransform="translateX(0px)",o.style.transform="translateX(0px)",kl(a)),(s.target.className.indexOf("img_recycle")>=0||s.target.className=="recycle_icon")&&(El(a),o.remove())}),r}function El(t){rt.remove(t);const e=rt.get("current_match");let n=JSON.parse(rt.get("match_archive")||"[]");n=n.filter(r=>t!=r),rt.set("match_archive",JSON.stringify(n)),t==e&&Ri(),na({active:!0})}function Ri(t){w.match.reset(),dr(),hr();const e=new Date().valueOf();t=t||yr(),w.match.metadata.defineMatch({muid:t,date:e}),rt.set("current_match",t),Zt()}function Pi(t){Ri(),gt(t?"entry":"matchformat")}const Tl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ml(t,e){const n=new Date(e.match.date),r=[n.getDate(),Tl[n.getMonth()],n.getFullYear()].join("-"),i=e.players,s=`
         <span class='nowrap'>${sn(i[0].name)}</span>
         <span> v. </span>
         <span class='nowrap'>${sn(i[1].name)}</span>
         `,o=e.scoreboard,a=e.format.name;return`
      <div id='match_${t}' muid='${t}' class='flexcenter mh_swipe swipe-item'>
         <div class='flexcols mh_match'>
            <div class='mh_players'>${s}</div>
            <div class='mh_details'>
               <div>${r}</div>
               <div class='mh_format'>${a}</div>
            </div>
            <div class='mh_score'>${o}</div>
         </div>
      </div>`}function Cl(){const t=w.match.format.types();let e="";if(!t.length)return!1;t.forEach(r=>{e+=Ol(r)});const n=document.getElementById("matchformatlist");n&&(n.innerHTML=e)}function Ol(t){const{name:e,description:n}=Ko.formats().matches[t];return`
  <div class='changeFormat flexjustifystart mf_format' newFormat="${t}">
      <div class='changeFormat flexcols'>
        <div class='changeFormat mf_name'> <b class='changeFormat'>${e||""}</b> </div>
        <div class='changeFormat mf_description'> ${n} </div>
      </div>
  </div>
  `}function ra(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Nl(t){return t.length===1&&(t=Ll(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function Ll(t){return function(e,n){return ra(t(e),n)}}var Rl=Nl(ra),Pl=Rl.right;function Ft(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Il=Math.sqrt(50),Dl=Math.sqrt(10),Fl=Math.sqrt(2);function Bl(t,e,n){var r=Gn(t,e,n);return Ft(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function Gn(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Il?i*=10:s>=Dl?i*=5:s>=Fl&&(i*=2),e<t?-i:i}var Mr=Array.prototype.slice;function Os(t){return t}var Cr=1,Or=2,ti=3,Xe=4,Ns=1e-6;function Ul(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function Hl(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function $l(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function zl(){return!this.__axis}function ia(t,e){var n=[],r=null,i=null,s=6,o=6,a=3;function l(c){var u=r??(e.ticks?e.ticks.apply(e,n):e.domain()),f=i??(e.tickFormat?e.tickFormat.apply(e,n):Os),h=Math.max(s,0)+a,d=t===Cr||t===ti?Ul:Hl,p=e.range(),m=p[0]+.5,_=p[p.length-1]+.5,A=(e.bandwidth?$l:Os)(e.copy()),k=c.selection?c.selection():c,x=k.selectAll(".domain").data([null]),O=k.selectAll(".tick").data(u,e).order(),L=O.exit(),v=O.enter().append("g").attr("class","tick"),y=O.select("line"),g=O.select("text"),P=t===Cr||t===Xe?-1:1,G,V=t===Xe||t===Or?(G="x","y"):(G="y","x");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),O=O.merge(v),y=y.merge(v.append("line").attr("stroke","#000").attr(G+"2",P*s).attr(V+"1",.5).attr(V+"2",.5)),g=g.merge(v.append("text").attr("fill","#000").attr(G,P*h).attr(V,.5).attr("dy",t===Cr?"0em":t===ti?"0.71em":"0.32em")),c!==k&&(x=x.transition(c),O=O.transition(c),y=y.transition(c),g=g.transition(c),L=L.transition(c).attr("opacity",Ns).attr("transform",function(Z){return d(A,this.parentNode.__axis||A,Z)}),v.attr("opacity",Ns).attr("transform",function(Z){return d(this.parentNode.__axis||A,A,Z)})),L.remove(),x.attr("d",t===Xe||t==Or?"M"+P*o+","+m+"H0.5V"+_+"H"+P*o:"M"+m+","+P*o+"V0.5H"+_+"V"+P*o),O.attr("opacity",1).attr("transform",function(Z){return d(A,A,Z)}),y.attr(G+"2",P*s),g.attr(G,P*h).text(f),k.filter(zl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Or?"start":t===Xe?"end":"middle"),k.each(function(){this.__axis=A})}return l.scale=function(c){return arguments.length?(e=c,l):e},l.ticks=function(){return n=Mr.call(arguments),l},l.tickArguments=function(c){return arguments.length?(n=c==null?[]:Mr.call(c),l):n.slice()},l.tickValues=function(c){return arguments.length?(r=c==null?null:Mr.call(c),l):r&&r.slice()},l.tickFormat=function(c){return arguments.length?(i=c,l):i},l.tickSize=function(c){return arguments.length?(s=o=+c,l):s},l.tickSizeInner=function(c){return arguments.length?(s=+c,l):s},l.tickSizeOuter=function(c){return arguments.length?(o=+c,l):o},l.tickPadding=function(c){return arguments.length?(a=+c,l):a},l}function Gl(t){return ia(ti,t)}function ql(t){return ia(Xe,t)}var Wl={value:function(){}};function sa(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Pn(n)}function Pn(t){this._=t}function Yl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pn.prototype=sa.prototype={constructor:Pn,on:function(t,e){var n=this._,r=Yl(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Vl(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Ls(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ls(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Vl(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ls(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Wl,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ei="http://www.w3.org/1999/xhtml";const Rs={svg:"http://www.w3.org/2000/svg",xhtml:ei,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _r(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Rs.hasOwnProperty(e)?{space:Rs[e],local:t}:t}function Xl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ei&&e.documentElement.namespaceURI===ei?e.createElement(t):e.createElementNS(n,t)}}function Kl(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function oa(t){var e=_r(t);return(e.local?Kl:Xl)(e)}var Jl=0;function Ps(){this._="@"+(++Jl).toString(36)}Ps.prototype={constructor:Ps,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var aa=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var Ue=document.documentElement;if(!Ue.matches){var jl=Ue.webkitMatchesSelector||Ue.msMatchesSelector||Ue.mozMatchesSelector||Ue.oMatchesSelector;aa=function(t){return function(){return jl.call(this,t)}}}}const ca=aa;var la={};if(typeof document<"u"){var Zl=document.documentElement;"onmouseenter"in Zl||(la={mouseenter:"mouseover",mouseleave:"mouseout"})}function Ql(t,e,n){return t=ua(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function ua(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function tu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function nu(t,e,n){var r=la.hasOwnProperty(t.type)?Ql:ua;return function(i,s,o){var a=this.__on,l,c=r(e,s,o);if(a){for(var u=0,f=a.length;u<f;++u)if((l=a[u]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},a?a.push(l):this.__on=[l]}}function ru(t,e,n){var r=tu(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?nu:eu,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}function iu(){}function Ii(t){return t==null?iu:function(){return this.querySelector(t)}}function su(t){typeof t!="function"&&(t=Ii(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new At(r,this._parents)}function ou(){return[]}function fa(t){return t==null?ou:function(){return this.querySelectorAll(t)}}function au(t){typeof t!="function"&&(t=fa(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new At(r,i)}function cu(t){typeof t!="function"&&(t=ca(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new At(r,this._parents)}function ha(t){return new Array(t.length)}function lu(){return new At(this._enter||this._groups.map(ha),this._parents)}function qn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qn.prototype={constructor:qn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function uu(t){return function(){return t}}var Is="$";function fu(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new qn(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function hu(t,e,n,r,i,s,o){var a,l,c={},u=e.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(h[a]=d=Is+o.call(l,l.__data__,a,e),d in c?i[a]=l:c[d]=l);for(a=0;a<f;++a)d=Is+o.call(t,s[a],a,s),(l=c[d])?(r[a]=l,l.__data__=s[a],c[d]=null):n[a]=new qn(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c[h[a]]===l&&(i[a]=l)}function du(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(v){d[++c]=v}),d;var n=e?hu:fu,r=this._parents,i=this._groups;typeof t!="function"&&(t=uu(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=t.call(u,u&&u.__data__,c,r),p=d.length,m=a[c]=new Array(p),_=o[c]=new Array(p),A=l[c]=new Array(h);n(u,f,m,_,A,d,e);for(var k=0,x=0,O,L;k<p;++k)if(O=m[k]){for(k>=x&&(x=k+1);!(L=_[x])&&++x<p;);O._next=L||null}}return o=new At(o,r),o._enter=a,o._exit=l,o}function pu(){return new At(this._exit||this._groups.map(ha),this._parents)}function mu(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new At(o,this._parents)}function gu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o);return this}function yu(t){t||(t=_u);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new At(i,this._parents).order()}function _u(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function vu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bu(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function wu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function xu(){var t=0;return this.each(function(){++t}),t}function ku(){return!this.node()}function Au(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function Su(t){return function(){this.removeAttribute(t)}}function Eu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tu(t,e){return function(){this.setAttribute(t,e)}}function Mu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ou(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Nu(t,e){var n=_r(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Eu:Su:typeof e=="function"?n.local?Ou:Cu:n.local?Mu:Tu)(n,e))}function dn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Lu(t){return function(){this.style.removeProperty(t)}}function Ru(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pu(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Iu(t,e,n){var r;return arguments.length>1?this.each((e==null?Lu:typeof e=="function"?Pu:Ru)(t,e,n??"")):dn(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function Du(t){return function(){delete this[t]}}function Fu(t,e){return function(){this[t]=e}}function Bu(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Uu(t,e){return arguments.length>1?this.each((e==null?Du:typeof e=="function"?Bu:Fu)(t,e)):this.node()[t]}function da(t){return t.trim().split(/^|\s+/)}function Di(t){return t.classList||new pa(t)}function pa(t){this._node=t,this._names=da(t.getAttribute("class")||"")}pa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ma(t,e){for(var n=Di(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ga(t,e){for(var n=Di(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Hu(t){return function(){ma(this,t)}}function $u(t){return function(){ga(this,t)}}function zu(t,e){return function(){(e.apply(this,arguments)?ma:ga)(this,t)}}function Gu(t,e){var n=da(t+"");if(arguments.length<2){for(var r=Di(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?zu:e?Hu:$u)(n,e))}function qu(){this.textContent=""}function Wu(t){return function(){this.textContent=t}}function Yu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Vu(t){return arguments.length?this.each(t==null?qu:(typeof t=="function"?Yu:Wu)(t)):this.node().textContent}function Xu(){this.innerHTML=""}function Ku(t){return function(){this.innerHTML=t}}function Ju(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ju(t){return arguments.length?this.each(t==null?Xu:(typeof t=="function"?Ju:Ku)(t)):this.node().innerHTML}function Zu(){this.nextSibling&&this.parentNode.appendChild(this)}function Qu(){return this.each(Zu)}function tf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ef(){return this.each(tf)}function nf(t){var e=typeof t=="function"?t:oa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function rf(){return null}function sf(t,e){var n=typeof t=="function"?t:oa(t),r=e==null?rf:typeof e=="function"?e:Ii(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function of(){var t=this.parentNode;t&&t.removeChild(this)}function af(){return this.each(of)}function cf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ya(t,e,n){var r=dn(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function lf(t,e){return function(){return ya(this,t,e)}}function uf(t,e){return function(){return ya(this,t,e.apply(this,arguments))}}function ff(t,e){return this.each((typeof e=="function"?uf:lf)(t,e))}var Fi=[null];function At(t,e){this._groups=t,this._parents=e}function pn(){return new At([[document.documentElement]],Fi)}At.prototype=pn.prototype={constructor:At,select:su,selectAll:au,filter:cu,data:du,enter:lu,exit:pu,merge:mu,order:gu,sort:yu,call:vu,nodes:bu,node:wu,size:xu,empty:ku,each:Au,attr:Nu,style:Iu,property:Uu,classed:Gu,text:Vu,html:ju,raise:Qu,lower:ef,append:nf,insert:sf,remove:af,datum:cf,on:ru,dispatch:ff};function at(t){return typeof t=="string"?new At([[document.querySelector(t)]],[document.documentElement]):new At([[t]],Fi)}function ni(t){return typeof t=="string"?new At([document.querySelectorAll(t)],[document.documentElement]):new At([t??[]],Fi)}function Ie(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function se(){}var le=.7,Te=1/le,ke="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hf=/^#([0-9a-f]{3})$/,df=/^#([0-9a-f]{6})$/,pf=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),mf=new RegExp("^rgb\\("+[Gt,Gt,Gt]+"\\)$"),gf=new RegExp("^rgba\\("+[ke,ke,ke,an]+"\\)$"),yf=new RegExp("^rgba\\("+[Gt,Gt,Gt,an]+"\\)$"),_f=new RegExp("^hsl\\("+[an,Gt,Gt]+"\\)$"),vf=new RegExp("^hsla\\("+[an,Gt,Gt,an]+"\\)$"),Ds={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ie(se,ue,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function ue(t){var e;return t=(t+"").trim().toLowerCase(),(e=hf.exec(t))?(e=parseInt(e[1],16),new bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1)):(e=df.exec(t))?Fs(parseInt(e[1],16)):(e=pf.exec(t))?new bt(e[1],e[2],e[3],1):(e=mf.exec(t))?new bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gf.exec(t))?Bs(e[1],e[2],e[3],e[4]):(e=yf.exec(t))?Bs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_f.exec(t))?Us(e[1],e[2]/100,e[3]/100,1):(e=vf.exec(t))?Us(e[1],e[2]/100,e[3]/100,e[4]):Ds.hasOwnProperty(t)?Fs(Ds[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function Fs(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function Bs(t,e,n,r){return r<=0&&(t=e=n=NaN),new bt(t,e,n,r)}function Bi(t){return t instanceof se||(t=ue(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function ri(t,e,n,r){return arguments.length===1?Bi(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ie(bt,ri,mn(se,{brighter:function(t){return t=t==null?Te:Math.pow(Te,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?le:Math.pow(le,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function Us(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $t(t,e,n,r)}function bf(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);if(t instanceof se||(t=ue(t)),!t)return new $t;if(t instanceof $t)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new $t(o,a,l,t.opacity)}function wf(t,e,n,r){return arguments.length===1?bf(t):new $t(t,e,n,r??1)}function $t(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie($t,wf,mn(se,{brighter:function(t){return t=t==null?Te:Math.pow(Te,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?le:Math.pow(le,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bt(Nr(t>=240?t-240:t+120,i,r),Nr(t,i,r),Nr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));function Nr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var _a=Math.PI/180,va=180/Math.PI,Wn=18,ba=.95047,wa=1,xa=1.08883,ka=4/29,Ae=6/29,Aa=3*Ae*Ae,xf=Ae*Ae*Ae;function Ui(t){if(t instanceof Xt)return new Xt(t.l,t.a,t.b,t.opacity);if(t instanceof re){var e=t.h*_a;return new Xt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof bt||(t=Bi(t));var n=Ir(t.r),r=Ir(t.g),i=Ir(t.b),s=Lr((.4124564*n+.3575761*r+.1804375*i)/ba),o=Lr((.2126729*n+.7151522*r+.072175*i)/wa),a=Lr((.0193339*n+.119192*r+.9503041*i)/xa);return new Xt(116*o-16,500*(s-o),200*(o-a),t.opacity)}function kf(t,e,n,r){return arguments.length===1?Ui(t):new Xt(t,e,n,r??1)}function Xt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Ie(Xt,kf,mn(se,{brighter:function(t){return new Xt(this.l+Wn*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new Xt(this.l-Wn*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=wa*Rr(t),e=ba*Rr(e),n=xa*Rr(n),new bt(Pr(3.2404542*e-1.5371385*t-.4985314*n),Pr(-.969266*e+1.8760108*t+.041556*n),Pr(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}}));function Lr(t){return t>xf?Math.pow(t,1/3):t/Aa+ka}function Rr(t){return t>Ae?t*t*t:Aa*(t-ka)}function Pr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ir(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Af(t){if(t instanceof re)return new re(t.h,t.c,t.l,t.opacity);t instanceof Xt||(t=Ui(t));var e=Math.atan2(t.b,t.a)*va;return new re(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ii(t,e,n,r){return arguments.length===1?Af(t):new re(t,e,n,r??1)}function re(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Ie(re,ii,mn(se,{brighter:function(t){return new re(this.h,this.c,this.l+Wn*(t??1),this.opacity)},darker:function(t){return new re(this.h,this.c,this.l-Wn*(t??1),this.opacity)},rgb:function(){return Ui(this).rgb()}}));var Sa=-.14861,Hi=1.78277,$i=-.29227,vr=-.90649,cn=1.97294,Hs=cn*vr,$s=cn*Hi,zs=Hi*$i-vr*Sa;function Sf(t){if(t instanceof ce)return new ce(t.h,t.s,t.l,t.opacity);t instanceof bt||(t=Bi(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(zs*r+Hs*e-$s*n)/(zs+Hs-$s),s=r-i,o=(cn*(n-i)-$i*s)/vr,a=Math.sqrt(o*o+s*s)/(cn*i*(1-i)),l=a?Math.atan2(o,s)*va-120:NaN;return new ce(l<0?l+360:l,a,i,t.opacity)}function Wt(t,e,n,r){return arguments.length===1?Sf(t):new ce(t,e,n,r??1)}function ce(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie(ce,Wt,mn(se,{brighter:function(t){return t=t==null?Te:Math.pow(Te,t),new ce(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?le:Math.pow(le,t),new ce(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*_a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new bt(255*(e+n*(Sa*r+Hi*i)),255*(e+n*($i*r+vr*i)),255*(e+n*(cn*r)),this.opacity)}}));function br(t){return function(){return t}}function Ea(t,e){return function(n){return t+n*e}}function Ef(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ta(t,e){var n=e-t;return n?Ea(t,n>180||n<-180?n-360*Math.round(n/360):n):br(isNaN(t)?e:t)}function Tf(t){return(t=+t)==1?Jt:function(e,n){return n-e?Ef(e,n,t):br(isNaN(e)?n:e)}}function Jt(t,e){var n=e-t;return n?Ea(t,n):br(isNaN(t)?e:t)}const Yn=function t(e){var n=Tf(e);function r(i,s){var o=n((i=ri(i)).r,(s=ri(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Jt(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Mf(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(n),s=new Array(n),o;for(o=0;o<r;++o)i[o]=zi(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Cf(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function Dt(t,e){return t=+t,e-=t,function(n){return t+e*n}}function Of(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=zi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var si=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dr=new RegExp(si.source,"g");function Nf(t){return function(){return t}}function Lf(t){return function(e){return t(e)+""}}function Ma(t,e){var n=si.lastIndex=Dr.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=si.exec(t))&&(i=Dr.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Dt(r,i)})),n=Dr.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Lf(l[0].x):Nf(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function zi(t,e){var n=typeof e,r;return e==null||n==="boolean"?br(e):(n==="number"?Dt:n==="string"?(r=ue(e))?(e=r,Yn):Ma:e instanceof ue?Yn:e instanceof Date?Cf:Array.isArray(e)?Mf:isNaN(e)?Of:Dt)(t,e)}function Rf(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}var Gs=180/Math.PI,oi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ca(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Gs,skewX:Math.atan(l)*Gs,scaleX:o,scaleY:a}}var He,Fr,qs,kn;function Pf(t){return t==="none"?oi:(He||(He=document.createElement("DIV"),Fr=document.documentElement,qs=document.defaultView),He.style.transform=t,t=qs.getComputedStyle(Fr.appendChild(He),null).getPropertyValue("transform"),Fr.removeChild(He),t=t.slice(7,-1).split(","),Ca(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function If(t){return t==null||(kn||(kn=document.createElementNS("http://www.w3.org/2000/svg","g")),kn.setAttribute("transform",t),!(t=kn.transform.baseVal.consolidate()))?oi:(t=t.matrix,Ca(t.a,t.b,t.c,t.d,t.e,t.f))}function Oa(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Dt(c,f)},{i:m-2,x:Dt(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Dt(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Dt(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Dt(c,f)},{i:m-2,x:Dt(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,m=h.length,_;++p<m;)f[(_=h[p]).i]=_.x(d);return f.join("")}}}var Df=Oa(Pf,"px, ","px)","deg)"),Ff=Oa(If,", ",")",")");function Bf(t){return function(e,n){var r=t((e=ii(e)).h,(n=ii(n)).h),i=Jt(e.c,n.c),s=Jt(e.l,n.l),o=Jt(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const Uf=Bf(Ta);function Na(t){return function e(n){n=+n;function r(i,s){var o=t((i=Wt(i)).h,(s=Wt(s)).h),a=Jt(i.s,s.s),l=Jt(i.l,s.l),c=Jt(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}Na(Ta);var Gi=Na(Jt),Me=0,Ke=0,$e=0,La=1e3,Vn,Je,Xn=0,ie=0,qi=0,Wi=typeof performance=="object"&&performance.now?performance:Date,Ra=typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){setTimeout(t,17)};function wr(){return ie||(Ra(Hf),ie=Wi.now()+qi)}function Hf(){ie=0}function Kn(){this._call=this._time=this._next=null}Kn.prototype=Pa.prototype={constructor:Kn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?wr():+n)+(e==null?0:+e),!this._next&&Je!==this&&(Je?Je._next=this:Vn=this,Je=this),this._call=t,this._time=n,ai()},stop:function(){this._call&&(this._call=null,this._time=1/0,ai())}};function Pa(t,e,n){var r=new Kn;return r.restart(t,e,n),r}function $f(){wr(),++Me;for(var t=Vn,e;t;)(e=ie-t._time)>=0&&t._call.call(null,e),t=t._next;--Me}function Ws(){ie=(Xn=Wi.now())+qi,Me=Ke=0;try{$f()}finally{Me=0,Gf(),ie=0}}function zf(){var t=Wi.now(),e=t-Xn;e>La&&(qi-=e,Xn=t)}function Gf(){for(var t,e=Vn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Vn=n);Je=t,ai(r)}function ai(t){if(!Me){Ke&&(Ke=clearTimeout(Ke));var e=t-ie;e>24?(t<1/0&&(Ke=setTimeout(Ws,e)),$e&&($e=clearInterval($e))):($e||(Xn=ie,$e=setInterval(zf,La)),Me=1,Ra(Ws))}}function Ys(t,e,n){var r=new Kn;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var qf=sa("start","end","interrupt"),Wf=[],Ia=0,ci=1,Jn=2,Br=3,Vs=4,li=5,In=6;function xr(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Yf(t,n,{name:e,index:r,group:i,on:qf,tween:Wf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ia})}function Yi(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Ia)throw new Error("too late");return n}function fe(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Jn)throw new Error("too late");return n}function Qt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Yf(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Pa(s,0,n.time);function s(c){n.state=ci,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==ci)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Br)return Ys(o);d.state===Vs?(d.state=In,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=In,d.timer.stop(),delete r[u])}if(Ys(function(){n.state===Br&&(n.state=Vs,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Jn){for(n.state=Br,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=li,1),f=-1,h=i.length;++f<h;)i[f].call(null,u);n.state===li&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=In,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Vf(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Jn&&r.state<li,r.state=In,r.timer.stop(),i&&r.on.call("interrupt",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Xf(t){return this.each(function(){Vf(this,t)})}function Kf(t,e){var n,r;return function(){var i=fe(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Jf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fe(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function jf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Qt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Kf:Jf)(n,t,e))}function Vi(t,e,n){var r=t._id;return t.each(function(){var i=fe(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Qt(i,r).value[e]}}function Da(t,e){var n;return(typeof e=="number"?Dt:e instanceof ue?Yn:(n=ue(e))?(e=n,Yn):Ma)(t,e)}function Zf(t){return function(){this.removeAttribute(t)}}function Qf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function th(t,e,n){var r,i;return function(){var s=this.getAttribute(t);return s===n?null:s===r?i:i=e(r=s,n)}}function eh(t,e,n){var r,i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===r?i:i=e(r=s,n)}}function nh(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function rh(t,e,n){var r,i,s;return function(){var o,a=n(this);return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===a?null:o===r&&a===i?s:s=e(r=o,i=a))}}function ih(t,e){var n=_r(t),r=n==="transform"?Ff:Da;return this.attrTween(t,typeof e=="function"?(n.local?rh:nh)(n,r,Vi(this,"attr."+t,e)):e==null?(n.local?Qf:Zf)(n):(n.local?eh:th)(n,r,e))}function sh(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttributeNS(t.space,t.local,i(s))}}return n._value=e,n}function oh(t,e){function n(){var r=this,i=e.apply(r,arguments);return i&&function(s){r.setAttribute(t,i(s))}}return n._value=e,n}function ah(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=_r(t);return this.tween(n,(r.local?sh:oh)(r,e))}function ch(t,e){return function(){Yi(this,t).delay=+e.apply(this,arguments)}}function lh(t,e){return e=+e,function(){Yi(this,t).delay=e}}function uh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ch:lh)(e,t)):Qt(this.node(),e).delay}function fh(t,e){return function(){fe(this,t).duration=+e.apply(this,arguments)}}function hh(t,e){return e=+e,function(){fe(this,t).duration=e}}function dh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fh:hh)(e,t)):Qt(this.node(),e).duration}function ph(t,e){if(typeof e!="function")throw new Error;return function(){fe(this,t).ease=e}}function mh(t){var e=this._id;return arguments.length?this.each(ph(e,t)):Qt(this.node(),e).ease}function gh(t){typeof t!="function"&&(t=ca(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Yt(r,this._parents,this._name,this._id)}function yh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new Yt(o,this._parents,this._name,this._id)}function _h(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function vh(t,e,n){var r,i,s=_h(e)?Yi:fe;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function bh(t,e){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(t):this.each(vh(n,t,e))}function wh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xh(){return this.on("end.remove",wh(this._id))}function kh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ii(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,xr(c[h],e,n,h,c,Qt(u,n)));return new Yt(s,this._parents,e,n)}function Ah(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fa(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,p=Qt(u,n),m=0,_=h.length;m<_;++m)(d=h[m])&&xr(d,e,n,m,h,p);s.push(h),o.push(u)}return new Yt(s,o,e,n)}var Sh=pn.prototype.constructor;function Eh(){return new Sh(this._groups,this._parents)}function Th(t,e){var n,r,i;return function(){var s=dn(this).getComputedStyle(this,null),o=s.getPropertyValue(t),a=(this.style.removeProperty(t),s.getPropertyValue(t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Mh(t){return function(){this.style.removeProperty(t)}}function Ch(t,e,n){var r,i;return function(){var s=dn(this).getComputedStyle(this,null).getPropertyValue(t);return s===n?null:s===r?i:i=e(r=s,n)}}function Oh(t,e,n){var r,i,s;return function(){var o=dn(this).getComputedStyle(this,null),a=o.getPropertyValue(t),l=n(this);return l==null&&(l=(this.style.removeProperty(t),o.getPropertyValue(t))),a===l?null:a===r&&l===i?s:s=e(r=a,i=l)}}function Nh(t,e,n){var r=(t+="")=="transform"?Df:Da;return e==null?this.styleTween(t,Th(t,r)).on("end.style."+t,Mh(t)):this.styleTween(t,typeof e=="function"?Oh(t,r,Vi(this,"style."+t,e)):Ch(t,r,e),n)}function Lh(t,e,n){function r(){var i=this,s=e.apply(i,arguments);return s&&function(o){i.style.setProperty(t,s(o),n)}}return r._value=e,r}function Rh(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Lh(t,e,n??""))}function Ph(t){return function(){this.textContent=t}}function Ih(t){return function(){var e=t(this);this.textContent=e??""}}function Dh(t){return this.tween("text",typeof t=="function"?Ih(Vi(this,"text",t)):Ph(t==null?"":t+""))}function Fh(){for(var t=this._name,e=this._id,n=Fa(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Qt(l,e);xr(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yt(r,this._parents,t,n)}var Bh=0;function Yt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Fa(){return++Bh}var ge=pn.prototype;Yt.prototype={constructor:Yt,select:kh,selectAll:Ah,filter:gh,merge:yh,selection:Eh,transition:Fh,call:ge.call,nodes:ge.nodes,node:ge.node,size:ge.size,empty:ge.empty,each:ge.each,on:bh,attr:ih,attrTween:ah,style:Nh,styleTween:Rh,text:Dh,remove:xh,tween:jf,delay:uh,duration:dh,ease:mh};function Uh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xi=3;(function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n})(Xi);(function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n})(Xi);(function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n})(Xi);var Ki=1.70158;(function t(e){e=+e;function n(r){return r*r*((e+1)*r-e)}return n.overshoot=t,n})(Ki);(function t(e){e=+e;function n(r){return--r*r*((e+1)*r+e)+1}return n.overshoot=t,n})(Ki);(function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n})(Ki);var Ce=2*Math.PI,Ji=1,ji=.3;(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(s){return e*Math.pow(2,10*--s)*Math.sin((r-s)/n)}return i.amplitude=function(s){return t(s,n*Ce)},i.period=function(s){return t(e,s)},i})(Ji,ji);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(s){return 1-e*Math.pow(2,-10*(s=+s))*Math.sin((s+r)/n)}return i.amplitude=function(s){return t(s,n*Ce)},i.period=function(s){return t(e,s)},i})(Ji,ji);(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ce);function i(s){return((s=s*2-1)<0?e*Math.pow(2,10*s)*Math.sin((r-s)/n):2-e*Math.pow(2,-10*s)*Math.sin((r+s)/n))/2}return i.amplitude=function(s){return t(s,n*Ce)},i.period=function(s){return t(e,s)},i})(Ji,ji);var ui={time:null,delay:0,duration:250,ease:Uh};function Hh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ui.time=wr(),ui;return n}function $h(t){var e,n;t instanceof Yt?(e=t._id,t=t._name):(e=Fa(),(n=ui).time=wr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&xr(l,t,e,c,o,n||Hh(l,e));return new Yt(r,this._parents,t,e)}pn.prototype.interrupt=Xf;pn.prototype.transition=$h;var zh=[null];function Gh(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>ci&&r.name===e)return new Yt([[t]],zh,e,+i)}return null}var fi=Math.PI,hi=2*fi,_e=1e-6,qh=hi-_e;function di(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ba(){return new di}di.prototype=Ba.prototype={constructor:di,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>_e)if(!(Math.abs(u*a-l*c)>_e)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=r-o,p=a*a+l*l,m=h*h+d*d,_=Math.sqrt(p),A=Math.sqrt(f),k=i*Math.tan((fi-Math.acos((p+f-m)/(2*_*A)))/2),x=k/A,O=k/_;Math.abs(x-1)>_e&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+O*a)+","+(this._y1=e+O*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>_e||Math.abs(this._y1-c)>_e)&&(this._+="L"+l+","+c),n&&(f>qh?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):(f<0&&(f=f%hi+hi),this._+="A"+n+","+n+",0,"+ +(f>=fi)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Ot="$";function jn(){}jn.prototype=Zn.prototype={constructor:jn,has:function(t){return Ot+t in this},get:function(t){return this[Ot+t]},set:function(t,e){return this[Ot+t]=e,this},remove:function(t){var e=Ot+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Ot&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Ot&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Ot&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Ot&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Ot&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ot)return!1;return!0},each:function(t){for(var e in this)e[0]===Ot&&t(this[e],e.slice(1),this)}};function Zn(t,e){var n=new jn;if(t instanceof jn)t.each(function(a,l){n.set(l,a)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Xs(){}var ae=Zn.prototype;Xs.prototype={constructor:Xs,has:ae.has,add:function(t){return t+="",this[Ot+t]=t,this},remove:ae.remove,clear:ae.clear,values:ae.keys,size:ae.size,empty:ae.empty,each:ae.each};function Ua(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function Wh(t,e){var n=Ua(t);return function(r,i){return e(n(r),i,t)}}function Yh(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ha(t){var e=new RegExp('["'+t+`
]`),n=t.charCodeAt(0);function r(c,u){var f,h,d=i(c,function(p,m){if(f)return f(p,m-1);h=p,f=u?Wh(p,u):Ua(p)});return d.columns=h,d}function i(c,u){var f={},h={},d=[],p=c.length,m=0,_=0,A,k;function x(){if(m>=p)return h;if(k)return k=!1,f;var L=m,v;if(c.charCodeAt(L)===34){for(var y=L;y++<p;)if(c.charCodeAt(y)===34){if(c.charCodeAt(y+1)!==34)break;++y}return m=y+2,v=c.charCodeAt(y+1),v===13?(k=!0,c.charCodeAt(y+2)===10&&++m):v===10&&(k=!0),c.slice(L+1,y).replace(/""/g,'"')}for(;m<p;){var g=1;if(v=c.charCodeAt(m++),v===10)k=!0;else if(v===13)k=!0,c.charCodeAt(m)===10&&(++m,++g);else if(v!==n)continue;return c.slice(L,m-g)}return c.slice(L)}for(;(A=x())!==h;){for(var O=[];A!==f&&A!==h;)O.push(A),A=x();u&&(O=u(O,_++))==null||d.push(O)}return d}function s(c,u){return u==null&&(u=Yh(c)),[u.map(l).join(t)].concat(c.map(function(f){return u.map(function(h){return l(f[h])}).join(t)})).join(`
`)}function o(c){return c.map(a).join(`
`)}function a(c){return c.map(l).join(t)}function l(c){return c==null?"":e.test(c+="")?'"'+c.replace(/\"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatRows:o}}Ha(",");Ha("	");function Vh(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return $a(this.cover(e,n),e,n,t)}function $a(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,m,_,A,k;if(!s)return t._root=o,t;for(;s.length;)if((m=e>=(f=(a+c)/2))?a=f:c=f,(_=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[A=_<<1|m]))return i[A]=o,t;if(d=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===d&&n===p)return o.next=s,i?i[A]=o:t._root=o,t;do i=i?i[A]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+c)/2))?a=f:c=f,(_=n>=(h=(l+u)/2))?l=h:u=h;while((A=_<<1|m)===(k=(p>=h)<<1|d>=f));return i[k]=s,i[A]=o,t}function Xh(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));for(u<l&&(l=this._x0,u=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(l,c).cover(u,f),n=0;n<r;++n)$a(this,o[n],a[n],t[n]);return this}function Kh(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else if(n>t||t>i||r>e||e>s){var o=i-n,a=this._root,l,c;switch(c=(e<(r+s)/2)<<1|t<(n+i)/2){case 0:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,s=r+o,t>i||e>s);break}case 1:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,s=r+o,n>t||e>s);break}case 2:{do l=new Array(4),l[c]=a,a=l;while(o*=2,i=n+o,r=s-o,t>i||r>e);break}case 3:{do l=new Array(4),l[c]=a,a=l;while(o*=2,n=i-o,r=s-o,n>t||r>e);break}}this._root&&this._root.length&&(this._root=a)}else return this;return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Jh(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function jh(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Zh(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,m;for(d&&h.push(new xt(d,i,s,u,f)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(a=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var _=(o+l)/2,A=(a+c)/2;h.push(new xt(d[3],_,A,l,c),new xt(d[2],o,A,_,c),new xt(d[1],_,a,l,A),new xt(d[0],o,a,_,A)),(m=(e>=A)<<1|t>=_)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=p)}else{var k=t-+this._x.call(null,d.data),x=e-+this._y.call(null,d.data),O=k*k+x*x;if(O<n){var L=Math.sqrt(n=O);i=t-L,s=e-L,u=t+L,f=e+L,r=d.data}}return r}function Qh(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,m,_,A;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(m=f>=(d=(a+c)/2))?a=d:c=d,e=n,!(n=n[_=m<<1|p]))return this;if(!n.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(r=e,A=_)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[_]=s:delete e[_],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[A]=n:this._root=n),this):(this._root=s,this)}function td(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ed(){return this._root}function nd(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function rd(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new xt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new xt(i,c,u,a,l)),(i=r[2])&&e.push(new xt(i,s,u,c,l)),(i=r[1])&&e.push(new xt(i,c,o,a,u)),(i=r[0])&&e.push(new xt(i,s,o,c,u))}return this}function id(t){var e=[],n=[],r;for(this._root&&e.push(new xt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(a+c)/2;(s=i[0])&&e.push(new xt(s,o,a,u,f)),(s=i[1])&&e.push(new xt(s,u,a,l,f)),(s=i[2])&&e.push(new xt(s,o,f,u,c)),(s=i[3])&&e.push(new xt(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sd(t){return arguments.length?(this._x=t,this):this._x}function od(t){return arguments.length?(this._y=t,this):this._y}function za(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Ks(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var St=za.prototype;St.copy=function(){var t=new za(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Ks(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Ks(r));return t};St.add=Vh;St.addAll=Xh;St.cover=Kh;St.data=Jh;St.extent=jh;St.find=Zh;St.remove=Qh;St.removeAll=td;St.root=ed;St.size=nd;St.visit=rd;St.visitAfter=id;St.x=sd;St.y=od;function Qn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Oe(t){return t=Qn(Math.abs(t)),t?t[1]:NaN}function ad(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function cd(t,e){t=t.toPrecision(e);t:for(var n=t.length,r=1,i=-1,s;r<n;++r)switch(t[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break t;default:i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var Ga;function ld(t,e){var n=Qn(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Ga=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Qn(t,Math.max(0,e+s-1))[0]}function Js(t,e){var n=Qn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qa={"":cd,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Js(t*100,e)},r:Js,s:ld,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var ud=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function pi(t){return new Wa(t)}function Wa(t){if(!(e=ud.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",o=!!e[5],a=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";u==="n"?(l=!0,u="g"):qa[u]||(u=""),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=c,this.type=u}Wa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var js=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fd(t){return t}function hd(t){var e=t.grouping&&t.thousands?ad(t.grouping,t.thousands):fd,n=t.currency,r=t.decimal;function i(o){o=pi(o);var a=o.fill,l=o.align,c=o.sign,u=o.symbol,f=o.zero,h=o.width,d=o.comma,p=o.precision,m=o.type,_=u==="$"?n[0]:u==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",A=u==="$"?n[1]:/[%p]/.test(m)?"%":"",k=qa[m],x=!m||/[defgprs%]/.test(m);p=p==null?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function O(L){var v=_,y=A,g,P,G;if(m==="c")y=k(L)+y,L="";else{L=+L;var V=(L<0||1/L<0)&&(L*=-1,!0);if(L=k(L,p),V){for(g=-1,P=L.length,V=!1;++g<P;)if(G=L.charCodeAt(g),48<G&&G<58||m==="x"&&96<G&&G<103||m==="X"&&64<G&&G<71){V=!0;break}}if(v=(V?c==="("?c:"-":c==="-"||c==="("?"":c)+v,y=y+(m==="s"?js[8+Ga/3]:"")+(V&&c==="("?")":""),x){for(g=-1,P=L.length;++g<P;)if(G=L.charCodeAt(g),48>G||G>57){y=(G===46?r+L.slice(g+1):L.slice(g))+y,L=L.slice(0,g);break}}}d&&!f&&(L=e(L,1/0));var Z=v.length+L.length+y.length,Y=Z<h?new Array(h-Z+1).join(a):"";switch(d&&f&&(L=e(Y+L,Y.length?h-y.length:1/0),Y=""),l){case"<":return v+L+y+Y;case"=":return v+Y+L+y;case"^":return Y.slice(0,Z=Y.length>>1)+v+L+y+Y.slice(Z)}return Y+v+L+y}return O.toString=function(){return o+""},O}function s(o,a){var l=i((o=pi(o),o.type="f",o)),c=Math.max(-8,Math.min(8,Math.floor(Oe(a)/3)))*3,u=Math.pow(10,-c),f=js[8+c/3];return function(h){return l(u*h)+f}}return{format:i,formatPrefix:s}}var An,Ya,Va;dd({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function dd(t){return An=hd(t),Ya=An.format,Va=An.formatPrefix,An}function pd(t){return Math.max(0,-Oe(Math.abs(t)))}function md(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Oe(e)/3)))*3-Oe(Math.abs(t)))}function gd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Oe(e)-Oe(t))+1}function he(){return new tr}function tr(){this.reset()}tr.prototype={constructor:tr,reset:function(){this.s=this.t=0},add:function(t){Zs(Sn,t,this.t),Zs(this,Sn.s,this.s),this.s?this.t+=Sn.t:this.s=Sn.t},valueOf:function(){return this.s}};var Sn=new tr;function Zs(t,e,n){var r=t.s=e+n,i=r-e,s=r-i;t.t=e-s+(n-i)}var mi=Math.PI,Qs=mi*2;he();he();he();function to(t,e){return[t>mi?t-Qs:t<-mi?t+Qs:t,e]}to.invert=to;he();he();he();he();function eo(){}eo.prototype={constructor:eo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function no(t,e){return[t,e]}no.invert=no;function yd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function _d(){return this.eachAfter(yd)}function vd(t){var e=this,n,r=[e],i,s,o;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length);return this}function bd(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function wd(t){for(var e=this,n=[e],r=[],i,s,o;e=n.pop();)if(r.push(e),i=e.children,i)for(s=0,o=i.length;s<o;++s)n.push(i[s]);for(;e=r.pop();)t(e);return this}function xd(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function kd(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ad(t){for(var e=this,n=Sd(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Sd(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Ed(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Td(){var t=[];return this.each(function(e){t.push(e)}),t}function Md(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Cd(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Xa(t,e){var n=new ln(t),r=+t.value&&(n.value=t.value),i,s=[n],o,a,l,c;for(e==null&&(e=Nd);i=s.pop();)if(r&&(i.value=+i.data.value),(a=e(i.data))&&(c=a.length))for(i.children=new Array(c),l=c-1;l>=0;--l)s.push(o=i.children[l]=new ln(a[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Rd)}function Od(){return Xa(this).eachBefore(Ld)}function Nd(t){return t.children}function Ld(t){t.data=t.data.data}function Rd(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ln(t){this.data=t,this.depth=this.height=0,this.parent=null}ln.prototype=Xa.prototype={constructor:ln,count:_d,each:vd,eachAfter:wd,eachBefore:bd,sum:xd,sort:kd,path:Ad,ancestors:Ed,descendants:Td,leaves:Md,links:Cd,copy:Od};function Ka(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}Object.create(ln.prototype);function Ja(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(i-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var ja=(1+Math.sqrt(5))/2;function Za(t,e,n,r,i,s){for(var o=[],a=e.children,l,c,u=0,f=0,h=a.length,d,p,m=e.value,_,A,k,x,O,L,v;u<h;){d=i-n,p=s-r;do _=a[f++].value;while(!_&&f<h);for(A=k=_,L=Math.max(p/d,d/p)/(m*t),v=_*_*L,O=Math.max(k/v,v/A);f<h;++f){if(_+=c=a[f].value,c<A&&(A=c),c>k&&(k=c),v=_*_*L,x=Math.max(k/v,v/A),x>O){_-=c;break}O=x}o.push(l={value:_,dice:d<p,children:a.slice(u,f)}),l.dice?Ka(l,n,r,i,m?r+=p*_/m:s):Ja(l,n,r,m?n+=d*_/m:i,s),m-=_,u=f}return o}(function t(e){function n(r,i,s,o,a){Za(e,r,i,s,o,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(ja);(function t(e){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,p=l.length,m=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?Ka(c,i,s,o,s+=(a-s)*c.value/m):Ja(c,i,s,i+=(o-i)*c.value/m,a),m-=c.value}else r._squarify=l=Za(e,r,i,s,o,a),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(ja);var Pd=[].slice,Id={};function ro(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}ro.prototype={constructor:ro,defer:function(t){if(typeof t!="function"||this._call)throw new Error;if(this._error!=null)return this;var e=Pd.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Qa(this),this},abort:function(){return this._error==null&&Zi(this,new Error("abort")),this},await:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},er(this),this},awaitAll:function(t){if(typeof t!="function"||this._call)throw new Error;return this._call=t,er(this),this}};function Qa(t){if(!t._start)try{Dd(t)}catch(e){if(t._tasks[t._ended+t._active-1])Zi(t,e);else if(!t._data)throw e}}function Dd(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Fd(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Id)}}function Fd(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,t._error==null&&(n!=null?Zi(t,n):(t._data[e]=r,t._waiting?Qa(t):er(t))))}}function Zi(t,e){var n=t._tasks.length,r;for(t._error=e,t._data=void 0,t._waiting=NaN;--n>=0;)if((r=t._tasks[n])&&(t._tasks[n]=null,r.abort))try{r.abort()}catch{}t._active=NaN,er(t)}function er(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}var tc=Array.prototype,Bd=tc.map,nr=tc.slice,io={name:"implicit"};function ec(t){var e=Zn(),n=[],r=io;t=t==null?[]:nr.call(t);function i(s){var o=s+"",a=e.get(o);if(!a){if(r!==io)return r;e.set(o,a=n.push(s))}return t[(a-1)%t.length]}return i.domain=function(s){if(!arguments.length)return n.slice();n=[],e=Zn();for(var o=-1,a=s.length,l,c;++o<a;)e.has(c=(l=s[o])+"")||e.set(c,n.push(l));return i},i.range=function(s){return arguments.length?(t=nr.call(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ec().domain(n).range(t).unknown(r)},i}function kr(){var t=ec().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,o=!1,a=0,l=0,c=.5;delete t.unknown;function u(){var f=e().length,h=r[1]<r[0],d=r[h-0],p=r[1-h];i=(p-d)/Math.max(1,f-a+l*2),o&&(i=Math.floor(i)),d+=(p-d-i*(f-a))*c,s=i*(1-a),o&&(d=Math.round(d),s=Math.round(s));var m=Ft(f).map(function(_){return d+i*_});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),u()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(o=!!f,u()):o},t.padding=function(f){return arguments.length?(a=l=Math.max(0,Math.min(1,f)),u()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),u()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},t.copy=function(){return kr().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(c)},u()}function nc(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nc(e())},t}function Ud(){return nc(kr().paddingInner(1))}function Hd(t){return function(){return t}}function $d(t){return+t}var so=[0,1];function rc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hd(e)}function zd(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=e?0:i>=n?1:r(i)}}}function Gd(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=0?e:i>=1?n:r(i)}}}function qd(t,e,n,r){var i=t[0],s=t[1],o=e[0],a=e[1];return s<i?(i=n(s,i),o=r(a,o)):(i=n(i,s),o=r(o,a)),function(l){return o(i(l))}}function Wd(t,e,n,r){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=n(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=Pl(t,l,1,i)-1;return o[c](s[c](l))}}function Yd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Vd(t,e){var n=so,r=so,i=zi,s=!1,o,a,l;function c(){return o=Math.min(n.length,r.length)>2?Wd:qd,a=l=null,u}function u(f){return(a||(a=o(n,r,s?zd(t):t,i)))(+f)}return u.invert=function(f){return(l||(l=o(r,n,rc,s?Gd(e):e)))(+f)},u.domain=function(f){return arguments.length?(n=Bd.call(f,$d),c()):n.slice()},u.range=function(f){return arguments.length?(r=nr.call(f),c()):r.slice()},u.rangeRound=function(f){return r=nr.call(f),i=Rf,c()},u.clamp=function(f){return arguments.length?(s=!!f,c()):s},u.interpolate=function(f){return arguments.length?(i=f,c()):i},c()}function Xd(t,e,n){var r=t[0],i=t[t.length-1],s=Gn(r,i,e??10),o;switch(n=pi(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(i));return n.precision==null&&!isNaN(o=md(s,a))&&(n.precision=o),Va(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=gd(s,Math.max(Math.abs(r),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=pd(s))&&(n.precision=o-(n.type==="%")*2);break}}return Ya(n)}function Kd(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bl(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){return Xd(e(),n,r)},t.nice=function(n){var r=e(),i=r.length-1,s=n??10,o=r[0],a=r[i],l=Gn(o,a,s);return l&&(l=Gn(Math.floor(o/l)*l,Math.ceil(a/l)*l,s),r[0]=Math.floor(o/l)*l,r[i]=Math.ceil(a/l)*l,e(r)),t},t}function jt(){var t=Vd(rc,Dt);return t.copy=function(){return Yd(t,jt())},Kd(t)}var Ur=new Date,Hr=new Date;function _t(t,e,n,r){function i(s){return t(s=new Date(+s)),s}return i.floor=i,i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(new Date(+s));while(e(s,a),t(s),s<o);return l},i.filter=function(s){return _t(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return Ur.setTime(+s),Hr.setTime(+o),t(Ur),t(Hr),Math.floor(n(Ur,Hr))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var gi=_t(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});gi.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_t(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):gi};gi.range;var En=1e3,Kt=6e4,ne=36e5,ic=864e5,sc=6048e5,Jd=_t(function(t){t.setTime(Math.floor(t/En)*En)},function(t,e){t.setTime(+t+e*En)},function(t,e){return(e-t)/En},function(t){return t.getUTCSeconds()});Jd.range;var jd=_t(function(t){t.setTime(Math.floor(t/Kt)*Kt)},function(t,e){t.setTime(+t+e*Kt)},function(t,e){return(e-t)/Kt},function(t){return t.getMinutes()});jd.range;var Zd=_t(function(t){var e=t.getTimezoneOffset()*Kt%ne;e<0&&(e+=ne),t.setTime(Math.floor((+t-e)/ne)*ne+e)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getHours()});Zd.range;var oc=_t(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kt)/ic},function(t){return t.getDate()-1});oc.range;function de(t){return _t(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Kt)/sc})}var ac=de(0),cc=de(1),Qd=de(2),tp=de(3),ep=de(4),np=de(5),rp=de(6);ac.range;cc.range;Qd.range;tp.range;ep.range;np.range;rp.range;var ip=_t(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});ip.range;var gn=_t(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});gn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_t(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};gn.range;var sp=_t(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Kt)},function(t,e){return(e-t)/Kt},function(t){return t.getUTCMinutes()});sp.range;var op=_t(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ne)},function(t,e){return(e-t)/ne},function(t){return t.getUTCHours()});op.range;var lc=_t(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/ic},function(t){return t.getUTCDate()-1});lc.range;function pe(t){return _t(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/sc})}var uc=pe(0),fc=pe(1),ap=pe(2),cp=pe(3),lp=pe(4),up=pe(5),fp=pe(6);uc.range;fc.range;ap.range;cp.range;lp.range;up.range;fp.range;var hp=_t(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});hp.range;var yn=_t(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});yn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_t(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};yn.range;function dp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function pp(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=ze(i),u=Ge(i),f=ze(s),h=Ge(s),d=ze(o),p=Ge(o),m=ze(a),_=Ge(a),A=ze(l),k=Ge(l),x={a:j,A:J,b:I,B:S,c:null,d:lo,e:lo,H:Op,I:Np,j:Lp,L:Rp,m:Pp,M:Ip,p:C,S:Dp,U:Fp,w:Bp,W:Up,x:null,X:null,y:Hp,Y:$p,Z:zp,"%":fo},O={a:M,A:T,b:N,B:$,c:null,d:uo,e:uo,H:Gp,I:qp,j:Wp,L:Yp,m:Vp,M:Xp,p:W,S:Kp,U:Jp,w:jp,W:Zp,x:null,X:null,y:Qp,Y:tm,Z:em,"%":fo},L={a:G,A:V,b:Z,B:Y,c:H,d:ao,e:ao,H:co,I:co,j:Sp,L:Mp,m:Ap,M:Ep,p:P,S:Tp,U:vp,w:_p,W:bp,x:X,X:U,y:xp,Y:wp,Z:kp,"%":Cp};x.x=v(n,x),x.X=v(r,x),x.c=v(e,x),O.x=v(n,O),O.X=v(r,O),O.c=v(e,O);function v(E,F){return function(B){var q=[],st=-1,vt=0,D=E.length,z,ot,b;for(B instanceof Date||(B=new Date(+B));++st<D;)E.charCodeAt(st)===37&&(q.push(E.slice(vt,st)),(ot=oo[z=E.charAt(++st)])!=null?z=E.charAt(++st):ot=z==="e"?" ":"0",(b=F[z])&&(z=b(B,ot)),q.push(z),vt=st+1);return q.push(E.slice(vt,st)),q.join("")}}function y(E,F){return function(B){var q=zr(1900),st=g(q,E,B+="",0);if(st!=B.length)return null;if("p"in q&&(q.H=q.H%12+q.p*12),"W"in q||"U"in q){"w"in q||(q.w="W"in q?1:0);var vt="Z"in q?$r(zr(q.y)).getUTCDay():F(zr(q.y)).getDay();q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(vt+5)%7:q.w+q.U*7-(vt+6)%7}return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,$r(q)):F(q)}}function g(E,F,B,q){for(var st=0,vt=F.length,D=B.length,z,ot;st<vt;){if(q>=D)return-1;if(z=F.charCodeAt(st++),z===37){if(z=F.charAt(st++),ot=L[z in oo?F.charAt(st++):z],!ot||(q=ot(E,B,q))<0)return-1}else if(z!=B.charCodeAt(q++))return-1}return q}function P(E,F,B){var q=c.exec(F.slice(B));return q?(E.p=u[q[0].toLowerCase()],B+q[0].length):-1}function G(E,F,B){var q=d.exec(F.slice(B));return q?(E.w=p[q[0].toLowerCase()],B+q[0].length):-1}function V(E,F,B){var q=f.exec(F.slice(B));return q?(E.w=h[q[0].toLowerCase()],B+q[0].length):-1}function Z(E,F,B){var q=A.exec(F.slice(B));return q?(E.m=k[q[0].toLowerCase()],B+q[0].length):-1}function Y(E,F,B){var q=m.exec(F.slice(B));return q?(E.m=_[q[0].toLowerCase()],B+q[0].length):-1}function H(E,F,B){return g(E,e,F,B)}function X(E,F,B){return g(E,n,F,B)}function U(E,F,B){return g(E,r,F,B)}function j(E){return o[E.getDay()]}function J(E){return s[E.getDay()]}function I(E){return l[E.getMonth()]}function S(E){return a[E.getMonth()]}function C(E){return i[+(E.getHours()>=12)]}function M(E){return o[E.getUTCDay()]}function T(E){return s[E.getUTCDay()]}function N(E){return l[E.getUTCMonth()]}function $(E){return a[E.getUTCMonth()]}function W(E){return i[+(E.getUTCHours()>=12)]}return{format:function(E){var F=v(E+="",x);return F.toString=function(){return E},F},parse:function(E){var F=y(E+="",dp);return F.toString=function(){return E},F},utcFormat:function(E){var F=v(E+="",O);return F.toString=function(){return E},F},utcParse:function(E){var F=y(E,$r);return F.toString=function(){return E},F}}}var oo={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,mp=/^%/,gp=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function ct(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function yp(t){return t.replace(gp,"\\$&")}function ze(t){return new RegExp("^(?:"+t.map(yp).join("|")+")","i")}function Ge(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function _p(t,e,n){var r=Pt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vp(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function bp(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function wp(t,e,n){var r=Pt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function xp(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kp(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ap(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ao(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Sp(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function co(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ep(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tp(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Mp(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Cp(t,e,n){var r=mp.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function lo(t,e){return ct(t.getDate(),e,2)}function Op(t,e){return ct(t.getHours(),e,2)}function Np(t,e){return ct(t.getHours()%12||12,e,2)}function Lp(t,e){return ct(1+oc.count(gn(t),t),e,3)}function Rp(t,e){return ct(t.getMilliseconds(),e,3)}function Pp(t,e){return ct(t.getMonth()+1,e,2)}function Ip(t,e){return ct(t.getMinutes(),e,2)}function Dp(t,e){return ct(t.getSeconds(),e,2)}function Fp(t,e){return ct(ac.count(gn(t),t),e,2)}function Bp(t){return t.getDay()}function Up(t,e){return ct(cc.count(gn(t),t),e,2)}function Hp(t,e){return ct(t.getFullYear()%100,e,2)}function $p(t,e){return ct(t.getFullYear()%1e4,e,4)}function zp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ct(e/60|0,"0",2)+ct(e%60,"0",2)}function uo(t,e){return ct(t.getUTCDate(),e,2)}function Gp(t,e){return ct(t.getUTCHours(),e,2)}function qp(t,e){return ct(t.getUTCHours()%12||12,e,2)}function Wp(t,e){return ct(1+lc.count(yn(t),t),e,3)}function Yp(t,e){return ct(t.getUTCMilliseconds(),e,3)}function Vp(t,e){return ct(t.getUTCMonth()+1,e,2)}function Xp(t,e){return ct(t.getUTCMinutes(),e,2)}function Kp(t,e){return ct(t.getUTCSeconds(),e,2)}function Jp(t,e){return ct(uc.count(yn(t),t),e,2)}function jp(t){return t.getUTCDay()}function Zp(t,e){return ct(fc.count(yn(t),t),e,2)}function Qp(t,e){return ct(t.getUTCFullYear()%100,e,2)}function tm(t,e){return ct(t.getUTCFullYear()%1e4,e,4)}function em(){return"+0000"}function fo(){return"%"}var ye,hc,dc;nm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nm(t){return ye=pp(t),ye.format,ye.parse,hc=ye.utcFormat,dc=ye.utcParse,ye}var pc="%Y-%m-%dT%H:%M:%S.%LZ";function rm(t){return t.toISOString()}Date.prototype.toISOString||hc(pc);function im(t){var e=new Date(t);return isNaN(e)?null:e}+new Date("2000-01-01T00:00:00.000Z")||dc(pc);function oe(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}oe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");oe("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");oe("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");oe("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");Gi(Wt(300,.5,0),Wt(-240,.5,1));Gi(Wt(-100,.75,.35),Wt(80,1.5,.8));Gi(Wt(260,.75,.35),Wt(80,1.5,.8));Wt();function Ar(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Ar(oe("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Ar(oe("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Ar(oe("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));Ar(oe("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Tn(t){return function(){return t}}var ho=1e-12;function mc(t){this._context=t}mc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sm(t){return new mc(t)}function om(t){return t[0]}function am(t){return t[1]}function gc(){var t=om,e=am,n=Tn(!0),r=null,i=sm,s=null;function o(a){var l,c=a.length,u,f=!1,h;for(r==null&&(s=i(h=Ba())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,l,a),+e(u,l,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Tn(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Tn(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Tn(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function rr(){}function po(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Qi(t){this._context=t}Qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:po(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:po(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yc(t,e){this._basis=new Qi(t),this._beta=e}yc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new Qi(r):new yc(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function ir(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ts(t,e){this._context=t,this._k=(1-e)/6}ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ir(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new ts(r,e)}return n.tension=function(r){return t(+r)},n})(0);function es(t,e){this._context=t,this._k=(1-e)/6}es.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new es(r,e)}return n.tension=function(r){return t(+r)},n})(0);function ns(t,e){this._context=t,this._k=(1-e)/6}ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ir(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new ns(r,e)}return n.tension=function(r){return t(+r)},n})(0);function rs(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>ho){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ho){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function _c(t,e){this._context=t,this._alpha=e}_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:rs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new _c(r,e):new ts(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function vc(t,e){this._context=t,this._alpha=e}vc.prototype={areaStart:rr,areaEnd:rr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new vc(r,e):new es(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function bc(t,e){this._context=t,this._alpha=e}bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new bc(r,e):new ns(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function mo(t){return t<0?-1:1}function go(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(mo(s)+mo(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function yo(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Gr(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function yi(t){this._context=t}yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gr(this,this._t0,yo(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Gr(this,yo(this,n=go(this,t,e)),n);break;default:Gr(this,this._t0,n=go(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(yi.prototype).point=function(t,e){yi.prototype.point.call(this,e,t)};function sr(){this._=null}function Sr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}sr.prototype={constructor:sr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=_o(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(qe(this,n),t=n,n=t.U),n.C=!1,r.C=!0,We(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(We(this,n),t=n,n=t.U),n.C=!1,r.C=!0,qe(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,o;if(r?i?s=_o(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(o=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(o=t.C,t=s),t&&(t.U=e),!o){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,qe(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,We(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,qe(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,We(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,qe(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,We(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function qe(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function We(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function _o(t){for(;t.L;)t=t.L;return t}function je(t,e,n,r){var i=[null,null],s=wt.push(i)-1;return i.left=t,i.right=e,n&&or(i,t,e,n),r&&or(i,e,t,r),Mt[t.index].halfedges.push(s),Mt[e.index].halfedges.push(s),i}function Ye(t,e,n){var r=[e,n];return r.left=t,r}function or(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function cm(t,e,n,r,i){var s=t[0],o=t[1],a=s[0],l=s[1],c=o[0],u=o[1],f=0,h=1,d=c-a,p=u-l,m;if(m=e-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=r-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=n-l,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<h&&(h=m)}else if(p>0){if(m>h)return;m>f&&(f=m)}if(m=i-l,!(!p&&m<0)){if(m/=p,p<0){if(m>h)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<h&&(h=m)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[a+f*d,l+f*p]),h<1&&(t[1]=[a+h*d,l+h*p])),!0}}}}}function lm(t,e,n,r,i){var s=t[1];if(s)return!0;var o=t[0],a=t.left,l=t.right,c=a[0],u=a[1],f=l[0],h=l[1],d=(c+f)/2,p=(u+h)/2,m,_;if(h===u){if(d<e||d>=r)return;if(c>f){if(!o)o=[d,n];else if(o[1]>=i)return;s=[d,i]}else{if(!o)o=[d,i];else if(o[1]<n)return;s=[d,n]}}else if(m=(c-f)/(h-u),_=p-m*d,m<-1||m>1)if(c>f){if(!o)o=[(n-_)/m,n];else if(o[1]>=i)return;s=[(i-_)/m,i]}else{if(!o)o=[(i-_)/m,i];else if(o[1]<n)return;s=[(n-_)/m,n]}else if(u<h){if(!o)o=[e,m*e+_];else if(o[0]>=r)return;s=[r,m*r+_]}else{if(!o)o=[r,m*r+_];else if(o[0]<e)return;s=[e,m*e+_]}return t[0]=o,t[1]=s,!0}function um(t,e,n,r){for(var i=wt.length,s;i--;)(!lm(s=wt[i],t,e,n,r)||!cm(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>ut||Math.abs(s[0][1]-s[1][1])>ut))&&delete wt[i]}function fm(t){return Mt[t.index]={site:t,halfedges:[]}}function hm(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function wc(t,e){return e[+(e.left!==t.site)]}function dm(t,e){return e[+(e.left===t.site)]}function pm(){for(var t=0,e=Mt.length,n,r,i,s;t<e;++t)if((n=Mt[t])&&(s=(r=n.halfedges).length)){var o=new Array(s),a=new Array(s);for(i=0;i<s;++i)o[i]=i,a[i]=hm(n,wt[r[i]]);for(o.sort(function(l,c){return a[c]-a[l]}),i=0;i<s;++i)a[i]=r[o[i]];for(i=0;i<s;++i)r[i]=a[i]}}function mm(t,e,n,r){var i=Mt.length,s,o,a,l,c,u,f,h,d,p,m,_,A=!0;for(s=0;s<i;++s)if(o=Mt[s]){for(a=o.site,c=o.halfedges,l=c.length;l--;)wt[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)p=dm(o,wt[c[l]]),m=p[0],_=p[1],f=wc(o,wt[c[++l%u]]),h=f[0],d=f[1],(Math.abs(m-h)>ut||Math.abs(_-d)>ut)&&(c.splice(l,0,wt.push(Ye(a,p,Math.abs(m-t)<ut&&r-_>ut?[t,Math.abs(h-t)<ut?d:r]:Math.abs(_-r)<ut&&n-m>ut?[Math.abs(d-r)<ut?h:n,r]:Math.abs(m-n)<ut&&_-e>ut?[n,Math.abs(h-n)<ut?d:e]:Math.abs(_-e)<ut&&m-t>ut?[Math.abs(d-e)<ut?h:t,e]:null))-1),++u);u&&(A=!1)}if(A){var k,x,O,L=1/0;for(s=0,A=null;s<i;++s)(o=Mt[s])&&(a=o.site,k=a[0]-t,x=a[1]-e,O=k*k+x*x,O<L&&(L=O,A=o));if(A){var v=[t,e],y=[t,r],g=[n,r],P=[n,e];A.halfedges.push(wt.push(Ye(a=A.site,v,y))-1,wt.push(Ye(a,y,g))-1,wt.push(Ye(a,g,P))-1,wt.push(Ye(a,P,v))-1)}}for(s=0;s<i;++s)(o=Mt[s])&&(o.halfedges.length||delete Mt[s])}var xc=[],is;function gm(){Sr(this),this.x=this.y=this.arc=this.site=this.cy=null}function be(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var o=i[0],a=i[1],l=r[0]-o,c=r[1]-a,u=s[0]-o,f=s[1]-a,h=2*(l*f-c*u);if(!(h>=-wm)){var d=l*l+c*c,p=u*u+f*f,m=(f*d-c*p)/h,_=(l*p-u*d)/h,A=xc.pop()||new gm;A.arc=t,A.site=i,A.x=m+o,A.y=(A.cy=_+a)+Math.sqrt(m*m+_*_),t.circle=A;for(var k=null,x=un._;x;)if(A.y<x.y||A.y===x.y&&A.x<=x.x)if(x.L)x=x.L;else{k=x.P;break}else if(x.R)x=x.R;else{k=x;break}un.insert(k,A),k||(is=A)}}}}function Se(t){var e=t.circle;e&&(e.P||(is=e.N),un.remove(e),xc.push(e),Sr(e),t.circle=null)}var kc=[];function ym(){Sr(this),this.edge=this.site=this.circle=null}function vo(t){var e=kc.pop()||new ym;return e.site=t,e}function qr(t){Se(t),Ee.remove(t),kc.push(t),Sr(t)}function _m(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,o=t.N,a=[t];qr(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<ut&&Math.abs(r-l.circle.cy)<ut;)s=l.P,a.unshift(l),qr(l),l=s;a.unshift(l),Se(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<ut&&Math.abs(r-c.circle.cy)<ut;)o=c.N,a.push(c),qr(c),c=o;a.push(c),Se(c);var u=a.length,f;for(f=1;f<u;++f)c=a[f],l=a[f-1],or(c.edge,l.site,c.site,i);l=a[0],c=a[u-1],c.edge=je(l.site,c.site,null,i),be(l),be(c)}function vm(t){for(var e=t[0],n=t[1],r,i,s,o,a=Ee._;a;)if(s=Ac(a,n)-e,s>ut)a=a.L;else if(o=e-bm(a,n),o>ut){if(!a.R){r=a;break}a=a.R}else{s>-ut?(r=a.P,i=a):o>-ut?(r=a,i=a.N):r=i=a;break}fm(t);var l=vo(t);if(Ee.insert(r,l),!(!r&&!i)){if(r===i){Se(r),i=vo(r.site),Ee.insert(l,i),l.edge=i.edge=je(r.site,l.site),be(r),be(i);return}if(!i){l.edge=je(r.site,l.site);return}Se(r),Se(i);var c=r.site,u=c[0],f=c[1],h=t[0]-u,d=t[1]-f,p=i.site,m=p[0]-u,_=p[1]-f,A=2*(h*_-d*m),k=h*h+d*d,x=m*m+_*_,O=[(_*k-d*x)/A+u,(h*x-m*k)/A+f];or(i.edge,c,p,O),l.edge=je(c,t,null,O),i.edge=je(t,p,null,O),be(r),be(i)}}function Ac(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var o=t.P;if(!o)return-1/0;n=o.site;var a=n[0],l=n[1],c=l-e;if(!c)return a;var u=a-r,f=1/s-1/c,h=u/c;return f?(-h+Math.sqrt(h*h-2*f*(u*u/(-2*c)-l+c/2+i-s/2)))/f+r:(r+a)/2}function bm(t,e){var n=t.N;if(n)return Ac(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var ut=1e-6,wm=1e-12,Ee,Mt,un,wt;function xm(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function km(t,e){return e[1]-t[1]||e[0]-t[0]}function bo(t,e){var n=t.sort(km).pop(),r,i,s;for(wt=[],Mt=new Array(t.length),Ee=new sr,un=new sr;;)if(s=is,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(vm(n),r=n[0],i=n[1]),n=t.pop();else if(s)_m(s.arc);else break;if(pm(),e){var o=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];um(o,a,l,c),mm(o,a,l,c)}this.edges=wt,this.cells=Mt,Ee=un=wt=Mt=null}bo.prototype={constructor:bo,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return wc(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(s=n.halfedges).length)for(var i=n.site,s,o=-1,a,l,c=e[s[a-1]],u=c.left===i?c.right:c.left;++o<a;)l=u,c=e[s[o]],u=c.left===i?c.right:c.left,l&&u&&r<l.index&&r<u.index&&xm(i,l,u)<0&&t.push([i.data,l.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,o=r.cells.length,a;!(a=r.cells[s]);)if(++s>=o)return null;var l=t-a.site[0],c=e-a.site[1],u=l*l+c*c;do a=r.cells[i=s],s=null,a.halfedges.forEach(function(f){var h=r.edges[f],d=h.left;if(!((d===a.site||!d)&&!(d=h.right))){var p=t-d[0],m=e-d[1],_=p*p+m*m;_<u&&(u=_,s=d.index)}});while(s!==null);return r._found=i,n==null||u<=n*n?a.site:null}};function Ze(t,e,n){this.k=t,this.x=e,this.y=n}Ze.prototype={constructor:Ze,scale:function(t){return t===1?this:new Ze(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ze(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ze.prototype;function ss(t){let e;const n=window.innerWidth,r=document.getElementById("stroke_slider"),i=document.getElementById("slideright"),s=document.getElementById("slideleft"),o=()=>{r&&(r.style.display="none")};t?(r&&(r.style.display="flex",r.style.left=t=="left"?n*-1+"px":n*1.5+"px"),s&&(s.style.display=t=="right"?"flex":"none"),i&&(i.style.display=t=="left"?"flex":"none"),e=t=="left"?Ft(0,1.1,.1):Ft(0,1.1,.1).reverse(),ni(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})):(e=((s==null?void 0:s.style.display)=="flex"?"right":"left")=="left"?Ft(-1.5,1.1,.1):Ft(1,2.6,.1).reverse(),setTimeout(()=>o(),700)),ni(".stroke_slider").data(e).transition().duration(500).style("left",function(a){return a*n*.5+"px"})}let Dn=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(Dn=!0,!0)});window.addEventListener("test",null,t)}catch(t){console.log(t)}const yt={orientation:void 0,time_threshold:200,diff_threshold:130,press_hold_threshold:400,prevent_touch:!0,prevent_double_tap:!1,addSwipeTarget(t){t.addEventListener("touchstart",Mn,Dn?{passive:!0}:!1),t.addEventListener("touchmove",Ao,Dn?{passive:!0}:!1),t.addEventListener("touchend",So,!1),t.addEventListener("mousedown",Mn,!1),t.addEventListener("mousemove",Ao,!1),t.addEventListener("mouseup",So,!1)},addPressAndHold(t){t.addEventListener("touchstart",Mn,Dn?{passive:!0}:!1),t.addEventListener("mousedown",Mn,!1),t.addEventListener("touchend",Eo,!1),t.addEventListener("mouseup",Eo,!1)},disableDrag(){document.addEventListener("touchmove",wo,!1),document.addEventListener("touchend",xo,!1),document.addEventListener("mousemove",wo,!1),document.addEventListener("mouseup",xo,!1)}};function wo(t){yt.prevent_touch&&(window.innerHeight>450||yt.orientation=="landscape")&&t.preventDefault()}function xo(t){const e=new Date().getTime();yt.prevent_double_tap&&e-ko<500&&t.preventDefault(),ko=e}let Ne=null,Le=null,en=null,nn=null,fn=null,we=null,ko=new Date().getTime();function Ao(t){if(!Ne||!Le)return;let e,n;t.type=="mousemove"?(e=t.clientX,n=t.clientY):(e=t.touches[0].clientX,n=t.touches[0].clientY),en=Ne-e,nn=Le-n}function Mn(t){we=t.target,fn=Date.now(),t.type=="mousedown"?(Ne=t.clientX,Le=t.clientY):(Ne=t.touches[0].clientX,Le=t.touches[0].clientY),en=0,nn=0}function Qe(t,e){if(t.classList.contains(e))return t;for(;t=t.parentNode&&t.classList&&!t.classList.contains(e););return t}function So(){const t=Date.now()-fn;(Math.abs(en)>yt.diff_threshold||Math.abs(nn)>yt.diff_threshold)&&t<yt.time_threshold&&(Math.abs(en)>Math.abs(nn)?en>0?typeof yt.swipeLeft=="function"&&yt.swipeLeft(Qe(we,"swipe")):typeof yt.swipeRight=="function"&&yt.swipeRight(Qe(we,"swipe")):nn>0?typeof yt.swipeUp=="function"&&yt.swipeUp(Qe(we,"swipe")):typeof yt.swipeDown=="function"&&yt.swipeDown(Qe(we,"swipe"))),Ne=null,Le=null,fn=null}function Eo(){Date.now()-fn>yt.press_hold_threshold&&typeof yt.pressAndHold=="function"&&yt.pressAndHold(Qe(we,"pressAndHold")),Ne=null,Le=null,fn=null}const Nt=yt;function Am(t,e){const n=at("#"+t),r=window.innerWidth*.85,i=r/2,s=50,o=["blue","red"];n.selectAll("svg").remove();const a=n.append("svg").attr("width",r).attr("height",i),l={top:20,right:20,bottom:30,left:40},c=+a.attr("width")-l.left-l.right,u=+a.attr("height")-l.top-l.bottom,f=jt().range([0,c]),h=jt().range([u,0]),d=gc().x(function(x){return f(x[0])}).y(function(x){return h(x[1])}),p=a.append("g").attr("transform","translate("+l.left+","+l.top+")"),m=Math.max(...e.map(x=>x.length));f.domain([0,Math.max(...e.map(x=>Math.max(...x)),s)]),h.domain([0,m]),p.append("g").attr("transform","translate(0,"+u+")").call(Gl(f).ticks(0)),p.append("g").style("font","24px times").call(ql(h).ticks(Math.min(m,4)).tickFormat(x=>x)),A(e),k(e);function _(x){return x=x.map((O,L)=>[O,L+1]),x.unshift([0,0]),x}function A(x){x.forEach((O,L)=>{p.append("path").datum(_(O)).attr("fill","none").attr("stroke",o[L]).attr("stroke-width","5px").attr("shape-rendering","crispEdges").attr("d",d)})}function k(x){x.forEach((O,L)=>{const v=".datapoint"+L;O.length<10&&p.selectAll(v).data(_(O)).enter().append("circle").attr("class",v).attr("fill","#FFFFFF").attr("stroke",o[L]).attr("stroke-width","2px").attr("r",3.5).attr("cx",function(y){return f(y[0])}).attr("cy",function(y){return h(y[1])})})}}function Sm(t){let e="";const n=[],r=w.match.sets().length;let i=`<div class='s_set' onclick="updateStats()">Match</div>`;const s=w.match.stats.calculated(t),o=a=>{var l;return(l=a.match(/[A-Za-z0-9_]/g))==null?void 0:l.join("")};if(s&&s.length){if(r>1)for(let h=0;h<r;h++)i+=`<div class='s_set' onclick="updateStats(${h})">Set ${h+1}</div>`;const a=document.querySelector("#statview");a&&(a.innerHTML=i);let l,c;s.forEach(h=>{w.swap_sides?[c,l]=h.team_stats:[l,c]=h.team_stats;const d=[0].concat(...[l,c].map(O=>O.value?O.value:[])).reduce((O,L)=>O+L,0),p=o(h.name.toLowerCase().split(" ").join("_"));let m=l.display,_=c.display;const A=[].concat(...[l,c].map(O=>O.numerators?O.numerators:[])).filter((O,L,v)=>v.lastIndexOf(O)==L).join(","),k=A&&d&&h.name!="Aggressive Margin"?"statname_chart":"statname";isNaN(l.value)&&(l.value=0,m="0"),isNaN(c.value)&&(c.value=0,_="0"),["Double Faults","Unforced Errors","Forced Errors"].indexOf(h.name)>=0?(l.value<c.value&&(m=`<b>${m}</b>`),c.value<l.value&&(_=`<b>${_}</b>`)):(l.value>c.value&&(m=`<b>${m}</b>`),c.value>l.value&&(_=`<b>${_}</b>`)),e+=`<div class='statrow' id="${p}" onClick="toggleChart(this)"><div class='statleft'>${m}</div><div class='${k}'>${h.name}</div><div class='statright'>${_}</div></div>`;const x=`<div class='statrow' id="${p}_chart" style='display:none' onclick="showChartSource('${A}')"></div>`;A&&d&&h.name!="Aggressive Margin"&&(n.push({target:`${p}_chart`,numerators:A}),e+=x)});const u=w.match.stats.counters(t).teams;if(u[0].Backhand||u[0].Forehand||u[1].Backhand||u[1].Forehand){const h=w.swap_sides?1:0,d=w.swap_sides?0:1;e+="<div class='statsection flexcenter'>Finishing Shots - Strokes</div>",["Forehand","Backhand"].forEach(p=>{if(u[0][p]||u[1][p]){const m=u[h][p]?u[h][p].length:0,_=u[d][p]?u[d][p].length:0;e+=`<div class='statrow'><div class='statleft'><b>${m}</b></div><div class='statname'><b>Total ${p} Shots</b></div><div class='statright'><b>${_}</b></div></div>`,[].concat(...Object.keys(u).map(k=>u[k][p]?u[k][p].map(x=>x.point.result).filter(Boolean):[])).filter((k,x,O)=>O.lastIndexOf(k)==x).forEach(k=>{const x=u[h][p]?u[h][p].filter(v=>v.point.result==k):[],O=u[d][p]?u[d][p].filter(v=>v.point.result==k):[];(x.length||O.length)&&(e+=`<div class='statrow'><div class='statleft'>${x.length}</div><div class='statname'>${p} ${k}s</div><div class='statright'>${O.length}</div></div>`),[].concat(...Object.keys(u).map(v=>u[v][p]?u[v][p].map(y=>y.point.stroke).filter(Boolean):[])).filter((v,y,g)=>g.lastIndexOf(v)==y).forEach(v=>{const y=u[h][p]?u[h][p].filter(P=>P.point.result==k&&P.point.stroke==v):[],g=u[d][p]?u[d][p].filter(P=>P.point.result==k&&P.point.stroke==v):[];(y.length||g.length)&&(e+=`<div class='statrow'><div class='statleft'>${y.length}</div><div class='statname'><i>${p} ${v} ${k}s</i></div><div class='statright'>${g.length}</div></div>`)})})}})}const f=document.querySelector("#statlines");f&&(f.innerHTML=e),Em(n)}else gt("entry")}function Em(t){const e=w.match.stats.counters(),n=r=>{var i;return(i=r.match(/[A-Za-z0-9]/g))==null?void 0:i.join("")};e&&t.forEach(r=>{const i=[];Object.keys(e.teams).forEach(s=>{const o=e.teams[s],a=r.numerators.split(",").map(u=>n(u)),c=[].concat(...a.map(u=>o[u])).map(u=>u?u.point:void 0).filter(u=>u).sort((u,f)=>u.index-f.index);i.push(c.map(u=>u.index))}),Am(r.target,i)})}const ft=(t,e)=>{const n=document.getElementById(e);n&&(n.style.display=t)};function gt(t=w.view,e){ss();const n={mainmenu({activate:i=!0}={}){if(i){Nt.prevent_touch=!1;const s=JSON.parse(rt.get("match_archive")||"[]"),o=document.getElementById("menu_match_archive");o&&(o.style.display=s.length?"flex":"none");const a=document.getElementById("menu_match_format");a&&(a.style.display=fl()?"flex":"none");const l=w.match.history.points(),c=document.getElementById("menu_change_server");c&&(c.style.display=l.length==0?"flex":"none")}ft(i?"flex":"none","mainmenu")},pointhistory({activate:i=!0}={}){i&&(Nt.prevent_touch=!1,hl()),ft(i?"flex":"none","pointhistory")},matcharchive({activate:i=!0}={}){i&&(Nt.prevent_touch=!1,na()),ft(i?"flex":"none","matcharchive")},matchformat({activate:i=!0}={}){Cl(),i&&(Nt.prevent_touch=!1),ft(i?"flex":"none","matchformats")},settings({activate:i=!0}={}){ft(i?"flex":"none","settings")},welcome({activate:i=!0}={}){ft(i?"flex":"none","welcome")},matchdetails({activate:i=!0}={}){i&&(Nt.prevent_touch=!1),ft(i?"flex":"none","matchdetails")},entry({activate:i=!0}={}){i&&(Nt.prevent_touch=!0),ft(i&&w.orientation=="landscape"?"flex":"none",on.horizontal_view),ft(i&&w.orientation=="portrait"?"flex":"none",on.vertical_view),ft(i&&w.orientation=="portrait"?"flex":"none","toolbar")},stats({activate:i=!0}={}){ft(i?"flex":"none","statsscreen"),i&&(Nt.prevent_touch=!1,w.match.metadata.resetStats(),Sm())},momentum({activate:i=!0}={}){if(!i)ft("none","momentum"),ft("none","pts");else{w.orientation=="landscape"?(ft("none","momentum"),ft("flex","pts"),it.pts_match.update()):(ft("inline","momentum"),ft("none","pts")),Nt.prevent_touch=!1;const s=w.match.history.action("addPoint");it.mc.width(window.innerWidth).height(820),it.mc.data(s).update(),it.mc.update()}},gametree({activate:i=!0}={}){if(ft(i?"flex":"none","gametree"),i){Nt.prevent_touch=!1;const s=w.match.history.action("addPoint"),o=w.match.format.settings().code.indexOf("n_")>=0;it.gametree.options({display:{noAd:o}}),it.gametree.data(s).update(),it.gametree.update({sizeToFit:!0})}}},r=Object.keys(n);if(r.indexOf(t)>=0)return r.filter(i=>i!=t).forEach(i=>n[i]({activate:!1})),n[t]({activate:!0,params:e}),w.view=t,t}function Sc(){let t,e,n,r=[0,0],i,s;const o={left:void 0,right:void 0},a={id:"gf1",score:[0,0],width:window.innerWidth,height:window.innerHeight,margins:{top:10,bottom:10,left:10,right:10},fish:{school:!1,gridcells:["0","15","30","40","G"],max_rally:void 0,cell_size:void 0,min_cell_size:5,max_cell_size:20},set:{tiebreak_to:7},display:{orientation:"vertical",transition_time:0,sizeToFit:!1,leftImg:!1,rightImg:!1,show_images:void 0,reverse:!1,point_score:!0,service:!0,player:!0,rally:!0,score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}},l={default:"#235dba"};let c=JSON.parse(JSON.stringify(l));const u={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};let f,h,d,p,m;function _(k){k._groups[0][0].tagName.toLowerCase()!="svg"&&(h=k.append("div").attr("class","fishRoot"),f=h.append("svg").attr("id","gameFish"+a.id).attr("class","fishFrame"),d=f.append("g"),p=f.append("g"),m=f.append("g")),s=function(L){if(d==null||p==null||m==null)return;if(a.display.sizeToFit||L&&L.sizeToFit){const R=k.node().getBoundingClientRect();a.width=Math.max(R.width,100),a.height=Math.max(R.height,100)}if(a.fish.cell_size&&!a.fish.school){const R=Math.max(10,t.length+2);a.height=a.fish.cell_size*R*.9}let v=!1,y=0;t.forEach(R=>{R.rally&&R.rally.length>y&&(y=R.rally.length),R.score.indexOf("T")>0&&(v=!0)}),a.fish.max_rally&&a.fish.max_rally>y&&(y=a.fish.max_rally),e=a.width-(a.margins.left+a.margins.right),n=a.height-(a.margins.top+a.margins.bottom);const g=a.display.orientation=="vertical"?1:0,P=g?e:n,G=g?n:e,V=(g?a.margins.left:a.margins.top)+P/2,Z=1,Y=.9;d.attr("transform","translate("+(g?0:r[0])+","+(g?r[1]:0)+")"),p.attr("transform","translate("+r[0]+","+r[1]+")"),m.attr("transform","translate("+r[0]+","+r[1]+")");let H;if(a.fish.cell_size)H=a.fish.cell_size;else{const R=v?a.set.tiebreak_to+4:a.fish.gridcells.length+2,K=P/(a.fish.gridcells.length+(a.display.service?R:0)),tt=G/(t.length+2);H=Math.min(K,tt),H=Math.max(a.fish.min_cell_size,H),H=Math.min(a.fish.max_cell_size,H)}const X=Math.sqrt(2*Math.pow(H,2)),U=X/2,j=[],J=[],I=v?a.set.tiebreak_to:a.fish.gridcells.length-1;for(let R=0;R<I;R++){const K=v?R:a.fish.gridcells[R];J.push({label:K,l:(R+(g?1.25:.75))*U,o:(R+(g?.75:1.25))*U,rotate:45}),J.push({label:K,l:(R+1.25)*U,o:-1*(R+.75)*U,rotate:-45});for(let tt=0;tt<I;tt++)j.push([R,tt])}if(h&&(h.attr("width",a.width+"px").attr("height",a.height+"px"),f.attr("width",a.width+"px").attr("height",a.height+"px")),a.display.point_score){const R=p.selectAll(".game_score"+a.id).data(J);R.exit().remove(),R.enter().append("text").attr("font-size",U*.8+"px").attr("transform",st).attr("text-anchor","middle").merge(R).transition().duration(a.display.transition_time).attr("class","game_score"+a.id).attr("font-size",U*.8+"px").attr("transform",st).attr("text-anchor","middle").text(function(K){return K.label})}else p.selectAll(".game_score"+a.id).remove();if(a.display.grid){const R=p.selectAll(".gridcell"+a.id).data(j);R.exit().remove(),R.enter().append("rect").attr("stroke","#ccccdd").attr("stroke-width",$).attr("transform",vt).attr("width",H).attr("height",H).merge(R).transition().duration(a.display.transition_time).attr("class","gridcell"+a.id).attr("stroke-width",$).attr("width",H).attr("height",H).attr("transform",vt).attr("fill-opacity",0)}else p.selectAll(".gridcell"+a.id).remove();const S=m.selectAll(".gamecell"+a.id).data(t);S.exit().remove(),S.enter().append("rect").attr("opacity",0).attr("width",H).attr("height",H).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",$).merge(S).attr("id",(R,K)=>a.id+"Gs"+R.set+"g"+R.game+"p"+K).transition().duration(a.display.transition_time).attr("class","gamecell"+a.id).attr("width",H).attr("height",H).attr("transform",D).attr("stroke","#ccccdd").attr("stroke-width",$).attr("opacity",a.display.player?1:0).style("fill",function(R){return a.colors.players[R.winner]});const C=m.selectAll(".result"+a.id).data(t);C.exit().remove(),C.enter().append("circle").attr("stroke","black").attr("id",function(R,K){return a.id+"Rs"+R.set+"g"+R.game+"p"+K}).attr("class","result"+a.id).attr("opacity",1).attr("stroke-width",$).attr("cx",xs).attr("cy",ks).attr("r",N).style("fill",function(R){return a.colors.results[R.result]}).merge(C).attr("id",function(R,K){return a.id+"Rs"+R.set+"g"+R.game+"p"+K}).attr("class","result"+a.id).transition().duration(a.display.transition_time).attr("stroke-width",$).attr("cx",xs).attr("cy",ks).attr("r",N).style("fill",function(R){return a.colors.results[R.result]});const M=jt().range([0,P*Y]).domain([0,y]),T=kr().domain(Ft(t.length)).range([0,t.length*U]).round(!0);if(a.display.rally){const R=d.selectAll(".rally_bar"+a.id).data(t);R.exit().remove(),R.enter().append("rect").attr("opacity",0).attr("transform",ot).attr("height",g?T.bandwidth():0).attr("width",g?0:T.bandwidth()).merge(R).attr("class","rally_bar"+a.id).on("mouseover",(K,tt,lt)=>{at(lt[tt]).attr("fill","yellow")}).on("mouseout",(K,tt,lt)=>{at(lt[tt]).attr("fill","#eeeeff")}).transition().duration(a.display.transition_time).attr("id",function(K,tt){return a.id+"Bs"+K.set+"g"+K.game+"p"+tt}).attr("opacity",1).attr("stroke","white").attr("stroke-width",$).attr("fill","#eeeeff").attr("transform",b).attr("height",g?T.bandwidth():F).attr("width",g?F:T.bandwidth())}else d.selectAll(".rally_bar"+a.id).remove();if(a.display.score){const R=a.score.slice();a.display.reverse&&R.reverse();const K=d.selectAll(".set_score"+a.id).data(R);K.exit().remove(),K.enter().append("text").attr("class","set_score"+a.id).attr("transform",B).attr("font-size",U*.8+"px").attr("text-anchor","middle").text(function(lt){return lt}).merge(K).attr("class","set_score"+a.id).attr("transform",B).attr("font-size",U*.8+"px").attr("text-anchor","middle").text(function(lt){return lt});const tt=d.selectAll(".ssb"+a.id).data(a.score);tt.exit().remove(),tt.enter().append("rect").merge(tt).attr("class","ssb"+a.id).attr("transform",q).attr("stroke","black").attr("stroke-width",$).attr("fill-opacity",0).attr("height",U+"px").attr("width",U+"px")}else d.selectAll(".set_score"+a.id).remove(),d.selectAll(".ssb"+a.id).remove();if(a.display.service){const R=[];t.forEach(function(ee,Es){let Ts=!1;const el=["Ace","Serve Winner","Double Fault"];ee.first_serve&&(Ts=!0,R.push({point:Es,serve:"first",server:ee.server,result:ee.first_serve.error})),R.push({point:Es,serve:Ts?"second":"first",server:ee.server,result:el.indexOf(ee.result)>=0?ee.result:"In"})});const K=d.selectAll(".serve"+a.id).data(R);K.exit().remove(),K.enter().append("circle").attr("class","serve"+a.id).attr("cx",_s).attr("cy",vs).attr("r",N).attr("stroke",W).attr("stroke-width",$).attr("fill",W).merge(K).attr("class","serve"+a.id).attr("cx",_s).attr("cy",vs).attr("r",N).attr("stroke",W).attr("stroke-width",$).attr("fill",W);const tt=d.selectAll(".sbox"+a.id).data(t);tt.exit().remove(),tt.enter().append("rect").attr("stroke","#ccccdd").attr("fill-opacity",0).attr("transform",z).attr("class","sbox"+a.id).attr("stroke-width",$).attr("height",g?T.bandwidth():1.5*U).attr("width",g?1.5*U:T.bandwidth()).merge(tt).attr("transform",z).attr("class","sbox"+a.id).attr("stroke-width",$).attr("height",g?T.bandwidth():1.5*U).attr("width",g?1.5*U:T.bandwidth());const lt=d.selectAll(".return"+a.id).data(t);lt.exit().remove(),lt.enter().append("circle").attr("class","return"+a.id).attr("cx",te).attr("cy",Be).attr("r",N).attr("stroke",E).attr("stroke-width",$).attr("fill",E).merge(lt).attr("class","return"+a.id).attr("cx",te).attr("cy",Be).attr("r",N).attr("stroke",E).attr("stroke-width",$).attr("fill",E)}else d.selectAll(".sbox"+a.id).remove(),d.selectAll(".return"+a.id).remove(),d.selectAll(".serve"+a.id).remove();a.display.rightImg?(o.right=f.selectAll("image.rightImage").data([0]),o.right.exit().remove(),o.right.enter().append("image").attr("class","rightImage").attr("xlink:href",a.display.rightImg).attr("x",a.width-30).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)}).merge(o.right).attr("x",a.width-30).attr("xlink:href",a.display.rightImg).on("click",function(){u.rightImage.click&&u.rightImage.click(a.id)})):f&&f.selectAll("image.rightImage").remove(),a.display.leftImg?(o.left=f.selectAll("image.leftImage").data([0]),o.left.enter().append("image").attr("class","leftImage").attr("xlink:href",a.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",a.display.show_images?1:0).on("click",function(){u.leftImage.click&&u.leftImage.click()}).merge(o.left).attr("xlink:href",a.display.leftImg).on("click",function(){u.leftImage.click&&u.leftImage.click(a.id)}),o.left.exit().remove()):f&&f.selectAll("image.leftImage").remove();function N(){return a.display.player||a.display.service?U/4:U/2}function $(){return U>20?1:.5}function W(R){return a.colors.results[R.result]}function E(R){return R.rally==null?"white":R.rally.length>1?"yellow":R.rally.length==1?a.colors.results[R.result]:"white"}function F(R){return R.rally?M(R.rally.length):0}function B(R,K){let tt=K?V+U*.5:V-U*.5;tt=g?tt:tt+U*.3;const lt=U*(g?.8:.5);return Q(tt,lt,0)}function q(R,K){const tt=K?V:V-U;return Q(tt,0,0)}function st(R){const K=+V+R.o,tt=U+R.l;return Q(K,tt,R.rotate)}function vt(R){const K=V+(R[1]-R[0]+g-1)*U,tt=(R[0]+R[1]+3-g)*U;return Q(K,tt,45)}function D(R,K){const tt=V+(O(R)+g-1)*U,lt=(K+4-g)*U;return i=[tt-V,lt-X,X],Q(tt,lt,45)}function z(R,K){const tt=R.server==0?V-P/2*Z:V+P/2*Z-1.5*U,lt=U+Ct(R,K);return Q(tt,lt,0)}function ot(R,K){const tt=V,lt=U+Ct(R,K);return Q(tt,lt,0)}function b(R,K){const tt=R.rally?V-M(R.rally.length)/2:0,lt=U+Ct(R,K);return Q(tt,lt,0)}function Q(R,K,tt){const lt=g?R:K,ee=g?K:R;return"translate("+lt+","+ee+") rotate("+tt+")"}function Ct(R,K){return(K+2.5)*U}function te(R,K){return g?ys(R):gs(R,K)}function Be(R,K){return g?gs(R,K):ys(R)}function gs(R,K){return U+(K+3)*U}function ys(R){return R.server==0?V+P/2*Z-.75*U:V-P/2*Z+.75*U}function _s(R){return g?ws(R):bs(R)}function vs(R){return g?bs(R):ws(R)}function bs(R){return U+(R.point+3)*U}function ws(R){const K=R.serve=="first"&&R.server==0||R.serve=="second"&&R.server==1?.4:1.1;return R.server==0?V-P/2*Z+K*U:V+P/2*Z-K*U}function xs(R,K){return g?Ss(R):As(R,K)}function ks(R,K){return g?As(R,K):Ss(R)}function As(R,K){return U+(K+3)*U}function Ss(R){return+V+O(R)*U}};function O(L){return L.points[a.display.reverse?0:1]-L.points[a.display.reverse?1:0]}}_.g=function(k){if(!arguments.length)return _;typeof k!="object"||k.constructor==Array||(k.bars&&(d=k.bars),k.fish&&(p=k.fish),k.game&&(m=k.game))},_.options=function(k){return arguments.length?(A(k,a),_):a};function A(k,x){if(!k||!x)return;const O=Object.keys(k),L=Object.keys(x);for(let v=0;v<O.length;v++)if(L.indexOf(O[v])>=0){const y=x[O[v]],g=k[O[v]];typeof y=="object"&&typeof g!="function"&&y&&y.constructor!==Array?A(k[O[v]],x[O[v]]):x[O[v]]=k[O[v]]}}return _.events=function(k){return arguments.length?(A(k,u),_):u},_.width=function(k){return arguments.length?(a.width=k,_):a.width},_.height=function(k){return arguments.length?(a.height=k,_):a.height},_.coords=function(k){return arguments.length?(r=k,_):i},_.data=function(k){return arguments.length?(t=JSON.parse(JSON.stringify(k)),_):t},_.update=function(k){u.update.begin&&u.update.begin(),typeof s=="function"&&t&&s(k),setTimeout(function(){u.update.end&&u.update.end()},a.display.transition_time)},_.colors=function(k){if(!arguments.length)return c;if(typeof k!="object")return!1;const x=Object.keys(k);return x.length?(x.forEach(function(O){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(k[O])||delete k[O]}),Object.keys(k).length?c=k:c=JSON.parse(JSON.stringify(l)),_):!1},_}function Tm(){let t,e,n=[];const r={left:void 0,right:void 0},i={id:"m1",fullWidth:window.innerWidth,fullHeight:window.innerHeight,margins:{top:1,bottom:1,left:3,right:3},fish:{gridcells:["0","15","30","40","G"],cell_size:void 0,min_cell_size:5,max_cell_size:10},display:{continuous:!1,reverse:!1,orientation:"vertical",leftImg:!1,rightImg:!1,show_images:void 0,transition_time:0,sizeToFit:!0,service:!0,player:!0,rally:!0,score:!1,momentum_score:!0,grid:!0},colors:{players:{0:"red",1:"black"},results:{Out:"red",Net:"coral","Unforced Error":"red",Forced:"orange",Ace:"lightgreen","Serve Winner":"lightgreen",Winner:"lightgreen","Forced Volley Error":"orange","Forced Error":"orange",In:"yellow","Passing Shot":"lightgreen","Out Passing Shot":"red","Net Cord":"yellow","Out Wide":"red","Out Long":"red","Double Fault":"red",Unknown:"blue",Error:"red"}}};function s(){return i.fullWidth-i.margins.left-i.margins.right}function o(){return i.fullHeight-i.margins.top-i.margins.bottom}i.height=o(),i.width=s();const a={default:"#235dba"};let l=JSON.parse(JSON.stringify(a));const c={score:{click:null},leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mouseover:null,mouseout:null,click:null}};function u(h){h.each(function(d,p,m){const A=at(m[p]).append("div").attr("class","momentumRoot").attr("transform","translate(0, 0)"),k=A.append("svg").attr("class","momentumFrame");k.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),k.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const x=k.append("g").attr("id","momentumBars"),O=k.append("g").attr("id","momentumFish"),L=k.append("g").attr("id","momentumGame");e=function(v){if(i.display.sizeToFit||v&&v.sizeToFit){const E=h.node().getBoundingClientRect();i.display.orientation=="vertical"&&(i.fullWidth=Math.max(E.width,100)),i.fullHeight=Math.max(E.height,100)}i.height=o(),i.width=s();const y=i.display.orientation=="vertical"?1:0,g=y?i.width:i.height,P=g/2,G=Ci(t);let V=0;t.forEach(function(E){E.rally!=null&&E.rally.length>V&&(V=E.rally.length)});const Z=T();n.slice(G.length).forEach(function(E){ni(".c"+E.options().id).remove()}),n=n.slice(0,G.length);let H;const X=[0,0],U=[];G.forEach(function(E,F){n[F]||(n.push(Sc()),k.call(n[F]),n[F].g({bars:x.append("g").attr("class","cGF"+F),fish:O.append("g").attr("class","cGF"+F),game:L.append("g").attr("class","cGF"+F)}),n[F].options({id:"GF"+F,display:{score:!1,point_score:!1},fish:{school:!0}})),n[F].width(g).height(g),n[F].options({score:E.score,fish:{cell_size:Z,max_rally:V},display:{orientation:i.display.orientation,service:i.display.service,rally:i.display.rally,player:i.display.player,grid:i.display.grid},colors:{players:{0:i.colors.players[0],1:i.colors.players[1]}}}),n[F].data(E.points),n[F].coords(X).update();const B=n[F].coords();X[0]+=y?B==null?void 0:B[0]:(B==null?void 0:B[1])-(B==null?void 0:B[2])/2,X[1]+=y?B==null?void 0:B[1]:(B==null?void 0:B[0])+(B==null?void 0:B[2])/2,U.push({score:E.score,index:E.index,l:X[1]+(B==null?void 0:B[2])*1.75,o:X[0]+(B==null?void 0:B[2])*1.75,set_end:E.last_game}),E.last_game&&!i.display.continuous&&(X[y?0:1]=0),H=(B==null?void 0:B[2])/2}),A.attr("width",i.width+"px").attr("height",(y?100+X[1]:i.height)+"px").on("mouseover",$).on("mouseout",W),k.attr("width",i.width+"px").attr("height",(y?100+X[1]:i.height)+"px");const j=O.selectAll(".midline"+i.id).data([0]);j.enter().append("line").attr("class","midline"+i.id).attr("x1",y?P:H).attr("x2",y?P:X[0]+5*(H||0)).attr("y1",y?H:P).attr("y2",y?X[1]+5*H:P).attr("stroke-width",M).attr("stroke","#ccccdd"),j.exit().remove(),j.transition().duration(i.display.transition_time).attr("x1",y?P:H).attr("x2",y?P:X[0]+5*(H||0)).attr("y1",y?H:P).attr("y2",y?X[1]+5*H:P).attr("stroke-width",M).attr("stroke","#ccccdd");const J=O.selectAll(".score_line"+i.id).data(U);if(J.enter().append("line").attr("class","score_line"+i.id).attr("x1",function(E){return y?Z*2:E.o}).attr("x2",function(E){return y?g-Z*2:E.o}).attr("y1",function(E){return y?E.l:Z*3}).attr("y2",function(E){return y?E.l:g-Z*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),J.exit().remove(),J.transition().duration(i.display.transition_time).attr("x1",function(E){return y?Z*2:E.o}).attr("x2",function(E){return y?g-Z*2:E.o}).attr("y1",function(E){return y?E.l:Z*3}).attr("y2",function(E){return y?E.l:g-Z*3}).attr("stroke-width",M).attr("stroke-dasharray",function(E){return E.set_end?"0":"5,5"}).attr("stroke",function(E){return E.set_end?"#000000":"#ccccdd"}),i.display.momentum_score){const E=O.selectAll(".score_text"+i.id).data(U);E.exit().remove(),E.enter().append("g").attr("class","score_text"+i.id).attr("transform",I).on("click",function(B){c.score.click&&c.score.click(B)}).merge(E).attr("class","score_text"+i.id).attr("transform",I).on("click",function(B){c.score.click&&c.score.click(B)});const F=E.selectAll(".score"+i.id).data(function(B){return B.score});F.exit().remove(),F.enter().append("text").attr("class","score"+i.id).attr("transform",S).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(B){return B}).merge(F).attr("class","score"+i.id).transition().duration(i.display.transition_time).attr("transform",S).attr("font-size",H*4+"px").attr("opacity",.1).attr("text-anchor","middle").text(function(B){return B})}else O.selectAll(".score_text"+i.id).remove();function I(E){return C(0,y?E.l:E.o-H,0)}function S(E,F){const B=y?g/3:i.height/3,q=F?P+B:P-B+H*3,st=-1*H*(y?.25:.5);return C(q,st,0)}function C(E,F,B){const q=y?E:F,st=y?F:E;return"translate("+q+","+st+") rotate("+B+")"}function M(){return H>20?2:1}function T(){let E;if(i.display.orientation=="vertical")E=i.width/2/(N()+1);else{const F=i.width/(t.length+4);E=Math.sqrt(2*F*F)}return Math.min(i.fish.max_cell_size,E)}function N(){let E=0;const F=[0,0];return t.forEach(function(B){F[B.point.winner]+=1;const q=Math.abs(F[0]-F[1]);q>E&&(E=q)}),E}i.display.rightImg?(r.right=k.selectAll("image.rightImage").data([0]),r.right.exit().remove(),r.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-20).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)}).merge(r.right).attr("x",i.width-20).attr("xlink:href",i.display.rightImg).on("click",function(){c.rightImage.click&&c.rightImage.click(i.id)})):k.selectAll("image.rightImage").remove(),i.display.leftImg?(r.left=k.selectAll("image.leftImage").data([0]),r.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){c.leftImage.click&&c.leftImage.click()}).merge(r.left).attr("xlink:href",i.display.leftImg).on("click",function(){c.leftImage.click&&c.leftImage.click(i.id)}),r.left.exit().remove()):k.selectAll("image.leftImage").remove();function $(){i.display.show_images!=!1&&(i.display.leftImg&&r.left.attr("opacity",1),i.display.rightImg&&r.right.attr("opacity",1))}function W(){i.display.show_images||(i.display.leftImg&&r.left.attr("opacity",0),i.display.rightImg&&r.right.attr("opacity",0))}}})}u.options=function(h){return arguments.length?(f(h,i),u):i};function f(h,d){if(!h||!d)return;const p=Object.keys(h),m=Object.keys(d);for(let _=0;_<p.length;_++)if(m.indexOf(p[_])>=0){const A=d[p[_]],k=h[p[_]];typeof A=="object"&&typeof k!="function"&&A.constructor!==Array?f(h[p[_]],d[p[_]]):d[p[_]]=h[p[_]]}}return u.events=function(h){return arguments.length?(f(h,c),u):c},u.width=function(h){return arguments.length?(i.fullWidth=h,u):i.fullWidth},u.height=function(h){return arguments.length?(i.fullHeight=h,u):i.fullHeight},u.data=function(h){return arguments.length?(t=h,u):t},u.update=function(h){c.update.begin&&c.update.begin(),typeof e=="function"&&t&&e(h),setTimeout(function(){c.update.end&&c.update.end()},i.display.transition_time)},u.colors=function(h){if(!arguments.length)return l;if(typeof h!="object")return!1;const d=Object.keys(h);return d.length?(d.forEach(function(p){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(h[p])||delete h[p]}),Object.keys(h).length?l=h:l=JSON.parse(JSON.stringify(a)),u):!1},u}function Mm(){function t(I){return Math.max.apply(null,I)}function e(I){return Math.min.apply(null,I)}const n={left:void 0,right:void 0};let r=[];const i={width:150,height:150,min_max:20,margins:{top:0,right:0,bottom:0,left:0},display:{noAd:!1,leftImg:!1,rightImg:!1,show_images:!1,sizeToFit:!0,showEmpty:!1},lines:{easing:!1,duration:600,points:{winners:"#2ed2db",errors:"#2ed2db",unknown:"#2ed2db"},colors:{underlines:"#2ed2db"}},nodes:{colors:{0:"black",1:"red",neutral:"#ecf0f1"}},points:{winners:["Winner","Ace","Serve Winner","Passing Shot","Return Winner","Forcing Error","Forcing Volley Error","Net Cord","In"],errors:["Unforced Error","Unforced","Forced Error","Error","Out","Net","Netted Passing Shot","L","Overhead Passing Shot","Double Fault"],highlight:[]},selectors:{enabled:!0,selected:{0:!1,1:!1}},labels:{Game:"GAME",Player:"Player",Opponent:"Opponent"}};let s,o,a;const l=0,c="x";let u={w:{},e:{},p:{},n:{}};const f={leftImage:{click:null},rightImage:{click:null},update:{begin:null,end:null},point:{mousemove:null,mouseout:null},node:{mousemove:null,mouseout:null},score:{mousemove:null,mouseout:null},label:{mousemove:null,mouseout:null,click:A},selector:{mousemove:null,mouseout:null,click:A}};function h(I){const S=I.append("div").attr("class","gametreeRoot");o=S.append("svg"),s=function(C){if(!r.length&&!i.display.showEmpty){o.selectAll("*").remove();return}if(p(),i.display.sizeToFit||C&&C.sizeToFit){const b=I.node().getBoundingClientRect();i.width=Math.min(b.width,b.height)}const M=i.width-(i.margins.left+i.margins.right),T=i.width*.9;a=(T+M)/2*.03;const N=G.map(function(b){return b.id}),$=e(N.map(function(b){return isNaN(u.p[b])?0:u.p[b]})),W=t([t(N.map(function(b){return isNaN(u.p[b])?0:u.p[b]})),i.min_max]),E=jt().domain([$,W]).range([0,a*2]);o.transition().duration(l).attr("width",M).attr("height",T);const F=o.selectAll(".gradient").data(G,m);F.exit().remove(),F.enter().append("linearGradient").attr("id",function(b){return"gradient"+b.id}).attr("class","gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T}).merge(F).attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T});const B=F.selectAll(".points_stop").data(b=>k(b));B.exit().remove(),B.enter().append("stop").attr("class","points_stop").attr("offset",function(b){return b.offset}).attr("stop-color",function(b){return b.color}).merge(B).attr("offset",function(b){return b.offset});const q=o.selectAll(".line").data(G);q.exit().remove(),q.enter().append("line").attr("class","line").attr("id",function(b){return b.id}).attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T}).attr("stroke-width",function(b){return b.width?b.width:0}).attr("stroke",function(b){return"url(#gradient"+b.id+")"}).on("mousemove",function(b,Q){f.point.mousemove&&f.point.mousemove(b,Q)}).on("mouseout",function(b,Q){f.point.mouseout&&f.point.mouseout(b,Q)}).on("click",function(b,Q){f.point.click&&f.point.click(b,Q)}).merge(q).transition().duration(i.lines.easing||C&&C.easing?i.lines.duration:0).attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T}).attr("stroke-width",function(b){return u.p[b.id]?E(u.p[b.id]):0});const st=o.selectAll(".uline").data(V);st.exit().remove(),st.enter().append("line").attr("class","uline").attr("id",function(b){return b.id}).attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T}).attr("stroke-width",function(b){return b.width?b.width:0}).attr("stroke",function(){return i.lines.colors.underlines}).merge(st).transition().duration(l).attr("id",function(b){return b.id}).attr("x1",function(b){return b.start.x*M}).attr("y1",function(b){return b.start.y*T}).attr("x2",function(b){return b.end.x*M}).attr("y2",function(b){return b.end.y*T}).attr("stroke-width",function(b){return b.width?b.width:0});const vt=o.selectAll(".node").data(P);vt.exit().remove(),vt.enter().append("circle").attr("class","node").attr("cx",function(b){return b.pos.x*M}).attr("cy",function(b){return b.pos.y*T}).attr("r",function(){return a}).attr("stroke",function(b){return b.color_pct!=null?j(J(i.nodes.colors[b.player]),b.color_pct):i.nodes.colors.neutral}).attr("fill",function(b){return b.color_pct!=null?j(J(i.nodes.colors[b.player]),b.color_pct):i.nodes.colors.neutral}).on("mousemove",function(b,Q){f.score.mousemove&&f.score.mousemove(b,Q)}).on("mouseout",function(b,Q){f.node.mouseout&&f.node.mouseout(b,Q)}).on("click",function(b,Q){f.node.click&&f.node.click(b,Q)}).merge(vt).transition().duration(l).attr("cx",function(b){return b.pos.x*M}).attr("cy",function(b){return b.pos.y*T}).attr("r",function(){return a});const D=o.selectAll(".score").data(Z);D.exit().remove(),D.enter().append("text").attr("class","score").attr("x",function(b){return b.pos.x*M}).attr("y",function(b){return b.pos.y*T}).attr("font-size",function(b){return a*b.fontsize+"px"}).attr("font-family","Lato, Arial, sans-serif").attr("text-anchor","middle").attr("alignment-baseline","central").attr("stroke",function(b){return b.stroke}).attr("fill",function(b){return b.fill}).text(function(b){if(a*b.fontsize>7)return b.text}).on("mousemove",function(b,Q){f.score.mousemove&&f.score.mousemove(b,Q)}).on("mouseout",function(b,Q){f.score.mouseout&&f.score.mouseout(b,Q)}).on("click",function(b,Q){f.score.click&&f.score.click(b,Q)}).merge(D).transition().duration(l).attr("x",function(b){return b.pos.x*M}).attr("y",function(b){return b.pos.y*T}).attr("font-size",function(b){return a*b.fontsize+"px"}).text(function(b){if(a*b.fontsize>5)return b.text});const z=o.selectAll(".gt_label").data(Y);z.exit().remove(),z.enter().append("text").attr("class","gt_label").attr("x",function(b){return b.pos.x*M}).attr("y",function(b){return b.pos.y*T}).attr("alignment-baseline",function(b){return b.baseline?b.baseline:void 0}).attr("font-size",function(b){return a*b.fontsize+"px"}).attr("text-anchor",function(b){return b.anchor?b.anchor:void 0}).attr("font-family","Lato, Arial, sans-serif").attr("stroke",function(b){return b.stroke}).attr("fill",function(b){return b.fill}).text(function(b){if(a*b.fontsize>5)return b.id}).attr("selector",function(b){return b.id}).on("click",function(b,Q,Ct){f.label.click&&f.label.click(b,Q,Ct[Q])}).merge(z).transition().duration(l).attr("x",function(b){return b.pos.x*M}).attr("y",function(b){return b.pos.y*T}).attr("font-size",function(b){return a*b.fontsize+"px"}).text(function(b){if(a*b.fontsize>5)return i.labels[b.id]});const ot=o.selectAll(".selector").data(H);ot.exit(),ot.enter().append("circle").attr("class","selector").attr("status",function(b){return b.status}).attr("id",function(b){return b.id}).attr("selector",function(b){return b.id}).attr("cx",function(b){return b.pos.x*M}).attr("cy",function(b){return b.pos.y*T+4}).attr("r",function(b){return a*b.r_pct}).attr("stroke",function(b,Q){return i.nodes.colors[Q]}).attr("stroke-width",function(){return a*.25}).attr("fill",function(b,Q){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[Q]?i.nodes.colors[Q]:i.nodes.colors.neutral}).attr("opacity",function(b){return b.opacity}).on("mousemove",function(b,Q){f.selector.mousemove&&f.selector.mousemove(b,Q)}).on("mouseout",function(b,Q){f.selector.mouseout&&f.selector.mouseout(b,Q)}).on("click",function(b,Q,Ct){f.selector.click&&f.selector.click(b,Q,Ct[Q])}).merge(ot).transition().duration(l).attr("cx",function(b){return b.pos.x*M}).attr("cy",function(b){return b.pos.y*T+4}).attr("r",function(b){return a*b.r_pct}).attr("stroke-width",function(){return a*.25}).attr("fill",function(b,Q){return!i.selectors.enabled||i.selectors.enabled&&i.selectors.selected[Q]?i.nodes.colors[Q]:i.nodes.colors.neutral}),i.display.rightImg?(n.right=o.selectAll("image.rightImage").data([0]),n.right.exit().remove(),n.right.enter().append("image").attr("class","rightImage").attr("xlink:href",i.display.rightImg).attr("x",i.width-(i.margins.right+30)).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)}).merge(n.right).attr("x",i.width-(i.margins.right+30)).attr("xlink:href",i.display.rightImg).on("click",function(){f.rightImage.click&&f.rightImage.click(i.id)})):S.selectAll("image.rightImage").remove(),i.display.leftImg?(n.left=o.selectAll("image.leftImage").data([0]),n.left.enter().append("image").attr("class","leftImage").attr("xlink:href",i.display.leftImg).attr("x",10+i.margins.left).attr("y",5).attr("height","20px").attr("width","20px").attr("opacity",i.display.show_images?1:0).on("click",function(){f.leftImage.click&&f.leftImage.click()}).merge(n.left).attr("x",10+i.margins.left).attr("xlink:href",i.display.leftImg).on("click",function(){f.leftImage.click&&f.leftImage.click(i.id)}),n.left.exit().remove()):S.selectAll("image.leftImage").remove()}}h.exports=function(){return{selectView:A}},h.options=function(I){return arguments.length?(d(I,i),h):i};function d(I,S){if(!I||!S)return;const C=Object.keys(I),M=Object.keys(S);for(let T=0;T<C.length;T++)if(M.indexOf(C[T])>=0){const N=S[C[T]],$=I[C[T]];typeof N=="object"&&typeof $!="function"&&N&&N.constructor!==Array?d(I[C[T]],S[C[T]]):S[C[T]]=I[C[T]]}}h.events=function(I){return arguments.length?(d(I,f),h):f},h.reset=function(){return r=[],_(),u={w:{},e:{},p:{},n:{}},h},h.width=function(I){return arguments.length?(i.width=I,h):i.width},h.height=function(I){return arguments.length?(i.height=I,h):i.height},h.data=function(I){return arguments.length?(I.constructor===Array&&(h.reset(),r=I),h):r},h.counters=function(){return p(),u},h.update=function(I){f.update.begin&&f.update.begin(),typeof s=="function"&&s(I),setTimeout(function(){f.update.end&&f.update.end()},l)};function p(){let I;if(u={w:{},e:{},p:{},n:{}},i.selectors.selected[0]||i.selectors.selected[1]){const C=i.selectors.selected[0]?0:1;I=r.filter(function(M){return M.point.server==C})}else I=r;I=I.filter(function(C){return!C.point.tiebreak});for(let C=0;C<I.length;C++){const M=I[C-1],N="L"+(C==0||M.game.complete?S([0,0]):S(M.point.points))+c+S(I[C].point.points);i.points.highlight.length&&i.points.highlight.indexOf(C)<0||(u.p[N]=u.p[N]?u.p[N]+1:1,i.points.winners.indexOf(I[C].point.result)>=0?u.w[N]=u.w[N]?u.w[N]+1:1:i.points.errors.indexOf(I[C].point.result)>=0&&(u.e[N]=u.e[N]?u.e[N]+1:1))}function S(C){const M=Math.min(...C),T=M>=4?M-3:0;return C.map(($,W)=>i.display.noAd&&$==4&&C[1-W]==3?"G":$-T).join("-")}}function m(I){return I&&I.id}function _(){at("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),i.selectors.selected[1]=!1,i.selectors.selected[0]=!1}function A(I,S,C){if(!i.selectors.enabled)return;const M=at(C).attr("selector");at("[id="+M+"]").attr("status")=="none"?at(C).attr("selector")=="Opponent"?(at("[id=Player]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Opponent]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[1]=!0,i.selectors.selected[0]=!1):(at("[id=Opponent]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at("[id=Player]").attr("opacity",1).attr("status","selected").attr("fill",i.nodes.colors[S]),i.selectors.selected[0]=!0,i.selectors.selected[1]=!1):(at("[id="+M+"]").attr("opacity",.4).attr("status","none").attr("fill",i.nodes.colors.neutral),at(C).attr("selector")=="Opponent"?i.selectors.selected[1]=!1:i.selectors.selected[0]=!1),s()}function k(I){if(!u.p[I.id])return[];const S=u.p[I.id]==null?1:u.p[I.id],C=u.w[I.id]?u.w[I.id]:0,M=u.e[I.id]?u.e[I.id]:0,T=C/S*100,N=(S-(C+M))/S*100;return[{offset:"0%",color:i.lines.points.unknown},{offset:N+"%",color:i.lines.points.unknown},{offset:N+"%",color:i.lines.points.winners},{offset:N+T+"%",color:i.lines.points.winners},{offset:N+T+"%",color:i.lines.points.errors},{offset:"100%",color:i.lines.points.errors}]}const x=.07,O=.14,L=.05,v=.21,y={col1:x,col2:x+O,col3:x+2*O,col4:x+3*O,col5:x+4*O,col6:x+5*O,col7:x+6*O,row1:L,row2:L+v,row3:L+2*v,row4:L+3*v,row5:L+4*v,foot:L+4.1*v,adr1:L+3.5*v,adc1:x+O*2.5,adc2:x+O*3.5,selc:x*.8,tslc:x,sl1r:L/2,sl2r:L*1.5,plr1:x*.8,plr2:x+4*O,plrs:L+4.25*v},g={"p0-0":{x:y.col4,y:y.row1},"p1-1":{x:y.col4,y:y.row2},"p2-2":{x:y.col4,y:y.row3},"p3-3":{x:y.col4,y:y.row4},"p1-0":{x:y.col3,y:y.row2},"p0-1":{x:y.col5,y:y.row2},"p2-1":{x:y.col3,y:y.row3},"p1-2":{x:y.col5,y:y.row3},"p2-0":{x:y.col2,y:y.row3},"p0-2":{x:y.col6,y:y.row3},"p3-2":{x:y.col3,y:y.row4},"p2-3":{x:y.col5,y:y.row4},"p3-1":{x:y.col2,y:y.row4},"p1-3":{x:y.col6,y:y.row4},"p3-0":{x:y.col1,y:y.row4},"p0-3":{x:y.col7,y:y.row4},"p3-4":{x:y.adc1,y:y.adr1},"p4-3":{x:y.adc2,y:y.adr1},"p5-3":{x:y.adc2,y:y.row5},"p3-5":{x:y.adc1,y:y.row5},"p4-1":{x:y.col2,y:y.row5},"p1-4":{x:y.col6,y:y.row5},"p4-2":{x:y.col3,y:y.row5},"p2-4":{x:y.col5,y:y.row5},"p4-0":{x:y.col1,y:y.row5},"p0-4":{x:y.col7,y:y.row5},"pG-3":{x:y.col4,y:y.row5},"p3-G":{x:y.col4,y:y.row5},sPlyr:{x:y.adc1,y:y.plrs},tPlyr:{x:y.col2,y:y.plrs},sOpp:{x:y.adc2,y:y.plrs},tOpp:{x:y.col6,y:y.plrs},GAME:{x:y.col4,y:y.foot},L1s:{x:y.col1,y:y.foot},L1e:{x:y.adc1,y:y.foot},L2s:{x:y.adc2,y:y.foot},L2e:{x:y.col7,y:y.foot}},P=[{name:"0-0",pos:g["p0-0"],player:0},{name:"15-15",pos:g["p1-1"],player:0},{name:"30-30",pos:g["p2-2"],player:0},{name:"40-40",pos:g["p3-3"],player:0},{name:"0-15",pos:g["p0-1"],color_pct:.4,player:1},{name:"15-30",pos:g["p1-2"],color_pct:.4,player:1},{name:"0-30",pos:g["p0-2"],color_pct:.2,player:1},{name:"30-40",pos:g["p2-3"],color_pct:.4,player:1},{name:"15-40",pos:g["p1-3"],color_pct:.2,player:1},{name:"0-40",pos:g["p0-3"],color_pct:0,player:1},{name:"40-A",pos:g["p4-3"],color_pct:.5,player:1},{name:"15-0",pos:g["p1-0"],color_pct:.4,player:0},{name:"30-15",pos:g["p2-1"],color_pct:.4,player:0},{name:"30-0",pos:g["p2-0"],color_pct:.2,player:0},{name:"40-30",pos:g["p3-2"],color_pct:.4,player:0},{name:"40-15",pos:g["p3-1"],color_pct:.2,player:0},{name:"40-0",pos:g["p3-0"],color_pct:0,player:0},{name:"A-40",pos:g["p3-4"],color_pct:.5,player:0}],G=[{id:"L0-0x0-1",start:g["p0-0"],end:g["p0-1"]},{id:"L0-0x1-0",start:g["p0-0"],end:g["p1-0"]},{id:"L0-1x0-2",start:g["p0-1"],end:g["p0-2"]},{id:"L0-1x1-1",start:g["p0-1"],end:g["p1-1"]},{id:"L1-0x2-0",start:g["p1-0"],end:g["p2-0"]},{id:"L1-0x1-1",start:g["p1-0"],end:g["p1-1"]},{id:"L1-1x1-2",start:g["p1-1"],end:g["p1-2"]},{id:"L1-1x2-1",start:g["p1-1"],end:g["p2-1"]},{id:"L2-0x2-1",start:g["p2-0"],end:g["p2-1"]},{id:"L2-0x3-0",start:g["p2-0"],end:g["p3-0"]},{id:"L2-1x2-2",start:g["p2-1"],end:g["p2-2"]},{id:"L2-1x3-1",start:g["p2-1"],end:g["p3-1"]},{id:"L2-2x2-3",start:g["p2-2"],end:g["p2-3"]},{id:"L2-2x3-2",start:g["p2-2"],end:g["p3-2"]},{id:"L0-2x0-3",start:g["p0-2"],end:g["p0-3"]},{id:"L0-2x1-2",start:g["p0-2"],end:g["p1-2"]},{id:"L0-3x0-4",start:g["p0-3"],end:g["p0-4"]},{id:"L0-3x1-3",start:g["p0-3"],end:g["p1-3"]},{id:"L1-2x2-2",start:g["p1-2"],end:g["p2-2"]},{id:"L1-2x1-3",start:g["p1-2"],end:g["p1-3"]},{id:"L1-3x2-3",start:g["p1-3"],end:g["p2-3"]},{id:"L1-3x1-4",start:g["p1-3"],end:g["p1-4"]},{id:"L2-3x3-3",start:g["p2-3"],end:g["p3-3"]},{id:"L2-3x2-4",start:g["p2-3"],end:g["p2-4"]},{id:"L3-3x3-4",start:g["p3-3"],end:g["p4-3"]},{id:"L3-3x4-3",start:g["p3-3"],end:g["p3-4"]},{id:"L3-2x3-3",start:g["p3-2"],end:g["p3-3"]},{id:"L3-2x4-2",start:g["p3-2"],end:g["p4-2"]},{id:"L3-1x3-2",start:g["p3-1"],end:g["p3-2"]},{id:"L3-1x4-1",start:g["p3-1"],end:g["p4-1"]},{id:"L3-0x3-1",start:g["p3-0"],end:g["p3-1"]},{id:"L3-0x4-0",start:g["p3-0"],end:g["p4-0"]},{id:"L3-4x3-5",start:g["p4-3"],end:g["p5-3"]},{id:"L4-3x5-3",start:g["p3-4"],end:g["p3-5"]},{id:"L3-3xG-3",start:g["p3-3"],end:g["pG-3"]},{id:"L3-3x3-G",start:g["p3-3"],end:g["p3-G"]}],V=[{stroke:"blue",start:g.L1s,end:g.L1e,width:2},{stroke:"blue",start:g.L2s,end:g.L2e,width:2}],Z=[{pos:g["p0-0"],fill:"black",fontsize:.7,text:"0-0"},{pos:g["p1-1"],fill:"black",fontsize:.7,text:"15-15"},{pos:g["p2-2"],fill:"black",fontsize:.7,text:"30-30"},{pos:g["p3-3"],fill:"black",fontsize:.7,text:"40-40"},{pos:g["p0-1"],fill:"white",fontsize:.7,text:"0-15"},{pos:g["p1-2"],fill:"white",fontsize:.7,text:"15-30"},{pos:g["p0-2"],fill:"white",fontsize:.7,text:"0-30"},{pos:g["p2-3"],fill:"white",fontsize:.7,text:"30-40"},{pos:g["p1-3"],fill:"white",fontsize:.7,text:"15-40"},{pos:g["p0-3"],fill:"white",fontsize:.7,text:"0-40"},{pos:g["p4-3"],fill:"white",fontsize:.7,text:"40-A"},{pos:g["p1-0"],fill:"white",fontsize:.7,text:"15-0"},{pos:g["p2-1"],fill:"white",fontsize:.7,text:"30-15"},{pos:g["p2-0"],fill:"white",fontsize:.7,text:"30-0"},{pos:g["p3-2"],fill:"white",fontsize:.7,text:"40-30"},{pos:g["p3-1"],fill:"white",fontsize:.7,text:"40-15"},{pos:g["p3-0"],fill:"white",fontsize:.7,text:"40-0"},{pos:g["p3-4"],fill:"white",fontsize:.7,text:"A-40"}],Y=[{pos:g.tPlyr,fill:"black",fontsize:.9,id:"Player",anchor:"middle",baseline:"hanging"},{pos:g.tOpp,fill:"black",fontsize:.9,id:"Opponent",anchor:"middle",baseline:"hanging"},{pos:g.GAME,fill:"#555555",fontsize:.9,id:"Game",anchor:"middle",baseline:"central"}],H=[{id:"Player",pos:g.sPlyr,r_pct:.4,opacity:1,status:"none"},{id:"Opponent",pos:g.sOpp,r_pct:.4,opacity:.4,status:"none"}];function X(I,S){const C=parseInt(I.slice(1),16),M=S<0?0:255,T=S<0?S*-1:S,N=C>>16,$=C>>8&255,W=C&255;return"#"+(16777216+(Math.round((M-N)*T)+N)*65536+(Math.round((M-$)*T)+$)*256+(Math.round((M-W)*T)+W)).toString(16).slice(1)}function U(I,S){const C=I.split(","),M=S<0?0:255,T=S<0?S*-1:S,N=parseInt(C[0].slice(4)),$=parseInt(C[1]),W=parseInt(C[2]);return"rgb("+(Math.round((M-N)*T)+N)+","+(Math.round((M-$)*T)+$)+","+(Math.round((M-W)*T)+W)+")"}function j(I,S){return I.length>7?U(I,S):X(I,S)}function J(I){const S=document.createElement("div");S.style.color=I;const C=window.getComputedStyle(document.body.appendChild(S)).color.match(/\d+/g).map(function(M){return parseInt(M,10)});return document.body.removeChild(S),C.length>=3?"#"+((1<<24)+(C[0]<<16)+(C[1]<<8)+C[2]).toString(16).substr(1):!1}return h}function Cm(){let t;const e={id:0,class:"ptsMatch",resize:!0,width:window.innerWidth,height:80,max_height:100,margins:{top:0,right:0,bottom:0,left:0},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{sizeToFit:!0,transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!0,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"#a55194",1:"#6b6ecf"}}};let n;const r=[];let i;const s=[];for(let c=0;c<5;c++)s.push(Om());const o={update:{begin:null,end:null},set_box:{mouseover:null,mouseout:null},point_bars:{mouseover:null,mouseout:null,click:null}};function a(c){if(i=c,e.display.sizeToFit){const f=c.node().getBoundingClientRect();e.width=Math.max(f.width,400)}const u=i.append("div").attr("class",e.class+"root").style("width",e.width+"px").style("height",e.height+"px");for(let f=0;f<5;f++)r[f]=u.append("div").attr("class","pts").style("display","none"),r[f].call(s[f]);n=function(f){var p;const h=t.sets();if(e.display.sizeToFit||f!=null&&f.sizeToFit){const m=c.node().getBoundingClientRect();e.width=Math.max(m.width,400),e.height=(m.height-(+e.margins.top+ +e.margins.bottom))/h.length,e.height>e.max_height&&(e.height=e.max_height)}let d=0;for(let m=0;m<s.length;m++)(p=h==null?void 0:h[m])!=null&&p.history.points().length?(r[m].style("display","inline"),s[m].width(e.width),s[m].height(e.height),s[m].update(),d+=+e.height+5):r[m].style("display","none");u.style("width",e.width+"px").style("height",d+"px")}}a.options=function(c){return arguments.length?(l(c,e),a):e};function l(c,u){if(!c||!u)return;const f=Object.keys(c),h=Object.keys(u);for(const d of f)if(h.indexOf(d)>=0){const p=u[d],m=c[d];typeof p=="object"&&typeof m!="function"&&p&&p.constructor!==Array?l(c[d],u[d]):u[d]=c[d]}}return a.events=function(c){return arguments.length?(l(c,o),a):o},a.colors=function(c){return arguments.length?(e.colors.players=c,a):e.colors},a.width=function(c){return arguments.length?(e.width=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.width(c)}),a):e.width},a.height=function(c){return arguments.length?(e.height=c,typeof n=="function"&&n(!0),s.forEach(function(u){u.height(c)}),a):e.height},a.duration=function(c){return arguments.length?(e.display.transition_time=c,a):e.display.transition_time},a.update=function(c){o.update.begin&&o.update.begin();const u=t.sets(),f=Math.max(...u.map((h,d)=>h.history.points().filter(p=>p.set==d).length));return u.length>1&&a.options({points:{max_width_points:f}}),u.forEach(function(h,d){s[d].data(u[d]),s[d].options({id:d}),s[d].options({lines:e.lines,points:e.points,score:e.score,header:e.header}),s[d].options({set:e.set,display:e.display,colors:e.colors}),s[d].events(o),s[d].width(e.width).height(e.height).update(c)}),typeof n=="function"&&n(c),setTimeout(function(){o.update.end&&o.update.end()},e.display.transition_time),!0},a.data=function(c){if(!arguments.length)return t;t=c,a.update()},a}function Om(){let t,e,n;const r=["Ace","Winner","Serve Winner"],i=["Forced Error","Unforced Error","Double Fault","Penalty","Out","Net"],s={id:0,class:"ptsChart",resize:!0,width:window.innerWidth,height:80,margins:{top:5,right:15,bottom:5,left:5},set:{average_points:56},lines:{width:2,interpolation:"linear"},points:{max_width_points:100},score:{font:"Arial",font_size:"12px",font_weight:"bold",reverse:!0},header:{font:"Arial",font_size:"14px",font_weight:"bold"},display:{transition_time:0,point_highlighting:!0,point_opacity:.4,win_err_highlight:!0,game_highlighting:!0,game_opacity:.2,game_boundaries:!1,gamepoints:!1,score:!0,points:!0,winner:!0},colors:{orientation:"yellow",gamepoints:"black",players:{0:"blue",1:"purple"}}};let o,a;const l={set_box:{mouseover:null,mouseout:null},update:{begin:null,end:null},point_bars:{mouseover:null,mouseout:null,click:null}};function c(p){p.each(function(m,_,A){a=at(A[_]);const k=a.append("svg").attr("class",s.class+"root").style("width",s.width+"px").style("height",s.height+"px"),x=k.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),O=k.append("g").attr("class",s.class+"pts").attr("transform","translate(5, 5)"),L=x.append("text").attr("class",s.class+"Header").attr("opacity",0).attr("font-size",s.header.font_size).attr("font-weight",s.header.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+8+"px"}),v=x.append("text").attr("class",s.class+"Score").attr("opacity",0).attr("font-size",s.score.font_size).attr("font-weight",s.score.font_weight).attr("x",function(){return s.margins.left+"px"}).attr("y",function(){return s.margins.top+20+"px"});o=function(y,g){if(!t)return!1;k.transition().duration(s.display.transition_time).style("width",s.width+"px").style("height",s.height+"px");const P=t.history.action("addPoint").filter(D=>D.point.set==s.id),G=P[0].point.index;e=d(P),n=P.map(D=>D.needed.points_to_set);const V=Math.max(...[].concat(n.map(D=>D[0]),n.map(D=>D[1]))),Z=Math.max(...n[0]);n.unshift([Z,Z]);const Y=Math.max.apply(null,P.map(function(D){return D.point.rally?D.point.rally.length:0}))+2;st(g);const H=jt().domain([0,h()]).range([0,s.width-(s.margins.left+s.margins.right)]);function X(D,z,ot){return D.range[z]<G?H(D.range[z]+ot):H(D.range[z]+ot-G)}const U=jt().range([s.height-(s.margins.top+s.margins.bottom),s.margins.bottom]).domain([-2,V-1]),j=x.selectAll("."+s.class+"SetBox").data([s.id]);j.enter().append("rect").attr("class",s.class+"SetBox").style("position","relative").attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none").on("mouseover",function(D,z){l.set_box.mouseover&&l.set_box.mouseover(D,z)}).on("mouseout",function(D,z){l.set_box.mouseout&&l.set_box.mouseout(D,z)}).merge(j).transition().duration(g?0:s.display.transition_time).attr("height",function(){return s.height-(s.margins.top+s.margins.bottom)}).attr("width",function(){return H(f()+1)}),j.exit().transition().duration(g?0:s.display.transition_time).style("opacity",0).remove();const J=x.selectAll("."+s.class+"GameBoundary").data(e);J.exit().remove(),J.enter().append("rect").attr("class",s.class+"GameBoundary").merge(J).attr("id",function(D,z){return s.class+s.id+"boundary"+z}).transition().duration(g?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+X(D,0,0)+", 0)"}).attr("height",U(-2)).attr("width",function(D){return X(D,1,1)-X(D,0,0)}).attr("stroke","black").attr("stroke-width",1).attr("fill","none");const I=x.selectAll("."+s.class+"Game").data(e);I.exit().remove(),I.enter().append("rect").attr("class",s.class+"Game").merge(I).attr("id",function(D,z){return s.class+s.id+"game"+z}).transition().duration(g?0:s.display.transition_time).attr("opacity",function(){return s.display.game_boundaries?.02:0}).attr("transform",function(D){return"translate("+X(D,0,0)+", 0)"}).attr("height",U(-2)).attr("width",function(D){return X(D,1,1)-X(D,0,0)}).attr("stroke",function(D){return s.colors.players[D.winner]}).attr("stroke-width",1).attr("fill",function(D){return D.winner!=null?s.colors.players[D.winner]:"none"});const S=gc().x(function(D,z){return H(z)}).y(function(D){return U(V-D)}),C=x.selectAll("."+s.class+"Line").data([0,1]);C.exit().remove(),C.enter().append("path").attr("class",s.class+"Line").attr("id",function(D){return s.class+s.id+"player"+D+"Line"}).attr("fill","none").merge(C).transition().duration(g?0:s.display.transition_time/2).style("opacity",.1).transition().duration(g?0:s.display.transition_time/2).style("opacity",1).attr("stroke",function(D){return s.colors.players[D]}).attr("stroke-width",function(){return s.lines.width}).attr("d",function(D){return S(n.map(z=>z[D]))});const M=[n.map(D=>({pts:D[0]})),n.map(D=>({pts:D[1]}))],T=x.selectAll("."+s.class+"BPWrapper").data(M);T.enter().append("g").attr("class",s.class+"BPWrapper"),T.exit().remove();const N=T.selectAll("."+s.class+"Breakpoint").data(function(D,z){return u(D,z)});N.exit().attr("opacity","0").remove(),N.enter().append("circle").attr("class",s.class+"Breakpoint").attr("opacity","0").merge(N).transition().duration(g?0:s.display.transition_time/2).style("opacity",0).transition().duration(g?0:s.display.transition_time/2).attr("fill",function(D,z){if(P[z-1]&&P[z-1].point.breakpoint!=null)return s.colors.players[D._i]}).style("opacity",function(D,z){if(P[z-1]&&P[z-1].point.breakpoint!=null)return P[z-1].point.server==1-D._i?1:0}).attr("cx",function(D,z){return H(z)}).attr("cy",function(D){return U(V-D.pts)}).attr("r",2);const $=Ft(P.length),W=kr().domain($).range([0,H(P.length)]).round(!0),E=jt().domain([0,P.length]).range([0,H(P.length)]);x.selectAll(".gradient"+s.id).remove();const F=x.selectAll(".gradient"+s.id).data(Ft(P.length));F.exit().remove(),F.enter().append("linearGradient").attr("id",function(D,z){return"gradient"+s.id+z}).attr("class",function(){return"gradient"+s.id}).attr("gradientUnits","userSpaceOnUse").attr("x1",function(){return W.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return W.bandwidth()/2}).attr("y2",function(){return U(-2)}).merge(F).attr("transform",function(D,z){return"translate("+E(z)+", 0)"});const B=F.selectAll(".points_stop").data(function(D){return vt(P[D].point)});B.exit().remove(),B.enter().append("stop").attr("class","points_stop").attr("offset",function(D){return D.offset}).attr("stop-color",function(D){return D.color}).merge(B).attr("offset",function(D){return D.offset});const q=O.selectAll("."+s.class+"Bar").data(Ft(P.length));q.exit().transition().duration(g?0:s.display.transition_time).attr("opacity","0").remove(),q.enter().append("line").attr("class",s.class+"Bar").attr("opacity","0").merge(q).attr("opacity","0").attr("transform",function(D,z){return"translate("+E(z)+", 0)"}).attr("x1",function(){return W.bandwidth()/2}).attr("y1",function(){return 0}).attr("x2",function(){return W.bandwidth()/2}).attr("y2",function(){return U(-2)}).attr("stroke-width",function(){return W.bandwidth()}).attr("stroke",function(D,z){return"url(#gradient"+s.id+z+")"}).attr("uid",function(D,z){return"point"+z}).on("mousemove",function(D,z,ot){s.display.point_highlighting&&at(ot[z]).attr("opacity",s.display.point_opacity),s.display.game_highlighting&&P[z]&&at('[id="'+s.class+s.id+"game"+P[z].point.game+'"]').attr("opacity",s.display.game_opacity),l.point_bars.mouseover&&l.point_bars.mouseover(P[D],z),D==0&&O.selectAll("."+s.class+"Bar").attr("opacity",s.display.point_opacity)}).on("mouseout",function(D,z){O.selectAll("."+s.class+"Bar").attr("opacity",0),x.selectAll("."+s.class+"Game").attr("opacity","0"),l.point_bars.mouseout&&l.point_bars.mouseout(P[D],z),st()}).on("click",function(D,z,ot){l.point_bars.click&&l.point_bars.click(P[D],z,ot[z])});function st(D){const z=t.winner(),ot=t.metadata.players();function b(te){const Be=te.split(" ");return Be[Be.length-1]}const Q=z!=null?ot[z].name:`${b(ot[0].name)}/${b(ot[1].name)}`;L.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",z!=null?s.colors.players[z]:"black").text(Q);const Ct=t.scoreboard(z);v.transition().duration(D?0:s.display.transition_time).attr("opacity",1).attr("fill",z!=null?s.colors.players[z]:"black").text(Ct)}function vt(D){let z=0,ot=0,b=0;if(s.display.win_err_highlight){console.log("calcstops:",D);const Q=D.rally,Ct=D.result,te=Q?100-Math.floor(Q.length/Y*100):100;r.indexOf(Ct)>=0?z=te:i.indexOf(Ct)>=0?ot=te:b=te}return[{offset:"0%",color:"blue"},{offset:b+"%",color:"blue"},{offset:b+"%",color:"green"},{offset:b+z+"%",color:"green"},{offset:b+z+"%",color:"red"},{offset:b+z+ot+"%",color:"red"},{offset:b+z+ot+"%",color:s.colors.orientation},{offset:"100%",color:s.colors.orientation}]}}})}function u(p,m){for(const _ of p)_._i=m;return p}function f(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return t.complete()?p:p<s.set.average_points?s.set.average_points:p}function h(){const p=t.history.points().filter(m=>m.set==s.id).length-1;return Math.max(p,s.points.max_width_points,s.set.average_points)}function d(p){const m=[{points:[],range:[0,0]}];let _=0,A=0;return p.forEach(k=>{const x=k.point;x.game!=A&&(_+=1,A=x.game,m[_]={points:[],range:[x.index,x.index]}),m[_].points.push(x),m[_].index=_,m[_].set=k.set.index,m[_].score=k.game.games,m[_].complete=k.game.complete,m[_].range[1]=x.index,k.game.complete&&(m[_].winner=x.winner)}),m}return c.options=function(p){if(!arguments.length)return s;const m=Object.keys(p),_=Object.keys(s);for(const A of m)if(_.indexOf(A)>=0)if(typeof s[A]=="object"){const k=Object.keys(p[A]),x=Object.keys(s[A]);for(const O of k)x.indexOf(O)>=0&&(s[A][O]=p[A][O])}else s[A]=p[A];return c},c.data=function(p){if(!arguments.length)return t;t=p},c.events=function(p){if(!arguments.length)return l;const m=Object.keys(p),_=Object.keys(l);for(const A of m)_.indexOf(A)>=0&&(l[A]=p[A]);return c},c.colors=function(p){return arguments.length?(s.colors.players=p,c):s.colors},c.width=function(p){return arguments.length?(s.width=p,c):s.width},c.height=function(p){return arguments.length?(s.height=p,c):s.height},c.update=function(p){return l.update.begin&&l.update.begin(),typeof o=="function"&&o(p),setTimeout(function(){l.update.end&&l.update.end()},s.display.transition_time),!0},c.duration=function(p){return arguments.length?(s.display.transition_time=p,c):s.display.transition_time},c}function Nm(){let t=["#a55194","#6b6ecf"];it.mc=Tm(),it.mc.options({display:{sizeToFit:!1,continuous:!1,orientation:"vertical",transition_time:0,service:!1,rally:!0,player:!1,grid:!1,score:!0},colors:t}),it.mc.events({score:{click:Lm}}),at("#momentumChart").call(it.mc),t={players:["#a55194","#6b6ecf"]},it.gamefish=Sc(),it.gamefish.options({display:{sizeToFit:!0},colors:t}),at("#gameFishChart").call(it.gamefish),it.gametree=Mm();const e={display:{sizeToFit:!0},lines:{points:{winners:"green",errors:"#BA1212",unknown:"#2ed2db"},colors:{underlines:"black"}},nodes:{colors:{0:t.players[0],1:t.players[1],neutral:"#ecf0f1"}},selectors:{enabled:!0,selected:{0:!1,1:!1}}};it.gametree.options(e),at("#gameTreeChart").call(it.gametree),it.pts_match=Cm(),it.pts_match.options({margins:{top:40,bottom:20},display:{sizeToFit:!0}}),it.pts_match.data(w.match),at("#PTSChart").call(it.pts_match)}function Lm(t){os(t.index)}function Rm(){const t=document.getElementById("gamefish");t&&(t.style.display="none")}function os(t){const e=document.getElementById("gamefish");e&&(e.style.display="flex");const n=Ci(),r=t!=null?n[t]:n[n.length-1],i=r.points[0].tiebreak?["0","1","2","3","4","5","6","7"]:["0","15","30","40","G"];it.gamefish.options({display:{reverse:w.swap_sides},fish:{gridcells:i,cell_size:20},score:r.score}),it.gamefish.data(r.points).update(),window.scrollTo(0,0)}function Ec(){const t=w.orientation=="landscape"?"horizontal":"vertical";w.view=="pts"&&t=="vertical"?(ft("none","pts"),ft("inline","momentum"),it.mc.width(window.innerWidth).height(820),it.mc.update(),w.view="momentum"):w.view=="momentum"&&t=="horizontal"&&(ft("none","momentum"),ft("flex","pts"),it.pts_match.update({sizeToFit:!0}),w.view="pts"),it.gamefish&&it.gamefish.update();const e=w.match.metadata.players();it.gametree&&(it.gametree.options({labels:{Player:e[0].name,Opponent:e[1].name}}),it.gametree.update({sizeToFit:!0}))}function To(){jo(),Ec(),gt()}const Vt=Object.create(null);Vt.open="0";Vt.close="1";Vt.ping="2";Vt.pong="3";Vt.message="4";Vt.upgrade="5";Vt.noop="6";const Fn=Object.create(null);Object.keys(Vt).forEach(t=>{Fn[Vt[t]]=t});const _i={type:"error",data:"parser error"},Tc=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Mc=typeof ArrayBuffer=="function",Cc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,as=({type:t,data:e},n,r)=>Tc&&e instanceof Blob?n?r(e):Mo(e,r):Mc&&(e instanceof ArrayBuffer||Cc(e))?n?r(e):Mo(new Blob([e]),r):r(Vt[t]+(e||"")),Mo=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Co(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Wr;function Pm(t,e){if(Tc&&t.data instanceof Blob)return t.data.arrayBuffer().then(Co).then(e);if(Mc&&(t.data instanceof ArrayBuffer||Cc(t.data)))return e(Co(t.data));as(t,!1,n=>{Wr||(Wr=new TextEncoder),e(Wr.encode(n))})}const Oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Oo.length;t++)tn[Oo.charCodeAt(t)]=t;const Im=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=tn[t.charCodeAt(r)],o=tn[t.charCodeAt(r+1)],a=tn[t.charCodeAt(r+2)],l=tn[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Dm=typeof ArrayBuffer=="function",cs=(t,e)=>{if(typeof t!="string")return{type:"message",data:Oc(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Fm(t.substring(1),e)}:Fn[n]?t.length>1?{type:Fn[n],data:t.substring(1)}:{type:Fn[n]}:_i},Fm=(t,e)=>{if(Dm){const n=Im(t);return Oc(n,e)}else return{base64:!0,data:t}},Oc=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Nc="",Bm=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{as(s,!1,a=>{r[o]=a,++i===n&&e(r.join(Nc))})})},Um=(t,e)=>{const n=t.split(Nc),r=[];for(let i=0;i<n.length;i++){const s=cs(n[i],e);if(r.push(s),s.type==="error")break}return r};function Hm(){return new TransformStream({transform(t,e){Pm(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Yr;function Cn(t){return t.reduce((e,n)=>e+n.length,0)}function On(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function $m(t,e){Yr||(Yr=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Cn(n)<1)break;const l=On(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Cn(n)<2)break;const l=On(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Cn(n)<8)break;const l=On(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(_i);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Cn(n)<i)break;const l=On(n,i);a.enqueue(cs(s?l:Yr.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(_i);break}}}})}const Lc=4;function pt(t){if(t)return zm(t)}function zm(t){for(var e in pt.prototype)t[e]=pt.prototype[e];return t}pt.prototype.on=pt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};pt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};pt.prototype.off=pt.prototype.removeListener=pt.prototype.removeAllListeners=pt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};pt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};pt.prototype.emitReserved=pt.prototype.emit;pt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};pt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Rt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Rc(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Gm=Rt.setTimeout,qm=Rt.clearTimeout;function Er(t,e){e.useNativeTimers?(t.setTimeoutFn=Gm.bind(Rt),t.clearTimeoutFn=qm.bind(Rt)):(t.setTimeoutFn=Rt.setTimeout.bind(Rt),t.clearTimeoutFn=Rt.clearTimeout.bind(Rt))}const Wm=1.33;function Ym(t){return typeof t=="string"?Vm(t):Math.ceil((t.byteLength||t.size)*Wm)}function Vm(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Xm(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Km(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Jm extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ls extends pt{constructor(e){super(),this.writable=!1,Er(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new Jm(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=cs(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Xm(e);return n.length?"?"+n:""}}const Pc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vi=64,jm={};let No=0,Nn=0,Lo;function Ro(t){let e="";do e=Pc[t%vi]+e,t=Math.floor(t/vi);while(t>0);return e}function Ic(){const t=Ro(+new Date);return t!==Lo?(No=0,Lo=t):t+"."+Ro(No++)}for(;Nn<vi;Nn++)jm[Pc[Nn]]=Nn;let Dc=!1;try{Dc=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Zm=Dc;function Fc(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Zm))return new XMLHttpRequest}catch{}if(!e)try{return new Rt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Qm(){}const t0=function(){return new Fc({xdomain:!1}).responseType!=null}();class e0 extends ls{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=t0&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Um(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Bm(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Ic()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new qt(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class qt extends pt{constructor(e,n){super(),Er(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Rc(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new Fc(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=qt.requestsCount++,qt.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Qm,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete qt.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}qt.requestsCount=0;qt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Po);else if(typeof addEventListener=="function"){const t="onpagehide"in Rt?"pagehide":"unload";addEventListener(t,Po,!1)}}function Po(){for(let t in qt.requests)qt.requests.hasOwnProperty(t)&&qt.requests[t].abort()}const us=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ln=Rt.WebSocket||Rt.MozWebSocket,Io=!0,n0="arraybuffer",Do=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class r0 extends ls{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Do?{}:Rc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Io&&!Do?n?new Ln(e,n):new Ln(e):new Ln(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;as(r,this.supportsBinary,s=>{const o={};try{Io&&this.ws.send(s)}catch{}i&&us(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Ic()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Ln}}class i0 extends ls{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=$m(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Hm();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&us(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const s0={websocket:r0,webtransport:i0,polling:e0},o0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function bi(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=o0.exec(t||""),s={},o=14;for(;o--;)s[a0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=c0(s,s.path),s.queryKey=l0(s,s.query),s}function c0(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function l0(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let Bc=class ve extends pt{constructor(e,n={}){super(),this.binaryType=n0,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=bi(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=bi(n.host).host),Er(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Km(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Lc,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new s0[e](r)}open(){let e;if(this.opts.rememberUpgrade&&ve.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;ve.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ve.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",ve.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Ym(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){ve.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Bc.protocol=Lc;function u0(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=bi(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const f0=typeof ArrayBuffer=="function",h0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Uc=Object.prototype.toString,d0=typeof Blob=="function"||typeof Blob<"u"&&Uc.call(Blob)==="[object BlobConstructor]",p0=typeof File=="function"||typeof File<"u"&&Uc.call(File)==="[object FileConstructor]";function fs(t){return f0&&(t instanceof ArrayBuffer||h0(t))||d0&&t instanceof Blob||p0&&t instanceof File}function Bn(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Bn(t[n]))return!0;return!1}if(fs(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Bn(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Bn(t[n]))return!0;return!1}function m0(t){const e=[],n=t.data,r=t;return r.data=wi(n,e),r.attachments=e.length,{packet:r,buffers:e}}function wi(t,e){if(!t)return t;if(fs(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=wi(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=wi(t[r],e));return n}return t}function g0(t,e){return t.data=xi(t.data,e),delete t.attachments,t}function xi(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=xi(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=xi(t[n],e));return t}const y0=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_0=5;var nt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(nt||(nt={}));class v0{constructor(e){this.replacer=e}encode(e){return(e.type===nt.EVENT||e.type===nt.ACK)&&Bn(e)?this.encodeAsBinary({type:e.type===nt.EVENT?nt.BINARY_EVENT:nt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===nt.BINARY_EVENT||e.type===nt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=m0(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Fo(t){return Object.prototype.toString.call(t)==="[object Object]"}class hs extends pt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===nt.BINARY_EVENT;r||n.type===nt.BINARY_ACK?(n.type=r?nt.EVENT:nt.ACK,this.reconstructor=new b0(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(fs(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(nt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===nt.BINARY_EVENT||r.type===nt.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(hs.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case nt.CONNECT:return Fo(n);case nt.DISCONNECT:return n===void 0;case nt.CONNECT_ERROR:return typeof n=="string"||Fo(n);case nt.EVENT:case nt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&y0.indexOf(n[0])===-1);case nt.ACK:case nt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class b0{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=g0(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const w0=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hs,Encoder:v0,get PacketType(){return nt},protocol:_0},Symbol.toStringTag,{value:"Module"}));function It(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const x0=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Hc extends pt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[It(e,"open",this.onopen.bind(this)),It(e,"packet",this.onpacket.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(x0.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:nt.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...o])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((o,a)=>r?o?s(o):i(a):i(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:nt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case nt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case nt.EVENT:case nt.BINARY_EVENT:this.onevent(e);break;case nt.ACK:case nt.BINARY_ACK:this.onack(e);break;case nt.DISCONNECT:this.ondisconnect();break;case nt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:nt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:nt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function De(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}De.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};De.prototype.reset=function(){this.attempts=0};De.prototype.setMin=function(t){this.ms=t};De.prototype.setMax=function(t){this.max=t};De.prototype.setJitter=function(t){this.jitter=t};class ki extends pt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Er(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new De({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||w0;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Bc(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=It(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=It(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(It(e,"ping",this.onping.bind(this)),It(e,"data",this.ondata.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this)),It(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){us(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Hc(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ve={};function Un(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=u0(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ve[i]&&s in Ve[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new ki(r,e):(Ve[i]||(Ve[i]=new ki(r,e)),l=Ve[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Un,{Manager:ki,Socket:Hc,io:Un,connect:Un});function k0(){let t,e,n=50,r=1e3;const i="black";let s=5,o=10,a=150,l=["white","blue"];const c={top:0,right:0,bottom:0,left:0};function u(f){const h=f.node().getBoundingClientRect();if((!e||!t)&&(n=Math.min(t||h.width,h.width,e||h.height,h.height)*.45,o=n/3),t=t||h.width,e=e||h.height,!e||!t)return;const d=jt().domain([100,0]).range(l).interpolate(Uf),p=function(k){return d(Math.abs(k%20-10))},m=Ud().domain(Ft(s)).range([0,e]);f.append("svg").attr("width",t).attr("height",e).append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(m.domain()).enter().append("circle").attr("fill","#000").attr("stroke",i).attr("stroke-width",o+"px").attr("r",0).attr("cx",t/2).attr("cy",e/2).style("fill",p).on("click",qc).transition().duration(r).delay(k=>k*a).on("start",function k(x,O,L){Gh(L[O]).attr("r",n).attr("stroke-width","0px").transition().attr("r",0).attr("stroke-width",o+"px").transition().on("start",k)})}return u.height=f=>f?(e=f,u):e,u.width=f=>f?(t=f,u):t,u.duration=f=>f?(r=f,u):r,u.pulse_circles=f=>f?(s=f,u):s,u.radius=f=>f?(n=f,u):n,u.delay_multiplier=f=>f?(a=f,u):a,u.stroke_width=f=>f?(o=f,u):o,u.color_range=f=>f?(l=f,u):l,u}const mt={socket:void 0,connectionOptions:{"force new connection":!0,reconnectionDelay:1e3,reconnectionAttempts:"Infinity",timeout:2e4}};function ds(){if((navigator.onLine||window.location.hostname=="localhost")&&!mt.socket){const t=window.location.hostname.startsWith("localhost")||window.location.hostname==="127.0.0.1"?"http://localhost:8888":"https://courthive.com";console.log(t,window.location.hostname);const e=`${t}/match`;mt.socket=Un(e,mt.connectionOptions),mt.socket&&(mt.socket.on("connect",A0),mt.socket.on("disconnect",S0),mt.socket.on("connect_error",E0),mt.socket.on("history request",T0),mt.socket.on("tmx error",M0),mt.socket.on("tmx directive",O0),mt.socket.on("tmx message",C0))}}function A0(){}function S0(){}function E0(){}function T0(){const t=w.match.metadata.defineMatch().muid,e=w.match.history.points(),n={muid:t,point_history:e};t&&e.length&&mt.socket.emit("point history",n)}function M0(t){const e=`<h2>${t.error}</h2>`;Ut(e)}function C0(t){if(!t||!t.muid)return Ut("<h2>Invalid Key</h2>");const e=al(t.data);Re(),Ri(e.match.muid),w.match.metadata.defineTournament({name:e.tournament.name,tuid:e.tournament.tuid,start_date:cl(e.tournament.start)}),w.match.metadata.defineMatch({euid:e.event.euid});const n=e.teams&&e.teams[0].length===2?"doubles":"singles",r=sl({sides:e.teams,format:n});w.match.metadata.definePlayer({index:0,name:r[0]}),w.match.metadata.definePlayer({index:1,name:r[1]});const i=e.event.surface;if(i){const o={C:"clay",H:"hard",G:"grass"};o[i]&&w.match.metadata.defineTournament({surface:o[i]})}const s=e.event.inout;if(s){const o={o:"out",i:"in"};o[s]&&w.match.metadata.defineTournament({in_out:o[s]})}dr(),Zt(),gt("entry")}function O0(t){console.log("tmx directive",t)}function $c(){return kt.broadcast&&mt.socket?!0:(kt.broadcast&&ds(),!1)}function zc(){ds();const t=k0().color_range(["white","white"]).height(60).width(60).radius(28).stroke_width(5);at("#startpulse").style("display","none"),at("#pulse").style("display","block").call(t)}function N0(){kt.broadcast=!1,at("#startpulse").style("display","flex"),at("#pulse").style("display","none").selectAll("svg").remove()}function Gc(t){Object.assign(t,{timestamp:new Date().getTime(),uuuid:kt.user_uuid}),mt.socket.emit("tmx",t)}function qc(){kt.broadcast=!kt.broadcast,kt.broadcast&&mt.socket?zc():N0(),navigator.onLine||Ut(" <p> <h1>No Internet Connection!</h1>"),Mi()}function Bo(t){if($c()){const n={muid:w.match.metadata.defineMatch().muid,status:t},r=w.match.metadata.defineTournament();n.tuid=r.tuid||r.name,mt.socket.emit("match status",n)}}let Wc;const dt={elapsed:1e5,held:void 0,touched:void 0,holdTime:800,holdAction:void 0,holdActions:{}},hn={};let Tt={};const L0=(t,e)=>t.filter(n=>e.indexOf(n)!==-1).filter((n,r,i)=>i.indexOf(n)===r);dt.reset=()=>(Tt={},dt);dt.register=(t,e,n,r)=>(typeof n=="function"&&(Tt[e]||(Tt[e]={},hn[e]=[]),Tt[e][t]={fx:n,delay:r},hn[e]=Object.keys(Tt[e])),dt);dt.deRegister=(t,e)=>(Tt[e]&&(delete Tt[e][t],hn[e]=Object.keys(Tt[e])),dt);dt.call=(t,e,...n)=>{var r,i;return(i=(r=Tt==null?void 0:Tt[e])==null?void 0:r[t])==null?void 0:i.fx(...n)};dt.trigger=(t,e,n,r)=>Tt[e][t].fx(n,r,e);dt.list=()=>console.log(Tt);const R0="ontouchstart"in document.documentElement?"touchstart":"click";document.addEventListener(R0,t=>Fe({evt:t,evnt:"tap"}));document.addEventListener("change",t=>Fe({evt:t,evnt:"change"}));document.addEventListener("click",t=>Fe({evt:t,evnt:"click"}));document.addEventListener("mouseover",t=>Fe({evt:t,evnt:"mouseover",stopPropagation:!1}));document.addEventListener("mouseout",t=>Fe({evt:t,evnt:"mouseout",stopPropagation:!1}));document.addEventListener("keyup",t=>Fe({evt:t,evnt:"keyup",stopPropagation:!1}));let Uo=0;function Fe({evt:t,evnt:e,stopPropagation:n=!0}){n&&t.stopPropagation();const r={x:t.clientX,y:t.clientY,pageX:t.pageX,pageY:t.pageY},i=Array.from(t.target.classList),s=i.length&&hn[e]?L0(i,hn[e]):[];if(s.length){const o=new Date().getTime();dt.elapsed=o-Uo,Uo=o,s.forEach(a=>{P0({cls:a,evt:t,evnt:e,mouse:r})})}}function P0({cls:t,evt:e,evnt:n,mouse:r}){const i=e.target;Tt[n][t].fx(i,r,n,e)}document.addEventListener("touchstart",t=>{dt.touched=t.target,dt.coords=[t.touches[0].clientX,t.touches[0].clientY],dt.touched&&(Wc=setTimeout(function(){I0()},dt.holdTime))},!1);document.addEventListener("touchend",function(){Yc()},!1);document.addEventListener("touchmove",function(t){dt.touched!==t.target&&Yc()},!1);function Yc(){clearTimeout(Wc)}function I0(){typeof dt.holdAction=="function"&&(dt.held=dt.touched,dt.holdAction(dt.held,dt.coords))}let ar=!1,Ho,rn="";function D0(){clearTimeout(Ho),ar=!0,rn!=="can-touch"&&(rn="can-touch",document.documentElement.classList.add(rn)),Ho=setTimeout(function(){ar=!1},500)}function F0(){!ar&&rn==="can-touch"&&(ar=!1,rn="",document.documentElement.classList.remove("can-touch"))}document.addEventListener("touchstart",D0,!1);document.addEventListener("mouseover",F0,!1);const B0=dt;function _n(t){t=t||w.match.history.lastPoint();const e=w.match.metadata.players();if(e[0].name!=zn[0]&&e[1].name!=zn[1]&&$c()){const r=Ti.geoposition.coords||{},i=w.match.metadata.defineTournament(),s=w.match.metadata.defineMatch(),o={tournament:i,match:w.match.metadata.defineMatch(),event:{euid:s.euid},status:w.match.status,players:w.match.metadata.players(),score:w.match.score(),point:t.point,serving:w.match.nextTeamServing(),complete:w.match.complete(),winner:w.match.winner(),geoposition:{latitude:r.latitude,longitude:r.longitude},undo:typeof t=="string"&&t=="Undo"};U0(o)}}let Vr,Xr,Rn=0;const $o=1e4;function U0(t){const e=Date.now();if(Vr=t,e-Rn>$o)mt.socket.emit("match score",Vr),Rn=e;else{Xr&&clearTimeout(Xr);const n=$o-(e-Rn);Xr=setTimeout(function(){mt.socket.emit("match score",Vr),Rn=e},n)}}function Ai(t){if(w.match.complete()){const e=w.match.metadata.players()[w.match.winner()].name;return Ut(`<div style="height: 50vh" class="flexcols flexcenter"><div>Match Complete!</div><div>Winner: ${e}</div></div>`),!0}else t!=null&&t.game.complete&&Bt.display_gamefish&&os()}function H0(t){const e=t.getAttribute("hand"),n=t.getAttribute("stroke");if(e&&n){const s=w.match.history.lastPoint();w.match.decoratePoint(s,{hand:e,stroke:n}),Zt()}ss();const r=w.match.history.action("addPoint"),i=r[r.length-1];Ai(i),_n(i)}function $0(){w.match.metadata.definePlayer(z0()),Re()}function z0(){const t={index:w.edit_player};["hand","entry","seed","draw_position","ioc"].forEach(r=>{const i=`player_${r}`,s=document.getElementById(i);if(s.selectedIndex>=0){const o=s.options[s.selectedIndex].value;o&&(t[r]=o)}});const n=document.getElementById("player_rank");return n.value&&(t.rank=n.value),t}function G0(t){const n=Hn(t,"mf_format").getAttribute("newFormat");w.match.format.type(n);const r=w.match.format.settings().name;document.getElementById("md_format").innerHTML=r,hr(),Re(),gt("entry")}const Kr="Double Fault",Jr={};function q0(t){const e=t.getAttribute("action");let n=parseInt(t.getAttribute("side")??0);const r=t.getAttribute("service"),i=t.getAttribute("role");if(Ai())return;const s=n?"right":"left";w.swap_sides&&["server","receiver"].indexOf(i)<0&&(n=1-n),Ni();function o(d,p){Array.from(document.querySelectorAll(d)).forEach(_=>_.innerHTML=p)}function a(){w.rally_mode=!0,Array.from(document.querySelectorAll(".modeforce")).forEach(d=>d.style.display="flex"),o(".vs_action_button.winner","Winner"),o(".vs_action_button.fault","UFE"),o(".vs_action_button.forced","Forced"),Array.from(document.querySelectorAll(".vs_mode_button")).forEach(d=>{["Serve","Return","2nd Serve"].indexOf(d.innerHTML)>=0&&(d.innerHTML="Base Line")})}const l={firstServe(){w.serve2nd=!1},secondServe(){w.serve2nd=!Jr.serve2nd,Jr.serve2nd=!Jr.serve2nd},fault(d){if(d!=w.serving)return;if(w.serve2nd)return{code:"D"};const p=w.swap_sides?1-d:d;o(`.fault.display_${p}_serving`,Kr),o(`.fault.modeerr_player${p}`,Kr);const _=`.modeaction_player${w.swap_sides?1-w.serving:w.serving}`;Array.from(document.querySelectorAll(_)).forEach(A=>A.innerHTML="2nd Serve"),w.serve2nd=!0,Bo("Service Fault")},doubleFault(d){return d!=w.serving?void 0:{code:"d"}},ace(d){return d!=w.serving?void 0:w.serve2nd?{code:"a"}:{code:"A"}},winner(d){return{winner:d,result:"Winner"}},unforced(d){return{winner:1-d,result:"Unforced Error"}},forced(d){return{winner:1-d,result:"Forced Error"}},point(d){return{winner:d}},penalty(d){return console.log("penalty"),{winner:1-d,result:"Penalty",code:d==w.serving?"P":"Q"}},modewin(d,p){const m=t.innerHTML;if(m=="Ace")return l.ace(d,p);if(m=="Winner")return l.winner(d,p)},modeerr(d,p){const m=t.innerHTML;if(m=="Fault"||m==Kr)return l.fault(d,p);if(m=="UFE")return l.unforced(d,p);if(m=="Forced")return l.forced(d,p);if(m=="Let")return l.let(d,p)},modeaction(){const d=t.innerHTML;["Serve","2nd Serve","Return"].indexOf(d)>=0&&a(),(d=="Serve"||d=="Return")&&a(),d=="Net"&&(t.innerHTML="Base Line"),d=="Base Line"&&(t.innerHTML="Net")},rally(){const d=t.innerHTML;w.rally=parseInt((d.match(/\d+/g)||["0"]).join("")),w.rally+=1,o(".rally",`Rally: ${w.rally}`),w.rally==1&&a()},let(){Bo("Service: Let"),w.lets+=1}},c=document.getElementById("click");if(c&&Bt.audible_clicks&&c.play(),t.id&&W0(t.id),r&&r=="second_service"&&(w.serve2nd=!0),Object.keys(l).indexOf(e)<0)return;const u=["server","receiver"].indexOf(i);u>=0&&(n=u?w.receiving:w.serving);const f=w.serve2nd?{first_serve:{error:"Error",serves:["0e"]}}:{},h=l[e](n,f);if(h){Y0(),Object.assign(f,h),w.rally&&(f.rally=new Array(w.rally));const d=V0(f);d&&(f.location=d);const p=w.match.addPoint(f);Bt.track_shot_types&&p.result&&p.point.result&&["Penalty","Ace","Double Fault"].indexOf(p.point.result)<0?ss(s):(Ai(p),_n(p)),w.rally=0,w.lets=0,w.undone=[],Oi()}pr()}function W0(t){const e=document.getElementById(t);e&&(Et[t].type=="flash"?(e.style.backgroundColor=Et[t].color,e.style.color="white",setTimeout(()=>Ni(),300)):Et[t].type=="toggle"&&(e.style.backgroundColor=="white"?(w.serve2nd=t=="second_serve",e.style.backgroundColor=Et[t].color,e.style.color="white"):(w.serve2nd=!1,e.style.backgroundColor="white",e.style.color=Et[t].color),Object.keys(Et).filter(r=>Et[r].type=="toggle").filter(r=>r!=t).forEach(r=>ea(r))))}function Y0(){if(w.match.history.points().length==0){const e=new Date;w.match.metadata.defineMatch({date:e.valueOf()})}}function V0(t){const e=document.querySelectorAll(".modeaction_player0"),n=document.querySelectorAll(".modeaction_player1");if(e&&e[0].innerHTML=="Net"||n&&n[0].innerHTML=="Net"){if(t.result=="Unforced Error"||t.result=="Forced Error"){if(t.winner==0&&n[0].innerHTML=="Net"||t.winner==1&&e[0].innerHTML=="Net")return"Net"}else if(t.result=="Winner"&&(t.winner==0&&e[0].innerHTML=="Net"||t.winner==1&&n[0].innerHTML=="Net"))return"Net"}}function X0(t){const e=t.getAttribute("matchId"),n=rt.get(e);n&&(K0(n,`match_${e}.json`),Pe())}function K0(t,e){e=e||"match.json";const n=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",window.URL!=null&&(r.href=window.URL.createObjectURL(n),r.click())}const J0="/assets/emailblack-vRUY2-4u.png";function j0(){_n();const t=rt.get("current_match"),e=t&&rt.get(t);if(e){const n=JSON.parse(e);let r=n.match.muid;r||(r=yr(),n.match.muid=r,w.match.metadata.defineMatch({muid:r}),rt.set(t,JSON.stringify(n))),Z0(n)}else Ut(" <p> <h1>First Track a Match!</h1> </p> ")}function Z0(t){if(!mt.socket){Ut(" <p> <h1>Unable to share match...</h1> <p><i>Connection Error</i></p> </p> ");return}const n=`${kt.broadcast?`CourtHive Live Score: ${location.origin}/scores?muid=${t.muid}`:""}%0D%0A `,s=`
      <p>&nbsp;</p>
      <h1>Options for Sharing</h1>
      <div class='flexrows'> 
        ${kt.broadcast?`
    <div class='closeModal flexcenter iconmargin'>
      <a href='mailto:?subject=CourtHive Match Link&body=${n}' class="notextdecoration">
          <img class="icon_large" src='${J0}'>
      </a> 
    </div>
  `:""}
        ${t?`
    <div class='flexcenter iconmargin'>
      <button id='copy2clipboard' class="flexcenter c2c" data-clipboard-text=""> 
          <div class='export_action action_icon_large iconclipboard'></div> 
      </button>
    </div>
  `:""}
      </div>`;Ut(s,JSON.stringify(t))}function Q0(t){w.edit_point_index=t;const e=w.match.history.action("addPoint");w.edit_point=e[t].point,w.edit_point_result=w.edit_point.result;let n=w.edit_point.server?w.edit_point.score.split("-").reverse().join("-"):w.edit_point.score;n=="0-0"&&(n="Gamepoint");const r=document.getElementById("ep_sgp");r&&(r.innerHTML=`Set: ${w.edit_point.set+1}, Game: ${w.edit_point.game+1}, Point: ${n}`);const i=w.match.metadata.players();Array.from(document.querySelectorAll(".select_player")).forEach(c=>i.forEach((u,f)=>c.options[f]=new Option(u.name,f.toString())));const o=document.getElementById("point_winner"),a=document.getElementById("point_loser");o&&(o.value=w.edit_point.winner),a&&(a.value=w.edit_point.result||""),tg(),eg();const l=document.getElementById("editpoint");l&&(l.style.display="flex")}function tg(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=document.getElementById("point_winner"),r=t==null?void 0:t.value,i=e==null?void 0:e.value,s=n==null?void 0:n.value;i.indexOf("Winner")<0&&i.indexOf("Ace")<0&&r==s&&(t.value=1-s),(i.indexOf("Winner")>=0||i.indexOf("Ace")>=0)&&r!=s&&(t.value=s)}function eg(){const t=document.getElementById("point_player"),e=document.getElementById("point_result"),n=t==null?void 0:t.value;w.edit_point_result=e.value,e.innerHTML="",e.options[0]=new Option("- select -","");let r=[];n==w.edit_point.server&&(r=["Ace","Double Fault"].concat(...r)),r=["Winner","Unforced Error","Forced Error"].concat(...r),r.forEach((i,s)=>e.options[s+1]=new Option(i,i)),e.value=w.edit_point_result}function ng(){const t=document.getElementById("point_result"),n=document.getElementById("point_winner").value,r=t.value;w.edit_point.winner=n,w.edit_point.result=r,w.edit_point.code=void 0,Zt();const i=rt.get("current_match");if(i){Li(i,"pointhistory");const s=document.getElementById("editpoint");s&&(s.style.display="none")}}function rg(t){const e=parseInt(t.getAttribute("playerIndex")??0);w.edit_player=w.swap_sides?1-e:e,Pe();const n=document.getElementById("editplayer");n&&(n.style.display="flex");const r=w.match.metadata.players(w.edit_player),i=document.getElementById("playername");i&&(i.value=r.name),["hand","entry","seed","draw_position","ioc"].forEach(a=>{const l=`player_${a}`,c=document.getElementById(l);c&&(c.value=r[a]||"")});const o=document.getElementById("player_rank");o&&(o.value=r.rank||"")}const ig="/assets/points-zyGL2AXB.jpg";function Vc(t){const e=`
         <div class="helpintro">Quick Start</div>
         <div class="flexhelp"> <div class='iconmenub action_icon_large'></div> <div class="quicktitle">Main Menu</div> </div>
         <div class="quickitem"> <span> Set <b>Match Details</b>, <b>Share</b>, or turn on <b>Broadcasting</b> </span></div>
         <div class="flexhelp"> <div class='iconsettingsb action_icon_large'></div> <div class="quicktitle">Settings</div> </div>
         <div class="quickitem"> <span> Turn on <b>Audible Clicks</b> and <b>Track Shot Types</b></span></div>
         <div class="flexhelp"> <div class='iconchangeb action_icon_large'></div> <div class="quicktitle">Change First Server</div> </div>
         <div class="quickitem"> <span>After Service press <b>Serve</b>, <b>Return</b>, or <b>Rally</b> to switch into Rally Mode </span></div>
         <div class="quickitem"> <span>To simply advance points, tap the <b>Points</b> display </span></div>
         <div class="flexhelp"> <img src='${ig}'> </div>
      `,n=`
         <div class="helpintro">Save To Home Screen</div>
         <div class="helpitem">CourtHive is a Progressive Web App</div>
         <div class="helpitem"><b>For Full Screen View:</b></div>
         <div class="helpitem">On iOS use Safari to Save</div>
         <div class="helpitem">On Android use Chrome</div>
      `,r=`
         <div class="helpintro">How to</div>
         <div class="helpitem"><div><b>Add/Change Player Names</b>:</div> &nbsp; <div> Touch the name!</div></div>
         <div class="helpitem"><div><b>Edit a Point</b>:</div><div> &nbsp; Touch the point in History view</div></div>
         <div class="helpitem"><div><b>Delete Match</b>:</div><div> &nbsp; Swipe Left in Match Archive </div></div>
         <div class="helpitem"><div><b>Export Match</b>:</div><div> &nbsp; Swipe Right in Match Archive </div></div>
         <div class="helpitem"><div><b>Points-to-Set</b>:</div><div> &nbsp; Rotate Momentum Chart</div></div>
         <div class="helpitem"><div><b>GameTree</b>:</div><div> &nbsp; Tap Player to filter by server</div></div>
         <div class="flexhelp"> <div class='iconbroadcast icon icon_5'></div> <div class="quicktitle">Enable Broadcast</div> </div>
         <div class="flexhelp"> <div class='iconshare icon icon_3'></div> <div class="quicktitle">Share (Email, Copy/Paste)</div> </div>
      `,i=t?e+n+r:r+n+e;Ut(i)}function sg(){const t=`
         <p>&nbsp;</b>
         <h2>CourtHive</h2>
         <p>version <a id="version" target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">${Jo}</a></p>
         <p>An 
            <a target="_blank" href="https://github.com/TennisVisuals/universal-match-object/tree/master/examples/CourtHive">Open Source</a> project developed by 
            <a target="_blank" href="http://TennisVisuals.com">TennisVisuals</a>
         </p>
         <p><a href="mailto:tennis.aip@gmail.com?subject=CourtHive">Feedback Welcome!</a></p>
         <h2>Help</h2>
         <div class="helpitem">Difficulties after an app update?</div>
         <div class="flexcenter">
            <div class='flexcenter reset' onclick="appReset()">Reset</div>
         </div>
         <p>&nbsp;</b>
      `;Ut(t)}function og(t){Ut(`
    <h2>Enter key:</h2>
    <input id='key' class='key_input'>
    <button id='submit_key' class='btn btn-small submit-btn'>Submit</button>
  `);const n=document.getElementById("key");n&&t&&(n.value=t);const r=document.getElementById("key");r&&r.addEventListener("keyup",o);const i=document.getElementById("submit_key");i&&i.addEventListener("click",s);function s(){n.value&&Gc({key:n.value}),Pe()}function o(a){a.which==13&&s()}}function ag(t){const e=parseInt(t.getAttribute("gameIndex")??0);os(e)}function cg(t){console.log("vep");const e=Hn(t,"ph_episode"),n=parseInt((e==null?void 0:e.getAttribute("pointIndex"))??0);Q0(n)}function lg(){gt("stats")}function ug(){gt("matchformat")}function fg(){gt("gametree")}function hg(){gt("momentum")}function dg(){gt("pointhistory")}function pg(){gt("settings")}function mg(){gt("matcharchive")}function gg(){gt("entry")}function yg(){gt("mainmenu")}function _g(){if(w.serve2nd||w.rally_mode)w.serve2nd=!1,w.rally_mode=!1,w.rally=0,w.lets=0,mr();else{const t=w.match.undo();_n("Undo"),t&&w.undone.push(t),Re(!0)}pr()}function vg(){if(!w.undone.length)return;const t=w.match.addPoint(w.undone.pop());_n(t)}function bg(){console.log("changeServer"),w.match.history.points().length||(w.match.set.firstService(1-w.serving),Oi(),gt("entry"))}function wg(){console.log("swapAction"),on.user_swap=!on.user_swap,Zo(),gr()}function xg(){B0.register("modalInfo","tap",sg).register("broadcastToggle","tap",qc).register("modalShare","tap",j0).register("enterKey","tap",og).register("changeFormat","tap",G0).register("closeModal","tap",Pe).register("newMatch","tap",Pi).register("exportMatch","tap",X0).register("settings","tap",pg).register("outcomeEntry","tap",gg).register("matchArchive","tap",mg).register("mainMenu","tap",yg).register("modalHelp","tap",Vc).register("updateAppState","tap",Mi).register("closeGameFish","tap",Rm).register("strokeAction","tap",H0).register("swapAction","tap",wg).register("undoAction","tap",_g).register("redoAction","tap",vg).register("changeServer","tap",bg).register("updatePoint","tap",ng).register("editPlayer","tap",rg).register("updatePlayer","tap",$0).register("viewGameFish","tap",ag).register("viewStats","tap",lg).register("viewGameTree","tap",fg).register("viewMomentum","tap",hg).register("viewEditPoint","tap",cg).register("viewMatchFormat","tap",ug).register("viewPointHistory","tap",dg).register("editMatchDetails","tap",bl).register("classAction","tap",q0)}var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ag(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xc={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */(function(t,e){(function(r,i){t.exports=i()})(kg,function(){return function(){var n={686:function(s,o,a){a.d(o,{default:function(){return C}});var l=a(279),c=a.n(l),u=a(370),f=a.n(u),h=a(817),d=a.n(h);function p(M){try{return document.execCommand(M)}catch{return!1}}var m=function(T){var N=d()(T);return p("cut"),N},_=m;function A(M){var T=document.documentElement.getAttribute("dir")==="rtl",N=document.createElement("textarea");N.style.fontSize="12pt",N.style.border="0",N.style.padding="0",N.style.margin="0",N.style.position="absolute",N.style[T?"right":"left"]="-9999px";var $=window.pageYOffset||document.documentElement.scrollTop;return N.style.top="".concat($,"px"),N.setAttribute("readonly",""),N.value=M,N}var k=function(T,N){var $=A(T);N.container.appendChild($);var W=d()($);return p("copy"),$.remove(),W},x=function(T){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},$="";return typeof T=="string"?$=k(T,N):T instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(T==null?void 0:T.type)?$=k(T.value,N):($=d()(T),p("copy")),$},O=x;function L(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(N){return typeof N}:L=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},L(M)}var v=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=T.action,$=N===void 0?"copy":N,W=T.container,E=T.target,F=T.text;if($!=="copy"&&$!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(E!==void 0)if(E&&L(E)==="object"&&E.nodeType===1){if($==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if($==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(F)return O(F,{container:W});if(E)return $==="cut"?_(E):O(E,{container:W})},y=v;function g(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(N){return typeof N}:g=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},g(M)}function P(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")}function G(M,T){for(var N=0;N<T.length;N++){var $=T[N];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(M,$.key,$)}}function V(M,T,N){return T&&G(M.prototype,T),N&&G(M,N),M}function Z(M,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(T&&T.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),T&&Y(M,T)}function Y(M,T){return Y=Object.setPrototypeOf||function($,W){return $.__proto__=W,$},Y(M,T)}function H(M){var T=j();return function(){var $=J(M),W;if(T){var E=J(this).constructor;W=Reflect.construct($,arguments,E)}else W=$.apply(this,arguments);return X(this,W)}}function X(M,T){return T&&(g(T)==="object"||typeof T=="function")?T:U(M)}function U(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function J(M){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},J(M)}function I(M,T){var N="data-clipboard-".concat(M);if(T.hasAttribute(N))return T.getAttribute(N)}var S=function(M){Z(N,M);var T=H(N);function N($,W){var E;return P(this,N),E=T.call(this),E.resolveOptions(W),E.listenClick($),E}return V(N,[{key:"resolveOptions",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof W.action=="function"?W.action:this.defaultAction,this.target=typeof W.target=="function"?W.target:this.defaultTarget,this.text=typeof W.text=="function"?W.text:this.defaultText,this.container=g(W.container)==="object"?W.container:document.body}},{key:"listenClick",value:function(W){var E=this;this.listener=f()(W,"click",function(F){return E.onClick(F)})}},{key:"onClick",value:function(W){var E=W.delegateTarget||W.currentTarget,F=this.action(E)||"copy",B=y({action:F,container:this.container,target:this.target(E),text:this.text(E)});this.emit(B?"success":"error",{action:F,text:B,trigger:E,clearSelection:function(){E&&E.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(W){return I("action",W)}},{key:"defaultTarget",value:function(W){var E=I("target",W);if(E)return document.querySelector(E)}},{key:"defaultText",value:function(W){return I("text",W)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return O(W,E)}},{key:"cut",value:function(W){return _(W)}},{key:"isSupported",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],E=typeof W=="string"?[W]:W,F=!!document.queryCommandSupported;return E.forEach(function(B){F=F&&!!document.queryCommandSupported(B)}),F}}]),N}(c()),C=S},828:function(s){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==o;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}s.exports=l},438:function(s,o,a){var l=a(828);function c(h,d,p,m,_){var A=f.apply(this,arguments);return h.addEventListener(p,A,_),{destroy:function(){h.removeEventListener(p,A,_)}}}function u(h,d,p,m,_){return typeof h.addEventListener=="function"?c.apply(null,arguments):typeof p=="function"?c.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function(A){return c(A,d,p,m,_)}))}function f(h,d,p,m){return function(_){_.delegateTarget=l(_.target,d),_.delegateTarget&&m.call(h,_)}}s.exports=u},879:function(s,o){o.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},o.nodeList=function(a){var l=Object.prototype.toString.call(a);return a!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in a&&(a.length===0||o.node(a[0]))},o.string=function(a){return typeof a=="string"||a instanceof String},o.fn=function(a){var l=Object.prototype.toString.call(a);return l==="[object Function]"}},370:function(s,o,a){var l=a(879),c=a(438);function u(p,m,_){if(!p&&!m&&!_)throw new Error("Missing required arguments");if(!l.string(m))throw new TypeError("Second argument must be a String");if(!l.fn(_))throw new TypeError("Third argument must be a Function");if(l.node(p))return f(p,m,_);if(l.nodeList(p))return h(p,m,_);if(l.string(p))return d(p,m,_);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(p,m,_){return p.addEventListener(m,_),{destroy:function(){p.removeEventListener(m,_)}}}function h(p,m,_){return Array.prototype.forEach.call(p,function(A){A.addEventListener(m,_)}),{destroy:function(){Array.prototype.forEach.call(p,function(A){A.removeEventListener(m,_)})}}}function d(p,m,_){return c(document.body,p,m,_)}s.exports=u},817:function(s){function o(a){var l;if(a.nodeName==="SELECT")a.focus(),l=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),l=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(a),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}s.exports=o},279:function(s){function o(){}o.prototype={on:function(a,l,c){var u=this.e||(this.e={});return(u[a]||(u[a]=[])).push({fn:l,ctx:c}),this},once:function(a,l,c){var u=this;function f(){u.off(a,f),l.apply(c,arguments)}return f._=l,this.on(a,f,c)},emit:function(a){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(a,l){var c=this.e||(this.e={}),u=c[a],f=[];if(u&&l)for(var h=0,d=u.length;h<d;h++)u[h].fn!==l&&u[h].fn._!==l&&f.push(u[h]);return f.length?c[a]=f:delete c[a],this}},s.exports=o,s.exports.TinyEmitter=o}},r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s](o,o.exports,i),o.exports}return function(){i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,{a:o}),o}}(),function(){i.d=function(s,o){for(var a in o)i.o(o,a)&&!i.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}}(),function(){i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)}}(),i(686)}().default})})(Xc);var Sg=Xc.exports;const Eg=Ag(Sg),Tg=[{ioc:"AFG",name:"Afghanistan"},{ioc:"ALB",name:"Albania"},{ioc:"ALG",name:"Algeria"},{ioc:"ASA",name:"American Samoa"},{ioc:"AND",name:"Andorra"},{ioc:"ANG",name:"Angola"},{ioc:"AIA",name:"Anguilla"},{ioc:"ANT",name:"Antigua & Barbuda"},{ioc:"ARG",name:"Argentina"},{ioc:"ARM",name:"Armenia"},{ioc:"ARU",name:"Aruba"},{ioc:"AUS",name:"Australia"},{ioc:"AUT",name:"Austria"},{ioc:"AZE",name:"Azerbaijan"},{ioc:"BAH",name:"Bahamas"},{ioc:"BRN",name:"Bahrain"},{ioc:"BAN",name:"Bangladesh"},{ioc:"BAR",name:"Barbados"},{ioc:"BLR",name:"Belarus"},{ioc:"BEL",name:"Belgium"},{ioc:"BIZ",name:"Belize"},{ioc:"BEN",name:"Benin"},{ioc:"BER",name:"Bermuda"},{ioc:"BHU",name:"Bhutan"},{ioc:"BOL",name:"Bolivia"},{ioc:"BIH",name:"Bosnia"},{ioc:"BOT",name:"Botswana"},{ioc:"BRA",name:"Brazil"},{ioc:"IVB",name:"British Virgin Islands"},{ioc:"BRU",name:"Brunei"},{ioc:"BUL",name:"Bulgaria"},{ioc:"BUR",name:"Burkina Faso"},{ioc:"BDI",name:"Burundi"},{ioc:"CAM",name:"Cambodia"},{ioc:"CMR",name:"Cameroon"},{ioc:"CAN",name:"Canada"},{ioc:"CPV",name:"Cape Verde"},{ioc:"AHO",name:"Caribbean Netherlands"},{ioc:"CAY",name:"Cayman Islands"},{ioc:"CAF",name:"Central African Republic"},{ioc:"CHA",name:"Chad"},{ioc:"CHI",name:"Chile"},{ioc:"CHN",name:"China"},{ioc:"COL",name:"Colombia"},{ioc:"COM",name:"Comoros"},{ioc:"CGO",name:"Congo - Brazzaville"},{ioc:"COD",name:"Congo - Kinshasa"},{ioc:"COK",name:"Cook Islands"},{ioc:"CRC",name:"Costa Rica"},{ioc:"CRO",name:"Croatia"},{ioc:"CUB",name:"Cuba"},{ioc:"CYP",name:"Cyprus"},{ioc:"CZE",name:"Czech Republic"},{ioc:"CIV",name:"Cte dIvoire"},{ioc:"DEN",name:"Denmark"},{ioc:"DJI",name:"Djibouti"},{ioc:"DMA",name:"Dominica"},{ioc:"DOM",name:"Dominican Republic"},{ioc:"ECU",name:"Ecuador"},{ioc:"EGY",name:"Egypt"},{ioc:"ESA",name:"El Salvador"},{ioc:"GEQ",name:"Equatorial Guinea"},{ioc:"ERI",name:"Eritrea"},{ioc:"EST",name:"Estonia"},{ioc:"ETH",name:"Ethiopia"},{ioc:"FLK",name:"Falkland Islands"},{ioc:"FAR",name:"Faroe Islands"},{ioc:"FIJ",name:"Fiji"},{ioc:"FIN",name:"Finland"},{ioc:"FRA",name:"France"},{ioc:"FGU",name:"French Guiana"},{ioc:"FPO",name:"French Polynesia"},{ioc:"GAB",name:"Gabon"},{ioc:"GAM",name:"Gambia"},{ioc:"GEO",name:"Georgia"},{ioc:"GER",name:"Germany"},{ioc:"GHA",name:"Ghana"},{ioc:"GIB",name:"Gibraltar"},{ioc:"GRE",name:"Greece"},{ioc:"GRL",name:"Greenland"},{ioc:"GRN",name:"Grenada"},{ioc:"GUD",name:"Guadeloupe"},{ioc:"GUM",name:"Guam"},{ioc:"GUA",name:"Guatemala"},{ioc:"GUI",name:"Guinea"},{ioc:"GBS",name:"Guinea-Bissau"},{ioc:"GUY",name:"Guyana"},{ioc:"HAI",name:"Haiti"},{ioc:"HON",name:"Honduras"},{ioc:"HKG",name:"Hong Kong"},{ioc:"HUN",name:"Hungary"},{ioc:"ISL",name:"Iceland"},{ioc:"IND",name:"India"},{ioc:"INA",name:"Indonesia"},{ioc:"IRI",name:"Iran"},{ioc:"IRQ",name:"Iraq"},{ioc:"IRL",name:"Ireland"},{ioc:"ISR",name:"Israel"},{ioc:"ITA",name:"Italy"},{ioc:"JAM",name:"Jamaica"},{ioc:"JPN",name:"Japan"},{ioc:"JOR",name:"Jordan"},{ioc:"KAZ",name:"Kazakhstan"},{ioc:"KEN",name:"Kenya"},{ioc:"KIR",name:"Kiribati"},{ioc:"KUW",name:"Kuwait"},{ioc:"KGZ",name:"Kyrgyzstan"},{ioc:"LAO",name:"Laos"},{ioc:"LAT",name:"Latvia"},{ioc:"LIB",name:"Lebanon"},{ioc:"LES",name:"Lesotho"},{ioc:"LBR",name:"Liberia"},{ioc:"LBA",name:"Libya"},{ioc:"LIE",name:"Liechtenstein"},{ioc:"LTU",name:"Lithuania"},{ioc:"LUX",name:"Luxembourg"},{ioc:"MAC",name:"Macau"},{ioc:"MKD",name:"Macedonia"},{ioc:"MAD",name:"Madagascar"},{ioc:"MAW",name:"Malawi"},{ioc:"MAS",name:"Malaysia"},{ioc:"MDV",name:"Maldives"},{ioc:"MLI",name:"Mali"},{ioc:"MLT",name:"Malta"},{ioc:"MSH",name:"Marshall Islands"},{ioc:"MRT",name:"Martinique"},{ioc:"MTN",name:"Mauritania"},{ioc:"MRI",name:"Mauritius"},{ioc:"MAY",name:"Mayotte"},{ioc:"MEX",name:"Mexico"},{ioc:"FSM",name:"Micronesia"},{ioc:"MDA",name:"Moldova"},{ioc:"MON",name:"Monaco"},{ioc:"MGL",name:"Mongolia"},{ioc:"MGO",name:"Montenegro"},{ioc:"MNT",name:"Montserrat"},{ioc:"MAR",name:"Morocco"},{ioc:"MOZ",name:"Mozambique"},{ioc:"MYA",name:"Myanmar"},{ioc:"NAM",name:"Namibia"},{ioc:"NRU",name:"Nauru"},{ioc:"NEP",name:"Nepal"},{ioc:"NED",name:"Netherlands"},{ioc:"NCD",name:"New Caledonia"},{ioc:"NZL",name:"New Zealand"},{ioc:"NCA",name:"Nicaragua"},{ioc:"NIG",name:"Niger"},{ioc:"NGR",name:"Nigeria"},{ioc:"NIU",name:"Niue"},{ioc:"NFI",name:"Norfolk Island"},{ioc:"PRK",name:"North Korea"},{ioc:"NMA",name:"Northern Mariana Islands"},{ioc:"NOR",name:"Norway"},{ioc:"OMA",name:"Oman"},{ioc:"PAK",name:"Pakistan"},{ioc:"PLW",name:"Palau"},{ioc:"PLE",name:"Palestine"},{ioc:"PAN",name:"Panama"},{ioc:"PNG",name:"Papua New Guinea"},{ioc:"PAR",name:"Paraguay"},{ioc:"PER",name:"Peru"},{ioc:"PHI",name:"Philippines"},{ioc:"POL",name:"Poland"},{ioc:"POR",name:"Portugal"},{ioc:"PUR",name:"Puerto Rico"},{ioc:"QAT",name:"Qatar"},{ioc:"ROU",name:"Romania"},{ioc:"RUS",name:"Russia"},{ioc:"RWA",name:"Rwanda"},{ioc:"REU",name:"Runion"},{ioc:"SAM",name:"Samoa"},{ioc:"SMR",name:"San Marino"},{ioc:"KSA",name:"Saudi Arabia"},{ioc:"SEN",name:"Senegal"},{ioc:"SRB",name:"Serbia"},{ioc:"SEY",name:"Seychelles"},{ioc:"SLE",name:"Sierra Leone"},{ioc:"SIN",name:"Singapore"},{ioc:"SVK",name:"Slovakia"},{ioc:"SLO",name:"Slovenia"},{ioc:"SOL",name:"Solomon Islands"},{ioc:"SOM",name:"Somalia"},{ioc:"RSA",name:"South Africa"},{ioc:"KOR",name:"South Korea"},{ioc:"ESP",name:"Spain"},{ioc:"SRI",name:"Sri Lanka"},{ioc:"HEL",name:"St. Helena"},{ioc:"SKN",name:"St. Kitts & Nevis"},{ioc:"LCA",name:"St. Lucia"},{ioc:"SPM",name:"St. Pierre & Miquelon"},{ioc:"VIN",name:"St. Vincent & Grenadines"},{ioc:"SUD",name:"Sudan"},{ioc:"SUR",name:"Suriname"},{ioc:"SWZ",name:"Swaziland"},{ioc:"SWE",name:"Sweden"},{ioc:"SUI",name:"Switzerland"},{ioc:"SYR",name:"Syria"},{ioc:"STP",name:"So Tom & Prncipe"},{ioc:"TPE",name:"Taiwan"},{ioc:"TJK",name:"Tajikistan"},{ioc:"TAN",name:"Tanzania"},{ioc:"THA",name:"Thailand"},{ioc:"TLS",name:"Timor-Leste"},{ioc:"TOG",name:"Togo"},{ioc:"TGA",name:"Tonga"},{ioc:"TTO",name:"Trinidad & Tobago"},{ioc:"TUN",name:"Tunisia"},{ioc:"TUR",name:"Turkey"},{ioc:"TKM",name:"Turkmenistan"},{ioc:"TKS",name:"Turks & Caicos Islands"},{ioc:"TUV",name:"Tuvalu"},{ioc:"ISV",name:"U.S. Virgin Islands"},{ioc:"GBR",name:"UK"},{ioc:"USA",name:"United States"},{ioc:"UGA",name:"Uganda"},{ioc:"UKR",name:"Ukraine"},{ioc:"UAE",name:"United Arab Emirates"},{ioc:"URU",name:"Uruguay"},{ioc:"UZB",name:"Uzbekistan"},{ioc:"VAN",name:"Vanuatu"},{ioc:"VEN",name:"Venezuela"},{ioc:"VIE",name:"Vietnam"},{ioc:"WAF",name:"Wallis & Futuna"},{ioc:"YEM",name:"Yemen"},{ioc:"ZAM",name:"Zambia"},{ioc:"ZIM",name:"Zimbabwe"}];function Mg(){window.dev={viewManager:gt,app:kt,env:w},window.addEventListener("orientationchange",function(){To()},!1),window.addEventListener("resize",function(){To()},!1);const t={},n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const l=n[a].split("=");if(typeof t[l[0]]>"u")t[l[0]]=l[1];else if(typeof t[l[0]]=="string"){const c=[t[l[0]],l[1]];t[l[0]]=c}else t[l[0]].push(l[1])}history.pushState("",document.title,window.location.pathname),Nt.disableDrag(),xg(),ft("none","welcome"),new Eg(".c2c").on("success",()=>{Pe()}),ul(),Cg(),ds(),kt.broadcast&&navigator.onLine&&zc(),Og(),ta(),Nt.addSwipeTarget(document.getElementById("mainmenu")),Array.from(document.querySelectorAll(".md_seed")).forEach(a=>{Ms(0,32).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_draw_position")).forEach(a=>{Ms(0,128).forEach(l=>{const c=(l+1).toString();a.options[l+1]=new Option(c,c)})}),Array.from(document.querySelectorAll(".md_ioc")).forEach(a=>{Tg.forEach((l,c)=>a.options[c+1]=new Option(l.name,l.ioc))}),dr(),jo(),Ng(),Nm(),Ec(),t.key&&setTimeout(()=>Gc({key:t.key}),1e3)}function Cg(){kt.user_uuid||(kt.user_uuid=yr(),Mi())}function Og(){const t=i=>{i.which==9&&i.preventDefault()},e=document.getElementById("playername");e&&(e.addEventListener("keyup",vl,!1),e.addEventListener("keydown",t,!1),e.onblur=function(){Qo()},e.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const n=document.getElementById("player_rank");n&&(n.onfocus=function(){setTimeout(()=>{this.setSelectionRange(0,this.value.length)},300)});const r=Array.from(document.querySelectorAll(".pressAndHold"));Array.from(r).forEach(i=>Nt.addPressAndHold(i))}function Ng(){const t=rt.get("current_match");if(t)Li(t),gr(),mr(),pr();else{const e=rt.get("match_archive");Pi(),e||Vc(!0)}}const Lg="/assets/courthive-transparent-logo-EnCfo38b.png";function Rg(t){t&&(document.querySelector("#app").innerHTML=`
  <div>
    <a href="https://courthive.com" target="_blank">
      <img src="${Lg}" class="logo" alt="Vite logo" />
    </a>
    <h1 class="name">CourtHive</h1>
  </div>
`)}var Pg=/([:*])(\w+)/g,Ig="([^/]+)",Dg=/\*/g,Fg="?(?:.*)",Bg=/\/\?/g,Ug="/?([^/]+|)",Hg="(?:/^|^)",$g="";function Kc(t){return t===void 0&&(t="/"),ms()?location.pathname+location.search+location.hash:t}function ht(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function cr(t){return typeof t=="string"}function zg(t){return typeof t=="function"}function lr(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function Gg(t,e){return e.length===0||!t?null:t.slice(1,t.length).reduce(function(n,r,i){return n===null&&(n={}),n[e[i]]=decodeURIComponent(r),n},null)}function ur(t){var e=ht(t).split(/\?(.*)?$/);return[ht(e[0]),e.slice(1).join("")]}function ps(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]!==""){var s=decodeURIComponent(i[0]);e[s]?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(decodeURIComponent(i[1]||""))):e[s]=decodeURIComponent(i[1]||"")}}return e}function Jc(t,e){var n=ur(ht(t.currentLocationPath)),r=n[0],i=n[1],s=i===""?null:ps(i),o=[],a;if(cr(e.path)){if(a=Hg+ht(e.path).replace(Pg,function(f,h,d){return o.push(d),Ig}).replace(Dg,Fg).replace(Bg,Ug)+"$",ht(e.path)===""&&ht(r)==="")return{url:r,queryString:i,hashString:lr(t.to),route:e,data:null,params:s}}else a=e.path;var l=new RegExp(a,$g),c=r.match(l);if(c){var u=cr(e.path)?Gg(c,o):c.groups?c.groups:c.slice(1);return{url:ht(r.replace(new RegExp("^"+t.instance.root),"")),queryString:i,hashString:lr(t.to),route:e,data:u,params:s}}return!1}function jc(){return!!(typeof window<"u"&&window.history&&window.history.pushState)}function me(t,e){return typeof t[e]>"u"||t[e]===!0}function qg(t){if(!t)return{};var e=t.split(","),n={},r;return e.forEach(function(i){var s=i.split(":").map(function(o){return o.replace(/(^ +| +$)/g,"")});switch(s[0]){case"historyAPIMethod":n.historyAPIMethod=s[1];break;case"resolveOptionsStrategy":r||(r={}),r.strategy=s[1];break;case"resolveOptionsHash":r||(r={}),r.hash=s[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":n[s[0]]=s[1]==="true";break}}),r&&(n.resolveOptions=r),n}function ms(){return typeof window<"u"}function Wg(t,e){return t===void 0&&(t=[]),e===void 0&&(e={}),t.filter(function(n){return n}).forEach(function(n){["before","after","already","leave"].forEach(function(r){n[r]&&(e[r]||(e[r]=[]),e[r].push(n[r]))})}),e}function zt(t,e,n){var r=e||{},i=0;(function s(){if(!t[i]){n&&n(r);return}Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),s()):t[i](r,function(o){typeof o>"u"||o===!0?(i+=1,s()):n&&n(r)})})()}zt.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};function zo(t,e){typeof t.currentLocationPath>"u"&&(t.currentLocationPath=t.to=Kc(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function jr(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=t.instance.routes[n],i=Jc(t,r);if(i&&(t.matches||(t.matches=[]),t.matches.push(i),t.resolveOptions.strategy==="ONE")){e();return}}e()}function Yg(t,e){t.navigateOptions&&(typeof t.navigateOptions.shouldResolve<"u"&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),typeof t.navigateOptions.silent<"u"&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function Vg(t,e){t.navigateOptions.force===!0?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}var Go=ms(),Xg=jc();function Kg(t,e){if(me(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=Go&&t.resolveOptions&&t.resolveOptions.hash===!0;Xg?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout(function(){if(!r){var i=location.hash;location.hash="",location.hash=i}t.instance.__freezeListening=!1},1))):Go&&(window.location.href=t.to)}e()}function Zc(t,e){var n=t.instance;if(!n.lastResolved()){e();return}zt(n.lastResolved().map(function(r){return function(i,s){if(!r.route.hooks||!r.route.hooks.leave){s();return}var o=!1,a=t.instance.matchLocation(r.route.path,t.currentLocationPath,!1);if(r.route.path!=="*")o=!a;else{var l=t.matches?t.matches.find(function(c){return r.route.path===c.route.path}):!1;o=!l}if(me(t.navigateOptions,"callHooks")&&o){zt(r.route.hooks.leave.map(function(c){return function(u,f){return c(function(h){h===!1?t.instance.__markAsClean(t):f()},t.matches&&t.matches.length>0?t.matches.length===1?t.matches[0]:t.matches:void 0)}}).concat([function(){return s()}]));return}else s()}}),{},function(){return e()})}function Jg(t,e){t.match.route.hooks&&t.match.route.hooks.before&&me(t.navigateOptions,"callHooks")?zt(t.match.route.hooks.before.map(function(n){return function(i,s){return n(function(o){o===!1?t.instance.__markAsClean(t):s()},t.match)}}).concat([function(){return e()}])):e()}function jg(t,e){me(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()}function Zg(t,e){t.match.route.hooks&&t.match.route.hooks.after&&me(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach(function(n){return n(t.match)}),e()}function Qg(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString){n.forEach(function(r){r.route.hooks&&r.route.hooks.already&&me(t.navigateOptions,"callHooks")&&r.route.hooks.already.forEach(function(i){return i(t.match)})}),e(!1);return}e()}function ty(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=ur(t.currentLocationPath),i=r[0],s=r[1],o=lr(t.to);n.path=ht(i);var a={url:n.path,queryString:s,hashString:o,data:null,route:n,params:s!==""?ps(s):null};t.matches=[a],t.match=a}e()}function ey(t,e){(!t.resolveOptions||t.resolveOptions.noMatchWarning===!1||typeof t.resolveOptions.noMatchWarning>"u")&&console.warn('Navigo: "'+t.currentLocationPath+`" didn't match any of the registered routes.`),e()}function ny(t,e){t.instance._setCurrent(null),e()}function Qc(t,e){me(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var tl=[Qg,Jg,jg,Zg],qo=[Zc,ty,zt.if(function(t){var e=t.notFoundHandled;return e},tl.concat([Qc]),[ey,ny])];function Si(){return Si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Si.apply(this,arguments)}function Wo(t,e){var n=0;function r(){if(n===t.matches.length){Qc(t,e);return}zt(tl,Si({},t,{match:t.matches[n]}),function(){n+=1,r()})}Zc(t,r)}function Zr(t){t.instance.__markAsClean(t)}function Ei(){return Ei=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ei.apply(this,arguments)}var Yo="[data-navigo]";function ry(t,e){var n=e||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:Yo},r=this,i="/",s=null,o=[],a=!1,l,c=jc(),u=ms();t?i=ht(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.');function f(S){return S.indexOf("#")>=0&&(n.hash===!0?S=S.split("#")[1]||"/":S=S.split("#")[0]),S}function h(S){return ht(i+"/"+ht(S))}function d(S,C,M,T){return S=cr(S)?h(S):S,{name:T||ht(String(S)),path:S,handler:C,hooks:Wg(M)}}function p(S,C,M){var T=this;return typeof S=="object"&&!(S instanceof RegExp)?(Object.keys(S).forEach(function(N){if(typeof S[N]=="function")T.on(N,S[N]);else{var $=S[N],W=$.uses,E=$.as,F=$.hooks;o.push(d(N,W,[l,F],E))}}),this):(typeof S=="function"&&(M=C,C=S,S=i),o.push(d(S,C,[l,M])),this)}function m(S,C){if(r.__dirty){r.__waiting.push(function(){return r.resolve(S,C)});return}else r.__dirty=!0;S=S?ht(i)+"/"+ht(S):void 0;var M={instance:r,to:S,currentLocationPath:S,navigateOptions:{},resolveOptions:Ei({},n,C)};return zt([zo,jr,zt.if(function(T){var N=T.matches;return N&&N.length>0},Wo,qo)],M,Zr),M.matches?M.matches:!1}function _(S,C){if(r.__dirty){r.__waiting.push(function(){return r.navigate(S,C)});return}else r.__dirty=!0;S=ht(i)+"/"+ht(S);var M={instance:r,to:S,navigateOptions:C||{},resolveOptions:C&&C.resolveOptions?C.resolveOptions:n,currentLocationPath:f(S)};zt([Yg,Vg,jr,zt.if(function(T){var N=T.matches;return N&&N.length>0},Wo,qo),Kg,Zr],M,Zr)}function A(S,C,M){var T=V(S,C);return T!==null?(_(T.replace(new RegExp("^/?"+i),""),M),!0):!1}function k(S){return this.routes=o=o.filter(function(C){return cr(S)?ht(C.path)!==ht(S):zg(S)?S!==C.handler:String(C.path)!==String(S)}),this}function x(){c&&(this.__popstateListener=function(){r.__freezeListening||m()},window.addEventListener("popstate",this.__popstateListener))}function O(){this.routes=o=[],c&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=a=!0}function L(S,C){return r._notFoundRoute=d("*",S,[l,C],"__NOT_FOUND__"),this}function v(){if(u)return y().forEach(function(S){if(S.getAttribute("data-navigo")==="false"||S.getAttribute("target")==="_blank"){S.hasListenerAttached&&S.removeEventListener("click",S.navigoHandler);return}S.hasListenerAttached||(S.hasListenerAttached=!0,S.navigoHandler=function(C){if((C.ctrlKey||C.metaKey)&&C.target.tagName.toLowerCase()==="a")return!1;var M=S.getAttribute("href");if(typeof M>"u"||M===null)return!1;if(M.match(/^(http|https)/)&&typeof URL<"u")try{var T=new URL(M);M=T.pathname+T.search}catch{}var N=qg(S.getAttribute("data-navigo-options"));a||(C.preventDefault(),C.stopPropagation(),r.navigate(ht(M),N))},S.addEventListener("click",S.navigoHandler))}),r}function y(){return u?[].slice.call(document.querySelectorAll(n.linksSelector||Yo)):[]}function g(S){return"/"+i+"/"+ht(S)}function P(S){return l=S,this}function G(){return s}function V(S,C,M){var T=o.find(function(W){return W.name===S}),N=null;if(T){if(N=T.path,C)for(var $ in C)N=N.replace(":"+$,C[$]);N=N.match(/^\//)?N:"/"+N}return N&&M&&!M.includeRoot&&(N=N.replace(new RegExp("^/"+i),"")),N}function Z(S){return S.getAttribute("href")}function Y(S){var C=ur(ht(S)),M=C[0],T=C[1],N=T===""?null:ps(T),$=lr(S),W=d(M,function(){},[l],M);return{url:M,queryString:T,hashString:$,route:W,data:null,params:N}}function H(){return Y(ht(Kc(i)).replace(new RegExp("^"+i),""))}function X(S){var C={instance:r,currentLocationPath:S,to:S,navigateOptions:{},resolveOptions:n};return jr(C,function(){}),C.matches?C.matches:!1}function U(S,C,M){typeof C<"u"&&(typeof M>"u"||M)&&(C=h(C));var T={instance:r,to:C,currentLocationPath:C};zo(T,function(){}),typeof S=="string"&&(S=typeof M>"u"||M?h(S):S);var N=Jc(T,{name:String(S),path:S,handler:function(){},hooks:{}});return N||!1}function j(S,C,M){return typeof C=="string"&&(C=J(C)),C?(C.hooks[S]||(C.hooks[S]=[]),C.hooks[S].push(M),function(){C.hooks[S]=C.hooks[S].filter(function(T){return T!==M})}):(console.warn("Route doesn't exists: "+C),function(){})}function J(S){return typeof S=="string"?o.find(function(C){return C.name===h(S)}):o.find(function(C){return C.handler===S})}function I(S){S.instance.__dirty=!1,S.instance.__waiting.length>0&&S.instance.__waiting.shift()()}this.root=i,this.routes=o,this.destroyed=a,this.current=s,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=I,this.on=p,this.off=k,this.resolve=m,this.navigate=_,this.navigateByName=A,this.destroy=O,this.notFound=L,this.updatePageLinks=v,this.link=g,this.hooks=P,this.extractGETParameters=function(S){return ur(f(S))},this.lastResolved=G,this.generate=V,this.getLinkPath=Z,this.match=X,this.matchLocation=U,this.getCurrentLocation=H,this.addBeforeHook=j.bind(this,"before"),this.addAfterHook=j.bind(this,"after"),this.addAlreadyHook=j.bind(this,"already"),this.addLeaveHook=j.bind(this,"leave"),this.getRoute=J,this._pathToMatchObject=Y,this._clean=ht,this._checkForAHash=f,this._setCurrent=function(S){return s=r.current=S},x.call(this),v.call(this)}var iy={};function sy(){window.location.host.startsWith("localhost")||iy.PUBLIC_URL;const t=!0,e=new ry("/",{hash:t});e.on("/default",()=>Rg(!1)),e.notFound(()=>{e.navigate("/default")}),e.resolve()}Mg();sy();
//# sourceMappingURL=index-MMoUjJbG.js.map
